webpackJsonp([0], [, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(30);
    t.Binder = n.Binder, t.isBinderClass = n.isBinderClass;
    var r = i(17);
    t.StageBinder = r.StageBinder;
    var o = i(62);
    t.CollectionBinder = o.CollectionBinder;
    var a = i(1060);
    t.ConditionBinder = a.ConditionBinder;
    var s = i(16);
    t.autowired = s.autowired;
    var c = i(561);
    t.select = c.select
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.CLICK = "click", n.CONTEXT_MENU = "contextMenu", n.DOUBLE_CLICK = "doubleClick", n.MIDDLE_CLICK = "middleClick", n.MIDDLE_MOUSE_DOWN = "middleMouseDown", n.MIDDLE_MOUSE_UP = "middleMouseUp", n.MOUSE_DOWN = "mouseDown", n.MOUSE_MOVE = "mouseMove", n.MOUSE_OUT = "mouseOut", n.MOUSE_OVER = "mouseOver", n.MOUSE_UP = "mouseUp", n.MOUSE_WHEEL = "mouseWheel", n.RELEASE_OUTSIDE = "releaseOutside", n.RIGHT_CLICK = "rightClick", n.RIGHT_MOUSE_DOWN = "rightMouseDown", n.RIGHT_MOUSE_UP = "rightMouseUp", n.ROLL_OUT = "rollOut", n.ROLL_OVER = "rollOver", t.MouseEventEx = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        var i = t.$inject || [],
            n = i.concat(function() {
                var e = new t,
                    n = {},
                    r = arguments;
                return i.forEach(function(e, t) {
                    n[e] = r[t]
                }), e.injections = n, e
            });
        angular.module("edge.react").factory(e, n)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(215),
        o = i(827),
        a = i(828),
        s = i(891);
    t.Provider = s.Provider, t.connect = s.connect;
    var c = i(22),
        d = i(34),
        l = {},
        u = function(e) {
            var i = e.getState;
            return function(e) {
                var n = !1,
                    r = [];
                return function(o) {
                    if (n) return void r.push(o);
                    n = !0;
                    var s = e(o);
                    n = !1;
                    var d = r.pop();
                    if (!d) return s;
                    for (var u = l = i(), p = 0, h = r; p < h.length; p++) {
                        var f = h[p];
                        l = a.reducer(l, f)
                    }
                    return r = [], u !== l && c.assign(u, l), t.store.dispatch(d)
                }
            }
        },
        p = function(e) {
            e.getState;
            return function(e) {
                return function(t) {
                    try {
                        return e(t)
                    } catch (e) {
                        var i = d.getInjector().get("exceptionHandleService");
                        i.catchReduxError(e, t)
                    }
                }
            }
        },
        h = r.applyMiddleware(o.default, u, p)(r.createStore);
    t.store = h(a.reducer, l),
        function(e) {
            for (var i in e) t.hasOwnProperty(i) || (t[i] = e[i])
        }(i(918)), t.service = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = i(6),
        o = i(29),
        a = i(7),
        s = i(173);
    t.MaxSetTimeoutDelay = 2147483647;
    var c = function() {
        function e() {}
        return e.stripHtml = function(e) {
            return String(e).replace(/<[^>]+>/gm, " ")
        }, e.formatLapTime = function(e) {
            return new Date(e || 0).toISOString().slice(-10, -1)
        }, e.getLocalISOString = function(e) {
            var t = new Date(e);
            return t.getFullYear() + "/" + ("0" + (t.getMonth() + 1)).slice(-2) + "/" + ("0" + t.getDate()).slice(-2) + "/" + ("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2) + ":" + ("0" + t.getSeconds()).slice(-2)
        }, e.getUUID = function() {
            var e = (new Date).getTime();
            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t) {
                var i = (e + 16 * Math.random()) % 16 | 0;
                return e = Math.floor(e / 16), ("x" === t ? i : 3 & i | 8).toString(16)
            })
        }, e.isUrl = function(e) {
            var t = /(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,
                i = t.test(e);
            return i || console.error("invalid url-pattern - ", e), i
        }, e.changeNumberToText = function(e, t, i, n, r) {
            if (void 0 !== e) {
                var o = "",
                    a = e;
                return a.length > 12 && (o = a.substring(0, a.length - 12) + r, a = a.substring(a.length - 12, a.length)), a.length > 8 && ("0000" !== a.substring(0, a.length - 8) && (o = o + a.substring(0, a.length - 8) + n), a = a.substring(a.length - 8, a.length)), a.length > 4 && ("0000" !== a.substring(0, a.length - 4) && (o = o + a.substring(0, a.length - 4) + i), a = a.substring(a.length - 4, a.length)), a.length > 3 && ("0" !== a.substring(0, a.length - 3) && (o = o + a.substring(0, a.length - 3) + t), a = a.substring(a.length - 3, a.length)), "000" !== a && (o += a), o
            }
        }, e.toMoney = function(e) {
            return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, "$1,")
        }, e.toNumberString = function(e) {
            return e.split(",").join("").replace(/[^0-9\.]/g, "")
        }, e.validateNumber = function(e) {
            var t = e.originalEvent || e;
            return !!o.KeyboardMap.getKeyName(t.keyCode) && -1 !== n.indexOf(["BACK_SPACE", "DELETE", "LEFT", "RIGHT", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "NUMPAD0", "NUMPAD1", "NUMPAD2", "NUMPAD3", "NUMPAD4", "NUMPAD5", "NUMPAD6", "NUMPAD7", "NUMPAD8", "NUMPAD9"], o.KeyboardMap.getKeyName(t.keyCode))
        }, e.makeEmptyView = function(e) {
            return {
                "edge-ui-container@": {
                    template: "<div></div>",
                    controller: e + "Controller"
                }
            }
        }, e.generateAnnotated = function(e) {
            return (e.$inject || []).concat(function() {
                return new(Function.prototype.bind.apply(e, [null].concat(n.toArray(arguments))))
            })
        }, e.generateService = function(e) {
            return this.generateAnnotated(e)
        }, e.generateProvider = function(e) {
            return this.generateAnnotated(e)
        }, e.defer = function() {
            var e, t, i = new r(function() {
                e = arguments[0], t = arguments[1]
            });
            return {
                resolve: e,
                reject: t,
                promise: i
            }
        }, e.timeout = function(e, t) {
            return new r(function(i) {
                setTimeout(function() {
                    e(), i()
                }, t)
            })
        }, e.interval = function(e, t, i) {
            return new r(function(n) {
                var r = setInterval(function() {
                    e(), 0 == --i && (clearInterval(r), n())
                }, t)
            })
        }, e.on = function(e, t, i) {
            return e.on(t, i),
                function() {
                    return e.removeListener(t, i)
                }
        }, e.once = function(e, t, i) {
            return e.once(t, i),
                function() {
                    return e.removeListener(t, i)
                }
        }, e.calculateOVR = function(e) {
            var t = n.pick(e, "topSpeed", "acceleration", "nitroCapacity"),
                i = n.size(t),
                r = n.reduce(t, function(e, t) {
                    return e + t
                });
            return Math.floor(r / i)
        }, e.toMoneyNumber = function(t, i) {
            var r = t.match(/[0-9]/g),
                o = "";
            null !== r && (o = r.join(""));
            var a = parseInt(o, 10);
            if (n.isEmpty(o) || n.isNaN(a)) throw Error("Number format exception");
            var s = e.toNumberString(i);
            return a * Math.pow(10, s.length)
        }, e.calcGlobalOffset = function(e) {
            if (!e.length) return {
                left: 0,
                top: 0,
                width: 0,
                height: 0
            };
            var t = document.body.style,
                i = t.getPropertyValue("-webkit-transform");
            t.setProperty("-webkit-transform", "scale(1)");
            try {
                var r = e.get(0),
                    o = r.getBoundingClientRect();
                if (0 === o.width && 0 === o.height) {
                    var s;
                    n.find(r.children, function(e) {
                        return "svg" === e.tagName && (s = e.getBoundingClientRect(), s.top === o.top && s.left === o.left)
                    }) && (o = s)
                }
                return {
                    left: o.left,
                    top: o.top,
                    width: o.width,
                    height: o.height
                }
            } catch (t) {
                throw a.error("Util.calcGlobalOffset", e, t), t
            } finally {
                t.setProperty("-webkit-transform", i)
            }
        }, e.yyyymmdd = function(e) {
            return {
                year: e.getFullYear(),
                month: e.getMonth() + 1,
                day: e.getDate()
            }
        }, e.getBasePriceDivider = function(e) {
            return e >= 5e8 ? 1e7 : e >= 5e7 ? 1e6 : e >= 5e6 ? 1e5 : e >= 5e5 ? 1e4 : e >= 5e4 ? 1e3 : 100
        }, e.numberWithCommas = function(e) {
            return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
        }, e.formatDriftPoint = function(t) {
            return "" + e.numberWithCommas(t)
        }, e.calcLabelDuration = function(e, t) {
            var i = e.timeline,
                r = i.getLabelsArray(),
                o = n.findIndex(r, function(e) {
                    return t === e.name
                });
            if (-1 === o) return 0;
            var a = r[o];
            return o === r.length - 1 ? i.duration() - a.time : r[o + 1].time - a.time
        }, e.blockEdgeContentsMouseEvent = function(e) {
            a.debug(">>> blockEdgeContentsMouseEvent: " + e), e ? $("#edge-contents").addClass("prevent-click") : $("#edge-contents").removeClass("prevent-click")
        }, e.blockEdgeModalsMouseEvent = function(e) {
            a.debug(">>> blockEdgeModalsMouseEvent: " + e), e ? $("#edge-modals").addClass("prevent-click") : $("#edge-modals").removeClass("prevent-click")
        }, e.resizeTooltipByText = function(e, t) {
            function i() {
                switch ($("#edge-ui").attr("data-ratio")) {
                    case "ratio-Ratio4x3":
                        return 1680;
                    case "ratio-Ratio16x10":
                        return 1822;
                    case "ratio-Ratio5x3":
                        return 1858;
                    default:
                        return 1920
                }
            }
            var n = e.$(".id-tooltip .id-textField"),
                r = e.$(".id-tooltip .id-background"),
                o = e.$(".id-tooltip .id-arrow");
            t && (n.text = t);
            var a = r.scale9Grid.left,
                s = function(e) {
                    var t = $(e.htmlElement).clone().css({
                            width: "auto",
                            top: "100%"
                        }).appendTo("#edge-ui"),
                        i = t.width();
                    return t.remove(), i
                }(n) + 2 * a,
                c = Math.max(170, s),
                d = c / r.width;
            r.regX = 0, r.scaleXMultiplier = d, r.x = o.x + .5 * (o.width - c);
            var l = this.calcGlobalOffset($(r.htmlElement)).left;
            l + c > i() + 10 && (r.x -= l + c - i() - 10), n.x = r.x + a + .5 * (c - s)
        }, e.getGlobalYPosition = function(e) {
            return e.parent ? e.y + this.getGlobalYPosition(e.parent) : e.y
        }, e.pad = function(e, t, i) {
            return i = i || "0", e += "", e.length >= t ? e : new Array(t - e.length + 1).join(i) + e
        }, e.compareDate = function(e, t) {
            var i = this.toLocalDay(e),
                n = this.toLocalDay(t);
            return i === n ? 0 : i > n ? 1 : -1
        }, e.toLocalDay = function(e) {
            return Math.floor((e.getTime() - 60 * e.getTimezoneOffset() * 1e3) / 864e5)
        }, e.compareDateTime = function(e, t) {
            var i = e.valueOf(),
                n = t.valueOf();
            return i === n ? 0 : i > n ? 1 : -1
        }, e.compareCarClass = function(e, t) {
            if (e === t) return 0;
            var i = (e.match(/S/gi) || []).length,
                n = (t.match(/S/gi) || []).length;
            return 0 === i && 0 === n ? e > t ? -1 : 1 : i > n ? 1 : -1
        }, e.getPriceIconLabel = function(e) {
            switch (e) {
                case "NXCASH":
                case "TCCASH":
                    return "cash";
                case "MILEAGE":
                    return "mileage";
                default:
                    return "sp"
            }
        }, e.getRewardName = function(t, i) {
            var n = "" + e.stripHtml(i("rewardName")(t.type, t.code, t.count, t.opts));
            return -1 === s.NumericalItem.indexOf(t.type) && t.count > 1 && (n += " " + t.count + i("translate")("SHOP_POPUP_PURCHASE_AMOUNT")), n
        }, e.transpostionArraies = function(e) {
            var t = [];
            if (e.length <= 0) return [];
            var i = e[0].length;
            return i <= 0 ? [] : (n.times(i, function(e) {
                t.push([])
            }), n.forEach(e, function(e, r) {
                if (e.length !== i) return [];
                n.forEach(e, function(e, i) {
                    t[i].push(e)
                })
            }), t)
        }, e.applyCounter = function(t, i, n, r) {
            void 0 === r && (r = 500), t.prop("Counter", i).animate({
                Counter: n
            }, {
                duration: r,
                easing: "swing",
                step: function(i) {
                    return t.text(e.toMoney(Math.ceil(i)))
                }
            })
        }, e.isMongooseId = function(e) {
            return new RegExp("^[0-9a-fA-F]{24}$").test(e)
        }, e.isEmptyString = function(e) {
            return "string" != typeof e || n.isEmpty(n.trim(e))
        }, e.normalizeUrl = function(e) {
            return /^\w[\w\d+\-\.]*:\/\//.test(e) || (e = "http://" + e), e
        }, e.testWidth = function(t, i) {
            var n = $(t.htmlElement).clone().css({
                    width: "auto",
                    top: "100%"
                }).appendTo("#edge-ui").text(e.stripHtml(i) || ""),
                r = n.width();
            return n.remove(), r
        }, e.queuedDispatcher = function(e) {
            var t = [],
                i = n.debounce(function() {
                    e(t), t = []
                });
            return function(e) {
                t.push(e), i()
            }
        }, e
    }();
    c.service = c.generateService, c.provider = c.generateProvider, c.hudStateList = ["root.hudItem", "root.hudSpeed", "root.hudSpeedTeam", "root.hudDrift", "root.hudFoxHunting", "root.hudPursuit", "root.hudSpeed1On1", "root.hudSpeedObserver", "root.hudSpeedTeamObserver", "root.LicenseHudItem", "root.LicenseHudSpeed", "root.timetrialHud"], c.loadingStateList = ["root.hudItem.loading", "root.hudSpeed.loading", "root.hudSpeedTeam.loading", "root.hudDrift.loading", "root.hudFoxHunting.loading", "root.hudPursuit.loading", "root.hudSpeed1On1.loading", "root.hudSpeedObserver.loading", "root.hudSpeedTeamObserver.loading", "root.LicenseLoading", "root.TimetrialLoading"], c.gameModeToHudState = {
        SPEEDINDIVIDUAL: "root.hudSpeed",
        SPEEDTEAM: "root.hudSpeedTeam",
        ITEMINDIVIDUAL: "root.hudItem",
        DRIFTINDIVIDUAL: "root.hudDrift",
        FOXHUNTINGINDIVIDUAL: "root.hudFoxHunting",
        PURSUITINDIVIDUAL: "root.hudPursuit",
        SPEED1ON1: "root.hudSpeed1On1",
        TIMETRIAL: "root.timetrial",
        SPEEDINDIVIDUALAI: "root.hudSpeed"
    }, t.default = c
}, , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = function() {
            function e(e, t) {
                this._isDefaultPrevented = !1, e && e.type ? (this.originalEvent = e, this.type = e.type) : this.type = e, t && n.assign(this, t), this.timeStamp = e && e.timeStamp || Date.now()
            }
            return e.prototype.isDefaultPrevented = function() {
                return this._isDefaultPrevented
            }, e.prototype.preventDefault = function() {
                this._isDefaultPrevented = !0
            }, e
        }();
    r.ACTIVATE = "activate", r.ADDED = "added", r.ADDED_TO_STAGE = "addedToStage", r.CANCEL = "cancel", r.CHANGE = "change", r.CHANNEL_MESSAGE = "channelMessage", r.CHANNEL_STATE = "channelState", r.CLEAR = "clear", r.CLOSE = "close", r.CLOSING = "closing", r.COMPLETE = "complete", r.CONNECT = "connect", r.CONTEXT3D_CREATE = "context3DCreate", r.COPY = "copy", r.CUT = "cut", r.DEACTIVATE = "deactivate", r.ENTER_FRAME = "enterFrame", r.EXIT_FRAME = "exitFrame", r.EXITING = "exiting", r.FRAME_CONSTRUCTED = "frameConstructed", r.FRAME_LABEL = "frameLabel", r.FULLSCREEN = "fullScreen", r.HTML_BOUNDS_CHANGE = "htmlBoundsChange", r.HTML_DOM_INITIALIZE = "htmlDOMInitialize", r.HTML_RENDER = "htmlRender", r.ID3 = "id3", r.INIT = "init", r.LOCATION_CHANGE = "locationChange", r.MOUSE_LEAVE = "mouseLeave", r.NETWORK_CHANGE = "networkChange", r.OPEN = "open", r.PASTE = "paste", r.PREPARING = "preparing", r.REMOVED = "removed", r.REMOVED_FROM_STAGE = "removedFromStage", r.RENDER = "render", r.RESIZE = "resize", r.SCROLL = "scroll", r.SELECT = "select", r.SELECT_ALL = "selectAll", r.SOUND_COMPLETE = "soundComplete", r.STANDARD_ERROR_CLOSE = "standardErrorClose", r.STANDARD_INPUT_CLOSE = "standardInputClose", r.STANDARD_OUTPUT_CLOSE = "standardOutputClose", r.SUSPEND = "suspend", r.TAB_CHILDREN_CHANGE = "tabChildrenChange", r.TAB_ENABLED_CHANGE = "tabEnabledChange", r.TAB_INDEX_CHANGE = "tabIndexChange", r.TEXT_INTERACTION_MODE_CHANGE = "textInteractionModeChange", r.TEXTURE_READY = "textureReady", r.UNLOAD = "unload", r.USER_IDLE = "userIdle", r.USER_PRESENT = "userPresent", r.VIDEO_FRAME = "videoFrame", r.WORKER_STATE = "workerState", r.REBOOT = "reboot", r.HALT = "halt", r.STOP = "stop", r.SCALE_CHANGE = "scaleChange", r.DESTROY = "destroy", r.DETACH = "detach", r.LOAD = "load", t.EventEx = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.beLevelBootedUp = "beLevelBootedUp", n.beHUDInitItemSlot = "beHUDInitItemSlot", n.beHUDSetSpeedModeTurboGauge = "beHUDSetSpeedModeTurboGauge", n.beHUDSetTeamBonusGauge = "beHUDSetTeamBonusGauge", n.beHUDSetTeamBonusEffectEnabled = "beHUDSetTeamBonusEffectEnabled", n.beHUDStartCountdown = "beHUDStartCountdown", n.beHUDStartGame = "beHUDStartGame", n.beHUDPerfectStart = "beHUDPerfectStart", n.beHUDSetDistanceRatio = "beHUDSetDistanceRatio", n.beHUDShowMessage = "beHUDShowMessage", n.beHUDSetLeaderboard = "beHUDSetLeaderboard", n.beHUDSetTeamScore = "beHUDSetTeamScore", n.beHUDSetTotalLaps = "beHUDSetTotalLaps", n.beHUDSetCurrentLap = "beHUDSetCurrentLap", n.beHUDSetTimeElapsed = "beHUDSetTimeElapsed", n.beHUDSetTachometer = "beHUDSetTachometer", n.beHUDSetNitrous = "beHUDSetNitrous", n.beHUDSetNitrousIncreaseReason = "beHUDSetNitrousIncreaseReason", n.beHUDAddItem = "beHUDAddItem", n.beHUDUseItem = "beHUDUseItem", n.beHUDInitEMPIndicator = "beHUDInitEMPIndicator", n.beHUDSetEMPIndicatorAreaPosition = "beHUDSetEMPIndicatorAreaPosition", n.beHUDToggleEMPIndicatorTarget = "beHUDToggleEMPIndicatorTarget", n.beHUDSetEMPIndicatorTargetPosition = "beHUDSetEMPIndicatorTargetPosition", n.beHUDCancelEMPIndicator = "beHUDCancelEMPIndicator", n.beHUDFireEMPIndicator = "beHUDFireEMPIndicator", n.beHUDInitTargetedEMPIndicator = "beHUDInitTargetedEMPIndicator", n.beHUDToggleTargetedEMPIndicatorTarget = "beHUDToggleTargetedEMPIndicatorTarget", n.beHUDSetTargetedEMPIndicatorPosition = "beHUDSetTargetedEMPIndicatorPosition", n.beHUDCancelTargetedEMPIndicator = "beHUDCancelTargetedEMPIndicator", n.beHUDFireTargetedEMPIndicator = "beHUDFireTargetedEMPIndicator", n.beHUDInitHeliIndicator = "beHUDInitHeliIndicator", n.beHUDSetHeliIndicatorPosition = "beHUDSetHeliIndicatorPosition", n.beHUDFireHeliIndicator = "beHUDFireHeliIndicator", n.beHUDInitIonCannonIndicator = "beHUDInitIonCannonIndicator", n.beHUDSetIonCannonIndicatorPosition = "beHUDSetIonCannonIndicatorPosition", n.beHUDFireIonCannonIndicator = "beHUDFireIonCannonIndicator", n.beHUDStartSpeedModeTurbo = "beHUDStartSpeedModeTurbo", n.beHUDUseSpeedModeSuperTurbo = "beHUDUseSpeedModeSuperTurbo", n.beHUDEndSpeedModeTurbo = "beHUDEndSpeedModeTurbo", n.beHUDSetInfiniteNitro = "beHUDSetInfiniteNitro", n.beRevealShowInfo = "beRevealShowInfo", n.beRevealEnded = "beRevealEnded", n.beToggleEdgeUi = "beToggleEdgeUi", n.beHUDSetHpGauge = "beHUDSetHpGauge", n.beAddTakeDownRecord = "beAddTakeDownRecord", n.beAddHitRecord = "beAddHitRecord", n.beAddItemHitRecord = "beAddItemHitRecord", n.beAddJumpRangeRecord = "beAddJumpRangeRecord", n.beAddDriftDuringTimeRecord = "beAddDriftDuringTimeRecord", n.beStartShortTurbo = "beStartShortTurbo", n.beAddBrakeUseRecord = "beAddBrakeUseRecord", n.beAddSlipStreamDuringTime = "beAddSlipStreamDuringTime", n.beFinishGame = "beFinishGame", n.beHUDStartChecker = "beHUDStartChecker", n.beImageLoaded = "beImageLoaded", n.beConnectionError = "beConnectionError", n.beAllPlayerLoaded = "beAllPlayerLoaded", n.beSecurityLog = "beSecurityLog", n.beCollectGameRecord = "beCollectGameRecord", n.beWaitingRoomFeedbackCameraWork = "beWaitingRoomFeedbackCameraWork", n.beAddRecord = "beAddRecord", n.bePushLoadingProgress = "bePushLoadingProgress", n.beOnFinishDrivingTutorial = "beOnFinishDrivingTutorial", n.beOnStartDrivingTutorialStep = "beOnStartDrivingTutorialStep", n.beSendSingleGameInfo = "beSendSingleGameInfo", n.beOnReadyToStartDrivingTutorial = "beOnReadyToStartDrivingTutorial", n.beDestroyObject = "beDestroyObject", n.beHostModeServerCreated = "beHostModeServerCreated", n.beSendAntiPkg = "beSendAntiPkg", n.beAntiPkgDecrypted = "beAntiPkgDecrypted", n.beShowWrongWayDrivingAlert = "beShowWrongWayDrivingAlert", n.beHudSetCurrentDriftInfo = "beHudSetCurrentDriftInfo", n.beHudDPResetReason = "beHudDPResetReason", n.beHUDSetLeaderboardVisible = "beHUDSetLeaderboardVisible", n.beHUDSetTurboSlotVisible = "beHUDSetTurboSlotVisible", n.beHUDSetFoxhuntingInfo = "beHUDSetFoxhuntingInfo", n.beHUDSetFoxhuntingWinType = "beHUDSetFoxhuntingWinType", n.beHUDSetFoxhuntingMinimapCoord = "beHUDSetFoxhuntingMinimapCoord", n.beMakeBalanceTest = "beMakeBalanceTest", n.beSyncViewScale = "beSyncViewScale", n.beHUDSetPursuitModeClass = "beHUDSetPursuitModeClass", n.beSpeed1vs1FinishGameByDistGap = "beSpeed1vs1FinishGameByDistGap", n.beSetLoadingScreenForLevel = "beSetLoadingScreenForLevel", n.beSetLoadingProgressForLevel = "beSetLoadingProgressForLevel", n.beGetAntibotHost = "beGetAntibotHost", n.beGetNGSHost = "beGetNGSHost", n.beVehicleTeleported = "beVehicleTeleported", n.beLicenseNotifyInput = "beLicenseNotifyInput", n.beLicenseNotifySubStep = "beLicenseNotifySubStep", n.beRequestShutdown = "beRequestShutdown", n.beNotifyCertificateError = "beNotifyCertificateError", n.beOpenCandidates = "beOpenCandidates", n.beCloseCandidates = "beCloseCandidates", n.beChangeCandidates = "beChangeCandidates", n.beHudSetDriftingInfo = "beHudSetDriftingInfo", n.beHudSetSlipStreamingInfo = "beHudSetSlipStreamingInfo", n.beHudSetJumpingInfo = "beHudSetJumpingInfo", n.beAvailableDriftBooster = "beAvailableDriftBooster", n.beAvailableSuperTurbo = "beAvailableSuperTurbo", n.beAbortRace = "beAbortRace", n.beHUDUpdateItem = "beHUDUpdateItem", n.beHUDToggleAutoUseItem = "beHUDToggleAutoUseItem", n.beHUDUpdateChasingAiVehicle = "beHUDUpdateChasingAiVehicle", n.beHUDUpdatePursuitArrestState = "beHUDUpdatePursuitArrestState", n.beHudPursuitShowNotice = "beHudPursuitShowNotice", n.beHudToggleMinimap = "beHudToggleMinimap", n.beHUDPursuitArrested = "beHUDPursuitArrested", n.beHUDSetDrivingAssist = "beHUDSetDrivingAssist", n.beHUDResetItemSlot = "beHUDResetItemSlot", n.beHUDObserverSelectPlayer = "beHUDObserverSelectPlayer", n.beFinishTimeTrial = "beFinishTimeTrial", n.beSetGhostDistance = "beSetGhostDistance", n.bePromptOnOpenworldRace = "bePromptOnOpenworldRace", n.bePromptBlockedChanged = "bePromptBlockedChanged", n.bePromptOffOpenworldRace = "bePromptOffOpenworldRace", n.beAcceptOpenworldRace = "beAcceptOpenworldRace", n.beStartOpenworldRace = "beStartOpenworldRace", n.beFinishOpenworldRace = "beFinishOpenworldRace", n.beOnOpenworldSpot = "beOnOpenworldSpot", n.beHUDSetCheckpointCompleted = "beHUDSetCheckpointCompleted", n.beSetDistance = "beSetDistance", n.beUnlockOpenworldPortal = "beUnlockOpenworldPortal", n.beHUDSetMyDistanceToFinish = "beHUDSetMyDistanceToFinish", n.beRequestNameTagInfo = "beRequestNameTagInfo", n.beStartedNavigation = "beStartedNavigation", n.beNotifyMemoryExceeded = "beNotifyMemoryExceeded", n.beShowMissionInfo = "beShowMissionInfo", t.CoreEvent = n, t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return new RegExp("^(http(s)?[:]//)", "i").test(e) ? e : t.requestConfig.url + "/" + S + "/" + e
    }

    function r(e) {
        if (p.isError(e)) return e;
        var t = new m.RequestError("Failed to request", e.status),
            i = e.responseJSON;
        if (i) {
            var n = i.code && m.ResponseErrorCode.unapply(i.code) || {};
            p.assign(t, i, n)
        } else 200 === e.status ? (t.name = "parseError", t.message = e.responseText, t.stack = "jquery") : 0 === e.status && "error" === e.statusText && (t.name = "connectionError", t.message = "connectionError", t.stack = "jquery");
        return t
    }

    function o(e) {
        return p.startsWith(e, t.requestConfig.url)
    }

    function a(e, t, i, n) {
        return function(r, a, s) {
            if (o(t)) {
                var c = s.getResponseHeader("date");
                c && g.syncTime(c);
                var d = +new Date - n;
                d > E && T(i, t, a, r, d)
            }
            e(r)
        }
    }

    function s(e, i, o, s) {
        return "" === t.requestConfig.authorization ? (t.beforeSessionQueue.push({
            method: e,
            url: i,
            params: o
        }), h.resolve()) : new h(function(c, d) {
            var l = +new Date,
                u = n(i);
            f.info(">> Edge Request - " + e + " // " + u), $.ajax({
                beforeSend: function(e) {
                    e.setRequestHeader("Authorization", t.requestConfig.authorization)
                },
                url: u,
                method: e,
                contentType: "application/json",
                data: "GET" === e ? o : JSON.stringify(o || {}),
                cache: s || !1,
                timeout: _
            }).done(a(c, u, e, l)).fail(function(t, i) {
                if (p.isEmpty(t.responseText) && 200 === t.status) c();
                else {
                    var n = angular.element(document.body).injector().get("exceptionHandleService");
                    d(r(t)), n.catchRequestError(t, e, u)
                }
            })
        })
    }

    function c(e, t, i, n) {
        return i && (i = {
            result: y.encrypt(i)
        }), s(e, t, i, n)
    }

    function d(e, t, i, n) {
        return new h(function(o, s) {
            var c = +new Date;
            f.info(">> Http Request - " + e + " // " + t), $.ajax({
                beforeSend: function(e) {
                    p.forEach(n, function(t, i) {
                        return e.setRequestHeader(i, t)
                    })
                },
                url: t,
                method: e,
                contentType: "application/json",
                data: "GET" === e ? i : JSON.stringify(i || {}),
                cache: !1,
                timeout: _
            }).done(a(o, t, e, c)).fail(function(i) {
                if (p.isEmpty(i.responseText) && 200 === i.status) o();
                else {
                    var n = angular.element(document.body).injector().get("exceptionHandleService");
                    s(r(i)), n.catchRequestError(i, e, t)
                }
            })
        })
    }

    function l() {
        return 0 === t.beforeSessionQueue.length ? h.resolve() : h.map(t.beforeSessionQueue, function(e) {
            return s(e.method, e.url, e.params)
        }, {
            concurrency: 1
        }).finally(function() {
            t.beforeSessionQueue = []
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u = i(0),
        p = i(22),
        h = i(6),
        f = i(7),
        v = i(174),
        m = i(47),
        g = i(386),
        y = i(770),
        S = "v2",
        _ = 7e3,
        E = 5e3;
    t.requestConfig = {
        url: "",
        authorization: ""
    }, t.beforeSessionQueue = [], t.qualifyError = r;
    var T = function(e, t, i, n, r) {
        var o = "Slow Response > " + e + " " + t,
            a = {
                url: t,
                status: i,
                method: e
            };
        v.captureMessage(o, {
            level: "info",
            tags: a,
            extra: u.__assign({}, a, {
                latency: r
            })
        })
    };
    t.request = s, t.requestCipher = c, t.requestHttp = d, t.disposeQueue = l
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        l[e] = (l[e] || []).concat(t)
    }

    function r(e) {
        return l[e] || []
    }

    function o(e) {
        return d.FreedriveStates[e] ? 1 : d.OpenworldStates[e] ? 2 : d.RaceStates[e] ? 3 : 0
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = i(6),
        s = i(127),
        c = i(1),
        d = i(1061),
        l = {};
    t.getStagesByUrl = r;
    var u = function() {
        function e(t, i, n) {
            void 0 === n && (n = {}), this.views = {}, this.resolve = {}, this.$prebuildContexts = {}, this.container = e.generate("edge-ui-container@"), this.global = e.generate("edge-ui-global@"), this.helpScreen = e.generate("edge-ui-help-screen@"), this.videoGuide = e.generate("edge-ui-video-guide@"), this.dialog = e.generate("edge-ui-dialog@"), this.effect = e.generate("edge-ui-effect@"), this.popup = e.generate("edge-ui-popup@"), this.announcement = e.generate("edge-ui-announcement@"), this.broadcast = e.generate("edge-ui-broadcast@"), this.coreLoading = e.generate("edge-ui-core-loading@"), this.cashCharge = e.generate("edge-ui-cash-charge@"), this.url = t, this.state = i, this.params = n, this.resolvePolicy = {
                when: "LAZY",
                async: "WAIT"
            }, this.coreLevel = o(i)
        }
        return e.prototype.messenger = function(e) {
            return this.views["edge-ui-messenger@"] = e, this
        }, e.prototype.connState = function(e) {
            return this.views["edge-ui-conn-state@"] = e, this
        }, e.generate = function(e) {
            return function(t) {
                return this.views[e] = this.makeView(t), _.assign(this.resolve, (i = {}, i[e + "_buildFace"] = this.buildFaceResolver(), i[e + "_transitionLock"] = this.transitionLockResolver(), i), t.resolve || {}), this;
                var i
            }
        }, e.prototype.setResolve = function(e) {
            return _.assign(this.resolve, e || {}), this
        }, e.prototype.lockTransition = function() {
            var e = {};
            e.promise = new a(function(t, i) {
                e.resolve = t, e.reject = i
            }), this.transitionLock = e
        }, e.prototype.unlockTransition = function() {
            this.transitionLock.resolve(), this.transitionLock = null
        }, e.prototype.abortTransition = function() {
            this.transitionLock.reject(new Error("abortTransition")), this.transitionLock = null
        }, e.prototype.isTransitionLocked = function() {
            return !!this.transitionLock
        }, e.prototype.transitionLockPromise = function() {
            return this.transitionLock && this.transitionLock.promise || a.resolve()
        }, e.prototype.makeTemplate = function(e) {
            var t = this;
            return _.map(e, function(e, i) {
                return t.$prebuildContexts[i].lazy ? '<eg-lazy-scene src="' + i + '"></eg-lazy-scene>' : '<eg-scene src="' + i + '"></eg-scene>'
            }).join("")
        }, e.prototype.buildFaceResolver = function() {
            var e = this;
            return ["$q", "prebuildService", "lazyLoadService", function(t, i, n) {
                var r = [];
                return _.each(e.$prebuildContexts, function(e, t) {
                    e.lazy ? n.setContext(t, e) : r.push(i.loadView(t, e))
                }), t.all(r)
            }]
        }, e.prototype.transitionLockResolver = function() {
            var e = this;
            return function() {
                return e.transitionLock && e.transitionLock.promise || a.resolve()
            }
        }, e.prototype.isStageClass = function(e) {
            return s.isFaceClass(e)
        }, e.prototype.isStageBinderClass = function(e) {
            return c.isBinderClass(e)
        }, e.prototype.isComplexOption = function(e) {
            return e.hasOwnProperty("stageBinder")
        }, e.prototype.getBuildContext = function(e) {
            var t, i, n, r;
            return this.isStageClass(e) ? t = {
                $stage: e
            } : this.isStageBinderClass(e) ? i = e : this.isComplexOption(e) ? (t = e.customComponents, i = e.stageBinder, n = e.willBeDelayLoaded, r = e.lazy) : t = e, {
                customComponents: t,
                stageBinder: i,
                willBeDelayLoaded: n,
                lazy: r
            }
        }, e.prototype.setupContextsForPrebuild = function(e) {
            var t = this,
                i = [];
            _.each(e, function(e, n) {
                t.$prebuildContexts[n] = t.getBuildContext(e), i.push(n)
            }), n(this.url, i)
        }, e.prototype.makeView = function(e) {
            return this.setupContextsForPrebuild(e.stages), {
                controller: e.controller ? /Controller$/.test(e.controller) && e.controller || e.controller + "Controller" : void 0,
                template: this.makeTemplate(e.stages),
                params: e.params
            }
        }, e
    }();
    t.StateDefinition = u, t.default = u
}, function(e, t, i) {
    "use strict";

    function n() {
        return c.store.getState().vehicle
    }

    function r(e) {
        return (n().vehicles || {})[e]
    }

    function o() {
        var e = c.store.getState().player;
        return r(_.get(e, "recent.vid", void 0))
    }

    function a(e) {
        return e && !_.isUndefined(e.remainingCount)
    }

    function s(e) {
        var t = n(),
            i = t.vehicles,
            r = t.vehicleIds,
            o = [];
        return 1 & e && (o = o.concat(_.map(r[1], function(e) {
            return i[e]
        }))), 2 & e && (o = o.concat(_.map(r[2], function(e) {
            return i[e]
        }).filter(function(e) {
            return 0 < e.remainingCount
        }))), 4 & e && (o = o.concat(_.map(r[4], function(e) {
            return i[e]
        }))), o
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = i(3);
    t.getVehicleState = n, t.getVehicleInfo = r, t.getRecentVehicle = o, t.isTrialVehicle = a, t.getVehicles = s, t.getOwnVehicles = _.partial(s, 1), t.getOwnTrialVehicles = _.partial(s, 3), t.getOwnIgrVehicles = _.partial(s, 5), t.getAllVehicles = _.partial(s, 7)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(7),
        a = i(5),
        s = i(4),
        c = i(1078),
        d = i(186),
        l = i(188),
        u = i(12),
        p = i(50);
    t.TooltipType = p.TooltipType, t.TooltipScreen = p.TooltipScreen;
    var h = i(173),
        f = function() {
            function e(e, t, i, n, r, o, a, s) {
                this.service = e, this.type = t, this.option = r, this.position = {
                    side: n,
                    element: i
                }, this.info = this.createInfo(o), this.style = a, this.className = s
            }
            return e.prototype.createInfo = function(e) {
                return e
            }, e.createTooltip = function(t, i, n, r, o, a, s, c) {
                var d = _.assign({
                        marginTop: 0,
                        marginLeft: 0
                    }, a),
                    l = [t, r, i, n, d, o, s, c];
                switch (r) {
                    case p.TooltipType.ItemCard:
                        return new((u = S).bind.apply(u, [void 0].concat(l)));
                    case p.TooltipType.PartsTabContainer:
                        return new((h = y).bind.apply(h, [void 0].concat(l)));
                    case p.TooltipType.ExpDetail:
                        return new((f = E).bind.apply(f, [void 0].concat(l)));
                    case p.TooltipType.PartsSlot:
                        return new((H = T).bind.apply(H, [void 0].concat(l)));
                    case p.TooltipType.PartsMaterialSlot:
                        return new((V = C).bind.apply(V, [void 0].concat(l)));
                    case p.TooltipType.MileageReset:
                        return new((G = P).bind.apply(G, [void 0].concat(l)));
                    case p.TooltipType.BasicDetail:
                        return new(($ = P).bind.apply($, [void 0].concat(l)));
                    case p.TooltipType.BasicTitled:
                        return new((j = b).bind.apply(j, [void 0].concat(l)));
                    case p.TooltipType.Promotion:
                        return new((K = m).bind.apply(K, [void 0].concat(l)));
                    case p.TooltipType.PromotionDurationTime:
                        return new((W = v).bind.apply(W, [void 0].concat(l)));
                    case p.TooltipType.PromotionRewardBoost:
                        return new((z = g).bind.apply(z, [void 0].concat(l)));
                    case p.TooltipType.MarketOvrParts:
                        return new((Y = M).bind.apply(Y, [void 0].concat(l)));
                    case p.TooltipType.MarketOvr:
                        return new((q = A).bind.apply(q, [void 0].concat(l)));
                    case p.TooltipType.MarketSearchGuide:
                        return new((X = N).bind.apply(X, [void 0].concat(l)));
                    case p.TooltipType.SeasonRewardDetail:
                        return new((Q = I).bind.apply(Q, [void 0].concat(l)));
                    case p.TooltipType.InboxPackage:
                        return new((J = R).bind.apply(J, [void 0].concat(l)));
                    case p.TooltipType.VehicleStatus:
                        return new((Z = L).bind.apply(Z, [void 0].concat(l)));
                    case p.TooltipType.ShopProduct:
                        return new((ee = O).bind.apply(ee, [void 0].concat(l)));
                    case p.TooltipType.Blueprint:
                        return new((te = x).bind.apply(te, [void 0].concat(l)));
                    case p.TooltipType.Vehicle:
                        return new((ie = w).bind.apply(ie, [void 0].concat(l)));
                    case p.TooltipType.LevelupReward:
                        return new((ne = B).bind.apply(ne, [void 0].concat(l)));
                    case p.TooltipType.Tuning:
                        return new((re = D).bind.apply(re, [void 0].concat(l)));
                    case p.TooltipType.WorldChatHelp:
                        return new((oe = F).bind.apply(oe, [void 0].concat(l)));
                    case p.TooltipType.ClanCreation:
                        return new((ae = k).bind.apply(ae, [void 0].concat(l)));
                    case p.TooltipType.NumberPlateSlot:
                        return new((se = U).bind.apply(se, [void 0].concat(l)));
                    case p.TooltipType.LicenseTab:
                    case p.TooltipType.Basic:
                    default:
                        return new((ce = e).bind.apply(ce, [void 0].concat(l)))
                }
                var u, h, f, H, V, G, $, j, K, W, z, Y, q, X, Q, J, Z, ee, te, ie, ne, re, oe, ae, se, ce
            }, e
        }(),
        v = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service,
                    i = _.map(e.info.condition.dt, function(i, n) {
                        var r = Math.floor(i.durTime / 60);
                        return {
                            condition: t.$filter("template")({
                                value: r
                            }, "PROMOTION_DESC_MINUTE"),
                            rewards: _.map(i.rewards, function(e) {
                                var i = t.$filter("rewardName")(e.type, e.code, e.count, e.opts);
                                return h.NumericalItem.indexOf(e.type) > -1 ? i : t.$filter("template")({
                                    item: i,
                                    value: e.count || 0
                                }, "PROMOTION_TOOLTIP_REWARD_ITEM")
                            }),
                            status: t.promotionService.isComplete(e) ? "COMPLETE" : "PARTICIPATE"
                        }
                    });
                return {
                    title: e.info.title,
                    condnRewardsStrs: i,
                    participatingIndex: t.promotionService.participatingStep(e)
                }
            }, t
        }(f),
        m = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                return this.componentName = this.constructor.name, this.setPromotionTooltip(e)
            }, t.prototype.setPromotionTooltip = function(e) {
                var t = this.service,
                    i = e.info,
                    n = i.condition,
                    r = {
                        target: this.getTaretUserCondition(n.targetUser),
                        enabled: this.getTargetEnable(n.targetUser),
                        date: this.getTargetTimeCondition(e),
                        mode: null,
                        value: null,
                        count: null
                    };
                return "MATCHREWARD" === i.type ? r.mode = n.matchReward.modeDesc : "MATCHCOUNT" === i.type && (r.mode = n.matchCount.modeDesc, r.count = t.$filter("template")({
                    count: i.condition.matchCount.count
                }, "PROMOTION_TOOLTIP_CONDITION_MATCHCOUNT_COUNT"), r.value = "(" + t.promotionService.getMatchCountRecord(e) + "/" + i.condition.matchCount.count + ")"), {
                    title: this.getTitleLabel(i.type) + " " + s.default.stripHtml(i.title),
                    desc: i.desc,
                    promotionType: i.type,
                    condition: r,
                    rewards: this.getPromotionRewardStrings(e),
                    startat: n.startAt,
                    endat: n.endAt
                }
            }, t.prototype.getTargetTimeCondition = function(e) {
                var t = this.service.$filter("template"),
                    i = e.info,
                    n = i.condition.startTimeStr,
                    r = 0 === i.condition.endTime ? "24:00" : i.condition.endTimeStr,
                    o = "DT" !== i.type ? this.service.$filter("template")({
                        starttime: n,
                        endtime: r
                    }, "PROMOTION_CONDITION_CONNECTIONREWARD") : t({
                        durtime: t({
                            value: Math.floor(i.condition.dt[this.service.promotionService.participatingStep(e)].durTime / 60)
                        }, "PROMOTION_TOOLTIP_OBJECT_TIME")
                    }, "PROMOTION_CONDITION_KEEPCONNECTION"),
                    a = this.service.$filter("translate")("PROMOTION_CONDITION_DAYS"),
                    s = [].concat(i.condition.dayOfWeek);
                return s.push(s.shift()), o + " (" + a.split(",").filter(function(e, t) {
                    return s[t]
                }).join("/") + ")"
            }, t.prototype.getTargetEnable = function(e) {
                var t = !0;
                return e.igr && (t = this.service.publisherService.isIgr), t
            }, t.prototype.getTaretUserCondition = function(e) {
                var t = this.service.$filter("translate"),
                    i = t("PROMOTION_TARGETUSER_ALL");
                return e.igr && (i = t("PROMOTION_TARGETUSER_IGR")), i + " " + t("PROMOTION_TARGETUSER")
            }, t.prototype.getPromotionRewardStrings = function(e) {
                var t = e.info,
                    i = t.condition;
                if ("DUMMY" === t.type || "WEBEVENT" === t.type) return [];
                var n = this.service;
                if ("MATCHREWARD" === t.type) {
                    var r = [];
                    return i.matchReward && i.matchReward.bonus && (i.matchReward.bonus.sp && r.push(n.$filter("template")({
                        sp: i.matchReward.bonus.sp
                    }, "PROMOTION_TOOLTIP_HOTTIME_SP")), i.matchReward.bonus.exp && r.push(n.$filter("template")({
                        exp: i.matchReward.bonus.exp
                    }, "PROMOTION_TOOLTIP_HOTTIME_EXP"))), r
                }
                var o = [];
                switch (t.type) {
                    case "LOGIN":
                        o = i.login.rewards;
                        break;
                    case "MATCHCOUNT":
                        o = i.matchCount.rewards;
                        break;
                    case "DT":
                        o = i.dt[this.service.promotionService.participatingStep(e)].rewards
                }
                return _.map(o, function(e, t) {
                    var i = n.$filter("rewardName")(e.type, e.code, e.count, e.opts);
                    return h.NumericalItem.indexOf(e.type) > -1 ? i : n.$filter("template")({
                        item: i,
                        value: e.count || 0
                    }, "PROMOTION_TOOLTIP_REWARD_ITEM")
                })
            }, t.prototype.getTitleLabel = function(e) {
                var t = this.service.$filter("translate");
                switch (e) {
                    case "DT":
                        return t("PROMOTION_TYPE_KEEPCONNECTION");
                    case "LOGIN":
                        return t("PROMOTION_TYPE_CONNECTIONREWARD");
                    case "MATCHREWARD":
                        return t("PROMOTION_TYPE_CONNECTIONBOOST");
                    case "MATCHCOUNT":
                        return t("PROMOTION_TYPE_MATCHCOUNT");
                    default:
                        return t("PROMOTION_TYPE_DUMMY")
                }
            }, t
        }(f),
        g = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service.$filter("template");
                return {
                    title: t({
                        percent: e.count
                    }, "BOOSTER_" + e.code + "_NAME"),
                    type: t({
                        itemtype: this.service.$filter("translate")("ITEMTYPE_BOOSTER")
                    }, "ITEMCARD_TOOLTIP_TYPE"),
                    desc: t({
                        percent: e.count
                    }, "BOOSTER_" + e.code + "_DESC"),
                    value: t({
                        percent: e.count
                    }, "BOOSTER_" + e.code + "_REWARD")
                }
            }, t
        }(f),
        y = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t
        }(f),
        S = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                return this.componentName = this.constructor.name, "BUNDLE" === e.subtype || "RANDOM" === e.subtype || "NUMBER_PLATE" === e.subtype || "ITEM" === e.type ? this.setItemInfo(e) : this.setDefaultInfo(e)
            }, t.prototype.setItemInfo = function(e) {
                var t = this.service,
                    i = (this.option.screen, {
                        clazz: "default"
                    }),
                    n = t.reservedParam.id;
                return e.subtype && e.name ? (i.p1 = s.default.stripHtml(e.name), i.p2 = t.$filter("template")({
                    itemtype: t.$filter("translate")("ITEMTYPE_" + e.subtype)
                }, "ITEMCARD_TOOLTIP_TYPE"), i.p3 = t.$filter("template")({
                    uselocation: t.$filter("translate")("USELOCATION_INVENTORY")
                }, "ITEMCARD_TOOLTIP_USELOCATION"), i.p6 = t.$filter("translate")(e.desc || "ITEM_" + e.code + "_DESC"), i.p7 = "BUNDLE" === e.subtype && t.inventoryService.getRewardableItemName(e), i.p9 = d.InventoryService.isExpirableItem(e.enddate) && a(e.enddate).format(t.$filter("translate")("INVENTORY_ITEM_TOOLTIP_EXPIRY_DATE")), i.p10 = t.$filter("template")({
                    count: e.count || 0
                }, "INVENTORY_ITEM_TOOLTIP_QUANTITY"), i) : void t.inventoryService.extendItemDetails(e).then(function(e) {
                    return t.showReserved(e, n)
                })
            }, t.prototype.setDefaultInfo = function(e) {
                var t = this.service,
                    i = {
                        clazz: "default"
                    },
                    n = e.name || t.$filter("rewardName")(e.type, e.code, e.count, e.opts),
                    r = e.desc || t.$filter("translate")(e.type + "_" + e.code + "_DESC");
                switch (i.p1 = s.default.stripHtml(n), i.p6 = t.$filter("translate")(r), e.type) {
                    case "SP_PLUS":
                    case "SP_PERCENT":
                    case "EXP_PLUS":
                    case "EXP_PERCENT":
                    case "MILEAGE_PLUS":
                        i.p10 = t.$filter("template")({
                            count: 1
                        }, "INVENTORY_ITEM_TOOLTIP_QUANTITY");
                        break;
                    default:
                        i.p10 = t.$filter("template")({
                            count: e.count || 0
                        }, "INVENTORY_ITEM_TOOLTIP_QUANTITY")
                }
                return i
            }, t
        }(f),
        E = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service;
                return e.expLabel = t.$filter("translate")("FRIENDLYMATCH_REWARD_EXP"), e.rewardDesc = t.$filter("template")(e, "PLAYERTOOLTIP_NEXTLEVELREWARD"), e
            }, t
        }(f),
        T = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t, i, n, r = e.slotType,
                    o = e.managementType,
                    a = e.partsItem,
                    c = e.combineData,
                    d = 0,
                    p = 0;
                if (a) d = l.getPartsBonus(a), p = a.level, n = a.clazz, t = a.material ? a.material.count : 0, i = c ? c.materialAmount : 0;
                else {
                    var h = u.getRecentVehicle();
                    h && (n = h.clazz)
                }
                var f = "",
                    v = "";
                switch (r) {
                    case "slot":
                    case "inventory":
                        f = this.service.$filter("translate")(a.level < 10 ? "VEHICLE_PARTSSLOT_UPGRADE_TITLE" : "PARTS_COMBINE_MAX_LEVEL"), v = this.service.$filter("template")({
                            cssStyle: t >= i ? "sufficient" : "insufficient",
                            current: s.default.toMoney(t),
                            value: s.default.toMoney(i)
                        }, "VEHICLE_PARTSSLOT_UPGRADE_DESC");
                        break;
                    case "management":
                        f = this.service.$filter("translate")("PARTS_DETAIL_QUANTITY"), v = a && a.resource ? String(a.resource.count) : "0"
                }
                var m = "VEHICLE_PARTSSLOT_" + o.toUpperCase() + "_RENEW",
                    g = "VEHICLE_PARTSSLOT_TOOLTIP_" + o.toUpperCase(),
                    y = this.service.$filter("template")({
                        clazz: n
                    }, m),
                    S = this.service.$filter("translate")(l.getStatusText(o));
                return {
                    status: S,
                    value: d,
                    level: this.service.$filter("template")({
                        level: p
                    }, "VEHICLE_PARTSSLOT_LEVEL"),
                    name: y,
                    detailTitle: f,
                    detailValue: v,
                    description: this.service.$filter("template")({
                        attr: S
                    }, g)
                }
            }, t
        }(f),
        C = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                return this.componentName = this.constructor.name, {
                    name: this.service.$filter("translate")("PARTS_" + e.code + "_NAME"),
                    description: this.service.$filter("translate")("PARTS_" + e.code + "_DESC"),
                    countTitle: this.service.$filter("translate")("PARTS_INVENTORY_MATERIAL_QUANTITY"),
                    count: e.count || 0
                }
            }, t
        }(f),
        b = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                return this.componentName = this.constructor.name, e
            }, t
        }(f),
        P = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service;
                return e.subText = e.subText.map(function(e) {
                    return t.$filter("translate")(e)
                }), _.forEach(e.mainText, function(e, i) {
                    e.title = t.$filter("translate")(e.title), e.description = t.$filter("translate")(e.description)
                }), e
            }, t
        }(f),
        I = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service;
                return {
                    best: {
                        title: t.$filter("translate")(e.best.title),
                        desc: t.$filter("translate")(e.best.desc)
                    },
                    high: {
                        title: t.$filter("translate")(e.high.title),
                        desc: t.$filter("translate")(e.high.desc)
                    },
                    guide: t.$filter("translate")(e.guide)
                }
            }, t
        }(f),
        M = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service,
                    i = [0];
                return _.forEach(r.Part.PartTypes, function(n) {
                    var o = t.vehicleDataService.getPartDataByCode(e.vehicle.parts[n]).ovr[r.Part.PartStatuses[n]];
                    i.push(o)
                }), {
                    title: [t.$filter("translate")("TRADEMARKET_TOOLTIP_PARTSOVR"), t.$filter("translate")("TRADEMARKET_LISTCOLUMN_OVR")],
                    statusTitle: [t.$filter("translate")("TRADEMARKET_CONDITION_OVR"), t.$filter("translate")("STATUS_TOPSPEED"), t.$filter("translate")("STATUS_ACCELERATION"), t.$filter("translate")("STATUS_NITROCAPACITY"), t.$filter("translate")("STATUS_STRENGTH"), t.$filter("translate")("STATUS_DURABILITY")],
                    status: [e.vehicle.ovr, e.vehicle.status.topSpeed, e.vehicle.status.acceleration, e.vehicle.status.nitroCapacity, e.vehicle.status.strength, e.vehicle.status.durability],
                    partsStatus: i
                }
            }, t
        }(f),
        A = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service;
                return {
                    title: t.$filter("translate")("TRADEMARKET_LISTCOLUMN_OVR"),
                    statusTitle: [t.$filter("translate")("TRADEMARKET_CONDITION_OVR"), t.$filter("translate")("STATUS_TOPSPEED"), t.$filter("translate")("STATUS_ACCELERATION"), t.$filter("translate")("STATUS_NITROCAPACITY"), t.$filter("translate")("STATUS_STRENGTH"), t.$filter("translate")("STATUS_DURABILITY")],
                    status: [e.vehicle.ovr, e.vehicle.status.topSpeed, e.vehicle.status.acceleration, e.vehicle.status.nitroCapacity, e.vehicle.status.strength, e.vehicle.status.durability]
                }
            }, t
        }(f),
        N = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                return this.componentName = this.constructor.name, {
                    description: this.service.$filter("translate")("TRADEMARKET_SEARCH_TIP")
                }
            }, t
        }(f),
        R = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service;
                t.$filter("translate");
                return e
            }, t
        }(f),
        L = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service,
                    i = t.$filter("translate");
                return e.status = _.map(r.Vehicle.StatusTypes, function(t) {
                    return [i("STATUS_" + t.toUpperCase()), e.status[t]]
                }), e
            }, t
        }(f),
        O = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t, i = this.service,
                    n = i.$filter("translate"),
                    r = i.$filter("template"),
                    o = a(e.serverTime);
                return e.isShowDates && (o.isBefore(e.saleFrom) ? t = r(this.yyyymmddhhmm(new Date(e.saleFrom)), "SHOP_ITEM_SALESTART") : o.isBefore(e.saleTo) && (t = r(this.yyyymmddhhmm(new Date(e.saleTo)), "SHOP_ITEM_SALEEND"))), {
                    title: n(e.name),
                    desc: n(e.desc),
                    rewards: e.rewards.map(function(e) {
                        return s.default.getRewardName(e, i.$filter)
                    }),
                    dateInfo: t
                }
            }, t.prototype.zf = function(e, t) {
                for (var i = t.toString(), n = "", r = 0; r < e - i.length; ++r) n += "0";
                return n + i
            }, t.prototype.yyyymmddhhmm = function(e) {
                return {
                    year: e.getFullYear().toString(),
                    month: this.zf(2, e.getMonth() + 1),
                    day: this.zf(2, e.getDate()),
                    hour: this.zf(2, e.getHours()),
                    minute: this.zf(2, e.getMinutes())
                }
            }, t
        }(f),
        x = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service;
                return {
                    title: t.$filter("rewardName")("BLUEPRINT", e.code),
                    desc: t.$filter("translate")("BLUEPRINT_" + e.code + "_DESC"),
                    total: e.total,
                    current: e.current
                }
            }, t
        }(f),
        w = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service;
                return _.assign({
                    vehicleName: t.$filter("vehicleName")(e.code),
                    manufacturer: t.$filter("manufacturerName")(e.manufacturerCode)
                }, _.pick(e, ["ovr", "price", "status", "remainingCount"]))
            }, t
        }(f),
        B = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = this.service;
                return {
                    title: t.$filter("template")({
                        nextLevel: e.level
                    }, "NEXTLEVEL_REWARD_TOOLTIP_TITLE"),
                    desc: t.$filter("translate")("NEXTLEVEL_REWARD_TOOLTIP_DESC"),
                    rewards: e.rewards.map(function(e) {
                        return t.$filter("rewardName")(e.type, e.code, e.count, e.opts)
                    })
                }
            }, t
        }(f),
        D = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                this.componentName = this.constructor.name;
                var t = e.code,
                    i = e.count,
                    n = (e.subtype, e.restrict),
                    r = e.price,
                    o = e.priceType,
                    a = this.service,
                    s = n && a.$filter("template")({
                        item: n
                    }, "TUNING_SHOP_ITEM_TOOLTIP_RESTRICT_DESC");
                return {
                    title: a.$filter("tuningItemName")(t),
                    restrict: s,
                    price: r,
                    priceDesc: a.$filter("translate")("TUNING_SHOP_ITEM_TOOLTIP_PRICE_DESC"),
                    priceType: o,
                    amount: i > 0 ? a.$filter("template")({
                        number: i
                    }, "TUNING_SHOP_ITEM_TOOLTIP_AMOUNT") : a.$filter("translate")("TUNING_SHOP_ITEM_TOOLTIP_NO_AMOUNT"),
                    desc: a.$filter("translate")("TUNING_SHOP_ITEM_TOOLTIP_UNIQUE_DESC")
                }
            }, t
        }(f),
        F = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                var t = this.service;
                return {
                    commandTitle: t.$filter("translate")("CHATTING_CHANNEL_SLASHCOMMAND_TITLE"),
                    shortcutTitle: t.$filter("translate")("CHATTING_COMMAND_HELP_2_TITLE"),
                    shortcutDescription: t.$filter("translate")("CHATTING_COMMAND_HELP_2"),
                    commandDescriptions: e
                }
            }, t
        }(f),
        k = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                var t = this.service;
                return {
                    clanCreationConditions: e.clanCreationConditions.map(function(e) {
                        return t.$filter("translate")(e)
                    })
                }
            }, t
        }(f),
        U = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.createInfo = function(e) {
                return {
                    title: e.title,
                    levelContent: e.levelContent,
                    vipContent: e.vipContent
                }
            }, t
        }(f),
        H = (function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            n.__extends(t, e), t.prototype.createInfo = function(e) {
                return {
                    code: e.code,
                    value: e.value,
                    goal: e.goal,
                    isComplete: e.isComplete,
                    rewardSp: e.rewardSp,
                    rewardQp: e.rewardQp
                }
            }
        }(f), function() {
            function e(e, t, i, n, o, a, s, c, d) {
                var l = this;
                this.$rootScope = e, this.$filter = t, this.popupService = i, this.vehicleDataService = n, this.graphicConfigService = o, this.inventoryService = a, this.publisherService = s, this.promotionService = c, this.$transitions = d, this.uncountableType = {}, this.functionType = {}, d.onStart({}, function() {
                    return l.hide()
                }), i.on("close", function() {
                    return l.hide()
                }), this.uncountableType[r.ItemType.SP] = !0, this.uncountableType[r.ItemType.EXP] = !0, this.uncountableType[r.ItemType.DEXP] = !0, this.uncountableType[r.ItemType.BOOSTER] = !0, this.uncountableType[r.ItemType.SPITEM] = !0, this.uncountableType[r.ItemType.EXPITEM] = !0, this.uncountableType[r.ItemType.DEXPITEM] = !0, this.uncountableType[r.ItemType.SPREWARD] = !0, this.uncountableType[r.ItemType.EXPREWARD] = !0, this.uncountableType[r.ItemType.DEXPREWARD] = !0, this.uncountableType[r.ItemType.FUNCTION] = !0, this.uncountableType[r.ItemType.PCBOOSTER] = !0, this.functionType[r.ItemType.BOOSTER] = !0, this.functionType[r.ItemType.FUNCTION] = !0, this.functionType[r.ItemType.PCBOOSTER] = !0
            }
            return e.prototype.show = function(e, t, i, n, r, a, s) {
                if (void 0 === r && (r = {}), void 0 === a && (a = {}), void 0 === s && (s = ""), e && i && n) {
                    var d = e;
                    if (e = e.currentTarget || e, e = e.htmlElement || e, !_.isElement(e)) return o.error("tooltipService.show invalid target:", d);
                    var l = angular.element(e);
                    r.scaleRatio = this.graphicConfigService.scaleRatio, this.reservedParam = {
                        elem: l,
                        side: t,
                        type: i,
                        opt: r,
                        style: a,
                        className: s,
                        id: Date.now()
                    };
                    var u = f.createTooltip(this, l, t, i, n, r, a, s);
                    u && u.info ? c.render(u) : c.render()
                }
            }, e.prototype.showReserved = function(e, t) {
                if (this.reservedParam && this.reservedParam.id === t) {
                    var i = this.reservedParam,
                        n = i.elem,
                        r = i.side,
                        o = i.type,
                        a = i.opt,
                        s = i.style,
                        d = i.className,
                        l = f.createTooltip(this, n, r, o, e, a, s, d);
                    l && c.render(l)
                }
            }, e.prototype.hide = function() {
                return this.reservedParam && (this.reservedParam = void 0), c.render()
            }, e
        }());
    H.$inject = ["$rootScope", "$filter", "popupService", "vehicleDataService", "graphicConfigService", "inventoryService", "publisherService", "promotionService", "$transitions"], t.TooltipService = H, angular.module("edge.components").factory("tooltipService", s.default.generateService(H))
}, , , function(e, t, i) {
    "use strict";

    function n(e) {
        return function(t, i) {
            var n = Reflect.getOwnMetadata(s, t, s) || [];
            n.push({
                propertyKey: i,
                ngComponentName: e
            }), Reflect.defineMetadata(s, n, t, s)
        }
    }

    function r(e, t) {
        var i = Object.getPrototypeOf(t);
        i !== Object.prototype && r(e, i);
        var n = Reflect.getOwnMetadata(s, t, s);
        if (n)
            for (var o = a.getInjector(), c = 0, d = n; c < d.length; c++) {
                var l = d[c];
                e[l.propertyKey] = o.get(l.ngComponentName)
            }
    }

    function o(e) {
        r(e, Object.getPrototypeOf(e))
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = i(34);
    i(296);
    var s = "ngComponentName";
    t.autowired = n, t.injectDependencies = o
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return c[e]
    }

    function r() {
        return _.map(c, function(e) {
            return e
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0),
        a = i(30),
        s = i(8),
        c = {};
    t.getStageBinderByName = n, t.getAllStageBinders = r;
    var d = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), t.prototype.onStageBuild = function(e) {
            var t = this;
            this.stage = e, this.bind(e), e.on(s.EventEx.DETACH, function() {
                return t.onDetachRecursively()
            })
        }, t.prototype.onStageInitialize = function(e) {
            c[this.stage.name] && delete c[this.stage.name], c[this.stage.name] = this, this.onAddedToSceneRecursively()
        }, t.prototype.onDetachRecursively = function() {
            e.prototype.onDetachRecursively.call(this), this.stage && c[this.stage.name] && delete c[this.stage.name]
        }, t.prototype.onWebkitRestart = function() {
            this.onWebkitRestartImpl(), this.face.detach()
        }, t.prototype.onWebkitRestartImpl = function() {}, t
    }(a.Binder);
    t.StageBinder = d
}, , function(e, t, i) {
    "use strict";

    function n(e) {
        return function(t) {
            t.prototype.componentName = e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.component = n
}, , function(e, t, i) {
    "use strict";

    function n(e) {
        function t() {
            this.props.type === this.type() && this.props.onupdate()
        }
        var i = e.prototype;
        i.componentDidMount = t, i.componentDidUpdate = t, i.shouldComponentUpdate = function(e, t) {
            if (e.info === this.props.info) return !1;
            var i = this.type();
            return e.type === i || this.props.type === i
        }
    }
    Object.defineProperty(t, "__esModule", {
            value: !0
        }),
        function(e) {
            for (var i in e) t.hasOwnProperty(i) || (t[i] = e[i])
        }(i(50)), t.mixin = n
}, , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(28),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.hide()
            }, t.prototype.hasTextProp = function(e) {
                return "object" == typeof e && "string" == typeof e.text
            }, t.prototype.drawLabel = function(e, t) {
                this.translate(e, this.hasTextProp(t) ? t.text : t)
            }, t.prototype.drawText = function(e, t) {
                this.apply(e, o.bindText, t)
            }, t.prototype.onClose = function() {}, t.prototype.show = function(e) {
                this.face.visible = !0
            }, t.prototype.hide = function() {
                this.face.visible = !1
            }, t.prototype.close = function() {
                this.hide(), this.onClose()
            }, t.prototype.onKeyboardConfirm = function() {}, t.prototype.onKeyboardCancel = function() {}, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], a.prototype, "$filter", void 0), t.PopupBinder = a
}, , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(16),
        a = i(2),
        s = i(46),
        c = i(4),
        d = i(306),
        l = i(173),
        u = i(42),
        p = i(5),
        h = i(185);
    t.TagMap = {
        PROMOTION: "INVENTORY_FILTER_PATH_EVENT",
        PURCHASED: "INVENTORY_FILTER_PATH_PURCHASE",
        GIFT: "INVENTORY_FILTER_PATH_GIFT"
    };
    var f = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.face.hasSize = !0;
            var e = this.props;
            this.registerEventHandlers(), this.update(e)
        }, t.prototype.registerEventHandlers = function() {
            var e = this;
            this.on(this.face, a.MouseEventEx.MOUSE_OVER, function(t) {
                e.props.mouseDisabled || e.props.onMouseOver && e.props.onMouseOver(t, e.props.info)
            }), this.on(this.face, a.MouseEventEx.MOUSE_OUT, function() {
                e.props.mouseDisabled || (e.face.mouseEventEnabled ? e.props.onMouseOut && e.props.onMouseOut() : (e.face.mouseEventEnabled = !0, e.face.emit(a.MouseEventEx.MOUSE_OUT)))
            }), this.on(this.face, a.MouseEventEx.MOUSE_DOWN, function() {
                e.props.mouseDisabled || (e.face.mouseEventEnabled = !1)
            }), this.on(this.face, a.MouseEventEx.MOUSE_UP, function() {
                e.props.mouseDisabled || (e.face.mouseEventEnabled = !0)
            }), this.actionBtn = this.getFace(".id-itemReceive"), this.actionBtn && this.on(this.actionBtn, a.MouseEventEx.CLICK, function() {
                e.props.onClick && e.props.onClick(e.props.info)
            })
        }, t.prototype.update = function(e) {
            var t = this;
            if (!_.isEmpty(e) && e && !_.isEmpty(e.info)) {
                var i = e.mouseDisabled,
                    n = e.info,
                    r = e.actionButtonEnabled;
                this.face.mouseEventEnabled = !i, this.actionBtn && (this.actionBtn.visible = !!r), this.cardSize = function() {
                    return e.cardSize ? e.cardSize : t.face.htmlElement.className.indexOf("Label") >= 0 ? "label" : t.face.htmlElement.className.indexOf("Small") >= 0 || t.face.htmlElement.className.indexOf("Quest") >= 0 ? "small" : "normal"
                }(), this.cardType = h.getItemCardType(e.info.type, e.info.code, this.tuningShopService), this.setImageInfo(n), this.setCardType(this.cardType), this.bindBasicInfo(e.info), "vehicle" === this.cardType && this.bindVehicleInfo(n), "blueprint" === this.cardType && this.bindBlueprintInfo(n), "product" === this.cardType && this.bindProductInfo(n), "tuningColor" === this.cardType && this.bindTuningColorInfo(n), "numberPlate" === this.cardType && this.bindNumberPlate(n), l.NumericalItem.indexOf(e.info.type) > -1 && this.adjustNumericalItem(n)
            }
        }, Object.defineProperty(t.prototype, "name", {
            get: function() {
                return this.props && this.props.info.name
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.setImageInfo = function(e) {
            if ("parts" === this.cardType) {
                var t = "PARTS";
                this.staticdataLoaderService.partsMaterialData[e.code] && (t = "MATERIAL"), e.img = this.$filter("itemCardImg")(t, e.code)
            }
            "tuningWrap" === this.cardType && (e.img = this.$filter("cdn_wrap")(e.code))
        }, t.prototype.setCardType = function(e) {
            var t = this;
            [".id-vehicleValueContainer", ".id-blueprintGauge", ".id-price", ".id-coolingOffContainer"].forEach(function(e) {
                var i = t.getFace(e);
                i && (i.visible = !1)
            }), "product" === e && (e = "normal"), this.gotoAndStop(".id-itemType", e), this.hasSize(".id-tagContainer", !0)
        }, t.prototype.bindBasicInfo = function(e) {
            e.img = e.img ? e.img : this.$filter("itemCardImg")(e.type, e.code), e.name = e.name ? e.name : this.$filter("rewardName")(e.type, e.code, e.count, e.opts), e.desc = e.desc ? e.desc : this.$filter("translate")(e.type + "_" + e.code + "_DESC"), "normal" === this.cardSize && this.bindNormalBasic(e), "label" === this.cardSize && this.bindLabelBasic(e), "small" === this.cardSize && this.bindSmallBasic(e)
        }, t.prototype.bindNormalBasic = function(e) {
            this.hasSize(".id-tagContainer .id-tagNew", !0), this.visible(".id-tagContainer .id-tagNew", e.isNew), e.isNew && this.translate(".id-tagContainer .id-tagNew", "ITEM_TAG_NEW"), void 0 === e.count && (e.count = 1), this.bindText(".id-itemNum", e.count + this.$filter("translate")("INVENTORY_UNITS_NUM")), this.translate(".id-itemReceive", e.buttonText || "ITEMCARD_BUTTON_RECEIPT"), this.bindHtml(".id-itemName", "<span>" + this.$filter("translate")(e.name) + "</span>"), e.tagName && e.tagType ? (this.visible(".id-itemTag", !0), this.gotoAndStop(".id-itemTag", e.tagType), this.translate(".id-tagName", e.tagName)) : this.visible(".id-itemTag", !1), this.translate(".id-itemRemainText", e.remainText), this.visible(".id-itemRemainText", !!e.remainText), (e.img || e.fallbackImg) && this.drawExternalImage(".id-itemImage", e.img, e.fallbackImg);
            var t = this.getFace(".id-coolingOffContainer");
            this.hasSize(t, !0), this.visible(t, this.isShowCoolingOff(e)), e.isHideItemNum && this.visible(".id-itemNum", !1)
        }, t.prototype.isShowCoolingOff = function(e) {
            return this.inboxService.isUnconfirmedCashItem(e) && "PURCHASED" === e.type && !this.isExpiredPayback(e.createdat)
        }, t.prototype.isExpiredPayback = function(e) {
            if (_.isUndefined(e)) return !0;
            var t = p(e),
                i = p(this.serverTimeService.time),
                n = i.diff(t, "days");
            return d.ExpirationDurationDays < n
        }, t.prototype.bindLabelBasic = function(e) {
            this.bindSmallBasic(e), this.translate(".id-itemName", e.name)
        }, t.prototype.bindSmallBasic = function(e) {
            (e.img || e.fallbackImg) && this.drawExternalImage(".id-itemImage", e.img, e.fallbackImg), this.bindText(".id-itemNum", e.count || 1), e.isHideItemNum && (this.getFace(".id-itemNum").visible = !1)
        }, t.prototype.bindVehicleInfo = function(e) {
            var t = "TRIAL_VEHICLE" === e.type ? h.parseTrialVehicleInfo(e) : e,
                i = function() {
                    return _.isNumber(t.grade) ? t.grade || 1 : _.get(t, "opts.VEHICLE.grade", 1)
                }(),
                n = this.vehicleDataService.createRefinedVehicle(t.code, i);
            this.bindHtml(".id-itemName", "<span>" + t.name + "</span>"), this.translate(".id-sp", "COMMON_VEHICLEVALUEUNIT"), this.bindTextAll(".id-vehicleClass", n.clazz), this.bindText(".id-ovr", "" + n.ovr), this.gotoAndStop(".id-vehicleGrade", "grade" + i);
            var r = this.getFace(".id-painting .id-color");
            if (r) {
                this.hasSize(r, !0);
                var o = this.tuningShopService.getTuningItemByCode(n.paint.colorCode);
                o && r.setCustomStyle({
                    "background-color": o.rgb.solid
                }), this.visible(r, !t.mutePaint && !!o)
            }
            t.price && (this.visible(".id-vehicleValueContainer", !0), this.bindText(".id-vehicleValue", c.default.toMoney(t.price)))
        }, t.prototype.bindBlueprintInfo = function(e) {
            var t = this.blueprintService.getStaticBlueprint(e.code),
                i = this.vehicleDataService.getVehicleData(t.vehicleCode),
                n = e.count || 0,
                r = this.$filter("template")({
                    number: n || 0
                }, "BLUEPRINT_CARD_COUNT");
            this.bindHtml(".id-itemName", "<span>" + e.name + " " + r + "</span>"), this.bindTextAll(".id-vehicleClass", i.clazz);
            var o = this.blueprintService.getStaticBlueprint(e.code),
                a = this.blueprintService.getBlueprintCount(e.code),
                c = a + "/" + o.blueprintAmount;
            "normal" === this.cardSize && (this.getFace(".id-blueprintGauge").visible = !0, this.progress = this.addChildBinder(".id-blueprintGauge", s.ProgressBinder, {
                displayValue: c,
                prevValue: e.gain ? a - n : a,
                value: a,
                max: o.blueprintAmount,
                duration: 1.5,
                useOldStyleProgress: !0
            }))
        }, t.prototype.bindProductInfo = function(e) {
            var t = this.getFace(".id-price"),
                i = t.$(".MonetaryUnitIcon"),
                n = t.$(".id-textField");
            t.hasSize = !0, t.visible = !0, i.hasSize = !0, i.visible = !0;
            var r = this.getFace(".id-popularityTag");
            r.visible = e.rank > 0, this.translate(r, this.$filter("template")({
                rank: e.rank
            }, "SHOP_TAG_TOP")), this.translate(".id-itemReceive", "SHOP_POPUP_PURCHASE_PURCHASE"), this.gotoAndStop(i, c.default.getPriceIconLabel(e.currency));
            e.currency;
            if (this.bindText(n, c.default.toMoney(e.price)), this.hasSize(".id-tagContainer .id-tagSale", !0), this.visible(".id-tagContainer .id-tagSale", e.isPromotion), e.isPromotion && this.translate(".id-tagContainer .id-tagSale", "SHOP_ITEM_SALE"), "duration" === e.tagType) {
                var o = this.getFace(".ItemTag .Duration"),
                    a = o.$(".id-icon");
                o.hasSize = !0, a.hasSize = !0, this.translate(o.$(".id-textField"), e.tagName)
            }
        }, t.prototype.bindTuningColorInfo = function(e) {
            var t = this.tuningShopService.getTuningItemByCode(e.code);
            if (t) {
                var i = this.getFace(".id-colorContainer .id-solid"),
                    n = this.getFace(".id-colorContainer .id-secondary");
                i.hasSize = !0, n.hasSize = !0, i.setCustomStyle({
                    "background-color": t.rgb.solid
                }), n.setCustomStyle({
                    "background-color": t.rgb.secondary
                })
            }
        }, t.prototype.bindNumberPlate = function(e) {
            if (void 0 !== e.price) {
                var t = this.getFace(".id-price"),
                    i = t.$(".MonetaryUnitIcon"),
                    n = t.$(".id-textField");
                t.hasSize = !0, t.visible = !0, i.hasSize = !0, i.visible = !0, this.gotoAndStop(i, c.default.getPriceIconLabel(e.currency));
                e.currency;
                this.bindText(n, c.default.toMoney(e.price))
            }
            e.plate && this.addChildBinder(".id-itemType .id-numberPlate", u.NumberPlateCard).setProps({
                uniqueNumber: e.plate.plateNumber,
                templateCode: e.plate.templateCode
            })
        }, t.prototype.adjustNumericalItem = function(e) {
            "normal" === this.cardSize ? this.bindText(".id-itemNum", 1 + this.$filter("translate")("INVENTORY_UNITS_NUM")) : this.bindText(".id-itemNum", 1)
        }, t
    }(r.Binder);
    n.__decorate([o.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([o.autowired("vehicleDataService")], f.prototype, "vehicleDataService", void 0), n.__decorate([o.autowired("blueprintService")], f.prototype, "blueprintService", void 0), n.__decorate([o.autowired("inventoryService")], f.prototype, "inventoryService", void 0), n.__decorate([o.autowired("staticdataLoaderService")], f.prototype, "staticdataLoaderService", void 0), n.__decorate([o.autowired("serverTimeService")], f.prototype, "serverTimeService", void 0), n.__decorate([o.autowired("tuningShopService")], f.prototype, "tuningShopService", void 0), n.__decorate([o.autowired("inboxService")], f.prototype, "inboxService", void 0), t.ItemCardBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(1058);
    t.translate = n.translate, t.template = n.template;
    var r = i(1059);
    t.externalImage = r.externalImage;
    var o = i(562);
    t.gotoAndPlay = o.gotoAndPlay, t.gotoAndStop = o.gotoAndStop, t.gotoAndPlayIgnoreReboot = o.gotoAndPlayIgnoreReboot;
    var a = i(135);
    t.bindText = a.bindText, t.bindHtml = a.bindHtml;
    var s = i(563);
    t.param = s.param;
    var c = i(564);
    t.classNames = c.classNames;
    var d = i(565);
    t.on = d.on, t.onClickSafe = d.onClickSafe, t.onClick = d.onClick
}, function(e, t, i) {
    "use strict";

    function n(e) {
        var t = a[e];
        return t ? r.union(t, c) : c
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(22),
        o = function() {
            function e() {}
            return e.getPadKeyName = function(e) {
                var t = this.padArray[e];
                return this.padKeyId[t]
            }, e.getPadKeyCode = function(e) {
                var t = r.findKey(this.padKeyId, function(t, i) {
                    return t === e
                });
                return this.padArray.indexOf(t)
            }, e.getKeyCode = function(e) {
                return this.keyArray.indexOf(e)
            }, e.getKeyName = function(e) {
                return this.keyArray[e]
            }, e
        }();
    o.keyArray = ["", "", "", "CANCEL", "", "", "HELP", "", "BACK_SPACE", "TAB", "", "", "CLEAR", "ENTER", "ENTER_SPECIAL", "", "SHIFT", "CTRL", "ALT", "PAUSE", "CAPS_LOCK", "KANA", "EISU", "JUNJA", "FINAL", "HANJA", "", "ESCAPE", "CONVERT", "NONCONVERT", "ACCEPT", "MODECHANGE", "SPACE", "PAGE_UP", "PAGE_DOWN", "END", "HOME", "LEFT", "UP", "RIGHT", "DOWN", "SELECT", "PRINT", "EXECUTE", "PrnScn", "INSERT", "DELETE", "", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "COLON", "SEMICOLON", "LESS_THAN", "EQUALS", "GREATER_THAN", "QUESTION_MARK", "AT", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "OS_KEY", "", "CONTEXT_MENU", "", "SLEEP", "NUMPAD0", "NUMPAD1", "NUMPAD2", "NUMPAD3", "NUMPAD4", "NUMPAD5", "NUMPAD6", "NUMPAD7", "NUMPAD8", "NUMPAD9", "MULTIPLY", "ADD", "SEPARATOR", "SUBTRACT", "DECIMAL", "DIVIDE", "F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8", "F9", "F10", "F11", "F12", "F13", "F14", "F15", "F16", "F17", "F18", "F19", "F20", "F21", "F22", "F23", "F24", "", "", "", "", "", "", "", "", "NUM_LOCK", "SCROLL_LOCK", "WIN_OEM_FJ_JISHO", "WIN_OEM_FJ_MASSHOU", "WIN_OEM_FJ_TOUROKU", "WIN_OEM_FJ_LOYA", "WIN_OEM_FJ_ROYA", "", "", "", "", "", "", "", "", "", "CIRCUMFLEX", "EXCLAMATION", "DOUBLE_QUOTE", "HASH", "DOLLAR", "PERCENT", "AMPERSAND", "UNDERSCORE", "OPEN_PAREN", "CLOSE_PAREN", "ASTERISK", "PLUS", "PIPE", "HYPHEN_MINUS", "OPEN_CURLY_BRACKET", "CLOSE_CURLY_BRACKET", "TILDE", "", "", "", "", "VOLUME_MUTE", "VOLUME_DOWN", "VOLUME_UP", "", "", ";", "=", ",", "-", ".", "/", "`", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "", "[", "\\", "]", "'", "", "META", "ALTGR", "", "WIN_ICO_HELP", "WIN_ICO_00", "", "WIN_ICO_CLEAR", "", "", "WIN_OEM_RESET", "WIN_OEM_JUMP", "WIN_OEM_PA1", "WIN_OEM_PA2", "WIN_OEM_PA3", "WIN_OEM_WSCTRL", "WIN_OEM_CUSEL", "WIN_OEM_ATTN", "WIN_OEM_FINISH", "WIN_OEM_COPY", "WIN_OEM_AUTO", "WIN_OEM_ENLW", "WIN_OEM_BACKTAB", "ATTN", "CRSEL", "EXSEL", "EREOF", "PLAY", "ZOOM", "", "PA1", "WIN_OEM_CLEAR", ""], o.padArray = ["", "", "", "", "", "", "", "", "start_button", "select_button", "l3_button", "r3_button", "cross_button", "circle_button", "square_button", "triangle_button", "", "", "l1_button", "r1_button", "l2_button", "r2_button", "dpad_up_button", "dpad_down_button", "dpad_left_button", "dpad_right_button"], o.padKeyId = {
        cross_button: "a",
        circle_button: "b",
        square_button: "x",
        triangle_button: "y",
        l1_button: "lb",
        r1_button: "rb",
        l2_button: "lt",
        r2_button: "rt",
        l3_button: "ls",
        r3_button: "rs",
        start_button: "start",
        select_button: "back"
    }, t.KeyboardMap = o;
    var a = {},
        s = ["M", "P"].map(function(e) {
            return o.getKeyCode(e)
        }),
        c = r.range(o.getKeyCode("A"), o.getKeyCode("Z") + 1).filter(function(e) {
            return !r.includes(s, e)
        }).concat([o.getKeyCode("TAB")]),
        d = ["V", "B", "F", "G", "H", "Q", "E", "T", "TAB"],
        l = {
            toggleCamera: d,
            useItem2: d,
            toggleMinimap: d
        };
    r.each(l, function(e, t) {
        a[t] = e.map(function(e) {
            return o.getKeyCode(e)
        })
    }), t.getAlternationKeys = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return _.extend({}, e, t)
    }

    function r(e) {
        return e._signature === S
    }

    function o(e) {
        return "string" == typeof e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = i(7),
        s = i(3),
        c = i(8),
        d = i(16),
        l = i(561),
        u = i(184),
        p = i(28),
        h = i(28),
        f = i(81),
        v = i(135),
        m = i(565),
        g = i(107),
        y = i(34),
        S = {},
        E = {};
    t.isBinderClass = r;
    var T = function() {
        function e(e) {
            this.target = e
        }
        return e.prototype.apply = function(e, t) {
            return e(this.target, t), this
        }, e
    }();
    t.ApplyWrapper = T;
    var C = function() {
        function e() {
            this.reduxProps = {}, this.children = [], this.addedToScene = !1, this._listeners = []
        }
        return Object.defineProperty(e.prototype, "isSubscribed", {
            get: function() {
                return !!this._unsubscribe
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.bind = function(e, t) {
            var i = this;
            if (void 0 === t && (t = {}), this.face) return void a.debug("Binder has its face object already. Drop request for:", e);
            this.face = e, this.face.on(c.EventEx.DESTROY, function() {
                return i._onDestroy()
            }), this.props = t, d.injectDependencies(this), l.selectFaces(this), this.onFaceReady(t), this._setRedux(), "debug" === g.Features.debugLevel && ($(e.htmlElement).attr("face-redux", this.constructor.name), e.htmlElement._binder = this)
        }, e.prototype.isStateful = function(e) {
            return r(e)
        }, e.prototype.addChildBinder = function(e, t, i) {
            void 0 === i && (i = {});
            var n = this.getFace(e),
                r = new t;
            return this.children.push(r), r.bind(n, i), this.addedToScene && r.onAddedToSceneRecursively(), r
        }, e.prototype.setProps = function(e) {
            void 0 === e && (e = {});
            var t = n(this.reduxProps, e);
            this.shouldUpdate(t) && (this.props = e, this.update(t))
        }, e.prototype.getProps = function() {
            return n(this.reduxProps, this.props)
        }, e.createBinder = function(e, t, i) {
            void 0 === i && (i = {});
            var n = new t;
            return n.bind(e, i), n.onAddedToSceneRecursively(), n
        }, e.prototype.mapFaces = function() {
            for (var e = this, t = [], i = 0; i < arguments.length; i++) t[i] = arguments[i];
            return t.map(function(t) {
                return e.face.$(t)
            })
        }, e.prototype.getFace = function(e) {
            return o(e) ? this.face.$(e) || (a.trace("Binder.getFace: can't find face", this.face.objectId, e), null) : e
        }, e.prototype.convertFace = function(e) {
            return this.getFace(e)
        }, e.prototype.apply = function(e, t, i) {
            if (o(e)) {
                var n = this.face.$(e);
                if (!n) return void a.trace("Binder.apply: can't find face", this.face.objectId, e);
                t(n, i)
            } else t(e, i)
        }, e.prototype.applyAll = function(e, t, i) {
            if (o(e))
                for (var n = this.face.$$(e), r = 0, a = n; r < a.length; r++) {
                    var s = a[r];
                    t(s, i)
                } else t(e, i)
        }, e.prototype.chain = function(e) {
            if (o(e)) {
                var t = this.face.$(e);
                return t ? new T(t) : void a.warn("Binder.chain: can't find face", this.face.objectId, e)
            }
            return new T(e)
        }, e.prototype.addManagedListener = function(e, t, i) {
            this._listeners.push([e, t, i]), e.on(t, i)
        }, e.prototype.addManagedOnceListener = function(e, t, i) {
            this._listeners.push([e, t, i]), e.once(t, i)
        }, e.prototype.bindText = function(e, t) {
            this.apply(e, v.bindText, t)
        }, e.prototype.bindTextAll = function(e, t) {
            this.applyAll(e, v.bindText, t)
        }, e.prototype.bindHtml = function(e, t) {
            this.apply(e, v.bindHtml, t)
        }, e.prototype.bindHtmlAll = function(e, t) {
            this.applyAll(e, v.bindHtml, t)
        }, e.prototype.translate = function(e, t, i) {
            this.apply(e, p.translate, {
                id: t,
                filterFn: u.getFilter("translate"),
                filterOpts: i
            })
        }, e.prototype.translateAll = function(e, t, i) {
            this.applyAll(e, p.translate, {
                id: t,
                filterFn: u.getFilter("translate"),
                filterOpts: i
            })
        }, e.prototype.template = function(e, t, i) {
            this.apply(e, p.template, {
                id: t,
                filterFn: u.getFilter("template"),
                filterOpts: i
            })
        }, e.prototype.templateAll = function(e, t, i) {
            this.applyAll(e, p.template, {
                id: t,
                filterFn: u.getFilter("template"),
                filterOpts: i
            })
        }, e.prototype.on = function(e, t, i) {
            this.apply(e, p.on, {
                event: t,
                callback: i
            })
        }, e.prototype.onAll = function(e, t, i) {
            this.applyAll(e, p.on, {
                event: t,
                callback: i
            })
        }, e.prototype.once = function(e, t, i) {
            this.apply(e, m.once, {
                event: t,
                callback: i
            })
        }, e.prototype.onceAll = function(e, t, i) {
            this.applyAll(e, m.once, {
                event: t,
                callback: i
            })
        }, e.prototype.uniqueOnceAll = function(e, t, i) {
            this.onceAll(e, t, _.once(i))
        }, e.prototype.hasSize = function(e, t) {
            this.apply(e, v.hasSize, t)
        }, e.prototype.hasSizeAll = function(e, t) {
            this.applyAll(e, v.hasSize, t)
        }, e.prototype.visible = function(e, t) {
            this.apply(e, v.visible, t)
        }, e.prototype.visibleAll = function(e, t) {
            this.applyAll(e, v.visible, t)
        }, e.prototype.enableButton = function(e, t) {
            this.apply(e, v.enableButton, t)
        }, e.prototype.enableButtonAll = function(e, t) {
            this.applyAll(e, v.enableButton, t)
        }, e.prototype.selectButton = function(e, t) {
            this.apply(e, v.selectButton, t)
        }, e.prototype.classNames = function(e, t) {
            this.apply(e, h.classNames, t)
        }, e.prototype.classNamesAll = function(e, t) {
            this.applyAll(e, h.classNames, t)
        }, e.prototype.drawExternalImage = function(e, t, i) {
            this.apply(e, h.externalImage, {
                src: t,
                fallback: i
            })
        }, e.prototype.drawExternalImageAll = function(e, t, i) {
            this.applyAll(e, h.externalImage, {
                src: t,
                fallback: i
            })
        }, e.prototype.gotoAndPlay = function(e, t, i) {
            void 0 === i && (i = !1), i && this.convertFace(e).currentLabel === t || this.apply(e, p.gotoAndPlay, t)
        }, e.prototype.gotoAndPlayAll = function(e, t, i) {
            var n = this;
            void 0 === i && (i = !1);
            var r = o(e) ? this.face.$$(e) : [e];
            _.each(r, function(e) {
                return n.gotoAndPlay(e, t, i)
            })
        }, e.prototype.gotoAndStop = function(e, t) {
            this.apply(e, p.gotoAndStop, t)
        }, e.prototype.gotoAndStopAll = function(e, t) {
            this.applyAll(e, p.gotoAndStop, t)
        }, e.prototype.gotoAndPlayIgnoreReboot = function(e, t) {
            this.apply(e, p.gotoAndPlayIgnoreReboot, t)
        }, e.prototype.onClickSafe = function(e, t) {
            this.apply(e, m.onClickSafe, t)
        }, e.prototype.translateSubtree = function(e, t) {
            var i = this,
                n = o(e) ? this.face.$(e) : e;
            if (n) {
                var r = u.getFilter("translate");
                _.each(t, function(e, t) {
                    return i.apply(n.$(".id-" + t), p.translate, {
                        id: e,
                        filterFn: r
                    })
                })
            }
        }, e.prototype.fromInjector = function(e) {
            return y.getInjector().get(e)
        }, e.prototype._setRedux = function() {
            this.mapStateToProps(s.store.getState()) !== E && !this.isSubscribed && (this._unsubscribe = s.store.subscribe(this._handleChange.bind(this)), this._handleChange())
        }, e.prototype._tryUnsubscribe = function() {
            this.isSubscribed && (this._unsubscribe(), this._unsubscribe = void 0)
        }, e.prototype._handleChange = function() {
            var e = s.store.getState();
            if (e !== this._reduxState) {
                var t = this.mapStateToProps(e);
                this.reduxProps && f.shallowEqual(t, this.reduxProps) || this.addedToScene && this.updateRedux(t)
            }
        }, e.prototype.updateRedux = function(e) {
            try {
                var t = n(e, this.props);
                this.shouldUpdate(t) && this.update(t)
            } catch (e) {
                var i = _.isError(e) ? e : new Error(e),
                    r = y.getInjector().get("exceptionHandleService"),
                    o = y.getInjector().get("externalService");
                r.catchScreenError(i), o.isEdgeBrowser() || a.error(i)
            }
            this.reduxProps = e
        }, e.prototype.setPropsAndUpdateRedux = function(e) {
            void 0 === e && (e = {}), this.props = e;
            var t = this.mapStateToProps(s.store.getState());
            this.updateRedux(t)
        }, e.prototype.dispatch = function(e) {
            s.store.dispatch(e)
        }, Object.defineProperty(e.prototype, "storeState", {
            get: function() {
                return s.store.getState()
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.mapStateToProps = function(e) {
            return E
        }, e.prototype.onFaceReady = function(e) {
            void 0 === e && (e = {})
        }, e.prototype.onAddedToScene = function(e) {
            void 0 === e && (e = {})
        }, e.prototype.shouldUpdate = function(e) {
            return !0
        }, e.prototype.update = function(e) {}, e.prototype.onDetach = function() {}, e.prototype.onDestroy = function() {}, e.prototype.onAddedToSceneRecursively = function() {
            var e = this.mapStateToProps(s.store.getState());
            this.onAddedToScene(e), this.addedToScene = !0, this.isSubscribed && this.updateRedux(e);
            for (var t = 0, i = this.children; t < i.length; t++) {
                var n = i[t];
                n.addedToScene || n.onAddedToSceneRecursively()
            }
        }, e.prototype.onDetachRecursively = function() {
            this.cleanupResource(), this.onDetach();
            for (var e = 0, t = this.children; e < t.length; e++) {
                t[e].onDetachRecursively()
            }
        }, e.prototype._onDestroy = function() {
            this.cleanupResource(), this.onDestroy()
        }, e.prototype.cleanupResource = function() {
            for (this._tryUnsubscribe(); this._listeners.length > 0;) {
                var e = this._listeners.pop(),
                    t = e[0],
                    i = e[1],
                    n = e[2];
                t.removeListener(i, n)
            }
        }, e
    }();
    C._signature = S, t.Binder = C
}, , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.getInjector = _.once(function() {
        return angular.element(document.body).injector()
    })
}, , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.BeginCountdown = 1] = "BeginCountdown", e[e.BeginStart = 2] = "BeginStart", e[e.BeginPerfectStart = 3] = "BeginPerfectStart", e[e.EndFinish = 4] = "EndFinish", e[e.EndTimeshow = 5] = "EndTimeshow", e[e.EndCountdown = 6] = "EndCountdown", e[e.EndRetire = 7] = "EndRetire", e[e.EndLeaderboard = 8] = "EndLeaderboard", e[e.InputKeyType = 9] = "InputKeyType", e[e.InputMedium = 10] = "InputMedium", e[e.InputQuery = 11] = "InputQuery", e[e.InputSmall = 12] = "InputSmall", e[e.Intro_1_Frostbite = 13] = "Intro_1_Frostbite", e[e.Intro_2_Brands = 14] = "Intro_2_Brands", e[e.Intro_3_Rating = 15] = "Intro_3_Rating", e[e.Intro_NfsLogo = 16] = "Intro_NfsLogo", e[e.Warning = 17] = "Warning", e[e.ScreenMedium_In = 18] = "ScreenMedium_In", e[e.ScreenMedium_Out = 19] = "ScreenMedium_Out", e[e.BlueBanner_Fast = 20] = "BlueBanner_Fast", e[e.BlueBanner_Slow = 21] = "BlueBanner_Slow", e[e.Alarm_Gift = 22] = "Alarm_Gift", e[e.Alarm_Invitation = 23] = "Alarm_Invitation", e[e.Alarm_Message = 24] = "Alarm_Message", e[e.Tutorial_Screen = 25] = "Tutorial_Screen", e[e.Tutorial_Start = 26] = "Tutorial_Start", e[e.Tutorial_Bubble = 27] = "Tutorial_Bubble", e[e.Nitrous_Earned = 28] = "Nitrous_Earned", e[e.Level_Up = 29] = "Level_Up", e[e.Card_Flip_Single = 30] = "Card_Flip_Single", e[e.Card_Flip_Multiple = 31] = "Card_Flip_Multiple", e[e.Race_Map = 32] = "Race_Map", e[e.Cards_In = 33] = "Cards_In", e[e.Card_Highlighted = 34] = "Card_Highlighted", e[e.Upgrade_Earned = 35] = "Upgrade_Earned", e[e.Lockon_IonCannon = 36] = "Lockon_IonCannon", e[e.Lockon_AttackHeli = 37] = "Lockon_AttackHeli", e[e.EndCountdown_15 = 38] = "EndCountdown_15", e[e.Pursuit_Start = 39] = "Pursuit_Start", e[e.Pursuit_Arrest = 40] = "Pursuit_Arrest", e[e.Pursuit_Repair = 41] = "Pursuit_Repair"
    }(t.FxAudioCode || (t.FxAudioCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.Other = 0] = "Other", e[e.System = 1] = "System", e[e.Channel = 2] = "Channel", e[e.Clan = 3] = "Clan", e[e.Race = 4] = "Race", e[e.Whisper = 5] = "Whisper", e[e.Broadcast = 6] = "Broadcast", e[e.MultiRace = 7] = "MultiRace"
    }(t.ChatSourceType || (t.ChatSourceType = {}));
    ! function(e) {
        e[e.None = 0] = "None", e[e.Room = 1] = "Room", e[e.QuickTeam = 2] = "QuickTeam", e[e.Match = 3] = "Match", e[e.Lobby = 4] = "Lobby", e[e.Openworld = 5] = "Openworld"
    }(t.ChatRaceState || (t.ChatRaceState = {}));
    ! function(e) {
        e[e.MiniChatBar = 0] = "MiniChatBar", e[e.SimpleChatView = 1] = "SimpleChatView", e[e.MainChatWindow = 2] = "MainChatWindow"
    }(t.ChatDisplayType || (t.ChatDisplayType = {}));
    ! function(e) {
        e[e.None = 0] = "None", e[e.Top = 1] = "Top", e[e.Middle = 2] = "Middle", e[e.Bottom = 3] = "Bottom"
    }(t.ListScrollState || (t.ListScrollState = {}));
    ! function(e) {
        e[e.Default = 0] = "Default", e[e.ForceDisplay = 1] = "ForceDisplay"
    }(t.ChatMessageMask || (t.ChatMessageMask = {}));
    ! function(e) {
        e[e.ChattingUnavailableChannel = 1] = "ChattingUnavailableChannel", e[e.ChattingChannelDisabled = 2] = "ChattingChannelDisabled", e[e.ChattingClanDisabled = 3] = "ChattingClanDisabled", e[e.ChattingMatchDisabled = 4] = "ChattingMatchDisabled", e[e.ChattingRoomDisabled = 5] = "ChattingRoomDisabled", e[e.ChattingLobbyDisabled = 6] = "ChattingLobbyDisabled", e[e.ChattingPlayerNotPresence = 7] = "ChattingPlayerNotPresence", e[e.ChattingNotValidateMessage = 8] = "ChattingNotValidateMessage", e[e.ChattingMessageOverFloodLimit = 9] = "ChattingMessageOverFloodLimit", e[e.ChattingMessageOverLength = 10] = "ChattingMessageOverLength", e[e.ChattingCanNotSendToSelf = 11] = "ChattingCanNotSendToSelf", e[e.ChattingItemNotExist = 12] = "ChattingItemNotExist", e[e.ChattingItemNotEnough = 13] = "ChattingItemNotEnough", e[e.ChattingItemUpdateFailed = 14] = "ChattingItemUpdateFailed", e[e.AlreadyBannedUser = 15] = "AlreadyBannedUser", e[e.ChattingQuickTeamMatchDisabled = 16] = "ChattingQuickTeamMatchDisabled", e[e.ChattingExceedMaxChannelCount = 17] = "ChattingExceedMaxChannelCount", e[e.ChattingOpenworldDisabled = 18] = "ChattingOpenworldDisabled", e[e.BannedChatPlayer = 19] = "BannedChatPlayer"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return e === m.A ? "teamA" : "teamB"
    }

    function r(e) {
        if (!e) {
            var t = u.store.getState().match.match;
            t && (e = t.featureType)
        }
        switch (e) {
            case "quick":
                return 2;
            case "ranked":
                return 3;
            case "festival":
                return 4;
            case "timetrial":
                return 6;
            default:
                return 1
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0),
        a = i(35),
        s = i(6),
        c = i(7),
        d = i(4),
        l = i(535),
        u = i(3),
        p = i(9),
        h = i(151),
        f = i(380),
        v = i(378);
    t.MSToRetire = 15e3;
    var m;
    ! function(e) {
        e[e.Individual = 0] = "Individual", e[e.A = 1] = "A", e[e.B = 2] = "B"
    }(m = t.Team || (t.Team = {}));
    ! function(e) {
        e[e.FinishTrack = 0] = "FinishTrack", e[e.Overtake = 1] = "Overtake", e[e.RearEnd = 2] = "RearEnd"
    }(t.FoxhuntingWinType || (t.FoxhuntingWinType = {})), t.TeamList = ["TeamA", "TeamB"], t.getTeamString = n, t.getLevelRaceMode = r;
    var g = function(e) {
        function t(t, i, n, r, o, a, s, c, d) {
            var l = e.call(this) || this;
            return l.externalService = t, l.popupService = i, l.staticdata = n, l.gameModeService = r, l.uistateNotifyService = o, l.stateService = a, l.dimService = s, l.exceptionHandleService = c, l.recordService = d, l.records = [], l._isMatchAbandoned = !1, l.gameHandlers = {}, l
        }
        return o.__extends(t, e), Object.defineProperty(t.prototype, "match", {
            get: function() {
                return u.store.getState().match.match
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "isMatchAbandoned", {
            get: function() {
                return this._isMatchAbandoned
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.scopeLimiter = function(e) {
            return new l.default(e, this)
        }, t.prototype._wrappedHandler = function(e, t) {
            return function() {
                var i = Array.prototype.slice.call(arguments);
                c.info("CORE>>", e, JSON.stringify(i)), t.apply(null, i)
            }
        }, t.prototype.addGameHandler = function(e, t) {
            t = this.gameHandlers[e] = this._wrappedHandler(e, t), this.externalService.on(e, t)
        }, t.prototype.addGameOnceHandler = function(e, t) {
            t = this.gameHandlers[e] = this._wrappedHandler(e, t), this.externalService.once(e, t)
        }, t.prototype.removeHandler = function() {
            var e = this;
            _.each(this.gameHandlers, function(t, i) {
                return e.externalService.off(i, t)
            }), this.gameHandlers = {}
        }, t.prototype.emitMatchEvent = function(e, t) {
            void 0 === t && (t = {}), c.info(">> Emit MatchEvent - " + e + " / " + JSON.stringify(t)), this.emit(e, t)
        }, t.prototype.rejectServerTimeout = function() {
            var e = "Ready message is not received from server",
                t = d.default.getUUID();
            this.exceptionHandleService.catchScreenError(new Error(e), t), this.emitMatchEvent("server.timeout", e)
        }, t.prototype.onCreatedServer = function(e) {
            c.info(">> Dedicated Server from BE - " + JSON.stringify(e)), u.store.dispatch(h.createDedicatedServer(e)), this.emitMatchEvent("server.created", e), this.serverTimeout && (this.serverTimeout.cancel(), this.serverTimeout = void 0)
        }, t.prototype.onEntryChanged = function(e) {
            u.store.dispatch(h.updatePlayer(e));
            var t = e.pid,
                i = e.state;
            "left" !== i && "disconnected" !== i || this.onPlayerLeft(t)
        }, t.prototype.onPlayerLeft = function(e) {}, t.prototype.initGameHandler = function() {
            var e = this;
            this.addGameOnceHandler(p.default.beAllPlayerLoaded, function() {
                e.emitMatchEvent("all.loaded"), e.sendClientGameModeParameters()
            }), this.addGameOnceHandler(p.default.beConnectionError, function(t) {
                c.info("beConnectionError " + t);
                var i = d.default.getUUID();
                if (e.exceptionHandleService.catchScreenError(new Error(t), i), "version mismatch" === t) return e.popupService.drawConfirm("COMMON_ERROR_SERVICE_TITLE", "ERROR_PATCHDATA_MESSAGE", function() {
                    return e.externalService.beShutdown(5)
                });
                e.popupService.drawConfirm("COMMON_ERROR_SERVICE_TITLE", "Reason - " + t + " </br> " + i, function() {
                    e.handleConnectionError(), e.emitMatchEvent("connect.error", t)
                })
            })
        }, t.prototype.addRecord = function(e) {
            var t = u.store.getState().match;
            this._isMatchAbandoned || (e.lapCount || (e.lapCount = this.recordService.lapCounts[e.id]), this.records.push(e), u.store.dispatch(h.addRecord(e)), t.isEndFromDistanceCheck || this.emitMatchEvent("record.added", {
                record: e,
                result: this.records
            }))
        }, t.prototype.finishMatch = function(e, t) {
            var i = this;
            void 0 === t && (t = []), this.match.players.filter(function(e) {
                return !_.find(i.records, function(t) {
                    return t.id === e.id
                })
            }).forEach(function(e) {
                var n = i.recordService.distanceList[e.id],
                    r = i.recordService.lapCounts[e.id],
                    o = _.find(t, {
                        pid: e.id
                    }),
                    a = {
                        id: e.id,
                        time: 0,
                        mileage: 0,
                        ratio: n,
                        lapCount: r,
                        driftpoint: 0,
                        completionRate: o ? o.completionrate || 0 : 0
                    };
                u.store.dispatch(h.addRecord(a)), i.records.push(a)
            }), this.deferredFinished.resolve(!1)
        }, t.prototype.handleConnectionError = function() {
            var e = this.cleanupOnConnectionError();
            this.stateService.go(e)
        }, t.prototype.sendClientGameModeParameters = function() {
            c.info(">> sendClientGameModeParameters");
            var e = u.store.getState().match.match,
                t = 0;
            if (e) {
                var i = this.gameModeService.getGameModeInfo(e.gameMode);
                i && i.wrongWaySignal && (t = this.staticdata.staticValues.wrongwaysignal_mintime.value)
            }
            this.externalService.beSetClientGameModeParameters({
                wrongWaySignalMinTime: t
            })
        }, t.prototype.cancelServerTimeout = function() {
            this.serverTimeout && (this.serverTimeout.cancel(), this.serverTimeout = void 0)
        }, t.prototype.isVersionMismatched = function(e) {
            return e === f.toCode(f.ErrorCode.VersionMismatched) || e === v.toCode(v.ErrorCode.VersionMismatched)
        }, t.prototype.popupConnectionError = function(e, t) {
            var i = this;
            this.popupService.draw("ConfirmPopup", {
                title: "COMMON_ERROR_SERVICE_TITLE",
                description: "ALARM_CLIENTUPDATE_GUIDETEXT",
                confirm: function() {
                    if (i.externalService.isDevelopment()) return n();
                    t()
                }
            });
            var n = function() {
                i.popupService.draw("ConfirmPopup", {
                    title: "COMMON_ERROR_SERVICE_TITLE",
                    description: e.message || "",
                    confirm: function() {
                        return t()
                    }
                })
            }
        }, t.prototype.getMaxWaitingSeconds = function() {
            return this.staticdata.staticValues.max_waiting_sec.value
        }, t.prototype.checkTimeout = function(e, t) {
            var i = this;
            return new s(function(n) {
                return e >= i.getMaxWaitingSeconds() ? t().then(function() {
                    return i.popupService.isShowPopup() ? n(!0) : (i.popupService.draw("ConfirmPopup", {
                        title: "MATCHMAKING_TIMEOVER_TITLE",
                        description: "MATCHMAKING_TIMEOVER_DESC",
                        confirm: _.noop
                    }), n(!0))
                }) : n(!1)
            })
        }, t.prototype.createMatch = function(e) {
            var t = _.find(e.players, {
                id: u.store.getState().player.id
            });
            this.uistateNotifyService.setSubState(6, e.matchId, e.gameMode, t ? t.team : m.Individual)
        }, t
    }(a.EventEmitter);
    t.MatchAbstract = g
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            type: "worldChat.addChatMessage",
            message: e,
            isPassed: t
        }
    }

    function r() {
        return {
            type: "worldChat.clearChatMessages"
        }
    }

    function o(e) {
        return {
            type: "worldChat.refreshChatMessages",
            filterManager: e
        }
    }

    function a(e) {
        return {
            type: "worldChat.setMessageCountLimit",
            count: e
        }
    }

    function s() {
        return {
            type: "worldChat.openMainChatWindow"
        }
    }

    function c() {
        return {
            type: "worldChat.closeMainChatWindow"
        }
    }

    function d() {
        return {
            type: "worldChat.openSimpleChatWindow"
        }
    }

    function l() {
        return {
            type: "worldChat.closeSimpleChatWindow"
        }
    }

    function u(e) {
        return {
            type: "worldChat.addTabs",
            tabs: e
        }
    }

    function p(e) {
        return {
            type: "worldChat.removeTabs",
            ids: e
        }
    }

    function h(e, t) {
        return void 0 === t && (t = !1), {
            type: "worldChat.activeTab",
            id: e,
            record: !t
        }
    }

    function f(e, t) {
        return {
            type: "worldChat.enableTab",
            id: e,
            enable: t
        }
    }

    function v(e) {
        return {
            type: "worldChat.lockTab",
            id: e
        }
    }

    function m(e) {
        return {
            type: "worldChat.unlockTab",
            id: e
        }
    }

    function g() {
        return {
            type: "worldChat.activeNextTab"
        }
    }

    function y(e) {
        return {
            type: "worldChat.toggleFilterMenu",
            show: e
        }
    }

    function S(e, t) {
        return {
            type: "worldChat.enableFilterMenuItem",
            name: e,
            enable: t
        }
    }

    function _(e, t) {
        return {
            type: "worldChat.toggleFilterMenuItem",
            name: e,
            selected: t
        }
    }

    function E(e, t, i, n) {
        return {
            type: "worldChat.addFilterMenuItem",
            name: e,
            nameID: t,
            enable: i,
            selected: n
        }
    }

    function T() {
        return {
            type: "worldChat.openBroadcastWindow"
        }
    }

    function C() {
        return {
            type: "worldChat.closeBroadcastWindow"
        }
    }

    function b(e) {
        return e = e || "", {
            type: "worldChat.broadcastUnfinishedInput",
            input: e
        }
    }

    function P(e) {
        return {
            type: "worldChat.changeChannel",
            channel: e
        }
    }

    function I(e) {
        return {
            type: "worldChat.changeSource",
            inputOpts: e
        }
    }

    function M() {
        return {
            type: "worldChat.updateChatList"
        }
    }

    function A(e) {
        return {
            type: "worldChat.scrollMessageList",
            scrollState: e
        }
    }

    function N(e) {
        return {
            type: "worldChat.enableHiding",
            enable: e
        }
    }

    function R() {
        return {
            type: "worldChat.removeClanChatMessage"
        }
    }

    function L(e) {
        return {
            type: "worldChat.updateBroadcastTicketCount",
            ticketCount: e
        }
    }

    function O(e) {
        return {
            type: "worldChat.inputBoxFocusStatusChange",
            isFocus: e
        }
    }

    function x(e) {
        return {
            type: "worldChat.setMinibarDefaultTab",
            tabId: e
        }
    }

    function w(e) {
        return {
            type: "worldChat.setVisibleOfMinibar",
            visible: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.addChatMessage = n, t.clearChatMessages = r, t.refreshChatMessages = o, t.setMessageCountLimit = a, t.openMainChatWindow = s, t.closeMainChatWindow = c, t.openSimpleChatWindow = d, t.closeSimpleChatWindow = l, t.addTabs = u, t.remvoeTabs = p, t.activeTab = h, t.enableTab = f, t.lockTab = v, t.unlockTab = m, t.activeNextTab = g, t.toggleFilterMenu = y, t.enableFilterMenuItem = S, t.toggleFilterMenuItem = _, t.addFilterMenuItem = E, t.openBroadcastWindow = T, t.closeBroadcastWindow = C, t.broadcastUnfinishedInput = b, t.changeChannel = P, t.changeSource = I, t.updateChatList = M, t.scrollMessageList = A, t.enableHiding = N, t.removeClanChatMessage = R, t.updateBroadcastTicketCount = L, t.inputBoxFocusStatusChange = O, t.setMinibarDefaultTab = x, t.setVisibleOfMinibar = w
}, , function(e, t, i) {
    "use strict";

    function n(e, t) {
        $(e.htmlElement).find("path").get(0).setAttribute("fill", t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(1),
        a = i(43),
        s = i(59),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return r.__extends(t, e), t.prototype.installBinder = function(e) {
                var t = this.face.htmlElement.className;
                t.indexOf("NumberPlateMain") > -1 ? this.binder = this.addChildBinder(this.face, d, e) : t.indexOf("NumberPlatePersonalNumInput") > -1 ? this.binder = this.addChildBinder(this.face, p) : t.indexOf("NumberPlateFullNum") > -1 || -1 !== t.indexOf("NumberPlateFullNumSmall") ? this.binder = this.addChildBinder(this.face, u) : t.indexOf("NumberPlateUniqueNum") > -1 ? this.binder = this.addChildBinder(this.face, l) : t.indexOf("NumberPlateItem") > -1 && (this.binder = this.addChildBinder(this.face, l))
            }, t.prototype.onFaceReady = function(e) {
                this.installBinder(e)
            }, t.prototype.update = function(e) {
                this.binder && this.binder.setProps(e)
            }, t
        }(o.Binder);
    t.NumberPlateCard = c;
    var d = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function(e) {
            this.translate(".id-lockDescription", "SEARCHPURCHASE_LV15_GUIDE"), this.personalNumber = this.addChildBinder(".id-personalNumber", v, {
                numberCount: 2
            }), this.uniqueNumber = this.addChildBinder(".id-uniqueNumber", v, {
                numberCount: 5
            }), this.plateClass = this.addChildBinder(".id-numberPlateClass", h);
            var t = e.page;
            this.parentPage = t, this.point = this.getFace("point")
        }, t.prototype.onAddedToScene = function(e) {
            switch (e.uiState) {
                case s.UIState.Lock:
                    this.onLock();
                    break;
                case s.UIState.Search:
                    var t = e.myNumberPlateInfo ? e.myNumberPlateInfo.prefix : "";
                    this.showPersonalNumber(t), this.showPlateNumber(void 0, e.uiState);
                    break;
                default:
                    this.onNormal()
            }
        }, t.prototype.onLock = function() {
            this.parentPage === s.Page.MainPage ? this.gotoAndPlay(this.face, "lock_main") : this.parentPage === s.Page.SearchPage && this.gotoAndPlay(this.face, "lock_search")
        }, t.prototype.onNormal = function() {
            this.gotoAndPlay(this.face, "fullNum")
        }, t.prototype.update = function(e) {
            var t = this.reduxProps;
            if (_.isEqual(t.myNumberPlateInfo, e.myNumberPlateInfo) || this.showPersonalNumber(e.myNumberPlateInfo.prefix), !_.isEqual(t.plateNumber, e.plateNumber) && e.plates) {
                var i = e.plateNumber ? e.plates[e.plateNumber] : void 0;
                this.showPlateNumber(i, e.uiState)
            }
        }, t.prototype.showPersonalNumber = function(e) {
            this.personalNumber && this.personalNumber.setProps({
                viewNumber: e
            })
        }, t.prototype.showPlateNumber = function(e, t) {
            var i = e ? e.templateCode : 1,
                r = e ? e.plateNumber : "",
                o = this.numberPlateService.isHigh(i) ? "high" : "normal",
                a = this.numberPlateService.templateData(i);
            if (a) {
                var c = this.staticdataLoaderService.numberPlateDataManager.numberPlateData.numberPlateAppearanceData[a.appearancecode];
                this.plateClass && (this.plateClass && this.gotoAndPlay(this.plateClass.face, o), this.plateClass.setProps({
                    bg: c.bg
                })), this.uniqueNumber.setProps({
                    viewNumber: r,
                    color: c.fontcolor
                }), this.personalNumber.setProps({
                    color: c.fontcolor
                }), n(this.point, c.fontcolor), e || t !== s.UIState.Lock ? this.onNormal() : this.onLock()
            }
        }, t.prototype.mapStateToProps = function(e) {
            var t = e.numberPlate,
                i = t.myNumberPlateInfo,
                n = t.uiState,
                r = null,
                o = null;
            switch (this.parentPage) {
                case s.Page.MainPage:
                    r = t.myNumberPlates, o = t.myPreviewPlateNumber;
                    break;
                case s.Page.SearchPage:
                    r = t.searchResults, o = t.plateNumberSelectedInSearch;
                    break;
                case s.Page.FirstBuildPage:
                    r = t.firstRandomResults, o = t.plateNumberSelectedInFirstRandom
            }
            return {
                myNumberPlateInfo: i,
                uiState: n,
                plateNumber: o,
                plates: r
            }
        }, t
    }(o.Binder);
    r.__decorate([o.autowired(a.numberPlateService)], d.prototype, "numberPlateService", void 0), r.__decorate([o.autowired("staticdataLoaderService")], d.prototype, "staticdataLoaderService", void 0);
    var l = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            this.uniqueNumber = this.addChildBinder(".id-uniqueNumber", f, {
                numberCount: 5
            }), this.plateClass = this.addChildBinder(".id-numberPlateClass", h), this.point = this.getFace("point")
        }, t.prototype.update = function(e) {
            var t = e.uniqueNumber,
                i = e.templateCode,
                r = this.numberPlateService.templateData(i);
            if (r) {
                var o = this.staticdataLoaderService.numberPlateDataManager.numberPlateData.numberPlateAppearanceData[r.appearancecode],
                    a = this.numberPlateService.isHigh(i);
                t && (this.uniqueNumber.setProps({
                    viewNumber: t,
                    color: o.fontcolor
                }), n(this.point, o.fontcolor)), this.plateClass && (this.plateClass && this.gotoAndPlay(this.plateClass.face, a ? "high" : "normal"), this.plateClass.setProps({
                    bg: o.bg
                }))
            }
        }, t
    }(o.Binder);
    r.__decorate([o.autowired(a.numberPlateService)], l.prototype, "numberPlateService", void 0), r.__decorate([o.autowired("staticdataLoaderService")], l.prototype, "staticdataLoaderService", void 0);
    var u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return r.__extends(t, e), t.prototype.onFaceReady = function() {
                this.personalNumber = this.addChildBinder(".id-personalNumber", f, {
                    numberCount: 2
                }), e.prototype.onFaceReady.call(this)
            }, t.prototype.update = function(t) {
                var i = t.personalNumber,
                    n = t.templateCode,
                    r = this.numberPlateService.templateData(n);
                if (r) {
                    var o = this.staticdataLoaderService.numberPlateDataManager.numberPlateData.numberPlateAppearanceData[r.appearancecode];
                    this.personalNumber.setProps({
                        viewNumber: i || "",
                        color: o.fontcolor
                    }), e.prototype.update.call(this, t)
                }
            }, t
        }(l),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return r.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.changeEffect = this.getFace("changeEffect")
            }, t.prototype.update = function(t) {
                this.personalNumber.getProps().viewNumber !== t.personalNumber && this.gotoAndPlay(this.changeEffect, "change"), e.prototype.update.call(this, t)
            }, t
        }(u),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return r.__extends(t, e), t.prototype.update = function(e) {
                this.drawExternalImageAll(".id-numberPlateColor", this.$filter("cdn_number_plate")(e.bg))
            }, t
        }(o.Binder);
    r.__decorate([o.autowired("$filter")], h.prototype, "$filter", void 0);
    var f = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.num = [], t
            }
            return r.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                this.face.hasSize = !0;
                var i = e.numberCount;
                _.times(i, function(e) {
                    t.num.push(t.convertFace(t.getFace(".id-num" + (e + 1))))
                })
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.viewNumber,
                    n = e.color;
                _.times(this.num.length, function(e) {
                    t.num[e].text = i.charAt(e), n && t.num[e].setCustomStyle({
                        color: n
                    })
                })
            }, t
        }(o.Binder),
        v = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.current = [], t.next = [], t.viewNumber = "", t.color = "", t
            }
            return r.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                this.face.hasSize = !0;
                var i = e.numberCount;
                _.times(i, function(e) {
                    t.current.push(t.convertFace(t.getFace(".id-current" + (e + 1) + " .id-textField"))), t.next.push(t.convertFace(t.getFace(".id-next" + (e + 1) + " .id-textField")))
                }), this.on(this.face, "reset", function(e) {
                    _.times(i, function(e) {
                        t.current[e].text = t.next[e].text, "" !== t.color && t.current[e].setCustomStyle({
                            color: "" + t.color
                        })
                    }), t.gotoAndPlay(t.face, "default")
                })
            }, t.prototype.update = function(e) {
                var t = e.viewNumber,
                    i = e.color;
                void 0 !== t && t !== this.viewNumber ? this.showNumberView(t, i) : i && i !== this.color && this.showNumberView(this.viewNumber, i)
            }, t.prototype.showNumberView = function(e, t) {
                var i = this;
                _.times(this.next.length, function(n) {
                    i.next[n].text = e.charAt(n), t && i.next[n].setCustomStyle({
                        color: t
                    })
                }), this.color = t || "", this.gotoAndPlay(this.face, "next"), this.viewNumber = e
            }, t
        }(o.Binder)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(760), i(762), i(213), i(995), i(996), i(536), i(997), i(537), i(286), i(998), i(999), i(538), i(111), i(1023), i(543), i(1024), i(290), i(1057), i(295), i(1063), i(75), i(1064), i(1065), i(1066), i(569), i(1067), i(570), i(1068), i(186), i(1069), i(1070), i(1072), i(1073), i(1074), i(1075), i(1076), i(1077), i(13), i(1113), i(572), i(1120), i(1121), i(1122), i(1123), i(1124), i(1125), i(189), i(574), i(575), i(386), i(1126), i(1127), i(1128), i(576), i(109), i(577), i(579), i(1129), i(580), i(1130), i(581), i(181), i(1131), i(582), i(91), i(115), i(583), i(584), i(1141), i(587), i(588), i(589), i(1156), i(1158), i(117), i(1159), i(590), i(591), i(592), i(1162), i(1163), i(1164), i(1165), i(595), i(596);
    var n = i(588);
    t.ClanService = n.default;
    var r = i(111);
    t.ExternalService = r.ExternalService;
    var o = i(583);
    t.FeatureSetService = o.FeatureSetService;
    var a = i(587);
    t.GlobalKeyService = a.GlobalKeyService;
    var s = i(186);
    t.InventoryService = s.InventoryService;
    var c = i(575);
    t.NotifierService = c.NotifierService;
    var d = i(589);
    t.NumberPlateService = d.NumberPlateService, t.numberPlateService = d.numberPlateService;
    var l = i(543);
    t.PlayerService = l.PlayerService;
    var u = i(569);
    t.PlayerSnippetService = u.PlayerSnippetService;
    var p = i(570);
    t.PopupService = p.PopupService;
    var h = i(582);
    t.PublisherService = h.PublisherService;
    var f = i(290);
    t.PushService = f.default;
    var v = i(213);
    t.Room2MatchService = v.Room2MatchService;
    var m = i(536);
    t.QuickMatchService = m.QuickMatchService;
    var g = i(579);
    t.Room2MatchmakingService = g.Room2MatchmakingService;
    var y = i(576);
    t.Room2Service = y.Room2Service;
    var S = i(577);
    t.Ranked2Service = S.default;
    var _ = i(295);
    t.StateService = _.StateService;
    var E = i(581);
    t.ShopService = E.default;
    var T = i(572);
    t.StaticdataLoaderService = T.StaticdataLoaderService;
    var C = i(590);
    t.TeamRoomService = C.TeamRoomService;
    var b = i(13);
    t.TooltipService = b.TooltipService;
    var P = i(134);
    t.VehicleDataService = P.VehicleDataService;
    var I = i(584);
    t.WorldChatService = I.WorldChatService;
    var M = i(591);
    t.TradeService = M.TradeService;
    var A = i(580);
    t.AntibotService = A.default;
    var N = i(117);
    t.FestivalService = N.FestivalService;
    var R = i(592);
    t.ImeService = R.ImeService;
    var L = i(91);
    t.TuningShopService = L.TuningShopService;
    var O = i(595);
    t.OpenworldMissionService = O.OpenworldMissionService;
    var x = i(596);
    t.OpenworldDriveMileageService = x.OpenworldDriveMileageService
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return void 0 !== _.get(A, e.islandCode + "." + e.errorCode)
    }

    function r(e) {
        return _.get(A, e.islandCode + "." + e.errorCode, "MESSENGER_ADD_FRIEND_WAITING_TITLE")
    }

    function o(e) {
        var t = e.islandCode + "." + e.errorCode;
        return N[e.message] || _.get(M, t, "MESSENGER_ADD_FRIEND_WAITING_TITLE")
    }

    function a(e, t, i) {
        var n = r(e),
            a = o(e),
            s = t(n),
            c = t(a);
        y.debug("Send Friend Request Error ", n, s, a, c), i.draw("ConfirmPopup", {
            title: s,
            description: c
        })
    }

    function s(e, t) {
        var i = _.get(M, e.islandCode + "." + e.errorCode);
        return i ? t("translate")(i) : void 0
    }

    function c(e, t, i) {
        var n = s(e, t),
            r = n ? "GAMEROOM_ERROR_POPUP_TITLE" : "ERROR_POPUP_TITLE";
        n = n || e.islandCode + "." + e.errorCode, i.draw("ConfirmPopup", {
            title: r,
            description: n
        })
    }

    function d(e) {
        var t = e.islandCode + "." + e.errorCode;
        return R[e.message] || _.get(M, t, "")
    }

    function l(e) {
        return void 0 !== _.get(A, e.islandCode + "." + e.errorCode)
    }

    function u(e, t) {
        var i = _.get(M, e.islandCode + "." + e.errorCode);
        return i ? t("translate")(i) : void 0
    }

    function p(e, t) {
        var i = _.get(A, e.islandCode + "." + e.errorCode);
        return i ? t("translate")(i) : void 0
    }

    function h(e, t, i) {
        var n = u(e, t);
        n = n || t("translate")("CLAN_OPERATION_FAIL_DESC ");
        var r = p(e, t);
        r = r || t("translate")("CLAN_OPERATION_FAIL_TITLE"), i.draw("ConfirmPopup", {
            title: r,
            description: n
        })
    }

    function f(e) {
        return {
            title: _.get(A, e.islandCode + "." + e.errorCode, "COMMON_ERROR_MESSAGE_UNKNOWN"),
            description: _.get(M, e.islandCode + "." + e.errorCode, "COMMON_POPUP_ERROR_TITLE")
        }
    }

    function v(e, t, i, n) {
        var r;
        if (e.code === I.toCode(I.ErrorCode.FailedToCreateVehicleEnoughGarage)) {
            var o = t.$filter("template")({
                remaining: t.vehicleService.getEmptyVehicleSlotCount()
            }, "BUNDLE_USE_REMAININGSLOT");
            r = t.$filter("translate")("BUNDLE_USE_FAIL_POPUP_TITLE_GARAGEFULL") + " " + o
        } else r = n;
        t.popupService.drawConfirm(i, r)
    }

    function m(e, t) {
        v(e, t, "BUNDLE_USE_FAIL_POPUP_TITLE", "BUNDLE_USE_FAIL_POPUP_TITLE_TEXT")
    }

    function g(e, t) {
        v(e, t, "", "SHOP_ERROR_FAILED_TO_GET_INBOX_ITEM")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var y = i(7),
        S = i(47),
        E = i(379),
        T = i(147),
        C = i(38),
        b = i(212),
        P = i(59),
        I = i(58),
        M = (L = {}, L[S.IslandCodes.CONTACTS] = (O = {}, O[E.ErrorCode.NoPlayerHasThatName] = "MESSENGER_ADD_FRIEND_ERROR2", O[E.ErrorCode.CanNotInviteMySelf] = "MESSENGER_ADD_FRIEND_ERROR3", O[E.ErrorCode.TargetIsAlreadyFriend] = "MESSENGER_ADD_FRIEND_ERROR1", O[E.ErrorCode.InvitesFull] = "MESSENGER_MYINVITELIST_FULL_DESC", O[E.ErrorCode.ReceiverInvitesFull] = "MESSENGER_FRIENDSINVITELIST_FULL_DESC", O[E.ErrorCode.AlreadyInvited] = "MESSENGER_ADD_FRIEND_WAITING_DESC", O[E.ErrorCode.InviteConflict] = "MESSENGER_ADD_FRIEND_ERROR3", O[E.ErrorCode.AcceptFailedInviteNotFound] = "MESSENGER_ALREADYCANCLE_POPUP_DESC", O[E.ErrorCode.FriendsFull] = "MESSENGER_MYLIST_FULL_DESC", O[E.ErrorCode.ReceiverFriendsFull] = "MESSENGER_FRIENDSLIST_FULL_DESC", O), L[S.IslandCodes.ROOM2] = (x = {}, x[T.ErrorCode.MissingPlayer] = "GAMEROOM_CANNOT_JOIN", x[T.ErrorCode.FailedToFindRoom] = "GAMEROOM_CANNOT_JOIN", x[T.ErrorCode.FailedToFindRoom2] = "GAMEROOM_CANNOT_JOIN", x[T.ErrorCode.WrongRoomPasswd] = "GAMEROOM_WRONG_PASSWORD", x[T.ErrorCode.NotEnoughSlot] = "GAMEROOM_CAPACITY_EXCEEDED", x[T.ErrorCode.WrongSlotNumber] = "GAMEROOM_CAPACITY_EXCEEDED", x[T.ErrorCode.AlreadyEnteredThisRoom] = "GAMEROOM_CANNOT_JOIN", x[T.ErrorCode.NotMatchedLicenseCode] = "GAMEROOM_CANNOT_JOIN", x[T.ErrorCode.NotExistJoinableRoom] = "GAMEROOM_NO_AVAILABLE_ROOM", x[T.ErrorCode.RoomHasAlreadyBegun] = "GAMEROOM_ALREADY_BEGUN", x[T.ErrorCode.ClientVersionNotMatch] = "GAMEROOM_MISMATCH", x[T.ErrorCode.NotEnoughSlot2] = "GAMEROOM_CAPACITY_EXCEEDED", x), L[S.IslandCodes.WORLDCHAT] = (w = {}, w[C.ErrorCode.ChattingUnavailableChannel] = 1, w[C.ErrorCode.ChattingChannelDisabled] = 2, w[C.ErrorCode.ChattingClanDisabled] = 3, w[C.ErrorCode.ChattingMatchDisabled] = 4, w[C.ErrorCode.ChattingRoomDisabled] = 5, w[C.ErrorCode.ChattingLobbyDisabled] = 6, w[C.ErrorCode.ChattingPlayerNotPresence] = 7, w[C.ErrorCode.ChattingNotValidateMessage] = 8, w[C.ErrorCode.ChattingMessageOverFloodLimit] = 9, w[C.ErrorCode.BannedChatPlayer] = 15, w), L[S.IslandCodes.CLAN] = (B = {}, B[b.ErrorCode.ClanNotExist] = "CLAN_JOIN_NOTEXIST_DESC", B[b.ErrorCode.ClanJoinRequestNotExist] = "CLAN_OPERATION_FAIL_DESC", B[b.ErrorCode.ClanNameAlreadyExist] = "CLAN_CLANCREATION_POPUPDESC_DUPLICATE", B[b.ErrorCode.ClanNotInRecruiting] = "CLAN_JOIN_POPUPDESC_FORBIDDEN3", B[b.ErrorCode.ClanJoinRequestFull] = "CLAN_JOIN_POPUPDESC_FORBIDDEN2", B[b.ErrorCode.ClanAlreadyFull] = "CLAN_JOIN_POPUPDESC_FORBIDDEN", B[b.ErrorCode.ClanViceCaptainMaxCount] = "CLAN_MYCLAN_POPUPDESC_APPOINTFAIL", B[b.ErrorCode.ClanForbiddenWords] = "CLAN_CLANCREATION_POPUPDESC_FORBID", B[b.ErrorCode.ClanIntroductionForbiddenWords] = "CLAN_CLANCREATION_POPUPDESC_FORBIDINTRO", B[b.ErrorCode.ClanCantModifyRecruiting] = "CLAN_MANAGE_POPUPDESC_RECRUITCHECK", B), L[S.IslandCodes.NUMBER_PLATE] = (D = {}, D[P.ErrorCode.PlateNumberUsed] = "SEARCHPURCHASE_PURCHASE_FAILED_POPUP_TEXT", D[P.ErrorCode.PlayerLevelLimit] = "INVENTORY_NUMBERPLATELOTTERY_TEXT", D[P.ErrorCode.NumberPlateSlotNotEnough] = ["RANDOMNUMBERPLATE_NOSPACE_TEXT1", "RANDOMNUMBERPLATE_NOSPACE_TEXT2"], D[P.ErrorCode.NumberPlateIncludesForbiddenWords] = "MYNUMBERPLATE_PERSONAL_POPUP_BANNED", D[P.ErrorCode.NumberPlatePrefixHasSpace] = "MYNUMBERPLATE_PERSONAL_POPUP_CANTUSE", D[P.ErrorCode.NumberPlatePrefixInvalidCharacter] = "MYNUMBERPLATE_PERSONAL_POPUP_CANTUSE", D), L),
        A = (F = {}, F[S.IslandCodes.CONTACTS] = (k = {}, k[E.ErrorCode.InvitesFull] = "MESSENGER_MYINVITELIST_FULL_TITLE", k[E.ErrorCode.ReceiverInvitesFull] = "MESSENGER_FRIENDSINVITELIST_FULL_TITLE", k[E.ErrorCode.AcceptFailedInviteNotFound] = "MESSENGER_ALREADYCANCLE_POPUP_TITLE", k[E.ErrorCode.FriendsFull] = "MESSENGER_MYLIST_FULL_TITLE", k[E.ErrorCode.ReceiverFriendsFull] = "MESSENGER_FRIENDSLIST_FULL_TITLE", k), F[S.IslandCodes.CLAN] = (U = {}, U[b.ErrorCode.ClanNotExist] = "CLAN_JOIN_NOTEXIST_TITLE", U[b.ErrorCode.ClanJoinRequestNotExist] = "CLAN_OPERATION_FAIL_TITLE", U[b.ErrorCode.ClanNameAlreadyExist] = "CLAN_CLANCREATION_POPUPTITLE_DUPLICATE", U[b.ErrorCode.ClanNotInRecruiting] = "CLAN_JOIN_POPUPTITLE_FORBIDDEN2", U[b.ErrorCode.ClanJoinRequestFull] = "CLAN_JOIN_POPUPTITLE_FORBIDDEN2", U[b.ErrorCode.ClanAlreadyFull] = "CLAN_JOIN_POPUPTITLE_FORBIDDEN", U[b.ErrorCode.ClanViceCaptainMaxCount] = "CLAN_MYCLAN_POPUPTITLE_APPOINTFAIL", U[b.ErrorCode.ClanForbiddenWords] = "CLAN_CLANCREATION_POPUPTITLE_FORBID", U[b.ErrorCode.ClanIntroductionForbiddenWords] = "CLAN_CLANCREATION_POPUPTITLE_FORBIDINTRO", U[b.ErrorCode.ClanCantModifyRecruiting] = "CLAN_MANAGE_POPUPTITLE_RECRUITING", U), F[S.IslandCodes.NUMBER_PLATE] = (H = {}, H[P.ErrorCode.PlateNumberUsed] = "SEARCHPURCHASE_PURCHASE_FAILED_POPUP_TITLE", H[P.ErrorCode.PlayerLevelLimit] = "INVENTORY_NUMBERPLATELOTTERY_TITLE", H[P.ErrorCode.NumberPlateSlotNotEnough] = "RANDOMNUMBERPLATE_NOSPACE_TITLE", H), F),
        N = {
            "wait for prev request": "MESSENGER_ADD_FRIEND_ERROR4",
            "missing name": "MESSENGER_ADD_FRIEND_INSERTNAME",
            "already registered": "MESSENGER_ADD_FRIEND_ERROR1",
            "already invited": "MESSENGER_ADD_FRIEND_WAITING_DESC",
            "exceeds limit": "MESSENGER_CANTADDMORE"
        },
        R = {
            "already registered": 200,
            "already invited": 201
        };
    t.isAddFriendPopupError = n, t.getAddFriendErrorTitle = r, t.getAddFriendErrorDesc = o, t.showAddFriendErrorPopup = a, t.getRoomErrorDescription = s, t.showRoomErrorPopup = c, t.getChatErrorDescriptionCode = d, t.isPopupError = l, t.getClanErrorDescription = u, t.getClanErrorTitle = p, t.showClanErrorPopup = h, t.parseError = f, t.showInventoryUseErrorPopup = m, t.showInboxUseErrorPopup = g;
    var L, O, x, w, B, D, F, k, U, H
}, , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this.props;
                e.value = e.value || e.min || 0, this.face.hasSize = !0, this.initProgress(), this.update(e)
            }, t.prototype.calcRatio = function(e) {
                var t = this.props,
                    i = t.min || 0;
                return (e - i) / ((t.max || 100) - i)
            }, Object.defineProperty(t.prototype, "ratio", {
                get: function() {
                    return this.calcRatio(this.props.value)
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.initProgress = function() {
                this.props.useOldStyleProgress ? (this.indicator = this.convertFace("indicator0"), this.indicator1 = this.convertFace("indicator1")) : (this.progress = this.convertFace("progressBar") || this.face, this.progress.ratio = this.ratio, this.progress.scaleVertical = this.props.scaleVertical), this.props.layoutPosition && (this.face.layoutPosition = this.props.layoutPosition)
            }, Object.defineProperty(t.prototype, "value", {
                get: function() {
                    return this.props.value
                },
                set: function(e) {
                    e = _.clamp(e, this.props.min, this.props.max), this.props.value !== e && this.setProps(_.assign({}, this.props, {
                        value: e
                    }))
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.update = function(e) {
                this.translate(".id-label", e.label || "");
                var t = this.ratio,
                    i = e.duration || 0,
                    n = Math.ceil(1e3 * i),
                    r = e.outDuration || 0,
                    o = e.displayValue || e.value,
                    a = e.prevValue || e.value;
                if (e.useOldStyleProgress) {
                    var s = e.max || 100,
                        c = e.swapGauge && e.value >= s,
                        d = e.value > e.prevValue && e.value <= s;
                    this.indicator.visible = !c, this.indicator1 && (this.indicator1.visible = c || d), this.indicator.regX = this.indicator.regY = 0;
                    var l = Math.min(this.calcRatio(a), 1);
                    d ? (this.indicator.addCustomToTween(0, {
                        flash: {
                            scaleX: l
                        }
                    }), this.indicator1.addCustomFromToTween(i, {
                        flash: {
                            scaleX: l
                        }
                    }, {
                        flash: {
                            scaleX: Math.min(this.calcRatio(e.value), 1)
                        },
                        ease: Power3.easeOut,
                        delay: 1
                    })) : this.indicator.addCustomFromToTween(i, {
                        flash: {
                            scaleX: l
                        }
                    }, {
                        flash: {
                            scaleX: Math.min(t, 1)
                        },
                        ease: Power3.easeOut
                    })
                } else this.progress.addCustomToTween(t >= 1 ? r : i, {
                    flash: {
                        ratio: t
                    },
                    ease: Power3.easeOut
                });
                var u = $(this.face.htmlElement).find(".id-value .id-textField, .id-value .comp-TextField"),
                    p = u.length ? u : $(this.face.htmlElement).find(".id-value");
                if (o && p.length)
                    if (_.isNumber(o)) {
                        var h = p.prop("Counter");
                        _.isNumber(o);
                        if (h === o) return;
                        p.stop().animate({
                            Counter: o
                        }, {
                            duration: n,
                            easing: "swing",
                            queue: !1,
                            step: function(e) {
                                p.text(Math.ceil(e))
                            }
                        })
                    } else p.text(o)
            }, t
        }(r.Binder);
    t.ProgressBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(377),
        o = i(58),
        a = i(258),
        s = i(378),
        c = i(212),
        d = i(379),
        l = i(88),
        u = i(380),
        p = i(59),
        h = i(108),
        f = i(147),
        v = i(381),
        m = i(60),
        g = i(382),
        y = i(38),
        S = i(383),
        _ = i(384),
        E = i(385),
        T = function(e) {
            function t(t, i) {
                void 0 === t && (t = ""), void 0 === i && (i = 0);
                var n = e.call(this, t) || this;
                return n.status = i, n
            }
            return n.__extends(t, e), t
        }(Error);
    t.RequestError = T;
    var C;
    ! function(e) {
        e[e.AUTH = 101] = "AUTH", e[e.DIAGNOSTIC = 102] = "DIAGNOSTIC", e[e.DUMMY = 103] = "DUMMY", e[e.GATEWAY = 105] = "GATEWAY", e[e.MOBILE_NEXON = 107] = "MOBILE_NEXON", e[e.MOBILE_TENCENT = 108] = "MOBILE_TENCENT", e[e.SESSION = 111] = "SESSION", e[e.TRANSACTION = 113] = "TRANSACTION", e[e.ASSET = 200] = "ASSET", e[e.AUCTION_HOUSE = 201] = "AUCTION_HOUSE", e[e.CHAT = 203] = "CHAT", e[e.CIRCUIT = 204] = "CIRCUIT", e[e.CLAN = 205] = "CLAN", e[e.CONTACTS = 206] = "CONTACTS", e[e.CRON = 207] = "CRON", e[e.EDGE = 208] = "EDGE", e[e.FESTIVAL = 209] = "FESTIVAL", e[e.FESTIVAL_MATCHMAKING = 210] = "FESTIVAL_MATCHMAKING", e[e.LOG = 212] = "LOG", e[e.MARKET2 = 213] = "MARKET2", e[e.MATCH2 = 214] = "MATCH2", e[e.MONITOR = 215] = "MONITOR", e[e.NEXON = 216] = "NEXON", e[e.NUMBER_PLATE = 217] = "NUMBER_PLATE", e[e.PRESENCE = 218] = "PRESENCE", e[e.PROMOTION2 = 219] = "PROMOTION2", e[e.PUBLISHER = 220] = "PUBLISHER", e[e.PUSH = 221] = "PUSH", e[e.RANKED2 = 222] = "RANKED2", e[e.RANKED2_MATCHMAKING = 223] = "RANKED2_MATCHMAKING", e[e.ROOM2 = 224] = "ROOM2", e[e.ROOM2_MATCHMAKING = 225] = "ROOM2_MATCHMAKING", e[e.SECURITY = 226] = "SECURITY", e[e.SHOP = 227] = "SHOP", e[e.SNIPPET = 228] = "SNIPPET", e[e.STATICDATA = 229] = "STATICDATA", e[e.STATISTICS = 230] = "STATISTICS", e[e.TENCENT = 232] = "TENCENT", e[e.WORLDCHAT = 233] = "WORLDCHAT", e[e.OPENWORLD = 236] = "OPENWORLD", e[e.QUICK_TEAM_MATCHMAKING = 241] = "QUICK_TEAM_MATCHMAKING"
    }(C = t.IslandCodes || (t.IslandCodes = {})), t.IslandErrorMap = (I = {}, I[C.AUTH] = r.ErrorCode, I[C.ASSET] = o.ErrorCode, I[C.AUCTION_HOUSE] = a.ErrorCode, I[C.CIRCUIT] = s.ErrorCode, I[C.CLAN] = c.ErrorCode, I[C.CONTACTS] = d.ErrorCode, I[C.MARKET2] = l.ErrorCode, I[C.MATCH2] = u.ErrorCode, I[C.NUMBER_PLATE] = p.ErrorCode, I[C.RANKED2] = h.ErrorCode, I[C.ROOM2] = f.ErrorCode, I[C.SESSION] = v.ErrorCode, I[C.SHOP] = m.ErrorCode, I[C.TENCENT] = g.ErrorCode, I[C.WORLDCHAT] = y.ErrorCode, I[C.GATEWAY] = S.ErrorCode, I[C.NEXON] = _.ErrorCode, I[C.OPENWORLD] = E.ErrorCode, I);
    var b;
    ! function(e) {
        e[e.APPLICATION = 0] = "APPLICATION", e[e.FRAMEWORK = 1] = "FRAMEWORK"
    }(b = t.IslandLevel || (t.IslandLevel = {}));
    var P = function() {
        function e(e, t, i) {
            this.islandCode = e, this.islandLevel = t, this.errorCode = i, this.setIslandInfo()
        }
        return e.prototype.setIslandInfo = function() {
            this.islandName = C[this.islandCode], this.levelName = b[this.islandLevel];
            var e = t.IslandErrorMap[this.islandCode];
            this.errorName = e ? e[this.errorCode] : "[" + this.levelName + "] " + this.islandName + " Error"
        }, e.unapply = function(t) {
            if (!t || t < 1e7 || t >= 1e8) throw new Error("invalid code");
            var i = t.toString();
            return new e(+i.slice(0, 3), +i.slice(3, 4), +i.slice(4))
        }, e.destructMessage = function(t) {
            var i = t.split("-");
            if (i.length > 1 && 8 === i[0].length) return e.unapply(parseInt(i[0], 10));
            throw Error("invalid message")
        }, e.toCode = function(e, t) {
            return parseInt(("000" + e).slice(-3) + b.APPLICATION + ("0000" + t).slice(-4), 10)
        }, e.prototype.toCode = function() {
            return e.toCode(this.islandCode, this.errorCode)
        }, e
    }();
    t.ResponseErrorCode = P;
    var I
}, , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(253),
        a = i(8),
        s = i(145),
        c = i(107),
        d = i(19),
        l = u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.callbackTweens = [], t.playTimeline = u.prototype.resumeTimeline, t
            }
            return n.__extends(t, e), t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.addLabels(t.labels), this.addScripts(t.scripts)
            }, t.prototype.cloneProperties = function(t) {
                e.prototype.cloneProperties.call(this, t), this.addLabels(this.data.labels), this.addScripts(this.data.scripts)
            }, t.prototype.postCreate = function() {
                var e = this.data;
                this.applyParameters(e.parameters), this.timeline && this.timeline.duration() !== e.frameCount && this.addFrame(this.getChildAt(0), e.frameCount, {
                    flash: {}
                })
            }, t.prototype.applyParameters = function(e, t) {
                if (void 0 === t && (t = !1), e) {
                    var i = t ? "edgeChildAttributes" : "edgeAttributes";
                    this.applyHtmlElementAttributes(s.ParameterUtil.getParameterValue(e[i])), this.applyHtmlElementStyles(s.ParameterUtil.getParameterValue(e.edgeStyles))
                }
            }, Object.defineProperty(t.prototype, "currentLabel", {
                get: function() {
                    return this.timeline ? this.timeline.currentLabel() : ""
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.ensureTimeline = function() {
                if (!this.timeline) {
                    var e = !c.Features.allowFrameSkip;
                    this.timeline = new TimelineMax({
                        paused: !0,
                        useFrames: e,
                        smoothChildTiming: !0,
                        onComplete: function() {
                            this.duration() > 1 && this.restart()
                        }
                    })
                }
            }, t.prototype.getLabelPosition = function(e) {
                return this.convertTimeFrom(e) + 1
            }, t.prototype.addLabels = function(e) {
                var t = Object.keys(e || {});
                if (t.length) {
                    this.ensureTimeline();
                    for (var i = 0, n = t; i < n.length; i++) {
                        var r = n[i];
                        this.timeline.addLabel(r, e[r])
                    }
                }
            }, t.prototype.addScripts = function(e) {
                e = e || [], e.length && this.ensureTimeline();
                for (var t = this, i = 0, n = e; i < n.length; i++) {
                    var o = n[i],
                        a = function(e) {
                            if (!e.code) return r.warn("unsupported timeline script:", e), {
                                value: void 0
                            };
                            var i = t.timeline.usesFrames() ? e.frame : Math.max(0, e.frame - .01),
                                n = new Function(e.code),
                                o = function() {
                                    try {
                                        n.call(this)
                                    } catch (e) {
                                        r.warn("timeline JS error", this.htmlElement.id, n.toString(), i, e)
                                    }
                                },
                                a = TweenLite.delayedCall(0, o.bind(t));
                            t.timeline.add(a, i), t.callbackTweens.push(a)
                        }(o);
                    if ("object" == typeof a) return a.value
                }
            }, t.prototype.clearDelayedTimelineAction = function() {
                this.delayedTimelineAction && (clearTimeout(this.delayedTimelineAction), this.delayedTimelineAction = void 0)
            }, t.prototype.play = function() {
                this.timeline && (this.clearDelayedTimelineAction(), this.resumeTimeline())
            }, t.prototype.stop = function() {
                this.timeline && (this.clearDelayedTimelineAction(), this.pauseTimeline(), this.emit(a.EventEx.STOP, new a.EventEx(a.EventEx.STOP, {
                    currentTarget: this
                })))
            }, t.prototype.gotoAndStop = function(e) {
                if ("debug" !== c.Features.debugLevel || _.isNumber(e) || this.htmlElement.setAttribute("frame-label", e), this.timeline) {
                    var t = this.convertTimeFrom(e);
                    t < 0 || (this.clearDelayedTimelineAction(), this.pauseTimeline(t), this.emit(a.EventEx.STOP, new a.EventEx(a.EventEx.STOP, {
                        currentTarget: this
                    })))
                }
            }, t.prototype.gotoAndPlay = function(e) {
                if ("debug" !== c.Features.debugLevel || _.isNumber(e) || this.htmlElement.setAttribute("frame-label", e), this.timeline) {
                    var t = this.convertTimeFrom(e);
                    t < 0 || (this.clearDelayedTimelineAction(), this.playTimeline(t))
                }
            }, t.prototype.hasLabel = function(e) {
                return void 0 !== this.data.labels && void 0 !== this.data.labels[e]
            }, t.prototype.convertTimeFrom = function(e) {
                if ("number" == typeof e) return Math.max(0, e - 1);
                var t;
                return this.data.labels && (t = this.data.labels[e]), void 0 !== t ? t : -1
            }, t.prototype.stopAt = function(e) {
                if (this.timeline) {
                    this.timeline.time() === e ? this.stopAtPresent() : this.gotoAndStop(e + 1)
                }
            }, t.prototype.stopAtPresent = function() {
                this.timeline && (this.clearDelayedTimelineAction(), this.pauseTimeline(), this.timeline.render(this.timeline.time(), !0, !0), this.emit(a.EventEx.STOP, new a.EventEx(a.EventEx.STOP, {
                    currentTarget: this
                })))
            }, t.prototype.gotoAndStopAt = function(e, t) {
                var i = this;
                if (this.timeline) {
                    this.timeline.time() === e ? this.gotoAndStop(t) : (this.pauseTimeline(e), this.delayedTimelineAction = setTimeout(function() {
                        i.delayedTimelineAction = void 0, i.gotoAndStop(t)
                    }))
                }
            }, t.prototype.gotoAndPlayAt = function(e, t) {
                var i = this;
                if (this.timeline) {
                    this.timeline.time() === e ? this.gotoAndPlay(t) : (this.pauseTimeline(e), this.delayedTimelineAction = setTimeout(function() {
                        i.delayedTimelineAction = void 0, i.gotoAndPlay(t)
                    }))
                }
            }, t.prototype.reboot = function() {
                var t = new a.EventEx(a.EventEx.REBOOT, {
                    currentTarget: this
                });
                this.emit(a.EventEx.REBOOT, t), t.isDefaultPrevented() || (e.prototype.reboot.call(this), this.timeline && (this.callbackTweens.forEach(function(e) {
                    return e.invalidate()
                }), this.restartTimeline()))
            }, t.prototype.halt = function() {
                e.prototype.halt.call(this);
                var t = new a.EventEx(a.EventEx.HALT, {
                    currentTarget: this,
                    paused: this.timeline && this.timeline.paused()
                });
                this.emit(a.EventEx.HALT, t), this.timeline && this.pauseTimeline()
            }, t.prototype.destroy = function(t) {
                this.clearDelayedTimelineAction(), e.prototype.destroy.call(this, t)
            }, t.prototype.destroyTimeline = function() {
                this.timeline && (this.timeline.kill(), this.timeline.clear(!0), this.timeline.eventCallback("onComplete", null), this.timeline = null)
            }, t.prototype.purgeTimeline = function() {
                e.prototype.purgeTimeline.call(this), this.destroyTimeline()
            }, t.prototype._addChild = function(t) {
                e.prototype._addChild.call(this, t), this.data.scalingGridRect && t.supportsScale9Grid() && t.drawScale9Grid()
            }, t.prototype._removeChild = function(t, i) {
                var n = e.prototype._removeChild.call(this, t, i);
                return this.data.scalingGridRect && t.supportsScale9Grid() && t.drawScale9Grid(), n
            }, t.prototype.restartTimeline = function() {
                if (this.timelineFrozen) return void(this.timelineSnapshot = {
                    playing: !0,
                    time: 0
                });
                this.timeline.restart()
            }, t.prototype.pauseTimeline = function(e) {
                if (this.timelineFrozen) return e = void 0 !== e ? e : this.timelineSnapshot.time, void(this.timelineSnapshot = {
                    playing: !1,
                    time: e
                });
                this.timeline.pause(e)
            }, t.prototype.resumeTimeline = function(e) {
                if (this.timelineFrozen) return e = void 0 !== e ? e : this.timelineSnapshot.time, void(this.timelineSnapshot = {
                    playing: !0,
                    time: e
                });
                this.timeline.resume(e)
            }, t.prototype.freezeAnimation = function() {
                e.prototype.freezeAnimation.call(this), this.timelineFrozen || (this.timelineFrozen = !0, this.timeline && (this.timelineSnapshot = {
                    playing: !this.timeline.paused(),
                    time: this.timeline.time()
                }, this.timeline.pause()))
            }, t.prototype.thawAnimation = function() {
                if (e.prototype.thawAnimation.call(this), this.timelineFrozen && (this.timelineFrozen = !1, this.timeline)) {
                    var t = this.timelineSnapshot,
                        i = t.playing,
                        n = t.time;
                    this.timelineSnapshot = void 0, i ? this.timeline.resume(n) : this.timeline.pause(n)
                }
            }, t
        }(o.DisplayObjectContainer);
    l = u = n.__decorate([d.component("MovieClip")], l), t.MovieClip = l, t.default = l;
    var u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.None = 0] = "None", e[e.Basic = 1] = "Basic", e[e.Blueprint = 2] = "Blueprint", e[e.Vehicle = 3] = "Vehicle", e[e.ItemCard = 4] = "ItemCard", e[e.ExpDetail = 5] = "ExpDetail", e[e.MenuDetail = 6] = "MenuDetail", e[e.PartsSlot = 7] = "PartsSlot", e[e.PartsMaterialSlot = 8] = "PartsMaterialSlot", e[e.PartsTabContainer = 9] = "PartsTabContainer", e[e.MatchRewardUncountableBonus = 10] = "MatchRewardUncountableBonus", e[e.BasicDetail = 11] = "BasicDetail", e[e.BasicTitled = 12] = "BasicTitled", e[e.Promotion = 13] = "Promotion", e[e.PromotionDurationTime = 14] = "PromotionDurationTime", e[e.PromotionRewardBoost = 15] = "PromotionRewardBoost", e[e.MarketOvrParts = 16] = "MarketOvrParts", e[e.SeasonRewardDetail = 17] = "SeasonRewardDetail", e[e.MarketOvr = 18] = "MarketOvr", e[e.MarketSearchGuide = 19] = "MarketSearchGuide", e[e.InboxPackage = 20] = "InboxPackage", e[e.VehicleStatus = 21] = "VehicleStatus", e[e.LicenseTab = 22] = "LicenseTab", e[e.ShopProduct = 23] = "ShopProduct", e[e.LevelupReward = 24] = "LevelupReward", e[e.Tuning = 25] = "Tuning", e[e.WorldChatHelp = 26] = "WorldChatHelp", e[e.ClanCreation = 27] = "ClanCreation", e[e.MileageReset = 28] = "MileageReset", e[e.NumberPlateSlot = 29] = "NumberPlateSlot", e[e.DealerNpc = 30] = "DealerNpc", e[e.PursuitTech = 31] = "PursuitTech", e[e.QuestItem = 32] = "QuestItem", e[e.CampaignReward = 33] = "CampaignReward"
    }(t.TooltipType || (t.TooltipType = {}));
    ! function(e) {
        e[e.Inventory = 1] = "Inventory", e[e.PackageUse = 2] = "PackageUse", e[e.LevelUp = 3] = "LevelUp", e[e.Reward = 4] = "Reward", e[e.RandomboxUse = 5] = "RandomboxUse", e[e.Storage = 6] = "Storage", e[e.Inbox = 7] = "Inbox", e[e.PromotionList = 8] = "PromotionList", e[e.Shop = 9] = "Shop"
    }(t.TooltipScreen || (t.TooltipScreen = {}))
}, , , function(e, t, i) {
    "use strict";

    function n(e) {
        return void 0 === e && (e = "global-panel"), {
            type: "global-panel.show",
            tag: e
        }
    }

    function r(e) {
        return void 0 === e && (e = "global-panel"), {
            type: "global-panel.hide",
            tag: e
        }
    }

    function o() {
        return {
            type: "global-panel.resetTopPanel"
        }
    }

    function a(e) {
        return {
            type: "global-panel.enableSystemTray",
            tray: e
        }
    }

    function s(e) {
        return {
            type: "global-panel.enableSystemTrayAll",
            enabled: e
        }
    }

    function c(e) {
        return void 0 === e && (e = "global"), {
            type: "global-panel.showNav",
            tag: e
        }
    }

    function d(e) {
        return void 0 === e && (e = "global"), {
            type: "global-panel.hideNav",
            tag: e
        }
    }

    function l(e) {
        return void 0 === e && (e = !0), {
            type: "global-panel.showGnbHub",
            show: e
        }
    }

    function u() {
        return function(e, i) {
            var n = i(),
                r = n.globalPanel,
                o = r.hidingTags,
                a = r.showGnbHub,
                s = n.view.flags,
                u = s.openworld,
                h = s.openworldMap,
                f = s.preventGnbHub,
                v = n.mission.status;
            if (h) return e(p.openworldMap(!1));
            _.includes([1, 2], v) || (u ? a ? (e(d("openworld")), e(t.hideGnbHub())) : (e(c("openworld")), !f && e(l())) : a ? e(t.hideGnbHub()) : o.length || f || e(l()))
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var p = i(136);
    t.show = n, t.hide = r, t.resetTopPanel = o, t.enableSystemTray = a, t.enableSystemTrayAll = s, t.showNav = c, t.hideNav = d, t.showGnbHub = l, t.hideGnbHub = function() {
        return l(!1)
    }, t.toggleMenuByEsc = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                var t = e.hide,
                    i = e.tierCode,
                    n = e.tierMode;
                if (this.visible(this.face, !t), !t) {
                    i = i || 1, n = n || this.ranked2Service.getGameMode();
                    var r = "SPEEDINDIVIDUAL" === n ? "6players" : "1on1";
                    this.gotoAndStop(this.face, r + "_" + i)
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("ranked2Service")], o.prototype, "ranked2Service", void 0), t.TierMedalBinder = o
}, , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(16),
        a = i(30),
        s = i(12),
        c = i(2),
        d = i(46),
        l = i(164),
        u = i(625),
        p = i(307),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(t) {
                e.prototype.update.call(this, t), t.disableBlind && this.visible(".Blind", !1)
            }, t
        }(a.Binder);
    n.__decorate([o.autowired("$filter")], h.prototype, "$filter", void 0);
    var f = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.translate(".id-ownIcon", "PARTS_DETAIL_OWN"), this.blueprintGauge = this.addChildBinder(".id-blueprintGauge", d.ProgressBinder, {
                label: "ITEMTYPE_BLUEPRINT",
                useOldStyleProgress: !0,
                duration: .7,
                swapGauge: !0
            }), e.prototype.onFaceReady.call(this)
        }, t.prototype.update = function(t) {
            e.prototype.update.call(this, t);
            var i = s.getOwnVehicles();
            this.getFace(".id-ownIcon").visible = !!_.find(i, function(e) {
                return e.code === t.vehicle.code
            });
            var n = this.$util.getBlueprintCount(t.vehicle.code),
                o = this.$util.getBlueprintRequirements(t.vehicle.code),
                a = n >= o ? "production" : "default";
            this.gotoAndStop(".id-vehicleInfoContainer", a), this.gotoAndStop(".id-vehicleExternalImage", a), n >= o ? $(this.blueprintGauge.face.htmlElement).addClass("producible") : $(this.blueprintGauge.face.htmlElement).removeClass("producible"), this.blueprintGauge.setProps({
                label: "ITEMTYPE_BLUEPRINT",
                value: n,
                displayValue: n + " / " + o,
                max: o,
                useOldStyleProgress: !0,
                duration: t.fixedProgressbar ? 0 : .7,
                swapGauge: !0
            }), this.bindTextAll(".id-vehicleValue", r.default.toMoney(t.vehicle.price || 0) + " " + this.$filter("translate")("COMMON_VEHICLEVALUEUNIT"))
        }, t
    }(h);
    n.__decorate([o.autowired("$util")], f.prototype, "$util", void 0);
    var v = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.vehiclePartsBinder = this.addChildBinder(this.face, u.VehiclePartsBinder), e.prototype.onFaceReady.call(this)
            }, t.prototype.update = function(t) {
                e.prototype.update.call(this, t), this.vehiclePartsBinder.setProps(t)
            }, t
        }(h),
        m = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(t) {
                e.prototype.update.call(this, t), this.bindText(".id-vehicleValue", r.default.toMoney(t.vehicle.price || 0) + " " + this.$filter("translate")("COMMON_VEHICLEVALUEUNIT"))
            }, t
        }(h),
        g = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.preventDestroy = !1, t
            }
            return n.__extends(t, e), t.prototype.setFavorite = function() {
                var e = this;
                this.preventDestroy = !0, this.vehicleService.toggleFavorite(this.props.vehicle.id).then(function() {
                    return e.gotoAndPlay(e.getFace(".id-configurationContainer"), "intro")
                }).finally(function() {
                    return e.preventDestroy = !1
                })
            }, t.prototype.destroyVehicle = function() {
                var e = this;
                if (!this.preventDestroy) return s.getOwnVehicles().length <= 1 && !s.isTrialVehicle(this.props.vehicle) ? this.popupService.draw("ConfirmPopup", {
                    title: "VEHICLELIST_CANNOTDELETEMAIN_TITLE",
                    description: "VEHICLELIST_CANNOTDELETEMAIN_DESC"
                }) : this.props.vehicle.favorite ? this.popupService.draw("ConfirmPopup", {
                    title: "VEHICLELIST_CANNOTDELETEFAVORITE_TITLE",
                    description: "VEHICLELIST_CANNOTDELETEFAVORITE_DESC"
                }) : void this.popupService.draw("ConfirmCancelPopup", {
                    title: "VEHICLELIST_VEHICLEDELETE_TITLE",
                    description: {
                        text: this.$filter("template")({
                            vehiclename: this.$filter("vehicleName")(this.props.vehicle.code)
                        }, "VEHICLELIST_VEHICLEDELETE_DESC")
                    },
                    confirm: function() {
                        e.vehicleService.removeVehicle(e.props.vehicle.id), e.gotoAndPlay(e.getFace(".id-configurationContainer"), "intro")
                    }
                })
            }, t.prototype.onFaceReady = function() {
                var t = this;
                this.translate(".id-favoriteButton", "VEHICLELIST_FAVORITEVEHICLE"), this.translate(".id-destroyButton", "VEHICLELIST_DELETEVEHICLE"), this.translate(".id-closeButton", "VEHICLELIST_RETURN");
                var i = this.getFace(".id-configurationContainer");
                this.on(this.getFace(".id-configurationButton"), c.MouseEventEx.CLICK, function() {
                    t.gotoAndPlay(i, "release")
                }), this.on(this.getFace(".id-closeButton"), c.MouseEventEx.CLICK, function() {
                    t.gotoAndPlay(i, "intro")
                }), this.on(this.getFace(".id-favoriteButton"), c.MouseEventEx.CLICK, this.setFavorite.bind(this)), this.on(this.getFace(".id-destroyButton"), c.MouseEventEx.CLICK, this.destroyVehicle.bind(this)), this.onClickSafe(this.getFace(".id-handlingTuningButton"), function() {
                    return t.lazyLoader.loadView("steering-tuning-popup").then(function() {
                        t.dispatch(p.showSteeringPopup(t.props.vehicle.id))
                    })
                }), this.vehiclePartsBinder = this.addChildBinder(this.face, u.VehiclePartsBinder), e.prototype.onFaceReady.call(this)
            }, t.prototype.update = function(t) {
                e.prototype.update.call(this, t), this.getFace(".id-favoriteButton").selected = t.vehicle.favorite, this.visibleAll(".id-vehicleValue", !s.isTrialVehicle(t.vehicle)), s.isTrialVehicle(t.vehicle) || this.templateAll(".id-vehicleValue", "COMMON_SP", {
                    sp: r.default.toMoney(t.vehicle.price || 0)
                }), t.vehicle && t.vehicle.tune && t.vehicle.tune.state >= 1 ? this.gotoAndPlay(".vehicleNameBackground", "tune" + t.vehicle.tune.state) : this.gotoAndPlay(".vehicleNameBackground", "normal"), this.vehiclePartsBinder.setProps(t)
            }, t
        }(h);
    n.__decorate([o.autowired("vehicleService")], g.prototype, "vehicleService", void 0), n.__decorate([o.autowired("popupService")], g.prototype, "popupService", void 0), n.__decorate([o.autowired("lazyLoadService")], g.prototype, "lazyLoader", void 0);
    var y = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.installBinder = function() {
            var e = this.face.htmlElement.className;
            e.indexOf("VehicleCardBlueprint") > -1 ? this.binder = this.addChildBinder(this.face, f) : e.indexOf("VehicleCardNameParts") > -1 ? this.binder = this.addChildBinder(this.face, v) : e.indexOf("VehicleCardName") > -1 ? this.binder = this.addChildBinder(this.face, h) : e.indexOf("VehicleCardSimple") > -1 ? this.binder = this.addChildBinder(this.face, h) : e.indexOf("VehicleCardParts") > -1 ? this.binder = this.addChildBinder(this.face, v) : e.indexOf("VehicleCardFestival") > -1 ? this.binder = this.addChildBinder(this.face, m) : this.binder = this.addChildBinder(this.face, g), this.classNames(".id-outline", "prevent-click")
        }, t.prototype.onFaceReady = function() {
            this.installBinder(), e.prototype.onFaceReady.call(this)
        }, t.prototype.update = function(t) {
            e.prototype.update.call(this, _.assign(t, {
                multiline: !0
            }));
            var i = this.getFace(".id-vehicleName .comp-TextField");
            if (i && i.setCustomStyle({
                    "line-height": "15px"
                }), _.isEmpty(t) || !t || !t.vehicle) return this.face.enabled = !1, void(this.face.selected = !1);
            this.face.enabled = !0, this.face.selected = !!t.selected, this.binder.setProps(t)
        }, t
    }(l.VehicleBinder);
    t.VehicleCard = y
}, , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.ASSET, e)
    };
    ! function(e) {
        e[e.PlayerNotExist = 1] = "PlayerNotExist", e[e.PlayerNotExist2 = 2] = "PlayerNotExist2", e[e.SessionNotExist = 3] = "SessionNotExist", e[e.SessionNotExist2 = 4] = "SessionNotExist2", e[e.SessionNotExist3 = 5] = "SessionNotExist3", e[e.SessionNotExist4 = 6] = "SessionNotExist4", e[e.PlayerNotFound = 7] = "PlayerNotFound", e[e.FromKeywordNotExist = 8] = "FromKeywordNotExist", e[e.AccountNotFound = 9] = "AccountNotFound", e[e.AccountNotFound2 = 10] = "AccountNotFound2", e[e.NotEnoughSP = 11] = "NotEnoughSP", e[e.AccountNotFound3 = 12] = "AccountNotFound3", e[e.PlayerSlotAlreadyExist = 13] = "PlayerSlotAlreadyExist", e[e.AccountNotFound4 = 14] = "AccountNotFound4", e[e.InvalidPlayerId = 15] = "InvalidPlayerId", e[e.BanwordName = 16] = "BanwordName", e[e.OccupiedName = 17] = "OccupiedName", e[e.BlueprintCountMustBeGreaterThanZero = 18] = "BlueprintCountMustBeGreaterThanZero", e[e.NotEnoughBlueprint = 19] = "NotEnoughBlueprint", e[e.ShelvingDepotFailed = 20] = "ShelvingDepotFailed", e[e.NotExistDepot = 21] = "NotExistDepot", e[e.NotEnoughGarageSlot = 22] = "NotEnoughGarageSlot", e[e.NotExistDepopt2 = 23] = "NotExistDepopt2", e[e.NotEnoughSp2 = 24] = "NotEnoughSp2", e[e.NotExistDepot2 = 25] = "NotExistDepot2", e[e.RemoveDepotError = 26] = "RemoveDepotError", e[e.DriverNotFound = 27] = "DriverNotFound", e[e.RankNotExist = 28] = "RankNotExist", e[e.PackageNotExist = 29] = "PackageNotExist", e[e.PackageNotExist2 = 30] = "PackageNotExist2", e[e.PackageNotExist3 = 31] = "PackageNotExist3", e[e.PackageNotExist4 = 32] = "PackageNotExist4", e[e.PlayerInventoryNotExist = 33] = "PlayerInventoryNotExist", e[e.PlayerInventoryNotExist2 = 34] = "PlayerInventoryNotExist2", e[e.ItemIdNotExistAtInventory = 35] = "ItemIdNotExistAtInventory", e[e.ItemIsExhausted = 36] = "ItemIsExhausted", e[e.RewardItemIsEmpty = 37] = "RewardItemIsEmpty", e[e.ItemIdNotExistAtInventory2 = 38] = "ItemIdNotExistAtInventory2", e[e.ItemIsExhausted2 = 39] = "ItemIsExhausted2", e[e.PlayerInventoryNotExist3 = 40] = "PlayerInventoryNotExist3", e[e.PlayerInventoryNotExist4 = 41] = "PlayerInventoryNotExist4", e[e.NotEnoughGarageSlot2 = 42] = "NotEnoughGarageSlot2", e[e.PlayerInventoryNotExist5 = 43] = "PlayerInventoryNotExist5", e[e.PlayerInventoryNotExist6 = 44] = "PlayerInventoryNotExist6", e[e.PlayerInventoryNotExist7 = 45] = "PlayerInventoryNotExist7", e[e.ItemIdNotExistAtInventory3 = 46] = "ItemIdNotExistAtInventory3", e[e.ItemIsExhaused3 = 47] = "ItemIsExhaused3", e[e.RewardItemIsEmpty2 = 48] = "RewardItemIsEmpty2", e[e.ItemIdNotExistAtInventory4 = 49] = "ItemIdNotExistAtInventory4", e[e.ItemIsExhausted4 = 50] = "ItemIsExhausted4", e[e.PlayerInventoryNotExist8 = 51] = "PlayerInventoryNotExist8", e[e.PlayerInventoryNotExist9 = 52] = "PlayerInventoryNotExist9", e[e.InventoryItemSubTypeNotExist = 53] = "InventoryItemSubTypeNotExist", e[e.NotEnoughGarageSlot3 = 54] = "NotEnoughGarageSlot3", e[e.CannotCreatePart = 55] = "CannotCreatePart", e[e.NotEnoughPart = 56] = "NotEnoughPart", e[e.CannotFindPartToRemove = 57] = "CannotFindPartToRemove", e[e.PlayerNameAlreadyExist = 58] = "PlayerNameAlreadyExist", e[e.PlayerNotExist3 = 59] = "PlayerNotExist3", e[e.AccountUnlockNotExist = 60] = "AccountUnlockNotExist", e[e.AccountUnlockNotExist2 = 61] = "AccountUnlockNotExist2", e[e.PlayerUnlockNotExist = 62] = "PlayerUnlockNotExist", e[e.PlayerUnlockNotExist2 = 63] = "PlayerUnlockNotExist2", e[e.PlayerUnlockNotExist3 = 64] = "PlayerUnlockNotExist3", e[e.PlayerUnlockNotExist4 = 65] = "PlayerUnlockNotExist4", e[e.PlayerUnlockNotExist5 = 66] = "PlayerUnlockNotExist5", e[e.NotEnoughGarageSlot4 = 67] = "NotEnoughGarageSlot4", e[e.NotExist = 68] = "NotExist", e[e.NotEnoughSp3 = 69] = "NotEnoughSp3", e[e.NotEnoughBluePrint = 70] = "NotEnoughBluePrint", e[e.NotExist2 = 71] = "NotExist2", e[e.VehicleNotExist = 72] = "VehicleNotExist", e[e.VehicleNotExist2 = 73] = "VehicleNotExist2", e[e.NotExist3 = 74] = "NotExist3", e[e.VehicleGradeReachedMax = 75] = "VehicleGradeReachedMax", e[e.FailedToUpgradeDueToSameVehicle = 76] = "FailedToUpgradeDueToSameVehicle", e[e.NotEnoughSpForVehicleUpgrade = 77] = "NotEnoughSpForVehicleUpgrade", e[e.VehicleNotFound = 78] = "VehicleNotFound", e[e.PartNotFound = 79] = "PartNotFound", e[e.PartMaxLevel = 80] = "PartMaxLevel", e[e.NotEnoughPart2 = 81] = "NotEnoughPart2", e[e.PartCodeNotMatchVehiclePartCode = 82] = "PartCodeNotMatchVehiclePartCode", e[e.PartClassNotMatchedVehicleClass = 83] = "PartClassNotMatchedVehicleClass", e[e.VehicleForUpgradeNotFound = 90] = "VehicleForUpgradeNotFound", e[e.VehicleNotBelongedToPid = 91] = "VehicleNotBelongedToPid", e[e.SameMaterialAndTargetVehicle = 92] = "SameMaterialAndTargetVehicle", e[e.BlueprintNotExist = 84] = "BlueprintNotExist", e[e.BlueprintNotEnough = 85] = "BlueprintNotEnough", e[e.VehicleNotExistWhenGetWithLock = 101] = "VehicleNotExistWhenGetWithLock", e[e.VehicleNotExistWhenMarketWorks = 102] = "VehicleNotExistWhenMarketWorks", e[e.VehicleNotExistWhenTradeVehicle = 103] = "VehicleNotExistWhenTradeVehicle", e[e.FailedToSetVehicleFavorite = 104] = "FailedToSetVehicleFavorite", e[e.FailedToProduceVehicleNotEnoughGarage = 106] = "FailedToProduceVehicleNotEnoughGarage", e[e.FailedToTradeVehicleEnoughGarage = 107] = "FailedToTradeVehicleEnoughGarage", e[e.FailedToCreateVehicleEnoughGarage = 108] = "FailedToCreateVehicleEnoughGarage", e[e.FailedToCreateVehicleWrongGradeRange = 109] = "FailedToCreateVehicleWrongGradeRange", e[e.FailedToDesttoryVehicleHasOnlyOne = 110] = "FailedToDesttoryVehicleHasOnlyOne", e[e.FailedToTradeVehicleHasOnlyMe = 111] = "FailedToTradeVehicleHasOnlyMe", e[e.FailedToCreateIgrVehicleDueToWrongGradeRange = 112] = "FailedToCreateIgrVehicleDueToWrongGradeRange", e[e.FailedToCreateIgrVehicleDueToWrongCode = 113] = "FailedToCreateIgrVehicleDueToWrongCode", e[e.IgrVehicleNotExistWhenGetIgrVehicle = 114] = "IgrVehicleNotExistWhenGetIgrVehicle", e[e.IgrVehicleDateExpiredWhenGetIgrVehicle = 115] = "IgrVehicleDateExpiredWhenGetIgrVehicle", e[e.VehicleForToggleFavoriteNotFound = 120] = "VehicleForToggleFavoriteNotFound", e[e.PlayerNotFoundWhenRecentVehicleChange = 121] = "PlayerNotFoundWhenRecentVehicleChange", e[e.VehicleNotEnoughWhenRecentVehicleChange = 122] = "VehicleNotEnoughWhenRecentVehicleChange", e[e.UsingEmptyPackages = 123] = "UsingEmptyPackages", e[e.UsingPackagesTooMuch = 124] = "UsingPackagesTooMuch", e[e.FailedToValidatePackageRequest = 125] = "FailedToValidatePackageRequest", e[e.VehicleForRemoveNotFound = 130] = "VehicleForRemoveNotFound", e[e.AccountNotFound5 = 200] = "AccountNotFound5", e[e.UnlockNotExist = 300] = "UnlockNotExist", e[e.InvalidSpRange = 400] = "InvalidSpRange", e[e.InvalidSpRange2 = 401] = "InvalidSpRange2", e[e.InvalidExpRange = 402] = "InvalidExpRange", e[e.InvalidExpRange2 = 403] = "InvalidExpRange2", e[e.InvalidLevelRange = 404] = "InvalidLevelRange", e[e.InvalidLevelRange2 = 405] = "InvalidLevelRange2", e[e.InvalidMaxGarageCount = 406] = "InvalidMaxGarageCount", e[e.InvalidMaxMarketRegisterCount = 407] = "InvalidMaxMarketRegisterCount", e[e.InvalidChallengePorintRange = 408] = "InvalidChallengePorintRange", e[e.InvalidMileageRange = 409] = "InvalidMileageRange", e[e.PlayerNotFound2 = 500] = "PlayerNotFound2", e[e.PlayerNotFound3 = 501] = "PlayerNotFound3", e[e.InvalidPlayerLevel = 600] = "InvalidPlayerLevel", e[e.CannotConvertExpToLevel = 601] = "CannotConvertExpToLevel", e[e.InvalidInventoryItemCount = 700] = "InvalidInventoryItemCount", e[e.InvalidInventoryItemCount2 = 701] = "InvalidInventoryItemCount2", e[e.InvalidItemUseCount = 702] = "InvalidItemUseCount", e[e.ItemNotFound = 703] = "ItemNotFound", e[e.ItemUseCountMustBeGreaterThanZero = 704] = "ItemUseCountMustBeGreaterThanZero", e[e.GivenItemDoesNotExistInStaticdata = 705] = "GivenItemDoesNotExistInStaticdata", e[e.InvalidItemCode = 706] = "InvalidItemCode", e[e.ItemEndDateNotExpired = 707] = "ItemEndDateNotExpired", e[e.ItemUseEndDateExpired = 708] = "ItemUseEndDateExpired", e[e.PartIncrementParamError = 800] = "PartIncrementParamError", e[e.CannotFindDepot = 900] = "CannotFindDepot", e[e.NotDefinedSupplyType = 901] = "NotDefinedSupplyType", e[e.PartCountMustBeGreaterThanZero = 1e3] = "PartCountMustBeGreaterThanZero", e[e.AdjustPartCountFailedCountMustGreaterThanZero = 1010] = "AdjustPartCountFailedCountMustGreaterThanZero", e[e.AdjustPartCountFailedCannotFindDocument = 1011] = "AdjustPartCountFailedCannotFindDocument", e[e.AdjustPartCountFailedNotHaveAnyPart = 1012] = "AdjustPartCountFailedNotHaveAnyPart", e[e.VehiclePartInstallFailedNotMatchPartType = 1101] = "VehiclePartInstallFailedNotMatchPartType", e[e.VehiclePartInstallFailedNotMatchClass = 1102] = "VehiclePartInstallFailedNotMatchClass", e[e.VehiclePartInstallFailedCannotInstallLowerLevelPart = 1103] = "VehiclePartInstallFailedCannotInstallLowerLevelPart", e[e.VehiclePartInstallFailedTriedToInstallSamePart = 1104] = "VehiclePartInstallFailedTriedToInstallSamePart", e[e.VehiclePartInstallFailedTriedToInstallUndefinedPart = 1105] = "VehiclePartInstallFailedTriedToInstallUndefinedPart", e[e.VehiclePartUpgradeFailedWhenCombineExpressionNotDefined = 1111] = "VehiclePartUpgradeFailedWhenCombineExpressionNotDefined", e[e.VehiclePartUpgradeFailedNotInstalledAnyPart = 1112] = "VehiclePartUpgradeFailedNotInstalledAnyPart", e[e.VehiclePartUpgradeFailedNotCombinable = 1113] = "VehiclePartUpgradeFailedNotCombinable", e[e.VehicleForPartUpgradeNotFound = 1114] = "VehicleForPartUpgradeNotFound", e[e.VehiclePartUninstallFailedTriedToUninstallEmptySlot = 1121] = "VehiclePartUninstallFailedTriedToUninstallEmptySlot", e[e.VehiclePartUninstallFailedEnoughUninstallKit = 1122] = "VehiclePartUninstallFailedEnoughUninstallKit", e[e.VehiclePartUninstallFailedVehicleNotBelongedToPlayer = 1123] = "VehiclePartUninstallFailedVehicleNotBelongedToPlayer", e[e.VehicleNotFoundRelatedToPid = 1150] = "VehicleNotFoundRelatedToPid", e[e.VehicleNotFoundRelatedToPid2 = 1151] = "VehicleNotFoundRelatedToPid2", e[e.TuningInventoryForPlayerNotExist = 1200] = "TuningInventoryForPlayerNotExist", e[e.InvalidTuningInventoryItemCount = 1201] = "InvalidTuningInventoryItemCount", e[e.InvalidTuningInventoryItemCount2 = 1202] = "InvalidTuningInventoryItemCount2", e[e.InvalidTuningInventoryItemCount3 = 1203] = "InvalidTuningInventoryItemCount3", e[e.InvalidTuningInventoryItemCount4 = 1204] = "InvalidTuningInventoryItemCount4", e[e.TuningInventoryItemNotExist = 1205] = "TuningInventoryItemNotExist", e[e.InvalidTuningInventoryItemCount5 = 1206] = "InvalidTuningInventoryItemCount5", e[e.TuningInventoryItemNotExist2 = 1207] = "TuningInventoryItemNotExist2", e[e.TuningItemTypeNotExist = 1208] = "TuningItemTypeNotExist", e[e.InvalidTuningInventoryItemCount6 = 1209] = "InvalidTuningInventoryItemCount6", e[e.VehicleTuningDataNotExist = 1210] = "VehicleTuningDataNotExist", e[e.VehicleTuningDataNotExist2 = 1211] = "VehicleTuningDataNotExist2", e[e.VehicleColorCodeNotExist = 1212] = "VehicleColorCodeNotExist", e[e.VehicleColorCodeCannotAppliedToThisVehicle = 1213] = "VehicleColorCodeCannotAppliedToThisVehicle", e[e.WheelCodeNotExist = 1214] = "WheelCodeNotExist", e[e.WheelCodeCannotAppliedToThisVehicle = 1215] = "WheelCodeCannotAppliedToThisVehicle", e[e.WrapCodeNotExist = 1216] = "WrapCodeNotExist", e[e.WrapCodeCannotAppliedThisVehicle = 1217] = "WrapCodeCannotAppliedThisVehicle", e[e.PlayerVehicleNotExist = 1218] = "PlayerVehicleNotExist", e[e.TuningItemTypeNotExist2 = 1219] = "TuningItemTypeNotExist2", e[e.TuningItemTypeNotExist3 = 1220] = "TuningItemTypeNotExist3", e[e.TuningItemNotExist = 1221] = "TuningItemNotExist", e[e.PlayerVehicleNotExist2 = 1222] = "PlayerVehicleNotExist2", e[e.TuningItemNotMatchWithExistItemCode = 1223] = "TuningItemNotMatchWithExistItemCode", e[e.VehicleInCreatingPlayerNotBelongedToDefaultVehicles = 1500] = "VehicleInCreatingPlayerNotBelongedToDefaultVehicles", e[e.PlayerNotExist4 = 9001] = "PlayerNotExist4", e[e.InvalidPlayerId2 = 9002] = "InvalidPlayerId2", e[e.NotEnoughAuthority = 9003] = "NotEnoughAuthority", e[e.NotEnoughAuthority2 = 9004] = "NotEnoughAuthority2", e[e.UseExpItemDataAcceptanceNotDefined = 9005] = "UseExpItemDataAcceptanceNotDefined", e[e.UseSpItemDataAcceptanceNotDefined = 9006] = "UseSpItemDataAcceptanceNotDefined", e[e.RewardCommandTypeNotExist = 9007] = "RewardCommandTypeNotExist", e[e.TempCommandCannotExcutable = 9008] = "TempCommandCannotExcutable", e[e.UnlockTypeNotExist = 9009] = "UnlockTypeNotExist", e[e.UnlockStaticDataCodeNotExist = 9010] = "UnlockStaticDataCodeNotExist", e[e.NotItemType = 9099] = "NotItemType"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.None = 0] = "None", e[e.Lock = 1] = "Lock", e[e.FirstBuild = 2] = "FirstBuild", e[e.Main = 3] = "Main", e[e.VehicleView = 4] = "VehicleView", e[e.Search = 5] = "Search"
    }(t.UIState || (t.UIState = {}));
    ! function(e) {
        e[e.MainPage = 0] = "MainPage", e[e.SearchPage = 1] = "SearchPage", e[e.FirstBuildPage = 2] = "FirstBuildPage"
    }(t.Page || (t.Page = {}));
    ! function(e) {
        e[e.SelectTypeInvalid = 1] = "SelectTypeInvalid", e[e.PlateNumberInvalid = 2] = "PlateNumberInvalid", e[e.PlateNumberUsed = 3] = "PlateNumberUsed", e[e.NumberPlateDBError = 4] = "NumberPlateDBError", e[e.EmptyPlateNumberNotEnough = 5] = "EmptyPlateNumberNotEnough", e[e.KeywordLengthInvalid = 6] = "KeywordLengthInvalid", e[e.KeywordTooManyWhitespace = 7] = "KeywordTooManyWhitespace", e[e.TemplateCodeInvalid = 8] = "TemplateCodeInvalid", e[e.ImpossiblePurchase = 9] = "ImpossiblePurchase", e[e.PlayerLevelLimit = 10] = "PlayerLevelLimit", e[e.NotEnoughSPToPurchase = 11] = "NotEnoughSPToPurchase", e[e.NumberPlateDecreaseSpFailed = 12] = "NumberPlateDecreaseSpFailed", e[e.LotteryItemNotEnough = 13] = "LotteryItemNotEnough", e[e.LotteryCodeError = 14] = "LotteryCodeError", e[e.PlateNumberPlayerInfoDBError = 15] = "PlateNumberPlayerInfoDBError", e[e.PlateNumberDoesNotExist = 16] = "PlateNumberDoesNotExist", e[e.PlateNumberExchangeLengthError = 17] = "PlateNumberExchangeLengthError", e[e.PlateNumberExchangeConfigError = 18] = "PlateNumberExchangeConfigError", e[e.PlateNumberAdvanceLimitError = 19] = "PlateNumberAdvanceLimitError", e[e.NumberPlateIncreaseSpFailed = 20] = "NumberPlateIncreaseSpFailed", e[e.NumberPlateMaxItemSlotSizeLimit = 21] = "NumberPlateMaxItemSlotSizeLimit", e[e.ExpandItemNotEnough = 22] = "ExpandItemNotEnough", e[e.NumberPlateItemParamError = 23] = "NumberPlateItemParamError", e[e.NumberPlatePlayerInfoDoesNotExist = 25] = "NumberPlatePlayerInfoDoesNotExist", e[e.NumberPlateSlotNotEnough = 26] = "NumberPlateSlotNotEnough", e[e.NumberPlateNormalRandomError = 27] = "NumberPlateNormalRandomError", e[e.NumberPlateAdvanceRandomError = 28] = "NumberPlateAdvanceRandomError", e[e.NumberPlateSelectListDBError = 29] = "NumberPlateSelectListDBError", e[e.PlateNumberNormalLimitError = 30] = "PlateNumberNormalLimitError", e[e.PlateNumberNotSelf = 31] = "PlateNumberNotSelf", e[e.PlateNumberSelected = 32] = "PlateNumberSelected", e[e.PlateNumberResetPrefixNumNotEnough = 33] = "PlateNumberResetPrefixNumNotEnough", e[e.NumberPlateIncludesForbiddenWords = 34] = "NumberPlateIncludesForbiddenWords", e[e.NumberPlatePrefixLengthLimit = 35] = "NumberPlatePrefixLengthLimit", e[e.NumberPlatePrefixHasSpace = 36] = "NumberPlatePrefixHasSpace", e[e.NumberPlateItemModifyZero = 37] = "NumberPlateItemModifyZero", e[e.NumberPlateErrorPid = 38] = "NumberPlateErrorPid", e[e.NumberPlatePrefixInvalidCharacter = 39] = "NumberPlatePrefixInvalidCharacter", e[e.NumberPlateExchangeSelectListNotEmpty = 40] = "NumberPlateExchangeSelectListNotEmpty", e[e.NumberPlateLotterySelectListNotEmpty = 41] = "NumberPlateLotterySelectListNotEmpty"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    t.ProductCategories = [{
        name: "Category1",
        state: 74
    }, {
        name: "Category2",
        state: 75
    }, {
        name: "Category3",
        state: 76
    }, {
        name: "Category4",
        state: 77
    }], t.EventFilterChanged = "event-filter-changed", t.EventSortChanged = "event-sort-changed", t.EventSelectedFriend = "event-selected-friend", t.ProductFilters = [{
        type: "ALL",
        text: "SHOP_CATEGORY_FILTER_TYPE_ALL"
    }, {
        type: "SP",
        text: "SHOP_CATEGORY_FILTER_TYPE_SP"
    }, {
        type: "CASH",
        text: "SHOP_CATEGORY_FILTER_TYPE_CASH"
    }, {
        type: "MILEAGE",
        text: "SHOP_CATEGORY_FILTER_TYPE_MILEAGE"
    }], t.ProductSorters = [{
        field: "order",
        order: "asc",
        reverse: 1,
        text: "SHOP_CATEGORY_SORT_DEFAULT"
    }, {
        field: "name",
        order: "desc",
        reverse: -1,
        text: "SHOP_CATEGORY_SORT_NAME_DSCE"
    }, {
        field: "name",
        order: "asc",
        reverse: 1,
        text: "SHOP_CATEGORY_SORT_NAME_ASCE"
    }, {
        field: "price",
        order: "desc",
        reverse: -1,
        text: "SHOP_CATEGORY_SORT_PRICE_DSCE"
    }, {
        field: "price",
        order: "asc",
        reverse: 1,
        text: "SHOP_CATEGORY_SORT_PRICE_ASCE"
    }], t.ChargeWindowSize = {
        nexon: {
            width: 560,
            height: 546
        },
        tencent: {
            width: 700,
            height: 630
        },
        dev: {
            width: 1024,
            height: 768
        }
    }, t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.SHOP, e)
    };
    ! function(e) {
        e[e.ProductNotExist = 1] = "ProductNotExist", e[e.ProductNotExistDetail = 2] = "ProductNotExistDetail", e[e.DuplicatedOrder = 3] = "DuplicatedOrder", e[e.FailedUpdateBestProduct = 4] = "FailedUpdateBestProduct", e[e.BannerNotExist = 11] = "BannerNotExist", e[e.BannerAlreadyExistsAtInsertBanner = 12] = "BannerAlreadyExistsAtInsertBanner", e[e.CannotCreateBanner = 13] = "CannotCreateBanner", e[e.BannerAlreadyExistsAtUpdateBanner = 14] = "BannerAlreadyExistsAtUpdateBanner", e[e.CannotModifyBanner = 15] = "CannotModifyBanner", e[e.DuplicatedProduct = 21] = "DuplicatedProduct", e[e.CannotModifyProduct = 22] = "CannotModifyProduct", e[e.TimeSaleIsOverWhenPurchasingProduct = 23] = "TimeSaleIsOverWhenPurchasingProduct", e[e.CannotFindBunchAtPurchaseProduct = 24] = "CannotFindBunchAtPurchaseProduct", e[e.FailedToDecreaseSp = 25] = "FailedToDecreaseSp", e[e.FailedToPurchaseProduct = 26] = "FailedToPurchaseProduct", e[e.NotEnoughSpToPurchase = 27] = "NotEnoughSpToPurchase", e[e.NotExistRewardCodeInExcel = 28] = "NotExistRewardCodeInExcel", e[e.NotExistReward = 29] = "NotExistReward", e[e.NotEnoughTcCashToPurchase = 30] = "NotEnoughTcCashToPurchase", e[e.FailedToDecreaseTcCash = 31] = "FailedToDecreaseTcCash", e[e.CannotCreateBannerAtInsertOrder = 32] = "CannotCreateBannerAtInsertOrder", e[e.NotEnoughNxCashToPurchase = 33] = "NotEnoughNxCashToPurchase", e[e.FailedToPurchaseByNxCash = 34] = "FailedToPurchaseByNxCash", e[e.FailedToConfirmOrder = 35] = "FailedToConfirmOrder", e[e.NotFoundOrderAtConfirmOrder = 36] = "NotFoundOrderAtConfirmOrder", e[e.NotFoundOrderAtCancelOrder = 37] = "NotFoundOrderAtCancelOrder", e[e.FailedToCancelOrder = 38] = "FailedToCancelOrder", e[e.OverTimeSalePeriodAtPurchasePresent = 39] = "OverTimeSalePeriodAtPurchasePresent", e[e.CannotFindBunchAtPurchasePresent = 40] = "CannotFindBunchAtPurchasePresent", e[e.FailedToPresentByNxcash = 41] = "FailedToPresentByNxcash", e[e.CannotDeleteBannerProduct = 42] = "CannotDeleteBannerProduct", e[e.PresentMsgHasBanKeyword = 43] = "PresentMsgHasBanKeyword", e[e.FailedToDecreaseMileage = 44] = "FailedToDecreaseMileage", e[e.NotEnoughMileageToPurchase = 45] = "NotEnoughMileageToPurchase", e[e.ERROR = 101] = "ERROR"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return function(t, i) {
            var n = _.find(e.players, function(e) {
                return i().player.id === e.pid
            });
            t(r(e, n && n.slot))
        }
    }

    function r(e, t) {
        return {
            type: "room.createRoom",
            room: e,
            mySlot: t
        }
    }

    function o(e) {
        return {
            type: "room.leaveRoom",
            isKicked: e
        }
    }

    function a(e) {
        return {
            type: "room.updateEntry",
            changes: e
        }
    }

    function s(e) {
        return {
            type: "room.removeEntry",
            pid: e
        }
    }

    function c(e) {
        return {
            type: "room.updateInfo",
            changes: e
        }
    }

    function d(e) {
        return {
            type: "room.updateHostSlot",
            changes: e
        }
    }

    function l(e) {
        return {
            type: "room.updateSelectedSlot",
            slot: e
        }
    }

    function u() {
        return {
            type: "room.clearKickState"
        }
    }

    function p() {
        return {
            type: "room.showInvitationPopup"
        }
    }

    function h() {
        return {
            type: "room.hideInvitationPopup"
        }
    }

    function f(e, t) {
        return {
            type: "room.showChangeVehiclePopup",
            slot: e,
            featureType: t
        }
    }

    function v() {
        return {
            type: "room.hideChangeVehiclePopup"
        }
    }

    function m(e) {
        return {
            type: "room.resetMatchEndTime",
            timestamp: e
        }
    }

    function g(e) {
        return {
            type: "room.updateTeam",
            teamId: e
        }
    }

    function y(e) {
        return {
            type: "room.updateRoomStatus",
            status: e
        }
    }

    function S(e, t) {
        return {
            type: "room.showChangePursuitTechPopup",
            item1: e,
            item2: t
        }
    }

    function E() {
        return {
            type: "room.hideChangePursuitTechPopup"
        }
    }

    function T(e, t, i, n) {
        return {
            type: "room.setupChangeTrackPopup",
            tracks: e,
            defaultOrder: t,
            gameMode: i,
            channel: n
        }
    }

    function C(e, i) {
        return void 0 === i && (i = t.ALL_DIFFICULTY), {
            type: "room.setChangeTrackPopupIndices",
            indices: e,
            difficultyCode: i
        }
    }

    function b(e, i, n) {
        return void 0 === n && (n = t.ALL_DIFFICULTY), _.filter(i, function(i) {
            return n === t.ALL_DIFFICULTY || e[i].difficultyCode === n
        })
    }

    function P(e, t, i, n) {
        return function(r, o) {
            var a = N.Room.ChannelEnum[i],
                s = e.trackLimit.license,
                c = _.find(s, {
                    channel: a
                }).trackCodes || [],
                d = _(e.trackData.getTracks()).filter(function(e) {
                    return c.indexOf(e.code) > -1
                }).filter(function(e) {
                    return e.room[t]
                }).value().slice(),
                l = _.find(e.gameModeData.gameModeInfo, function(e) {
                    return e.gameMode === t
                });
            (!l || l.track.randomize) && d.unshift(e.trackData.getRandomTrack());
            var u = _(d).map(function(e) {
                    return [e.code, e]
                }).fromPairs().value(),
                p = _.map(d, function(e) {
                    return e.code
                });
            r(T(u, p, t, i));
            var h = b(u, p);
            r(A(n)), r(C(h))
        }
    }

    function I() {
        return {
            type: "room.hideChangeTrackPopup"
        }
    }

    function M(e) {
        return function(t, i) {
            var n = i().room.changeTrackPopup,
                r = n.tracks,
                o = n.selected,
                a = n.defaultOrder,
                s = b(r, a, e);
            t(C(s, e)), t(A(o && -1 !== _.indexOf(s, o) ? o : s.length > 0 ? s[0] : void 0))
        }
    }

    function A(e) {
        return {
            type: "room.setChangeTrackPopupTrack",
            selected: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var N = i(15);
    t.ALL_DIFFICULTY = "TRACK_DIFFICULTY_00", t.createRoom = n, t.leaveRoom = o, t.updateEntry = a, t.removeEntry = s, t.updateInfo = c, t.updateHostSlot = d, t.updateSelectedSlot = l, t.clearKickState = u, t.showInvitationPopup = p, t.hideInvitationPopup = h, t.showChangeVehiclePopup = f, t.hideChangeVehiclePopup = v, t.resetMatchEndTime = m, t.updateTeam = g, t.updateRoomStatus = y, t.showChangePursuitTechPopup = S, t.hideChangePursuitTechPopup = E, t.showChangeTrackPopup = P, t.hideChangeTrackPopup = I, t.setChangeTrackPopupFilter = M, t.setChangeTrackPopupTrack = A
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return e === t
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(7),
        a = i(566),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.itemMap = {}, t.items = [], t
            }
            return r.__extends(t, e), Object.defineProperty(t.prototype, "binders", {
                get: function() {
                    return this.items.map(function(e) {
                        return e.binder
                    })
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.isFunction = function(e) {
                return "function" == typeof e
            }, t.prototype.applyCollection = function(e) {
                for (var t = this.itemMap, i = {}, r = this.props.keyProperty, a = [], s = this.isFunction(e) ? e() : e, c = 0, d = s.length; c < d; c++) {
                    var l = s[c];
                    if (l) {
                        var u = function(e, t) {
                            return r ? e[r] : t
                        }(l, c);
                        if (t[u]) {
                            if (i[u] = t[u], a.push(t[u]), delete t[u], !n(i[u].props, l)) {
                                var p = i[u];
                                p.props = l, this.updateInstance(p.face, p.binder, l)
                            }
                        } else {
                            if (i[u]) {
                                o.error("Duplicates in a props list with id:", u, "It will be omitted.", i[u].props, l);
                                continue
                            }
                            var h = {
                                props: l
                            };
                            a.push(h), i[u] = h
                        }
                    }
                }
                for (var f in t) {
                    var h = t[f];
                    this.destroyInstance(h.face, h.binder)
                }
                for (var c = 0, d = a.length; c < d; c++) {
                    var h = a[c];
                    if (h.face) this.updatePositionIfNeeded(h.face, c);
                    else {
                        var v = this.createInstance(h.props, c);
                        h.face = v.face, h.binder = v.binder
                    }
                }
                this.itemMap = i, this.items = a
            }, t
        }(a.StructuralBinder);
    t.CollectionBinder = s
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return function(t, i) {
            t({
                type: "vehicle.fetch",
                vehicles: e
            });
            var n = _.get(i().player, "recent.vid");
            n && _.find(e, {
                id: n
            }) && i().vehicle.selected !== n && t(v(n))
        }
    }

    function r(e) {
        return {
            type: "vehicle.fetchIgr",
            props: e
        }
    }

    function o(e) {
        return {
            type: "vehicle.add",
            vehicle: e
        }
    }

    function a(e) {
        return {
            type: "vehicle.update",
            vehicle: e
        }
    }

    function s(e) {
        return {
            type: "vehicle.remove",
            id: e
        }
    }

    function c(e) {
        return function(t, i) {
            if (e) {
                var n = i().vehicle.vehicles[e];
                n.isUserChecked || t(a(g.__assign({}, n, {
                    isUserChecked: !0
                })))
            }
            t(v(e))
        }
    }

    function d(e, t) {
        return function(i, n) {
            i(a(g.__assign({}, n().vehicle.vehicles[e], {
                favorite: t
            })))
        }
    }

    function l(e) {
        return function(t, i) {
            var n = i().vehicle;
            t(f(_.mapValues(n.vehicles, function(t) {
                return g.__assign({}, t, {
                    price: e.get(t.code, t.grade)
                })
            })))
        }
    }

    function u(e, t) {
        return function(i, n) {
            i(a(g.__assign({}, n().vehicle.vehicles[e], {
                parts: t
            })))
        }
    }

    function p(e) {
        return {
            type: "vehicle.changeFilter",
            filterState: e
        }
    }

    function h() {
        return {
            type: "vehicle.removeFilter"
        }
    }

    function f(e) {
        return {
            type: "vehicle.updateVehicles",
            vehicles: e
        }
    }

    function v(e) {
        return {
            type: "vehicle.updateSelected",
            id: e
        }
    }

    function m(e) {
        return {
            type: "vehicle.resetUserCheck",
            id: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var g = i(0);
    t.fetch = n, t.fetchIgr = r, t.add = o, t.update = a, t.remove = s, t.select = c, t.setFavorite = d, t.updatePrices = l, t.updateParts = u, t.changeFilter = p, t.removeFilter = h, t.resetUserCheck = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(34);
    ! function(e) {
        e[e.Success = 0] = "Success", e[e.Failed = 1] = "Failed"
    }(t.CmdResult || (t.CmdResult = {}));
    var r = function() {
        function e() {}
        return e.prototype.getInjectorByName = function(e) {
            return n.getInjector().get(e)
        }, e
    }();
    t.BaseCmd = r
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "festival.fetchFestivals",
            festivals: e
        }
    }

    function r(e) {
        return {
            type: "festival.fetchFestivalPlayers",
            festivalPlayers: e
        }
    }

    function o(e) {
        return {
            type: "festival.selectFestival",
            festivalId: e
        }
    }

    function a() {
        return {
            type: "festival.showSchedule"
        }
    }

    function s() {
        return {
            type: "festival.hideSchedule"
        }
    }

    function c() {
        return {
            type: "festival.refreshView"
        }
    }

    function d(e, t, i) {
        return {
            type: "festival.showTooltip",
            target: e,
            tooltipType: t,
            info: i
        }
    }

    function l() {
        return {
            type: "festival.hideTooltip"
        }
    }

    function u(e) {
        return {
            type: "festival.matching",
            isMatching: e
        }
    }

    function p(e, t) {
        return {
            type: "festival.showChangePursuitTechPopup",
            item1: e,
            item2: t
        }
    }

    function h() {
        return {
            type: "festival.hideChangePursuitTechPopup"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.fetchFestivals = n, t.fetchFestivalPlayers = r, t.selectFestival = o, t.deselectFestival = function() {
        return o(void 0)
    }, t.showSchedule = a, t.hideSchedule = s, t.refreshView = c, t.showTooltip = d, t.hideTooltip = l, t.matching = u, t.showChangePursuitTechPopup = p, t.hideChangePursuitTechPopup = h
}, , , function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "configuration.show",
            isShow: e
        }
    }

    function r(e) {
        return {
            type: "configuration.addItem",
            item: e
        }
    }

    function o(e) {
        return {
            type: "configuration.activateItem",
            id: e
        }
    }

    function a(e, t) {
        return {
            type: "configuration.updateStaging",
            id: e,
            changes: t
        }
    }

    function s(e) {
        return {
            type: "configuration.discardStaging",
            id: e
        }
    }

    function c(e) {
        return {
            type: "configuration.initialize",
            id: e
        }
    }

    function d(e, t) {
        return {
            type: "configuration.update",
            id: e,
            config: t
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.show = n, t.addItem = r, t.activateItem = o, t.updateStaging = a, t.discardStaging = s, t.initialize = c, t.update = d
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return f.__assign({}, e, {
            date: Date.now(),
            isNew: !0
        })
    }

    function r(e) {
        return {
            type: "notifier.addLast",
            notifier: n(e)
        }
    }

    function o(e) {
        return {
            type: "notifier.addFirst",
            notifier: n(e)
        }
    }

    function a() {
        return {
            type: "notifier.display"
        }
    }

    function s() {
        return {
            type: "notifier.hide"
        }
    }

    function c(e) {
        return void 0 === e && (e = t.ScreenTag), {
            type: "notifier.pause",
            tag: e
        }
    }

    function d(e) {
        return void 0 === e && (e = t.ScreenTag), {
            type: "notifier.resume",
            tag: e
        }
    }

    function l() {
        return {
            type: "notifier.toggleHistory"
        }
    }

    function u() {
        return {
            type: "notifier.hideHistory"
        }
    }

    function p(e) {
        return {
            type: "notifier.deleteHistory",
            date: e
        }
    }

    function h() {
        return {
            type: "notifier.deleteAllHistory"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var f = i(0);
    t.ScreenTag = "%screen", t.addLast = r, t.addFirst = o, t.display = a, t.hide = s, t.pause = c, t.resume = d, t.toggleHistory = l, t.hideHistory = u, t.deleteHistory = p, t.deleteAllHistory = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(127),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "key", {
                get: function() {
                    return this._key
                },
                set: function(e) {
                    this._key !== e && (this._key = e, this.htmlElement.setAttribute("src", "eawebkit-custom-texture-" + e))
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.createDomNode = function(e) {
                return document.createElement("img")
            }, t.prototype.initializeStyle = function(t) {
                e.prototype.initializeStyle.call(this, t), this.cssProxies[0].setProperty("border", "0")
            }, t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t);
                var i = t.libraryItemName && this._getLibraryItemNameBase(t);
                i && (this.key = i), this.hasSize = !0
            }, t.prototype.cloneProperties = function(t) {
                e.prototype.cloneProperties.call(this, t);
                var i = t;
                this._key = i._key
            }, t
        }(r.DisplayObject);
    a = n.__decorate([o.component("TextureProxy")], a), t.default = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(22),
        o = i(7),
        a = i(9),
        s = i(1),
        c = i(17),
        d = i(3),
        l = i(191),
        u = i(120),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.assistIndicators = {}, t.prevRpm = 0, t.prevNitro = 0, t.fullNitrous = !1, t.infiniteNitroDuration = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.container = this.getFace(".CONTAINER"), this.dashboard = this.container.$(".RIGHTBOTTOM"), this.translate(".id-hpMeter .id-nameMC .comp-TextField", "ID_HUD_DURABILITY_GAUGE_STATE_NORMAL"), this.translate(".id-repairHpMeter .id-criticalTextContainer .MainTextMC", "ID_HUD_DURABILITY_STATE_CRITICAL_TITLE"), this.translate(".id-repairHpMeter .id-criticalTextContainer .DescriptionTextMC", "ID_HUD_DURABILITY_STATE_CRITICAL_INFO_1"), this.translate(".id-repairHpMeter .id-nameMC .comp-TextField", "ID_HUD_DURABILITY_GAUGE_STATE_CRITICAL"), this.translate(".id-autoAssistIndicator .id-indicatorABS .id-textFieldContainer", "ID_HUD_ABS"), this.translate(".id-autoAssistIndicator .id-indicatorESC .id-textFieldContainer", "ID_HUD_ESC"), this.translate(".id-autoAssistIndicator .id-indicatorHCS .id-textFieldContainer", "ID_HUD_HCS"), this.actionGuideNitro = this.addChildBinder(".id-nitrousMeter .id-actionGuide", u.HudActionGuideBinder, {
                    inputKey: "nitro"
                }), this.driveMileageMeter = this.addChildBinder(".id-kmNum", h), l.DrivingAssistList.forEach(function(t) {
                    var i = e.convertFace(".id-autoAssistIndicator .id-indicator" + t);
                    e.assistIndicators[t] = i, e.gotoAndStop(i, "off")
                })
            }, t.prototype.setNitrousEvents = function(e) {
                var t = this;
                if (e) return this.visible(".id-nitrousMeter", !1);
                var i = this.initGlowFilters(this.dashboard.$(".id-nitrousMeter .id-gauge"));
                this.filtersGaugeGlow = i.filtersGlow, this.filtersGaugeNoGlow = i.filtersNoGlow;
                var n = this.initGlowFilters(this.dashboard.$(".id-nitrousMeter .id-N2O_LABEL"));
                this.filtersN2OGlow = n.filtersGlow, this.filtersN2ONoGlow = n.filtersNoGlow, this.addManagedListener(this.externalService, a.default.beHUDSetNitrous, this.setNitrous.bind(this)), this.setNitrous(1), this.addManagedListener(this.externalService, a.default.beHUDSetNitrousIncreaseReason, function(e) {
                    if (!(0 < t.infiniteNitroDuration)) {
                        var i = t.dashboard.$(".id-nitrousMeter .id-NITROUS_BONUS");
                        t.bindText(i.$(".id-textFieldContainer"), t.getStatusText(e)), i.killCustomTweens(), i.addCustomFromToTween(.4, {
                            flash: {
                                alpha: 0
                            }
                        }, {
                            flash: {
                                alpha: 1
                            }
                        }), i.addCustomToTween(.4, {
                            delay: 1.4,
                            flash: {
                                alpha: 0
                            }
                        })
                    }
                }), this.addManagedListener(this.externalService, a.default.beHUDSetInfiniteNitro, function(e) {
                    o.trace("Infinite Nitro callback. Duration : " + e);
                    var i = t.dashboard.$(".id-nitrousMeter .id-infiniteGuage");
                    0 === t.infiniteNitroDuration && t.gotoAndPlay(i, "intro"), t.infiniteNitroDuration = e;
                    var n = t.dashboard.$(".id-nitrousMeter .id-fullNitro");
                    t.gotoAndStop(n, 0), t.displayInfiniteNitroDuration(t.infiniteNitroDuration)
                })
            }, t.prototype.setHpEvents = function(e) {
                var t = this;
                this.hpContext = {
                    current: 1,
                    penaltyMode: !1
                }, this.addManagedListener(this.externalService, a.default.beHUDSetHpGauge, function(i) {
                    o.trace("Control HP Gauge. Passed value : " + i);
                    var n = 63.3 * (1 - i);
                    t.setDamageEffect(i, 63.3, n), e || (t.setAlertEffect(i, n), t.setRepairEffect(i, 63.3), 0 < i && i < 1 || t.onVehicleBroken(i <= 0)), t.hpContext.current = i;
                    var r = t.recordService.getRecord("lowestHpRatio");
                    (void 0 === r || i < r) && t.recordService.setRecord("lowestHpRatio", i)
                }), this.onVehicleBroken(!1)
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.dashboard.$(".id-tachometer .id-NEEDLESHADOW").alpha = 0, this.dashboard.$(".id-nitrousMeter .id-NITROUS_BONUS").alpha = 0, this.convertFace(this.dashboard.$(".id-tachometer .id-speedLabel")).ignoreRepositionLayout = !0, this.convertFace(this.dashboard.$(".id-tachometer .id-CURRENTGEAR .id-gearLabel")).ignoreRepositionLayout = !0;
                var t = this.hudService.isObserver;
                this.setNitrousEvents(t), this.setHpEvents(t), this.addManagedListener(this.externalService, a.default.beHUDSetTachometer, this.setTachometer.bind(this)), this.setTachometer(0, 0, 1), this.hudService.once("intro", function() {
                    return e.gotoAndPlay(e.container, "intro")
                }), this.addManagedListener(this.externalService, a.default.beAddTakeDownRecord, function(t, i) {
                    e.recordService.pushRecord("takedown", {
                        target: t,
                        time: i
                    })
                }), this.addManagedListener(this.externalService, a.default.beAddHitRecord, function(t) {
                    o.trace("CoreEvent.beAddHitRecord:", t), e.recordService.pushRecord("hit", t)
                }), this.addManagedListener(this.externalService, a.default.beAddJumpRangeRecord, function(t, i, n) {
                    e.recordService.pushRecord("jump", {
                        duration: i,
                        range: t,
                        time: n
                    })
                }), this.addManagedListener(this.externalService, a.default.beAddDriftDuringTimeRecord, function(t, i, n) {
                    e.recordService.pushRecord("drift", {
                        duration: i,
                        range: t,
                        time: n
                    })
                }), this.addManagedListener(this.externalService, a.default.beStartShortTurbo, function(t) {
                    e.recordService.pushRecord("shortturbo", t)
                }), this.addManagedListener(this.externalService, a.default.beAddBrakeUseRecord, function(t, i, n) {
                    e.recordService.pushRecord("brakeuse", {
                        duration: i,
                        time: n
                    }), t && e.recordService.pushRecord("handBrakeUse", {
                        duration: i,
                        time: n
                    })
                }), this.addManagedListener(this.externalService, a.default.beAddSlipStreamDuringTime, function(t, i, n) {
                    e.recordService.pushRecord("slipstream", {
                        duration: t,
                        range: n,
                        time: i
                    })
                }), this.hudService.on("lapPassStarted", function() {
                    e.dashboard.$(".id-repairHpMeter .id-criticalTextContainer").alpha = .3
                }), this.hudService.on("lapPassFinished", function() {
                    e.dashboard.$(".id-repairHpMeter .id-criticalTextContainer").alpha = 1
                }), this.addManagedListener(this.externalService, a.default.beHUDPerfectStart, function(t) {
                    e.setNitrous(1)
                }), this.addManagedListener(this.externalService, a.default.beHUDSetDrivingAssist, function(t, i) {
                    var n = d.store.getState().configuration.configs.ingame.applied,
                        o = r.camelCase("use" + t),
                        a = n[o] && i ? "on" : "off";
                    e.assistIndicators[t].currentLabel !== a && e.gotoAndStop(e.assistIndicators[t], a)
                })
            }, t.prototype.initGlowFilters = function(e) {
                var t = e.filters || [],
                    i = r.cloneDeep(t),
                    n = r.cloneDeep(t),
                    o = {
                        name: "glowFilter",
                        quality: "low",
                        angle: 45,
                        blurX: 15,
                        blurY: 15,
                        color: "#16a7c8",
                        inner: !1,
                        knockout: !1,
                        strength: 100
                    };
                i.push(o);
                var a = {
                    name: "glowFilter",
                    quality: "low",
                    angle: 45,
                    blurX: 0,
                    blurY: 0,
                    color: "#ffffff",
                    inner: !1,
                    knockout: !1,
                    strength: 100
                };
                return n.push(a), e.filters = n, {
                    filtersGlow: i,
                    filtersNoGlow: n
                }
            }, t.prototype.setTachometer = function(e, t, i) {
                var n = this.dashboard.$(".id-tachometer"),
                    r = n.$(".id-needle"),
                    o = n.$(".id-NEEDLESHADOW"),
                    a = 56.2 + e / 1e4 * 246.9;
                r.rotation = a, a = e / 1e4 * 246.9 - 155.7, o.rotation = a, this.bindText(n.$(".id-speedLabel"), t), this.bindText(n.$(".id-CURRENTGEAR .id-gearLabel"), -1 === i ? "R" : i), this.prevRpm = e, this.recordService.setRecord("speed", t || 0);
                var s = this.recordService.getRecord("topspeed");
                (void 0 === s || s < t) && this.recordService.setRecord("topspeed", t)
            }, t.prototype.setNitrous = function(e) {
                var t = this.dashboard.$(".id-nitrousMeter"),
                    i = t.$(".id-gauge .id-mask"),
                    n = 64 * e - 22.2;
                if (i.killCustomTweens(), i.addCustomToTween(.2, {
                        flash: {
                            rotation: n
                        }
                    }), this.prevNitro !== e) {
                    var r = t.$(".id-gauge");
                    r.killCustomTweens(), r.addCustomSetTween({
                        flash: {
                            filters: this.filtersGaugeGlow
                        }
                    }), r.addCustomToTween(.2, {
                        flash: {
                            filters: this.filtersGaugeNoGlow
                        }
                    });
                    var o = t.$(".id-N2O_LABEL");
                    o.killCustomTweens(), o.addCustomSetTween({
                        flash: {
                            filters: this.filtersN2OGlow
                        }
                    }), o.addCustomToTween(.2, {
                        flash: {
                            filters: this.filtersN2ONoGlow
                        }
                    }), e > .02 ? this.actionGuideNitro.guide() : this.actionGuideNitro.hide();
                    var a = this.dashboard.$(".id-nitrousMeter .id-fullNitro");
                    !this.fullNitrous && e >= 1 ? (this.gotoAndPlay(a, "intro"), this.fullNitrous = !0) : this.fullNitrous && (this.gotoAndPlay(a, "out"), this.fullNitrous = !1)
                }
                this.prevNitro = e
            }, t.prototype.getStatusText = function(e) {
                var t = ["STATUS_DRIFT", "DRIVINGSTATUS_OPPOSITE", "STATUS_TOPSPEED", "DRIVINGSTATUS_SLIPSTREAM", "DRIVINGSTATUS_SHORTCUT", "DRIVINGSTATUS_NEARDRIVING", "DRIVINGSTATUS_NEARMISSONCOMING", "DRIVINGSTATUS_PROXIMITY", "DRIVINGSTATUS_COLLISION", "DRIVINGSTATUS_JUMP"],
                    i = t[e];
                return i ? this.$filter("translate")(i) : "UNKNOWN"
            }, t.prototype.displayInfiniteNitroDuration = function(e) {
                var t = this,
                    i = this.dashboard.$(".id-nitrousMeter .id-infiniteGuage"),
                    n = this.infiniteNitroDuration - Math.floor(this.infiniteNitroDuration);
                if (0 === n && (n = 1), this.bindText(i.$(".id-InfiniteNitroCountNum"), 0 < this.infiniteNitroDuration ? Math.ceil(this.infiniteNitroDuration) : 0), 0 === this.infiniteNitroDuration) return void this.gotoAndPlay(i, "out");
                o.trace("Rest duration : " + this.infiniteNitroDuration + ", Waiting term : " + n), setTimeout(function() {
                    e === t.infiniteNitroDuration && (t.infiniteNitroDuration -= n, t.displayInfiniteNitroDuration(t.infiniteNitroDuration))
                }, Math.floor(1e3 * n))
            }, t.prototype.setDamageEffect = function(e, t, i) {
                var n = this.dashboard.$(".id-hpMeter .id-hpGaugeContainer"),
                    r = n.$(".id-hpGaugeMask"),
                    o = n.$(".id-whiteGauge .id-damageMask"),
                    a = n.$(".id-damageEffect");
                this.hpContext.current > e ? (o.addCustomToTween(.3, {
                    flash: {
                        rotation: -t + i + -2.3
                    },
                    ease: Power3.easeOut
                }), setTimeout(function() {
                    r.addCustomToTween(.3, {
                        flash: {
                            rotation: i
                        },
                        ease: Power3.easeOut
                    })
                }, 800), a.addCustomToTween(.3, {
                    flash: {
                        rotation: i
                    },
                    ease: Power3.easeOut
                }), this.gotoAndPlay(a, "damageEffect")) : (o.killCustomTweens(), r.killCustomTweens(), o.addCustomToTween(.7, {
                    flash: {
                        rotation: -t + i + -2.3
                    },
                    ease: Power3.easeOut
                }), r.addCustomToTween(.7, {
                    flash: {
                        rotation: i
                    },
                    ease: Power3.easeOut
                }), a.rotation = 0, this.gotoAndStop(a, "stop"))
            }, t.prototype.setAlertEffect = function(e, t) {
                var i = this.dashboard.$(".id-hpMeter .id-hpGaugeContainer"),
                    n = i.$(".id-alertContainer .id-alertMask"),
                    r = (i.$(".id-alertContainer"), i.$(".id-whiteGauge .id-hpGauge"));
                n.rotation = t, .2 >= e ? (r.addCustomToTween(.3, {
                    flash: {
                        alpha: 0
                    }
                }), this.gotoAndStop(i, "alert")) : (r.alpha = 1, this.gotoAndStop(i, "normal"))
            }, t.prototype.setRepairEffect = function(e, t) {
                var i = this.dashboard.$(".id-repairHpMeter .id-repairGaugeContainer .id-repairGaugeMask"),
                    n = this.dashboard.$(".id-repairHpMeter .id-criticalTextContainer"),
                    r = this.vehicleDataService.getGlobalPenalty().duration;
                0 >= e && (i.rotation = t, i.addCustomToTween(r / 1e3, {
                    flash: {
                        rotation: 0
                    }
                }), this.hpContext.penaltyMode = !0, this.gotoAndPlay(n, "critical")), this.hpContext.penaltyMode && 1 <= e && (this.hpContext.penaltyMode = !1, this.gotoAndPlay(n, "normal"))
            }, t.prototype.onVehicleBroken = function(e) {
                this.container.$(".id-hpMeter").alpha = e ? 0 : 1, this.container.$(".id-repairHpMeter").alpha = e ? 1 : 0, this.hudService.emit("vehiclebroken", e)
            }, t
        }(c.StageBinder);
    n.__decorate([s.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([s.autowired("externalService")], p.prototype, "externalService", void 0), n.__decorate([s.autowired("vehicleDataService")], p.prototype, "vehicleDataService", void 0), n.__decorate([s.autowired("recordService")], p.prototype, "recordService", void 0), n.__decorate([s.autowired("hudService")], p.prototype, "hudService", void 0), t.HudDashboardBinder = p;
    var h = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.accHudUpdateMileage = 0, t.accServerUpdateMileage = 0, t
        }
        return n.__extends(t, e), t.prototype.onAddedToScene = function() {
            var e = this;
            if (d.store.getState().view.flags.openworld) {
                var t = this.driveMileageService.getAccMileage(),
                    i = Math.min(99999999, Math.floor(t / 1e3));
                this.face.$$(".id-numLabel").forEach(function(t) {
                    return e.bindText(t, i + "km")
                }), this.gotoAndPlay(this.face, "normal"), this.watchMileage(), this.visible(this.face, !0)
            } else this.visible(this.face, !1)
        }, t.prototype.watchMileage = function() {
            var e = this;
            this.addManagedListener(this.externalService, a.default.beSetDistance, function(t) {
                var i = e.driveMileageService.getLastMileage(),
                    n = r.isUndefined(i) ? 0 : Math.max(0, t - i);
                e.driveMileageService.updateLastMileage(t), e.accHudUpdateMileage += n, e.accServerUpdateMileage += n;
                if (1e3 <= e.accHudUpdateMileage) {
                    var o = e.driveMileageService.increaseMileage(e.accHudUpdateMileage),
                        a = Math.min(99999999, Math.floor(o / 1e3));
                    e.face.$$(".id-numLabel").forEach(function(t) {
                        return e.bindText(t, a + "km")
                    }), e.accHudUpdateMileage = e.accHudUpdateMileage % 1e3
                }
                var s = !1,
                    c = e.driveMileageService.getDriveMileageInfo(),
                    d = c.accMileage,
                    l = c.rewardCount,
                    u = c.rewardMileage,
                    p = c.updateMileageThreshold;
                (l + 1) * u <= d && (e.gotoAndPlay(e.face, "reward"), setTimeout(function() {
                    e.gotoAndPlay(e.face, "normal")
                }, 1600), e.driveMileageService.displayRewardMessageBar(), e.driveMileageService.updateRewardCount(l + 1), s = !0), (s || p <= e.accServerUpdateMileage) && (e.driveMileageService.updateDriveMileage(e.accServerUpdateMileage), e.accServerUpdateMileage = e.accServerUpdateMileage % 1e3)
            })
        }, t
    }(s.Binder);
    n.__decorate([s.autowired("externalService")], h.prototype, "externalService", void 0), n.__decorate([s.autowired("openworldDriveMileageService")], h.prototype, "driveMileageService", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = i(8),
        a = function(e) {
            function t(i, n) {
                var r = e.call(this) || this;
                return r._buttons = [], r._selectedIndex = -1, r.addEventListener = t.prototype.on, r.removeEventListener = t.prototype.removeListener, r.dispatchEvent = t.prototype.emit, r.name = i, r.scope = n, r.handleButtonSelect = r._handleButtonSelect.bind(r), r
            }
            return n.__extends(t, e), t.getGroup = function(e, i) {
                var n = t.groups[e] || [],
                    r = void 0;
                return n.some(function(e) {
                    if (e.scope === i) return r = e, !0
                }), r
            }, Object.defineProperty(t.prototype, "length", {
                get: function() {
                    return this._buttons.length
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "selectedButton", {
                get: function() {
                    return this._buttons[this.selectedIndex]
                },
                set: function(e) {
                    -1 !== this._buttons.indexOf(e) && (e.selected = !0)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "selectedIndex", {
                get: function() {
                    return this._selectedIndex
                },
                set: function(e) {
                    this._selectedIndex !== e && (this._selectedIndex = e, this.emit(o.EventEx.CHANGE))
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.hasEventListener = function(e) {
                var t = this.listeners(e);
                return !(!t || !t.length)
            }, t.prototype.addButton = function(e) {
                e.addEventListener(o.EventEx.SELECT, this.handleButtonSelect), this._buttons.push(e)
            }, t.prototype.getButtonAt = function(e) {
                return this._buttons[e]
            }, t.prototype.hasButton = function(e) {
                return this._buttons.indexOf(e) >= 0
            }, t.prototype.removeButton = function(e) {
                var t = this._buttons.indexOf(e);
                return t >= 0 && (e.removeEventListener(o.EventEx.SELECT, this.handleButtonSelect), this._buttons.splice(t, 1), this.selectedIndex === t && (t = -1)), t
            }, t.prototype.setSelectedButtonByIndex = function(e) {
                e >= 0 && e < this._buttons.length && (this._buttons[e].selected = !0)
            }, t.prototype.validate = function() {
                var e = this;
                _.forEach(this._buttons, function(t, i) {
                    t.removeEventListener(o.EventEx.SELECT, e.handleButtonSelect), t.selected = i === e._selectedIndex, t.addEventListener(o.EventEx.SELECT, e.handleButtonSelect)
                })
            }, t.prototype.resetButtons = function() {
                for (var e, t = 0, i = this._buttons.length; t < i; ++t) e = this._buttons[t], e.removeEventListener(o.EventEx.SELECT, this.handleButtonSelect), e.selected = !1, e.addEventListener(o.EventEx.SELECT, this.handleButtonSelect);
                this.selectedIndex = -1
            }, t.prototype._handleButtonSelect = function(e) {
                for (var t, i = e.currentTarget, n = 0, r = this._buttons.length; n < r; ++n) t = this._buttons[n], t.removeEventListener(o.EventEx.SELECT, this.handleButtonSelect), t === i ? (t.selected = !0, this.selectedIndex = n) : t.selected = !1, t.addEventListener(o.EventEx.SELECT, this.handleButtonSelect)
            }, t
        }(r.EventEmitter);
    a.groups = {}, t.ButtonGroup = a
}, , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(12),
        o = i(3);
    t.defaultSortKeys = {
        clazz: "ALL",
        manufacturerCode: 0,
        sortKey: void 0
    }, t.vehicleClassOrder = {
        SS: 0,
        S: 1,
        A: 2,
        B: 3,
        C: 4
    };
    var a = function() {
        function e(e, i) {
            var n = this;
            this.$filter = e, this.blueprintService = i, this.isNewVehicle = function(e) {
                if (e) return +new Date(e.checkedat) > +new Date(o.store.getState().player.checkedat.vehicle.toString())
            }, this.compareBoolean = function(e, t) {
                return (e ? 1 : 0) - (t ? 1 : 0)
            }, this.restSorter = function(e, i) {
                var n = t.vehicleClassOrder[e.clazz],
                    r = t.vehicleClassOrder[i.clazz];
                return n !== r ? n - r : e.grade !== i.grade ? i.grade - e.grade : e.id < i.id ? -1 : 1
            }, this.defaultSorter = function(e, t) {
                var i = o.store.getState().player.recent.vid;
                return t.id === i != (e.id === i) ? n.compareBoolean(t.id === i, e.id === i) : t.igr !== e.igr ? n.compareBoolean(t.igr, e.igr) : r.isTrialVehicle(t) !== r.isTrialVehicle(e) ? n.compareBoolean(r.isTrialVehicle(t), r.isTrialVehicle(e)) : t.favorite !== e.favorite ? n.compareBoolean(t.favorite, e.favorite) : n.isNewVehicle(t) !== n.isNewVehicle(e) ? n.compareBoolean(n.isNewVehicle(t), n.isNewVehicle(e)) : n.restSorter(e, t)
            }, this.produceablitySorter = function(e, t) {
                var i = n.isProducible(e.code),
                    r = n.isProducible(t.code);
                if (i && !r) return -1;
                if (!i && r) return 1;
                var o = n.getBlueprintCount(e.code),
                    a = n.getBlueprintCount(t.code);
                return o !== a ? a - o : n.restSorter(e, t)
            }, this.priceSorter = function(e, t) {
                return r.isTrialVehicle(t) !== r.isTrialVehicle(e) ? n.compareBoolean(r.isTrialVehicle(e), r.isTrialVehicle(t)) : r.isTrialVehicle(e) && r.isTrialVehicle(t) ? n.ovrSorter(e, t) : e.price > t.price ? -1 : e.price < t.price ? 1 : n.restSorter(e, t)
            }, this.nameSorter = function(e, t) {
                var i = n.$filter("vehicleName"),
                    r = i(e.code).toUpperCase(),
                    o = i(t.code).toUpperCase();
                return r < o ? -1 : r > o ? 1 : n.restSorter(e, t)
            }, this.classSorter = function(e, i) {
                var r = t.vehicleClassOrder[e.clazz],
                    o = t.vehicleClassOrder[i.clazz];
                return r !== o ? r - o : n.restSorter(e, i)
            }, this.gradeSorter = function(e, t) {
                return e.grade !== t.grade ? t.grade - e.grade : n.restSorter(e, t)
            }, this.ovrSorter = function(e, t) {
                return e.ovr !== t.ovr ? t.ovr - e.ovr : n.restSorter(e, t)
            }, this.accelerationSorter = this.statusSorterTemplate("acceleration"), this.nitroCapacitySorter = this.statusSorterTemplate("nitroCapacity"), this.strengthSorter = this.statusSorterTemplate("strength"), this.durabilitySorter = this.statusSorterTemplate("durability"), this.topSpeedSorter = this.statusSorterTemplate("topSpeed")
        }
        return e.prototype.getSortItemsInGarage = function() {
            var e = [{
                text: "DRIVERCREW_SORTING_FAVORITES",
                type: "default"
            }, {
                text: "COMMON_SORTER_VEHICLEVALUE",
                type: "value",
                key: ["price"]
            }, {
                text: "COMMON_SORTER_VEHICLECLASS",
                type: "class",
                key: ["class"]
            }, {
                text: "COMMON_SORTER_VEHICLEGRADE",
                type: "value",
                key: ["grade"]
            }, {
                text: "COMMON_SORTER_VEHICLEOVR",
                type: "value",
                key: ["ovr"]
            }, {
                text: "COMMON_SORTER_ATTRIBUTE_MAXSPEED",
                type: "value",
                key: ["status", "topSpeed"]
            }, {
                text: "COMMON_SORTER_ATTRIBUTE_ACCLERATION",
                type: "value",
                key: ["status", "acceleration"]
            }, {
                text: "COMMON_SORTER_ATTRIBUTE_NITROCAPACITY",
                type: "value",
                key: ["status", "nitroCapacity"]
            }, {
                text: "COMMON_SORTER_ATTRIBUTE_STRENGTH",
                type: "value",
                key: ["status", "strength"]
            }, {
                text: "COMMON_SORTER_ATTRIBUTE_DURABILITY",
                type: "value",
                key: ["status", "durability"]
            }, {
                text: "COMMON_SORTER_VEHICLENAME",
                type: "name",
                key: ["name"]
            }];
            return {
                items: e,
                current: e[0]
            }
        }, e.prototype.getBlueprintCount = function(e) {
            return this.blueprintService.getBlueprintCount(e)
        }, e.prototype.getBlueprintRequirements = function(e) {
            var t = this.blueprintService.getStaticBlueprint(e);
            return t && t.blueprintAmount || 0
        }, e.prototype.getRequiredSp = function(e) {
            var t = this.blueprintService.getStaticBlueprint(e);
            return t && t.productionCost || 0
        }, e.prototype.isProducible = function(e) {
            return this.getBlueprintCount(e) >= this.getBlueprintRequirements(e) && o.store.getState().player.sp >= this.getRequiredSp(e)
        }, e.prototype.statusSorterTemplate = function(e) {
            var t = this;
            return function(i, n) {
                var r = i.status,
                    o = n.status;
                return r[e] !== o[e] ? o[e] - r[e] : t.restSorter(i, n)
            }
        }, e.prototype.applySorter = function(e, t) {
            void 0 === t && (t = ["default"]);
            var i = {
                default: this.defaultSorter,
                price: this.priceSorter,
                name: this.nameSorter,
                class: this.classSorter,
                grade: this.gradeSorter,
                ovr: this.ovrSorter,
                "status.acceleration": this.accelerationSorter,
                "status.nitroCapacity": this.nitroCapacitySorter,
                "status.strength": this.strengthSorter,
                "status.durability": this.durabilitySorter,
                "status.topSpeed": this.topSpeedSorter
            };
            e.sort(i[t.join(".")])
        }, e.prototype.applyProductionSorter = function(e, t) {
            void 0 === t && (t = ["default"]);
            var i = {
                default: this.produceablitySorter,
                price: this.priceSorter,
                ovr: this.ovrSorter,
                class: this.classSorter
            };
            e.sort(i[t.join(".")])
        }, e
    }();
    a.$inject = ["$filter", "blueprintService"], t.UtilService = a, angular.module("edge.components").factory("$util", n.default.generateService(a))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(49),
        o = i(144),
        a = i(19),
        s = o.NumberUtil.fix,
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._startRadian = 1 * Math.PI / 2, t._ratio = 0, t
            }
            return n.__extends(t, e), t.prototype.postCreate = function() {
                e.prototype.postCreate.call(this);
                var t = this.$(".comp-Shape");
                t && (this._path = $(t.htmlElement).find("path").get(0), this._path.removeAttribute("fill-rule"), this._radius = t.width / 2)
            }, t.prototype.cloneProperties = function(t) {
                e.prototype.cloneProperties.call(this, t);
                var i = t;
                this._startRadian = i._startRadian, this._ratio = i._ratio
            }, Object.defineProperty(t.prototype, "startRadian", {
                get: function() {
                    return this._startRadian
                },
                set: function(e) {
                    this._startRadian !== e && (this._startRadian = e, this.invalidateData())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "ratio", {
                get: function() {
                    return this._ratio
                },
                set: function(e) {
                    e = Math.min(e, 1), this._ratio !== e && (this._ratio = e, this.invalidateData())
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.drawData = function() {
                e.prototype.drawData.call(this), this.drawPiePath()
            }, t.prototype.drawPiePath = function(e) {
                if (void 0 === e && (e = 8), this._path) {
                    var t = this._path,
                        i = this._startRadian,
                        n = this._ratio,
                        r = this._radius;
                    if (t.setEdgePieMask) return void t.setEdgePieMask(i, n, r);
                    var o = t.pathSegList;
                    if (o && (o.clear(), !(n <= 0))) {
                        o.appendItem(t.createSVGPathSegMovetoAbs(r, r)), e < 3 && (e = 3);
                        for (var a = r / Math.cos(1 / e * Math.PI), c = function(e) {
                                o.appendItem(t.createSVGPathSegLinetoAbs(s(Math.cos(e) * a + r, 2), s(Math.sin(e) * a + r, 2)))
                            }, d = Math.floor(n * e), l = 0; l <= d; l++) c(l / e * (2 * Math.PI) + i);
                        n * e !== d && c(n * (2 * Math.PI) + i), o.appendItem(t.createSVGPathSegClosePath())
                    }
                }
            }, t
        }(r.MovieClip);
    c = n.__decorate([a.component("PieMask")], c), t.default = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(37),
        s = i(3),
        c = i(29),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-StartEffect .id-PerfectStartEffect .TextPerfect .comp-TextField", "MESSAGE_PERFECTSTART"), this.translate(".id-StartEffect .id-startText .comp-TextField", "BEPLAY_MAIN_START"), this.visible(".id-PerfectStartEffect", !1), this.controller = "keyboard"
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".id-StartEffect");
                this.stage.stop(), t.stop(), this.hudService.once("start", function() {
                    e.audioService.get(a.FxAudioCode.BeginStart).play();
                    var t = e.getFace(".id-StartEffect");
                    e.gotoAndPlay(t, 2), e.once(t, "ended", function() {
                        e.hudService.intro(), t.$(".id-startText").visible = !1, e.hudExitButtonService.showExitButton(!0);
                        var i = s.store.getState().match,
                            n = i.match ? i.match.gameMode : void 0;
                        e.bgmService.playCore(n), "PURSUITINDIVIDUAL" === n && e.audioService.get(a.FxAudioCode.Pursuit_Start).play()
                    })
                }), this.hudService.once("perfectStart", function() {
                    e.recordService.pushRecord("perfectstart", e.hudService.timeElapsed);
                    var t = e.getFace(".id-PerfectStartEffect");
                    t.visible = !0, e.gotoAndPlay(t, 2), e.once(t, "hide", function() {
                        e.$window.beHUDShowMessage(e.$filter("template")({
                            nitro: e.getNitroKeyString()
                        }, "INGAME_PERFECTSTART_NITROTIP"))
                    }), e.once(t, "stop", function() {
                        t.visible = !1
                    })
                })
            }, t.prototype.getKeyCode = function(e) {
                var t = s.store.getState().configuration.configs.inputkey;
                if (!t) return 0;
                var i = t.applied[e];
                return i ? i["keyboard" === this.controller ? 0 : 1] : 0
            }, t.prototype.getKeyName = function(e) {
                return "keyboard" === this.controller ? c.KeyboardMap.getKeyName(e) : c.KeyboardMap.getPadKeyName(e)
            }, t.prototype.getLocalizedKeyName = function(e) {
                this.sessionService.config.locale;
                return -1 !== ["SPACE"].indexOf(e.toUpperCase()) ? this.$filter("translate")("USERGUIDE_KEY_" + e.toUpperCase()) : e
            }, t.prototype.getNitroKeyString = function() {
                return this.getLocalizedKeyName(this.getKeyName(this.getKeyCode("nitro")))
            }, t.prototype.onDetach = function() {
                this.hudExitButtonService.showExitButton(!1)
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("$window")], d.prototype, "$window", void 0), n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("audioService")], d.prototype, "audioService", void 0), n.__decorate([r.autowired("hudService")], d.prototype, "hudService", void 0), n.__decorate([r.autowired("hudExitButtonService")], d.prototype, "hudExitButtonService", void 0), n.__decorate([r.autowired("bgmService")], d.prototype, "bgmService", void 0), n.__decorate([r.autowired("recordService")], d.prototype, "recordService", void 0), n.__decorate([r.autowired("sessionService")], d.prototype, "sessionService", void 0), t.HudStartEffectBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(1),
        a = i(17),
        s = i(3),
        c = i(29),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.minimapPosition = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.visible(".CheckPointInfoCenter", !1), this.visible(".CheckPointInfoLeft", !1)
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.minimapPosition = s.store.getState().configuration.configs.ingame.applied.minimapPosition, this.setMinimapPosition(this.minimapPosition);
                var t = this.getFace(".CONTAINER");
                this.addManagedListener(this.externalService, r.CoreEvent.beHudToggleMinimap, function() {
                    var i = 0 === e.minimapPosition ? 1 : 0;
                    e.setMinimapPosition(i), e.minimapPosition = i, 1 === i && (t.x = 0)
                }), this.hudService.once("intro", function() {
                    return e.gotoAndPlay(t, "intro")
                }), this.bindToggleInfo();
                var i = this.getFace("CONTAINER_FOXHUNTING");
                i.purgeTimeline(), i.visible = !1
            }, t.prototype.setMinimapPosition = function(e) {
                this.gotoAndPlay(".id-miniMap", 1 === e ? "normal" : "small")
            }, t.prototype.bindToggleInfo = function() {
                var e = this.externalService.beGetGamePadIsAvailable();
                if (this.gotoAndPlay(".id-inputkeyContainer", e ? "gamepad" : "keyboard"), e) {
                    var t = this.getFace(".Gamepad");
                    this.hasSize(t, !0), t.setCustomStyle({
                        display: "-webkit-flex",
                        "-webkit-justify-content": "center"
                    });
                    var i = this.mapFaces(".Gamepad .id-textField", ".Gamepad .id-keyValue");
                    i.forEach(function(e) {
                        return e.setCustomStyle({
                            display: "inline-block",
                            position: "relative"
                        })
                    });
                    var n = i[0],
                        r = i[1];
                    this.translate(n, "HUD_MINIMAP_TOGGLE_GAMEPAD"), n.setCustomStyle({
                        width: "auto"
                    }), r.hasSize = !0
                } else {
                    var o = s.store.getState().configuration.configs.inputkey.applied.toggleMinimap[0];
                    this.template(".id-keyboard", "HUD_MINIMAP_TOGGLE_KEYBOARD", {
                        value: c.KeyboardMap.getKeyName(o)
                    })
                }
            }, t
        }(a.StageBinder);
    n.__decorate([o.autowired("hudService")], d.prototype, "hudService", void 0), n.__decorate([o.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([o.autowired("inGameConfigService")], d.prototype, "inGameConfigService", void 0), n.__decorate([o.autowired("stateService")], d.prototype, "stateService", void 0), t.HudMiniMapBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(9),
        a = i(37),
        s = i(1),
        c = i(17),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.classNames(".id-perfectStartTip .id-descriptionLabel", "rightsideReviseCoordinateOfScreenRatio"), this.classNames(".id-perfectStartTip .icon\\.png", "rightsideReviseCoordinateOfScreenRatio"), this.hasSize(".id-trafficLightContainer .id-inputKeyGuide", !0), this.hasSize(".id-trafficLightContainer .id-inputKeyGuide .id-guideAnimation", !0), this.hasSize(".id-trafficLightContainer .id-inputKeyGuide .id-textField", !1), this.translate(".id-trafficLightContainer .id-inputKeyGuide .id-textField", "INGAME_PERFECTSTART_TIP"), this.translate(".id-perfectStartTip .id-textField", "INGAME_PERFECTSTART_TIP_ADD")
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".id-trafficLightContainer"),
                    i = _.once(function() {
                        e.stage.gotoAndPlay("in")
                    }),
                    n = _.once(function() {
                        e.stage.stop(), e.stage.purgeTimeline(), e.stage.visible = !1
                    }),
                    s = _.once(function() {
                        t.gotoAndPlay("start")
                    }),
                    c = this.audioService.get(a.FxAudioCode.BeginCountdown);
                this.addManagedListener(this.externalService, o.default.beHUDStartCountdown, function(e) {
                    r.debug("## Start Countdown Sec --\x3e ", e), e < 4 && (c.stop(), c.play()), i(), t.gotoAndPlay(e.toString()), 1 === e && setTimeout(s, 1e3)
                }), this.hudService.once("start", s), this.on(".id-trafficLightContainer", "delete", n)
            }, t
        }(c.StageBinder);
    n.__decorate([s.autowired("hudService")], d.prototype, "hudService", void 0), n.__decorate([s.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([s.autowired("audioService")], d.prototype, "audioService", void 0), n.__decorate([s.autowired("recordService")], d.prototype, "recordService", void 0), t.HudStartCountingBinder = d
}, , function(e, t, i) {
    "use strict";

    function n(e, t) {
        if (e === t) return !0;
        var i = Object.keys(e),
            n = Object.keys(t);
        if (i.length !== n.length) return !1;
        for (var r = Object.prototype.hasOwnProperty, o = 0; o < i.length; o++)
            if (!r.call(t, i[o]) || e[i[o]] !== t[i[o]]) return !1;
        return !0
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.shallowEqual = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.DefaultVehicleState = {
        vehicles: {},
        vehicleIds: (n = {}, n[1] = [], n[2] = [], n[4] = [], n)
    }, t.OldStatusNames = ["TopSpeed", "Acceleration", "NitroCapacity", "Strength", "Durability"], t.StatusNames = ["topSpeed", "acceleration", "nitroCapacity", "strength", "durability"], t.MaxGrade = 10, t.MinOvr = 200, t.MaxOvr = 2e3;
    var n
}, , function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: x + "changeState",
            targetState: e
        }
    }

    function r(e) {
        return e = e || 0, {
            type: x + "resizeSlots",
            slotCount: e
        }
    }

    function o(e) {
        return {
            type: x + "refreshMyNumberPlateInfo",
            info: e
        }
    }

    function a(e) {
        return {
            type: x + "addNumberPlate",
            numberPlate: e
        }
    }

    function s(e) {
        return {
            type: x + "removeNumberPlate",
            plateNumber: e
        }
    }

    function c(e) {
        return e = e || [], {
            type: x + "removeNumberPlates",
            plateNumbers: e
        }
    }

    function d(e) {
        return {
            type: x + "selectNumberPlateForExchange",
            plateNumber: e
        }
    }

    function l(e) {
        return {
            type: x + "unselectNumberPlateForExchange",
            plateNumber: e
        }
    }

    function u(e) {
        return {
            type: x + "previewNumberPlate",
            plateNumber: e
        }
    }

    function p(e) {
        return {
            type: x + "installANumberPlateInSlot",
            plateNumber: e
        }
    }

    function h(e) {
        return {
            type: x + "selectANumberPlateFromSearchResults",
            plateNumber: e
        }
    }

    function f(e) {
        return {
            type: x + "selectANumberPlateFromExchangeResults",
            plateNumber: e
        }
    }

    function v(e) {
        return {
            type: x + "selectANumberPlateFromLotteryResults",
            plateNumber: e
        }
    }

    function m(e) {
        return {
            type: x + "selectANumberPlateFromFirstRandomResults",
            plateNumber: e
        }
    }

    function g(e) {
        return e = e || [], {
            type: x + "refreshMyNumberPlates",
            numberPlates: e
        }
    }

    function y(e) {
        return e = e || [], {
            type: x + "refreshRecycleList",
            numberPlates: e
        }
    }

    function S(e) {
        return e = e || [], {
            type: x + "refreshExchangeResultList",
            numberPlates: e
        }
    }

    function _(e) {
        return e = e || [], {
            type: x + "refreshLotteryResultList",
            numberPlates: e
        }
    }

    function E(e) {
        return e = e || [], {
            type: x + "refreshFirstRandomResultList",
            numberPlates: e
        }
    }

    function T(e) {
        return e = e || [], {
            type: x + "refreshSearchList",
            numberPlates: e
        }
    }

    function C(e) {
        return {
            type: x + "decidePurchaseNumberPlate",
            numberPlate: e
        }
    }

    function b(e) {
        return {
            type: x + "confirmPurchaseNumberPlate",
            numberPlate: e
        }
    }

    function P() {
        return {
            type: x + "clearPurchaseNumberPlate"
        }
    }

    function I(e, t) {
        return {
            type: x + "successPurchaseNumberPlate",
            numberPlate: e,
            pid: t
        }
    }

    function M(e) {
        return {
            type: x + "updateMyNumberPlatePage",
            page: e
        }
    }

    function A(e) {
        return {
            type: x + "updatePlateInSearch",
            plate: e
        }
    }

    function N(e) {
        return {
            type: x + "updateExchangePage",
            page: e
        }
    }

    function R() {
        return {
            type: x + "clearExchangeList"
        }
    }

    function L(e) {
        return {
            type: x + "refreshLotteryCode",
            lotteryCode: e
        }
    }

    function O(e) {
        return {
            type: x + "refreshDefaultNumberPlate",
            data: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var x = "numberPlate.";
    t.changeState = n, t.resizeSlots = r, t.refreshMyNumberPlateInfo = o, t.addNumberPlate = a, t.removeNumberPlate = s, t.removeNumberPlates = c, t.selectNumberPlateForExchange = d, t.unselectNumberPlateForExchange = l, t.previewNumberPlate = u, t.installANumberPlateInSlot = p, t.selectANumberPlateFromSearchResults = h, t.selectANumberPlateFromExchangeResults = f, t.selectANumberPlateFromLotteryResults = v, t.selectANumberPlateFromFirstRandomResults = m, t.refreshMyNumberPlates = g, t.refreshRecycleList = y, t.refreshExchangeResultList = S, t.refreshLotteryResultList = _, t.refreshFirstRandomResultList = E, t.refreshSearchList = T, t.decidePurchaseNumberPlate = C, t.confirmPurchaseNumberPlate = b, t.clearPurchaseNumberPlate = P, t.successPurchaseNumberPlate = I, t.updateMyNumberPlatePage = M, t.updatePlateInSearch = A, t.updateExchangePage = N, t.clearExchangeList = R, t.refreshLotteryCode = L, t.refreshDefaultNumberPlate = O
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(3),
        a = i(109),
        s = i(9),
        c = i(4),
        d = i(28),
        l = i(163),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                switch (this.trackData = this.staticdata.trackData, l.getFeatureType()) {
                    case "license":
                        var e = o.store.getState().license;
                        this.bindLicenseInfo(e);
                        break;
                    default:
                        var t = o.store.getState().match.match;
                        t && this.bindMultiplayInfo(t)
                }
                this.apply(this.stage, d.classNames, "leftsideReviseCoordinateOfScreenRatio")
            }, t.prototype.bindMultiplayInfo = function(e) {
                var t = this.trackData.getTrack(e.trackCode);
                this.translate(".id-trackLabel", t.nameCode), this.translate(".id-gameModeLabel", "GAMEROOM_MODE_" + e.gameMode.toUpperCase()), this.translate(".id-gameModeTipLabel", "GAMEMODEGUIDE_START_PVPRACEGOAL")
            }, t.prototype.bindLicenseInfo = function(e) {
                var t = e.currentTest,
                    i = t.licenseCode,
                    n = t.type,
                    r = t.name,
                    o = t.trackCode,
                    s = this.trackData.getTrack(o);
                this.translate(".id-trackLabel", s.nameCode), this.translate(".id-gameModeLabel", "LICENSE_MAIN_TITLE_" + a.LicenseCode[i + 1].toUpperCase());
                var d = this.$filter("translate")("skill" === n ? r : "LICENSE_TEST_" + n.toUpperCase());
                this.translate(".id-gameModeTipLabel", c.default.stripHtml(d))
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = _.once(function() {
                        setTimeout(function() {
                            e.stage.gotoAndPlay("in"), e.convertFace(".id-gameModeGuide").play()
                        }, 250)
                    });
                if (_.endsWith(this.stateService.getCurrentName(), ".loading")) var i = this.$transitions.onSuccess({}, function() {
                    i(), t()
                });
                else t();
                var n = _.once(function() {
                    e.stage.gotoAndPlay("out")
                });
                this.addManagedListener(this.externalService, s.default.beHUDStartCountdown, function(e) {
                    n()
                }), this.hudService.once("intro", function() {
                    n()
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], u.prototype, "staticdata", void 0), n.__decorate([r.autowired("stateService")], u.prototype, "stateService", void 0), n.__decorate([r.autowired("hudService")], u.prototype, "hudService", void 0), n.__decorate([r.autowired("$transitions")], u.prototype, "$transitions", void 0), t.HudGameModeGuideBinder = u
}, , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.AllCode = "all", t.AllClazz = "All", t.ClazzList = [t.AllClazz, "SS", "S", "A", "B", "C"], t.GradeList = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], t.ExcludeSearchManufacturers = [35], t.ExcludeSearchVehicles = [86, 89, 151], t.RegisterFavorite = "addFavorite", t.UnregisterFavorite = "removeFavorite";
    ! function(e) {
        e[e.VehicleAlreadyExists = 1] = "VehicleAlreadyExists", e[e.VehicleFavoriteDocumentDoesNotExist = 2] = "VehicleFavoriteDocumentDoesNotExist", e[e.VehicleOfferDocumentDoesNotExist = 3] = "VehicleOfferDocumentDoesNotExist", e[e.DeleteDepotError = 4] = "DeleteDepotError", e[e.VehicleCodeError = 5] = "VehicleCodeError", e[e.FindFailedBecauseBasePriceDataDoesNotExist = 6] = "FindFailedBecauseBasePriceDataDoesNotExist", e[e.BasePriceDataDoesNotExist = 7] = "BasePriceDataDoesNotExist", e[e.InvalidPrice = 8] = "InvalidPrice", e[e.VehicleCodeCannotFind = 9] = "VehicleCodeCannotFind", e[e.VehicleCodeDoesNotExist = 10] = "VehicleCodeDoesNotExist", e[e.ExceedOfferCount = 11] = "ExceedOfferCount", e[e.PriceValidationError = 12] = "PriceValidationError", e[e.CanNotCreateVehicleOffer = 13] = "CanNotCreateVehicleOffer", e[e.DidNotCreateVehicleOffer = 14] = "DidNotCreateVehicleOffer", e[e.VehicleOfferUpdateError = 15] = "VehicleOfferUpdateError", e[e.DepotDidNotCreateError = 16] = "DepotDidNotCreateError", e[e.DepotDidNotPurchaseError = 17] = "DepotDidNotPurchaseError", e[e.VehicleOfferDoesNotExist = 18] = "VehicleOfferDoesNotExist", e[e.DidNotPurchaseDepot = 19] = "DidNotPurchaseDepot", e[e.DidNotCommitDepot = 20] = "DidNotCommitDepot", e[e.UpdateFailedBecauseVehicleOfferDoesNotExist = 21] = "UpdateFailedBecauseVehicleOfferDoesNotExist", e[e.CommitDepotRpcFailedBecauseDidNotCommit = 22] = "CommitDepotRpcFailedBecauseDidNotCommit", e[e.VehicleOffersDoNotExist = 23] = "VehicleOffersDoNotExist", e[e.UpdateFailedBecauseDepotWasNotCommitted = 24] = "UpdateFailedBecauseDepotWasNotCommitted", e[e.MultiCommitFailedDepotDidNotCommitted = 25] = "MultiCommitFailedDepotDidNotCommitted", e[e.VehicleOfferStatusUpdateFailed = 26] = "VehicleOfferStatusUpdateFailed", e[e.CanNotSetVehiclePricesBecauseSomePricesAlreadyExist = 27] = "CanNotSetVehiclePricesBecauseSomePricesAlreadyExist", e[e.VehicleNotBelongedToThePlayer = 28] = "VehicleNotBelongedToThePlayer", e[e.CacheSummaryDoesNotExist = 29] = "CacheSummaryDoesNotExist", e[e.RecreateInvalidOfferPrice = 101] = "RecreateInvalidOfferPrice", e[e.RecreateOfferVehicleBecauseCodeDoesNotExist = 102] = "RecreateOfferVehicleBecauseCodeDoesNotExist", e[e.VehicleBasePriceDoesNotExist = 103] = "VehicleBasePriceDoesNotExist", e[e.RecreateOfferPriceDueToValidationError = 104] = "RecreateOfferPriceDueToValidationError", e[e.VehicleStatusInvalid = 105] = "VehicleStatusInvalid", e[e.ChangeOfferPriceDoesNotExist = 106] = "ChangeOfferPriceDoesNotExist", e[e.VehicleAlreadySold = 107] = "VehicleAlreadySold", e[e.VehicleChangeDateUpdateError = 108] = "VehicleChangeDateUpdateError", e[e.SummaryUpdateErrorCannotFindSummaryWhenOfferPurchased = 109] = "SummaryUpdateErrorCannotFindSummaryWhenOfferPurchased", e[e.SummaryUpdateErrorCannotFindSummaryWhenOfferCancelled = 110] = "SummaryUpdateErrorCannotFindSummaryWhenOfferCancelled", e[e.SummaryUpdateErrorCannotFindSummaryWhenOfferRecreated = 111] = "SummaryUpdateErrorCannotFindSummaryWhenOfferRecreated", e[e.SummaryUpdateErrorCannotFindSummaryWhenOfferCreated = 112] = "SummaryUpdateErrorCannotFindSummaryWhenOfferCreated", e[e.SummaryUpdateErrorCannotFindOldSummaryWhenOfferRecreated = 113] = "SummaryUpdateErrorCannotFindOldSummaryWhenOfferRecreated", e[e.VehicleCodeCannotFindDeprecated = 201] = "VehicleCodeCannotFindDeprecated", e[e.VehicleBasePriceDoesNotExistDeprecated = 202] = "VehicleBasePriceDoesNotExistDeprecated", e[e.VehicleGradePriceDoesNotExist = 301] = "VehicleGradePriceDoesNotExist", e[e.InsertBasePriceVehiclePriceExist = 302] = "InsertBasePriceVehiclePriceExist", e[e.VehicleOfferCancelFailed = 303] = "VehicleOfferCancelFailed"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(7),
        a = i(35),
        s = i(4),
        c = i(10),
        d = i(3),
        l = i(92),
        u = i(12);
    ! function(e) {
        e[e.CAMERA_START = 0] = "CAMERA_START", e[e.CAMERA_COLOR = 1] = "CAMERA_COLOR", e[e.CAMERA_WHEEL = 2] = "CAMERA_WHEEL", e[e.CAMERA_WRAP = 3] = "CAMERA_WRAP", e[e.CAMERA_CHANGEVEHICLE = 4] = "CAMERA_CHANGEVEHICLE", e[e.CAMERA_ORBIT = 5] = "CAMERA_ORBIT", e[e.CAMERA_EXIT = 6] = "CAMERA_EXIT"
    }(n = t.TuningShopCameraMode || (t.TuningShopCameraMode = {}));
    var p;
    ! function(e) {
        e[e.VEHICLECOLOR = 0] = "VEHICLECOLOR", e[e.WHEELCOLOR = 1] = "WHEELCOLOR", e[e.WRAP = 2] = "WRAP", e[e.WRAP_EX = 3] = "WRAP_EX"
    }(p = t.TuningItemTab || (t.TuningItemTab = {})), t.TuningCategoryInfo = [{
        tabIdx: p.VEHICLECOLOR,
        codeGroup: 0,
        subtype: "VEHICLECOLOR",
        localKey: "TUNING_SHOP_INVENTORY_CATEGORY_NAME1"
    }, {
        tabIdx: p.WHEELCOLOR,
        codeGroup: 2,
        subtype: "WHEELCOLOR",
        localKey: "TUNING_SHOP_INVENTORY_CATEGORY_NAME2"
    }, {
        tabIdx: p.WRAP,
        codeGroup: 3,
        subtype: "WRAP",
        localKey: "TUNING_SHOP_INVENTORY_CATEGORY_NAME3"
    }, {
        tabIdx: p.WRAP_EX,
        codeGroup: 4,
        subtype: "WRAP",
        localKey: "TUNING_SHOP_INVENTORY_CATEGORY_NAME4"
    }];
    var h = function(e) {
        function i(t, i, n, r) {
            var o = e.call(this) || this;
            return o.pushService = t, o.staticdataLoaderService = i, o.externalService = n, o.popupService = r, o.pushService.subscribeResource(/\/asset\/tuning\/inventory\/item\/change\/id\/(.*)/, function(e, t) {
                if (t && t.body) {
                    d.store.dispatch(l.updateItem(t.body));
                    var i = d.store.getState().tuningShop.purchased;
                    i && t.body.code === i && o.useTuningInventoryItem(t.body.id)
                }
            }), o.createExclusiveMap(), o
        }
        return r.__extends(i, e), i.prototype.createExclusiveMap = function() {
            var e = this;
            this.exclusiveMap = {}, _.forEach(this.staticdataLoaderService.tuningData.tuningVehicleData, function(t) {
                _.forEach(t.exclusiveWrapFilter.codes, function(i) {
                    e.getTuningItemByCode(i).isExclusive && (e.exclusiveMap[i] = t.vehicleCode)
                })
            })
        }, i.prototype.getExclusiveVehicleCode = function(e) {
            return this.exclusiveMap[e]
        }, i.prototype.fetchInventory = function() {
            var e = d.store.getState().player.id;
            return c.request("GET", "tuning/inventories/" + e).then(function(e) {
                o.debug(">> GET tuning inventories - ", e), d.store.dispatch(l.fetchInventory(e))
            }).catch(function(e) {
                o.error("--tuning.service> inventory fenching error.")
            })
        }, i.prototype.updateCheckedat = function() {
            var e = d.store.getState().player.id,
                t = new Date;
            return d.store.dispatch(l.updateCheckedat(t)), o.info("--tuning.service> inventory checkedat updated:", t), c.request("PUT", "tuning/inventories/" + e + "/checkedat").then(function(e) {
                o.debug(">> PUT update tuning inventory checkedat")
            }).catch(function(e) {
                o.error("--tuning.service> inventory checkedat updating error.")
            })
        }, i.prototype.useTuningInventoryItem = function(e) {
            var t = this,
                i = d.store.getState().player,
                n = i.id,
                r = i.recent,
                a = d.store.getState().tuningShop.items,
                s = _.find(a, {
                    id: e
                }),
                u = this.getTuningItemByCode(s.code).subtype;
            return c.request("PUT", "tuning/inventories/" + n + "/items/" + e + "/@use", {
                vid: r.vid
            }).then(function(e) {
                setTimeout(function() {
                    o.debug(">> PUT use tuning inventory item - ", e), d.store.dispatch(l.afterPurchase(e.inventory, u))
                }, 100)
            }).catch(function(e) {
                throw t.popupService.drawConfirm("ALARM_SERVERLOST_TITLE", "USEITEM_ERROR_MASSAGE_UNKNOWNISSUE", function() {
                    return d.store.dispatch(l.failOnUseItem(u))
                }), e
            })
        }, i.prototype.removeTuningInventoryItem = function(e) {
            var t = d.store.getState().player.id;
            return c.request("DELETE", "tuning/inventories/" + t + "/items/" + e).then(function(e) {
                o.debug(">> PUT use tuning inventory item - ", e), d.store.dispatch(l.updateItem(e))
            }).catch(function(e) {
                o.error("--tuning.service> inventory item using error.", e)
            })
        }, i.prototype.uninstallTuningItem = function(e) {
            var t = d.store.getState().player,
                i = t.id,
                n = t.recent;
            return c.request("PUT", "tuning/inventories/" + i + "/item/" + e + "/remove", {
                vid: n.vid
            }).then(function(e) {
                o.debug(">> PUT uninstall tuning item - ", e)
            }).catch(function(e) {
                o.error("--tuning.service> uninstall tuning item error.", e)
            })
        }, i.prototype.convertPaintKeyToType = function(e) {
            switch (e) {
                case "colorCode":
                    return "VEHICLECOLOR";
                case "wheelCode":
                    return "WHEELCOLOR";
                case "wrapCode":
                    return "WRAP"
            }
        }, i.prototype.getInventoryCountByCode = function(e) {
            var t = d.store.getState().tuningShop.items,
                i = _.filter(t, function(t) {
                    return t.code === e
                });
            return i.length ? i[0].count : 0
        }, i.prototype.getInventoryItemIdByCode = function(e) {
            var t = d.store.getState().tuningShop.items,
                i = _.find(t, {
                    code: e
                });
            return i && i.id
        }, i.prototype.getProductByProductCode = function(e) {
            var t = d.store.getState().tuningShop.products;
            return _.find(t, {
                code: e
            })
        }, i.prototype.getItemCodeByProductCode = function(e) {
            var t = this.getProductByProductCode(e),
                i = t && this.getTuningItemByCode(t.rewards[0].code);
            return i ? i.code : 0
        }, i.prototype.getProductList = function(e) {
            var t = this,
                i = d.store.getState().tuningShop.products;
            return _.filter(i, function(i) {
                if (1 === i.rewards.length) {
                    var n = i.rewards[0].code,
                        r = t.getTuningItemByCode(n);
                    return r && Math.floor(r.code / 1e4) === e
                }
            })
        }, i.prototype.getCurrentTuningItemProps = function() {
            var e = this,
                t = [],
                i = u.getRecentVehicle();
            return _(["colorCode", "wheelCode", "wrapCode"]).forEach(function(n) {
                var r = i.paint[n],
                    o = e.getTuningItemByCode(r),
                    a = o ? {
                        code: o.code,
                        type: o.subtype,
                        count: e.getInventoryCountByCode(o.code)
                    } : {
                        code: 0,
                        type: e.convertPaintKeyToType(n),
                        count: 0
                    };
                t.push(a)
            }), t
        }, i.prototype.isEquipOrSelectedWrap = function() {
            if (u.getRecentVehicle().paint.wrapCode > 0) return !0;
            var e = d.store.getState().tuningShop;
            return !_.isUndefined(e.selectedProducts.WRAP.productCode)
        }, i.prototype.getPreviewTuningItemProps = function(e) {
            var t = this,
                i = e;
            return _.map(i, function(e, i) {
                var n = e.productCode,
                    r = e.action,
                    o = t.getProductByProductCode(n),
                    a = o && t.getTuningItemByCode(o.rewards[0].code);
                return a && o ? {
                    pcode: o.code,
                    code: a.code,
                    type: a.subtype,
                    count: t.getInventoryCountByCode(a.code),
                    price: o.bunches[0].price,
                    currency: o.bunches[0].currency,
                    action: r
                } : {
                    type: i,
                    action: r
                }
            })
        }, i.prototype.getTuningItemByCode = function(e) {
            return this.staticdataLoaderService.tuningData.tuningItemData[e]
        }, i.prototype.getTuningVehicle = function(e) {
            return this.staticdataLoaderService.tuningData.tuningVehicleData[e]
        }, i.prototype.createCorePaintData = function(e) {
            var t = this.getTuningItemByCode(e.colorCode);
            this.getTuningItemByCode(e.wrapCode), this.getTuningItemByCode(e.wrapCode);
            return t || (t = this.getTuningItemByCode(1)), {
                colorData: {
                    rgb: t.rgb
                },
                wheelId: this.getCidByTuningItemCode(e.wheelCode),
                wrapId: this.getCidByTuningItemCode(e.wrapCode)
            }
        }, i.prototype.getCidByTuningItemCode = function(e) {
            var t = this.getTuningItemByCode(e);
            return t ? t.cid : 0
        }, i.prototype.fetchProducts = function() {
            return c.request("GET", "shop/products?sellingShop=TUNING_SHOP").then(function(e) {
                o.debug(">> GET fetchProducts - ", e), d.store.dispatch(l.fetchProducts(e))
            })
        }, i.prototype.isEmptySelectedItems = function() {
            var e = d.store.getState().tuningShop.selectedProducts,
                t = function(e) {
                    return _.isEmpty(e) || _.isUndefined(e.productCode)
                };
            return t(e.VEHICLECOLOR) && t(e.WHEELCOLOR) && t(e.WRAP)
        }, i.prototype.getCategory = function(e) {
            return t.TuningCategoryInfo[e]
        }, i.prototype.getSubtypeByTabIndex = function(e) {
            return this.getCategory(e).subtype
        }, i.prototype.getLocalKeyByCode = function(e) {
            var i = Math.floor(e / 1e4);
            return _.filter(t.TuningCategoryInfo, function(e) {
                return e.codeGroup === i
            })[0].localKey
        }, i.prototype.adjustCategoryCamera = function(e) {
            var t;
            switch (e) {
                case p.VEHICLECOLOR:
                    t = n.CAMERA_COLOR;
                    break;
                case p.WHEELCOLOR:
                    t = n.CAMERA_WHEEL;
                    break;
                case p.WRAP:
                case p.WRAP_EX:
                    t = n.CAMERA_WRAP
            }
            t && this.externalService.beTuningShopSetCameraMode(t)
        }, i.prototype.createTuningPreviewPaint = function(e) {
            var t = u.getRecentVehicle();
            return {
                colorCode: this.getItemCodeByProductCode(e.VEHICLECOLOR.productCode) || t.paint.colorCode,
                wheelCode: this.getItemCodeByProductCode(e.WHEELCOLOR.productCode) || t.paint.wheelCode,
                wrapCode: this.getItemCodeByProductCode(e.WRAP.productCode) || t.paint.wrapCode
            }
        }, i.prototype.beSetTuningPreviewItem = function(e, t, i) {
            e && this.beSetTuningItems(this.createTuningPreviewPaint(e), t, i)
        }, i.prototype.beSetTuningItems = function(e, t, i) {
            void 0 === i && (i = !1), _.isUndefined(this.previewPaint) && (this.previewPaint = {
                colorCode: 0,
                wheelCode: 0,
                wrapCode: 0
            });
            var n = u.getRecentVehicle();
            (i || this.currentVehicleId !== n.id) && (this.resetPreviewPaint(n.paint), this.currentVehicleId = n.id), this.setTuningDiffsToCore(this.previewPaint, e, t), this.resetPreviewPaint(e)
        }, i.prototype.resetPreviewPaint = function(e) {
            this.previewPaint = r.__assign({}, e)
        }, i.prototype.getPreviewPaint = function() {
            return this.previewPaint
        }, i.prototype.setTuningDiffsToCore = function(e, t, i) {
            if (void 0 === i && (i = !1), e.colorCode !== t.colorCode) {
                var n = this.getTuningItemByCode(t.colorCode);
                n && this.externalService.beSetVehicleColor(n.rgb)
            }
            if (e.wheelCode !== t.wheelCode) {
                var r = this.getCidByTuningItemCode(t.wheelCode);
                this.externalService.beSetVehicleWheel(r)
            }
            if (e.wrapCode !== t.wrapCode) {
                var o = this.getCidByTuningItemCode(t.wrapCode);
                this.externalService.beSetVehicleWrapping(i ? 0 : o)
            }
        }, i.prototype.resetTuningItems = function() {
            var e = u.getRecentVehicle().paint;
            this.previewPaint && this.setTuningDiffsToCore(this.previewPaint, e), this.currentVehicleId = void 0, this.previewPaint = void 0
        }, i
    }(a.EventEmitter);
    h.$inject = ["pushService", "staticdataLoaderService", "externalService", "popupService"], t.TuningShopService = h, t.default = h, angular.module("edge.components").factory("tuningShopService", s.default.generateService(h))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "tuning-shop.fetchInventory",
            id: e.id,
            checkedat: e.checkedat,
            items: e.items
        }
    }

    function r(e) {
        return {
            type: "tuning-shop.fetchProducts",
            products: e
        }
    }

    function o(e) {
        return {
            type: "tuning-shop.selectItemTab",
            selectedTab: e
        }
    }

    function a(e) {
        return {
            type: "tuning-shop.changeFilter",
            filterState: e
        }
    }

    function s() {
        return {
            type: "tuning-shop.resetFilter"
        }
    }

    function c(e) {
        return {
            type: "tuning-shop.updateCheckedat",
            checkedat: e
        }
    }

    function d(e) {
        return {
            type: "tuning-shop.updateItem",
            item: e
        }
    }

    function l(e, t) {
        return {
            type: "tuning-shop.selectProduct",
            itemType: e,
            productCode: t
        }
    }

    function u(e, t) {
        return {
            type: "tuning-shop.deselectProduct",
            itemType: e,
            action: t
        }
    }

    function p(e) {
        return {
            type: "tuning-shop.purchaseProduct",
            purchased: e
        }
    }

    function h() {
        return {
            type: "tuning-shop.resetPurchased"
        }
    }

    function f() {
        return {
            type: "tuning-shop.resetSelected"
        }
    }

    function v(e) {
        return void 0 === e && (e = !1), {
            type: "tuning-shop.updateExterior",
            isRefresh: e
        }
    }

    function m(e) {
        return {
            type: "tuning-shop.hideWrapping",
            hide: e
        }
    }

    function g(e, t) {
        return {
            type: "tuning-shop.afterPurchase",
            inventory: e,
            deselectItemType: t
        }
    }

    function y(e) {
        return {
            type: "tuning-shop.failOnUseItem",
            deselectItemType: e
        }
    }

    function S(e) {
        return {
            type: "tuning-shop.setPriorityCodes",
            codes: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.fetchInventory = n, t.fetchProducts = r, t.selectItemTab = o, t.changeFilter = a, t.resetFilter = s, t.updateCheckedat = c, t.updateItem = d, t.selectProduct = l, t.deselectProduct = u, t.purchaseProduct = p, t.resetPurchased = h, t.resetSelected = f, t.updateExterior = v, t.hideWrapping = m, t.afterPurchase = g, t.failOnUseItem = y, t.setPriorityCodes = S
}, function(e, t, i) {
    "use strict";

    function n(e) {
        C.store.dispatch({
            type: "auction.updateBannersUrl",
            bannersUrl: e
        })
    }

    function r(e) {
        C.store.dispatch({
            type: "auction.updateBiddings",
            biddings: e
        })
    }

    function o(e, t) {
        C.store.dispatch({
            type: "auction.addBiddings",
            biddings: e,
            maxCount: t
        })
    }

    function a(e) {
        C.store.dispatch({
            type: "auction.updateAllAuctionItems",
            allAuctionItems: e
        })
    }

    function s(e) {
        C.store.dispatch({
            type: "auction.updateAuctionItems",
            auctionItems: e
        })
    }

    function c(e, t) {
        C.store.dispatch({
            type: "auction.changeAuctionFavorite",
            id: e,
            isFavorite: t
        })
    }

    function d(e) {
        C.store.dispatch({
            type: "auction.updateAuctionCategory",
            category: e
        })
    }

    function l(e) {
        C.store.dispatch({
            type: "auction.updateAuctionSearchOption",
            searchOption: e
        })
    }

    function u(e) {
        C.store.dispatch({
            type: "auction.updateAuctionFavoriteFilter",
            isFavoriteValidate: e
        })
    }

    function p(e) {
        C.store.dispatch({
            type: "auction.updateAuctionHouseStatusFilter",
            auctionHouseStatusFilter: e
        })
    }

    function h(e) {
        C.store.dispatch({
            type: "auction.updateAuctionSort",
            auctionHouseSortMode: e
        })
    }

    function f(e) {
        C.store.dispatch({
            type: "auction.updateMyStatusFilter",
            myStatusFilter: e
        })
    }

    function v(e) {
        C.store.dispatch({
            type: "auction.updateMyStatusSort",
            myStatusSortMode: e
        })
    }

    function m(e) {
        C.store.dispatch({
            type: "auction.UpdateNotificationListDisplayStatus",
            isShown: e
        })
    }

    function g(e) {
        C.store.dispatch({
            type: "auction.updateIsOpenDetailPopUp",
            isOpenDetailPopUp: e
        })
    }

    function y(e, t) {
        C.store.dispatch({
            type: "auction.updateHistoryBiddings",
            auctionItemID: e,
            historyBiddings: t
        })
    }

    function S(e) {
        C.store.dispatch({
            type: "auction.updateMyBiddings",
            myBiddings: e
        })
    }

    function _(e) {
        C.store.dispatch({
            type: "auction.updateIsPlayBiddingHistoryAnim",
            isPlayBiddingHistoryAnim: e
        })
    }

    function E(e) {
        C.store.dispatch({
            type: "auction.updatePopUpMsg",
            popUpMsg: e
        })
    }

    function T(e) {
        C.store.dispatch({
            type: "auction.updateIsScrollToTop",
            isScrollToTop: e
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var C = i(3);
    t.updateBannersUrl = n, t.updateBiddings = r, t.addBiddings = o, t.updateAllAuctionItems = a, t.updateAuctionItems = s, t.changeAuctionFavorite = c, t.updateAuctionCategory = d, t.updateAuctionSearchOption = l, t.updateAuctionFavoriteFilter = u, t.updateAuctionHouseStatusFilter = p, t.updateAuctionSort = h, t.updateMyStatusFilter = f, t.updateMyStatusSort = v, t.UpdateNotificationListDisplayStatus = m, t.updateIsOpenDetailPopUp = g, t.updateHistoryBiddings = y, t.updateMyBiddings = S, t.updateIsPlayBiddingHistoryAnim = _, t.updatePopUpMsg = E, t.updateIsScrollToTop = T
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        if (e) {
            var i = "cn" === o.getInjector().get("sessionService").config.locale ? "cn" : "kr";
            e.hasSize = !0, e.visible = t, t && r.gotoAndStop(e, i)
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(562),
        o = i(34);
    t.igr = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(1),
        a = i(17),
        s = i(2),
        c = i(29),
        d = i(163),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "isSinglePlay", {
                get: function() {
                    return !1
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onPressESC = function() {
                return !!this.popupService.isShowPopup() || (this.opened ? this.closeMenu() : this.openMenu(), !1)
            }, t.prototype.onFaceReady = function() {
                this._escEventLister = {
                    onEvent: this.onPressESC.bind(this)
                }, "ranked" !== d.getFeatureType() && this.globalKeyService.pushListener(c.KeyboardMap.getKeyCode("ESCAPE"), this._escEventLister), this.translate(".id-title", "INGAME_ESCMENU_MENUTITLE"), this.face.hasSize = !0;
                var e = this.getFace(".id-tip");
                e.x = 0, e.layoutPosition = "relative";
                var t = e.$(".id-tipIcon");
                t.layoutPosition = "relative", t.layoutFloat = "left", t.hasSize = !0;
                var i = e.$(".id-textField");
                i.layoutPosition = "relative", i.layoutFloat = "left", i.hasSize = !1, this.opened = !1, this.classNames(this.stage, {
                    "prevent-click": !0
                }), this.visible(".id-tip", "license" !== d.getFeatureType()), this.bindTipAndButtons()
            }, t.prototype.bindTipAndButtons = function() {
                var e = this;
                this.bindButton(".id-buttons .id-leaveButton", "INGAME_ESCMENU_RETIRERACE", function() {
                    return e.leaveRace()
                }), this.bindButton(".id-buttons .id-restartButton", "INGAME_ESCMENU_RESTARTRACE", function() {
                    return e.restartRace()
                }), this.bindButton(".id-buttons .id-returnButton", "INGAME_ESCMENU_BACKTORACE", function() {
                    return e.returnToRace()
                }), this.translate(".id-tip", "INGAME_ESCMENU_TIP")
            }, t.prototype.bindButton = function(e, t, i) {
                this.on(e, s.MouseEventEx.CLICK, i), this.translate(e, t)
            }, t.prototype.onDetach = function() {
                r.trace("esc menu detached!"), this.globalKeyService.popListener(c.KeyboardMap.getKeyCode("ESCAPE"), this._escEventLister), this.opened && this.closeMenu()
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.hudService.on("intro", function() {
                    e.enabled = !0
                }), this.hudService.on("outro", function() {
                    e.opened && e.closeMenu(), e.enabled = !1
                })
            }, t.prototype.openMenu = function() {
                this.enabled && (this.inputService.overrideAll("hud-esc"), this.externalService.beDisableIME(!0), this.classNames(this.stage, {
                    "prevent-click": !1
                }), this.opened = !0, this.stage.gotoAndPlay("in"), this.gotoAndPlay(".id-logo", "in"), this.gotoAndPlay(".id-buttonsBackground", "in"), this.gotoAndPlay(".id-buttons", this.isSinglePlay ? "singlePlayIn" : "multiPlayIn"))
            }, t.prototype.closeMenu = function() {
                this.popupService.closePopup(), this.inputService.clearOverrideAll("hud-esc"), this.externalService.beDisableIME(!1), this.classNames(this.stage, {
                    "prevent-click": !0
                }), this.opened = !1, this.gotoAndPlay(".id-buttons", this.isSinglePlay ? "singlePlayOut" : "multiPlayOut"), this.gotoAndPlay(".id-buttonsBackground", "out"), this.gotoAndPlay(".id-logo", "out"), this.stage.gotoAndPlay("out")
            }, t.prototype.leaveRace = function() {
                var e = this;
                this.drawPopup("INGAME_ESCMENU_RETIRETITLE", "INGAME_ESCMENU_RETIRECONFIRM", function() {
                    if (e.enabled) {
                        "license" === d.getFeatureType() ? e.licenseService.giveup() : e.hudService.getMatchService().abandonMatch()
                    }
                })
            }, t.prototype.restartRace = function() {}, t.prototype.drawPopup = function(e, t, i) {
                var n = this;
                this.popupService.draw("ConfirmCancelPopup", {
                    title: e,
                    description: t,
                    confirm: function() {
                        n.closeMenu(), i()
                    }
                })
            }, t.prototype.returnToRace = function() {
                this.closeMenu()
            }, t
        }(a.StageBinder);
    n.__decorate([o.autowired("hudService")], l.prototype, "hudService", void 0), n.__decorate([o.autowired("inputService")], l.prototype, "inputService", void 0), n.__decorate([o.autowired("licenseService")], l.prototype, "licenseService", void 0), n.__decorate([o.autowired("popupService")], l.prototype, "popupService", void 0), n.__decorate([o.autowired("globalKeyService")], l.prototype, "globalKeyService", void 0), n.__decorate([o.autowired("externalService")], l.prototype, "externalService", void 0), t.HudEscMenuBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(38),
        a = i(304),
        s = i(8),
        c = i(40),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.chatMC = null, t.chatContainerMC = null, t.tabName = null, t.chatInputContainer = null, t.chatListArea = null, t.showChat = !0, t.chatSelector = ".id-gamePlayChat", t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.chatMC = this.getFace(this.chatSelector), this.chatContainerMC = this.getFace(".id-chatContainer"), this.tabName = this.getFace(".id-tabName"), this.chatInputContainer = this.getFace(".id-chatInputContainer"), this.chatInputBinder = this.addChildBinder(this.chatInputContainer, a.ChatInputBinder), this.chatInputBinder.onFocusInAnimCallBack = this.playFocusInAnim.bind(this), this.chatInputBinder.onFocusOutAnimCallBack = this.playFocusOutAnim.bind(this), this.chatInputBinder.IsActive = !0, this.chatInputBinder.setHideSourceName(!0), this.chatInputBinder.setSourceHasPlaceholder([o.ChatSourceType.Whisper]), this.chatListArea = this.getFace(".id-chatListArea"), this.translate(".id-offDescription", "CHATTING_BE_CHATCLOSE"), this.translate(".id-onDescription", "CHATTING_BE_CHATOPEN"), this.classNames(this.face, "leftsideReviseCoordinateOfScreenRatio")
            }, t.prototype.onDetach = function() {
                this.dispatch(c.enableHiding(!1)), this.dispatch(c.closeSimpleChatWindow()), this.worldChatRenderer.uninstall(), this.chatInputBinder.IsActive = !1
            }, t.prototype.onIntro = function() {
                this.showChat && this.chatMC.gotoAndPlay("on");
                var e = this.getFace(".id-chatListArea > svg");
                this.worldChatRenderer.install(this.chatListArea.htmlElement, e.width + "px", e.height + "px", !1)
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.dispatch(c.openSimpleChatWindow()), this.dispatch(c.enableHiding(!0)), this.hudService.once("intro", function() {
                    return e.onIntro()
                }), this.chatInputBinder.IsActive = !0
            }, t.prototype.update = function(e) {
                var t = this,
                    i = this.reduxProps;
                if (i !== e) {
                    this.showChat = e.isVisible, e.isVisible ? (this.chatMC.gotoAndPlay("on"), this.chatMC.once(s.EventEx.STOP, function(e) {
                        "on" === e.currentTarget.currentLabel && t.dispatch(c.updateChatList())
                    })) : this.chatMC.gotoAndPlay("off");
                    for (var n = e.tabs, r = 0, o = Object.keys(n); r < o.length; r++) {
                        var a = o[r];
                        if (n[a].isActivated) {
                            var d = this.staticdata.worldChatData,
                                l = d.tabs[a].nameID;
                            this.translate(this.tabName, l);
                            break
                        }
                    }
                    i.tabs && i.tabs !== e.tabs && _.forEach(e.tabs, function(e, i) {
                        e.isActivated && t.worldChatService.onTabActived(e)
                    })
                }
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.worldChat,
                    i = t.displayType,
                    n = t.tabStates,
                    r = e.configuration.configs.ingame;
                return {
                    displayType: i,
                    tabs: n,
                    isVisible: _.get(r, "staging.chatOn", !0)
                }
            }, t.prototype.playFocusInAnim = function() {
                this.chatContainerMC.gotoAndPlay("active")
            }, t.prototype.playFocusOutAnim = function() {
                this.chatContainerMC.gotoAndPlay("inactive")
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("hudService")], d.prototype, "hudService", void 0), n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], d.prototype, "staticdata", void 0), n.__decorate([r.autowired("worldChatRenderer")], d.prototype, "worldChatRenderer", void 0), n.__decorate([r.autowired("worldChatService")], d.prototype, "worldChatService", void 0), t.GamePlayChatBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this.getFace(".id-effectContainer");
                e.alpha = 0;
                var t = !1,
                    i = function(e, t) {
                        return e <= t
                    };
                this.addManagedListener(this.externalService, a.default.beHUDSetHpGauge, function(n) {
                    if (0 >= n && (t = !0), t) {
                        var r = function(e) {
                                return i(e, .3) && .2 || i(e, .5) && .5 || i(e, .7) && .7 || i(e, 1) && 1
                            }(n),
                            o = .5;
                        .9 < n && (o -= .4 - .4 * (10 - 10 * n)), e.addCustomFromToTween(r, {
                            alpha: o
                        }, {
                            alpha: .5,
                            repeat: 1e3 / r
                        }), 1 <= n && (t = !1, e.killCustomTweens(), e.alpha = 0)
                    }
                })
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("externalService")], s.prototype, "externalService", void 0), t.HudCriticalEffectBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(1),
        a = i(17),
        s = i(3),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".CONTAINER .CENTERMIDDLE");
                this.itemPool = [t.$(".id-messageBar0"), t.$(".id-messageBar1"), t.$(".id-messageBar2"), t.$(".id-messageBar3")], this.currentItems = [], this.itemPool.forEach(function(e) {
                    e.visible = !1, e.y = 124, e.alpha = 0
                }), this.addManagedListener(this.externalService, r.default.beHUDShowMessage, function(t, i) {
                    e.pushMessage(t, i)
                });
                var i = s.store.getState().match;
                _.isEmpty(i) || _.isEmpty(i.match) || this.gotoAndPlay(t, "PURSUITINDIVIDUAL" === i.match.gameMode ? "pursuit" : "normal")
            }, t.prototype.pushMessage = function(e, t) {
                var i = this,
                    n = this.$filter("translate")(e),
                    r = this.itemPool.shift();
                this.gotoAndPlay(r, "INIT"), this.bindText(r.$(".id-MESSAGELABEL_CONTAINER .id-messageLabel"), n), this.currentItems.unshift(r), this.currentItems.slice(2).forEach(function(e) {
                    e.killCustomTweens(), e.visible = !1, e.y = 124, i.itemPool.push(e)
                }), this.currentItems = this.currentItems.slice(0, 2), this.currentItems.forEach(function(e, n) {
                    e.killCustomTweens(), e.visible = !0, 0 === n ? (e.alpha = 1, e.y = 62) : e.addCustomToTween(.2, {
                        flash: {
                            y: 0,
                            alpha: .5
                        }
                    });
                    var r = t || 2;
                    e.addCustomToTween(.4, {
                        flash: {
                            alpha: 0
                        },
                        delay: 0 === n ? r : r - .5,
                        onComplete: function() {
                            e.visible = !1, e.y = 124, e.alpha = 0, i.currentItems.splice(i.currentItems.indexOf(e), 1), i.itemPool.push(e)
                        }
                    })
                })
            }, t
        }(a.StageBinder);
    n.__decorate([o.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([o.autowired("externalService")], c.prototype, "externalService", void 0), t.HudMessageBarBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(3),
        s = i(4),
        c = i(310),
        d = i(39),
        l = i(37),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.finishHandler = _.once(function(e, i, n) {
                    var r = t.hudService.isObserver,
                        o = t.hudService.getMatchService().isMatchAbandoned;
                    o && t.translate(".RETIRE_TITLE", "BEPLAY_MAIN_GIVEUP"), t.visible(t.face, !0);
                    var c = t.recordService.getRecord("takedown") || [],
                        d = c.length,
                        l = t.getFinishLabel(e, d, n, o);
                    if ("FOXHUNTING_LOSE" === l) {
                        var u = t.getFace(".LapCountLose");
                        t.classNames(u.parent, "center-aligned")
                    }
                    if (t.gotoAndPlay(t.container, l), t.once(t.container, "stop", function() {
                            t.isDriftMode && !e ? t.driftAnimation(i, n) : t.nextState()
                        }), !o && !e)
                        if (t.isFoxhuntingMode) t.bindFoxhuntingInfo(i);
                        else {
                            if (r) return t.visible(".FINISH .RANK_LAPTIME", !1);
                            if (t.isDriftMode) {
                                var p = a.store.getState().driftmodeResult;
                                t.bindText(".id-currentDpValue", s.default.formatDriftPoint(p.finalPoint)), t.bindText(".id-dpValue", s.default.formatDriftPoint(i.driftpoint - p.finalPoint))
                            } else t.bindText(".RANK_LAPTIME .id-LAPTIME", s.default.formatLapTime(i && i.time));
                            t.bindTextAll(".id-rankLabel", n), t.bindTextAll(".id-suffixLabel", t.$filter("ordinalSuffix")(n))
                        }
                }.bind(t)), t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.container = this.convertFace("FINISH"), this.visible(this.face, !1), this.translate(".FINISH_TEXT", "BEPLAY_MAIN_FINISH"), this.translate(".RETIRE_TITLE", "BEPLAY_MAIN_RETIRE"), this.translate(".SUCCESS-TITLE", "WORLDRACE_RACEFINISH_PURSUITSUCCESS"), this.translate(".FAILURE-TITLE", "WORLDRACE_RACEFINISH_PURSUITFAIL"), this.translate(".RankingRetainText .id-textField", "DRIFTMODE_RESULT_EXTRADP_KEEPRANK"), this.translate(".RankingDownText .id-textField", "DRIFTMODE_RESULT_EXTRADP_RANKDOWN"), this.translate(".RankingUpText .id-textField", "DRIFTMODE_RESULT_EXTRADP_RANKUP"), this.translate(".id-dpUnit", "BEPLAY_DRIFTMODE_DP"), this.translate(".id-currentDpText", "DRIFTMODE_RESULT_EXTRADP_DESC"), this.hasSize(".id-dpUnit", !1), this.hasSize(".id-arrowEffect", !0), this.hasSize(".id-dpValue", !1), this.hasSize(".id-rankLabel", !1), this.hasSize(".id-suffixLabel", !1), this.hasSize(".RANK_DP", !0), this.hasSize(".currentDpMc", !0), this.hasSize(".currentDpArea", !0), this.hasSize(".id-currentDpValue", !1), this.hasSize(".id-currentDpUnit", !1), this.translate(".WinLabel .WinText", "FOXHUNTINGINDIVIDUAL_RESULT_WIN"), this.translate(".LoseLabel .LoseText", "FOXHUNTINGINDIVIDUAL_RESULT_LOSE"), this.translate(".LapCount .id-lapLabel", "FOXHUNTINGINDIVIDUAL_RESULT_LAP"), this.translate(".LapCount .id-completeLabel", "FOXHUNTINGINDIVIDUAL_RESULTLIST_FINISH_LAPCOUNT"), this.translate(".LapCountLose .id-lapLabel", "FOXHUNTINGINDIVIDUAL_RESULT_LAP"), this.translate(".LapCountLose .id-completeLabel", "FOXHUNTINGINDIVIDUAL_RESULTLIST_FINISH_LAPCOUNT"), this.hasSize(".LapCount", !0), this.hasSize(".LapCount .id-currentLap", !1), this.hasSize(".LapCount .id-lapLabel", !1), this.hasSize(".LapCount .id-completeLabel", !1), this.hasSize(".LapCountLose", !1), this.hasSize(".LapCountLose .id-currentLap", !1), this.hasSize(".LapCountLose .id-lapLabel", !1), this.hasSize(".LapCountLose .id-completeLabel", !1), this.translate(".Ranked1on1matchPerfectWinLabel .id-textField", "1ON1_RACE_LAPTIME_PERFECTVICTORY")
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = a.store.getState().match;
                this.isDriftMode = t && "DRIFTINDIVIDUAL" === t.match.gameMode, this.isFoxhuntingMode = t && "FOXHUNTINGINDIVIDUAL" === t.match.gameMode, this.is1On1Ranked = t && "SPEED1ON1" === t.match.gameMode, this.currentTrack = this.staticdata.trackData.getTrack(t.match.trackCode), this.hudService.once("finish", function(t, i) {
                    e.audioService.get(l.FxAudioCode.EndFinish).play(), setTimeout(function() {
                        e.audioService.get(l.FxAudioCode.EndTimeshow).play()
                    }, 1e3 / 30 * 40), e.isDriftMode && 0 === t.driftpoint ? e.finishHandler(!0) : e.finishHandler(!1, t, i)
                }), this.hudService.once("retire", function(t) {
                    if (!t) {
                        e.audioService.get(l.FxAudioCode.EndRetire).play();
                        var i = a.store.getState().match.records,
                            n = _.find(i, function(e) {
                                return e.id === a.store.getState().player.id
                            });
                        e.finishHandler(!0, n)
                    }
                })
            }, t.prototype.getFinishLabel = function(e, t, i, n) {
                var r = a.store.getState().match.isEndFromDistanceCheck;
                if (this.is1On1Ranked && r) return this.isPerfectWinOn1On1Ranked() ? "1ON1RANKEDMATCH_PERFECT_WIN" : "RETIRE";
                var o = "NORMAL_FINISH";
                return n || e ? o = "RETIRE" : this.isDriftMode ? o = "DRIFT_FINISH" : this.isFoxhuntingMode && (o = 1 === i ? "FOXHUNTING_WIN" : "FOXHUNTING_LOSE"), o
            }, t.prototype.nextState = function() {
                this.stateService.go("root.MatchResult")
            }, t.prototype.isPerfectWinOn1On1Ranked = function() {
                var e = a.store.getState().match.records,
                    t = a.store.getState().player.id;
                return 0 === _.findIndex(e, function(e) {
                    return e.id === t
                })
            }, t.prototype.bindFoxhuntingInfo = function(e) {
                var t = "FOXHUNTINGINDIVIDUAL_RESULT_COMPLATERACE";
                switch (e.foxhuntingWinType) {
                    case d.FoxhuntingWinType.Overtake:
                        t = "FOXHUNTINGINDIVIDUAL_RESULT_OVERTAKE";
                        break;
                    case d.FoxhuntingWinType.RearEnd:
                        t = "FOXHUNTINGINDIVIDUAL_RESULT_BEOVERTAKEN"
                }
                this.bindHtml(".MethodLabel", this.$filter("translate")(t)), this.bindTextAll(".LapCount .id-currentLap", e.lapCount), this.bindTextAll(".LapCountLose .id-currentLap", e.lapCount)
            }, t.prototype.driftAnimation = function(e, t) {
                var i = this,
                    n = e.driftpoint,
                    r = a.store.getState().driftmodeResult,
                    o = r.finalPoint,
                    d = r.finalRank;
                a.store.dispatch(c.clearDriftResultStatus());
                var l = "RANKING_RETAIN",
                    u = this.convertFace(".id-arrowEffect");
                t < d ? l = "RANKING_UP" : t > d && (l = "RANKING_DOWN");
                var p = $(".id-dpValue");
                p.text(n), p.prop("Counter", n - o).animate({
                    Counter: p.text()
                }, {
                    duration: 1200,
                    easing: "swing",
                    step: function(e) {
                        return p.text(s.default.formatDriftPoint(Math.ceil(e)))
                    },
                    complete: function() {
                        switch (i.once(i.container, "stop", function() {
                                i.nextState()
                            }), i.gotoAndPlay(i.container, l), l) {
                            case "RANKING_UP":
                                i.gotoAndPlay(u, "up");
                                break;
                            case "RANKING_DOWN":
                                i.gotoAndPlay(u, "down");
                                break;
                            case "RANKING_RETAIN":
                                i.visible(u, !1)
                        }
                    }
                });
                var h = $(".id-currentDpValue");
                h.text(0), h.prop("Counter", o).animate({
                    Counter: "+" + h.text()
                }, {
                    duration: 1200,
                    easing: "swing",
                    step: function(e) {
                        return h.text("+" + s.default.formatDriftPoint(Math.ceil(e)))
                    }
                })
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("stateService")], u.prototype, "stateService", void 0), n.__decorate([r.autowired("hudService")], u.prototype, "hudService", void 0), n.__decorate([r.autowired("recordService")], u.prototype, "recordService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], u.prototype, "staticdata", void 0), n.__decorate([r.autowired("audioService")], u.prototype, "audioService", void 0), t.HudFinishEffectBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(3),
        a = i(163),
        s = i(9),
        c = ["driftdistance", "slipstream", "jump"],
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.update({
                    state: 0,
                    isNew: !0
                })
            }, t.prototype.update = function(e) {
                var t = e.state,
                    i = e.isNew,
                    n = e.desc;
                n && this.bindTextAll(".ActionDescription", n), i && this.gotoAndPlay(this.face, this.getStateLabel(t))
            }, t.prototype.getStateLabel = function(e) {
                switch (e) {
                    case 0:
                        return "ready";
                    case 1:
                        return "becoming";
                    case 2:
                        return "sendTwo";
                    case 3:
                        return "sendThree";
                    case 4:
                        return "fade"
                }
            }, t
        }(r.Binder),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.bHide = !0, t.slotActions = [], t.appliedActionSettings = {}, t.inputActions = {}, t.inputSeqs = {}, t.totalNoAccidentTime = 0, t.totalPerfectTurboCount = 0, t.isTurbo = !1, t.actionSlots = [], t.readySlots = function() {
                    t.actionSlots.map(function(e) {
                        return e.setProps({
                            state: 0,
                            isNew: !0
                        })
                    })
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.container = this.getFace(".Container"), this.face.$$(".ActionFeedbackContainer").map(function(t) {
                    e.actionSlots.push(e.addChildBinder(t, d))
                })
            }, t.prototype.onAddedToScene = function(e) {
                var t = this;
                this.visible(this.face, this.isShowFeedback(e));
                var i = function() {
                    return o.store.getState().view.flags.openworld ? "OPENWORLD" : "timetrial" === a.getFeatureType() ? "TIMETRIAL" : _.get(o.store.getState(), "match.match.gameMode")
                }();
                this.setupAction(i), this.addManagedListener(this.externalService, s.default.beHUDSetLeaderboard, function(e, i, n) {
                    t.recentRank && e < t.recentRank && t.onAction({
                        type: "overtaken"
                    }), t.recentRank = e
                }), this.addManagedListener(this.externalService, s.default.beHUDSetTachometer, function(e, i, n) {
                    t.onAction({
                        type: "speedreach",
                        data: i
                    })
                }), this.addManagedListener(this.externalService, s.default.beHUDSetHpGauge, function(e) {
                    t.recentHp && e < t.recentHp && t.startCheckingAccident(!0), t.recentHp = e
                }), this.addManagedListener(this.externalService, s.default.beHudSetJumpingInfo, function(e, i, n) {
                    t.onAction({
                        type: "jump",
                        data: _.toInteger(e),
                        done: n
                    })
                }), this.addManagedListener(this.externalService, s.default.beHudSetDriftingInfo, function(e, i, n) {
                    t.onAction({
                        type: "driftdistance",
                        data: _.toInteger(i),
                        done: n
                    })
                }), this.addManagedListener(this.externalService, s.default.beHudSetSlipStreamingInfo, function(e, i, n) {
                    t.onAction({
                        type: "slipstream",
                        data: _.toInteger(e),
                        done: n
                    })
                }), this.addManagedListener(this.externalService, s.default.beHUDStartSpeedModeTurbo, function(e, i, n) {
                    t.isTurbo = !0
                }), this.addManagedListener(this.externalService, s.default.beHUDEndSpeedModeTurbo, function(e) {
                    t.isTurbo && (t.isTurbo = !1, 0 === e && t.onAction({
                        type: "perfectturbo",
                        data: ++t.totalPerfectTurboCount
                    }))
                }), this.hudService.once("start", function() {
                    return t.startCheckingAccident(!0)
                }), this.on(this.face, "noaccident", function(e) {
                    t.onAction({
                        type: "noaccident",
                        data: e
                    }), t.startCheckingAccident(!1)
                })
            }, t.prototype.onDetach = function() {
                this.timerHide && clearTimeout(this.timerHide), this.timerNoAccident && clearTimeout(this.timerNoAccident)
            }, t.prototype.setupAction = function(e) {
                var t = this;
                e && (this.recentRank = void 0, this.recentHp = void 0, this.totalNoAccidentTime = 0, this.totalPerfectTurboCount = 0, this.appliedActionSettings = {}, this.inputActions = {}, this.inputSeqs = {}, _.forEach(this.staticdataLoaderService.actionFeedbackSettings, function(i, n) {
                    -1 === i.gamemodeexception.indexOf(e) && (t.appliedActionSettings[n] = i, t.inputActions[n] = [], t.inputSeqs[n] = -1)
                }))
            }, t.prototype.onAction = function(e) {
                var t = this.checkSettings(n.__assign({}, e, {
                    seq: this.inputSeqs[e.type]
                }));
                t && this.appendActionFeedback(t), 0 <= c.indexOf(e.type) ? e.done && ++this.inputSeqs[e.type] : ++this.inputSeqs[e.type]
            }, t.prototype.checkSettings = function(e) {
                var t = this.appliedActionSettings[e.type];
                if (t) {
                    var i = Date.now(),
                        n = this.convertActionData(e, t);
                    n.updateAt = i;
                    var r = !1,
                        o = this.inputActions[e.type];
                    if ("speedreach" === e.type) {
                        var a = _.findIndex(o, {
                                data: n.data
                            }),
                            s = o[a];
                        if (s && i < s.updateAt + t.cooltime && (r = !0, n.updateAt = s.updateAt, o.splice(a, 1)), o.unshift(n), r) return;
                        var c = _.toInteger(t.max / t.diff);
                        c < o.length && o.splice(c);
                        var d = o[1];
                        if (d && n.data <= d.data) return
                    } else {
                        var s = o[0];
                        if (s && s.seq !== n.seq && i < s.updateAt + t.cooltime && (r = !0, n.seq = s.seq, n.updateAt = s.updateAt), o.splice(0), o.push(n), r) return
                    }
                    if (this.isInMinMax(n, t)) return n
                }
            }, t.prototype.convertActionData = function(e, t) {
                var i = n.__assign({}, e, {
                    updateAt: 0
                });
                return 0 < t.diff && (i.data = _.toInteger(i.data / t.diff) * t.diff), i
            }, t.prototype.isInMinMax = function(e, t) {
                return !(0 < t.min && e.data < t.min) && !(0 < t.max && t.max < e.data)
            }, t.prototype.startCheckingAccident = function(e) {
                var t = this,
                    i = this.appliedActionSettings.noaccident;
                if (i) {
                    this.timerNoAccident && clearTimeout(this.timerNoAccident), e && (this.totalNoAccidentTime = 0);
                    var n = e ? i.min : i.diff;
                    this.timerNoAccident = setTimeout(function() {
                        t.totalNoAccidentTime += n, t.face.emit("noaccident", t.totalNoAccidentTime)
                    }, n)
                }
            }, t.prototype.isNewAction = function(e) {
                if (c.indexOf(e.type) < 0) return !0;
                var t = _.find(this.slotActions, {
                    type: e.type
                });
                return !t || t.seq !== e.seq
            }, t.prototype.appendActionFeedback = function(e) {
                var t = this,
                    i = this.isNewAction(e);
                if (i) this.bHide && (this.container.removeListener("reset", this.readySlots), this.container.gotoAndPlay("normal"), this.bHide = !1), this.slotActions.unshift(e);
                else {
                    _.find(this.slotActions, {
                        type: e.type
                    }).data = e.data
                }
                var n = this.slotActions.filter(function(e) {
                    return !e.hide
                });
                this.actionSlots.map(function(e, r) {
                    var o = n[r],
                        a = o ? 1 + r : 0,
                        s = {
                            state: a,
                            isNew: i,
                            action: o,
                            desc: t.getActionString(o)
                        };
                    e.setProps(s)
                });
                var r = this.slotActions[0] || {};
                (i || -1 !== c.indexOf(r.type) && !r.done) && (this.timerHide && clearTimeout(this.timerHide), this.timerHide = setTimeout(function() {
                    return t.hideSlots()
                }, 3e3))
            }, t.prototype.hideSlots = function() {
                this.bHide = !0, this.container.gotoAndPlay("allFade"), this.container.once("reset", this.readySlots), this.slotActions.forEach(function(e) {
                    e.hide = !0
                }), 30 < this.slotActions.length && this.slotActions.splice(30)
            }, t.prototype.getActionString = function(e) {
                if (_.isEmpty(e)) return "";
                switch (e.type) {
                    case "speedreach":
                        return this.$filter("template")({
                            speed: e.data
                        }, "ACTIONFEEDBACK_SPEEDREACH");
                    case "perfectturbo":
                        return this.$filter("template")({
                            times: e.data
                        }, "ACTIONFEEDBACK_PERFECTTURBO");
                    case "overtaken":
                        return this.$filter("translate")("ACTIONFEEDBACK_OVERTAKEN");
                    case "slipstream":
                        return this.$filter("template")({
                            seconds: (e.data / 1e3).toFixed(1)
                        }, "ACTIONFEEDBACK_SLIPSTREAM");
                    case "noaccident":
                        return this.$filter("template")({
                            seconds: e.data / 1e3
                        }, "ACTIONFEEDBACK_NOACCIDENT");
                    case "jump":
                        return this.$filter("template")({
                            seconds: (e.data / 1e3).toFixed(1)
                        }, "ACTIONFEEDBACK_JUMP");
                    case "driftdistance":
                        return this.$filter("template")({
                            meter: e.data
                        }, "ACTIONFEEDBACK_DRIFTDISTANCE")
                }
                return ""
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    configuration: e.configuration,
                    mission: e.mission
                }
            }, t.prototype.update = function(e) {
                this.isChangedShowFeedback(e) && this.visible(this.face, this.isShowFeedback(e)), this.isChangedMissionStatus(e) && -1 !== [3, 2].indexOf(e.mission.status) && this.setupAction("OPENWORLD")
            }, t.prototype.isChangedMissionStatus = function(e) {
                return _.get(this.reduxProps, "mission.status", !0) !== _.get(e, "mission.status", !0)
            }, t.prototype.isChangedShowFeedback = function(e) {
                return _.get(this.reduxProps, "configuration.configs.ingame.applied.actionFeedbackOn", !0) !== _.get(e, "configuration.configs.ingame.applied.actionFeedbackOn", !0)
            }, t.prototype.isShowFeedback = function(e) {
                return _.get(e || this.reduxProps, "configuration.configs.ingame.applied.actionFeedbackOn", !0)
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], l.prototype, "externalService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], l.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("hudService")], l.prototype, "hudService", void 0), n.__decorate([r.autowired("stateService")], l.prototype, "stateService", void 0), t.HudActionFeedbackBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(1),
        a = i(120),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.actionGuideDriftBooster = this.addChildBinder(".id-container", a.HudActionGuideBinder, {
                    inputKey: "throttle",
                    notifySuccess: !0,
                    condNextGuide: function() {
                        return !1
                    }
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.gaugeLoop.stop(), this.addManagedListener(this.externalService, r.default.beAvailableDriftBooster, function(t, i) {
                    i <= 0 ? (e.actionGuideDriftBooster.disable(), e.gaugeLoop.stop()) : (e.actionGuideDriftBooster.guide(), e.actionGuideDriftBooster.waitUse(i), e.startGuage(i), e.gaugeLoop.play())
                }), this.addManagedListener(this.externalService, r.default.beStartShortTurbo, function(t) {
                    e.actionGuideDriftBooster.use(), e.gaugeLoop.stop()
                })
            }, t.prototype.startGuage = function(e) {
                this.gaugeMask.rotation = 30, this.gaugeMask.killCustomTweens(), this.gaugeMask.addCustomToTween(e / 1e3, {
                    flash: {
                        rotation: -29
                    }
                })
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("externalService")], s.prototype, "externalService", void 0), n.__decorate([o.select(".id-boosterGauge .id-mask")], s.prototype, "gaugeMask", void 0), n.__decorate([o.select(".id-boosterGauge .id-gauge")], s.prototype, "gaugeLoop", void 0), t.HudDriftBoosterIndicatorBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this;
                if (!this.hudService.supportRoomMirror) return void(this.face.visible = !1);
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay(".CONTAINER", "intro")
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("hudService")], o.prototype, "hudService", void 0), t.HudRoomMirrorBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(38),
        a = i(304),
        s = i(3),
        c = i(40),
        d = i(13),
        l = i(2),
        u = i(38);
    ! function(e) {
        e[e.Room = 0] = "Room", e[e.Loading = 1] = "Loading", e[e.PostMatch = 2] = "PostMatch", e[e.Reward = 3] = "Reward"
    }(t.SimpleChatEntrance || (t.SimpleChatEntrance = {}));
    var p = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.tooltip = null, t.tabName = null, t.chatInputContainer = null, t.chatListArea = null, t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.hasSize = !0, this.tooltip = this.getFace(".id-tooltip"), this.tabName = this.getFace(".id-tabName"), this.chatInputContainer = this.getFace(".id-chatInputContainer"), this.chatInputBinder = this.addChildBinder(this.chatInputContainer, a.ChatInputBinder), this.chatInputBinder.setHideSourceName(!0), this.chatInputBinder.setSourceHasPlaceholder([u.ChatSourceType.Whisper]), this.chatInputBinder.fastInput = !0, this.chatListArea = this.getFace(".id-chatListArea"), this.tooltip.on(l.MouseEventEx.MOUSE_OVER, function(t) {
                return e.onHelpOver(t)
            }), this.tooltip.on(l.MouseEventEx.MOUSE_OUT, function() {
                return e.tooltipService.hide()
            })
        }, t.prototype.onDetach = function() {
            s.store.dispatch(c.closeSimpleChatWindow()), this.worldChatRenderer.uninstall(), this.chatInputBinder.IsActive = !1
        }, t.prototype.onAddedToScene = function() {
            s.store.dispatch(c.openSimpleChatWindow());
            var e = s.store.getState(),
                t = e.worldChat.tabStates;
            for (var i in t) {
                var n = t[i];
                n && s.store.dispatch(c.enableTab(n.id, n.simpleWindowEnable))
            }
            var r = this.getFace(".id-chatListArea > svg");
            this.worldChatRenderer.install(this.chatListArea.htmlElement, r.width + "px", r.height + "px", !1), this.chatInputBinder.IsActive = !0;
            var o = s.store.getState().worldChat.activatedTab;
            o && s.store.dispatch(c.activeTab(o))
        }, t.prototype.update = function(e) {
            var t = this,
                i = this.reduxProps;
            if (i.tabs !== e.tabs) {
                var n = e.tabs;
                for (var r in n) {
                    if (n[r].isActivated) {
                        var a = this.staticdata.worldChatData,
                            s = a.tabs[r].nameID;
                        this.translate(this.tabName, s);
                        break
                    }
                }
                i.tabs && e.displayType === o.ChatDisplayType.SimpleChatView && _.forEach(e.tabs, function(e, i) {
                    e.isActivated && t.worldChatService.onTabActived(e)
                })
            }
        }, t.prototype.mapStateToProps = function(e) {
            var t = e.worldChat;
            return {
                displayType: t.displayType,
                tabs: t.tabStates
            }
        }, t.prototype.onHelpOver = function(e) {
            var t = this.worldChatService.helpTooltipData.data,
                i = this.worldChatService.helpTooltipData.marginLeft,
                n = this.worldChatService.helpTooltipData.marginTop;
            this.tooltipService.show(e, "topright", d.TooltipType.WorldChatHelp, t, {
                marginLeft: i,
                marginTop: n
            })
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("staticdataLoaderService")], p.prototype, "staticdata", void 0), n.__decorate([r.autowired("worldChatRenderer")], p.prototype, "worldChatRenderer", void 0), n.__decorate([r.autowired("worldChatService")], p.prototype, "worldChatService", void 0), n.__decorate([r.autowired("tooltipService")], p.prototype, "tooltipService", void 0), t.SimpleChatWindowBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(630),
        o = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.currentPageY = 0, t.currentScrollThumbTop = 0, t.currentScrollTopIndex = 0, t.scrollItemGap = 0, t.scrollThumbHeight = 0, t.onMouseMove = _.bind(function(e) {
                    var i = e.pageY - t.currentPageY,
                        n = t.face.height - t.scrollThumbHeight,
                        r = t.currentScrollThumbTop + i;
                    r < 0 ? r = 0 : n < r && (r = n);
                    var o = r / t.scrollItemGap;
                    t.updateScroll(_.toInteger(o - t.currentScrollTopIndex))
                }, t), t.onMouseUp = _.bind(function(e) {
                    t.classNames(t.face, t.defaultStyle), document.body.removeEventListener("mousemove", t.onMouseMove), document.body.removeEventListener("mouseup", t.onMouseUp)
                }, t), t.onMouseDown = _.bind(function(e) {
                    t.classNames(t.face, t.defaultStyle + " ps-in-scrolling ps-y"), t.currentPageY = e.pageY, t.currentScrollThumbTop = t.getCurrentScrollThumbTop(), document.body.addEventListener("mousemove", t.onMouseMove), document.body.addEventListener("mouseup", t.onMouseUp)
                }, t), t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "defaultStyle", {
                get: function() {
                    return "ps-container ps-theme-default ps-active-y"
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function(t) {
                e.prototype.onFaceReady.call(this, t), this.initScrollBar()
            }, t.prototype.applyCollection = function() {
                var e = this;
                this.items.length - this.itemCountPerPage < this.currentScrollTopIndex && (this.currentScrollTopIndex = this.items.length - this.itemCountPerPage), this.currentScrollTopIndex < 0 && (this.currentScrollTopIndex = 0);
                var t = _.slice(this.items, this.currentScrollTopIndex, this.currentScrollTopIndex + this.itemCountPerPage);
                this.listBinder.applyCollection(_.map(t, function(t, i) {
                    return n.__assign({}, e.getItemProps(t), {
                        viewIndex: i
                    })
                }))
            }, t.prototype.calcScrollThumb = function() {
                this.scrollItemGap = this.face.height / this.items.length;
                var e = this.listBinder.binders[0].face.height;
                this.scrollThumbHeight = this.face.height * this.face.height / (e * this.items.length), this.scrollThumbHeight += this.face.height - ((this.items.length - this.itemCountPerPage) * this.scrollItemGap + this.scrollThumbHeight), this.scrollThumbHeight = _.toInteger(this.scrollThumbHeight)
            }, t.prototype.setScroll = function() {
                this.isNeedScrollBar() ? (this.destroyScrollBar(), this.calcScrollThumb(), this.scrollBar = document.createElement("div"), this.scrollBar.setAttribute("id", "custom-scrollbar"), this.scrollBar.setAttribute("class", "ps-scrollbar-y-rail"), this.scrollBar.setAttribute("style", "top: 0px; height: " + this.face.height + "px; right: 3px; -webkit-backface-visibility: hidden"), this.scrollThumb = document.createElement("div"), this.scrollThumb.setAttribute("class", "ps-scrollbar-y"), this.scrollThumb.setAttribute("tabindex", "0"), this.scrollThumb.setAttribute("style", "top: 0px; height: " + this.scrollThumbHeight + "px;"), this.scrollThumb.addEventListener("mousedown", this.onMouseDown), this.scrollBar.appendChild(this.scrollThumb), this.face.htmlElement.appendChild(this.scrollBar), this.updateScroll(0)) : this.destroyScrollBar()
            }, t.prototype.destroyScrollBar = function() {
                this.scrollBar && (this.scrollThumb.removeEventListener("mousedown", this.onMouseDown), this.face.htmlElement.removeChild(this.scrollBar), this.scrollBar = void 0)
            }, t.prototype.initScrollBar = function() {
                this.classNames(this.face, this.defaultStyle), this.face.htmlElement.addEventListener("wheel", _.throttle(this.wheelEventHandler.bind(this), 50, {
                    trailing: !1
                }))
            }, t.prototype.updateScroll = function(e) {
                var t = this.currentScrollTopIndex;
                this.currentScrollTopIndex += e, this.items.length - this.itemCountPerPage < this.currentScrollTopIndex && (this.currentScrollTopIndex = this.items.length - this.itemCountPerPage), this.currentScrollTopIndex < 0 && (this.currentScrollTopIndex = 0), t !== this.currentScrollTopIndex && (this.applyCollection(), this.updatelistItemSelected(this.selectedIndex)), !this.scrollBar || t === this.currentScrollTopIndex && 0 !== e || $(this.scrollThumb).css("top", _.toInteger(this.currentScrollTopIndex * this.scrollItemGap))
            }, t.prototype.wheelEventHandler = function(e) {
                var t = Math.max(-1, Math.min(1, e.wheelDelta || -e.detail));
                1 === t ? this.updateScroll(-1) : -1 === t && this.updateScroll(1)
            }, t.prototype.getCurrentScrollThumbTop = function() {
                if (!this.scrollBar) return 0;
                var e = $(this.scrollThumb).css("top"),
                    t = e.replace(/[a-z]/g, "");
                return parseFloat(t)
            }, t.prototype.scrollTop = function(e) {
                e = e || 0, this.updateScroll(e - this.currentScrollTopIndex)
            }, t
        }(r.ScrollListBinder);
    t.LineScrollListBinder = o
}, , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return Object.defineProperty(e, "debugLevel", {
            get: function() {
                return e._debugLevel
            },
            set: function(t) {
                e._debugLevel !== t && (e._debugLevel = t, localStorage.setItem("face.debugLevel", t))
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e, "hwRenderedSvg", {
            get: function() {
                return "true" === e._hwRenderedSvg
            },
            set: function(t) {
                var i = t.toString();
                e._hwRenderedSvg !== i && (e._hwRenderedSvg = i, localStorage.setItem("face.hwRenderedSvg", i))
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e, "allowFrameSkip", {
            get: function() {
                return "true" === e._allowFrameSkip
            },
            set: function(t) {
                var i = t.toString();
                e._allowFrameSkip !== i && (e._allowFrameSkip = i, TweenMax.globalTimeScale(this.allowFrameSkip ? 30 : 1), localStorage.setItem("face.allowFrameSkip", i))
            },
            enumerable: !0,
            configurable: !0
        }), e
    }();
    n._debugLevel = localStorage.getItem("face.debugLevel") || "production", n._hwRenderedSvg = localStorage.getItem("face.hwRenderedSvg") || "true", n._allowFrameSkip = localStorage.getItem("face.allowFrameSkip") || "true", t.Features = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    ! function(e) {
        e[e.PreSeasonPrimaryStart = 0] = "PreSeasonPrimaryStart", e[e.PreSeasonExistingStart = 1] = "PreSeasonExistingStart", e[e.PreSeasonResult = 2] = "PreSeasonResult", e[e.PromoteStart = 3] = "PromoteStart", e[e.DemoteStart = 4] = "DemoteStart"
    }(t.SeasonEvent || (t.SeasonEvent = {}));
    ! function(e) {
        e[e.NORMAL = 1] = "NORMAL", e[e.SUCCESS = 2] = "SUCCESS", e[e.FAILURE = 3] = "FAILURE", e[e.CHECK = 4] = "CHECK"
    }(t.PreSeasonState || (t.PreSeasonState = {}));
    ! function(e) {
        e[e.Top5 = 0] = "Top5", e[e.Friends = 1] = "Friends"
    }(t.TabMenu || (t.TabMenu = {})), t.defaultRankedState = {
        modes: {}
    }, t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.RANKED2, e)
    };
    ! function(e) {
        e[e.RequestNotExists = 1] = "RequestNotExists", e[e.SessionNotExists = 2] = "SessionNotExists", e[e.PlayerDoesNotExistInSeason = 3] = "PlayerDoesNotExistInSeason", e[e.PlayerAlreadyExistsInSeason = 4] = "PlayerAlreadyExistsInSeason", e[e.PlayerAlreadyExistsInSeasonAndDuplicatedUniqueId = 5] = "PlayerAlreadyExistsInSeasonAndDuplicatedUniqueId", e[e.PlayerAlreadyExists3 = 6] = "PlayerAlreadyExists3", e[e.PlayerAlreadyExists4 = 7] = "PlayerAlreadyExists4", e[e.PlayerAlreadyExists5 = 8] = "PlayerAlreadyExists5", e[e.RankedSeasonNotExists = 9] = "RankedSeasonNotExists", e[e.SimulatorParamErrorOccurredBecauseRankMustLessThanNumOfPlayers = 10] = "SimulatorParamErrorOccurredBecauseRankMustLessThanNumOfPlayers", e[e.FailedToFindVehicle = 11] = "FailedToFindVehicle", e[e.TopPlayerDoesNotExist = 20] = "TopPlayerDoesNotExist", e[e.FailedToFindVehicleWhenSettingVehicle = 28] = "FailedToFindVehicleWhenSettingVehicle", e[e.FailedToFindVehicleWhenRequestingMatchmaking = 29] = "FailedToFindVehicleWhenRequestingMatchmaking", e[e.TriedToJoinStartedRoom = 30] = "TriedToJoinStartedRoom", e[e.PlayerNotFound = 31] = "PlayerNotFound", e[e.PlayerNotFound2 = 32] = "PlayerNotFound2", e[e.PlayerNotFound3 = 33] = "PlayerNotFound3", e[e.FailedToCreateLobby = 34] = "FailedToCreateLobby", e[e.FailedToFindLobby = 35] = "FailedToFindLobby", e[e.FailedToFindMatchmaking = 36] = "FailedToFindMatchmaking", e[e.FailedToFindPlayerWhenFindingRecentVehicle = 37] = "FailedToFindPlayerWhenFindingRecentVehicle", e[e.FailedToFindVehicleWhenFindingRecentVehicle = 38] = "FailedToFindVehicleWhenFindingRecentVehicle", e[e.FailedToFindPlayerTryingToChangeStatus = 39] = "FailedToFindPlayerTryingToChangeStatus", e[e.FailedToFindPlayerTryingToChangeVehicle = 40] = "FailedToFindPlayerTryingToChangeVehicle", e[e.DuplicatedSeason = 41] = "DuplicatedSeason", e[e.FailedToFindPlayerTryingToJoin = 42] = "FailedToFindPlayerTryingToJoin", e[e.TriedToChangeStartedRoom = 43] = "TriedToChangeStartedRoom", e[e.TriedToChangeVehicleInStartedRoom = 44] = "TriedToChangeVehicleInStartedRoom", e[e.MatchAlreadyStarted = 45] = "MatchAlreadyStarted", e[e.AvailableTrackNotExists = 46] = "AvailableTrackNotExists", e[e.ClientVersionNotMatched = 100] = "ClientVersionNotMatched", e[e.PlayerInfoDoesNotExist = 101] = "PlayerInfoDoesNotExist", e[e.NotMatchedSidWhenJoiningLobby = 102] = "NotMatchedSidWhenJoiningLobby", e[e.LobbyStatusChangeError = 103] = "LobbyStatusChangeError", e[e.CannotUseTrialVehicleForRankedMatch = 201] = "CannotUseTrialVehicleForRankedMatch", e[e.WrongGameMode = 202] = "WrongGameMode", e[e.KFactorDataNotExists = 203] = "KFactorDataNotExists", e[e.SeasonHaveBeenChanged = 204] = "SeasonHaveBeenChanged", e[e.NoPidInSession = 901] = "NoPidInSession"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(6),
        a = i(35),
        s = i(4),
        c = i(10),
        d = i(844);
    t.LicenseCode = d.LicenseCode;
    var l = i(3),
        u = i(263),
        p = i(9),
        h = i(848),
        f = function(e) {
            function t(t, i, n, r, o, a, s, c, d, l) {
                var u = e.call(this) || this;
                return u.$window = t, u.$filter = i, u.publisherService = n, u.staticdata = r, u.vehicleDataService = o, u.hudService = a, u.externalService = s, u.recordService = c, u.tuningShopService = d, u.numberPlateService = l, u.isGivingUp = !1, u.RETIRE_MAX_SEC = 864e5, u.checkers = [], u.cleanup = [], c.on("changed", u.onRecordChange.bind(u)), u
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "licenseData", {
                get: function() {
                    return this.staticdata.licenseData
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "licenseTestData", {
                get: function() {
                    return this.staticdata.licenseTestData
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "licenseRewardData", {
                get: function() {
                    return this.staticdata.licenseRewardData
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.initState = function(e) {
                l.store.dispatch(u.init(e, l.store.getState().player.level, this.licenseData))
            }, t.prototype.fetch = function() {
                var e = this;
                if (l.store.getState().license.license) return o.resolve();
                if (this.fetching) return this.fetching;
                var t = l.store.getState().player.id;
                return this.fetching = c.request("GET", "licenses/" + t).then(function(t) {
                    e.initState(t), e.fetching = void 0
                }).catch(function(t) {
                    if (!e.externalService.isDevelopment()) throw t;
                    var i = {
                        code: d.LicenseCode.Beginner,
                        completedTest: []
                    };
                    e.initState(i), r.error("License fetch failed :: ", t)
                })
            }, t.prototype.sendResult = function(e, t) {
                var i = l.store.getState().player;
                return c.request("PUT", "licenses/" + i.id + "/testcodes/" + e + "/complete", {
                    complete: t
                }).then(function(i) {
                    var n = l.store.getState().license.license;
                    n.code !== i.code ? l.store.dispatch(u.promote(i.code)) : t && -1 === n.completedTest.indexOf(e) && l.store.dispatch(u.passTest(e))
                }).catch(function(e) {})
            }, t.prototype.generateAssignParam = function(e, t) {
                var i = this,
                    n = e.vehicleCode,
                    r = e.trackCode,
                    o = e.conditions,
                    a = e.schematic;
                return c.request("GET", "match2/vehicle/attrs", {
                    code: n,
                    grade: 1
                }).then(function(e) {
                    var s = i.staticdata.trackData,
                        c = l.store.getState().player,
                        d = s.getTrack(r).level.split("/").pop(),
                        u = i.tuningShopService.createCorePaintData(t.paint);
                    u.plate = i.numberPlateService.createPaintData();
                    var p = _.find(o, {
                        name: "time"
                    });
                    return {
                        matchId: 42,
                        level: d,
                        laps: 1,
                        isManagerMode: !1,
                        creator: "licenses",
                        coreGameModeSchematic: a,
                        clients: [{
                            accountid: c.id,
                            playerid: c.id,
                            vcode: n,
                            attrs: e,
                            ai: !1,
                            positionOnStartingGrid: 0,
                            appearanceInfo: u
                        }],
                        observers: [],
                        end: {
                            checker: 0,
                            takeDowns: 0,
                            limitTime: p ? p.goal : i.RETIRE_MAX_SEC
                        }
                    }
                })
            }, t.prototype.loadLicenseGame = function(e) {
                var t = this,
                    i = this.vehicleDataService.createRefinedVehicle(e.vehicleCode);
                this.generateAssignParam(e, i).then(function(n) {
                    if ("driving" === e.type) t.externalService.beStartWorldRace("localhost", 9999, n.matchId, n);
                    else {
                        var o = n;
                        o.licenseRules = {
                            chapter: e.chapter,
                            assignItems: e.itemEvents,
                            attackItemsByTrigger: e.hitEvents
                        }, r.debug("beLicenseStart: ", i), t.externalService.beLicenseStart(o)
                    }
                })
            }, t.prototype.startTest = function(e) {
                var t = this;
                l.store.dispatch(u.setCurrentTest(e)), this.recordService.initRecord(), this.checkers = e.conditions.map(function(e) {
                    return h.buildChecker(t.recordService, t.externalService, e)
                }), this.cleanup.push(this.externalService.on(p.default.beDestroyObject, function(e, i) {
                    t.recordService.pushRecord("destroy", {
                        attacker: e,
                        time: i
                    })
                })), this.cleanup.push(this.externalService.on(p.default.beFinishGame, function(e, i) {
                    r.debug("##Lecense.service >> CoreEvent.beFinishGame", t.checkers), t.isGivingUp ? t.endTest(!1, !0) : (i && t.recordService.setRecord("laptime", i), t.endTest(_.every(t.checkers, function(t) {
                        return 1 === t.test(e)
                    }), e, i)), t.isGivingUp = !1
                }))
            }, t.prototype.giveup = function() {
                this.externalService.isEdgeBrowser() ? (this.isGivingUp = !0, this.externalService.beAbandonRace()) : this.cheatFail()
            }, t.prototype.endTest = function(e, t, i) {
                var n = this;
                this.hudService.outro(), this.emit("finish", e, t, i);
                var r = l.store.getState().license.currentTest;
                this.sendResult(r.code, e).then(function() {
                    l.store.dispatch(u.clearCurrentTest());
                    for (var e = 0, t = n.checkers; e < t.length; e++) {
                        t[e].destroy()
                    }
                    n.checkers = [], n.cleanup.forEach(function(e) {
                        return e()
                    }), n.cleanup = [], n.emit("complete")
                })
            }, t.prototype.onRecordChange = function(e) {
                if (this.checkers.length)
                    for (var t = 0, i = this.checkers.length; t < i; t++) {
                        var n = this.checkers[t];
                        if (n.name === e) {
                            this.emit("conditionUpdate", t);
                            break
                        }
                    }
            }, t.prototype.getFilteredCondition = function(e, t, i) {
                return h.filteredCondition(this.$filter, e, t, i, {})
            }, t.prototype.getHudConditionLabel = function(e) {
                var t = this.checkers[e];
                return t ? t.getHudLabel(this.$filter) : void r.error("licenseService.getHudConditionLabel() condition index is not valid", e)
            }, t.prototype.checkCompletedCondition = function(e, t) {
                void 0 === t && (t = !1);
                var i = this.checkers[e];
                return i ? 1 === i.test(t) : void r.error("licenseService.checkCompletedCondition() condition index is not valid", e)
            }, t.prototype.tabTooltip = function(e) {
                var t = this.$filter("translate"),
                    i = this.$filter("template");
                return {
                    title: t("LICENSE_MAIN_TITLE_" + d.LicenseCode[e].toUpperCase()),
                    conditionLabel: t("LICENSE_MAIN_TAB_TITLE"),
                    conditions: [i({
                        value: this.licenseData[e].requiredLevel
                    }, "LICENSE_MAIN_TAB_LEVEL"), i({
                        value: t("LICENSE_MAIN_TITLE_" + d.LicenseCode[e - 1].toUpperCase())
                    }, "LICENSE_MAIN_TAB_PRECEDE")]
                }
            }, t.prototype.getPassedTestIndex = function() {
                var e = l.store.getState().license,
                    t = e.activeTab,
                    i = e.staging;
                if (!i) return -1;
                var n = i.passedTest,
                    r = this.licenseTestData[t - 1];
                return _.findIndex(r, function(e) {
                    return e.code === n
                })
            }, t.prototype.cheatStartGame = function() {
                var e = this;
                o.delay(3500).then(function() {
                    return e.$window.beAllPlayerLoaded()
                }).delay(3e3).then(function() {
                    var t = 5;
                    return s.default.interval(function() {
                        e.$window.beHUDStartCountdown(t--)
                    }, 1e3, 5)
                }).delay(1e3).then(this.$window.beHUDStartGame)
            }, t.prototype.cheatSuccess = function() {
                for (var e = this, t = 0, i = this.checkers; t < i.length; t++) {
                    i[t].cheat()
                }
                o.delay(500).then(function() {
                    return e.$window.beFinishGame(!1, 1e3)
                })
            }, t.prototype.cheatFail = function() {
                var e = this;
                o.delay(500).then(function() {
                    return e.$window.beFinishGame(!0)
                })
            }, t.prototype.cheatPassTest = function(e) {
                var t = this;
                return this.sendResult(e, !0).then(function() {
                    var e = l.store.getState().player;
                    l.store.dispatch(u.applyStaging(e.level, t.licenseData))
                })
            }, t.prototype.cheatPromoteLicense = function() {
                var e = this,
                    t = l.store.getState(),
                    i = t.player,
                    n = t.license;
                return c.request("PUT", "licenses/" + i.id + "/testcodes/" + (n.license.code + 1)).then(function(t) {
                    return e.initState(t), t
                })
            }, t.prototype.cheatDemoteLicense = function() {
                var e = this,
                    t = l.store.getState(),
                    i = t.player,
                    n = t.license;
                return c.request("PUT", "licenses/" + i.id + "/testcodes/" + (n.license.code - 1)).then(function(t) {
                    return e.initState(t), t
                })
            }, t
        }(a.EventEmitter);
    f.$inject = ["$window", "$filter", "publisherService", "staticdataLoaderService", "vehicleDataService", "hudService", "externalService", "recordService", "tuningShopService", "numberPlateService"], t.LicenseService = f, angular.module("edge.components").factory("licenseService", s.default.service(f))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.FINISHED = 0] = "FINISHED", e[e.INPROGRESS = 1] = "INPROGRESS"
    }(t.TutorialStatus || (t.TutorialStatus = {})), t.DrivingTutorialStepKeyMaps = (n = {}, n[2] = "steeringLeft", n[1] = "steeringRight", n[3] = "brake", n[4] = "useItem", n[5] = "nitro", n[6] = "handBrake", n), t.TUTORIAL_START_MISSION_CODE = 41, t.TUTORIAL_GUIDE_END_MISSION = 4, t.TUTORIAL_GUIDE_END_CAMPAIGN = 5;
    var n
}, function(module, exports, __webpack_require__) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
        value: !0
    });
    var tslib_1 = __webpack_require__(0),
        _ = __webpack_require__(22),
        events = __webpack_require__(35),
        log = __webpack_require__(7),
        util_1 = __webpack_require__(4),
        core_event_1 = __webpack_require__(9);
    exports.CoreEvent = core_event_1.CoreEvent;
    var scope_limiter_1 = __webpack_require__(535),
        camera_state_1 = __webpack_require__(1022),
        inject_helper_1 = __webpack_require__(34),
        httpdns_1 = __webpack_require__(542),
        util_2 = __webpack_require__(3),
        bootstrap_service_1 = __webpack_require__(538),
        ExternalService = function() {
            function ExternalService(e, t, i, n, r) {
                var o = this;
                this.$window = e, this.localStorageService = t, this.sessionService = i, this.configLoader = n, this.imeService = r, this.onLocalizationData = function(e, t, i) {
                    o.$window.beSetLocalizationString && o.$window.beSetLocalizationString(t, i)
                }, this._features = {
                    "experimental.coreImageTexture": {
                        default: !0
                    }
                }, this._coreEventEmitter = new events.EventEmitter, this._coreNoListenerErrors = {}, this._setWindowHandler(), this._setDefaultHandlers(), this._camera = new camera_state_1.CameraState(this), e.externalService = this, this.isEdgeBrowser() || (this.mockConfiguration = new MockConfiguration), this.levelLoadDefer = util_1.default.defer(), t.get("beLevelBootedUp") && e.beLevelBootedUp(), this.levelLoadDefer.promise.catch(function(e) {
                    return log.debug(e)
                }), this.imeService.init(this), $(window).on("l10n.settled", this.onLocalizationData)
            }
            return Object.defineProperty(ExternalService.prototype, "camera", {
                get: function() {
                    return this._camera
                },
                enumerable: !0,
                configurable: !0
            }), ExternalService.prototype._setWindowHandler = function() {
                for (var e = this, t = Object.keys(core_event_1.CoreEvent), i = this, n = 0, r = t; n < r.length; n++) {
                    var o = r[n];
                    ! function(t) {
                        console.assert(t === core_event_1.CoreEvent[t]), i.$window[t] = function() {
                            if (!e._coreEventEmitter.listeners(t).length) return e._coreNoListenerErrors[t] = (e._coreNoListenerErrors[t] || 0) + 1, void(e._coreNoListenerErrors[t] <= 1 && log.error(t + " was invoked but no one listened"));
                            var i = Array.prototype.slice.call(arguments);
                            e._coreEventEmitter.emit.apply(e._coreEventEmitter, [t].concat(i))
                        }
                    }(o)
                }
            }, ExternalService.prototype._setDefaultHandlers = function() {
                var e = this;
                this.on(core_event_1.CoreEvent.beLevelBootedUp, function() {
                    e.levelLoadDefer.resolve(), e.localStorageService.set("beLevelBootedUp", !0)
                }), this.on(core_event_1.CoreEvent.beToggleEdgeUi, function() {
                    var e = !0;
                    return function() {
                        e && $("#edge-ui").hide() || $("#edge-ui").show(), e = !e
                    }
                }()), this.on(core_event_1.CoreEvent.beRequestShutdown, function(t, i, n) {
                    inject_helper_1.getInjector().get("popupService").drawConfirm(t || "POPUP_ANTIBOT_TITLE", i || "POPUP_ANTIBOT_DESC", function() {
                        return e.beShutdown(n)
                    })
                }), this.on(core_event_1.CoreEvent.beNotifyCertificateError, function(t, i) {
                    log.error("beNotifyCertificateError", t, i);
                    var n = inject_helper_1.getInjector().get("popupService"),
                        r = inject_helper_1.getInjector().get("$filter")("translate");
                    if (i) {
                        var o = i.match(/Common: (.*)/);
                        i = r("CERTIFICATE_ERROR_DESC"), o && (i += "<br>" + o[1])
                    }
                    n.drawConfirm("ALARM_SERVERLOST_TITLE", i, function() {
                        return t === bootstrap_service_1.loginApiEndpoint && e.beShutdown(9)
                    })
                })
            }, ExternalService.prototype.addCallback = function(e, t, i) {
                new scope_limiter_1.default(e, this._coreEventEmitter).on(t, i)
            }, ExternalService.prototype.once = function(e, t) {
                this._coreEventEmitter.once(e, t)
            }, ExternalService.prototype.on = function(e, t) {
                var i = this;
                return this._coreEventEmitter.on(e, t),
                    function() {
                        return i._coreEventEmitter.removeListener(e, t)
                    }
            }, ExternalService.prototype.off = function(e, t) {
                this._coreEventEmitter.removeListener(e, t)
            }, ExternalService.prototype.offAll = function(e) {
                this._coreEventEmitter.removeAllListeners(e)
            }, ExternalService.prototype.removeListener = function(e, t) {
                this._coreEventEmitter.removeListener(e, t)
            }, ExternalService.prototype.isEdgeBrowser = function() {
                return this.configLoader.isEdgeBrowser()
            }, ExternalService.prototype.beCloseCandidates = function() {
                this.$window.beCloseCandidates && this.$window.beCloseCandidates()
            }, ExternalService.prototype.useHttpDns = function() {
                return this.sessionService.config.useHttpDns
            }, ExternalService.prototype.hasPublisherToken = function() {
                return !!this.sessionService.config.token
            }, ExternalService.prototype._beStartGame = function(e, t, i, n, r) {
                this.debugCoreLevel = 3, this.$window.beStartGame && this.$window.beStartGame(e, t, i, n, r)
            }, ExternalService.prototype.beStartGame = function(e, t, i, n, r) {
                var o = this;
                if (void 0 === r && (r = !1), log.info("beStartGame matchId:" + i + " " + e + " " + t + " " + n + " " + r), this.useHttpDns()) return void httpdns_1.httpdns(e).then(function(e) {
                    return o._beStartGame(e, t, i, n, r)
                });
                this._beStartGame(e, t, i, n, r)
            }, ExternalService.prototype.beAbandonRace = function() {
                if (this.isEdgeBrowser()) return this.$window.beAbandonRace()
            }, ExternalService.prototype.beSelectVehicle = function(e, t) {
                void 0 === t && (t = 0);
                var i = e.code || e.id,
                    n = inject_helper_1.getInjector().get("tuningShopService"),
                    r = n.createCorePaintData(e.paint),
                    o = inject_helper_1.getInjector().get("numberPlateService");
                if (r.plate = o.createPaintData(), this.isEdgeBrowser()) return log.info("beSelectVehicle", i, JSON.stringify(r), t), this.$window.beSelectVehicle && this.$window.beSelectVehicle(i, r, t)
            }, ExternalService.prototype.beCacheVehicles = function(e) {
                return this.$window.beCacheVehicles && this.$window.beCacheVehicles(e)
            }, ExternalService.prototype.beSelectPlayer = function(e, t) {
                if (this.isEdgeBrowser()) return this.$window.beSelectPlayer(e, t)
            }, ExternalService.prototype.beSetCameraState = function(e, t) {
                if (log.info("beSetCameraState", e, t), this.isEdgeBrowser()) return this.$window.beSetCameraState(e, t)
            }, ExternalService.prototype.beSetMouseEnabled = function(e, t) {
                if (void 0 === t && (t = 1), this.isEdgeBrowser()) return this.$window.beSetMouseEnabled && this.$window.beSetMouseEnabled(e, t)
            }, ExternalService.prototype.beSetKeyboardEnabled = function(e) {
                if (this.isEdgeBrowser()) return this.$window.beSetKeyboardEnabled && this.$window.beSetKeyboardEnabled(e)
            }, ExternalService.prototype.beGetHostModeEnabled = function() {
                return !!this.isEdgeBrowser() && (this.$window.beGetHostModeEnabled && this.$window.beGetHostModeEnabled())
            }, ExternalService.prototype.toCoreMatchParam = function(e) {
                return _.assign({}, e, {
                    matchid: e.matchId,
                    coregamemodeschematic: e.coreGameModeSchematic
                })
            }, ExternalService.prototype.beHostMultiplayerGame = function(e) {
                if (this.debugCoreLevel = 3, this.$window.beHostMultiplayerGame) return this.$window.beHostMultiplayerGame(this.toCoreMatchParam(e))
            }, ExternalService.prototype.beStartWorldRace = function(e, t, i, n) {
                if (this.debugCoreLevel = 3, this.$window.beStartWorldRace) return this.$window.beStartWorldRace(e, t, i, this.toCoreMatchParam(n))
            }, ExternalService.prototype.beStartTimetrial = function(e, t, i) {
                if (void 0 === t && (t = ""), log.debug("beStartTimetrial>>", e, t, i), this.debugCoreLevel = 3, this.$window.beStartTimeTrial) return this.$window.beStartTimeTrial(this.toCoreMatchParam(e), t, i)
            }, ExternalService.prototype.beShutdown = function(e, t) {
                if (void 0 === e && (e = 0), this.isEdgeBrowser()) return this.$window.beShutdown(e, t)
            }, ExternalService.prototype.beGetAvailableResolutions = function() {
                return this.isEdgeBrowser() ? this.$window.beGetAvailableResolutions() : this.mockConfiguration.getResolutions()
            }, ExternalService.prototype.beGetConfiguration = function(e) {
                return this.isEdgeBrowser() ? this.$window.beGetConfiguration(e) : this.mockConfiguration.get(e)
            }, ExternalService.prototype.beSetConfiguration = function(e, t) {
                return this.isEdgeBrowser() ? this.$window.beSetConfiguration(e, t) : this.mockConfiguration.set(e, t)
            }, ExternalService.prototype.beGetDefaultConfiguration = function(e) {
                return this.isEdgeBrowser() ? this.$window.beGetDefaultConfiguration(e) : this.mockConfiguration.get(e)
            }, ExternalService.prototype.beGetGraphicFeature = function(e) {
                return this.isEdgeBrowser() ? this.$window.beGetGraphicFeature(e) : this.mockConfiguration.getGraphicFeature(e)
            }, ExternalService.prototype.bePreloadImage = function(e) {
                if (this.isEdgeBrowser()) return this.$window.bePreloadImage(e)
            }, ExternalService.prototype.beUnloadImage = function(e) {
                if (this.isEdgeBrowser()) return this.$window.beUnloadImage(e)
            }, ExternalService.prototype.beSelectCandidate = function(e) {
                if (this.isEdgeBrowser()) return this.$window.beSelectCandidate(e)
            }, ExternalService.prototype.beGetConfig = function() {
                if (this.isEdgeBrowser()) return _.isUndefined(this._coreConfig) ? this._coreConfig = this.configLoader.getCoreConfig() : this._coreConfig
            }, ExternalService.prototype.hasFeature = function(e) {
                this._features[e] || (this._features[e] = {
                    value: !1
                });
                var t = this._features[e];
                if (_.isUndefined(t.value)) {
                    var i = this.localStorageService.get("feature." + e);
                    t.value = i ? JSON.parse(i) : !_.isUndefined(t.default) && t.default
                }
                return t.value
            }, ExternalService.prototype.setFeature = function(e, t) {
                (this._features[e] || (this._features[e] = {})).value = t, this.localStorageService.set("feature." + e, t)
            }, ExternalService.prototype.isDevelopment = function() {
                return _.isUndefined(this._isDevelopment) ? this._isDevelopment = !this.isEdgeBrowser() || /development/.test(navigator.userAgent) : this._isDevelopment
            }, ExternalService.prototype.beCheatFinishRace = function() {
                if (this.isEdgeBrowser()) return this.$window.beCheatFinishRace()
            }, ExternalService.prototype.beNexonStageLogStatus = function(e) {
                this.$window.beNexonStageLogStatus && this.$window.beNexonStageLogStatus(e)
            }, ExternalService.prototype.beNexonErrorLogStatus = function(e) {
                this.$window.beNexonErrorLogStatus && this.$window.beNexonErrorLogStatus(e)
            }, ExternalService.prototype.beGetMemoryInfo = function() {
                if (this.$window.beGetMemoryInfo) return this.$window.beGetMemoryInfo();
                var e = window.performance;
                return e && e.memory || {}
            }, ExternalService.prototype.beRestartBrowser = function(e) {
                if (this.$window.beRestartBrowser) return this.$window.beRestartBrowser(e)
            }, Object.defineProperty(ExternalService.prototype, "levelLoaded", {
                get: function() {
                    var e = this;
                    return this.isEdgeBrowser() || setTimeout(function() {
                        return e.$window.beLevelBootedUp()
                    }, 2e3), this.levelLoadDefer.promise
                },
                enumerable: !0,
                configurable: !0
            }), ExternalService.prototype.beGetCurrentLevel = function() {
                return this.$window.beGetCurrentLevel && this.$window.beGetCurrentLevel()
            }, ExternalService.prototype.clearLevelLoading = function() {
                this.localStorageService.set("beLevelBootedUp", !1), this.levelLoadDefer = util_1.default.defer()
            }, ExternalService.prototype.beOpenNewBrowserWindowWithURL = function(e) {
                if (!e) return void log.error("invalid url for beOpenNewBrowserWindowWithURL");
                log.debug("open external browser in new window", e), this.$window.beOpenNewBrowserWindowWithURL ? this.$window.beOpenNewBrowserWindowWithURL(e) : window.open(e)
            }, ExternalService.prototype.beGetCoreVersion = function() {
                return this.$window.fakeClientVersion ? this.$window.fakeClientVersion : this.isEdgeBrowser() && this.$window.beGetCoreVersion ? this.$window.beGetCoreVersion() : 0
            }, ExternalService.prototype.beGetRefreshToken = function() {
                return this.$window.beGetRefreshToken ? this.$window.beGetRefreshToken() : this.localStorageService.get("refresh_token")
            }, ExternalService.prototype.beSetRefreshToken = function(e) {
                this.$window.beSetRefreshToken ? this.$window.beSetRefreshToken(e) : this.localStorageService.set("refresh_token", e)
            }, ExternalService.prototype.beSetAccessToken = function(e) {
                this.$window.beSetAccessToken ? this.$window.beSetAccessToken(e) : this.localStorageService.set("access_token", e)
            }, ExternalService.prototype.beSetAntibotHost = function(e, t) {
                var i = this;
                this.$window.beSetAntibotHost && this.useHttpDns() && httpdns_1.httpdns(e).then(function(e) {
                    return i.$window.beSetAntibotHost(e, t)
                })
            }, ExternalService.prototype.beSetNGSHost = function(e, t) {
                this.$window.beSetNGSHost && this.$window.beSetNGSHost(e, t)
            }, ExternalService.prototype.beWaitingRoomInitCompleted = function(e) {
                var t = this;
                this.$window.beWaitingRoomInitCompleted ? (log.debug("beWaitingRoomInitCompleted"), this.$window.beWaitingRoomInitCompleted(e)) : setTimeout(function() {
                    t.beWaitingRoomFeedbackCameraWork()
                }, 2e3)
            }, ExternalService.prototype.beWaitingRoomSelectVehicle = function(e, t, i) {
                if (this.$window.beWaitingRoomSelectVehicle) {
                    log.debug("beWaitingRoomSelectVehicle", JSON.stringify(i));
                    var n = inject_helper_1.getInjector().get("tuningShopService"),
                        r = n.createCorePaintData(i),
                        o = inject_helper_1.getInjector().get("numberPlateService");
                    if (r.plate = o.createPaintData(), log.debug("parameter : ", t, JSON.stringify(r)), !this.isEdgeBrowser()) return;
                    this.$window.beWaitingRoomSelectVehicle(t, e, r)
                }
            }, ExternalService.prototype.beWaitingRoomFocusVehicle = function(e) {
                var t = this;
                this.$window.beWaitingRoomFocusVehicle ? (log.debug("beWaitingRoomFocusVehicle(" + e + ")"), this.$window.beWaitingRoomFocusVehicle(e)) : setTimeout(function() {
                    t.beWaitingRoomFeedbackCameraWork()
                }, 2e3)
            }, ExternalService.prototype.beWaitingRoomUnspawnVehicle = function(e) {
                this.$window.beWaitingRoomUnspawnVehicle && (log.debug("beWaitingRoomUnspawnVehicle(" + e + ")"), this.$window.beWaitingRoomUnspawnVehicle(e))
            }, ExternalService.prototype.beWaitingRoomUnspawnAllVehicles = function() {
                this.$window.beWaitingRoomUnspawnAllVehicles && (log.debug("beWaitingRoomUnspawnAllVehicles"), this.$window.beWaitingRoomUnspawnAllVehicles())
            }, ExternalService.prototype.beWaitingRoomChangeVehicle = function(e) {
                this.$window.beWaitingRoomChangeVehicle && (log.debug("beWaitingRoomChangeVehicle(" + e + ")"), this.$window.beWaitingRoomChangeVehicle(e))
            }, ExternalService.prototype.beWaitingRoomRequestLeave = function() {
                var e = this;
                this.$window.beWaitingRoomRequestLeave ? (log.debug("beWaitingRoomRequestLeave"), this.$window.beWaitingRoomRequestLeave()) : setTimeout(function() {
                    e.beWaitingRoomFeedbackCameraWork()
                }, 2e3)
            }, ExternalService.prototype.beWaitingRoomFeedbackCameraWork = function() {
                this.$window.beWaitingRoomFeedbackCameraWork && (log.debug("beWaitingRoomFeedbackCameraWork"), this.$window.beWaitingRoomFeedbackCameraWork())
            }, ExternalService.prototype.beQuickFriendlyMatchChangeVehicle = function(e) {
                this.$window.beQuickFriendlyMatchChangeVehicle && (log.debug("beQuickFriendlyMatchChangeVehicle(" + e + ")"), this.$window.beQuickFriendlyMatchChangeVehicle(e))
            }, ExternalService.prototype.beFestivalShowChangeVehicleUi = function(e) {
                log.debug("beFestivalShowChangeVehicleUi(" + e + ")"), this.$window.beFestivalShowChangeVehicleUi && this.$window.beFestivalShowChangeVehicleUi(e)
            }, ExternalService.prototype.beSetVehicleUpgradeState = function(e) {
                var t = this;
                this.isEdgeBrowser() ? this.$window.beSetVehicleUpgradeState(e) : setTimeout(function() {
                    t.beWaitingRoomFeedbackCameraWork()
                }, 2e3)
            }, ExternalService.prototype.beSetEndpointIpAddress = function(e) {
                this.$window.beSetEndpointIpAddress && this.$window.beSetEndpointIpAddress(e)
            }, ExternalService.prototype.beLicenseStart = function(e) {
                this.debugCoreLevel = 3, this.$window.beLicenseStart && this.$window.beLicenseStart(this.toCoreMatchParam(e))
            }, ExternalService.prototype.beGetGamePadIsAvailable = function() {
                return !!this.$window.beGetGamePadIsAvailable && this.$window.beGetGamePadIsAvailable()
            }, ExternalService.prototype.beSetUiState = function(e) {
                if (this.$window.beSetUiState) return this.$window.beSetUiState(e)
            }, ExternalService.prototype.beSetUiSubState = function(subState) {
                for (var args = [], _i = 1; _i < arguments.length; _i++) args[_i - 1] = arguments[_i];
                if (this.$window.beSetUiSubState) {
                    var argsString = JSON.stringify([subState].concat(args));
                    return argsString = argsString.substr(1, argsString.length - 2), log.info("beSetUiSubState(" + argsString + ")"), eval("beSetUiSubState(" + argsString + ")")
                }
            }, ExternalService.prototype.beAntibotInitialize = function(e) {
                if (this.$window.beAntibotInitialize) return this.$window.beAntibotInitialize(e)
            }, ExternalService.prototype.beBGMPlayList = function(e) {
                this.$window.beBGMPlayList && this.$window.beBGMPlayList(e)
            }, ExternalService.prototype.beBGMStop = function(e) {
                if (this.$window.beBGMStop) return this.$window.beBGMStop(e)
            }, ExternalService.prototype.beBGMSetPause = function(e) {
                if (this.$window.beBGMSetPause) return this.$window.beBGMSetPause(e)
            }, ExternalService.prototype.beSetClientGameModeParameters = function(e) {
                if (this.$window.beSetClientGameModeParameters) return log.debug("beSetClientGameModeParameters " + JSON.stringify(e)), this.$window.beSetClientGameModeParameters(e)
            }, ExternalService.prototype.beAddDP = function(e) {
                if (this.$window.beAddDP) return log.debug("beAddDP : " + e), this.$window.beAddDP(e)
            }, ExternalService.prototype.beSetTrustedCookie = function(e, t, i) {
                if (this.$window.beSetTrustedCookie) {
                    var n = [e + "=" + t];
                    i && n.push("domain=" + i), this.$window.beSetTrustedCookie(n.join(";"))
                }
            }, ExternalService.prototype.beTuningShopSetCameraMode = function(e) {
                this.$window.beTuningShopSetCameraMode && (log.debug("beTuningShopSetCameraMode " + e), this.$window.beTuningShopSetCameraMode(e))
            }, ExternalService.prototype.beSetVehicleColor = function(e) {
                if (this.$window.beSetVehicleColor) {
                    var t = {
                        rgb: e
                    };
                    log.debug("beSetVehicleColor " + JSON.stringify(t)), this.$window.beSetVehicleColor(t)
                }
            }, ExternalService.prototype.beSetVehicleWheel = function(e) {
                this.$window.beSetVehicleWheel && (log.debug("beSetVehicleWheel " + e), this.$window.beSetVehicleWheel(e))
            }, ExternalService.prototype.beSetVehicleWrapping = function(e) {
                this.$window.beSetVehicleWrapping && (log.debug("beSetVehicleWrapping " + e), this.$window.beSetVehicleWrapping(e))
            }, ExternalService.prototype.beSetVehiclePlateID = function(e) {
                this.$window.beSetVehiclePlateID && (log.debug("beSetVehiclePlateID " + e), this.$window.beSetVehiclePlateID(e))
            }, ExternalService.prototype.beSetLicensePlateTextColor = function(e) {
                this.$window.beSetLicensePlateTextColor && (log.debug("beSetLicensePlateText :  " + e), this.$window.beSetLicensePlateTextColor(e))
            }, ExternalService.prototype.beSetLicensePlateText = function(e) {
                this.$window.beSetLicensePlateText && (log.debug("beSetLicensePlateText :  " + e), this.$window.beSetLicensePlateText(e))
            }, ExternalService.prototype.beSetLicensePlatePrefix = function(e) {
                this.$window.beSetLicensePlatePrefix && (log.debug("beSetLicensePlatePrefix :  " + e), this.$window.beSetLicensePlatePrefix(e))
            }, ExternalService.prototype.beSetDefaultLicense = function(e) {
                log.debug("beSetDefaultLicense :  " + e.prefix + " - " + e.plateNumber), this.$window.beSetDefaultLicensePlate && this.$window.beSetDefaultLicensePlate({
                    plate: e
                })
            }, ExternalService.prototype.beHUDToggleAutoUseItem = function(e) {
                this.$window.beHUDToggleAutoUseItem && (log.debug("beHUDToggleAutoUseItem: " + e), this.$window.beHUDToggleAutoUseItem())
            }, ExternalService.prototype.cheatHudStartGame = function() {
                if (!this.isEdgeBrowser()) {
                    log.info("cheatHudStartGame");
                    var e = util_2.store.getState().match,
                        t = e.match,
                        i = t.players.map(function(e, t) {
                            return {
                                id: e.id,
                                ratio: 0
                            }
                        }),
                        n = t.players.map(function(e) {
                            return e.id
                        });
                    this._coreEventEmitter.emit(core_event_1.CoreEvent.beHUDSetDistanceRatio, i), this._coreEventEmitter.emit(core_event_1.CoreEvent.beHUDSetLeaderboard, 1, n, [])
                }
            }, ExternalService.prototype.beNumberPlateSetCameraMode = function(e) {
                this.$window.beNumberPlateSetCameraMode && (log.debug("beNumberPlateSetCameraMode " + e), this.$window.beNumberPlateSetCameraMode(e))
            }, ExternalService.prototype.beNumberPlateSetVehicleBaseHeight = function(e) {
                this.$window.beNumberPlateSetVehicleBaseHeight && (log.debug("beNumberPlateSetVehicleBaseHeight " + e), this.$window.beNumberPlateSetVehicleBaseHeight(e))
            }, ExternalService.prototype.beSetSteeringTuning = function(e) {
                this.$window.beSetSteeringTuning && (log.debug("beSetSteeringTuning " + e), this.$window.beSetSteeringTuning(e))
            }, ExternalService.prototype.beRankedMatchChangeVehicle = function(e) {
                this.$window.beRankedMatchChangeVehicle && (log.debug("beRankedMatchChangeVehicle " + e), this.$window.beRankedMatchChangeVehicle(e))
            }, ExternalService.prototype.beExitMultiplayReward = function() {
                this.$window.beExitMultiplayReward && "tencent" === this.beGetConfig().publisher && (log.debug("beExitMultiplayReward"), this.$window.beExitMultiplayReward())
            }, ExternalService.prototype.beGetSSOShopUri = function(e) {
                if (this.$window.beGetSSOShopUri) {
                    var t = this.$window.beGetSSOShopUri(e);
                    if (log.debug("beGetSSOShopUri", t), _.isUndefined(t) || 0 !== t.result) return e;
                    return t.url
                }
                return e
            }, ExternalService.prototype.beOpenBrowserWithURL = function(e) {
                log.debug("open external browser", e), this.$window.beOpenBrowserWithURL ? this.$window.beOpenBrowserWithURL(e) : window.open(e)
            }, ExternalService.prototype.beUploadTimeTrialGhost = function(e) {
                this.$window.beUploadTimeTrialGhost && (log.debug("beUploadTimeTrialGhost", e), this.$window.beUploadTimeTrialGhost(e))
            }, ExternalService.prototype.beUnlockMission = function(e) {
                this.$window.beUnlockMission && e && (log.debug("beUnlockMission", e), this.$window.beUnlockMission(e))
            }, ExternalService.prototype.beDisableIME = function(e) {
                this.$window.beDisableIME && this.$window.beDisableIME(e)
            }, ExternalService.prototype.beConnectOpenworld = function(e) {
                var t = this;
                log.info("beConnectOpenworld " + JSON.stringify(e)), this.clearLevelLoading();
                var i = function(e) {
                    t.debugCoreLevel = 2, t.$window.beConnectOpenworld && t.$window.beConnectOpenworld(e)
                };
                this.useHttpDns() ? httpdns_1.httpdns(e.host).then(function(t) {
                    return i(tslib_1.__assign({}, e, {
                        host: t
                    }))
                }) : i(e)
            }, ExternalService.prototype.beLoadFreedrive = function(e) {
                log.info("beLoadFreedrive", e), this.clearLevelLoading(), this.debugCoreLevel = 1, this.$window.beLoadFreedrive && this.$window.beLoadFreedrive(e)
            }, Object.defineProperty(ExternalService.prototype, "debugCoreLevel", {
                get: function() {
                    if (!this.isEdgeBrowser()) {
                        var e = this.localStorageService.get("coreLevel");
                        return void 0 !== e ? e : 1
                    }
                },
                set: function(e) {
                    this.isEdgeBrowser() || this.localStorageService.set("coreLevel", e)
                },
                enumerable: !0,
                configurable: !0
            }), ExternalService.prototype.onGameStart = function() {
                this.localStorageService.set("beLevelBootedUp", !1), this.beSetRefreshToken(""), this.isEdgeBrowser() || this.localStorageService.remove("coreLevel")
            }, ExternalService.prototype.currentLevel = function() {
                var e = this.beGetCurrentLevel();
                if (e) {
                    var t = 3;
                    return /levels\/edge_lighthouse2/i.test(e) ? t = 1 : /levels\/hp2/i.test(e) && (t = 2), t
                }
                return this.debugCoreLevel
            }, ExternalService.prototype.beInitOpenworldSpot = function(e) {
                this.$window.beInitOpenworldSpot && this.$window.beInitOpenworldSpot(e)
            }, ExternalService.prototype.beInitOpenworldMission = function(e) {
                this.$window.beInitOpenworldMission && this.$window.beInitOpenworldMission(e)
            }, ExternalService.prototype.beFinishOpenworldMission = function(e) {
                this.$window.beFinishOpenworldMission && (log.debug("beFinishOpenworldMission", e), this.$window.beFinishOpenworldMission(e))
            }, ExternalService.prototype.beInitOpenworldPortal = function(e) {
                this.$window.beInitOpenworldPortal && this.$window.beInitOpenworldPortal(e)
            }, ExternalService.prototype.beShowOpenworldMap = function(e) {
                this.$window.beShowOpenworldMap && this.$window.beShowOpenworldMap(e)
            }, ExternalService.prototype.beOnOpenworldChat = function(e, t) {
                this.$window.beOnOpenworldChat && this.$window.beOnOpenworldChat(e, t)
            }, ExternalService.prototype.beOnUpdateNameTagInfo = function(e) {
                this.$window.beOnUpdateNameTagInfo && this.$window.beOnUpdateNameTagInfo(e)
            }, ExternalService.prototype.beHighlightMission = function(e) {
                this.$window.beHighlightMission && this.$window.beHighlightMission(e)
            }, ExternalService.prototype.beEnterWrappingMode = function() {
                this.$window.beEnterWrappingMode && this.$window.beEnterWrappingMode()
            }, ExternalService.prototype.beInitLimitedMission = function(e) {
                this.$window.beInitLimitedMission && this.$window.beInitLimitedMission(e)
            }, ExternalService.prototype.beUpdateLimitedMission = function(e) {
                this.$window.beUpdateLimitedMission && this.$window.beUpdateLimitedMission(e)
            }, ExternalService.prototype.beSetOpenworldBusyStatus = function(e) {
                this.$window.beSetOpenworldBusyStatus && this.$window.beSetOpenworldBusyStatus(e)
            }, ExternalService.prototype.beInitSandSDK = function(e, t, i, n, r) {
                log.info("beInitSandSDK ", e, t, i, n, r), this.$window.beInitSandSDK && this.$window.beInitSandSDK(e, t, i, n, r)
            }, ExternalService.prototype.beSetAppearanceEditing = function(e) {
                log.info("beSetAppearanceEditing ", e), this.$window.beInitSandSDK && this.$window.beSetAppearanceEditing(e)
            }, ExternalService
        }();
    ExternalService.$inject = ["$window", "localStorageService", "sessionService", "configLoader", "imeService"], exports.ExternalService = ExternalService;
    var MockConfiguration = function() {
        function e() {
            this.configs = {}
        }
        return e.prototype.getResolutions = function() {
            return ["1920X1200", "1920X1080", "1680X1050", "1600X1200", "1600X1024", "1600X900", "1366X768", "1360X768", "1280X960", "1280X800", "1280X720", "1152X864", "1024X768"]
        }, e.prototype.get = function(e) {
            var t = this.configs[e];
            if (t) return t;
            switch (e) {
                case "graphic":
                    return tslib_1.__assign({}, this.getGraphicFeature(2), {
                        width: 1920,
                        height: 1080,
                        fullscreen: 0,
                        graphic: 0,
                        maxGraphic: 4,
                        clientWidth: 1920,
                        clientHeight: 1200,
                        preventBorderless: !1,
                        preventFullscreen: !1,
                        frameLimitMode: 0,
                        frameLimit: 30
                    });
                case "inputkey":
                    return {
                        throttle: [38, 21], brake: [40, 20], secondBrake: [90, 20], steeringLeft: [37, 0], steeringRight: [39, 0], nitro: [32, 12], handBrake: [16, 14], useItem: [17, 13], useItem2: [18, 15], reset: [70, 19], horn: [83, 18], rearView: [87, 0], leftView: [69, 0], rightView: [81, 0], toggleCamera: [67, 9], toggleMinimap: [88, 23]
                    };
                case "sound":
                    return {
                        disableBackground: !1, masterVolume: 80, musicVolume: 80, effectVolume: 80, uiVolume: 80
                    };
                case "ingame":
                    return {
                        flevron: !0, chatOn: !0, keyGuideOn: !0, actionFeedbackOn: !0, roomMirrorOff: !1, minimapPosition: 0, useAbs: !1, useEsc: !1, useHcs: !1
                    };
                default:
                    return {}
            }
        }, e.prototype.getGraphicFeature = function(e) {
            switch (e) {
                case 0:
                    return {
                        ambientOcclusion: 0, shadowQuality: 1, reflectQuality: 1, effectQuality: 1, motionBlur: !1, textureQuality: 1, meshQuality: 1, terrainQuality: 1, undergrowthQuality: 1, antialiasing: 2, anisotropicFilter: 2, transparentFogging: !1
                    };
                case 1:
                    return {
                        ambientOcclusion: 0, shadowQuality: 0, reflectQuality: 0, effectQuality: 0, motionBlur: !1, textureQuality: 0, meshQuality: 0, terrainQuality: 0, undergrowthQuality: 0, antialiasing: 1, anisotropicFilter: 1, transparentFogging: !1
                    };
                case 2:
                    return {
                        ambientOcclusion: 0, shadowQuality: 1, reflectQuality: 1, effectQuality: 1, motionBlur: !1, textureQuality: 1, meshQuality: 1, terrainQuality: 1, undergrowthQuality: 1, antialiasing: 2, anisotropicFilter: 2, transparentFogging: !1
                    };
                case 3:
                    return {
                        ambientOcclusion: 1, shadowQuality: 2, reflectQuality: 2, effectQuality: 2, motionBlur: !0, textureQuality: 2, meshQuality: 2, terrainQuality: 2, undergrowthQuality: 2, antialiasing: 3, anisotropicFilter: 3, transparentFogging: !0
                    };
                case 4:
                    return {
                        ambientOcclusion: 2, shadowQuality: 3, reflectQuality: 3, effectQuality: 3, motionBlur: !0, textureQuality: 3, meshQuality: 3, terrainQuality: 3, undergrowthQuality: 3, antialiasing: 4, anisotropicFilter: 4, transparentFogging: !0
                    }
            }
        }, e.prototype.set = function(e, t) {
            this.configs[e] = t
        }, e
    }();
    angular.module("edge.components").factory("externalService", util_1.default.generateService(ExternalService))
}, , function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "video-guide.setData",
            data: e
        }
    }

    function r(e) {
        return function(t, i) {
            i().popup.name || t({
                type: "video-guide.show",
                code: e
            })
        }
    }

    function o() {
        return {
            type: "video-guide.hide"
        }
    }

    function a(e) {
        return {
            type: "video-guide.update",
            code: e
        }
    }

    function s() {
        return {
            type: "video-guide.clear"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.setData = n, t.show = r, t.hide = o, t.update = a, t.clearMenu = s
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "parts-management.showManagement",
            partsType: e
        }
    }

    function r() {
        return {
            type: "parts-management.hideManagement"
        }
    }

    function o(e) {
        return {
            type: "parts-management.showAttachmentPopup",
            code: e
        }
    }

    function a() {
        return {
            type: "parts-management.hideAttachmentPopup"
        }
    }

    function s() {
        return {
            type: "parts-management.resetAttachmentPopup"
        }
    }

    function c(e, t) {
        return {
            type: "parts-management.attach",
            before: e,
            after: t
        }
    }

    function d(e) {
        return {
            type: "parts-management.showDetachmentPopup",
            code: e
        }
    }

    function l() {
        return {
            type: "parts-management.hideDetachmentPopup"
        }
    }

    function u() {
        return {
            type: "parts-management.resetDetachmentPopup"
        }
    }

    function p(e, t) {
        return {
            type: "parts-management.detach",
            before: e,
            after: t
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.showManagement = n, t.hideManagement = r, t.showAttachmentPopup = o, t.hideAttachmentPopup = a, t.resetAttachmentPopup = s, t.attach = c, t.showDetachmentPopup = d, t.hideDetachmentPopup = l, t.resetDetachmentPopup = u, t.detach = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4);
    t.PursuitTechMap = {
        2: "emp",
        5: "shockRam",
        6: "spikestrip",
        8: "turbo",
        9: "rushTurbo",
        10: "powerTurbo",
        12: "shield",
        13: "electrostaticField",
        14: "shockWave",
        15: "infiniteNitro"
    };
    var r = function() {
        function e(e, t, i, n, r) {
            var o = this;
            this.staticdata = e, this.externalService = t, this.featureSetService = i, this.$filter = n, this.localStorageService = r, this.pursuitAiGroup = {}, this.staticdata.fetch().then(function() {
                o.gameModeInfo = _.keyBy(o.staticdata.gameModeData.gameModeInfo, "gameMode"), _.each(o.staticdata.aiDb.aiGroupData[1], function(e) {
                    o.pursuitAiGroup[e] = o.staticdata.aiDb.aiData[e]
                })
            }), this.pursuitItems = this.staticdata.pursuitData.pursuitItems
        }
        return e.prototype.getGameModeInfo = function(e) {
            return this.gameModeInfo[e]
        }, e.prototype.getCoreModeFromGameMode = function(e) {
            return this.gameModeInfo[e].coreMode
        }, e.prototype.getPeerModeFromGameMode = function(e) {
            return this.gameModeInfo[e].peerMode
        }, e.prototype.getGameModeLocaleString = function(e) {
            return "GAMEROOM_MODE_" + e
        }, e.prototype.getRoomCoreModeLocaleString = function(e) {
            return "GAMEROOM_MODE_" + this.gameModeInfo[e].coreMode
        }, e.prototype.getRoomPeerTypeLocaleString = function(e) {
            return "GAMEROOM_" + this.gameModeInfo[e].peerMode + "_GAME"
        }, e.prototype.getModeIconLabel = function(e) {
            var t = this.gameModeInfo[e].coreMode,
                i = this.gameModeInfo[e].peerMode;
            return t.toLowerCase() + ("TEAM" === i ? "-team" : "")
        }, e.prototype.getTrackListTitleL10nString = function(e) {
            var t = this.$filter("translate"),
                i = t("GAMEROOM_TRACK_SELECTION"),
                n = "";
            return "DRIFTINDIVIDUAL" !== e && "FOXHUNTINGINDIVIDUAL" !== e || (n = " " + t("WAITINGROOM_TRACKSELECT_" + this.getCoreModeFromGameMode(e))), "" + i + n
        }, e.prototype.isIndividualMode = function(e) {
            return "INDIVIDUAL" === this.gameModeInfo[e].peerMode
        }, e.prototype.isTeamMode = function(e) {
            return "TEAM" === this.gameModeInfo[e].peerMode
        }, e.prototype.getGameModeList = function(e) {
            var t, i = this;
            switch (e) {
                case "room":
                    t = this.staticdata.gameModeData.roomListOrder;
                    break;
                default:
                    t = this.staticdata.gameModeData.quickMatchOrder
            }
            return t.filter(function(e) {
                return !e.clientFeatureName || i.featureSetService.isEnabled(e.clientFeatureName)
            })
        }, e.prototype.getGameModeDesc = function(e, t) {
            switch (e) {
                case "quick":
                    switch (t) {
                        case "SPEEDTEAM":
                            return "FRIENDLYMATCH_MODESELECT_" + t + "MODE_DESC";
                        default:
                            var i = this.getCoreModeFromGameMode(t);
                            return "FRIENDLYMATCH_MODESELECT_" + i + "MODE_DESC"
                    }
                    default:
                        var i = this.getCoreModeFromGameMode(t);
                        return "FRIENDLYMATCH_MODESELECT_" + i + "MODE_DESC"
            }
        }, e.prototype.getPursuitAiGroup = function() {
            return this.pursuitAiGroup
        }, e.prototype.getPursuitItemsByGroup = function() {
            return _.groupBy(this.pursuitItems, "group")
        }, e.prototype.getLastPursuitTechs = function() {
            var e = this.getPursuitItemsByGroup(),
                t = this.localStorageService.get("pursuit.item1"),
                i = this.localStorageService.get("pursuit.item2");
            return t && _.some(e[1], function(e) {
                return e.code === t
            }) || (t = _.first(e[1]).code), i && _.some(e[2], function(e) {
                return e.code === i
            }) || (i = _.first(e[2]).code), [t, i]
        }, e.prototype.storeLastPursuitTechs = function(e, t) {
            this.localStorageService.set("pursuit.item1", e), this.localStorageService.set("pursuit.item2", t)
        }, e
    }();
    r.$inject = ["staticdataLoaderService", "externalService", "featureSetService", "$filter", "localStorageService"], r.FoxhuntingMinimumLap = 3, t.GameModeService = r, angular.module("edge.components").factory("gameModeService", n.default.generateService(r))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return e = e || 0, {
            type: "clan.changeClanCount",
            clanCount: e
        }
    }

    function r(e) {
        return {
            type: "clan.changeClanBaseInformation",
            info: e
        }
    }

    function o(e) {
        return {
            type: "clan.changeSearchOptions",
            searchOpts: e
        }
    }

    function a(e) {
        return e = e || [], {
            type: "clan.refreshSearchResult",
            clanList: e
        }
    }

    function s(e) {
        return {
            type: "clan.selectAClan",
            clanInfo: e
        }
    }

    function c(e) {
        return {
            type: "clan.changeAppliedClan",
            appliedClan: e
        }
    }

    function d(e) {
        return {
            type: "clan.changeMyClanInformation",
            myClanInfo: e
        }
    }

    function l(e) {
        return {
            type: "clan.refreshClanMember",
            member: e
        }
    }

    function u(e) {
        return e = e || [], {
            type: "clan.refreshClanMembers",
            members: e
        }
    }

    function p(e) {
        return e = e || [], {
            type: "clan.removeClanMembers",
            memberIDs: e
        }
    }

    function h(e) {
        return e = e || [], {
            type: "clan.addApplicants",
            applicants: e
        }
    }

    function f(e) {
        return {
            type: "clan.removeApplicant",
            applicantID: e
        }
    }

    function v(e) {
        return e = e || [], {
            type: "clan.refreshApplicants",
            applicants: e
        }
    }

    function m(e) {
        return {
            type: "clan.changeNotice",
            notice: e
        }
    }

    function g(e) {
        return {
            type: "clan.changeIntroduction",
            introduction: e
        }
    }

    function y(e) {
        return {
            type: "clan.setRecruiting",
            recruiting: e
        }
    }

    function S(e) {
        return {
            type: "clan.setCensorship",
            censorship: e
        }
    }

    function _(e) {
        return {
            type: "clan.changeEmblem",
            emblem: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.changeClanCount = n, t.changeClanBaseInformation = r, t.changeSearchOptions = o, t.refreshSearchResult = a, t.selectAClan = s, t.changeAppliedClan = c, t.changeMyClanInformation = d, t.refreshClanMember = l, t.refreshClanMembers = u, t.removeClanMembers = p, t.addApplicants = h, t.removeApplicant = f, t.refreshApplicants = v, t.changeNotice = m, t.changeIntroduction = g, t.setRecruiting = y, t.setCensorship = S, t.changeEmblem = _
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(7),
        o = i(6),
        a = i(4),
        s = i(10),
        c = i(3),
        d = i(65),
        l = i(5),
        u = i(12),
        p = i(12),
        h = i(82);
    ! function(e) {
        e[e.TOBEOPEN = 0] = "TOBEOPEN", e[e.UPCOMING = 1] = "UPCOMING", e[e.PROCEED = 2] = "PROCEED"
    }(n = t.FestivalStatus || (t.FestivalStatus = {}));
    var f;
    ! function(e) {
        e[e.VEHICLE = 0] = "VEHICLE", e[e.OVR = 1] = "OVR", e[e.GRADE = 2] = "GRADE", e[e.ALLOWED = 3] = "ALLOWED"
    }(f = t.FestivalRestriction || (t.FestivalRestriction = {}));
    var v = function() {
        function e(t, i, n, r, o, a, s, c) {
            var d = this;
            this.$filter = t, this.stateService = i, this.serverTimeService = n, this.notifierService = r, this.pushService = o, this.festivalMatchService = a, this.popupService = s, this.gameModeService = c, this.isRewardChecking = !1, this.cancelForcefully = e.prototype.onCancel, this.pushService.subscribeResource(/\/festivals\/(.*)\/created/, function(e) {
                return d.joinLobby(e[1])
            })
        }
        return e.prototype.fetch = function() {
            return o.all([this.fetchFestival(), this.fetchFestivalPlayer()])
        }, e.prototype.fetchFestival = function() {
            var e = this;
            return s.request("GET", "festivals").then(function(t) {
                c.store.dispatch(d.fetchFestivals(t)), e.initScheduler()
            })
        }, e.prototype.fetchFestivalPlayer = function() {
            var e = c.store.getState().player.id;
            return s.request("GET", "festivals/players/" + e).then(function(e) {
                c.store.dispatch(d.fetchFestivalPlayers(e))
            })
        }, e.prototype.reqMatchmaking = function(e, t, i) {
            var n = this;
            r.debug("festivals/matchmaking {fid:" + e + ", miniId:" + t + ", vid:" + i);
            var o = this.getPursuitItemsParam();
            return s.request("POST", "festivals/matchmaking", {
                fid: e,
                miniId: t,
                vid: i,
                pursuitItemsParam: o
            }).then(function() {
                return n.festivalMatchService.init()
            })
        }, e.prototype.getPursuitItemsParam = function() {
            var e = this.gameModeService.getLastPursuitTechs();
            return {
                item1: e[0],
                item2: e[1]
            }
        }, e.prototype.cancelMatchMaking = function() {
            var e = this;
            return s.request("DELETE", "festivals/matchmaking").then(function(t) {
                if (!t.result) throw new Error("Resource not found");
                e.onCancel()
            })
        }, e.prototype.quitGame = function(e) {
            var t = c.store.getState().player.id;
            return s.request("DELETE", "festivals/players/" + t, {
                lobbyId: e
            })
        }, e.prototype.getFestivalReward = function(e) {
            return s.request("POST", "festivals/" + e + "/@rewards")
        }, e.prototype.reqDevMatch = function(e, t, i, n) {
            r.debug("*****[service] request DevOnly matchmaking {fid:" + e + ", miniId:" + t + ", vid:" + i + ", gameMode:" + n);
            var o = this.getPursuitItemsParam();
            return s.request("POST", "devonly/festivals/start/match", {
                fid: e,
                miniId: t,
                vid: i,
                gameMode: n,
                pursuitItemsParam: o
            })
        }, Object.defineProperty(e.prototype, "festivals", {
            get: function() {
                return c.store.getState().festival.data.festivals
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "selectedFestival", {
            get: function() {
                return this.getFestival(c.store.getState().festival.view.festivalId)
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "festivalPlayers", {
            get: function() {
                return c.store.getState().festival.data.festivalPlayers
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.getFestival = function(e) {
            return _.find(this.festivals, function(t) {
                return t.id === e
            })
        }, e.prototype.getViewFestivals = function(e) {
            var t = this;
            if (void 0 === e && (e = !1), e || _.isUndefined(this.viewFestivals)) {
                var i = this.serverTime;
                this.viewFestivals = _.filter(this.festivals, function(e) {
                    var t = l(e.view.displayFrom),
                        n = l(e.endAt),
                        r = i.isBetween(t, n),
                        o = e.miniFestivals.length > 0;
                    return r && o
                }), this.viewFestivals.sort(function(e, n) {
                    if (e.view.displayOrder !== n.view.displayOrder) return e.view.displayOrder - n.view.displayOrder;
                    var r = t.getCurrentMiniFestival(e.id),
                        o = t.getCurrentMiniFestival(n.id),
                        a = l(r.endAt),
                        s = l(o.endAt),
                        c = i.isBefore(a),
                        d = i.isBefore(s);
                    return c !== d ? c && !d ? -1 : 1 : a.isBefore(s) ? -1 : 1
                })
            }
            return this.viewFestivals.slice(0, 3)
        }, e.prototype.getMiniFestival = function(e, t) {
            var i = this.getFestival(e);
            return _.find(i.miniFestivals, function(e) {
                return e.id === t
            })
        }, e.prototype.getCurrentMiniFestival = function(e, t) {
            void 0 === t && (t = !1);
            var i = this.getFestival(e);
            if (i) {
                var n = this.serverTime,
                    r = _.find(i.miniFestivals, function(e) {
                        var t = l(e.endAt);
                        return n.isBefore(t)
                    });
                return r || (r = i.miniFestivals[i.miniFestivals.length - 1]), t && (this.selectedMiniFestival = r), r
            }
        }, e.prototype.getFestivalStatus = function(e, t) {
            var i = this.getFestival(e),
                r = t ? this.getMiniFestival(e, t) : this.getCurrentMiniFestival(e),
                o = this.serverTime,
                a = l(i.startAt),
                s = l(i.endAt),
                c = n.TOBEOPEN;
            return o.isBetween(a, s) && (c = n.UPCOMING), r && l(r.startAt).isSameOrBefore(o) && l(r.endAt).isAfter(o) && (c = n.PROCEED), c
        }, e.prototype.checkRestriction = function(e, t) {
            var i = (this.getFestival(e), t ? this.getMiniFestival(e, t) : this.getCurrentMiniFestival(e)),
                n = u.getRecentVehicle();
            return this.checkVehicleRestriction(i, n)
        }, e.prototype.checkVehicleRestriction = function(e, t) {
            return _.some(e.conditions.vcodes, function(e) {
                return e === t.code
            }) ? _.inRange(t.ovr, e.conditions.minOvr || h.MinOvr, (e.conditions.maxOvr || h.MaxOvr) + 1) ? _.inRange(t.grade, e.conditions.minGrade || 0, (e.conditions.maxGrade || h.MaxGrade) + 1) ? f.ALLOWED : f.GRADE : f.OVR : f.VEHICLE
        }, e.prototype.getPlayableVehicles = function(e, t) {
            var i = this,
                n = t ? this.getMiniFestival(e, t) : this.getCurrentMiniFestival(e);
            return _.filter(p.getVehicleState().vehicles, function(e) {
                return i.checkVehicleRestriction(n, e) === f.ALLOWED
            })
        }, e.prototype.getFestivalPlayer = function(e) {
            return _.find(this.festivalPlayers, function(t) {
                return t.fid === e
            })
        }, e.prototype.getMiniFestivalPlayer = function(e, t) {
            var i = this.getFestivalPlayer(e);
            if (i) return _.find(i.miniFestivals, function(e) {
                return e.miniId === t
            })
        }, e.prototype.getFestivalFP = function(e) {
            var t = this.getFestivalPlayer(e);
            return t ? _.chain(t.miniFestivals).map(function(e) {
                return e.point
            }).sum().value() : 0
        }, e.prototype.checkRewards = function(e) {
            var t = this;
            r.info("Check Festival Rewards of " + (e || " All Rewards"));
            var i = _.filter(this.festivals, function(i) {
                var n = i.id;
                if (e && n !== e) return !1;
                if (i.rewardTerminateAt) {
                    var r = l(i.rewardTerminateAt);
                    if (t.serverTime.isSameOrAfter(r)) return !1
                }
                var o = t.getFestivalPlayer(n);
                if (!o) return !1;
                var a = _.chain(o.miniFestivals).map(function(e) {
                        return e.point
                    }).sum().value(),
                    s = _.some(i.rewardSteps, function(e, t) {
                        return !(t <= o.rewardStep) && !(e.point > a)
                    }),
                    c = _.some(i.miniFestivals, function(e) {
                        var i = e.id,
                            r = t.getMiniFestivalPlayer(n, i);
                        return _.some(e.rewardSteps, function(e, t) {
                            return !!r && (!(t <= r.rewardStep) && !(e.point > r.point))
                        })
                    });
                return s || c
            });
            return new o(function(e) {
                if (0 === i.length) return void r.info(">> No festival rewards to get. Check request is ignored.");
                o.mapSeries(i, function(e) {
                    return t.getFestivalReward(e.id)
                }).then(function(i) {
                    0 !== i.length && t.fetchFestivalPlayer().then(function() {
                        e(_.flatten(i))
                    })
                })
            })
        }, e.prototype.checkRewardFreedrive = function() {
            var e = this;
            this.checkRewards().then(function(t) {
                if (t && 0 !== t.length) {
                    var i = e.$filter("translate")("SYSTEMTRAY_FESTIVAL_TITLE"),
                        n = e.$filter("translate")("SYSTEMTRAY_FESTIVAL_DESC");
                    e.notifierService.addLast(i, n, "root.menu.Inbox")
                }
            })
        }, e.prototype.checkRewardLobby = function(e) {
            var t = this;
            this.checkRewards(e).then(function(i) {
                if (i && 0 !== i.length) {
                    var n = t.getFestival(e),
                        r = t.getCurrentMiniFestival(e),
                        o = t.$filter("translate");
                    _.forEach(i, function(i) {
                        var a = "",
                            s = 0;
                        i.id === e ? (s = n.rewardSteps[i.step].point, a = t.$filter("template")({
                            goalamount: s
                        }, "FESTIVAL_REWARD_POPUP_DESC3")) : (s = r.rewardSteps[i.step].point, a = t.$filter("template")({
                            amount: s
                        }, "FESTIVAL_REWARD_POPUP_DESC1")), _.forEach(i.rewards, function(e) {
                            t.popupService.draw("ItemIconConfirmPopup", {
                                title: "FESTIVAL_REWARD_POPUP_TITLE",
                                desc: {
                                    top: a,
                                    bottom: o("FESTIVAL_REWARD_POPUP_DESC2")
                                },
                                itemCardProps: {
                                    info: {
                                        type: e.type,
                                        code: e.code,
                                        img: t.$filter("itemCardImg")(e.type, e.code),
                                        count: e.count,
                                        fallbackImg: void 0
                                    },
                                    mouseDisabled: !0
                                },
                                buttons: [{
                                    type: "confirm",
                                    name: "FESTIVAL_REWARD_POPUP_CONFIRM_BUTTON",
                                    onClick: function() {
                                        return t.popupService.closePopup()
                                    }
                                }, {
                                    type: "cancel",
                                    name: "MINIFESTIVAL_REWARD_POPUP_INBOX_BURTTON",
                                    onClick: function() {
                                        t.popupService.closePopup().then(function() {
                                            return t.stateService.go("root.menu.Inbox")
                                        })
                                    }
                                }],
                                isInvertTwoButton: !0
                            })
                        })
                    })
                }
            })
        }, e.prototype.confirmCancelMatch = function() {
            var e = this;
            return new o(function(t, i) {
                e.popupService.draw("ConfirmCancelPopup", {
                    title: "MINIFESTIVAL_MATCH_CANCEL_EXIT",
                    description: "MINIFESTIVAL_MATCH_CANCEL_EXIT_DESC",
                    confirm: function() {
                        e.cancelMatchMaking().then(function() {
                            return t(!0)
                        }).catch(function(e) {
                            return i(e)
                        })
                    },
                    cancel: function() {
                        return t(!1)
                    }
                }), setTimeout(function() {
                    return $("#edge-ui").removeClass("prevent-click")
                })
            })
        }, e.prototype.onCancel = function() {
            this.festivalMatchService.clearMatchState(), this.festivalMatchService.destroy()
        }, e.prototype.joinLobby = function(e) {
            r.debug("*************** joinLobby : ", e), this.festivalMatchService.setLobbyId(e)
        }, e.prototype.exitLobby = function() {
            return r.debug("*************** exitLobby"), this.onCancel(), o.resolve()
        }, Object.defineProperty(e.prototype, "serverTime", {
            get: function() {
                return l(this.serverTimeService.time)
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.initScheduler = function() {
            var e = this;
            if (this.clearScheduler(), 0 !== this.festivals.length) {
                var t = this.serverTime,
                    i = function(i) {
                        var n = l(i);
                        n.isAfter(t) && e.schedulerQueue.push(n.valueOf())
                    };
                _.forEach(this.festivals, function(e) {
                    i(e.view.displayFrom), i(e.startAt), i(e.endAt), _.forEach(e.miniFestivals, function(e) {
                        i(e.startAt), i(e.endAt)
                    })
                }), this.schedulerQueue = _.sortBy(this.schedulerQueue), this.schedulerQueue = _.sortedUniq(this.schedulerQueue), this.runScheduler()
            }
        }, e.prototype.runScheduler = function() {
            var e = this;
            if (0 === this.schedulerQueue.length) return void this.clearScheduler();
            var t = l(this.schedulerQueue.shift()),
                i = t.diff(this.serverTime) + 1e3;
            this.schedulerTimer = setTimeout(function() {
                c.store.dispatch(d.refreshView()), e.runScheduler()
            }, i)
        }, e.prototype.clearScheduler = function() {
            this.schedulerTimer && clearTimeout(this.schedulerTimer), this.schedulerQueue = []
        }, e.prototype.setupRewardGauge = function(e, t, i, n) {
            var r = e.$(".id-gauge"),
                o = t === n ? 0 : (Math.min(i, n) - t) / (n - t);
            r.regX = 0, r.scaleXMultiplier = o;
            var a = e.$(".id-PIN");
            a.x = r.width * o - 70, a.visible = 0 !== o
        }, e.prototype.selectFestivalIfNeeded = function(e) {
            if (e) {
                e !== c.store.getState().festival.view.festivalId && c.store.dispatch(d.selectFestival(e))
            }
        }, e
    }();
    v.$inject = ["$filter", "stateService", "serverTimeService", "notifierService", "pushService", "festivalMatchService", "popupService", "gameModeService"], t.FestivalService = v, angular.module("edge.components").factory("festivalService", a.default.generateService(v))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(15);
    ! function(e) {
        e[e.easy = 2] = "easy", e[e.normal = 3] = "normal", e[e.hard = 4] = "hard"
    }(t.Difficulty || (t.Difficulty = {}));
    ! function(e) {
        e[e.RACE = 0] = "RACE", e[e.TIMEATTACK = 1] = "TIMEATTACK", e[e.MULTIRACE = 2] = "MULTIRACE"
    }(t.GameMode || (t.GameMode = {})), t.SpotType = n.Openworld.SpotEnum;
    ! function(e) {
        e[e.empty = -1] = "empty", e[e.retire = 0] = "retire", e[e.bronze = 1] = "bronze", e[e.silver = 2] = "silver", e[e.gold = 3] = "gold"
    }(t.Medal || (t.Medal = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(9),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.isVisible = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-wrongWay .id-titleLabel", "BEPLAY_WRONGWAY")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.addManagedListener(this.externalService, o.default.beShowWrongWayDrivingAlert, function(t) {
                    e.isVisible !== t && (e.gotoAndPlay(".id-wrongWay", t ? "in" : "out"), e.isVisible = t)
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("externalService")], a.prototype, "externalService", void 0), t.HudWrongWaySignalBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(8),
        o = i(1),
        a = i(29),
        s = i(3),
        c = i(286),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                this.controller = this.externalService.beGetGamePadIsAvailable() ? "gamepad" : "keyboard"
            }, t.prototype.onAddedToScene = function(e) {
                this.visible(this.face, this.props.showAlways || this.isShowGuide(e)), this.hide()
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    configuration: e.configuration
                }
            }, t.prototype.update = function(e) {
                !this.props.showAlways && this.isChangedShowGuide(e) && this.visible(this.face, this.isShowGuide(e)), this.setGuideKey()
            }, t.prototype.isChangedShowGuide = function(e) {
                return _.get(this.reduxProps, "configuration.configs.ingame.applied.keyGuideOn", !0) !== _.get(e, "configuration.configs.ingame.applied.keyGuideOn", !0)
            }, t.prototype.isShowGuide = function(e) {
                return _.get(e || this.reduxProps, "configuration.configs.ingame.applied.keyGuideOn", !0)
            }, t.prototype.hide = function() {
                "hide" !== this.currentState && (this.currentState = "hide", this.clearTimer(), this.gotoAndPlay(this.face, this.controller + "_hide"))
            }, t.prototype.guide = function() {
                "in" !== this.currentState && (this.currentState = "in", this.clearTimer(), this.gotoAndPlay(this.face, this.controller + "_in"), this.setGuideKey())
            }, t.prototype.use = function() {
                if ("use" !== this.currentState) {
                    this.currentState = "use", this.clearTimer(), this.gotoAndPlay(this.face, this.controller + "_use");
                    var e = this.props,
                        t = e.notifySuccess,
                        i = e.condNextGuide;
                    t && this.translateAll(".id-successLabel", this.getNotifySuccess()), i && this.next(i)
                }
            }, t.prototype.disable = function() {
                if ("out" !== this.currentState) {
                    this.currentState = "out", this.clearTimer(), this.gotoAndPlay(this.face, this.controller + "_out");
                    var e = this.props.condNextGuide;
                    e && this.next(e)
                }
            }, t.prototype.waitUse = function(e) {
                var t = this;
                this.clearTimer(), this.timerWait = setTimeout(function() {
                    "use" !== t.currentState && t.disable(), t.clearTimer()
                }, e)
            }, t.prototype.clearTimer = function() {
                this.timerWait && clearTimeout(this.timerWait), this.timerWait = void 0
            }, t.prototype.next = function(e) {
                var t = this;
                this.once(this.face, r.EventEx.STOP, function() {
                    e() ? t.guide() : t.hide()
                })
            }, t.prototype.getNotifySuccess = function() {
                var e = ["USERGUIDE_COMPLIMENT_GOOD", "USERGUIDE_COMPLIMENT_PERFECT", "USERGUIDE_COMPLIMENT_NICE"];
                return e[_.random(0, e.length - 1)]
            }, t.prototype.setGuideKey = function() {
                var e = this.getKeyCode(),
                    t = this.getKeyName(e);
                if ("keyboard" === this.controller) {
                    -1 !== [37, 38, 39, 40].indexOf(e) ? this.gotoAndPlayAll(".id-guideKey", t.toLowerCase()) : (this.gotoAndPlayAll(".id-guideKey", "default"), t = this.getLocalizedKeyName(t), this.translateAll(".id-guideKey", t))
                } else t = c.InputKeyConfigService.checkFixedPadKeys(this.props.inputKey, e), this.gotoAndStopAll(".id-guidePad", t.toLowerCase())
            }, t.prototype.getKeyCode = function() {
                var e = s.store.getState().configuration.configs.inputkey;
                if (!e) return 0;
                var t = e.applied[this.props.inputKey];
                return t ? t["keyboard" === this.controller ? 0 : 1] : 0
            }, t.prototype.getKeyName = function(e) {
                return "keyboard" === this.controller ? a.KeyboardMap.getKeyName(e) : a.KeyboardMap.getPadKeyName(e)
            }, t.prototype.getLocalizedKeyName = function(e) {
                this.sessionService.config.locale;
                return -1 !== ["SPACE"].indexOf(e.toUpperCase()) ? this.$filter("translate")("USERGUIDE_KEY_" + e.toUpperCase()) : e
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([o.autowired("sessionService")], d.prototype, "sessionService", void 0), n.__decorate([o.autowired("externalService")], d.prototype, "externalService", void 0), t.HudActionGuideBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(9),
        a = i(37),
        s = i(1),
        c = i(17),
        d = i(163),
        l = i(3),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-recountName .comp-TextField", "BEPLAY_MAIN_RACEFINISH")
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".CONTAINER");
                if (this.hudService.once("intro", function() {
                        return e.gotoAndPlay(t, "intro")
                    }), this.setTrackInfo(), "timetrial" === d.getFeatureType()) return void(t.$(".RIGHTTOP .id-currentRank").visible = !1);
                var i = t.$(".RIGHTTOP .id-currentRank .id-rankLabel"),
                    n = t.$(".RIGHTTOP .id-currentRank .id-suffixLabel");
                this.addManagedListener(this.externalService, o.default.beHUDSetLeaderboard, function(t, r, o) {
                    i.text = t.toString(), n.text = e.$filter("ordinalSuffix")(t).toUpperCase()
                });
                var s = t.$(".RIGHTTOP .id-retireCount"),
                    c = function(t) {
                        void 0 === t && (t = 0), t ? (s.visible ? e.gotoAndPlay(s, "loopCount") : (s.visible = !0, e.gotoAndPlay(s, "start")), s.$(".id-recountNum .id-textField").text = t.toString(), 15 === t && e.audioService.get(a.FxAudioCode.EndCountdown_15).play()) : (s.visible = !1, s.halt())
                    };
                c(), this.addManagedListener(this.externalService, o.default.beHUDStartChecker, function(e) {
                    r.debug("## Start Checker Sec --\x3e ", e), c(e)
                })
            }, t.prototype.setTrackInfo = function() {
                var e, t = l.store.getState(),
                    i = t.match.match,
                    n = t.timetrial,
                    r = this.staticdata.trackData;
                if (_.isEmpty(i)) {
                    if ("timetrial" !== d.getFeatureType()) return;
                    e = n.selectedTrack
                } else e = i.trackCode;
                var o = r.getTrack(e);
                this.translate(".RIGHTTOP .id-trackName", o.nameCode)
            }, t
        }(c.StageBinder);
    n.__decorate([s.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([s.autowired("hudService")], u.prototype, "hudService", void 0), n.__decorate([s.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([s.autowired("audioService")], u.prototype, "audioService", void 0), n.__decorate([s.autowired("staticdataLoaderService")], u.prototype, "staticdata", void 0), t.HudRankingBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(3),
        a = i(1),
        s = i(17),
        c = i(9),
        d = i(189),
        l = i(37),
        u = i(120),
        p = i(311),
        h = i(1235),
        f = i(214),
        v = {
            green: {
                brightness: 0,
                contrast: 0,
                saturation: 0,
                hue: -34
            }
        },
        m = {
            2: {
                code: 2,
                name: "SHOCKRAM",
                label: "PURSUIT_NAME_SHOCKRAM",
                filter: v.green
            },
            8: {
                code: 8,
                name: "TURBO",
                label: "PURSUIT_NAME_TURBO",
                filter: v.green
            }
        },
        g = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.items = [], t.slotCount = 2, t.isTurbo = !1, t.itemCode = 8, t.isManagerMode = !1, t.isAutoUseItemOn = !0, t
            }
            return n.__extends(t, e), t.prototype.initItemMap = function() {
                var e = this;
                _.each(m, function(t) {
                    if (t.code === e.itemCode) {
                        var i = e.$filter("translate")(t.label);
                        e.bindTextAll(".id-ITEMNAME_TEXTFIELD .id-textfield", i), e.bindText(".id-itemLabel", i)
                    } else e.face.$$(".id-" + t.name).forEach(function(e) {
                        return e.visible = !1
                    })
                })
            }, t.prototype.onFaceReady = function() {
                this.container = this.getFace(".CONTAINER"), this.turboItems = this.container.$("TURBOITEMS");
                var e = o.store.getState().match;
                if (e && e.match) {
                    var t = e.match.gameMode;
                    this.isManagerMode = p.checkGameModeIsManagerMode(t);
                    var i = o.store.getState().quickMatch;
                    i && (this.isAutoUseItemOn = i.isAutoUseItemOn), this.autoUseItemContainer = this.addChildBinder(".id-autoUseItemContainer", h.HudAutoItemUseContainerBinder, {
                        isManagerMode: this.isManagerMode,
                        isAutoUseItemOn: this.isAutoUseItemOn
                    })
                }
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.hudService.once("intro", function() {
                    e.gotoAndPlay(e.container, "intro")
                }), this.initItemMap(), this.hudService.hudType !== d.HudType.Openworld && this.externalService.isEdgeBrowser() || this.initSlots(this.slotCount), this.slots || this.bindSlots(this.slotCount), this.addManagedListener(this.externalService, c.default.beHUDSetTurboSlotVisible, function(t) {
                    e.face.visible = t
                }), this.addManagedListener(this.externalService, c.default.beHUDInitItemSlot, function(t) {
                    e.initSlots(t)
                }), this.addManagedListener(this.externalService, c.default.beHUDSetSpeedModeTurboGauge, function(t, i, n) {
                    e.setGauge(t, i, n || .2)
                }), this.addManagedListener(this.externalService, c.default.beHUDAddItem, function(t) {
                    if (t === e.itemCode) {
                        var i = e.items.length;
                        i < e.slotCount && (e.setGauge(e.items.length, 0, .2), e.addItem(i, t), e.updateRecord(), e.playAquireFx())
                    }
                }), this.addManagedListener(this.externalService, c.default.beHUDUseItem, function() {
                    var t = e.items.length,
                        i = e.items.shift();
                    if (r.debug("beHUDUseItem(" + i + ")"), void 0 !== i) {
                        var n = e.slots[0];
                        e.gotoAndPlay(n, "useItem"), e.setGauge(Math.min(t, e.slotCount - 1), 0, .2), e.items.length > 0 && e.moveItemSlot(0), e.actionGuideTurbo.use()
                    }
                }), this.addManagedListener(this.externalService, c.default.beHUDToggleAutoUseItem, function(t) {
                    e.isManagerMode && (e.isAutoUseItemOn = !t, e.dispatch(f.updateAutoUseItem(e.isAutoUseItemOn)), e.autoUseItemContainer.setProps({
                        isAutoUseItemOn: e.isAutoUseItemOn
                    }))
                }), this.addManagedListener(this.externalService, c.default.beHUDStartSpeedModeTurbo, function() {
                    e.isTurbo = !0, r.debug("beHUDStartSpeedModeTurbo"), e.recordService.pushRecord("turbouse", e.hudService.timeElapsed), e.turboItems.addCustomSetTween({
                        flash: {
                            alpha: .3
                        }
                    }), e.actionGuideTurbo.hide()
                }), this.addManagedListener(this.externalService, c.default.beHUDEndSpeedModeTurbo, function() {
                    e.isTurbo = !1, e.turboItems.addCustomSetTween({
                        flash: {
                            alpha: 1
                        }
                    }), 0 < e.items.length && e.actionGuideTurbo.guide()
                }), this.addManagedListener(this.externalService, c.default.beHUDResetItemSlot, function() {
                    e.items = [], e.slots.forEach(function(t, i) {
                        e.setGauge(i, 0, 0), t.gotoAndPlay("fillUp")
                    }), e.actionGuideTurbo.hide()
                })
            }, t.prototype.initSlots = function(e) {
                var t = this;
                this.bindSlots(e), this.actionGuideTurbo || 2 !== e && 3 !== e || (this.actionGuideTurbo = this.addChildBinder(2 === e ? ".id-actionGuide" : ".id-actionGuideTeam", u.HudActionGuideBinder, {
                    inputKey: "useItem",
                    condNextGuide: function() {
                        return 0 < t.items.length && !t.isTurbo
                    }
                }), this.visible(".id-itemLabel", !this.actionGuideTurbo.isShowGuide({
                    configuration: o.store.getState().configuration
                }))), this.slots.forEach(function(e, i) {
                    t.setGauge(i, 0, 0), e.on("stop", function() {
                        "useItem" !== e.currentLabel && "moveOut" !== e.currentLabel || e.gotoAndPlay("fillUp")
                    })
                })
            }, t.prototype.bindSlots = function(e) {
                var t = this;
                this.slotCount = e, 2 === e ? this.gotoAndStop(this.turboItems, "single") : 3 === e ? this.gotoAndStop(this.turboItems, "team") : r.warn("invalid slot count!"), this.slots = _.range(1, e + 1).map(function(e) {
                    return t.turboItems.$("itemSlot" + e)
                })
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    configuration: e.configuration
                }
            }, t.prototype.update = function(e) {
                this.isChangedShowGuide(e) && this.visible(".id-itemLabel", !this.actionGuideTurbo.isShowGuide(e))
            }, t.prototype.isChangedShowGuide = function(e) {
                return _.get(this.reduxProps, "configuration.configs.ingame.applied.keyGuideOn", !0) !== _.get(e, "configuration.configs.ingame.applied.keyGuideOn", !0)
            }, t.prototype.setGauge = function(e, t, i) {
                if (!this.items[e]) {
                    var n = this.slots[e],
                        r = n.$("GaugeCircle"),
                        o = r.$("mask");
                    if (r.killCustomTweens(), t < 0) return void r.addCustomToTween(1, {
                        flash: {
                            colorRedPercent: 100,
                            colorGreenPercent: 100,
                            colorBluePercent: 100
                        }
                    });
                    r.colorRedPercent = 23, r.colorGreenPercent = 67, r.colorBluePercent = 90, o.killCustomTweens(), o.addCustomToTween(i, {
                        flash: {
                            ratio: t
                        }
                    })
                }
            }, t.prototype.addItem = function(e, t) {
                this.items.push(t);
                var i = this.slots[e];
                this.gotoAndPlay(i, "acquire"), i.$("ACQUIRE_ITEMICON").$("TURBO").gotoAndPlay(1), this.actionGuideTurbo.guide()
            }, t.prototype.playAquireFx = function() {
                this.audioService.get(l.FxAudioCode.Nitrous_Earned).play()
            }, t.prototype.updateRecord = function() {
                this.recordService.pushRecord("turbocharge", this.hudService.timeElapsed)
            }, t.prototype.moveItemSlot = function(e) {
                if (void 0 !== this.items[e]) {
                    var t = this.slots[e],
                        i = this.slots[e + 1];
                    this.gotoAndPlay(i, "moveOut"), this.gotoAndPlay(t, "moveIn"), e + 1 < this.slotCount - 1 && this.moveItemSlot(e + 1)
                }
            }, t
        }(s.StageBinder);
    n.__decorate([a.autowired("$filter")], g.prototype, "$filter", void 0), n.__decorate([a.autowired("externalService")], g.prototype, "externalService", void 0), n.__decorate([a.autowired("recordService")], g.prototype, "recordService", void 0), n.__decorate([a.autowired("hudService")], g.prototype, "hudService", void 0), n.__decorate([a.autowired("audioService")], g.prototype, "audioService", void 0), t.HudSpeedTurboSlotBinder = g
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(1),
        a = i(17),
        s = i(120),
        c = function() {
            function e(e, t, i, n) {
                this.target = e, this.startRotation = t, this.destRotation = i, this.bPlayAnimOnStateChange = n
            }
            return e.prototype.onStartTurbo = function(e) {
                this.target.killCustomTweens(), this.bPlayAnimOnStateChange && this.target.gotoAndPlay("normal"), this.target.rotation = this.startRotation, this.target.addCustomToTween(e, {
                    flash: {
                        rotation: this.destRotation
                    }
                })
            }, e.prototype.onSuperTurbo = function(e) {
                this.target.killCustomTweens(), this.bPlayAnimOnStateChange && this.target.gotoAndPlay("superTurbo"), this.target.addCustomToTween(e, {
                    flash: {
                        rotation: this.destRotation
                    }
                })
            }, e
        }(),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-TURBOGAUGE .id-Gauge .TextSuperTurbo .id-textField", "PURSUIT_NAME_SUPERTURBO"), this.actionGuideSuperTurbo = this.addChildBinder(".id-actionGuide", s.HudActionGuideBinder, {
                    inputKey: "useItem",
                    notifySuccess: !0
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".CONTAINER .id-TURBOGAUGE"),
                    i = t.$(".id-Gauge .id-FullGauge"),
                    n = t.$(".id-Gauge .id-EffectLeft"),
                    o = t.$(".id-Gauge .id-TextSuperTurbo"),
                    a = t.$(".id-Gauge .id-MaxLine"),
                    s = t.$(".id-Gauge .id-MinLine"),
                    d = t.$(".id-Gauge .id-HitAreaMin"),
                    l = t.$(".id-Gauge .id-HitAreaMax"),
                    u = [new c(t.$(".id-Gauge .id-gaugeMask"), 38, 142), new c(t.$(".id-EffectRight"), -2.6, 46.4, !0), new c(t.$(".id-Gauge .id-MoveLight"), 0, 103, !0), new c(t.$(".id-Gauge .id-GaugeHighlight"), 38, 143)];
                this.addManagedListener(this.externalService, r.default.beHUDStartSpeedModeTurbo, function(e, r, c) {
                    t.gotoAndPlay("intro"), i.gotoAndPlay("normal"), o && (o.rotation = 50 * (r + c) / e - 50), s && (s.rotation = d.rotation = 100 * r / e - 50), a && (a.rotation = l.rotation = 100 * c / e - 50), n.visible = !1, u.forEach(function(t) {
                        t.onStartTurbo(e)
                    })
                }), this.addManagedListener(this.externalService, r.default.beHUDUseSpeedModeSuperTurbo, function(t) {
                    e.recordService.pushRecord("perfectturbo", e.hudService.timeElapsed), e.gotoAndPlay(i, "superTurbo"), n.visible = !0, n.gotoAndPlay("startAnimation"), u.forEach(function(e) {
                        e.onSuperTurbo(t)
                    }), e.actionGuideSuperTurbo.use()
                }), this.addManagedListener(this.externalService, r.default.beHUDEndSpeedModeTurbo, function() {
                    -1 !== ["intro", "useTurbo"].indexOf(t.currentLabel) && t.gotoAndPlay("outro"), e.actionGuideSuperTurbo.hide()
                }), this.addManagedListener(this.externalService, r.default.beAvailableSuperTurbo, function(t, i) {
                    e.actionGuideSuperTurbo.guide(), e.actionGuideSuperTurbo.waitUse(i)
                })
            }, t
        }(a.StageBinder);
    n.__decorate([o.autowired("hudService")], d.prototype, "hudService", void 0), n.__decorate([o.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([o.autowired("recordService")], d.prototype, "recordService", void 0), t.HudSpeedTurboGaugeBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(63),
        o = i(16),
        a = i(30),
        s = i(8),
        c = i(12),
        d = i(75),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.changeEventName = this.props.changeEventName || "filterSortChange", this.manufacturerFilter = this.convertFace(".id-filterDropdown1") || this.convertFace(".id-filterDropdown"), this.classFilter = this.convertFace(".id-filterDropdown2"), this.sorter = this.convertFace(".id-sortDropdown"), this.manufacturerFilter && (this.manufacturerFilter.on(s.EventEx.CHANGE, this.onChangeManufacturer.bind(this)), this.manufacturerFilter.isDropUp = !0), this.classFilter && (this.classFilter.on(s.EventEx.CHANGE, this.applyChanges.bind(this)), this.classFilter.isDropUp = !0), this.sorter && (this.sorter.on(s.EventEx.CHANGE, this.applyChanges.bind(this)), this.sorter.isDropUp = !0)
            }, t.prototype.onAddedToScene = function() {
                var e = {
                    filterState: c.getVehicleState().filterState
                };
                this.setProps(e), this.applyChanges()
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.usableVehicles || c.getVehicles(e.useVehicleTypes || 1);
                this.manufacturerFilter && (this.manufacturerFilter.items = this.getGroupedByManufacturer(i), e.filterState && (this.manufacturerFilter.selectedIndex = _.findIndex(this.manufacturerFilter.items, function(t) {
                    return t.value === e.filterState.manufacturerCode
                }))), this.classFilter && (this.classFilter.items = this.getGroupedByClass(this.getFilteredManufacturer(i)), e.filterState && (this.classFilter.selectedIndex = _.findIndex(this.classFilter.items, function(t) {
                    return t.value === e.filterState.clazz
                }))), this.sorter && (this.sorter.items = this.$util.getSortItemsInGarage().items.map(function(e) {
                    return {
                        text: t.$filter("translate")(e.text),
                        type: e.type
                    }
                }), e.filterState && _.isUndefined(e.filterState.sortKey) && (this.sorter.selectedIndex = 0))
            }, t.prototype.onDetach = function() {
                this.dispatch(r.removeFilter())
            }, t.prototype.getFilteredManufacturer = function(e) {
                var t = this;
                return _.filter(e, function(e) {
                    var i = t.manufacturerFilter.selectedItem ? t.manufacturerFilter.selectedItem.value : 0;
                    return !(0 !== i) || e.manufacturerCode === i
                })
            }, t.prototype.onChangeManufacturer = function() {
                this.classFilter && (this.classFilter.selectedIndex = 0), this.applyChanges()
            }, t.prototype.applyChanges = function() {
                var e = this.manufacturerFilter ? this.manufacturerFilter.selectedItem.value : 0,
                    t = this.classFilter ? this.classFilter.selectedItem.value : "ALL",
                    i = this.sorter ? this.$util.getSortItemsInGarage().items[this.sorter.selectedIndex].key : void 0;
                this.dispatch(r.changeFilter({
                    manufacturerCode: e,
                    clazz: t,
                    sortKey: i
                })), this.face.dispatchEvent(this.changeEventName, {
                    manufacturerCode: e,
                    clazz: t,
                    sortKey: i
                })
            }, t.prototype.getGroupedByManufacturer = function(e) {
                var t = this,
                    i = _.countBy(e, function(e) {
                        return e.manufacturerCode
                    });
                return [{
                    text: this.$filter("translate")("ALL_MANUFACTURER") + " (" + e.length + ")",
                    value: 0
                }].concat(_.map(i, function(e, i) {
                    return {
                        text: t.$filter("manufacturerName")(i) + " (" + e + ")",
                        value: parseInt(i, 10)
                    }
                }))
            }, t.prototype.getGroupedByClass = function(e) {
                var t = this,
                    i = _.uniqBy(e, function(e) {
                        return e.clazz
                    }).sort(function(e, t) {
                        return d.vehicleClassOrder[e.clazz] - d.vehicleClassOrder[t.clazz]
                    }),
                    n = _.countBy(e, "clazz");
                return [{
                    text: this.$filter("translate")("COMMON_FILTER_ALL_CLASSES") + " (" + e.length + ")",
                    value: "ALL"
                }].concat(_.map(i, function(e) {
                    return {
                        text: t.$filter("translate")("COMMON_FILTER_CLASS_" + e.clazz) + " (" + n[e.clazz] + ")",
                        value: e.clazz
                    }
                }))
            }, t.prototype.setManufacturerDropUp = function(e) {
                this.manufacturerFilter && (this.manufacturerFilter.isDropUp = e)
            }, t.prototype.setClassDropUp = function(e) {
                this.classFilter && (this.classFilter.isDropUp = e)
            }, t.prototype.setSorterDropUp = function(e) {
                this.sorter && (this.sorter.isDropUp = e)
            }, t
        }(a.Binder);
    n.__decorate([o.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([o.autowired("$util")], l.prototype, "$util", void 0), t.VehicleListFilterBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(34),
        r = function() {
            function e() {}
            return e.onCreateClanPopup = function(e) {
                n.getInjector().get("popupService").draw("ConfirmCancelPopup", {
                    title: "CLAN_CLANCREATION_POPUPTITLE_CHECK",
                    description: "CLAN_CLANCREATION_POPUPDESC_CHECKSUB",
                    confirm: function() {
                        e && e()
                    },
                    cancel: function() {}
                })
            }, e.onCreateClanConfirmPopup = function(e) {
                n.getInjector().get("popupService").draw("ConfirmPopup", {
                    title: "CLAN_CLANCREATION_POPUPTITLE_COMPLETE",
                    description: "CLAN_CLANCREATION_POPUPDESC_COMPLETESUB",
                    confirm: function() {
                        e && e()
                    },
                    cancel: function() {}
                })
            }, e.onCreateClanInvalidClanNamePopup = function(e, t, i) {
                var r = n.getInjector().get("popupService"),
                    o = n.getInjector().get("$filter");
                r.draw("ConfirmPopup", {
                    title: "CLAN_CLANCREATION_POPUPTITLE_MINCLANNAME",
                    description: o("template")({
                        min: e,
                        max: t
                    }, "CLAN_CLANCREATION_POPUPDESC_MINCLANNAME"),
                    confirm: function() {
                        i && i()
                    },
                    cancel: function() {}
                })
            }, e.onCreateClanInvalidClanIntroPopup = function(e, t, i) {
                var r = n.getInjector().get("popupService"),
                    o = n.getInjector().get("$filter");
                r.draw("ConfirmPopup", {
                    title: "CLAN_CLANCREATION_POPUPTITLE_MINCLANINTRO",
                    description: o("template")({
                        min: e,
                        max: t
                    }, "CLAN_CLANCREATION_POPUPDESC_MINCLANINTRO"),
                    confirm: function() {
                        i && i()
                    },
                    cancel: function() {}
                })
            }, e.onConfirmLeaveClanPopup = function(e) {
                n.getInjector().get("popupService").draw("ConfirmCancelPopup", {
                    title: "CLAN_MYCLAN_POPUPTITLE_CLANOUT",
                    description: "CLAN_MYCLAN_POPUPDESC_CLANOUT",
                    confirmString: "CLAN_CLANCREATION_POPUP_CONFIRM",
                    cancelString: "CLAN_CLANCREATION_POPUP_CANCEL",
                    confirm: function() {
                        e && e()
                    },
                    cancel: function() {}
                })
            }, e.onLeftClanPopup = function(e) {
                n.getInjector().get("popupService").drawConfirm("CLAN_MYCLAN_POPUPTITLE_CLANOUTFINISH", "CLAN_MYCLAN_POPUPDESC_CLANOUTFINISH", function() {
                    e && e()
                })
            }, e.onRefuseLeaveClanPopup = function() {
                n.getInjector().get("popupService").drawConfirm("CLAN_MYCLAN_POPUPTITLE_OUTIMPOSSIBLE", "CLAN_MYCLAN_POPUPDESC_OUTIMPOSSIBLE", function() {})
            }, e.onConfirmClanMasterChangePopup = function(e, t, i) {
                var r = n.getInjector().get("popupService"),
                    o = n.getInjector().get("$filter");
                r.draw("ConfirmCancelPopup", {
                    title: "CLAN_MYCLAN_POPUPTITLE_DELEGATION",
                    description: o("template")(e, "CLAN_MYCLAN_POPUPDESC_DELEGATION"),
                    confirmString: "CLAN_CLANCREATION_POPUP_CONFIRM",
                    cancelString: "CLAN_CLANCREATION_POPUP_CANCEL",
                    confirm: function() {
                        t && t()
                    },
                    cancel: function() {
                        i && i()
                    }
                })
            }, e.onRefuseAppointSubMaster = function() {
                n.getInjector().get("popupService").drawConfirm("CLAN_MYCLAN_POPUPTITLE_APPOINTFAIL", "CLAN_MYCLAN_POPUPDESC_APPOINTFAIL", function() {})
            }, e.onConfirmClanMemberExpelPopup = function(e, t, i) {
                var r = n.getInjector().get("$filter");
                n.getInjector().get("popupService").draw("ConfirmCancelPopup", {
                    title: "CLAN_MYCLAN_POPUPTITLE_BAN",
                    description: r("template")({
                        name: e
                    }, "CLAN_MYCLAN_POPUPDESC_BAN"),
                    confirmString: "CLAN_CLANCREATION_POPUP_CONFIRM",
                    cancelString: "CLAN_CLANCREATION_POPUP_CANCEL",
                    confirm: function() {
                        t && t()
                    },
                    cancel: function() {
                        i && i()
                    }
                })
            }, e.onClanMemberExpelledPopup = function(e) {
                var t = n.getInjector().get("$filter");
                n.getInjector().get("popupService").drawConfirm("CLAN_MYCLAN_POPUPTITLE_BANFINISH", t("template")(e, "CLAN_MYCLAN_POPUPDESC_BANFINISH"), function() {})
            }, e.onConfirmRecruiting = function(e) {
                n.getInjector().get("popupService").drawConfirm("CLAN_MANAGE_POPUPTITLE_RECRUITING", "CLAN_MANAGE_POPUPDESC_RECRUITING", function() {
                    e && e()
                })
            }, e.onConfirmRecruitStop = function(e) {
                n.getInjector().get("popupService").drawConfirm("CLAN_MANAGE_POPUPTITLE_RECRUITING", "CLAN_MANAGE_POPUPDESC_RECRUITSTOP", function() {
                    e && e()
                })
            }, e.onConfirmSkipScreen = function(e) {
                n.getInjector().get("popupService").drawConfirm("CLAN_MANAGE_POPUPTITLE_RECRUITING", "CLAN_MANAGE_POPUPDESC_SKIPSCREEN", function() {
                    e && e()
                })
            }, e.onConfirmScreening = function(e) {
                n.getInjector().get("popupService").drawConfirm("CLAN_MANAGE_POPUPTITLE_RECRUITING", "CLAN_MANAGE_POPUPDESC_SCREENING", function() {
                    e && e()
                })
            }, e.onRecruitCheck = function(e) {
                n.getInjector().get("popupService").drawConfirm("CLAN_MANAGE_POPUPTITLE_RECRUITING", "CLAN_MANAGE_POPUPDESC_RECRUITCHECK", function() {
                    e && e()
                })
            }, e.onConfirmDissolveClan = function(e, t) {
                n.getInjector().get("popupService").draw("ConfirmCancelPopup", {
                    title: "CLAN_MANAGE_POPUPTITLE_BREAKUP",
                    description: "CLAN_MANAGE_POPUPDESC_BREAKUP",
                    confirmString: "CLAN_MANAGE_POPUP_CONFIRM",
                    cancelString: "CLAN_MANAGE_POPUP_CANCEL",
                    confirm: function() {
                        e && e()
                    },
                    cancel: function() {
                        t && t()
                    }
                })
            }, e.onDissolveClan = function(e) {
                n.getInjector().get("popupService").drawConfirm("CLAN_MANAGE_POPUPTITLE_BREAKUPFINISH", "CLAN_MANAGE_POPUPDESC_BREAKUPFINISH", function() {
                    e && e()
                })
            }, e.onCancelJoinRequest = function(e) {
                n.getInjector().get("popupService").draw("ConfirmCancelPopup", {
                    title: "CLAN_JOIN_POPUPTITLE_APPLYCANCEL",
                    description: "CLAN_JOIN_POPUPDESC_APPLYCANCEL",
                    confirm: function() {
                        e && e()
                    },
                    cancel: function() {}
                })
            }, e.onRequestJoin = function(e, t) {
                var i = n.getInjector().get("$filter");
                n.getInjector().get("popupService").draw("ConfirmCancelPopup", {
                    title: "CLAN_JOIN_POPUPTITLE_CHECK",
                    description: function() {
                        return i("template")({
                            Name: t
                        }, "CLAN_JOIN_POPUPDESC_CHECK")
                    }(),
                    confirm: function() {
                        e && e()
                    },
                    cancel: function() {}
                })
            }, e.onJoinSuccess = function(e, t) {
                var i = n.getInjector().get("$filter");
                n.getInjector().get("popupService").draw("ConfirmPopup", {
                    title: "CLAN_JOIN_POPUPTITLE_FINISH",
                    description: function() {
                        return i("template")({
                            Name: t
                        }, "CLAN_JOIN_POPUPDESC_FINISH")
                    }(),
                    confirm: function() {
                        e && e()
                    }
                })
            }, e.onUnderScreening = function(e) {
                var t = n.getInjector().get("$filter");
                n.getInjector().get("popupService").draw("ConfirmPopup", {
                    title: "CLAN_JOIN_POPUPTITLE_APPLY",
                    description: function() {
                        return t("template")({
                            Name: e
                        }, "CLAN_JOIN_POPUPDESC_APPLY")
                    }(),
                    confirm: function() {}
                })
            }, e.onJoinFailure = function() {
                n.getInjector().get("popupService").draw("ConfirmPopup", {
                    title: "CLAN_JOIN_POPUPTITLE_FORBIDDEN",
                    description: "CLAN_JOIN_POPUPDESC_FORBIDDEN",
                    confirm: function() {}
                })
            }, e.onConfirmAcceptClanRequest = function(e, t, i) {
                var r = n.getInjector().get("popupService"),
                    o = n.getInjector().get("$filter");
                r.draw("ConfirmCancelPopup", {
                    title: "CLAN_MANAGE_POPUPTITLE_CONFIRM",
                    description: o("template")({
                        name: e
                    }, "CLAN_MANAGE_POPUPDESC_CONFIRM"),
                    confirmString: "CLAN_MANAGE_POPUP_CONFIRM",
                    cancelString: "CLAN_MANAGE_POPUP_CANCEL",
                    confirm: function() {
                        t && t()
                    },
                    cancel: function() {
                        i && i()
                    }
                })
            }, e.onAcceptClanRequest = function(e, t) {
                var i = n.getInjector().get("popupService"),
                    r = n.getInjector().get("$filter");
                i.drawConfirm("CLAN_MANAGE_POPUPTITLE_CONFIRM2", r("template")({
                    name: e
                }, "CLAN_MANAGE_POPUPDESC_CONFIRM2"), function() {
                    t && t()
                })
            }, e.onAcceptClanRequestFailure = function(e) {
                n.getInjector().get("popupService").drawConfirm("CLAN_MANAGE_POPUPTITLE_CANTCONFIRM", "CLAN_MANAGE_POPUPDESC_CANTCONFIRM", function() {
                    e && e()
                })
            }, e.onConfirmRejectClanRequest = function(e, t, i) {
                var r = n.getInjector().get("popupService"),
                    o = n.getInjector().get("$filter");
                r.draw("ConfirmCancelPopup", {
                    title: "CLAN_MANAGE_POPUPTITLE_REJECT",
                    description: o("template")({
                        name: e
                    }, "CLAN_MANAGE_POPUPDESC_REJECT"),
                    confirmString: "CLAN_MANAGE_POPUP_CONFIRM",
                    cancelString: "CLAN_MANAGE_POPUP_CANCEL",
                    confirm: function() {
                        t && t()
                    },
                    cancel: function() {
                        i && i()
                    }
                })
            }, e.onRejectClanRequest = function(e, t) {
                var i = n.getInjector().get("popupService"),
                    r = n.getInjector().get("$filter");
                i.drawConfirm("CLAN_MANAGE_POPUPTITLE_REJECT2", r("template")({
                    name: e
                }, "CLAN_MANAGE_POPUPDESC_REJECT2"), function() {
                    t && t()
                })
            }, e.onSearchKeywordWarn = function() {
                n.getInjector().get("popupService").drawConfirm("CLAN_CLANLIST_POPUPTITLE_SEARCH", "CLAN_CLANLIST_POPUPDESC_SEARCH", function() {})
            }, e.onChangeIntroWithForbiddenWord = function() {
                n.getInjector().get("popupService").drawConfirm("CLAN_CREATION_INTRODUCTION_FORBIDTITLE", "CLAN_CREATION_INITRODUCTION_FORBIDDESC", function() {})
            }, e
        }();
    t.ClanPopupHelper = r
}, , function(e, t, i) {
    "use strict";

    function n(e) {
        return e._signature === S
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(7),
        a = i(35),
        s = i(8),
        c = i(208),
        d = i(172),
        l = i(2),
        u = i(251),
        p = i(362),
        h = i(728),
        f = i(107),
        v = i(729),
        m = i(19),
        g = i(364),
        y = v.HTMLRenderer.instance(),
        S = {};
    t.isFaceClass = n;
    var E = _.range(10).map(function(e) {
            return !0
        }),
        T = C = function() {
            function e(e, t) {
                this.idIssuer = e, this._cachedProxyEventListeners = {}, this._disabledEvents = {}, this._invalidFlags = [], this.cssProxies = [], this._cloned = !1, this._hasSize = !1, this._heightOffset = 0, this._isGuide = !1, this._layoutFloat = "none", this._layoutPosition = "absolute", this._mouseEnabled = !0, this.parameters = [], this._perspective = 0, this._rotationX = 0, this._rotationY = 0, this._rotationZ = 0, this._scaleXMultiplier = 1, this._scaleYMultiplier = 1, this._widthOffset = 0, this._xOffset = 0, this._yOffset = 0, this._scheduled = !1, this._booted = !1, this.customTweens = [], this._objectId = e.createId(), this.data = t
            }
            return e.createDefaultData = function() {
                return _.assign({}, C._defaultData)
            }, e.prototype.create = function() {
                return this.htmlElement = this.createDomNode(this.data), this.initializeDomNode(this.data), this.initializeClass(this.data), this.initializeStyle(this.data), this.initializeProperties(this.data), this.data.initialExist || (this._invalidFlags[3] = !0, this.validateNow()), this._invalidFlags = E, this
            }, e.prototype.clone = function(e) {
                var t = this.constructor,
                    i = _.assign({}, this.data),
                    n = new t(this.idIssuer, i);
                return n._cloned = !0, n.htmlElement = e, n.initializeDomNode(i), n.cloneStyle(this), n.cloneProperties(this), n
            }, Object.defineProperty(e.prototype, "alpha", {
                get: function() {
                    var e = void 0 !== this.data.colorAlphaPercent ? this.data.colorAlphaPercent : 100,
                        t = void 0 !== this.data.colorAlphaAmount ? this.data.colorAlphaAmount : 0;
                    return Math.min(e / 100 + t / 255, 1)
                },
                set: function(e) {
                    var t = 100 * e;
                    (void 0 !== this.data.colorAlphaPercent ? this.data.colorAlphaPercent : 100) === t && 0 === (void 0 !== this.data.colorAlphaAmount ? this.data.colorAlphaAmount : 0) || (this.data.colorAlphaPercent = t, this.data.colorAlphaAmount = 0, this.invalidateAlpha())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "baseScaleX", {
                get: function() {
                    return void 0 !== this.data.scaleX ? this.data.scaleX : 1
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "baseScaleY", {
                get: function() {
                    return void 0 !== this.data.scaleY ? this.data.scaleY : 1
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "blendMode", {
                get: function() {
                    return this.data.blendMode || "normal"
                },
                set: function(e) {
                    (this.data.blendMode || "normal") !== e && (this.data.blendMode = e, this.invalidateBlendMode())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "cloned", {
                get: function() {
                    return this._cloned
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "tweens", {
                get: function() {
                    return this.data.tweens
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "filters", {
                get: function() {
                    return this.data.filters || []
                },
                set: function(e) {
                    _.isEqual(this.data.filters || [], e) || (this.data.filters = e, this.invalidateEffects())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "guide", {
                get: function() {
                    return this._guide
                },
                set: function(e) {
                    this._guide = e, this.invalidateTransform()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "hasSize", {
                get: function() {
                    return this._hasSize
                },
                set: function(e) {
                    this._hasSize !== e && (this._hasSize = e, this.invalidateSize())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "height", {
                get: function() {
                    return this.data.height + this._heightOffset
                },
                set: function(e) {
                    this.data.height !== e && (void 0 === this.data.regY && (this.data.regY = this.data.height / 2), this.data.height = e, this._hasSize && this.invalidateSize())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "heightOffset", {
                get: function() {
                    return this._heightOffset
                },
                set: function(e) {
                    this._heightOffset !== e && (this._heightOffset = e, this._hasSize && this.invalidateSize())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "isGuide", {
                get: function() {
                    return this._isGuide
                },
                set: function(e) {
                    e && (this.visible = !1), this._isGuide = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "layoutFloat", {
                get: function() {
                    return this._layoutFloat
                },
                set: function(e) {
                    this._layoutFloat !== e && (this._layoutFloat = e, this.invalidateLayout())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "layoutPosition", {
                get: function() {
                    return this._layoutPosition
                },
                set: function(e) {
                    this._layoutPosition !== e && (this._layoutPosition = e, this.invalidateLayout())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "mask", {
                get: function() {
                    return this._mask
                },
                set: function(e) {
                    if (this._mask !== e) {
                        this._mask = e;
                        var t = this.cssProxies[0];
                        e ? t.setProperty("-edge-clipping-mask", "'" + e.htmlElement.id + "'") : t.removeProperty("-edge-clipping-mask"), this.addToRenderer()
                    }
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "mouseEnabled", {
                get: function() {
                    return this._mouseEnabled
                },
                set: function(e) {
                    if (this._mouseEnabled !== e) {
                        this._mouseEnabled = e;
                        var t = this.cssProxies[0];
                        this._mouseEnabled ? t.removeProperty("pointer-events") : t.setProperty("pointer-events", "none"), this.addToRenderer()
                    }
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "name", {
                get: function() {
                    return this.data.name || ""
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "objectId", {
                get: function() {
                    return this._objectId
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "parent", {
                get: function() {
                    return this._parent
                },
                set: function(e) {
                    this._parent !== e && (this._parent = e)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "perspective", {
                get: function() {
                    return this._perspective
                },
                set: function(e) {
                    if (this._perspective !== e) {
                        this._perspective = e;
                        var t = this.cssProxies[0];
                        0 !== e ? t.setProperty("-webkit-perspective", this.perspective + "px") : t.removeProperty("-webkit-perspective"), this.addToRenderer()
                    }
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "regX", {
                get: function() {
                    return void 0 !== this.data.regX ? this.data.regX : this.data.width / 2
                },
                set: function(e) {
                    (void 0 !== this.data.regX ? this.data.regX : this.data.width / 2) !== e && (this.data.regX = e, this.invalidateTransformOrigin())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "regY", {
                get: function() {
                    return void 0 !== this.data.regY ? this.data.regY : this.data.height / 2
                },
                set: function(e) {
                    (void 0 !== this.data.regY ? this.data.regY : this.data.height / 2) !== e && (this.data.regY = e, this.invalidateTransformOrigin())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "rotation", {
                get: function() {
                    return void 0 !== this.data.rotation ? this.data.rotation : 0
                },
                set: function(e) {
                    (void 0 !== this.data.rotation ? this.data.rotation : 0) !== e && (this.data.rotation = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "rotationX", {
                get: function() {
                    return this._rotationX
                },
                set: function(e) {
                    this._rotationX !== e && (this._rotationX = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "rotationY", {
                get: function() {
                    return this._rotationY
                },
                set: function(e) {
                    this._rotationY !== e && (this._rotationY = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "rotationZ", {
                get: function() {
                    return this._rotationZ
                },
                set: function(e) {
                    this._rotationZ !== e && (this._rotationZ = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "scale9Grid", {
                get: function() {
                    return this.data.scalingGridRect
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "emulatingScale9Grid", {
                get: function() {
                    return this._emulatingScale9Grid
                },
                set: function(e) {
                    this._emulatingScale9Grid !== e && (this._emulatingScale9Grid = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "scaleX", {
                get: function() {
                    return (void 0 !== this.data.scaleX ? this.data.scaleX : 1) * this.scaleXMultiplier
                },
                set: function(e) {
                    (void 0 !== this.data.scaleX ? this.data.scaleX : 1) !== e && (this.data.scaleX = e, this.invalidateTransform(), this.scale9Grid && this.emit(s.EventEx.SCALE_CHANGE))
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "scaleXMultiplier", {
                get: function() {
                    return this._scaleXMultiplier
                },
                set: function(e) {
                    this._scaleXMultiplier !== e && (this._scaleXMultiplier = e, this.invalidateTransform(), this.scale9Grid && this.emit(s.EventEx.SCALE_CHANGE))
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "scaleY", {
                get: function() {
                    return (void 0 !== this.data.scaleY ? this.data.scaleY : 1) * this.scaleYMultiplier
                },
                set: function(e) {
                    (void 0 !== this.data.scaleY ? this.data.scaleY : 1) !== e && (this.data.scaleY = e, this.invalidateTransform(), this.scale9Grid && this.emit(s.EventEx.SCALE_CHANGE))
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "scaleYMultiplier", {
                get: function() {
                    return this._scaleYMultiplier
                },
                set: function(e) {
                    this._scaleYMultiplier !== e && (this._scaleYMultiplier = e, this.invalidateTransform(), this.scale9Grid && this.emit(s.EventEx.SCALE_CHANGE))
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "skewX", {
                get: function() {
                    return void 0 !== this.data.skewX ? this.data.skewX : 0
                },
                set: function(e) {
                    this.data.skewX !== e && (this.data.skewX = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "skewY", {
                get: function() {
                    return void 0 !== this.data.skewY ? this.data.skewY : 0
                },
                set: function(e) {
                    (void 0 !== this.data.skewY ? this.data.skewY : 0) !== e && (this.data.skewY = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "colorRedPercent", {
                get: function() {
                    return void 0 !== this.data.colorRedPercent ? this.data.colorRedPercent : 100
                },
                set: function(e) {
                    (void 0 !== this.data.colorRedPercent ? this.data.colorRedPercent : 100) !== e && (this.data.colorRedPercent = e, this.invalidateEffects())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "colorGreenPercent", {
                get: function() {
                    return void 0 !== this.data.colorGreenPercent ? this.data.colorGreenPercent : 100
                },
                set: function(e) {
                    (void 0 !== this.data.colorGreenPercent ? this.data.colorGreenPercent : 100) !== e && (this.data.colorGreenPercent = e, this.invalidateEffects())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "colorBluePercent", {
                get: function() {
                    return void 0 !== this.data.colorBluePercent ? this.data.colorBluePercent : 100
                },
                set: function(e) {
                    (void 0 !== this.data.colorBluePercent ? this.data.colorBluePercent : 100) !== e && (this.data.colorBluePercent = e, this.invalidateEffects())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "colorAlphaPercent", {
                get: function() {
                    return void 0 !== this.data.colorAlphaPercent ? this.data.colorAlphaPercent : 100
                },
                set: function(e) {
                    (void 0 !== this.data.colorAlphaPercent ? this.data.colorAlphaPercent : 100) !== e && (this.data.colorAlphaPercent = e, this.invalidateAlpha())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "colorRedAmount", {
                get: function() {
                    return void 0 !== this.data.colorRedAmount ? this.data.colorRedAmount : 0
                },
                set: function(e) {
                    (void 0 !== this.data.colorRedAmount ? this.data.colorRedAmount : 0) !== e && (this.data.colorRedAmount = e, this.invalidateEffects())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "colorGreenAmount", {
                get: function() {
                    return void 0 !== this.data.colorGreenAmount ? this.data.colorGreenAmount : 0
                },
                set: function(e) {
                    (void 0 !== this.data.colorGreenAmount ? this.data.colorGreenAmount : 0) !== e && (this.data.colorGreenAmount = e, this.invalidateEffects())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "colorBlueAmount", {
                get: function() {
                    return void 0 !== this.data.colorBlueAmount ? this.data.colorBlueAmount : 0
                },
                set: function(e) {
                    (void 0 !== this.data.colorBlueAmount ? this.data.colorBlueAmount : 0) !== e && (this.data.colorBlueAmount = e, this.invalidateEffects())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "colorAlphaAmount", {
                get: function() {
                    return void 0 !== this.data.colorAlphaAmount ? this.data.colorAlphaAmount : 0
                },
                set: function(e) {
                    (void 0 !== this.data.colorAlphaAmount ? this.data.colorAlphaAmount : 0) !== e && (this.data.colorAlphaAmount = e, this.invalidateAlpha())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "visible", {
                get: function() {
                    return !!this.data.visible
                },
                set: function(e) {
                    this.visible !== e && (this.data.visible = e, this.invalidateDisplay())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "exist", {
                get: function() {
                    return !!this.data.exist
                },
                set: function(e) {
                    this.exist !== e && (this.data.exist = e, this.invalidateDisplay(), e ? this.reboot() : this.halt())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "initialExist", {
                get: function() {
                    return !!this.data.initialExist
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "width", {
                get: function() {
                    return this.data.width + this._widthOffset
                },
                set: function(e) {
                    this.data.width !== e && (void 0 === this.data.regX && (this.data.regX = this.data.width / 2), this.data.width = e, this._hasSize && this.invalidateSize())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "widthOffset", {
                get: function() {
                    return this._widthOffset
                },
                set: function(e) {
                    this._widthOffset !== e && (this._widthOffset = e, this._hasSize && this.invalidateSize())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "x", {
                get: function() {
                    return (void 0 !== this.data.x ? this.data.x : 0) + this.xOffset
                },
                set: function(e) {
                    (void 0 !== this.data.x ? this.data.x : 0) !== e && (this.data.x = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "xOffset", {
                get: function() {
                    return this._xOffset
                },
                set: function(e) {
                    this._xOffset !== e && (this._xOffset = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "y", {
                get: function() {
                    return (void 0 !== this.data.y ? this.data.y : 0) + this.yOffset
                },
                set: function(e) {
                    (void 0 !== this.data.y ? this.data.y : 0) !== e && (this.data.y = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "yOffset", {
                get: function() {
                    return this._yOffset
                },
                set: function(e) {
                    this._yOffset !== e && (this._yOffset = e, this.invalidateTransform())
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.ensureEventEmitter = function() {
                this._eventEmitter || (this._eventEmitter = new a.EventEmitter, this._eventEmitter.setMaxListeners(C.MAX_LISTENERS))
            }, e.prototype.addListener = function(e, t) {
                this.ensureEventEmitter(), this._eventEmitter.addListener(e, t);
                var i = C.HTML_EVENT_MAP[e];
                i && this.setProxyEventListener(i, e)
            }, e.prototype.on = function(e, t) {
                this.addListener(e, t)
            }, e.prototype.addEventListener = function(e, t) {
                this.addListener(e, t)
            }, e.prototype.once = function(e, t) {
                this.ensureEventEmitter(), this._eventEmitter.once(e, t);
                var i = C.HTML_EVENT_MAP[e];
                i && this.setProxyEventListener(i, e)
            }, e.prototype.addOnceEventListener = function(e, t) {
                this.once(e, t)
            }, e.prototype.addOnceListener = function(e, t) {
                this.once(e, t)
            }, e.prototype.removeListener = function(e, t) {
                if (this._eventEmitter) {
                    this._eventEmitter.removeListener(e, t);
                    var i = C.HTML_EVENT_MAP[e];
                    i && 0 === this._eventEmitter.listeners(e).length && this.clearProxyEventListener(i)
                }
            }, e.prototype.off = function(e, t) {
                this.removeListener(e, t)
            }, e.prototype.removeEventListener = function(e, t) {
                this.removeListener(e, t)
            }, e.prototype.removeAllListeners = function(e) {
                var t = this;
                if (e) {
                    if (this._eventEmitter) {
                        var i = this._eventEmitter.listeners(e);
                        i.forEach(function(i) {
                            t.removeListener(e, i)
                        })
                    }
                } else Object.keys(this._cachedProxyEventListeners).forEach(function(e) {
                    t.clearProxyEventListener(e)
                });
                this._eventEmitter && this._eventEmitter.removeAllListeners(e)
            }, e.prototype.listeners = function(e) {
                return this._eventEmitter ? this._eventEmitter.listeners(e) || [] : []
            }, e.prototype.emit = function(e) {
                for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
                this._eventEmitter && this._eventEmitter.emit.apply(this._eventEmitter, arguments)
            }, e.prototype.dispatchEvent = function(e) {
                for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
                this.emit.apply(this, arguments)
            }, e.prototype.enableEvents = function(e) {
                var t = this;
                e.forEach(function(e) {
                    delete t._disabledEvents[e]
                })
            }, e.prototype.disableEvents = function(e) {
                var t = this;
                e.forEach(function(e) {
                    t._disabledEvents[e] = !0
                })
            }, e.prototype.setProxyEventListener = function(e, t) {
                var i = this,
                    n = this._cachedProxyEventListeners[e];
                n || (n = function(n) {
                    if (!i._disabledEvents[t]) {
                        if (t === l.MouseEventEx.MOUSE_DOWN || t === l.MouseEventEx.MOUSE_UP) {
                            if (0 !== n.button) return
                        }
                        i.dispatchEvent(t, new s.EventEx(n, {
                            type: t,
                            currentTarget: i
                        })), 0 === i.listeners(t).length && i.clearProxyEventListener(e)
                    }
                }, this._cachedProxyEventListeners[e] = n, this.htmlElement.addEventListener(e, n))
            }, e.prototype.clearProxyEventListener = function(e) {
                var t = this._cachedProxyEventListeners[e];
                t && (this.htmlElement.removeEventListener(e, t), delete this._cachedProxyEventListeners[e])
            }, e.prototype.createDomNode = function(e) {
                return document.createElement("div")
            }, e.prototype.initializeDomNode = function(e) {
                this.htmlElement._face = this, this.htmlElement.setAttribute("id", this.objectId)
            }, e.prototype.initializeStyle = function(e) {
                this.cssProxies[0] = new u.CSSProxy(this.htmlElement)
            }, e.prototype.cloneStyle = function(e) {
                this.cssProxies[0] = e.cssProxies[0].clone(this.htmlElement)
            }, e.prototype.setCustomStyle = function(e) {
                if (!this.cssProxies[0]) return void o.error("cssProxies[0] should be valid");
                for (var t = 0, i = Object.keys(e); t < i.length; t++) {
                    var n = i[t];
                    this.cssProxies[0].setProperty(n, e[n])
                }
                this.addToRenderer()
            }, e.prototype.initializeClass = function(e) {
                var t = this.htmlElement;
                t.classList.add("fc-element"), t.classList.add("comp-" + this.constructor.prototype.componentName), e.name && e.name !== e.libraryItemName && t.classList.add("id-" + e.name);
                var i = e.libraryItemName && this._getLibraryItemNameBase(e);
                i && t.classList.add(i)
            }, e.prototype.initializeProperties = function(e) {
                e.isMask && (this.mouseEnabled = !1)
            }, e.prototype.cloneProperties = function(e) {
                this._mouseEnabled = e._mouseEnabled, this._hasSize = e._hasSize, this._booted = e._booted, this._scaleXMultiplier = e._scaleXMultiplier, this._scaleYMultiplier = e._scaleYMultiplier, this._xOffset = e._xOffset, this._yOffset = e._yOffset, this._widthOffset = e._widthOffset, this._heightOffset = e._heightOffset
            }, e.prototype._getLibraryItemNameBase = function(e) {
                return e.libraryItemNameBase ? e.libraryItemNameBase : e.libraryItemName.split("/").pop().trim().split(":")[0].trim().replace(/\s+/g, "-").replace(/\[[^\[\]]*\]/g, "").trim()
            }, e.prototype.applyHtmlElementAttributes = function(e) {
                if (e) {
                    var t = this.htmlElement;
                    e.forEach(function(e) {
                        var i = e.split("="),
                            n = i[0],
                            r = i[1] ? i.slice(1).join("=") : "";
                        t.setAttribute(n, r)
                    })
                }
            }, e.prototype.applyHtmlElementStyles = function(e) {
                if (e) {
                    var t = this.htmlElement.style;
                    e.forEach(function(e) {
                        var i = e.split(":"),
                            n = i[0],
                            r = i[1];
                        t[n] = r
                    })
                }
            }, e.prototype.getTransform = function() {
                var e, t, i;
                if (this.guide) {
                    var n = this.getGuidedProperties();
                    e = n.x, t = n.y, i = n.rotation
                } else e = this.x, t = this.y, i = this.rotation;
                var r = this.getTranslation(e, t),
                    o = this.emulatingScale9Grid ? 1 : this.scaleX,
                    a = this.emulatingScale9Grid ? 1 : this.scaleY;
                return [r.x, r.y, o, a, i, this.skewX, this.skewY, this.rotationX, this.rotationY, this.rotationZ]
            }, e.prototype.getGuidedProperties = function() {
                var e = this.x,
                    t = this.y,
                    i = this.rotation,
                    n = this.tweenStatus;
                if (n) {
                    var r = this.guide,
                        o = n.x || {},
                        a = n.y || {},
                        s = (_.isUndefined(o.begin) ? this.x : o.begin) - r.x,
                        c = (_.isUndefined(a.begin) ? this.y : a.begin) - r.y,
                        d = (_.isUndefined(o.end) ? this.x : o.end) - r.x,
                        l = (_.isUndefined(a.end) ? this.y : a.end) - r.y,
                        u = {
                            x0: s,
                            y0: c,
                            x1: d,
                            y1: l
                        },
                        p = this._guidedTweenStatus || {},
                        f = r.htmlElement.firstElementChild;
                    _.isEqual(u, p.translate) || (p.translate = u, p.beginLength = h.SvgUtil.getClosestPoint(f, [s, c]).pointLength, p.endLength = h.SvgUtil.getClosestPoint(f, [d, l]).pointLength, this._guidedTweenStatus = p);
                    var v = p.beginLength,
                        m = p.endLength,
                        g = (m - v) * n.ratio + v,
                        y = m - v,
                        S = y && 1 * y / Math.abs(y),
                        E = f.getPointAtLength(g),
                        T = f.getPointAtLength(g - S);
                    e = E.x + r.x - this.regX, t = E.y + r.y - this.regY, i = this.getGuidedRotation(i, E, T)
                }
                return {
                    x: e,
                    y: t,
                    rotation: i
                }
            }, e.prototype.getGuidedRotation = function(e, t, i) {
                var n = this.motionTween;
                if (!n || !n.orientToPath) return e;
                var r = Math.atan2(t.y - i.y, t.x - i.x),
                    o = 180 * r / Math.PI,
                    a = this._guidedTweenStatus,
                    s = a.beginRotation,
                    c = a.beginRotationOffset;
                return _.isUndefined(s) && (s = e, a.beginRotation = e), !_.isUndefined(c) || t.x === i.x && t.y === i.y || (c = o, a.beginRotationOffset = o), _.isUndefined(c) ? s : s + o - c
            }, e.prototype.getTranslation = function(e, t) {
                return {
                    x: e || 0,
                    y: t || 0
                }
            }, e.prototype.validateNow = function() {
                this.removeFromRenderer(), this.render()
            }, e.prototype.invalidate = function(e) {
                this._invalidFlags[e] = !0, this.addToRenderer()
            }, e.prototype.addToRenderer = function() {
                !this._scheduled && this.htmlElement && this._booted && (y.schedule(this), this._scheduled = !0)
            }, e.prototype.removeFromRenderer = function() {
                this._scheduled && (this._scheduled = !1, y.cancel(this))
            }, e.prototype.invalidateTransform = function() {
                this.invalidate(0)
            }, e.prototype.invalidateTransformOrigin = function() {
                this.invalidate(1)
            }, e.prototype.invalidateAlpha = function() {
                this.invalidate(2)
            }, e.prototype.invalidateDisplay = function() {
                this.invalidate(3)
            }, e.prototype.invalidateEffects = function() {
                this.invalidate(4)
            }, e.prototype.invalidateSize = function() {
                this.invalidate(5)
            }, e.prototype.invalidateLayout = function() {
                this.invalidate(6)
            }, e.prototype.invalidateData = function() {
                this.invalidate(7)
            }, e.prototype.invalidateState = function() {
                this.invalidate(8)
            }, e.prototype.invalidateBlendMode = function() {
                this.invalidate(9)
            }, e.prototype.render = function() {
                this._scheduled = !1;
                var e = this._invalidFlags;
                if (this._invalidFlags = [], e[0] && this.drawTransform(), e[1] && this.drawTransformOrigin(), e[2] && this.drawAlpha(), e[3] && this.drawDisplay(), e[4] && this.drawEffects(), e[5] && this.drawSize(), e[6] && this.drawLayout(), e[7] && this.drawData(), e[8] && this.drawState(), e[9] && this.drawBlendMode(), this.cssProxies)
                    for (var t = 0, i = this.cssProxies; t < i.length; t++) {
                        var n = i[t];
                        n.commit()
                    }
            }, e.prototype.drawTransform = function() {
                var e = this.cssProxies[0],
                    t = this.getTransform();
                e.setProperty("-webkit-transform", t)
            }, e.prototype.drawTransformOrigin = function() {
                this.cssProxies[0].setProperty("-webkit-transform-origin", [this.regX, this.regY])
            }, e.prototype.drawAlpha = function() {
                var e = this.cssProxies[0];
                if (this.data.isMask) e.setProperty("opacity", 0);
                else {
                    var t = this.alpha;
                    e.setProperty("opacity", _.clamp(t, 0, 1))
                }
            }, e.prototype.drawDisplay = function() {
                var e = this.cssProxies[0];
                this.visible && this.exist ? e.removeProperty("display") : e.setProperty("display", "none")
            }, e.prototype.drawEffects = function() {
                var e = this.cssProxies[0],
                    t = p.EffectUtil.getFilterStyle(this);
                t ? (e.setProperty("-webkit-filter", t), "debug" === f.Features.debugLevel && this.htmlElement.setAttribute("edge-filters", t)) : e.removeProperty("-webkit-filter")
            }, e.prototype.drawSize = function() {
                var e = this.cssProxies[0];
                this._hasSize ? (e.setProperty("width", this.width + "px"), e.setProperty("height", this.height + "px")) : (e.removeProperty("width"), e.removeProperty("height"))
            }, e.prototype.drawLayout = function() {
                var e = this.cssProxies[0];
                _.isUndefined(this.layoutPosition) ? e.removeProperty("position") : "absolute" !== this.layoutPosition ? e.setProperty("position", this.layoutPosition) : e.removeProperty("position"), _.isUndefined(this.layoutFloat) || "none" === this.layoutFloat ? e.removeProperty("float") : e.setProperty("float", this.layoutFloat)
            }, e.prototype.drawData = function() {}, e.prototype.drawState = function() {}, e.prototype.drawBlendMode = function() {
                var e = this.cssProxies[0],
                    t = p.EffectUtil.getBlendModeStyle(this);
                t ? e.setProperty(p.EffectUtil.BLEND_MODE_NAME, t) : e.removeProperty(p.EffectUtil.BLEND_MODE_NAME)
            }, e.prototype.drawScale9Grid = function() {
                var e = this.cssProxies[0],
                    t = this.scale9Grid;
                t ? e.setProperty("-edge-scaling-grid", t.left + "px " + t.top + "px " + t.right + "px " + t.bottom + "px") : e.removeProperty("-edge-scaling-grid")
            }, e.prototype.supportsScale9Grid = function() {
                return !1
            }, Object.defineProperty(e.prototype, "screenName", {
                get: function() {
                    return this.idIssuer.screenName
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.getCurrentId = function() {
                return this.idIssuer.id
            }, e.prototype.$ = function(e) {
                if ("$self" === e) return this
            }, e.prototype.$$ = function(e) {
                return "$self" === e ? [this] : []
            }, e.prototype.boot = function(e) {
                e && this._booted || (this._booted = !0, this.validateNow())
            }, e.prototype.reboot = function() {
                var e = this._booted;
                this._booted = !0, 0 !== this._invalidFlags.length && (e ? this.addToRenderer() : this.validateNow())
            }, e.prototype.halt = function() {}, e.prototype.destroy = function(e) {
                this.killCustomTweens(), !e && this.parent && (this.parent.removeChild(this), this.parent = void 0), this.htmlElement._face = void 0, this.emit(s.EventEx.DESTROY), this.removeAllListeners(), this._eventEmitter = void 0, this._cachedProxyEventListeners = void 0, this._guide = void 0, this._mask = void 0, this._scheduled && this.removeFromRenderer(), this.cssProxies = void 0, this.htmlElement = void 0
            }, e.prototype.detach = function() {}, Object.defineProperty(e.prototype, "initialAlpha", {
                get: function() {
                    return void 0 !== this.data.initialAlpha ? this.data.initialAlpha : 1
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.purgeTimeline = function() {}, e.prototype.freezeAnimation = function() {}, e.prototype.thawAnimation = function() {}, e.prototype.killCustomTweens = function() {
                for (var e = 0, t = this.customTweens; e < t.length; e++) {
                    t[e].kill()
                }
                this.customTweens = []
            }, e.prototype.addCustomSetTween = function(e) {
                var t = TweenMax.set(this, e);
                return this.customTweens.push(t), t
            }, e.prototype.addCustomToTween = function(e, t) {
                var i = g.TweenMaxTo(this, e, t);
                return this.customTweens.push(i), i
            }, e.prototype.addCustomFromToTween = function(e, t, i) {
                var n = g.TweenMaxFromTo(this, e, t, i);
                return this.customTweens.push(n), n
            }, e
        }();
    T._signature = S, T._defaultData = {
        visible: !0,
        exist: !0,
        initialExist: !0,
        width: 0,
        height: 0
    }, T.HTML_EVENT_MAP = _.invert({
        click: l.MouseEventEx.CLICK,
        rightclick: l.MouseEventEx.RIGHT_CLICK,
        mouseenter: l.MouseEventEx.MOUSE_OVER,
        mouseleave: l.MouseEventEx.MOUSE_OUT,
        mousemove: l.MouseEventEx.MOUSE_MOVE,
        mousedown: l.MouseEventEx.MOUSE_DOWN,
        mouseup: l.MouseEventEx.MOUSE_UP,
        focus: c.FocusEventEx.FOCUS_IN,
        blur: c.FocusEventEx.FOCUS_OUT,
        keyup: d.KeyboardEventEx.KEY_UP,
        keydown: d.KeyboardEventEx.KEY_DOWN,
        change: s.EventEx.CHANGE
    }), T.MAX_LISTENERS = 0, T = C = r.__decorate([m.component("DisplayObject")], T), t.DisplayObject = T, t.default = T;
    var C
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(129),
        o = i(8),
        a = i(2),
        s = i(210),
        c = i(255),
        d = i(19),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._mouseEventEnabled = !0, t._toggle = !1, t._selected = !1, t.hover = !1, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "enabled", {
                get: function() {
                    return s.ObjectUtil.getPropertyDescriptor(r.UIComponent.prototype, "enabled").get.call(this)
                },
                set: function(e) {
                    this.enabled !== e && (s.ObjectUtil.getPropertyDescriptor(r.UIComponent.prototype, "enabled").set.call(this, e), e || (this.state = "up"), this.invalidateState())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "mouseEventEnabled", {
                get: function() {
                    return this._mouseEventEnabled
                },
                set: function(e) {
                    this._mouseEventEnabled = e, this.invalidateData()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "group", {
                get: function() {
                    return this._group
                },
                set: function(e) {
                    this._group = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "groupName", {
                get: function() {
                    return this._groupName
                },
                set: function(e) {
                    this._groupName = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "toggle", {
                get: function() {
                    return this._toggle
                },
                set: function(e) {
                    this._toggle = e, !1 === e && (this.selected = !1)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "selected", {
                get: function() {
                    return this._selected
                },
                set: function(e) {
                    this._selected !== e && (this._selected = e, this.invalidateState(), this.dispatchEvent(o.EventEx.SELECT, new o.EventEx(o.EventEx.SELECT, {
                        currentTarget: this
                    })))
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "label", {
                get: function() {
                    return this._label
                },
                set: function(e) {
                    this._label !== e && (this._label = e, this.invalidateData())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "customState", {
                get: function() {
                    return this._customState
                },
                set: function(e) {
                    this._customState !== e && (this._customState = e, this.invalidateState())
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.preInitialize = function() {
                e.prototype.preInitialize.call(this), this.textField = this.getChildByName("textField"), this.textField || (this.textField = this.$(".id-textField")), this.hitArea = this.getChildByName("hitArea"), this.handleMouseClick = this._handleMouseClick.bind(this), this.handleMouseOver = this._handleMouseOver.bind(this), this.handleMouseOut = this._handleMouseOut.bind(this), this.handleMouseDown = this._handleMouseDown.bind(this), this.handleMouseUp = this._handleMouseUp.bind(this), !this.cloned && this.data.noTextScale && this.textField && (this.textField.scaleX = 1 / this.scaleX, this.textField.scaleY = 1 / this.scaleY, this.textField.width *= this.scaleX)
            }, t.prototype.initialize = function() {
                e.prototype.initialize.call(this), this.hitArea.addEventListener(a.MouseEventEx.CLICK, this.handleMouseClick), this.hitArea.addEventListener(a.MouseEventEx.MOUSE_OVER, this.handleMouseOver), this.hitArea.addEventListener(a.MouseEventEx.MOUSE_OUT, this.handleMouseOut), this.hitArea.addEventListener(a.MouseEventEx.MOUSE_DOWN, this.handleMouseDown), this.hitArea.addEventListener(a.MouseEventEx.MOUSE_UP, this.handleMouseUp)
            }, t.prototype.drawData = function() {
                e.prototype.drawData.call(this), void 0 !== this.label && this.textField && (this.textField.text = this.label)
            }, t.prototype.drawState = function() {
                e.prototype.drawState.call(this);
                var t = this.enabled ? this.state || "up" : "disabled",
                    i = this.customState ? this.customState + "_" : "";
                i += this.selected ? "selected_" : "", this.hasLabel(i + t) || (t = "up"), this.gotoAndPlay(i + t)
            }, t.prototype.getHitAreaFor = function(e) {
                if (this !== this.hitArea) {
                    if (-1 !== _(Object.getOwnPropertyNames(a.MouseEventEx)).difference(["length", "name", "arguments", "caller", "prototype"]).map(function(e) {
                            return a.MouseEventEx[e]
                        }).value().indexOf(e)) return this.hitArea
                }
            }, t.prototype.addListener = function(t, i) {
                var n = this.getHitAreaFor(t);
                if (n) return n.addListener(t, i);
                e.prototype.addListener.call(this, t, i)
            }, t.prototype.once = function(t, i) {
                var n = this.getHitAreaFor(t);
                if (n) return n.once(t, i);
                e.prototype.once.call(this, t, i)
            }, t.prototype.removeListener = function(t, i) {
                var n = this.getHitAreaFor(t);
                if (n) return n.removeListener(t, i);
                e.prototype.removeListener.call(this, t, i)
            }, t.prototype.emit = function(t) {
                for (var i = [], n = 1; n < arguments.length; n++) i[n - 1] = arguments[n];
                var r = this.getHitAreaFor(t);
                if (r) return r.emit.apply(r, [t].concat(i));
                e.prototype.emit.apply(this, [t].concat(i))
            }, t.prototype._handleMouseClick = function() {
                this.toggle && (this.selected = !this.selected), window.dispatchEvent(new Event(c.ButtonEvent.FX_SOUND_CLICK)), window.dispatchEvent(new CustomEvent(c.ButtonEvent.UET_CLICK, {
                    detail: this.name
                }))
            }, t.prototype._handleMouseOver = function() {
                this.hover = !0, this.mouseEventEnabled && (this.state = "over")
            }, t.prototype._handleMouseOut = function() {
                this.hover = !1, this.mouseEventEnabled && (this.state = "out")
            }, t.prototype._handleMouseDown = function() {
                this.mouseEventEnabled && (this.state = "down")
            }, t.prototype._handleMouseUp = function() {
                this.mouseEventEnabled && (this.state = this.hover && "release" || "up")
            }, t.prototype.reboot = function() {
                e.prototype.reboot.call(this), this.state = "up", this.invalidateState()
            }, t.prototype.destroy = function(t) {
                e.prototype.destroy.call(this, t), this.textField = void 0
            }, t
        }(r.UIComponent);
    l = n.__decorate([d.component("Button")], l), t.Button = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(49),
        o = i(2),
        a = i(145),
        s = i(19),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._enabled = !0, t._focused = !1, t._initialized = !1, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "hitArea", {
                get: function() {
                    return this._hitArea || this
                },
                set: function(e) {
                    this._hitArea = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "enabled", {
                get: function() {
                    return this._enabled
                },
                set: function(e) {
                    if (this._enabled !== e) {
                        var t = [o.MouseEventEx.CLICK, o.MouseEventEx.MOUSE_DOWN, o.MouseEventEx.MOUSE_MOVE, o.MouseEventEx.MOUSE_OUT, o.MouseEventEx.MOUSE_OVER, o.MouseEventEx.MOUSE_UP, o.MouseEventEx.MOUSE_WHEEL],
                            i = this.htmlElement;
                        e ? (this.hitArea.enableEvents(t), i && i.classList.remove("disabled")) : (this.hitArea.disableEvents(t), i && i.classList.add("disabled")), this._enabled = e
                    }
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "focused", {
                get: function() {
                    return this._focused
                },
                set: function(e) {
                    this._focused = e;
                    var t = this.htmlElement;
                    t && (e ? t.focus() : t.blur())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "initialized", {
                get: function() {
                    return this._initialized
                },
                set: function(e) {
                    this._initialized = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "state", {
                get: function() {
                    return this._state
                },
                set: function(e) {
                    this._state !== e && (this._state = e, this.invalidateState())
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.postCreate = function() {
                this.initialized || (this.preInitialize(), e.prototype.postCreate.call(this), this.initialize(), this.initialized = !0)
            }, t.prototype.preInitialize = function() {}, t.prototype.initialize = function() {}, t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t);
                var i = t.parameters;
                i && (this.enabled = a.ParameterUtil.getParameterValue(i.enabled), this.visible = a.ParameterUtil.getParameterValue(i.visible))
            }, t.prototype.cloneProperties = function(t) {
                e.prototype.cloneProperties.call(this, t);
                var i = t;
                this.enabled = i.enabled
            }, t.prototype.configUI = function() {}, t.prototype.changeFocus = function() {}, t.prototype.scrollWheel = function() {}, t
        }(r.MovieClip);
    c = n.__decorate([s.component("UIComponent")], c), t.UIComponent = c
}, , function(e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            type: "reward.endMatch",
            matchResult: e,
            teamBattleResult: t
        }
    }

    function r(e) {
        return {
            type: "reward.receiveReward",
            reward: e
        }
    }

    function o(e) {
        return {
            type: "reward.receiveFestivalPoint",
            festivalPoint: e
        }
    }

    function a(e) {
        return {
            type: "reward.setPrevPlayerStatus",
            prevStatus: e
        }
    }

    function s(e) {
        return {
            type: "reward.setRankedMatchStatus",
            rankedMatch: e
        }
    }

    function c(e) {
        return {
            type: "reward.abandonMatch",
            matchResult: e
        }
    }

    function d(e, t) {
        return {
            type: "reward.expiredMatch",
            matchResult: e,
            teamBattleResult: t
        }
    }

    function l() {
        return {
            type: "reward.setRetired"
        }
    }

    function u(e, t) {
        return {
            type: "reward.updatePickState",
            state: e,
            reward: t
        }
    }

    function p() {
        return {
            type: "reward.clearState"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.endMatch = n, t.receiveReward = r, t.receiveFestivalPoint = o, t.setPrevPlayerStatus = a, t.setRankedMatchStatus = s, t.abandonMatch = c, t.expiredMatch = d, t.setRetired = l, t.updatePickState = u, t.clearState = p
}, , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(181),
        o = i(4),
        a = {
            topSpeed: 1,
            acceleration: 1,
            nitroCapacity: 1,
            strength: 0,
            durability: 0
        },
        s = _.filter(_.values(a), function(e) {
            return 0 !== e
        }).length,
        c = function() {
            function e(e, t, i) {
                this.$translate = e, this.staticdata = t, this.partsService = i, this._partsItemData = _.values(this.staticdata.partsItemData)
            }
            return e.getIStatusOvr = function(e) {
                var t = 0;
                return _.forEach(a, function(i, n) {
                    e[n] && (t += i * e[n])
                }), Math.floor(t / s)
            }, e.sumStatus = function(e) {
                return 1 === e.length ? e[0] : _.reduce(e, function(e, t) {
                    if (!t) return e;
                    var i = {};
                    return _.forEach(e, function(n, r) {
                        i[r] = (e[r] || 0) + (t[r] || 0)
                    }), i
                })
            }, e.prototype.getDefaultVehicles = function() {
                var e = this;
                return this._defaultVehicles || (this._defaultVehicles = _.map(this.staticdata.vehicleData.defaultVehicles, function(t) {
                    return e.createRefinedVehicle(t.code)
                })), this._defaultVehicles
            }, e.prototype.getVehiclesData = function() {
                return this._vehiclesData || (this._vehiclesData = _.values(this.staticdata.vehicleData.vehiclesData)), this._vehiclesData
            }, e.prototype.getManufacturers = function() {
                return this.staticdata.vehicleData.manufacturers
            }, e.prototype.getGradeBonus = function(e, t) {
                return this.staticdata.vehicleUpgradeData.upgradeStatuses[e][t]
            }, e.prototype.getGradeBonusAttr = function(t, i, n) {
                var r = this,
                    o = this.getVehicleData(t),
                    a = o ? [o.status] : [{
                        topSpeed: 0,
                        acceleration: 0,
                        nitroCapacity: 0,
                        strength: 0,
                        durability: 0
                    }];
                return n && _.forEach(n, function(e) {
                    if (e && 0 !== e) {
                        var t = r.getPartDataByCode(e);
                        a.push(t.ovr)
                    }
                }), a.push(this.getGradeMergedBonus(t, i)), e.sumStatus(a)
            }, e.prototype.getGradeMergedBonus = function(e, t) {
                for (var i = this.staticdata.vehicleUpgradeData.upgradeStatuses[e], n = _.clone(i[0]), r = 1; r <= t; r++) _.forEach(i[r], function(e, t) {
                    return n[t] += e
                });
                return n
            }, e.prototype.getGradeBonusOvr = function(t, i) {
                if (void 0 !== t && void 0 !== i) {
                    var n = this.getGradeBonusAttr(t, i);
                    return e.getIStatusOvr(n)
                }
            }, e.prototype.getPartData = function(e, t, i) {
                return _.find(this._partsItemData, {
                    type: e,
                    level: t,
                    clazz: i
                })
            }, e.prototype.getPartDataByCode = function(e) {
                return this.staticdata.partsItemData[e]
            }, e.prototype.getVehicleData = function(e, t) {
                return void 0 === t && (t = 1), 1 !== t ? this.getGradeVehicleData(e, t) : this.staticdata.vehicleData.vehiclesData[e]
            }, e.prototype.getGradeVehicleData = function(t, i) {
                void 0 === i && (i = 1);
                var r = [this.getGradeMergedBonus(t, i)];
                r.push(this.staticdata.vehicleData.vehiclesData[t].status);
                var o = e.sumStatus(r),
                    a = e.getIStatusOvr(o);
                return n.__assign({}, this.staticdata.vehicleData.vehiclesData[t], {
                    status: o,
                    ovr: a
                })
            }, e.prototype.getDefaultTuningData = function(e) {
                var t = this.staticdata.tuningData.tuningVehicleData[e];
                return {
                    colorCode: t.defaultColorCode,
                    wrapCode: t.defaultWrapCode,
                    wheelCode: t.defaultWheelCode
                }
            }, e.prototype.getCommission = function(e, t) {
                return this.staticdata.vehicleUpgradeData.upgradeCommision[e][t] || 0
            }, e.prototype.getGlobalPenalty = function() {
                return this.staticdata.vehiclePenalty
            }, e.prototype.createRefinedVehicle = function(e, t, i) {
                return void 0 === t && (t = 1), this.decorateVehicle({
                    code: e,
                    grade: t,
                    parts: i
                })
            }, e.prototype.decorateVehicle = function(t) {
                var i = this.getVehicleData(t.code),
                    n = t.grade || 1,
                    o = "string" != typeof t.status && t.status || this.getGradeBonusAttr(t.code, n, t.parts),
                    a = t.paint || t.paintBase || this.getDefaultTuningData(t.code);
                return _.assign({
                    grade: n,
                    status: o,
                    paint: a,
                    id: t.id || t.vid || "",
                    code: t.code || t.vcode,
                    ovr: t.ovr || e.getIStatusOvr(o),
                    createdat: t.createdat || new Date,
                    parts: t.parts || t.partscodes || r.default.EmptyParts
                }, _.pick(i, ["clazz", "manufacturerCode", "tune"]), _.pick(t, ["clazz", "manufacturerCode", "price", "favorite", "igr", "remainingCount", "did"]))
            }, e.prototype.refineGarageVehicle = function(e) {
                var t = this.getVehicleData(e.code),
                    i = e.paint,
                    n = e.steering;
                return _.assign({
                    paint: i,
                    price: 0,
                    steering: n
                }, _.pick(t, ["clazz", "status", "manufacturerCode", "tune"]), _.pick(e, ["id", "code", "grade", "ovr", "price", "parts", "status", "createdat", "favorite", "igr", "remainingCount", "did"]))
            }, e.prototype.resolveVehicleCustom = function(e) {
                var t = String(e.code);
                if (9 !== t.length) throw new Error("Invalid VEHICLE_CUSTOM (code: " + t + ")");
                var i = Number(_.trimStart(t.slice(1, 3), "0")),
                    r = Number(_.trimStart(t.slice(4, 5), "0"));
                return n.__assign({}, this.getVehicleData(i), {
                    grade: r
                })
            }, e.prototype.resolveTrialVehicle = function(e) {
                var t = String(e.code);
                if (9 !== t.length) throw new Error("Invalid TRIAL_VEHICLE (code: " + t + ")");
                var i = Number(_.trimStart(t.slice(2, 5), "0")),
                    r = Number(_.trimStart(t.slice(5, 7), "0")),
                    o = Number(_.trimStart(t.slice(7), "0"));
                return n.__assign({}, this.getVehicleData(i), {
                    grade: r,
                    remainingCount: o
                })
            }, e
        }();
    c.$inject = ["$translate", "staticdataLoaderService", "partsService"], t.VehicleDataService = c, angular.module("edge.components").factory("vehicleDataService", o.default.generateService(c))
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        if (e) {
            (_.isUndefined(t) || _.isNull(t)) && (t = "");
            var i = null;
            e instanceof d.Button ? e.label = t : e instanceof u.default ? e.text = t : e instanceof l.TextField ? e.text = t : (i = e.$("textField")) ? i.text = t : e.text = t
        }
    }

    function r(e, t) {
        if (e) {
            (_.isUndefined(t) || _.isNull(t)) && (t = "");
            var i = null;
            e instanceof d.Button ? e.label = t : e instanceof u.default ? e.text = t : e instanceof l.TextField ? e.htmlText = t : (i = e.$("textField")) ? i.htmlText = t : e.text = t
        }
    }

    function o(e, t) {
        e && (e.hasSize = t)
    }

    function a(e, t) {
        e && (e.visible = t)
    }

    function s(e, t) {
        e && e instanceof d.Button && (e.enabled = t)
    }

    function c(e, t) {
        e && e instanceof d.Button && (e.selected = t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var d = i(128),
        l = i(209),
        u = i(545);
    t.bindText = n, t.bindHtml = r, t.hasSize = o, t.visible = a, t.enableButton = s, t.selectButton = c
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "view.flags.matchmaking",
            isOn: e
        }
    }

    function r(e) {
        return {
            type: "view.flags.openworld",
            isOn: e
        }
    }

    function o(e) {
        return {
            type: "view.flags.preventGnbHub",
            prevent: e
        }
    }

    function a(e) {
        return {
            type: "view.flags.openworldMap",
            isOn: e
        }
    }

    function s(e) {
        return {
            type: "view.flags.appearanceEdit",
            isShow: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.matchmaking = n, t.openworld = r, t.preventGnbHub = o, t.openworldMap = a, t.appearanceEdit = s
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "trade.setDealerNpc",
            dealerNpc: e
        }
    }

    function r(e) {
        return {
            type: "trade.setTradeRecord",
            tradeRecord: e
        }
    }

    function o(e) {
        return {
            type: "trade.selectItem",
            id: e
        }
    }

    function a(e) {
        return {
            type: "trade.selectItems",
            ids: e
        }
    }

    function s() {
        return {
            type: "trade.toggleViewAll"
        }
    }

    function c(e) {
        return {
            type: "trade.setManufacturerFilter",
            manufacturerFilter: e
        }
    }

    function d() {
        return {
            type: "trade.reset"
        }
    }

    function l() {
        return {
            type: "trade.clearSelected"
        }
    }

    function u(e) {
        return {
            type: "trade.showEffect",
            tradeVehicleResult: e
        }
    }

    function p() {
        return {
            type: "trade.hideEffect"
        }
    }

    function h(e, t) {
        return {
            type: "trade.setCooldown",
            dealerNpcCode: e,
            timestamp: t
        }
    }

    function f() {
        return {
            type: "trade.cooldown"
        }
    }

    function v(e) {
        return {
            type: "trade.setVehicleAvailables",
            vehicleAvailables: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.setDealerNpc = n, t.setTradeRecord = r, t.selectItem = o, t.selectItems = a, t.toggleViewAll = s, t.setManufacturerFilter = c, t.reset = d, t.clearSelected = l, t.showEffect = u, t.hideEffect = p, t.setCooldown = h, t.cooldown = f, t.setVehicleAvailables = v
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "timetrial.showTrackInfo",
            trackCode: e
        }
    }

    function r() {
        return {
            type: "timetrial.hideTrackInfo"
        }
    }

    function o(e) {
        return {
            type: "timetrial.updateTimetrialPlayerInfo",
            info: e
        }
    }

    function a(e) {
        return {
            type: "timetrial.updateTimetrialSeasonInfo",
            seasonInfo: e
        }
    }

    function s(e) {
        return {
            type: "timetrial.updateTimetrialPlatinumMedalInfo",
            platinumTrackCodes: e.platinumTrackCodes
        }
    }

    function c(e) {
        return {
            type: "timetrial.selectVehicle",
            vehicle: e
        }
    }

    function d(e) {
        return {
            type: "timetrial.selectGhost",
            ghostRecord: e
        }
    }

    function l(e) {
        return {
            type: "timetrial.fetchGhostRecords",
            ghostRecords: e
        }
    }

    function u(e) {
        return {
            type: "timetrial.updateCreatePlayer",
            response: e
        }
    }

    function p(e) {
        return {
            type: "timetrial.updateMatchParam",
            matchParam: e
        }
    }

    function h(e) {
        return {
            type: "timetrial.updateMatchResult",
            matchResult: e
        }
    }

    function f(e) {
        return {
            type: "timetrial.updateMatchId",
            matchId: e
        }
    }

    function v() {
        return {
            type: "timetrial.clearResult"
        }
    }

    function m() {
        return {
            type: "timetrial.clearMatch"
        }
    }

    function g(e) {
        for (var t = {
                seasonId: e.seasonId
            }, i = 0, n = e.trackMedalRecords; i < n.length; i++) {
            var r = n[i];
            t[r.trackCode] = _.mapValues(r.medalSteps, function(e) {
                return e.laptime
            })
        }
        return {
            type: "timetrial.updateMedalLaptimes",
            medalLaptimes: t
        }
    }

    function y() {
        return {
            type: "timetrial.clearPrevSeasonInfo"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.showTrackInfo = n, t.hideTrackInfo = r, t.updateTimetrialPlayerInfo = o, t.updateTimetrialSeasonInfo = a, t.updateTimetrialPlatinumMedalInfo = s, t.selectVehicle = c, t.selectGhost = d, t.fetchGhostRecords = l, t.updateCreatePlayer = u, t.updateMatchParam = p, t.updateMatchResult = h, t.updateMatchId = f, t.clearResult = v, t.clearMatch = m, t.updateMedalLaptimes = g, t.clearPrevSeasonInfo = y
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1230),
        a = i(605),
        s = i(606),
        c = i(308),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this;
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay("CONTAINER", "intro")
                }), this.addChildBinder(this.stage, o.HudDistanceMapBinder), this.addChildBinder(this.stage, s.HudRecordBinder), this.addChildBinder(".CONTAINER .id-passNoticeContainer", c.HudLapPassNoticeBinder), this.addChildBinder("CONTAINER", a.HudLeaderboardBinder), this.visible("CONTAINER_DRIFT", !1), this.visible("CONTAINER_foxhunting", !1)
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("hudService")], d.prototype, "hudService", void 0), t.HudTimeRankBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = function() {
            function e() {}
            return e
        }();
    a.SELECTED_TAB = "event-selected-tab", t.SortTabUiEvent = a;
    var s = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            var t = this,
                i = e.tabInfos,
                n = e.initSelectedIndex,
                r = e.initDescending,
                a = e.disableMouseEvent,
                s = e.selectedTab;
            this.tabList = [], _.forEach(i, function(e, i) {
                var n = t.getFace(".id-sortingTitle" + (i + 1));
                n.hasSize = !0, n.mouseEventEnabled = !a, t.translate(n, e.title), a || t.addManagedListener(n, o.MouseEventEx.CLICK, function(e) {
                    t.selectTab(i), s && s()
                }), t.tabList.push(n)
            }), this.visibleAll(".SortingArrow", !a), this.selectTab(n || 0, r || !1)
        }, t.prototype.selectTab = function(e, t) {
            var i = this,
                n = this.getProps(),
                r = (n.tabInfos, n.initSelectedIndex, n.initDescending),
                o = n.disableMouseEvent;
            _.isUndefined(t) ? this.selectedIndex === e ? this.descending = !this.descending : this.descending = r : this.descending = t, this.selectedIndex = e, this.tabList.forEach(function(t, n) {
                t.selected = !o && n === e;
                var r = t.$(".SortingArrow");
                i.gotoAndStop(r, i.descending ? "down" : "up"), o || i.visible(r, n === e)
            })
        }, t.prototype.getSelectedTabInfo = function() {
            return {
                tabInfo: this.getProps().tabInfos[this.selectedIndex],
                descending: this.descending
            }
        }, t
    }(r.Binder);
    t.SortTabBinder = s
}, , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e.fix = function(e, t) {
            null == t && (t = 1);
            var i = Math.pow(10, t);
            return (0 | Math.round(e * i)) / i
        }, e.limit = function(e, t) {
            return e > t ? t : e < -t ? -t : e
        }, e
    }();
    t.NumberUtil = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = function() {
            function e() {}
            return e.getParameterValue = function(e) {
                var t = this;
                if (!n.isPlainObject(e) || !n.isString(e.valueType)) return e;
                var i = e.value;
                switch (e.valueType) {
                    case "Array":
                        return Array.isArray(i) ? i : [];
                    case "Boolean":
                        return "true" === i;
                    case "List":
                        return i;
                    case "Number":
                        return parseFloat(i);
                    case "Object":
                        if (!n.isPlainObject(i)) return i;
                        var r = {};
                        return Object.keys(i).forEach(function(e) {
                            r[e] = t.getParameterValue(i[e])
                        }), r;
                    case "String":
                        return i
                }
            }, e
        }();
    t.ParameterUtil = r
}, , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.MissingPlayer = 1] = "MissingPlayer", e[e.FailedToCreateRoom = 2] = "FailedToCreateRoom", e[e.MissingRoomId = 3] = "MissingRoomId", e[e.FailedToAddVisibleRoom = 4] = "FailedToAddVisibleRoom", e[e.FailedToRemoveVisibleRoom = 5] = "FailedToRemoveVisibleRoom", e[e.FailedToAddInvisibleRoom = 6] = "FailedToAddInvisibleRoom", e[e.FailedToRemoveInvisibleRoom = 7] = "FailedToRemoveInvisibleRoom", e[e.FailedToFindPlayer = 8] = "FailedToFindPlayer", e[e.FailedToFindVehicle = 9] = "FailedToFindVehicle", e[e.FailedToFindRoom = 10] = "FailedToFindRoom", e[e.FailedToFindPlayerForChangingStatus = 11] = "FailedToFindPlayerForChangingStatus", e[e.FailedToFindRoom2 = 12] = "FailedToFindRoom2", e[e.WrongRoomPasswd = 13] = "WrongRoomPasswd", e[e.NotEnoughSlot = 14] = "NotEnoughSlot", e[e.WrongSlotNumber = 15] = "WrongSlotNumber", e[e.FailedToFindRoom3 = 16] = "FailedToFindRoom3", e[e.PlayerisNotHost = 17] = "PlayerisNotHost", e[e.NotAllReadyStatus = 18] = "NotAllReadyStatus", e[e.FailedToFindRoom4 = 19] = "FailedToFindRoom4", e[e.FailedToFindPlayer3 = 20] = "FailedToFindPlayer3", e[e.FailedToFindNewHost = 21] = "FailedToFindNewHost", e[e.FailedToFindRoom5 = 22] = "FailedToFindRoom5", e[e.NotHostPlayer = 23] = "NotHostPlayer", e[e.CannotKickHost = 24] = "CannotKickHost", e[e.FailedToFindPlayerForKick = 25] = "FailedToFindPlayerForKick", e[e.FailedToFindRoom6 = 26] = "FailedToFindRoom6", e[e.FailedToFindPlayerForChangingVehicle = 27] = "FailedToFindPlayerForChangingVehicle", e[e.FailedToFindVidAvailableForChangingVehicle = 28] = "FailedToFindVidAvailableForChangingVehicle", e[e.FailedToFindRoom7 = 29] = "FailedToFindRoom7", e[e.NotHostPlayer2 = 30] = "NotHostPlayer2", e[e.FailedToFindRoom8 = 31] = "FailedToFindRoom8", e[e.NotHostPlayerInChangingMaxVehicleClazz = 32] = "NotHostPlayerInChangingMaxVehicleClazz", e[e.FailedToFindRoom9 = 33] = "FailedToFindRoom9", e[e.NotHostPlayerInChangingHost = 34] = "NotHostPlayerInChangingHost", e[e.SameHostSlot = 35] = "SameHostSlot", e[e.FailedToFindPlayerWhoTryingToChangeHost = 36] = "FailedToFindPlayerWhoTryingToChangeHost", e[e.FailedToFindRoom10 = 37] = "FailedToFindRoom10", e[e.NotHostPlayerInChangingTrack = 38] = "NotHostPlayerInChangingTrack", e[e.TriedToLockSlotPlayerExisted = 39] = "TriedToLockSlotPlayerExisted", e[e.SidRoomIdMapDoesNotExist = 40] = "SidRoomIdMapDoesNotExist", e[e.AlreadyEnteredThisRoom = 41] = "AlreadyEnteredThisRoom", e[e.RoomTitleHasBanKeyword = 42] = "RoomTitleHasBanKeyword", e[e.NotMatchRoomId = 43] = "NotMatchRoomId", e[e.NotMatchedTeamRule = 44] = "NotMatchedTeamRule", e[e.NotTeamModeRoom = 45] = "NotTeamModeRoom", e[e.FailedToFindPlayerForChangingTeam = 46] = "FailedToFindPlayerForChangingTeam", e[e.NotMatchedLicenseCode = 47] = "NotMatchedLicenseCode", e[e.NotExistJoinableRoom = 48] = "NotExistJoinableRoom", e[e.FailedToStartDueToClassLimit = 49] = "FailedToStartDueToClassLimit", e[e.SimulatorParamErrorBecauseNumOfRankMustLessThanNumOfPlayers = 50] = "SimulatorParamErrorBecauseNumOfRankMustLessThanNumOfPlayers", e[e.InvalidTrack = 51] = "InvalidTrack", e[e.NotMatchedTrackChannelFilter = 52] = "NotMatchedTrackChannelFilter", e[e.ProperTrackNotExist = 53] = "ProperTrackNotExist", e[e.CannotChangeStatusInPlaying = 54] = "CannotChangeStatusInPlaying", e[e.CannotChangeVehicleInPlaying = 55] = "CannotChangeVehicleInPlaying", e[e.CannotChangeTeamInPlaying = 56] = "CannotChangeTeamInPlaying", e[e.RoomHasAlreadyBegun = 57] = "RoomHasAlreadyBegun", e[e.CannotFindTrackData = 58] = "CannotFindTrackData", e[e.ClientVersionNotMatch = 59] = "ClientVersionNotMatch", e[e.FoxhuntingIndividualRuleNotMatched = 60] = "FoxhuntingIndividualRuleNotMatched", e[e.CannotFindDesignData = 61] = "CannotFindDesignData", e[e.AnyTrackInTheModeNotFound = 62] = "AnyTrackInTheModeNotFound", e[e.NotExistPlayerInfo = 63] = "NotExistPlayerInfo", e[e.NotExistQuickTrackDataAboutMinLevel = 64] = "NotExistQuickTrackDataAboutMinLevel", e[e.ProperTrackNotExistForQuickMatch = 65] = "ProperTrackNotExistForQuickMatch", e[e.NotEnoughSlot2 = 66] = "NotEnoughSlot2", e[e.FailedToFindVehicleWhenRequestingMatch = 67] = "FailedToFindVehicleWhenRequestingMatch", e[e.CannotFindTrackDataInChangingTrack = 68] = "CannotFindTrackDataInChangingTrack", e[e.NotHostPlayerInChangingLockSlot = 69] = "NotHostPlayerInChangingLockSlot", e[e.PursuitIndividualRuleNotMatched = 70] = "PursuitIndividualRuleNotMatched", e[e.FailedToValidateHostIgrVehicle = 71] = "FailedToValidateHostIgrVehicle", e[e.NoSessionPidWhenRoomIsCreated = 901] = "NoSessionPidWhenRoomIsCreated", e[e.NoSessionPidWhenEnterTheRoom = 902] = "NoSessionPidWhenEnterTheRoom", e[e.NoSessionPidWhenChangeStatus = 903] = "NoSessionPidWhenChangeStatus", e[e.NoSessionPidWhenLeaveTheRoom = 904] = "NoSessionPidWhenLeaveTheRoom", e[e.NoSessionPidWhenStartTheMatch = 905] = "NoSessionPidWhenStartTheMatch", e[e.NoSessionPidWhenQuickJoinRoom = 906] = "NoSessionPidWhenQuickJoinRoom", e[e.NoSessionPidWhenKickTheRoom = 907] = "NoSessionPidWhenKickTheRoom", e[e.NoSessionPidWhenChangeVehicle = 908] = "NoSessionPidWhenChangeVehicle", e[e.NoSessionPidWhenChangeTrack = 909] = "NoSessionPidWhenChangeTrack", e[e.NoSessionPidWhenChangeMaxVehicleClazz = 910] = "NoSessionPidWhenChangeMaxVehicleClazz", e[e.NoSessionPidWhenChangeHost = 911] = "NoSessionPidWhenChangeHost", e[e.NoSessionPidWhenChangeLocked = 912] = "NoSessionPidWhenChangeLocked", e[e.NoSessionPidWhenRetriveRoom = 913] = "NoSessionPidWhenRetriveRoom", e[e.NoSessionPidWhenChangeTeam = 914] = "NoSessionPidWhenChangeTeam", e[e.NoSessionPidWhenQuickMatchmaking = 915] = "NoSessionPidWhenQuickMatchmaking"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, , , function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "player-info.updatePlayer",
            player: e
        }
    }

    function r(e) {
        return {
            type: "player-info.updateSnapshot",
            snapshot: e
        }
    }

    function o(e, t) {
        return {
            type: "player-info.reserveBonus",
            key: e,
            bonus: t
        }
    }

    function a(e) {
        return {
            type: "player-info.applyBonus",
            key: e
        }
    }

    function s(e) {
        return function(i, n) {
            i(r(n().reward.prevStatus));
            var a = e.sp,
                s = e.exp,
                c = {
                    sp: a.base + a.increment,
                    exp: s.base + s.increment
                };
            i(o(t.MatchRewardKey, c))
        }
    }

    function c(e, t) {
        return function(i, n) {
            if (i(a(e)), _.isEmpty(n().playerInfo.pendingBonuses)) {
                var o = n().player,
                    s = o.sp,
                    c = o.exp,
                    d = o.level;
                i(r({
                    sp: s,
                    exp: c,
                    level: d
                }))
            } else {
                for (var c = n().playerInfo.exp, d = n().player.level, l = d; l > 0 && !(t.getMaxExpByLevel(l) <= c); --l);
                i(r({
                    level: l
                }))
            }
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.updatePlayer = n, t.updateSnapshot = r, t.reserveBonus = o, t.MatchRewardKey = "match.reward", t.reserveMatchReward = s, t.applyBonusAndUpdateLevel = c
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "match.createMatch",
            match: e
        }
    }

    function r() {
        return {
            type: "match.leaveMatch"
        }
    }

    function o(e) {
        return {
            type: "match.updatePlayer",
            changes: e
        }
    }

    function a(e) {
        return {
            type: "match.addRecord",
            record: e
        }
    }

    function s(e) {
        return {
            type: "match.createDedicatedServer",
            server: e
        }
    }

    function c(e) {
        return {
            type: "match.updatePlayerLoadingProgress",
            changes: e
        }
    }

    function d(e) {
        return {
            type: "match.fillAiPlayers",
            players: e
        }
    }

    function l() {
        return {
            type: "match.updateDistanceCheckEnd"
        }
    }

    function u(e) {
        return {
            type: "match.updatePlayerArrested",
            pid: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.createMatch = n, t.leaveMatch = r, t.updatePlayer = o, t.addRecord = a, t.createDedicatedServer = s, t.updatePlayerLoadingProgress = c, t.fillAiPlayers = d, t.updateDistanceCheckEnd = l, t.updatePlayerArrested = u
}, , , , , , , function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "parts-combine.showCraftPopup",
            code: e
        }
    }

    function r(e, t) {
        return {
            type: "parts-combine.showUpgradePopup",
            vehicle: e,
            partsType: t
        }
    }

    function o() {
        return {
            type: "parts-combine.hide"
        }
    }

    function a(e, t) {
        return {
            type: "parts-combine.craftComplete",
            part: e,
            isSuccess: t
        }
    }

    function s(e, t, i) {
        return {
            type: "parts-combine.upgradeComplete",
            before: e,
            after: t,
            isSuccess: i
        }
    }

    function c() {
        return {
            type: "parts-combine.retryCraft"
        }
    }

    function d() {
        return {
            type: "parts-combine.retryUpgrade"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.showCraftPopup = n, t.showUpgradePopup = r, t.hide = o, t.craftComplete = a, t.upgradeComplete = s, t.retryCraft = c, t.retryUpgrade = d
}, , function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "navigation.init",
            state: e
        }
    }

    function r(e, t, i) {
        return i = e.state || i, e.children && e.children.length ? r(t[e.children[0]], t, i) : i
    }

    function o(e, t) {
        return function(i, n) {
            var o = n().navigation,
                a = r(e, o.navs),
                c = o.uiState === a;
            a && t.go(a).catch(function(e) {
                c = !0
            }).finally(function() {
                i(s(c))
            })
        }
    }

    function a(e) {
        return {
            type: "navigation.showPreview",
            nav: e
        }
    }

    function s(e) {
        return {
            type: "navigation.closePreview",
            restoreOriginalUiState: e
        }
    }

    function c(e) {
        return {
            type: "navigation.changeLocalization",
            translate: e
        }
    }

    function d(e) {
        return {
            type: "navigation.navigated",
            uiState: e
        }
    }

    function l() {
        return {
            type: "navigation.setActivated",
            activated: !1
        }
    }

    function u() {
        return {
            type: "navigation.setActivated",
            activated: !0
        }
    }

    function p(e) {
        return {
            type: "navigation.lockNavigate",
            navOrState: e
        }
    }

    function h(e) {
        return {
            type: "navigation.unlockNavigate",
            navOrState: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.init = n, t.requestNavigate = o, t.showPreview = a, t.closePreview = s, t.changeLocalization = c, t.navigated = d, t.deactivate = l, t.activate = u, t.lock = p, t.unlock = h
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "production.fetch",
            props: e
        }
    }

    function r(e) {
        return {
            type: "production.changeFilter",
            props: e
        }
    }

    function o(e) {
        return {
            type: "production.selectVehicle",
            props: e
        }
    }

    function a(e) {
        return {
            type: "production.productVehicle",
            props: e
        }
    }

    function s(e) {
        return {
            type: "production.updatePrice",
            props: e
        }
    }

    function c() {
        return {
            type: "production.removeFilter"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.fetch = n, t.changeFilter = r, t.selectVehicle = o, t.productVehicle = a, t.updatePrices = s, t.removeFilter = c
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "ranked-event.finishEvent",
            gameMode: e
        }
    }

    function r(e, t) {
        return {
            type: "ranked-event.pushEvents",
            gameMode: e,
            events: t
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.finishEvent = n, t.pushEvents = r
}, function(e, t, i) {
    "use strict";

    function n() {
        var e = r.store.getState(),
            t = e.license,
            i = e.match,
            n = e.timetrial;
        return _.isEmpty(t.currentTest) ? _.isEmpty(n.matchParam) ? _.isEmpty(i.match) ? void 0 : i.match.featureType : "timetrial" : "license"
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(3);
    t.getFeatureType = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(16),
        a = i(30),
        s = i(2),
        c = i(3),
        d = i(12),
        l = i(94),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(".TopIcons", !0), this.hasSize(".NewIcon", !0), this.hasSize(".FavoriteIcon", !0), this.resizeTrialIconByText()
            }, t.prototype.onAddedToScene = function() {
                this.bindExclusiveIcon()
            }, t.prototype.isVehicleNew = function(e) {
                if (!e) return !1;
                if (e.isUserChecked || e.igr || e.isExclusive) return !1;
                var t = c.store.getState().player;
                if (_.isEmpty(t)) return !1;
                var i = t.checkedat.vehicle.toString();
                return e.checkedat && new Date(e.checkedat) > new Date(i)
            }, t.prototype.getOvrFace = function() {
                var e = this.face.$$(".id-ovr .id-textField, .id-ovr .comp-TextField");
                return e = e.length ? e : this.face.$$(".id-ovr"), e[0]
            }, t.prototype.updateNewIcon = function() {
                var e = !this.props.muteStatusIcon && this.isVehicleNew(this.props.vehicle);
                this.visibleAll(".NewIcon", e)
            }, t.prototype.bindPaint = function(e) {
                var t = this,
                    i = this.face.$$(".id-painting .id-color");
                if (i) {
                    var n = e.vehicle.paint,
                        r = e.mutePaint;
                    _.forEach(i, function(e) {
                        t.hasSize(e, !0);
                        var i = t.tuningShopService.getTuningItemByCode(n.colorCode);
                        i && e.setCustomStyle({
                            "background-color": i.rgb.solid
                        }), e.visible = !r && !!i
                    })
                }
            }, t.prototype.updateTrialIcon = function(e) {
                this.visibleAll(".id-expVehicleIcon", d.isTrialVehicle(e.vehicle))
            }, t.prototype.resizeTrialIconByText = function() {
                var e = this.getFace(".id-expVehicleIcon");
                if (e) {
                    var t = e.$(".id-textField"),
                        i = e.$(".id-background");
                    t.text = this.$filter("translate")("EXPVEHICLE_THUMBNAIL_TEXT"), t.render();
                    var n = function(e) {
                            var t = $(e.htmlElement).clone().css({
                                    width: "auto",
                                    top: "100%"
                                }).appendTo("#edge-ui"),
                                i = t.width();
                            return t.remove(), i
                        }(t) + 24,
                        r = n / i.width;
                    i.regX = 0, i.scaleXMultiplier = r, t.x = i.x + 12
                }
            }, t.prototype.bindExclusiveIcon = function() {
                var e = this.getFace(".id-exclusiveIcon");
                e && this.translate(e, "EXCLUSIVEVEHICLE_THUMBNAIL_TEXT")
            }, t.prototype.updateExclusiveIcon = function(e) {
                this.visible(".id-exclusiveIcon", e.vehicle.isExclusive)
            }, t.prototype.update = function(i) {
                e.prototype.update.call(this, i);
                var n = !_.isEmpty(i);
                this.enableButton(this.face, n);
                var o = i.vehicle,
                    a = i.muteStatusIcon,
                    s = i.ovrSwing;
                if (o) {
                    this.bindTextAll(".id-vehicleClass", o.clazz), this.bindTextAll(".id-manufacturerName", this.$filter("manufacturerName")(o.manufacturerCode)), this.bindHtmlAll(".id-vehicleName", this.$filter(i.multiline ? "vehicleShortName" : "vehicleName")(o.code)), this.gotoAndStopAll(".id-vehicleGrade", "grade" + o.grade), this.visible(".id-vehicleValue", !d.isTrialVehicle(o)), this.visible(".id-expVehicleCount", d.isTrialVehicle(o)), d.isTrialVehicle(o) ? (this.translate(".id-expVehicleCount .id-textField", "EXPVEHICLE_REMAININGCOUNT"), this.bindText(".id-expVehicleCount .id-currentNum", o.remainingCount)) : (this.hasSize(".id-vehicleValue", !0), this.hasSize(".id-vehicleValue .id-textField", !1), this.bindTextAll(".id-vehicleValue", r.default.toMoney(o.price || 0)), this.translate(".id-sp", "COMMON_VEHICLEVALUEUNIT")), this.drawExternalImageAll(".BeautyshotImage", this.$filter("cdn_beautyshot")(o.code)), this.updateNewIcon();
                    var c = !a && o.favorite;
                    this.gotoAndStopAll(".FavoriteIcon, .TagContainer", c ? "favorite" : "normal"), this.visibleAll(".FavoriteIcon", c), this.bindPaint(i), this.apply(".PcCafeIcon", l.igr, o.igr), this.updateTrialIcon(i), this.updateExclusiveIcon(i);
                    var u = this.getOvrFace();
                    if (this.ovr !== o.ovr && u) {
                        if (s) {
                            var p = $(u.htmlElement),
                                h = i.duration || 700;
                            p.stop().prop("Counter", p.text()).animate({
                                Counter: o.ovr
                            }, {
                                duration: h,
                                easing: "swing",
                                step: function(e) {
                                    return p.text(Math.ceil(e))
                                },
                                queue: !1
                            })
                        } else this.bindTextAll(".id-ovr", o.ovr);
                        this.ovr = o.ovr
                    }
                }
                _.isEmpty(i) || (i.disableMouse ? this.face.disableEvents(t.MouseInteractionEvents) : this.face.enableEvents(t.MouseInteractionEvents))
            }, t
        }(a.Binder);
    u.MouseInteractionEvents = [s.MouseEventEx.MOUSE_OVER, s.MouseEventEx.MOUSE_OUT, s.MouseEventEx.MOUSE_DOWN, s.MouseEventEx.MOUSE_UP], n.__decorate([o.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([o.autowired("tuningShopService")], u.prototype, "tuningShopService", void 0), t.VehicleBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(28),
        a = i(2),
        s = i(50),
        c = i(164),
        d = i(166),
        l = i(12),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                this.pagingContainer = this.getFace(".id-vehicleTileList") || this.getFace(".id-VehicleTileList"), this.pagingContainer.hasSize = !0, e.prototype.onFaceReady.call(this), this.itemCountPerPage = this.props.itemCountPerPage, this.rowSize = this.props.rowSize, this.translate(".id-titleLabel", this.props.title || "WORLD_VEHICLESELECTLIST_INVENTORY"), this.translate(".id-retentionLabel", this.props.retention || "LOBBY_VEHICLESELECTLIST_COUNT"), _.times(this.props.itemCountPerPage, function(e) {
                    var i = t.getFace(".id-current .id-vehicleCard" + (e + 1)),
                        n = t.getFace(".id-next .id-vehicleCard" + (e + 1));
                    i.hasSize = !0, n.hasSize = !0, t.currListBinder.push(t.addChildBinder(i, c.VehicleBinder)), t.nextListBinder.push(t.addChildBinder(n, c.VehicleBinder)), t.addManagedListener(i, a.MouseEventEx.CLICK, t.onClick.bind(t, e)), t.addManagedListener(i, a.MouseEventEx.MOUSE_OVER, t.onOver.bind(t, e)), t.addManagedListener(i, a.MouseEventEx.MOUSE_OUT, t.onOut.bind(t))
                }), this.addManagedListener(this.pagingContainer, "reset", function(e) {
                    t.gotoAndPlay(t.pagingContainer, "default"), t.isPaging = !1, setTimeout(function() {
                        t.currListBinder.some(function(e, t) {
                            var i = e.face,
                                n = i.currentLabel;
                            return ("over" === n || "selected_over" === n) && !e.face.emit(a.MouseEventEx.MOUSE_OVER)
                        })
                    })
                }), this.bindList = function(e, i) {
                    var n = t.chunkedVehicles[i] || [];
                    e.forEach(function(e, i) {
                        t.bindVehicleInfo(e, n[i], i)
                    })
                }, this.movePageCallback1 = function() {
                    t.onOut()
                }
            }, t.prototype.update = function(e) {
                this.vehicles = e.vehicles, e.selected && (this.selectedId = e.selected), this.pageIndex = 0, this.initVehicleList(), this.resetScrollBar()
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this), this.resetScrollBar()
            }, t.prototype.initVehicleList = function() {
                this.chunkedVehicles = _.chunk(this.vehicles, this.itemCountPerPage), this.pageSize = Math.max(1, this.chunkedVehicles.length), this.isPaging = !1, this.bindList(this.currListBinder, this.pageIndex)
            }, t.prototype.bindVehicleInfo = function(e, t, i) {
                var n = e.face;
                t ? (this.apply(n, o.param, {
                    enabled: !0,
                    visible: !0
                }), e.setProps({
                    vehicle: t
                }), t.id === this.selectedId ? (n.selected = !0, this.selectedIndex = i) : n.selected = !1) : (this.apply(n, o.param, {
                    enabled: !1
                }), e.setProps({}))
            }, t.prototype.onClick = function(e, t) {
                var i = this.currListBinder[e].face,
                    n = this.chunkedVehicles[this.pageIndex][e];
                i.selected || (this.currListBinder.forEach(function(e) {
                    e.face.selected = !1
                }), i.selected = !0, this.selectedId = n.id, this.selectedIndex = e, this.face.dispatchEvent("selected", n), i.emit(a.MouseEventEx.MOUSE_OVER))
            }, t.prototype.getSide = function(e) {
                var t = (e + 1) % this.rowSize;
                return t < this.rowSize / 2 + 1 && t > 0 ? "right" : "left"
            }, t.prototype.onOver = function(e, t) {
                var i = this.chunkedVehicles[this.pageIndex][e];
                if (i) {
                    var n = "change-vehicle-tooltip",
                        r = {
                            status: i.status,
                            remainingCount: void 0,
                            $filter: void 0
                        },
                        o = this.getSide(e);
                    l.isTrialVehicle(i) && (r.remainingCount = i.remainingCount, n += " trial"), r.remainingCount && (r.$filter = this.$filter);
                    var a = this.currListBinder[e].face,
                        c = t && t.currentTarget ? t : a.htmlElement;
                    this.tooltipService.show(c, o, s.TooltipType.VehicleStatus, r, {
                        width: 222,
                        marginLeft: "left" === o ? -8 : 8
                    }, {}, n)
                }
            }, t.prototype.onOut = function() {
                this.tooltipService.hide()
            }, t.prototype.onDetach = function() {
                this.playerService.markVehiclesAsChecked()
            }, t
        }(d.ScrollBarPageBinder);
    n.__decorate([r.autowired("$util")], u.prototype, "$util", void 0), n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("playerService")], u.prototype, "playerService", void 0), n.__decorate([r.autowired("tooltipService")], u.prototype, "tooltipService", void 0), t.VehicleListBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.WheelEventDelayMs = 500, t.scrollGap = 0, t.isDragging = !1, t.dragBoundaryY = {
                    prev: 0,
                    next: 0
                }, t.pageIndex = 0, t.pageSize = 0, t.isPaging = !1, t.selectedIndex = 0, t.currListBinder = [], t.nextListBinder = [], t.onDragStartScrollBar = function(e) {
                    t.isDragging = !0, t.dragBoundaryY.prev = e.y - t.getViewportScaledValue(t.getScaledValueY(t.scrollBarThumb, e.offsetY)), t.dragBoundaryY.next = t.dragBoundaryY.prev + t.getViewportScaledValue(t.scrollGap), document.addEventListener("mousemove", t.onDragScrollBar), document.addEventListener("mouseup", t.onDragEndScrollBar)
                }, t.onDragEndScrollBar = function(e) {
                    t.isDragging = !1, document.removeEventListener("mousemove", t.onDragScrollBar), document.removeEventListener("mouseup", t.onDragEndScrollBar)
                }, t.onDragScrollBar = function(e) {
                    if (!t.isPaging && t.isDragging) {
                        var i = void 0,
                            n = t.scrollBarThumb.y;
                        e.y < t.dragBoundaryY.prev ? (i = "previous", n -= t.scrollGap) : t.dragBoundaryY.next < e.y && (i = "next", n += t.scrollGap);
                        var r = Math.round(n / t.scrollGap);
                        r < 0 && (r = 0), t.pageSize <= r && (r = t.pageSize - 1), t.pageIndex !== r && (t.movePage(r, i, !0), "previous" === i ? (t.dragBoundaryY.next = t.dragBoundaryY.prev, t.dragBoundaryY.prev -= t.getViewportScaledValue(t.scrollGap)) : (t.dragBoundaryY.prev = t.dragBoundaryY.next, t.dragBoundaryY.next += t.getViewportScaledValue(t.scrollGap)))
                    }
                }, t.onClickScrollBarTrack = function(e) {
                    e.offsetY < t.scrollBarThumb.y ? t.movePage(t.pageIndex - 1, "previous", !0) : t.scrollBarThumb.y + t.getScaledValueY(t.scrollBarThumb, t.scrollBarThumb.height) < e.offsetY && t.movePage(t.pageIndex + 1, "next", !0)
                }, t
            }
            return n.__extends(t, e), t.prototype.setWheelEventDelayMs = function(e) {
                this.WheelEventDelayMs = e
            }, t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.scrollBarContainer = this.getFace(".id-scrollBar"), this.scrollBarContainer.hasSize = !0, this.scrollBarThumb = this.scrollBarContainer.$(".id-thumb"), this.scrollBarThumb.hasSize = !0, this.scrollBarTrack = this.scrollBarContainer.$(".id-track"), this.scrollBarTrack.hasSize = !0
            }, t.prototype.onAddedToScene = function() {
                var e = _.throttle(this.wheelEventHandler.bind(this), this.WheelEventDelayMs, {
                    trailing: !1
                });
                this.pagingContainer && this.pagingContainer.htmlElement.addEventListener("wheel", e), this.scrollBarThumb.htmlElement.addEventListener("wheel", e), this.scrollBarTrack.htmlElement.addEventListener("wheel", e), this.scrollBarThumb.htmlElement.addEventListener("mousedown", this.onDragStartScrollBar), this.scrollBarTrack.htmlElement.addEventListener("click", this.onClickScrollBarTrack)
            }, t.prototype.resetScrollBar = function() {
                this.isDragging = !1, this.scrollGap = this.scrollBarTrack.height / this.pageSize, this.scrollBarThumb.y = this.pageIndex * this.scrollGap, this.scrollBarThumb.regY = 0, this.scrollBarThumb.scaleYMultiplier = this.scrollGap / this.scrollBarThumb.height, this.scrollBarContainer.visible = 1 < this.pageSize
            }, t.prototype.onItemClick = function(e, t) {
                var i = this.currListBinder[e].face;
                i.selected || (this.currListBinder.forEach(function(e) {
                    e.face.selected = !1
                }), i.selected = !0, this.selectedIndex = e, this.itemClickCallback && this.itemClickCallback(e, t))
            }, t.prototype.movePage = function(e, t, i) {
                var n = this;
                if (!this.isPaging && !(e < 0 || this.pageSize <= e || this.pageIndex === e)) {
                    this.currListBinder[this.selectedIndex].face.selected && (this.currListBinder[this.selectedIndex].face.selected = !1), this.movePageCallback1 && this.movePageCallback1(), this.isPaging = !0, this.pageIndex = e, this.bindList && this.bindList(this.nextListBinder, this.pageIndex);
                    var r = t;
                    "first" === t && (r = "previous"), "last" === t && (r = "next"), this.gotoAndPlay(this.pagingContainer, r), i && this.moveScrollBar(e), setTimeout(function() {
                        n.currListBinder[n.selectedIndex].face.selected && (n.currListBinder[n.selectedIndex].face.selected = !1), n.bindList && n.bindList(n.currListBinder, n.pageIndex), n.movePageCallback2 && n.movePageCallback2()
                    }, 100)
                }
            }, t.prototype.moveScrollBar = function(e) {
                var t = this,
                    i = e * this.scrollGap;
                this.scrollBarThumb.addCustomToTween(.2, {
                    flash: {
                        y: i,
                        onComplete: function() {
                            t.scrollBarThumb.y = i
                        }
                    }
                })
            }, t.prototype.wheelEventHandler = function(e) {
                if (!this.isPaging) {
                    var t = Math.max(-1, Math.min(1, e.wheelDelta || -e.detail));
                    1 === t ? this.movePage(this.pageIndex - 1, "previous", !0) : -1 === t && this.movePage(this.pageIndex + 1, "next", !0)
                }
            }, t.prototype.getViewportScaledValue = function(e) {
                return this.graphicConfigService.scaleRatio * e
            }, t.prototype.getScaledValueY = function(e, t) {
                return e.scaleY * t
            }, t.prototype.preventMouseEvent = function(e) {
                this.classNames(this.face, e ? "prevent-click" : "")
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("graphicConfigService")], o.prototype, "graphicConfigService", void 0), t.ScrollBarPageBinder = o
}, , , , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.KEY_DOWN = "keyDown", n.KEY_UP = "keyUp", t.KeyboardEventEx = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.NumericalItem = ["SP_PERCENT", "SP_PLUS", "EXP_PERCENT", "EXP_PLUS", "MILEAGE_PLUS"]
}, , function(e, t, i) {
    "use strict";

    function n(e) {
        return e === r.NOTICE ? "notices" : "fatigues"
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r, o = i(4),
        a = i(22),
        s = i(3),
        c = i(837),
        d = i(34);
    ! function(e) {
        e[e.NOTICE = 0] = "NOTICE", e[e.FATIGUE = 1] = "FATIGUE"
    }(r = t.AnnouncementType || (t.AnnouncementType = {}));
    var l = function() {
        function e() {}
        return Object.defineProperty(e.prototype, "worldChatService", {
            get: function() {
                return d.getInjector().get("worldChatService")
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.draw = function(e, t, i) {
            void 0 === i && (i = 5);
            var n = a.isArray(t) ? t : [t];
            switch (e) {
                case r.FATIGUE:
                    for (var o = 0, d = n; o < d.length; o++) {
                        var l = d[o];
                        s.store.dispatch(c.push(e, {
                            frame: "intro",
                            isRolling: !1,
                            content: l,
                            viewingTime: i
                        }))
                    }
                    break;
                case r.NOTICE:
                    for (var u = 0, p = n; u < p.length; u++) {
                        var l = p[u];
                        l = l.split("<br>").join(" ");
                        var h = l.length > 35;
                        i = h ? 29 : i, s.store.dispatch(c.push(e, {
                            frame: "intro",
                            content: l,
                            isRolling: h,
                            viewingTime: i
                        })), this.worldChatService.printNoticeMessage(l)
                    }
            }
        }, e.prototype.close = function(e) {
            s.store.dispatch(c.close(e))
        }, e.prototype.next = function(e) {
            s.store.dispatch(c.next(e))
        }, e
    }();
    l.$inject = [], t.AnnouncementService = l, t.getAnnounceTypeString = n, angular.module("edge.components").factory("announcementService", o.default.generateService(l))
}, , , , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(7),
        o = i(534),
        a = i(158),
        s = i(4),
        c = i(3),
        d = i(10),
        l = i(182),
        u = i(12),
        p = function() {
            function e(e, t, i, n) {
                this.pushService = e, this.staticdataLoaderService = t, this.popupService = i, this.stateService = n, this.pushService.subscribeResource(/\/parts\/(.*)/, function(e, t) {
                    if (t.body) {
                        var i = t.body.part,
                            n = e[1];
                        r.debug("//parts/(.*)/", i, n), c.store.dispatch(o.update(i))
                    }
                })
            }
            return Object.defineProperty(e.prototype, "partsMaterialDataArray", {
                get: function() {
                    return this.partsMaterialData
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "partsItemDataArray", {
                get: function() {
                    return this.partsItemData
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.init = function() {
                return this.partsMaterialData ? n.resolve() : (this.partsMaterialData = _.values(this.staticdataLoaderService.partsMaterialData), this.partsItemData = _.values(this.staticdataLoaderService.partsItemData), this.fetch())
            }, e.prototype.fetch = function() {
                return d.request("GET", "parts").then(function(e) {
                    var t = _.fromPairs(_.map(e, function(e) {
                        return [e.code, e]
                    }));
                    r.debug("PartsService.fetch", e, t), c.store.dispatch(o.fetch(t))
                })
            }, e.prototype.craft = function(e, t) {
                return d.request("POST", "parts/" + e + "/@upgrade", {
                    count: t || 1
                }).then(function(t) {
                    r.debug("PartsService.craft", e, t), c.store.dispatch(a.craftComplete(t.part, t.isSuccess))
                })
            }, e.prototype.isPartsUpgradable = function(e, t) {
                if (void 0 === t && (t = !1), 0 === e) return !1;
                var i = this.staticdataLoaderService.partsCombineData[e];
                if (!i) return !1;
                var n = l.getParts(i.materialCode),
                    r = n && n.count >= i.materialAmount,
                    o = !t || i.cost <= c.store.getState().player.sp;
                return r && o
            }, e.prototype.isPartsAttachable = function(e, t, i) {
                var n = _(this.partsItemData).filter({
                    clazz: t,
                    type: e
                }).filter(function(e) {
                    return e.level > i
                }).value();
                return _.some(n, function(e) {
                    var t = l.getParts(e.code);
                    return t && t.count > 0
                })
            }, e.prototype.isMaterial = function(e) {
                return !!_.find(this.partsMaterialData, function(t) {
                    return t.code === e
                })
            }, e.prototype.getPartsTooltipInfo = function(e) {
                var t = l.getParts(e),
                    i = t ? t.count : 0;
                if (this.isMaterial(e)) return {
                    code: e,
                    count: i
                };
                var n = this.staticdataLoaderService.partsItemData[e],
                    r = this.staticdataLoaderService.partsCombineData[e],
                    o = r ? l.getParts(r.materialCode) : void 0;
                return {
                    slotType: "inventory",
                    managementType: n.type,
                    partsItem: e ? _.assign({}, n, {
                        resource: t,
                        material: o
                    }) : void 0,
                    combineData: r
                }
            }, e.prototype.checkPartsNotification = function(e) {
                var t = this,
                    i = _.filter(e, function(e) {
                        return "PARTS" === e.type
                    });
                if (0 !== i.length) {
                    var n = _.filter(i, function(e) {
                            return !t.isMaterial(e.code)
                        }),
                        r = _.filter(i, function(e) {
                            return t.isMaterial(e.code)
                        }),
                        o = u.getRecentVehicle();
                    if (n.length > 0) {
                        var a = _(n).map(function(e) {
                            return t.staticdataLoaderService.partsItemData[e.code]
                        }).filter(function(e) {
                            var i = o.parts[e.type],
                                n = t.staticdataLoaderService.partsItemData[i];
                            return e.clazz === o.clazz && (!n || e.level > n.level)
                        }).value().sort(function(e, t) {
                            return e.level === t.level ? e.code - t.code : t.level - e.level
                        });
                        return void(a.length > 0 && this.popupService.draw("PartsInstallNotificationPopup", {
                            code: a[0].code,
                            confirm: function() {
                                t.stateService.go("root.menu.Vehicles")
                            }
                        }))
                    }
                    if (r.length > 0) {
                        var s = _.values(o.parts).filter(function(e) {
                                return 0 !== e
                            }),
                            c = _(s).map(function(e) {
                                return t.staticdataLoaderService.partsItemData[e]
                            }).filter(function(e) {
                                var i = t.staticdataLoaderService.partsCombineData[e.code];
                                if (!i) return !1;
                                if (_(r).filter(function(e) {
                                        return e.code === i.materialCode
                                    }).sumBy("count") > 0) {
                                    var n = l.getParts(i.materialCode);
                                    if ((n ? n.count : 0) >= i.materialAmount) return !0
                                }
                                return !1
                            }).orderBy("code", "asc").value();
                        c.length > 0 && this.popupService.draw("PartsLevelUpNotificationPopup", {
                            code: c[0].code,
                            confirm: function() {
                                t.stateService.go("root.menu.Vehicles")
                            }
                        })
                    }
                }
            }, e
        }();
    p.$inject = ["pushService", "staticdataLoaderService", "popupService", "stateService"], p.EmptyParts = {
        engine: 0,
        transmission: 0,
        nitroTank: 0,
        bumper: 0,
        frame: 0
    }, t.default = p, angular.module("edge.components").factory("partsService", s.default.generateService(p))
}, function(e, t, i) {
    "use strict";

    function n() {
        return o.store.getState().parts
    }

    function r(e) {
        return n().parts[e]
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(3);
    t.getParts = r
}, , function(e, t, i) {
    "use strict";

    function n(e) {
        return o[e] || (o[e] = r.getInjector().get("$filter")(e))
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(34),
        o = {};
    t.getFilter = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        var t = {};
        return function(i, n) {
            if (i instanceof c.MovieClip && !_.isUndefined(n)) {
                var r = i;
                e(r, n);
                var o = r.objectId,
                    a = t[o];
                a && a();
                var s = !1,
                    l = !1,
                    u = function(e) {
                        s = !0, l = !e.paused
                    },
                    p = function(t) {
                        t.preventDefault(), r.rebootFromCurrentFrame(), s ? l && r.play() : e(r, n)
                    },
                    h = function() {
                        r.off(d.EventEx.HALT, u), r.off(d.EventEx.REBOOT, p), r.off(d.EventEx.DESTROY, h), delete t[o]
                    };
                t[o] = h, r.on(d.EventEx.HALT, u), r.on(d.EventEx.REBOOT, p), r.on(d.EventEx.DESTROY, h)
            }
        }
    }

    function r(e, t, i) {
        if (o(e)) return "vehicle";
        if ("BLUEPRINT" === e) return "blueprint";
        if ("PARTS" === e) return "parts";
        if ("SHOP_PRODUCT" === e) return "product";
        if ("TUNING" === e) {
            return /WRAP/.test(i.getTuningItemByCode(t).subtype) ? "tuningWrap" : "tuningColor"
        }
        return "NUMBER_PLATE" === e ? "normal" : "NUMBER_PLATE_INSTANCE" === e ? "numberPlate" : "normal"
    }

    function o(e) {
        return "VEHICLE" === e || "VEHICLE_CUSTOM" === e || "TRIAL_VEHICLE" === e
    }

    function a(e) {
        var t = l.getInjector().get("vehicleDataService"),
            i = t.resolveTrialVehicle(e);
        return s.__assign({}, e, i, {
            code: i.code,
            paint: i.paint.colorCode + "",
            remainingCount: i.remainingCount
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = i(0),
        c = i(49),
        d = i(8),
        l = i(34);
    t.makeHandler = n, t.getItemCardType = r, t.isVehicleItemCard = o, t.parseTrialVehicleInfo = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(22),
        o = i(6),
        a = i(4),
        s = i(10),
        c = i(299),
        d = i(3),
        l = i(173),
        u = i(5),
        p = function() {
            function e(e, t, i, n, r, o, a) {
                var s = this;
                this.$timeout = e, this.$filter = t, this.$rootScope = i, this.pushService = n, this.staticService = r, this.serverTimeService = o, this.playerService = a, this.fetched = !1, this.pushService.subscribeResource(/\/asset\/inventory\/item\/change\/id\/(.*)/, function(e, t) {
                    var i = t.body;
                    s.extendItemDetails(i).then(function(e) {
                        c.addItem(e)
                    }), s.playerService.dispatchNewItemIndicate("inventory")
                }), this.staticdata = this.staticService.inventoryItemData
            }
            return e.prototype.fetchStaticdata = function(e) {
                var t = this,
                    i = this.staticdata[e];
                return i ? o.resolve(i) : s.request("GET", "staticdata/fe/items/" + e).then(function(i) {
                    return t.staticdata[e] = i
                })
            }, e.prototype.extendItemDetails = function(e) {
                var t = this;
                return this.fetchStaticdata(e.code).then(function(i) {
                    return t.getItemBasicInfo(e, i)
                })
            }, e.prototype.getItemBasicInfo = function(e, t) {
                var i = n.__assign({}, e, t);
                return i.name = this.$filter("translate")("ITEM_" + i.code + "_NAME"), i.desc = this.$filter("translate")("ITEM_" + i.code + "_DESC"), i
            }, e.prototype.getItemStaticdata = function() {
                return this.staticdata
            }, e.prototype.fetch = function() {
                return this.forceFetch()
            }, e.prototype.forceFetch = function() {
                var e = this,
                    t = d.store.getState().player;
                return s.request("GET", "inventories/" + t.id).then(function(t) {
                    e.fetched = !0;
                    var i = r.map(t.items, function(t) {
                        return e.extendItemDetails(t)
                    });
                    o.all(i).then(function(e) {
                        c.setItems(e)
                    })
                })
            }, e.prototype.filterInventoryItemByCode = function(e) {
                var t = d.store.getState().inventory.items || [];
                return r.filter(t, {
                    code: e
                })
            }, e.prototype.findInventoryItemById = function(e) {
                var t = d.store.getState().inventory.items || [];
                return r.find(t, {
                    id: e
                })
            }, e.prototype.useItem = function(e, t) {
                if (!e || !t || t < 1) return o.reject("invalid param");
                var i = d.store.getState().player;
                return s.request("POST", "inventories/" + i.id + "/items/" + e + "/@use", {
                    count: t
                }).then(function(e) {
                    return c.useItem(e.item), e
                })
            }, e.prototype.useAllItem = function(e) {
                var t = d.store.getState().player;
                return s.request("POST", "inventories/" + t.id + "/items/" + e + "/@useall").then(function(e) {
                    return c.useItem(e.item), e
                })
            }, e.prototype.removeExpiredItem = function(e) {
                var t = d.store.getState().player;
                return s.request("DELETE", "inventories/" + t.id + "/expireditems/" + e).catch(function(e) {
                    throw e
                }).finally(function() {
                    c.deleteItem(e)
                })
            }, e.prototype.cheatItemCount = function(e, t) {
                var i = this,
                    n = d.store.getState().player;
                return s.request("POST", "inventories/" + n.id + "/items", {
                    code: e,
                    count: t
                }).then(function(e) {
                    return i.forceFetch(), e
                })
            }, e.prototype.getRewardableItemName = function(e) {
                var t = this;
                return e && Array.isArray(e.items) ? e.items.map(function(e) {
                    var i = t.$filter("rewardName")(e.rewardcommandtype, e.rewardcommandcode, e.count, e.opts);
                    return -1 === l.NumericalItem.indexOf(e.rewardcommandtype) && e.count > 1 && (i += " " + t.$filter("template")({
                        number: e.count
                    }, "BUNDLE_ITEM_COUNT")), a.default.stripHtml(i)
                }) : []
            }, e.hasVehicleReward = function(e) {
                return !(!e || !e.items) && e.items.some(function(e) {
                    return "VEHICLE" === e.rewardcommandtype || "TRIAL_VEHICLE" === e.rewardcommandtype
                })
            }, e.isExpirableItem = function(e) {
                if (!e || !e.length) return !1;
                var t = new Date("9999-12-31");
                return +new Date(e) != +t
            }, e.prototype.isExpired = function(t) {
                if (e.isExpirableItem(t)) {
                    if (new Date(t) < this.serverTimeService.time) return !0
                }
                return !1
            }, e.prototype.getRemainingTime = function(e) {
                var t = u(this.serverTimeService.time),
                    i = u(e),
                    n = i.diff(t, "days"),
                    r = i.diff(t, "hours"),
                    o = i.diff(t, "minutes"),
                    a = i.diff(t, "seconds");
                return 0 < n ? this.$filter("template")({
                    remaining: n
                }, "ITEM_TAG_ENDDATE_REMAINING_DAYS") : 0 < r ? this.$filter("template")({
                    hour: r
                }, "ITEM_TAG_ENDDATE_REMAINING_HOURS") : 0 < o || 0 < a ? this.$filter("template")({
                    minute: o || 1
                }, "ITEM_TAG_ENDDATE_REMAINING_MINUTES") : this.decorateHighlight(this.$filter("translate")("ITEM_TAG_ENDDATE_END"))
            }, e.prototype.decorateHighlight = function(e) {
                return '<span style="color:#fffc00">' + e + "</span>"
            }, e
        }();
    p.$inject = ["$timeout", "$filter", "$rootScope", "pushService", "staticdataLoaderService", "serverTimeService", "playerService"], t.InventoryService = p, angular.module("edge.components").factory("inventoryService", a.default.generateService(p))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e.translate = function(e, t) {
            return this.template || (this.template = angular.element(document.body).injector().get("$filter")("template")), this.template(t, e)
        }, e
    }();
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return "STATUS_" + o(e).toUpperCase()
    }

    function r(e) {
        if (!e) return 0;
        var t = o(e.type),
            i = 0;
        return t && (i = e.ovr[t] || 0), i
    }

    function o(e) {
        var t = a(e);
        return t > 0 ? s.StatusNames[t - 1] : e
    }

    function a(e) {
        var t = 0;
        switch (e) {
            case "engine":
                t = 1;
                break;
            case "transmission":
                t = 2;
                break;
            case "nitroTank":
                t = 3;
                break;
            case "bumper":
                t = 4;
                break;
            case "frame":
                t = 5
        }
        return t
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = i(82);
    t.getStatusText = n, t.getPartsBonus = r, t.getPartsVehicleStatus = o, t.getPartsTypeIndex = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(7),
        o = i(35),
        a = i(4),
        s = i(3),
        c = i(9),
        d = i(37);
    ! function(e) {
        e[e.Normal = 0] = "Normal", e[e.License = 1] = "License", e[e.Timetrial = 2] = "Timetrial", e[e.Openworld = 3] = "Openworld"
    }(n = t.HudType || (t.HudType = {}));
    var l = function() {
        function e(e, t, i, n, r, o, a, s, c, d) {
            this.externalService = e, this.audioService = t, this.room2MatchService = i, this.quickMatchService = n, this.ranked2MatchService = r, this.festivalMatchService = o, this.antibotService = a, this.playerSnippetService = s, this.inGameConfigService = c, this.featureSetService = d, this._timeElapsed = 0
        }
        return Object.defineProperty(e.prototype, "timeElapsed", {
            get: function() {
                return this._timeElapsed
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "hudType", {
            get: function() {
                return this._hudType
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.bind = function(e, t) {
            var i = this;
            if (void 0 === t && (t = n.Normal), this.emitter) return void r.warn("duplicated bind request");
            switch (this._hudType = t, this.emitter = new o.EventEmitter, t) {
                case n.Normal:
                    this.setMatchRecordListeners(e);
                case n.License:
                case n.Timetrial:
                    this.setStartListeners(e), this.setTimeListeners(e)
            }
            var a = $("#edge-ui-container");
            a.addClass("hide-hud"), e.$on("$destroy", function() {
                i.emitter.removeAllListeners(), i.emitter = null, a.removeClass("hide-hud")
            })
        }, e.prototype.intro = function() {
            $("#edge-ui-container").removeClass("hide-hud"), this.emitter.emit("intro")
        }, e.prototype.outro = function() {
            $("#edge-ui-container").addClass("hide-hud"), this.emitter.emit("outro")
        }, e.prototype.setStartListeners = function(e) {
            var t = this;
            this.externalService.addCallback(e, c.CoreEvent.beHUDStartGame, function() {
                r.info("CORE>>", "beHUDStartGame"), t.emitter.emit("start"), t.antibotService.startType2Checker()
            }), this.externalService.addCallback(e, c.CoreEvent.beHUDPerfectStart, function(e) {
                r.info("CORE>>", "beHUDPerfectStart", e), e && t.emitter.emit("perfectStart")
            })
        }, e.prototype.setTimeListeners = function(e) {
            var t = this;
            this.externalService.addCallback(e, c.CoreEvent.beHUDSetTimeElapsed, function(e) {
                t._timeElapsed = e
            })
        }, e.prototype.setMatchRecordListeners = function(e) {
            var t = this,
                i = s.store.getState().player.id;
            this.isFinished = !1;
            var n = function() {
                    t.isFinished || (r.info("hud.service.ts :: onFinished "), t.isFinished = !0, t.audioService.get(d.FxAudioCode.EndCountdown).stop(), t.audioService.get(d.FxAudioCode.EndCountdown_15).stop(), t.antibotService.stopType2Checker(), t.inGameConfigService.renew())
                },
                o = function(e) {
                    t.outro(), t.emitter.emit("retire", e)
                },
                a = function(e) {
                    var r = e.record;
                    r.id === i && (t.outro(), n(), t.emitter.emit("finish", r, _.findIndex(e.result, {
                        id: r.id
                    }) + 1))
                },
                c = this.getMatchService();
            c.scopeLimiter(e).on("record.added", a), c.scopeLimiter(e).on("match.finish", function(e) {
                var a = s.store.getState().match,
                    c = a.isEndFromDistanceCheck,
                    d = a.records,
                    l = t.isObserver;
                if (r.info("hud.service.ts :: match.finish -> isRetire " + e + ", isObserver " + l), c || l) {
                    t.outro(), n();
                    var u = l || _.maxBy(d, "mileage").id === i;
                    t.emitter.emit(u ? "finish" : "retire")
                } else n(), e && o()
            }), c.scopeLimiter(e).on("match.abandon", function(e) {
                r.info("hud.service.ts :: match.abandon"), n(), o(e)
            })
        }, e.prototype.emit = function(e) {
            for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
            if (!this.emitter) return void r.warn("emit event after detach", e, t);
            this.emitter.emit.apply(this.emitter, arguments)
        }, e.prototype.on = function(e, t) {
            if (!this.emitter) return void r.warn("add listener after detach", e);
            this.emitter.on(e, t)
        }, e.prototype.once = function(e, t) {
            if (!this.emitter) return void r.warn("add once listener after detach", e);
            this.emitter.once(e, t)
        }, e.prototype.getMatchService = function() {
            var e = s.store.getState().match;
            if (e.match) {
                var t = e.match.featureType;
                return "ranked" === t ? this.ranked2MatchService : "quick" === t ? this.quickMatchService : "festival" === t ? this.festivalMatchService : this.room2MatchService
            }
        }, Object.defineProperty(e.prototype, "supportRoomMirror", {
            get: function() {
                return !s.store.getState().configuration.configs.ingame.applied.roomMirrorOff
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "isObserver", {
            get: function() {
                var e = s.store.getState(),
                    t = e.player.id,
                    i = e.match.match;
                return i && _.every(i.players, function(e) {
                    return e.id !== t
                })
            },
            enumerable: !0,
            configurable: !0
        }), e
    }();
    l.$inject = ["externalService", "audioService", "room2MatchService", "quickMatchService", "ranked2MatchService", "festivalMatchService", "antibotService", "playerSnippetService", "inGameConfigService", "featureSetService"], t.HudService = l, t.default = l, angular.module("edge.components").factory("hudService", a.default.generateService(l))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "quest.update",
            quest: e
        }
    }

    function r() {
        return {
            type: "quest.togglePreview"
        }
    }

    function o() {
        return {
            type: "quest.setShowPreview",
            showPreview: !0
        }
    }

    function a() {
        return {
            type: "quest.setShowPreview",
            showPreview: !1
        }
    }

    function s(e, t) {
        return {
            type: "quest.updateProgress",
            qp: e,
            questProgress: t
        }
    }

    function c(e) {
        return {
            type: "quest.updateQP",
            qp: e
        }
    }

    function d() {
        return {
            type: "quest.turnOnNotification"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.updateQuest = n, t.togglePreview = r, t.openPreview = o, t.hidePreview = a, t.updateQuestProgress = s, t.updateQP = c, t.turnOnNotification = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.ConfigOrder = ["graphic", "sound", "inputkey", "ingame", "info"];
    ! function(e) {
        e[e.Auto = 0] = "Auto", e[e.Low = 1] = "Low", e[e.Medium = 2] = "Medium", e[e.High = 3] = "High", e[e.Ultra = 4] = "Ultra", e[e.Custom = 5] = "Custom"
    }(t.GraphicMode || (t.GraphicMode = {}));
    ! function(e) {
        e[e.OFF = 0] = "OFF", e[e.LOW = 1] = "LOW", e[e.MEDIUM = 2] = "MEDIUM", e[e.HIGH = 3] = "HIGH", e[e.ULTRA = 4] = "ULTRA"
    }(t.AntiAliasing || (t.AntiAliasing = {}));
    ! function(e) {
        e[e.X1 = 0] = "X1", e[e.X2 = 1] = "X2", e[e.X4 = 2] = "X4", e[e.X8 = 3] = "X8", e[e.X16 = 4] = "X16"
    }(t.AnisotropicFilter || (t.AnisotropicFilter = {}));
    ! function(e) {
        e[e.OFF = 0] = "OFF", e[e.SSAO = 1] = "SSAO", e[e.HBAO = 2] = "HBAO", e[e.HBAOF = 3] = "HBAOF"
    }(t.AmbientOcclusion || (t.AmbientOcclusion = {}));
    ! function(e) {
        e[e.LOW = 0] = "LOW", e[e.MEDIUM = 1] = "MEDIUM", e[e.HIGH = 2] = "HIGH", e[e.ULTRA = 3] = "ULTRA"
    }(t.GraphicFeatureQuality || (t.GraphicFeatureQuality = {})), t.DrivingAssistList = ["ABS", "ESC", "HCS"]
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.applyConfig = function() {}, t
        }(r.Binder);
    t.ConfigPanelBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(82),
        o = i(16),
        a = i(62),
        s = i(46),
        c = i(164),
        d = i(30),
        l = i(12),
        u = i(13),
        p = i(2),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.statusList = this.addChildBinder(".id-statusIndicatorContainer .id-statusIndicatorProgressBar", a.CollectionBinder, {
                    instanceBinder: s.ProgressBinder
                }), this.vehicleBinder = this.addChildBinder(this.face, c.VehicleBinder), this.translate(".id-vehicleValueTitle", "COMMON_VEHICLEVALUE"), this.initTrialVehicleInfo()
            }, t.prototype.update = function(e) {
                var t = e.vehicle || l.getRecentVehicle();
                if (t && this.vehicle !== t) {
                    var i = _.map(r.StatusNames, function(e, i) {
                        return {
                            label: "STATUS_" + e.toUpperCase(),
                            value: t.status[e] || t.status[r.OldStatusNames[i]],
                            max: 2e3,
                            duration: .7
                        }
                    });
                    this.statusList.applyCollection(i), this.vehicleBinder.setProps({
                        vehicle: t
                    }), this.visible(".id-favoriteIcon", !0)
                }
                this.vehicle = t, this.visible(".id-expVehicleTitle", l.isTrialVehicle(t))
            }, t.prototype.mapStateToProps = function(e) {
                return e.vehicle
            }, t.prototype.initTrialVehicleInfo = function() {
                var e = this;
                this.hasSize(".id-expVehicleTitle", !0), this.hasSize(".id-expVehicleTitle .id-textField", !1), this.translate(".id-expVehicleTitle .id-textField", "EXPVEHICLE_GARAGE_INFORMATION"), this.on(".id-expVehicleTitle .id-tooltipIcon", p.MouseEventEx.MOUSE_OVER, this.showTooltipTrialVehicle.bind(this)), this.on(".id-expVehicleTitle .id-tooltipIcon", p.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.showTooltipTrialVehicle = function(e) {
                this.tooltipService.show(e, "topright", u.TooltipType.BasicDetail, {
                    mainText: [{
                        title: "EXPVEHICLE_INFORMATION_TITLE"
                    }, {
                        description: "EXPVEHICLE_INFORMATION_DESC"
                    }],
                    subText: []
                }, {
                    marginTop: 22,
                    marginLeft: 30
                }, {}, "vehicles-trial-info-tooltip")
            }, t
        }(d.Binder);
    n.__decorate([o.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([o.autowired("externalService")], h.prototype, "externalService", void 0), n.__decorate([o.autowired("tooltipService")], h.prototype, "tooltipService", void 0), t.VehicleInfoBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1),
        a = i(39),
        s = i(3),
        c = i(39),
        d = i(54),
        l = i(42),
        u = i(94),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.isEndFromDistanceCheck = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = s.store.getState().match,
                    t = e.match,
                    i = e.isEndFromDistanceCheck;
                this.gameMode = t.gameMode, this.featureType = t.featureType, this.players = t.players, this.isEndFromDistanceCheck = i, this.face.hasSize = !0, this.face.layoutPosition = "relative", this.face.layoutFloat = "left", this.translate(".RetireText .id-textField", "BEPLAY_MAIN_RETIRE");
                var n = this.getFace(".id-numberPlate");
                if (n) {
                    n.layoutPosition = "relative", n.layoutFloat = "left", n.hasSize = !0;
                    var r = n.parent.$(">.id-vehicleName");
                    r.layoutPosition = "relative", r.layoutFloat = "left", r.hasSize = !1, this.numberPlateService.enableNumberPlate ? this.numberPlate = this.addChildBinder(n, l.NumberPlateCard) : n.visible = !1
                }
                this.medal = this.addChildBinder(".RankedMatchRewardIconSmall", d.TierMedalBinder)
            }, t.prototype.update = function(e) {
                this.applyProps(e)
            }, t.prototype.onAddedToScene = function() {
                this.applyProps(this.props)
            }, t.prototype.bindMedal = function(e) {
                var t = this.getMedalTier(e),
                    i = this.getMedalType(e);
                this.medal.setProps({
                    hide: !t || e.disconnected,
                    tierCode: t,
                    tierMode: i
                })
            }, t.prototype.bindPlayerName = function(e) {
                var t = this.convertFace(".CommonPlayerNameLabel");
                this.bindText(t.$(".id-playerName"), e.name), t.gotoAndStop(this.getPlayerColor(e))
            }, t.prototype.bindVehicleName = function(e) {
                var t = this.convertFace(".VehicleNameBar");
                this.bindText(t.$(".id-vehicleName"), e.vehicleName), t.gotoAndStop(this.getPlayerColor(e))
            }, t.prototype.bindNumberPlate = function(e) {
                this.numberPlate.face.visible = void 0 !== e.plate, e.plate && this.numberPlate.setProps({
                    personalNumber: e.plate.prefix,
                    uniqueNumber: e.plate.plateNumber,
                    templateCode: e.plate.templateCode
                })
            }, t.prototype.bindRank = function(e) {
                var t = this.getPlayerColor(e),
                    i = this.convertFace(".RaceRankedLabel");
                this.bindText(i.$(".id-rankNum"), e.rank.toString()), i.visible = this.isFestival() ? !!e.time : !e.disconnected, i.gotoAndStop(t);
                var n = this.convertFace(".RetireText");
                n.visible = this.isFestival() ? !e.time : e.disconnected, n.gotoAndStop(t)
            }, t.prototype.bindAvatar = function(e) {
                var t = this.convertFace(".ImgThumbnailContainer");
                this.drawExternalImage(t.$(".id-externalImage"), this.getAvatar(e)), t.gotoAndStop("user"), t.$(".DisconnectImage").visible = e.disconnected, t.visible = !0
            }, t.prototype.bindBackground = function(e) {
                this.gotoAndStop(".DisconnectBackgroundMC", e.rank % 2 == 0 ? "even" : "odd"), this.gotoAndStop(".ColumnBackgroundMC", e.rank % 2 == 0 ? "even" : "odd"), this.gotoAndStop(".ColumnDefaultNoneFinishBackgroundMC", e.rank % 2 == 0 ? "even" : "odd"), this.getFace(".ColumnBackgroundMC").visible = !this.isMe(e), this.getFace(".ColumnMyBackgroundMC").visible = this.isMe(e), this.getFace(".DisconnectBackgroundMC").visible = e.disconnected, this.getFace(".ColumnDefaultNoneFinishBackgroundMC").visible = !1
            }, t.prototype.bindRecord = function(e) {
                var t = this.convertFace(".TimeRecordLabel");
                this.bindText(t.$(".CurrentRecord"), r.default.formatLapTime(e.time)), t.visible = !this.isEndFromDistanceCheck && !!e.time, t.gotoAndStop(this.getPlayerColor(e))
            }, t.prototype.bindRetiredLabel = function(e) {
                var t = this.convertFace(".DoNotRecordLabel"),
                    i = t.$(".NoneRecord");
                this.translate(i, e.disconnected ? "LOADINGSCREEN_LOGOUT" : "BEPLAY_MAIN_RETIRE"), t.visible = !!this.isEndFromDistanceCheck || !e.time;
                var n;
                this.isEndFromDistanceCheck && 1 === e.rank ? (this.translate(i, "1ON1_RACE_RESULT_PERFECTVICTORY"), i.$("textField").setCustomStyle({
                    "font-size": "24px"
                }), n = this.isMe(e) ? "perfectWinMylist" : "perfectWinDefault") : n = this.isMe(e) ? "mylist" : "default", t.gotoAndStop(e.disconnected ? "disabled" : n)
            }, t.prototype.bindGapRecord = function(e) {
                var t = this.convertFace(".GapTimeRecordLabel");
                this.bindText(t.$(".GapNumber"), "+" + r.default.formatLapTime(e.gapTime)), t.visible = !this.isEndFromDistanceCheck && (!!e.time && !!e.gapTime), t.gotoAndStop(this.getPlayerColor(e))
            }, t.prototype.applyProps = function(e) {
                return !_.isEmpty(e) && (this.bindBackground(e), this.bindMedal(e), this.bindPlayerName(e), this.bindVehicleName(e), this.numberPlate && this.bindNumberPlate(e), this.bindRank(e), this.bindRetiredLabel(e), this.bindAvatar(e), this.bindRecord(e), this.bindGapRecord(e), this.apply(".VehicleNameBar .PcCafeIcon", u.igr, e.igr), this.apply(".VehicleNameHotPursuitBar .PcCafeIcon", u.igr, e.igr), !0)
            }, t.prototype.getAvatar = function(e) {
                return e.avatar
            }, t.prototype.getPlayerName = function(e) {
                return e.name
            }, t.prototype.getMedalTier = function(e) {
                return e.medalTier
            }, t.prototype.getMedalType = function(e) {
                return e.medalType
            }, t.prototype.isMe = function(e) {
                return e.id === s.store.getState().player.id
            }, t.prototype.is1On1Ranked = function() {
                return "SPEED1ON1" === this.gameMode
            }, t.prototype.isFestival = function() {
                return "festival" === this.featureType
            }, t.prototype.getPlayerColor = function(e, t) {
                return s.store.getState().player.id !== e.id || t ? e.disconnected ? "disabled" : e.team === c.Team.A ? "teamA" : e.team === c.Team.B ? "teamB" : "default" : "mylist"
            }, t.prototype.getTeamColor = function(e) {
                return a.getTeamString(e.team)
            }, t.prototype.getTeamPoint = function(e) {
                return e.time ? this.staticdata.teamBattleRankPointData[e.rank] : this.staticdata.teamBattleRankPointData.retire
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([o.autowired("playerSnippetService")], p.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("staticdataLoaderService")], p.prototype, "staticdata", void 0), n.__decorate([o.autowired("numberPlateService")], p.prototype, "numberPlateService", void 0), t.RaceMatchResultItemBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(16),
        a = i(2),
        s = i(50),
        c = i(182),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.update(this.props), this.addManagedListener(this.face, a.MouseEventEx.MOUSE_OVER, function() {
                    if (e.props.code > 0) {
                        var t = e.staticdataLoaderService.partsCombineData[e.props.code],
                            i = t ? c.getParts(t.materialCode) : void 0;
                        e.tooltipService.show(e.getFace(".comp-HitArea"), "bottom", s.TooltipType.PartsSlot, {
                            slotType: "slot",
                            managementType: e.props.type,
                            partsItem: e.props.code ? _.assign({}, e.staticdataLoaderService.partsItemData[e.props.code], {
                                material: i
                            }) : void 0,
                            combineData: t
                        })
                    }
                }), this.addManagedListener(this.face, a.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                })
            }, t.prototype.update = function(e) {
                if (!_.isEmpty(e)) {
                    var t = e.code,
                        i = e.type,
                        n = e.potential;
                    if (this.visible(".ArrowIcon", n), this.gotoAndStop(".PartsImageContainer", t ? "normal" : "empty_" + i), t) {
                        var r = this.staticdataLoaderService.partsItemData[e.code];
                        this.drawExternalImage(".PartsImage", this.$filter("cdn_parts")(r.code)), this.gotoAndStop(".PartsGradeContainer", "grade" + r.level), this.template(".id-partsLevelLabel", "VEHICLE_PARTSSLOT_LEVEL", {
                            level: r.level
                        })
                    } else this.gotoAndStop(".PartsGradeContainer", "empty"), this.bindText(".PartsLevel", "")
                }
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([o.autowired("staticdataLoaderService")], d.prototype, "staticdataLoaderService", void 0), n.__decorate([o.autowired("tooltipService")], d.prototype, "tooltipService", void 0), t.AttachedPartsBinder = d
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            type: "vehicle-status.animate",
            before: e,
            after: t
        }
    }

    function r() {
        return {
            type: "vehicle-status.animateComplete"
        }
    }

    function o(e) {
        return {
            type: "vehicle-status.showComposition",
            statusType: e
        }
    }

    function a() {
        return {
            type: "vehicle-status.hideComposition"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.animate = n, t.animateComplete = r, t.showComposition = o, t.hideComposition = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(93),
        s = i(27),
        c = i(1537),
        d = i(1539),
        l = i(650),
        u = i(1540),
        p = i(328),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.getFace(".id-closeButton").on(o.MouseEventEx.CLICK, function() {
                    a.updateIsOpenDetailPopUp(!1)
                }), this.itemCardBinder = this.addChildBinder(".id-itemCardSmall", s.ItemCardBinder), this.biddingHistoryBinder = this.addChildBinder(".id-auctionHistoryContainer", c.AuctionBiddingHistoryBinder), this.biddingOptionBinder = this.addChildBinder(".id-bidContainer", d.AuctionBiddingOptionBinder), this.addChildBinder(".id-endDateLabel .id-tooltipButton", u.AuctionEndTooltipBinder), this.addChildBinder(".id-mileageLabel .id-tooltipButton", l.AuctionMileageTooltipBinder), this.translate(".id-auctionPeriodLabel", "AUCTIONPRODUCT_POPUP_PERIOD"), this.translate(".id-auctionStartPriceLabel", "AUCTIONPRODUCT_POPUP_STARTPRICE"), this.translate(".id-statusLabel", "AUCTIONPRODUCT_POPUP_STATUS"), this.translate(".id-statusContainer .id-auctionEnd", "AUCTIONPRODUCT_POPUP_STATUS_END"), this.translate(".id-statusContainer .id-imminentLabel", "AUCTIONPRODUCT_POPUP_STATUS_NEAREND"), this.translate(".id-statusContainer .id-awaitingBid", "AUCTIONPRODUCT_POPUP_STATUS_WAITING"), this.translate(".id-endDateLabel", "AUCTIONPRODUCT_POPUP_WAITTILL"), this.translate(".id-refreshButton .id-buttonName", "AUCTIONPRODUCT_POPUP_REFRESH"), this.refreshBtn = this.getFace(".id-refreshButton"), this.refreshBtn.on(o.MouseEventEx.CLICK, this.onRefresh.bind(this)), this.gotoAndStopAll(".MonetaryUnitIcon", "mileage"), this.itemIntroductionText = this.getFace(".id-descriptionContainer .id-textField"), $(this.itemIntroductionText.htmlElement).perfectScrollbar({
                    suppressScrollX: !0
                }), this.visibleAll(this.face, !1)
            }, t.prototype.onDetach = function() {
                $(this.itemIntroductionText.htmlElement).perfectScrollbar("destroy")
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                if (t.isOpenDetailPopUp !== e.isOpenDetailPopUp) {
                    if (!e.isOpenDetailPopUp) return this.gotoAndPlay(this.face, "out"), a.updateIsPlayBiddingHistoryAnim(!1), void a.updatePopUpMsg(void 0);
                    this.visibleAll(this.face, !0), this.gotoAndPlay(this.face, "in")
                }
                if (this.updatePopUpMsg(e.popUpMsg), t.auctionItem !== e.auctionItem || t.isOpenDetailPopUp !== e.isOpenDetailPopUp)
                    if (this.updateWithItem(e.auctionItem, e.mileage), t.auctionItem && e.auctionItem && _.isEqual(t.auctionItem.historyBiddings, e.auctionItem.historyBiddings) ? (a.updateIsPlayBiddingHistoryAnim(!1), this.biddingHistoryBinder.updateBiddings(e.auctionItem, !1)) : this.biddingHistoryBinder.updateBiddings(e.auctionItem, e.isPlayBiddingHistoryAnim), e.auctionItem.itemImage) this.drawExternalImageAll(".id-bannerContainer .id-bannerImage", this.$filter("cdn_auction_popup_banner")(e.auctionItem.itemImage));
                    else {
                        var i = this.staticdataLoaderService.auctionDataManager.auctionItemPopUpSettings[e.auctionItem.itemType];
                        this.drawExternalImageAll(".id-bannerContainer .id-bannerImage", this.$filter("cdn_auction_popup_banner")(i.defaultImage))
                    }
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.auction,
                    i = e.player;
                return {
                    auctionItem: t.selectedItem,
                    mileage: i.mileage,
                    isPlayBiddingHistoryAnim: t.isPlayBiddingHistoryAnim,
                    isOpenDetailPopUp: t.isOpenDetailPopUp,
                    popUpMsg: t.popUpMsg
                }
            }, t.popUp = function() {
                a.updateIsOpenDetailPopUp(!0)
            }, t.prototype.updateWithItem = function(e, t) {
                this.itemDetail = e, this.updateAuctionDesc(this.itemDetail), this.biddingOptionBinder.updateBidOption(this.itemDetail, t)
            }, t.prototype.updateAuctionDesc = function(e) {
                this.translate(".id-itemType", this.staticdataLoaderService.auctionDataManager.getCategoryGlobalKey(e.category)), this.bindText(".id-itemName", e.itemName);
                var t = p.AuctionUtil.formatDateTime(e.startTime).date,
                    i = p.AuctionUtil.formatDateTime(e.finishTime).date;
                this.bindText(".id-auctionPeriod .id-textField", t + " - " + i);
                var n = p.AuctionUtil.formatDateTime(e.closingTime),
                    r = n.date,
                    o = n.time;
                e.historyBiddings.length ? (this.visibleAll(".id-endDateContainer ", !0), this.bindText(".id-endDateContainer .id-dateTextField", r), this.bindText(".id-endDateContainer .id-timeTextField", o)) : this.visibleAll(".id-endDateContainer ", !1), this.bindText(".id-auctionStartPrice .id-textField", this.$filter("currency")(e.startPrice, "", 0));
                var a = this.getFace(".id-statusContainer");
                if (e.isFinished) this.gotoAndPlay(a, "end");
                else {
                    var s = (e.closingTime.valueOf() - this.serverTimeService.time.valueOf()) / 1e3;
                    s = Math.max(0, s), s >= p.ONE_DAY_SECONDS + p.SERVER_TIME_THRESHOLD ? this.gotoAndPlay(a, "awaitingBid") : (s = Math.min(p.ONE_DAY_SECONDS - 1, s), this.gotoAndPlay(a, "imminent"), this.bindText(".id-statusContainer .id-imminentTime", p.AuctionUtil.formatRemainTime(s)))
                }
                this.itemIntroductionText.htmlElement.innerHTML = e.itemDesc, $(this.itemIntroductionText.htmlElement).perfectScrollbar("update");
                var c = {
                    plateNumber: this.itemDetail.instanceCode,
                    templateCode: this.itemDetail.itemCode
                };
                this.itemCardBinder.setProps({
                    info: {
                        type: this.itemDetail.itemType,
                        code: this.itemDetail.itemCode,
                        name: "NUMBER_PLATE_INSTANCE" === this.itemDetail.itemType ? this.$filter("template")({
                            uniquenumber: this.itemDetail.instanceCode
                        }, "NUMBERPLATE_ITEMCARD_NAME") : void 0,
                        img: void 0,
                        fallbackImg: void 0,
                        plate: "NUMBER_PLATE_INSTANCE" === this.itemDetail.itemType ? c : void 0,
                        isHideItemNum: !0
                    },
                    mouseDisabled: !0
                })
            }, t.prototype.onRefresh = function() {
                var e = this;
                a.updateIsPlayBiddingHistoryAnim(!0), this.auctionService.fetchAuctionItems([this.itemDetail.id], function() {
                    return e.auctionService.fetchBiddingsWithAuctionItemID(e.itemDetail.id)
                })
            }, t.prototype.updatePopUpMsg = function(e) {
                e && (this.bindText(".id-notificationContainer .id-textFieldContainer", e.msg), e.isSuccess ? this.gotoAndPlay(".id-notificationContainer", "success", !1) : this.gotoAndPlay(".id-notificationContainer", "failure", !1), a.updatePopUpMsg(void 0))
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([r.autowired("auctionService")], h.prototype, "auctionService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], h.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("serverTimeService")], h.prototype, "serverTimeService", void 0), t.AuctionItemDetailPopupBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(8),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                var t = this;
                "out" === this.face.currentLabel ? this.once(this.face, o.EventEx.STOP, function() {
                    t.updateContainer(e), t.playIn()
                }) : this.updateContainer(e)
            }, t.prototype.updateContainer = function(e) {}, t.prototype.startFade = function() {
                this.playOut()
            }, t.prototype.playIn = function() {
                this.gotoAndPlay(this.face, "in")
            }, t.prototype.playOut = function() {
                this.gotoAndPlay(this.face, "out")
            }, t
        }(r.Binder);
    t.FestivalContainerBaseBinder = a
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            type: "view.timetrial-popup.openTrackRank",
            trackCode: e,
            trackRecords: t
        }
    }

    function r() {
        return {
            type: "view.timetrial-popup.closeTrackRank"
        }
    }

    function o() {
        return {
            type: "view.timetrial-popup.openSeasonReward"
        }
    }

    function a() {
        return {
            type: "view.timetrial-popup.closeSeasonReward"
        }
    }

    function s() {
        return {
            type: "view.timetrial-popup.openChangeVehicle"
        }
    }

    function c() {
        return {
            type: "view.timetrial-popup.closeChangeVehicle"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.openTrackRank = n, t.closeTrackRank = r, t.openSeasonReward = o, t.closeSeasonReward = a, t.openChangeVehicle = s, t.closeChangeVehicle = c
}, , , , , , , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.FOCUS_IN = "focusIn", n.FOCUS_OUT = "focusOut", n.KEY_FOCUS_CHANGE = "keyFocusChange", n.MOUSE_FOCUS_CYHANGE = "mouseFocusChange", t.FocusEventEx = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(366),
        a = i(127),
        s = i(732),
        c = i(362),
        d = i(19),
        l = {
            superscript: "super",
            subscript: "sub"
        };
    t.GlobalFont = "global-font", t.LocalFont = "local-font", t.DisableHintingThreshold = 20;
    var u = function(e) {
        function i(t, i) {
            var n = e.call(this, t, i) || this;
            return n._multiline = !1, n.renderAsHTML = !1, n._type = o.TextFieldType.DYNAMIC, n._wordWrap = !1, n._type = "input" === i.textType ? o.TextFieldType.INPUT : o.TextFieldType.DYNAMIC, n._multiline = void 0 !== i.lineType && i.lineType.indexOf("multiline") >= 0, n._wordWrap = void 0 === i.lineType || -1 === i.lineType.indexOf("no wrap"), n
        }
        return n.__extends(i, e), i.prototype.createDomNode = function(e) {
            var t = this.type === o.TextFieldType.INPUT ? this.multiline ? "textarea" : "input" : "div";
            return document.createElement(t)
        }, i.prototype.initializeDomNode = function(t) {
            e.prototype.initializeDomNode.call(this, t), this.type === o.TextFieldType.INPUT && this.htmlElement.setAttribute("tabindex", -1)
        }, i.prototype.initializeClass = function(i) {
            e.prototype.initializeClass.call(this, i), this.htmlElement.classList.remove(t.GlobalFont, t.LocalFont), this.htmlElement.classList.add(this.getFontClass(i.textAttrs))
        }, i.prototype.initializeStyle = function(i) {
            e.prototype.initializeStyle.call(this, i);
            var n = this.cssProxies[0];
            if (this.data.border) {
                n.setProperty("border", "1px solid black"), n.setProperty("border-color", "#000000"), n.setProperty("background-color", "#FFFFFF")
            } else n.setProperty("border", "0px"), n.setProperty("background-color", "transparent");
            var r = i.textAttrs,
                o = this.getFontClass(r),
                a = r.size,
                c = this._calculatePaddings(r);
            c.left && n.setProperty("padding-left", c.left + "px"), c.right && n.setProperty("padding-right", c.right + "px"), c.top && n.setProperty("padding-top", c.top + "px"), n.setProperty("color", (r.fillColor || "").substr(0, 7)), n.setProperty("font-size", a + "px"), n.setProperty("text-align", r.alignment || "center"), r.bold && n.setProperty("font-weight", "bold"), r.characterPosition || "normal" === r.characterPosition || n.setProperty("vertical-align", l[r.characterPosition]), r.characterSpacing && n.setProperty("letter-spacing", r.characterSpacing + "px"), r.indent && n.setProperty("text-indent", r.indent + "px"), r.italic && n.setProperty("font-style", "italic"), a <= t.DisableHintingThreshold && n.setProperty("-webkit-font-smoothing", "-edge-disable-hinting"), this.multiline && this.wordWrap ? (i.autoExpand || n.setProperty("overflow", "hidden"), n.setProperty("white-space", "pre-wrap"), n.removeProperty("word-break")) : (n.setProperty("overflow", "hidden"), n.setProperty("white-space", "nowrap"));
            var d = s.LineHeightUtil.calc(o, r, this.multiline, this.height),
                u = d + (this.multiline && r.lineSpacing ? r.lineSpacing : 0) + "px";
            n.setProperty("line-height", u), this.addToRenderer()
        }, i.prototype.initializeProperties = function(t) {
            e.prototype.initializeProperties.call(this, t), this.ignoreRepositionLayout = !0, this.hasSize = !0, this.text = this.data.text
        }, i.prototype.cloneProperties = function(t) {
            e.prototype.cloneProperties.call(this, t);
            var i = t;
            void 0 !== i._displayAsPassword && (this._displayAsPassword = i._displayAsPassword), void 0 !== this._ignoreRepositionLayout && (this._ignoreRepositionLayout = i._ignoreRepositionLayout), this.renderAsHTML = i.renderAsHTML, this._rawText = i._rawText
        }, Object.defineProperty(i.prototype, "textAttrs", {
            get: function() {
                return this.data.textAttrs
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "maxLength", {
            get: function() {
                if (!this.htmlElement) return void r.error("TextField.maxLength could be accessed after htmlElement is created.");
                var e = parseInt(this.htmlElement.getAttribute("maxlength"));
                return _.isNaN(e) ? null : e
            },
            set: function(e) {
                return this.type !== o.TextFieldType.INPUT ? void r.error("Can't set TextField.maxLength for non-INPUT typed TextField.") : this.htmlElement ? void(e !== this.maxLength && (e ? this.htmlElement.setAttribute("maxlength", e) : this.htmlElement.removeAttribute("maxlength"))) : void r.error("Can't set TextField.maxLength before htmlElement creation.")
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "disabled", {
            get: function() {
                return $(this.htmlElement).prop("disabled")
            },
            set: function(e) {
                $(this.htmlElement).prop("disabled", e)
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "displayAsPassword", {
            get: function() {
                return this._displayAsPassword || !1
            },
            set: function(e) {
                if (this._displayAsPassword !== e) {
                    this._displayAsPassword = e;
                    var t = this.cssProxies[0];
                    e ? t.setProperty("-webkit-text-security", "disc") : t.removeProperty("-webkit-text-security"), this.addToRenderer()
                }
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "ignoreRepositionLayout", {
            get: function() {
                return this._ignoreRepositionLayout || !1
            },
            set: function(e) {
                this._ignoreRepositionLayout !== e && (this._ignoreRepositionLayout = e, e ? this.htmlElement.setAttribute("edge-textfield", "") : this.htmlElement.removeAttribute("edge-textfield"))
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "htmlText", {
            get: function() {
                return this._rawText
            },
            set: function(e) {
                this.renderAsHTML = !0, this._setText(e)
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "length", {
            get: function() {
                return (this.text || "").length
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "multiline", {
            get: function() {
                return this._multiline
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "text", {
            get: function() {
                return this.htmlElement ? this.type === o.TextFieldType.INPUT ? this.htmlElement.value : this._rawText : (r.error("TextField.text could be accessed after htmlElement is created."), "")
            },
            set: function(e) {
                this.renderAsHTML = !1, this._setText(e)
            },
            enumerable: !0,
            configurable: !0
        }), i.prototype.makeString = function(e) {
            return null == e ? "" : "" + e
        }, i.prototype.stripTags = function(e) {
            return this.makeString(e).replace(/<\/?[^>]+>/g, "")
        }, i.prototype._setText = function(e) {
            if ((_.isUndefined(e) || _.isNull(e)) && (e = ""), this.type === o.TextFieldType.INPUT || this._rawText !== e) {
                if (this._rawText = e, !this.htmlElement) return void r.error("TextField.text could be accessed after htmlElement is created.");
                this.type === o.TextFieldType.INPUT ? this.htmlElement.value = this.stripTags(e) : this.renderAsHTML ? this.htmlElement.innerHTML = e : (this.htmlElement.firstChild || this.htmlElement).textContent = this.stripTags(e)
            }
        }, Object.defineProperty(i.prototype, "type", {
            get: function() {
                return this._type
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(i.prototype, "wordWrap", {
            get: function() {
                return this._wordWrap
            },
            enumerable: !0,
            configurable: !0
        }), i.prototype.drawSize = function() {
            var e = this.cssProxies[0];
            if (this._hasSize) {
                var t = this._calculatePaddings(this.data.textAttrs),
                    i = this.width - t.left - t.right,
                    n = this.height - t.top;
                e.setProperty("width", i + "px"), e.setProperty("height", n + "px")
            } else e.removeProperty("width"), e.removeProperty("height")
        }, i.prototype.drawEffects = function() {
            var t = /(dropShadow|glow)/,
                i = (this.filters || []).filter(function(e) {
                    return t.test(e.name)
                });
            if (!i.length || i.length > 1 || i[0].blurX !== i[0].blurY) return void e.prototype.drawEffects.call(this);
            var n = this.data.filters;
            this.data.filters = _.difference(n, i), e.prototype.drawEffects.call(this), this.data.filters = n;
            var r = i[0],
                o = c.distanceToPosition(r),
                a = o.offsetX,
                s = o.offsetY,
                d = c.hexColorToRGBA(r.color) + " " + a + "px " + s + "px " + r.blurX + "px";
            this.cssProxies[0].setProperty("text-shadow", d)
        }, i.prototype._calculatePaddings = function(e) {
            return {
                left: ("left" === e.alignment ? 2 : 0) + (e.leftMargin || 0),
                right: ("right" === e.alignment ? 2 : 0) + (e.rightMargin || 0),
                top: 0
            }
        }, i.prototype.getFontClass = function(e) {
            return -1 !== e.face.indexOf("League") ? t.GlobalFont : t.LocalFont
        }, i
    }(a.DisplayObject);
    u = n.__decorate([d.component("TextField")], u), t.TextField = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e.getPropertyDescriptor = function(e, t) {
            for (var i, n = e; n && !(i = Object.getOwnPropertyDescriptor(n, t));) n = Object.getPrototypeOf(n);
            return i
        }, e
    }();
    t.ObjectUtil = n
}, , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.ClanNotExist = 1] = "ClanNotExist", e[e.ClanUpdateError = 2] = "ClanUpdateError", e[e.ClanHasCreated = 3] = "ClanHasCreated", e[e.ClanMemberNotExist = 4] = "ClanMemberNotExist", e[e.ClanMemberUpdateError = 5] = "ClanMemberUpdateError", e[e.ClanJoinRequestNotExist = 6] = "ClanJoinRequestNotExist", e[e.ClanJoinRequestDuplicate = 7] = "ClanJoinRequestDuplicate", e[e.ClanInfoNotExist = 8] = "ClanInfoNotExist", e[e.ClanInfoUpdateError = 9] = "ClanInfoUpdateError", e[e.ClanMasterCanNotLeave = 10] = "ClanMasterCanNotLeave", e[e.ClanMasterCanNotBeExpelled = 11] = "ClanMasterCanNotBeExpelled", e[e.ClanOperationPermissionDeny = 12] = "ClanOperationPermissionDeny", e[e.ClanHasOtherMember = 13] = "ClanHasOtherMember", e[e.ClanNoticeMaxLength = 14] = "ClanNoticeMaxLength", e[e.ClanIntroductionMaxLength = 15] = "ClanIntroductionMaxLength", e[e.ClanNameAlreadyExist = 16] = "ClanNameAlreadyExist", e[e.ClanCreationNameLength = 17] = "ClanCreationNameLength", e[e.ClanCreationNoJoinRequest = 18] = "ClanCreationNoJoinRequest", e[e.ClanActionNotPermitted = 20] = "ClanActionNotPermitted", e[e.ClanCreationPlayerLevel = 21] = "ClanCreationPlayerLevel", e[e.ClanCreationNoEnoughSp = 22] = "ClanCreationNoEnoughSp", e[e.ClanCreationDecreaseSpFailed = 23] = "ClanCreationDecreaseSpFailed", e[e.ClanNotInRecruiting = 24] = "ClanNotInRecruiting", e[e.ClanAlreadyInClan = 25] = "ClanAlreadyInClan", e[e.ClanJoinRequestFull = 27] = "ClanJoinRequestFull", e[e.ClanAlreadyFull = 28] = "ClanAlreadyFull", e[e.ClanJoinRequestNotEmpty = 29] = "ClanJoinRequestNotEmpty", e[e.ClanViceCaptainMaxCount = 30] = "ClanViceCaptainMaxCount", e[e.ClanSearchNameLessMin = 31] = "ClanSearchNameLessMin", e[e.ClanSearchNameOverMax = 32] = "ClanSearchNameOverMax", e[e.ClanSearchNameHasSpace = 33] = "ClanSearchNameHasSpace", e[e.ClanForbiddenWords = 34] = "ClanForbiddenWords", e[e.ClanCreationNameHasSpace = 35] = "ClanCreationNameHasSpace", e[e.ClanEmblemOutOfRange = 36] = "ClanEmblemOutOfRange", e[e.ClanCantModifyRecruiting = 37] = "ClanCantModifyRecruiting", e[e.ClanIntroductionForbiddenWords = 40] = "ClanIntroductionForbiddenWords"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(6),
        a = i(7),
        s = i(150),
        c = i(151),
        d = i(214),
        l = i(131),
        u = i(4),
        p = i(10),
        h = i(3),
        f = i(9),
        v = i(181),
        m = i(134),
        g = i(39),
        y = i(39),
        S = i(131),
        E = i(61),
        T = function(e) {
            function t(t, i, n, r, o, a, s, c, d, l, u, p, h, f, v, m) {
                void 0 === m && (m = y.FoxhuntingWinType.FinishTrack);
                var g = e.call(this, t, i, n, r, o, a, s, c, d) || this;
                return g.externalService = t, g.popupService = i, g.staticdataLoaderService = n, g.gameModeService = r, g.uistateNotifyService = o, g.stateService = a, g.dimService = s, g.exceptionHandleService = c, g.recordService = d, g.$window = l, g.pushService = u, g.vehicleDataService = p, g.playerSnippetService = h, g.worldChatService = f, g.foxhuntingWinner = v, g.foxhuntingWinType = m, g.cleanUp = [], g.logPrefix = "room2", g.isSuperPeer = !1, g._onMessage = g.onMessage.bind(g), g
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this._isMatchAbandoned = !1, this.featureType = "room", this.pushService.on("msg", this._onMessage), a.info(">>> " + this.logPrefix + "MatchService push handler installed"), this.initMatchEndPushListener()
            }, t.prototype.destroy = function() {
                this._isMatchAbandoned || (this.pushService.removeListener("msg", this._onMessage), a.info("<<< " + this.logPrefix + "MatchService push handler removed"), this.cleanUp.forEach(function(e) {
                    return e()
                }), this.cleanUp = [])
            }, Object.defineProperty(t.prototype, "teamBattleRankPointData", {
                get: function() {
                    return this.staticdata.teamBattleRankPointData
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.setAsSuperPeerIfItSupportsHostModeEnable = function() {
                this.isSuperPeer = true
            }, t.prototype.mergeAiPlayers = function(e, t) {
                var i = this;
                "PURSUITINDIVIDUAL" !== e.gameMode && e.ais && e.ais.length > 0 && e.ais.forEach(function(e) {
                    var n = i.getAiPlayer(e);
                    i.playerSnippetService.setAiSnippet(n), t.push(n)
                })
            }, t.prototype.createMatch = function(t) {
                var i = this;
                e.prototype.createMatch.call(this, t), this.resetMatchState();
                var n = t.players.map(function(e) {
                    return _.assign({}, e, {
                        state: "connecting"
                    })
                });
                this.mergeAiPlayers(t, n);
                var s = _.assign({
                    id: t.matchId,
                    state: "created",
                    featureType: this.featureType,
                    players: n
                }, _.pick(t, ["gameMode", "trackCode", "useDediSvr"]));
                h.store.dispatch(c.createMatch(s));
                var d = _.find(this.match.players, function(e) {
                        return e.id === h.store.getState().player.id
                    }),
                    l = d && this.vehicleDataService.getVehicleData(d.vehicle.code);
                d || a.warn("unabled to find my entry! " + h.store.getState().player.id), l || a.warn("unabled to find my vehicle!"), d && l && (this.recordService.initRecord(), this.recordService.setRecord("pid", h.store.getState().player.id), this.recordService.setRecord("vehicle", l.code), this.recordService.setRecord("vehicleclass", l.clazz)), this.serverTimeout = o.delay(1e3 * r.Constants.ServerResolveTimeout).then(function() {
                    i.rejectServerTimeout()
                })
            }, t.prototype.getAiPlayer = function(e) {
                var t = this.staticdataLoaderService.aiDb.aiData[e];
                return {
                    id: e + "",
                    team: 0,
                    state: "connecting",
                    vehicle: {
                        code: t.vehicleCode,
                        grade: t.vehicleGrade || 1,
                        igr: !1,
                        ovr: m.VehicleDataService.getIStatusOvr(t.ovr),
                        status: t.ovr,
                        paint: this.vehicleDataService.getDefaultTuningData(t.vehicleCode),
                        parts: v.default.EmptyParts
                    },
                    ai: t,
                    plate: h.store.getState().numberPlate.defaultNumberPlate
                }
            }, t.prototype.resetMatchState = function() {
                this.deferredRewarded = u.default.defer(), this.deferredFinished = u.default.defer(), this.deferredRewarded.promise.catch(function(e) {
                    return a.debug(e)
                }), this.deferredFinished.promise.catch(function(e) {
                    return a.debug(e)
                }), this.removeHandler(), this.initGameHandler();
                var e = h.store.getState().player,
                    t = e.sp,
                    i = e.exp,
                    n = e.level;
                h.store.dispatch(l.clearState()), h.store.dispatch(S.setPrevPlayerStatus({
                    sp: t,
                    exp: i,
                    level: n
                })), this._isMatchAbandoned = !1
            }, t.prototype.clearMatchState = function() {
                this.isSuperPeer = !1, this._isMatchAbandoned || (this.records = [], this.foxhuntingWinner = void 0, this.foxhuntingWinType = y.FoxhuntingWinType.FinishTrack, this.recordService.distanceList = {}, this.recordService.initRecord(), this.removeHandler(), this.deferredRewarded && this.deferredRewarded.reject(new Error("clearMatchState")), this.deferredFinished && this.deferredFinished.reject(new Error("clearMatchState")), this.cancelServerTimeout(), h.store.dispatch(c.leaveMatch()))
            }, t.prototype.onExitRoom = function() {
                this._isMatchAbandoned && (this._isMatchAbandoned = !1, this.clearMatchState(), this.destroy())
            }, t.prototype.initMatchEndPushListener = function() {
                var e = this;
                this.cleanUp.push(this.pushService.subscribeResource(/\/v2\/room2s\/(.*)\/matchend$/, function(t, i) {
                    a.info(">> room2 matchend", t, i, e._isMatchAbandoned), h.store.dispatch(l.endMatch(i.body, e.calculateTeamBattleScore(i.body))), h.store.dispatch(E.resetMatchEndTime(i.body.matchEndAt))
                })), this.cleanUp.push(this.pushService.subscribeResource(/\/v2\/room2s\/(.*)\/matchend\/(.*)\/reward/, function(t, i) {
                    a.info(">> room2 reward", t, i, e._isMatchAbandoned), h.store.dispatch(l.receiveReward(i.body)), h.store.dispatch(s.reserveMatchReward(i.body)), e.resolveReward()
                }))
            }, t.prototype.onMessage = function(e) {
                if (-1 !== e.cmd.indexOf("match2")) switch (a.info(">> push message on Match :", e.cmd, JSON.stringify(e)), e.cmd) {
                    case "match2.created":
                        this.createMatch(e.opts);
                        break;
                    case "match2.dedisvr.created":
                        !this.isSuperPeer && this.onCreatedServer(e.opts);
                        break;
                    case "match2.entries.changed":
                        this.onEntryChanged(e.opts);
                        break;
                    case "match2.dedisvr.assignfailed":
                        this.emitMatchEvent("connect.error", e.opts);
                        break;
                    case "match2.start.superpeer":
                        this.cancelServerTimeout(), this.isSuperPeer && this.hostMultiplayGame(e.opts);
                        break;
                    case "match2.end.expired":
                        this.expiredMatch()
                }
            }, t.prototype.onPlayerLeft = function(e) {}, t.prototype.hostMultiplayGame = function(e) {
                var t = this;
                a.warn(this.logPrefix + "-match", "hostMultiplayGame"), this.externalService.beHostMultiplayerGame(e), this.externalService.once(f.default.beHostModeServerCreated, function(i, n, r) {
                    a.warn("CORE>>", "beHostModeServerCreated", i, n, r);
                    var o = {
                        host: i,
                        port: n,
                        securityKey: r,
                        matchId: e.matchId
                    };
                    t.onCreatedServer(o), p.request("POST", "match2/superpeer/@start", o)
                })
            }, t.prototype.initGameHandler = function() {
                var t = this;
                e.prototype.initGameHandler.call(this), this.addGameOnceHandler(f.default.beAbortRace, function() {
                    t.abandonMatch(!0)
                }), this.addGameHandler(f.default.beHUDPursuitArrested, function(e) {
                    h.store.dispatch(c.updatePlayerArrested(e))
                }), this.addGameOnceHandler(f.default.beHUDSetFoxhuntingWinType, function(e, i) {
                    t.foxhuntingWinner = e, t.foxhuntingWinType = i
                }), this.addGameHandler(f.default.beAddRecord, function(e, i, n, r) {
                    void 0 === n && (n = 0), void 0 === r && (r = 0), t._isMatchAbandoned || t.addRecord({
                        id: e,
                        time: i,
                        mileage: n,
                        driftpoint: r,
                        foxhuntingWinType: t.foxhuntingWinType,
                        ratio: 1,
                        completionRate: 1
                    })
                }), this.addGameOnceHandler(f.default.beFinishGame, function(e, i, n) {
                    t._isMatchAbandoned || (t.finishMatch(e, n), t.emitMatchEvent("match.finish", e))
                }), this.deferredFinished.promise.then(function(e) {
                    e || t.deferredRewarded.promise.isResolved() || (t.rewardTimeout = o.delay(1e3 * r.Constants.RewardResolveTimeout).then(function() {
                        t.rejectMatchEnd("Not received push message of match-result. The match will be end")
                    }))
                })
            }, t.prototype.rejectMatchEnd = function(e) {
                var t = u.default.getUUID();
                this.exceptionHandleService.catchScreenError(new Error(e), t), this.clearMatchState(), this.emitMatchEvent("match.reward.timeout", e)
            }, t.prototype.addRecord = function(t) {
                t.foxhuntingWinType === y.FoxhuntingWinType.FinishTrack && t.id === this.foxhuntingWinner && (t.lapCount = this.recordService.totalLap), e.prototype.addRecord.call(this, t)
            }, t.prototype.dummyMatchEnd = function(e) {
                var t = h.store.getState().player.id,
                    i = _.find(this.match.players, function(e) {
                        return e.id === t
                    }),
                    n = {
                        pid: i.id,
                        sid: "",
                        rank: 0,
                        retire: !0,
                        team: i.team,
                        vehicle: {
                            code: i.vehicle.code,
                            grade: i.vehicle.grade,
                            parts: {
                                engine: 0,
                                transmission: 0,
                                nitroTank: 0,
                                bumper: 0,
                                frame: 0
                            },
                            status: i.vehicle.status
                        },
                        forceLeave: e,
                        abuseStatus: r.Reward.AbusePlayerStatus.NON_ABUSE_PLAYER
                    };
                return {
                    trackCode: this.match.trackCode,
                    gameMode: this.match.gameMode,
                    players: [n]
                }
            }, t.prototype.dummyTeamBattleResult = function() {
                if (!this.gameModeService.isIndividualMode(this.match.gameMode)) {
                    var e = h.store.getState().player.id;
                    return {
                        isLocalPlayerWinner: !0,
                        firstPlaceTeam: _.find(this.match.players, function(t) {
                            return t.id === e
                        }).team,
                        teamAScore: 0,
                        teamBScore: 0,
                        teamABonus: 0,
                        teamBBonus: 0
                    }
                }
            }, t.prototype.abandonMatch = function(e) {
                this._isMatchAbandoned = !0;
                var t = h.store.getState().player.id;
                p.request("DELETE", "match2/players/" + t), this.requestDeleteFeature(), this.emitMatchEvent("match.abandon", !!e);
                var i = _.find(this.match.players, function(e) {
                        return e.id === t
                    }),
                    n = this.recordService.distanceList[i.id],
                    r = {
                        id: i.id,
                        time: 0,
                        mileage: 0,
                        ratio: n,
                        driftpoint: 0,
                        completionRate: 0
                    };
                this.records.push(r), h.store.dispatch(c.addRecord(r)), h.store.dispatch(l.abandonMatch(this.dummyMatchEnd(!0))), h.store.dispatch(d.resetAutoMatchmaking()), this.deferredFinished.resolve(!0), this.resolveReward(), this.externalService.beAbandonRace()
            }, t.prototype.requestDeleteFeature = function() {
                p.request("DELETE", "room2/player")
            }, t.prototype.expiredMatch = function() {
                a.info(">> " + this.logPrefix + "-match.expiredMatch"), h.store.dispatch(l.expiredMatch(this.dummyMatchEnd(!1), this.dummyTeamBattleResult())), this.deferredFinished.resolve(!0), this.resolveReward()
            }, t.prototype.cleanupOnConnectionError = function() {
                var e = h.store.getState().player.id;
                return p.request("DELETE", "match2/players/" + e), p.request("DELETE", "room2/player"), "root.menu.MultiplayLobby"
            }, t.prototype.calculateTeamBattleScore = function(e) {
                var t = this;
                if (!this.gameModeService.isIndividualMode(e.gameMode)) {
                    var i = e.players,
                        n = _.groupBy(i, "team"),
                        r = _.mapValues(n, function(e) {
                            return _.sumBy(e, function(e) {
                                return e.retire ? t.teamBattleRankPointData.retire : t.teamBattleRankPointData[e.rank]
                            })
                        }),
                        o = r[g.Team.A] || 0,
                        a = r[g.Team.B] || 0,
                        s = _.find(i, function(e) {
                            return !e.retire && 1 === e.rank
                        }),
                        c = s ? s.team : g.Team.A,
                        d = 0,
                        l = 0;
                    o === a && (c === g.Team.A ? d = 1 : l = 1);
                    var u = _.find(i, {
                            pid: h.store.getState().player.id
                        }) || i[0],
                        p = !0;
                    switch (o + d > a + l) {
                        case !0:
                            p = u.team === g.Team.A;
                            break;
                        case !1:
                            p = u.team === g.Team.B
                    }
                    return {
                        isLocalPlayerWinner: p,
                        firstPlaceTeam: c,
                        teamAScore: o,
                        teamBScore: a,
                        teamABonus: d,
                        teamBBonus: l
                    }
                }
            }, t.prototype.resolveReward = function() {
                this.rewardTimeout && (this.rewardTimeout.cancel(), this.rewardTimeout = void 0), this.deferredRewarded.resolve()
            }, t.prototype.cheatFinishGame = function(e) {
                void 0 === e && (e = 200);
                var t = h.store.getState().player.id;
                a.info(this.logPrefix + "-match.cheatFinishGame"), this.addRecord({
                    id: t,
                    time: e,
                    mileage: 0,
                    ratio: 1,
                    driftpoint: 0
                })
            }, t.prototype.cheatPassGame = function() {
                var e = this,
                    t = h.store.getState().match.match.id,
                    i = h.store.getState().match,
                    n = i.match;
                this.deferredFinished.promise.then(function() {
                    p.request("POST", "match2/" + t + "/@end", {
                        result: n.players.map(function(e, t) {
                            return {
                                playerid: e.id,
                                rank: t + 1,
                                laptime: 200 + t,
                                completionrate: 1,
                                mileage: t + 100,
                                driftpoint: 1e5 - 1e4 * t,
                                ai: !!Number(e.id)
                            }
                        })
                    })
                }), o.delay(3500).then(function() {
                    return e.$window.beAllPlayerLoaded()
                }).delay(3e3).then(function() {
                    var t = 5;
                    return u.default.interval(function() {
                        e.$window.beHUDStartCountdown(t--)
                    }, 1e3, 5)
                }).delay(1e3).then(function() {
                    e.$window.beHUDStartGame(), e.externalService.cheatHudStartGame()
                }).delay(5e3).then(this.cheatFinishGame.bind(this)).delay(500).then(function() {
                    return e.$window.beFinishGame(!1)
                })
            }, t
        }(g.MatchAbstract);
    T.$inject = ["externalService", "popupService", "staticdataLoaderService", "gameModeService", "uistateNotifyService", "stateService", "dimService", "exceptionHandleService", "recordService", "$window", "pushService", "vehicleDataService", "playerSnippetService", "worldChatService"], t.Room2MatchService = T, t.default = T, angular.module("edge.components").factory("room2MatchService", u.default.generateService(T))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "quick-match.selectGameMode",
            gameMode: e
        }
    }

    function r() {
        return {
            type: "quick-match.resetQuickMatch"
        }
    }

    function o(e, t) {
        return {
            type: "quick-match.showChangePursuitTechPopup",
            item1: e,
            item2: t
        }
    }

    function a() {
        return {
            type: "quick-match.hideChangePursuitTechPopup"
        }
    }

    function s() {
        return {
            type: "quick-match.enableAutoMatchmaking"
        }
    }

    function c(e) {
        return {
            type: "quick-match.updateAutoUseItem",
            isAutoUseItemOn: e
        }
    }

    function d() {
        return {
            type: "quick-match.resetAutoMatchmaking"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.selectGameMode = n, t.resetQuickMatch = r, t.showChangePursuitTechPopup = o, t.hideChangePursuitTechPopup = a, t.enableAutoMatchmaking = s, t.updateAutoUseItem = c, t.resetAutoMatchmaking = d
}, , , , , , , , , , function(e, t, i) {
    "use strict";

    function n() {
        return function(e, t) {
            t().videoGuide.show && e(o.hide()), e({
                type: "core-loading.show"
            })
        }
    }

    function r() {
        return {
            type: "core-loading.hide"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(113);
    t.show = n, t.hide = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.PromotionBannerSlidingTerm = 1e4;
    ! function(e) {
        e[e.Ongoing = 0] = "Ongoing", e[e.Expected = 1] = "Expected", e[e.Expired = 2] = "Expired", e[e.Completed = 3] = "Completed"
    }(t.PromotionStatus || (t.PromotionStatus = {})), t.MAX_PREVIEW_COLUMN = 5
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "promotion.updatePromotions",
            promotions: e
        }
    }

    function r(e) {
        return {
            type: "promotion.updateBanners",
            banners: e
        }
    }

    function o() {
        return {
            type: "promotion.togglePreview"
        }
    }

    function a() {
        return {
            type: "promotion.hidePreview"
        }
    }

    function s(e) {
        return {
            type: "promotion.openPromotionList",
            id: e
        }
    }

    function c() {
        return {
            type: "promotion.closePromotionList"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.updatePromotions = n, t.updateBanners = r, t.togglePreview = o, t.hidePreview = a, t.openPromotionList = s, t.closePromotionList = c
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "shop.fetchBanners",
            props: e
        }
    }

    function r(e) {
        return {
            type: "shop.fetchTopProducts",
            props: e
        }
    }

    function o(e, t) {
        return {
            type: "shop.fetchProductCollection",
            props: {
                category: t,
                products: e
            }
        }
    }

    function a(e, t) {
        return {
            type: "shop.fetchCash",
            props: {
                pub: e,
                cash: t
            }
        }
    }

    function s(e, t) {
        return {
            type: "shop.setFallbackImg",
            props: {
                category: e,
                code: t
            }
        }
    }

    function c(e, t) {
        return {
            type: "shop.showChargePopup",
            props: {
                show: e,
                chargeUrl: t
            }
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.fetchBanners = n, t.fetchTopProducts = r, t.fetchProductCollection = o, t.fetchPubCash = a, t.setFallbackImg = s, t.showChargePopup = c
}, function(e, t, i) {
    "use strict";

    function n(e) {
        void 0 === e && (e = 1);
        var t = s.store.getState(),
            i = t.tutorial,
            n = t.campaign,
            r = n.currentCampaignCode,
            c = n.status;
        return i.status !== a.TutorialStatus.FINISHED && r <= e && c !== o.Openworld.CampaignStatus.Completed
    }

    function r() {
        var e = s.store.getState().campaign,
            t = e.currentCampaignCode,
            i = e.status;
        return 1 === t && i === o.Openworld.CampaignStatus.NotStarted
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(15),
        a = i(110),
        s = i(3);
    t.hasTutorial = n, t.isFirstAttempt = r
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "openworld-mission.set",
            mission: e
        }
    }

    function r(e) {
        return {
            type: "openworld-mission.block",
            isBlocked: e
        }
    }

    function o(e, t) {
        e(g.pause("openworld")), e(g.hide()), e(g.hideHistory()), e(S.hidePreview()), e(E.hidePreview()), e(y.enableSystemTray({
            promotion: !1,
            messenger: !1,
            notifier: !1,
            quest: !1
        })), t().messenger.selected && ($(document.body).scope().$applyAsync(), e(_.hide()))
    }

    function a(e) {
        e(g.resume("openworld")), e(y.enableSystemTray({
            promotion: !0,
            messenger: !0,
            notifier: !0,
            quest: !0
        }))
    }

    function s() {
        return function(e, t) {
            a(e), e({
                type: "openworld-mission.clear"
            })
        }
    }

    function c(e) {
        return function(t, i) {
            o(t, i), t({
                type: "openworld-mission.accept",
                mission: e
            })
        }
    }

    function d(e) {
        return {
            type: "openworld-mission.start",
            startParam: {
                checkpointCount: e
            }
        }
    }

    function l(e, t) {
        return {
            type: "openworld-mission.finish",
            result: {
                finishState: e,
                medal: t
            }
        }
    }

    function u() {
        return function(e, t) {
            a(e), e({
                type: "openworld-mission.reset"
            })
        }
    }

    function p(e, t) {
        return {
            type: "openworld-mission.fetchSpotAndMission",
            spotRecords: e.reduce(function(e, t) {
                return e[t.code] = t, e
            }, {}),
            unlockedMissions: t.map(function(e) {
                return e.code
            })
        }
    }

    function h(e) {
        return {
            type: "openworld-mission.updateSpotRecord",
            record: e
        }
    }

    function f(e) {
        return {
            type: "openworld-mission.initLimitedMission",
            limitedMission: e
        }
    }

    function v(e) {
        return {
            type: "openworld-mission.updateLimitedMission",
            info: e
        }
    }

    function m(e) {
        return {
            type: "openworld-mission.addUnlockedMissions",
            codes: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var g = i(69),
        y = i(53),
        S = i(226),
        _ = i(302),
        E = i(190);
    t.set = n, t.block = r, t.clear = s, t.accept = c, t.start = d, t.finish = l, t.reset = u, t.fetchSpotAndMission = p, t.updateSpotRecord = h, t.initLimitedMission = f, t.updateLimitedMission = v, t.addUnlockedMissions = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(49),
        o = i(8),
        a = i(19),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._src = "", t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "src", {
                get: function() {
                    return this._src
                },
                set: function(e) {
                    this._src !== e && (this._src = e, this.htmlElement.setAttribute("src", e))
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.createDomNode = function(e) {
                var t = this,
                    i = document.createElement("iframe");
                return i.onload = function() {
                    return t.emit(o.EventEx.LOAD)
                }, i
            }, t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.hasSize = !0
            }, t.prototype.postCreate = function() {
                e.prototype.postCreate.call(this);
                var t = this.$(".comp-Shape");
                t && (this.width = t.width, this.height = t.height), this.removeAllChildren()
            }, t
        }(r.MovieClip);
    s = n.__decorate([a.component("IFrameView")], s), t.IFrameView = s, t.default = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(28),
        a = i(2),
        s = i(160),
        c = i(3),
        d = i(5),
        l = i(375),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.prevProps = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = this.face;
                t.hasSize = !0, t.setCustomStyle({
                    display: "inline-block",
                    position: "relative"
                });
                var i = this.face.$(".SelectedBackground *");
                void 0 !== i && (i.mouseEnabled = !1);
                var n = this.props;
                t.on(a.MouseEventEx.CLICK, function(t) {
                    e.onClick(t)
                }), this.face.htmlElement.setAttribute("data-string", n.nav.stringCode), this.showNewItemIndicator(!1), "NAV_MYITEM_INVENTORY" !== n.nav.stringCode && "NAV_MYITEM_INBOX" !== n.nav.stringCode && "NAV_MYITEM" !== n.nav.stringCode || this.addManagedListener(this.playerService, "newItemIndicate", function() {
                    return e.checkNewItemIndicator(n.nav.stringCode)
                }), this.update(this.props)
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.nav,
                    n = e.hideNav;
                if (this.prevProps.nav !== i || this.prevProps.hideNav !== n) {
                    var r = this.face;
                    r.label = i.text;
                    var a = !n && i.selected;
                    r.selected = a;
                    var s = i.locked;
                    r.enabled = !s, this.apply(r, o.classNames, {
                        "prevent-click": a,
                        active: a
                    }), this.prevProps.nav && this.prevProps.nav.text === i.text || l.setTimeout(function() {
                        return t.checkNewItemIndicator(i.stringCode)
                    }, 100), this.prevProps = e
                }
            }, t.prototype.onClick = function(e) {
                this.props.nav.selected || this.dispatch(s.requestNavigate(this.props.nav, this.stateService))
            }, t.prototype.checkNewItemIndicator = function(e) {
                switch (e) {
                    case "NAV_MYITEM_INVENTORY":
                        this.checkNewlyGainedItem("inventory");
                        break;
                    case "NAV_MYITEM_INBOX":
                        this.checkNewlyGainedItem("inbox");
                        break;
                    case "NAV_MYITEM":
                        this.checkNewlyGainedItem("inventory", "inbox");
                        break;
                    default:
                        this.checkNewlyGainedItem()
                }
            }, t.prototype.checkNewlyGainedItem = function() {
                for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
                if (0 === e.length) return void this.showNewItemIndicator(!1);
                var i = c.store.getState().player,
                    n = i.newlyGainedAt && _.some(e, function(e) {
                        var t = d(i.checkedat[e]);
                        return d(i.newlyGainedAt[e]).isAfter(t)
                    });
                this.showNewItemIndicator(n)
            }, t.prototype.showNewItemIndicator = function(e) {
                var t = this.getFace(".id-newIndicator");
                if (t && (this.gotoAndStop(t, e ? "on" : "off"), e)) {
                    var i = this.face,
                        n = i.$(".id-buttonName .id-textField") || i.$(".id-mainTitle .id-textField");
                    if (i && n) {
                        var r = this.getTextWidth(n),
                            o = n.htmlElement.style.textAlign;
                        t.scaleXMultiplier = 1, t.xOffset = 0, t.x = "center" === o ? (i.width + r) / 2 - 5 : r + 17
                    }
                }
            }, t.prototype.getTextWidth = function(e) {
                var t = $(e.htmlElement).clone().css({
                        width: "auto",
                        "font-size": "16px",
                        top: "100%"
                    }).appendTo("#edge-ui"),
                    i = t.width();
                return t.remove(), i
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("stateService")], u.prototype, "stateService", void 0), n.__decorate([r.autowired("playerService")], u.prototype, "playerService", void 0), t.MenuButton = u
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "multiplay-lobby.showCreateRoomPopup",
            mode: e
        }
    }

    function r() {
        return {
            type: "multiplay-lobby.hideCreateRoomPopup"
        }
    }

    function o() {
        return {
            type: "multiplay-lobby.showEnterRoomPopup"
        }
    }

    function a() {
        return {
            type: "multiplay-lobby.hideEnterRoomPopup"
        }
    }

    function s(e) {
        return {
            type: "multiplay-lobby.showRoomPasswordPopup",
            roomId: e
        }
    }

    function c(e) {
        return {
            type: "multiplay-lobby.updateRoomPasswordPopup",
            data: e
        }
    }

    function d() {
        return {
            type: "multiplay-lobby.hideRoomPasswordPopup"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.showCreateRoomPopup = n, t.hideCreateRoomPopup = r, t.showEnterRoomPopup = o, t.hideEnterRoomPopup = a, t.showRoomPasswordPopup = s, t.updateRoomPasswordPopup = c, t.hideRoomPasswordPopup = d
}, function(e, t, i) {
    "use strict";

    function n(e) {
        var t = function() {
            e.closest("html").length && (e.focus(), e.is(":focus") || setTimeout(t, 300))
        };
        t()
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(6),
        a = i(30),
        s = i(2),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.isInputFocused = !1, t.onConfirm = function() {
                    return o.resolve()
                }, t.onCancel = function() {}, t
            }
            return r.__extends(t, e), Object.defineProperty(t.prototype, "alertTarget", {
                get: function() {
                    return ".id-subtitleLabel"
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "inputTarget", {
                get: function() {
                    return ".id-input"
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "confirmButtonTarget", {
                get: function() {
                    return ".id-confirmButton"
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "cancelButtonTarget", {
                get: function() {
                    return ".id-cancelButton"
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "snoozeMessage", {
                get: function() {
                    return ""
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.alert = function(e) {
                if (this.alertTarget) {
                    this.translate(this.alertTarget, e);
                    var t = $(this.alertTarget + " > .id-textField");
                    t.addClass("alert-color"), t.removeClass("message-alarm"), setTimeout(function() {
                        return t.addClass("message-alarm")
                    }, 1)
                }
            }, t.prototype.snooze = function() {
                if (this.alertTarget) {
                    var e = $(this.alertTarget + " > .id-textField");
                    e.removeClass("alert-color"), e.removeClass("message-alarm"), this.translate(this.alertTarget, this.snoozeMessage)
                }
            }, t.prototype.onFaceReady = function() {
                var e = this;
                this.face.visible = !1, this.translate(this.confirmButtonTarget, this.props.confirmButtonText || "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.translate(this.cancelButtonTarget, this.props.cancelButtonText || "COMMON_POPUP_EXIT_BUTTON_CANCEL"), this.onClickSafe(this.confirmButtonTarget, this.onConfirm), this.on(this.cancelButtonTarget, s.MouseEventEx.CLICK, this.onCancel), this.keydownHandler = function(t) {
                    switch (t.keyCode) {
                        case 13:
                            var i = e.convertFace(e.confirmButtonTarget);
                            i.enabled && i.emit(s.MouseEventEx.CLICK);
                            break;
                        case 27:
                            var n = e.convertFace(e.cancelButtonTarget);
                            n.enabled && n.emit(s.MouseEventEx.CLICK)
                    }
                }, this.update(this.props)
            }, t.prototype.update = function(e) {
                if (void 0 === e && (e = {}), _.isEmpty(e)) return $(window).off("keydown", this.keydownHandler), $(".dropdown-backdrop").trigger("click"), this.gotoAndPlay(this.face, "out", !0);
                this.face.visible = !0, this.snooze(), this.gotoAndPlay(this.face, "in", !0), $(window).on("keydown", this.keydownHandler);
                var t = this.convertFace(this.inputTarget);
                n($(t.htmlElement).find(".id-textField"))
            }, t
        }(a.Binder);
    t.InputPopupBinder = c, t.focusRepeatedly = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        var i = $(e.htmlElement).find(".id-textField");
        i.on("keydown", function(e) {
            r.default.validateNumber(e) || e.preventDefault()
        }), i.on("input", function(e) {
            var t = e.target;
            t.value = t.value.replace(/\D/g, "")
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(4);
    t.NumericInput = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return e.matchResult && !_.find(e.matchResult.players, {
            pid: r.store.getState().player.id
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(3);
    t.isObserver = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(158),
        a = i(30),
        s = i(16),
        c = i(316),
        d = i(2),
        l = i(50),
        u = i(182),
        p = i(3),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.isCraftable = function() {
                var e = this.props,
                    t = e.code,
                    i = e.resource,
                    n = e.material,
                    r = e.craftable;
                if (i && i.count > 0 && n) {
                    var o = this.staticdataLoaderService.partsCombineData[t];
                    return r && o.materialAmount <= n.count && o.cost <= p.store.getState().player.sp
                }
                return !1
            }, t.prototype.onFaceReady = function() {
                var e = this;
                this.resourceBinder = this.addChildBinder(this.face, c.PartResourceBinder), this.onClickSafe(this.face, this.showPartsCombine.bind(this)), this.addManagedListener(this.face, d.MouseEventEx.MOUSE_OVER, function() {
                    var t = e.staticdataLoaderService.partsCombineData[e.props.code],
                        i = t ? u.getParts(t.materialCode) : void 0,
                        n = e.props.tooltip && e.props.tooltip.side;
                    n || (n = e.props.index / 10 < 3 ? "bottom" : "top", 9 <= e.props.index % 10 && (n += "left")), e.tooltipService.show(e.getFace(".comp-HitArea"), n, l.TooltipType.PartsSlot, {
                        slotType: e.props.slotType,
                        managementType: e.props.type,
                        partsItem: e.props.code ? _.assign({}, e.staticdataLoaderService.partsItemData[e.props.code], {
                            resource: e.props.resource,
                            material: i
                        }) : void 0,
                        combineData: t
                    })
                }), this.addManagedListener(this.face, d.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                }), this.update(this.props)
            }, t.prototype.showPartsCombine = function(e) {
                var t = this;
                return new r(function(e) {
                    var i = p.store.getState().partsCombine.popupState,
                        n = t.props,
                        r = n.code,
                        a = n.resource,
                        s = n.craftable;
                    if (!i && a && s) {
                        t.staticdataLoaderService.partsCombineData[a.code] && t.lazyLoadService.loadView("vehicles-parts-combine").then(function() {
                            t.dispatch(o.showCraftPopup(r)), setTimeout(function() {
                                t.tooltipService.hide(), e()
                            }, 10)
                        })
                    } else e()
                })
            }, t.prototype.update = function(e) {
                var t = e.slotType,
                    i = e.code;
                if (this.resourceBinder.setProps(e), i) {
                    var n = this.staticdataLoaderService.partsItemData[e.code];
                    this.drawExternalImage(".PartsImage", this.$filter("cdn_parts")(n.code)), this.template(".id-partsLevelLabel", "VEHICLE_PARTSSLOT_LEVEL", {
                        level: n.level
                    }), this.gotoAndStop(".PartsGradeContainer", "grade" + n.level)
                }
                switch (t) {
                    case "management":
                        this.visible(".id-arrowIcon", e.isBestItem), e.isBestItem && this.getFace(".id-arrowIcon").play();
                        break;
                    case "inventory":
                        var r = this.isCraftable();
                        this.visible(".id-arrowIcon", r), r && this.getFace(".id-arrowIcon").play();
                        break;
                    default:
                        this.visible(".id-arrowIcon", !1)
                }
            }, t
        }(a.Binder);
    n.__decorate([s.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([s.autowired("staticdataLoaderService")], h.prototype, "staticdataLoaderService", void 0), n.__decorate([s.autowired("tooltipService")], h.prototype, "tooltipService", void 0), n.__decorate([s.autowired("lazyLoadService")], h.prototype, "lazyLoadService", void 0), t.InventoryPartsBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(34),
        r = function() {
            function e() {}
            return e.onDestroyPlate = function(e, t) {
                var i = n.getInjector().get("popupService"),
                    r = n.getInjector().get("$filter"),
                    o = [r("template")({
                        uniquenumber: e
                    }, "MYNUMBERPLATE_REMOVEDONE_POPUP_TEXT")];
                t > 0 && o.push(r("template")({
                    spacquired: r("currency")(t, "", 0)
                }, "MYNUMBERPLATE_REMOVEDONE_POPUP_SP")), i.drawConfirm("MYNUMBERPLATE_REMOVEDONE_POPUP_TITLE", o.join("\n"))
            }, e.onFirstRandomListResetPopup = function(e) {
                n.getInjector().get("popupService").drawConfirm("NUMBERPLATE_POPUP_OWNED_TITLE", "NUMBERPLATE_POPUP_OWNED_TEXT", function() {
                    e && e()
                })
            }, e.onLotteryRestart = function(e, t) {
                e.draw("ConfirmPopup", {
                    title: "RANDOMNUMBERPLATE_RESTART_POPUP_TITLE",
                    description: "RANDOMNUMBERPLATE_RESTART_POPUP_TEXT",
                    confirmString: "RANDOMNUMBERPLATE_RESTART_POPUP_CONFIRM",
                    confirm: function() {
                        t && t()
                    }
                })
            }, e.onLotteryOwned = function(e, t) {
                e.draw("ConfirmPopup", {
                    title: "RANDOMNUMBERPLATE_GET_OWNED_TITLE",
                    description: "RANDOMNUMBERPLATE_GET_OWNED_TEXT",
                    confirmString: "RANDOMNUMBERPLATE_GET_OWNED_CONFIRM",
                    confirm: function() {
                        t && t()
                    }
                })
            }, e.onExchangeOwned = function(e, t) {
                e.draw("ConfirmPopup", {
                    title: "MYNUMBERPLATE_EXCHANGE_SCREEN_OWNED_TITLE",
                    description: "MYNUMBERPLATE_EXCHANGE_SCREEN_OWNED_TEXT",
                    confirmString: "MYNUMBERPLATE_EXCHANGE_SCREEN_OWNED_CONFIRM",
                    confirm: function() {
                        t && t()
                    }
                })
            }, e.onPrefixDone = function(e, t, i) {
                var r = n.getInjector().get("$filter");
                e.draw("ConfirmPopup", {
                    title: "MYNUMBERPLATE_PERSONAL_POPUP_DONE_TITLE",
                    description: r("template")({
                        personalnumber: t
                    }, "MYNUMBERPLATE_PERSONAL_POPUP_DONE_TEXT"),
                    confirmString: "MYNUMBERPLATE_PERSONAL_POPUP_DONE_CONFIRM",
                    confirm: function() {
                        i && i()
                    }
                })
            }, e
        }();
    t.NumberPlatePopupHelper = r
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return void 0 === e && (e = "C"), {
            type: "parts-inventory.show",
            classType: e
        }
    }

    function r() {
        return {
            type: "parts-inventory.hide"
        }
    }

    function o(e) {
        return {
            type: "parts-inventory.setClassType",
            classType: e
        }
    }

    function a() {
        return {
            type: "parts-inventory.reset"
        }
    }

    function s(e) {
        return {
            type: "parts-inventory.animate",
            code: e
        }
    }

    function c() {
        return {
            type: "parts-inventory.resetAnimation"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.show = n, t.hide = r, t.setClassType = o, t.reset = a, t.animate = s, t.resetAnimation = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(30);
    ! function(e) {
        e[e.left = 0] = "left", e[e.slash = 1] = "slash", e[e.right = 2] = "right"
    }(n || (n = {}));
    var a = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t._content = {}, t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.hasSize = !0, this.face.text = "", this._content[n[n.left]] = void 0, this._content[n[n.slash]] = void 0, this._content[n[n.right]] = void 0;
            var t = this.face.htmlElement.className.split(" ");
            _.remove(t, function(e) {
                return /^id-/.test(e)
            }), _.each(Object.keys(this._content), function(i) {
                e._content[i] = document.createElement("span"), e._content[i].className = t.concat(["id-" + i, "DigitSlashDigit"]).join(" "), e._content[i].style.position = "relative", e.face.htmlElement.appendChild(e._content[i])
            }), this._content[n[n.slash]].textContent = "/"
        }, t.prototype.update = function(e) {
            var t = this;
            _.each(this._content, function(i, n) {
                e[n] && (i.textContent = e[n].text, e[n].className ? t.refreshClasses(i, e[n].className) : (e[n].color && (i.style.color = e[n].color), e[n].fontSize && (i.style.fontSize = e[n].fontSize)))
            })
        }, t.prototype.refreshClasses = function(e, t) {
            var i = e.className,
                n = [],
                r = i.indexOf("DigitSlashDigit");
            n.push(-1 !== r ? i.substring(0, r - 1) : i, "DigitSlashDigit", t), e.className = n.join(" ")
        }, t
    }(o.Binder);
    t.DigitSlashDigitBinder = a
}, function(e, t, i) {
    "use strict";

    function n() {
        return {
            type: "vehicleUpgrade.init"
        }
    }

    function r(e, t) {
        return {
            type: "vehicleUpgrade.setUpgradeState",
            upgradeState: e,
            selectedExterior: t
        }
    }

    function o(e) {
        return {
            type: "vehicleUpgrade.pickVehicle",
            picked: e
        }
    }

    function a(e) {
        return {
            type: "vehicleUpgrade.selectVehicle",
            index: e
        }
    }

    function s(e) {
        return {
            type: "vehicleUpgrade.deselectVehicle",
            index: e
        }
    }

    function c() {
        return {
            type: "vehicleUpgrade.clearSelection"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.init = n, t.setUpgradeState = r, t.pickVehicle = o, t.selectVehicle = a, t.deselectVehicle = s, t.clearSelection = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.translate(".id-search", "TRADEMARKET_VEHICLELIST_BUTTON_SEARCH");
                var t = this.getFace(".id-detail");
                t && this.on(t, o.MouseEventEx.CLICK, function(t) {
                    t.originalEvent && t.originalEvent.stopPropagation && t.originalEvent.stopPropagation();
                    var i = e.getProps(),
                        n = i.info,
                        r = i.onDetail;
                    r && r(n)
                });
                var i = this.getFace(".id-search");
                i && this.on(i, o.MouseEventEx.CLICK, function(t) {
                    var i = e.getProps(),
                        n = i.info,
                        r = i.onSearch;
                    r && r(n)
                }), this.on(this.face, o.MouseEventEx.CLICK, function(t) {
                    var i = e.getProps(),
                        n = i.info,
                        r = i.onClick;
                    r && r(n)
                })
            }, t.prototype.update = function(e) {
                var t = e.info;
                this.gotoAndStop(".id-tagContainer", this.getRecentStatus(t)), this.gotoAndStop(".id-vehicleGrade", "grade" + t.grade), this.gotoAndStop(".id-partIcon", this.isOwnParts(t.parts)), this.gotoAndStop(".id-background", t.index % 2 ? "odd" : "even"), this.bindText(".id-vehicleClass .id-textField", t.clazz), this.bindText(".id-manufacturerName .id-textField", this.$filter("manufacturerName")(t.manufacturerCode)), this.bindText(".id-vehicleName .id-textField", this.$filter("vehicleName")(t.code)), this.bindText(".id-ovr .id-textField", t.ovr)
            }, t.prototype.getRecentStatus = function(e) {
                return e.favorite ? "favorite" : "normal"
            }, t.prototype.isOwnParts = function(e) {
                var t = 0;
                return _.forEach(e, function(e, i) {
                    return t += e
                }), 0 === t ? "normal" : "equip"
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], a.prototype, "$filter", void 0), t.VehicleListItemBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.gotoAndStop(".id-completeIndicator", "normal"), this.update(this.props)
            }, t.prototype.update = function(e) {
                if (void 0 === e.name) return this.gotoAndStop(this.face, "empty");
                var t = e.name,
                    i = e.goal,
                    n = e.complete;
                this.gotoAndStop(this.face, "normal"), this.gotoAndStop(".id-completeIndicator", n ? "complete" : "normal"), this.bindText(".id-conditionLabel", this.service.getFilteredCondition(t, i, "WORLD_STAGECONDITION_DESC_" + t.toUpperCase()))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("licenseService")], o.prototype, "service", void 0), t.ConditionBinder = o
}, , , , , , , , , function(e, t, i) {
    "use strict";

    function n(e, t) {
        if (e.setEdgeTransform) return e.setEdgeTransform.apply(e, t), !0;
        var i = d.toTransformMatrix(t),
            n = [];
        return n.push("matrix(" + [i.a, i.c, i.b, i.d, i.tx, i.ty].join(", ") + ")"), 0 !== t[7] && n.push("rotateX(" + t[7] + "deg)"), 0 !== t[8] && n.push("rotateY(" + t[8] + "deg)"), 0 !== t[9] && n.push("rotateZ(" + t[9] + "deg)"), e.setProperty("-webkit-transform", n.join(" ")), !1
    }

    function r(e, t) {
        return e.setEdgeTransformOrigin ? (e.setEdgeTransformOrigin.apply(e, t), !0) : (e.setProperty("-webkit-transform-origin", t[0] + "px " + t[1] + "px"), !1)
    }

    function o(e, t) {
        return e.setEdgeOpacity ? (e.setEdgeOpacity(t), !0) : (e.setProperty("opacity", t), !1)
    }

    function a(e, t) {
        if (e.setEdgeSurfaceRef) return e.setEdgeSurfaceRef.apply(e, t), !0;
        var i = 1 == t.length ? '"' + t[0] + '"' : '"' + t[0] + '" ' + t[1] + "px " + t[2] + "px " + t[3] + "px " + t[4] + "px";
        return e.setProperty("-edge-surface-ref", i), !1
    }

    function s(e, t) {
        return e.setEdgeFilter ? (e.setEdgeFilter(t), !0) : (e.setProperty("-webkit-filter", t), !1)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = i(22),
        d = i(726),
        l = {
            "-webkit-transform": n,
            "-webkit-transform-origin": r,
            opacity: o,
            "-edge-surface-ref": a,
            "-webkit-filter": s
        },
        u = function() {
            function e(e) {
                if (!e) throw new Error("htmlElement is undefined.");
                this.style = e.style, this.buffered = {}, this.committed = {
                    opacity: 1
                }
            }
            return e.prototype.clone = function(t) {
                var i = new e(t);
                return i.buffered = c.assign({}, this.buffered), i.committed = c.assign({}, this.committed), i
            }, e.prototype.setProperty = function(e, t) {
                if (void 0 === t) return this.removeProperty(e);
                this.buffered[e] = t
            }, e.prototype.removeProperty = function(e) {
                void 0 !== this.committed[e] ? this.buffered[e] = void 0 : this.buffered.hasOwnProperty(e) && delete this.buffered[e]
            }, e.prototype.commit = function() {
                for (var e = this.style, t = this.buffered, i = this.committed, n = !1, r = Object.keys(t), o = 0, a = r; o < a.length; o++) {
                    var s = a[o],
                        d = t[s];
                    if (d !== i[s])
                        if (c.isUndefined(d)) delete i[s], e.removeProperty(s);
                        else {
                            i[s] = d;
                            var u = l[s];
                            u ? u(e, d) && (n = !0) : e.setProperty(s, d)
                        }
                }
                this.buffered = {}, n && e.validateChanges()
            }, e
        }();
    t.CSSProxy = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(253),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.mouseEnabled = !1
            }, t.prototype.addChild = function(e) {
                this.htmlElement.appendChild(e.htmlElement), this.children.push(e)
            }, t.prototype.addMaskLayer = function(e) {
                throw new Error("invalid call")
            }, t.prototype.addChildren = function(e, t) {
                throw new Error("invalid call")
            }, t.prototype.addChildAt = function(e, t) {
                this.htmlElement.appendChild(e.htmlElement), this.children.splice(t, 0, e)
            }, t
        }(r.DisplayObjectContainer);
    a = n.__decorate([o.component("MaskLayerContainer")], a), t.MaskLayerContainer = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(127),
        o = i(19),
        a = i(730),
        s = window,
        c = s.FlashCustomEase,
        d = s.FlashEase,
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.children = [], t.ignoredChildren = [], t.$cache = {}, t
            }
            return n.__extends(t, e), t.prototype.ensureTimeline = function() {}, t.prototype.destroyTimeline = function() {}, Object.defineProperty(t.prototype, "numChildren", {
                get: function() {
                    return this.children.length
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.recalculateSize = function() {
                for (var e = {
                        xMax: void 0,
                        xMin: void 0,
                        yMax: void 0,
                        yMin: void 0
                    }, t = 0, i = this.children; t < i.length; t++) {
                    var n = i[t];
                    (void 0 === e.xMin || e.xMin < n.x) && (e.xMin = n.x), (void 0 === e.yMin || e.yMin < n.y) && (e.yMin = n.y), (void 0 === e.xMax || e.xMax < n.x + n.width) && (e.xMax = n.x + n.width), (void 0 === e.yMax || e.yMax < n.y + n.height) && (e.yMax = n.y + n.height)
                }
                this.width = e.xMax, this.height = e.yMax
            }, t.prototype.addChild = function(e) {
                this._addChild(e), e.cloned || this.htmlElement.appendChild(e.htmlElement), this.children.push(e)
            }, t.prototype.addMaskLayer = function(e) {
                console.assert(!e.parent), this._addChild(e), e.cloned || this.htmlElement.appendChild(e.htmlElement), this.ignoredChildren.push(e)
            }, t.prototype.addChildren = function(e, t) {
                if (0 !== e.length) {
                    t = t || this.htmlElement;
                    for (var i = document.createDocumentFragment(), n = 0, r = e; n < r.length; n++) {
                        var o = r[n];
                        this._addChild(o), o.cloned || i.appendChild(o.htmlElement)
                    }
                    t.appendChild(i), this.children = this.children.concat(e)
                }
            }, t.prototype.addChildAt = function(e, t) {
                if (this._addChild(e), !e.cloned) {
                    var i = this.htmlElement,
                        n = i.children[t];
                    n ? i.insertBefore(e.htmlElement, n) : i.appendChild(e.htmlElement)
                }
                this.children.splice(t, 0, e)
            }, t.prototype._addChild = function(e) {
                e.parent && e.parent.removeChild(e), e.parent = this, this.addTweens(e)
            }, t.prototype.removeChild = function(e) {
                var t = this.children.indexOf(e);
                if (!(t < 0)) return this._removeChild(e, t), e
            }, t.prototype.removeChildAt = function(e) {
                var t = this.children[e];
                if (t) return this._removeChild(t, e), t
            }, t.prototype._removeChild = function(e, t) {
                if (e.parent = void 0, e.htmlElement) {
                    var i = e.htmlElement.parentNode;
                    i && i.removeChild(e.htmlElement)
                }
                return delete this.children[t], this.children.splice(t, 1), e.name && delete this.$cache[e.name], this.removeTweens(e), e
            }, t.prototype.removeAllChildren = function() {
                for (var e = 0, t = this.children.length; e < t; e++) {
                    this.getChildAt(0).destroy()
                }
                this.destroyTimeline()
            }, t.prototype.getChildAt = function(e) {
                return this.children[e]
            }, t.prototype.getChildByName = function(e) {
                for (var t = 0, i = this.children; t < i.length; t++) {
                    var n = i[t];
                    if (n.name === e) return n
                }
            }, t.prototype.getChildByObjectId = function(e) {
                for (var t = 0, i = this.children; t < i.length; t++) {
                    var n = i[t];
                    if (n.objectId === e) return n
                }
            }, t.prototype.getIgnoredChildByObjectId = function(e) {
                for (var t = 0, i = this.ignoredChildren; t < i.length; t++) {
                    var n = i[t];
                    if (n.objectId === e) return n
                }
            }, t.prototype.getChildIndex = function(e) {
                for (var t = this.children, i = 0, n = this.numChildren; i < n; ++i)
                    if (t[i] === e) return i;
                return -1
            }, t.prototype.$ = function(e) {
                if ("$self" === e) return this;
                if ("." !== e[0]) {
                    if (this.$cache[e]) return this.$cache[e];
                    var t = this.getChildByName(e);
                    if (t) return this.$cache[e] = t, t
                }
                var i = $(this.htmlElement).find(e);
                return i[0] && i[0]._face
            }, t.prototype.$$ = function(e) {
                if ("$self" === e) return [this];
                var t = $(this.htmlElement).find(e);
                return t.length ? _.map(t, function(e) {
                    return e._face
                }) : []
            }, t.prototype.addTween = function(e, t, i, n) {
                this.ensureTimeline(), this.timeline.to(e, i, n, t)
            }, t.prototype.addFrame = function(e, t, i) {
                this.ensureTimeline(), i && Object.keys(i).length > 0 && (i.immediateRender = !1, this.timeline.to(e, 0, i, t))
            }, t.prototype.addTweens = function(e) {
                var t = e.tweens || [];
                if (Array.isArray(t) && t.length)
                    for (var i = new a.TweenDeltaCalculator(e), n = 0, r = t; n < r.length; n++) {
                        var o = r[n],
                            s = {
                                flash: _.omit(o.delta, ["text", "htmlText"])
                            };
                        Object.keys(s.flash).length && (s.flash._beginningValues = i.addDelta(o.delta), o.hasCustomEase ? s.ease = new Ease(c, o.customEaseSamples) : o.tweenEasing && (s.ease = new Ease(d, .01 * o.tweenEasing)), _.isUndefined(o.motionTweenOrientToPath) || (s.flash.motionTween = {
                            orientToPath: o.motionTweenOrientToPath,
                            rotate: o.motionTweenRotate,
                            rotateTimes: o.motionTweenRotateTimes,
                            scale: o.motionTweenScale,
                            snap: o.motionTweenSnap,
                            sync: o.motionTweenSync
                        }), o.isTween ? this.addTween(e, o.position, o.duration, s) : this.addFrame(e, o.position + o.duration, s))
                    }
            }, t.prototype.removeTweens = function(e) {
                if (this.timeline) {
                    var t = [e];
                    this.timeline.kill(null, t)
                }
            }, t.prototype.boot = function() {
                e.prototype.boot.call(this);
                for (var t = 0, i = this.children; t < i.length; t++) {
                    var n = i[t];
                    n.boot()
                }
                for (var r = 0, o = this.ignoredChildren; r < o.length; r++) {
                    var n = o[r];
                    n.boot()
                }
            }, t.prototype.reboot = function() {
                e.prototype.reboot.call(this);
                for (var t = 0, i = this.children; t < i.length; t++) {
                    var n = i[t];
                    n.initialExist ? n.reboot() : n.halt()
                }
                for (var r = 0, o = this.ignoredChildren; r < o.length; r++) {
                    var n = o[r];
                    n.initialExist ? n.reboot() : n.halt()
                }
            }, t.prototype.rebootFromCurrentFrame = function() {
                e.prototype.reboot.call(this);
                for (var t = 0, i = this.children; t < i.length; t++) {
                    var n = i[t];
                    n.exist ? n.reboot() : (n.initialExist && n.boot(!0), n.halt())
                }
                for (var r = 0, o = this.ignoredChildren; r < o.length; r++) {
                    var n = o[r];
                    n.exist ? n.reboot() : (n.initialExist && n.boot(!0), n.halt())
                }
            }, t.prototype.halt = function() {
                for (var e = 0, t = this.children; e < t.length; e++) {
                    var i = t[e];
                    i.halt()
                }
                for (var n = 0, r = this.ignoredChildren; n < r.length; n++) {
                    var i = r[n];
                    i.halt()
                }
            }, t.prototype.destroy = function(t) {
                for (var i = 0, n = this.children; i < n.length; i++) {
                    var r = n[i];
                    r.destroy(!0)
                }
                for (var o = 0, a = this.ignoredChildren; o < a.length; o++) {
                    var r = a[o];
                    r.destroy(!0)
                }
                this.children = [], this.ignoredChildren = [], this.destroyTimeline(), e.prototype.destroy.call(this, t)
            }, t.prototype.purgeTimeline = function() {
                var t = this;
                this.children.forEach(function(e) {
                    e.purgeTimeline(), t.removeTweens(e)
                }), this.ignoredChildren.forEach(function(e) {
                    e.purgeTimeline(), t.removeTweens(e)
                }), e.prototype.purgeTimeline.call(this)
            }, t.prototype.freezeAnimation = function() {
                for (var t = 0, i = this.children; t < i.length; t++) {
                    var n = i[t];
                    n.freezeAnimation()
                }
                for (var r = 0, o = this.ignoredChildren; r < o.length; r++) {
                    var n = o[r];
                    n.freezeAnimation()
                }
                e.prototype.freezeAnimation.call(this)
            }, t.prototype.thawAnimation = function() {
                for (var t = 0, i = this.children; t < i.length; t++) {
                    var n = i[t];
                    n.thawAnimation()
                }
                for (var r = 0, o = this.ignoredChildren; r < o.length; r++) {
                    var n = o[r];
                    n.thawAnimation()
                }
                e.prototype.thawAnimation.call(this)
            }, t
        }(r.DisplayObject);
    l = n.__decorate([o.component("DisplayObjectContainer")], l), t.DisplayObjectContainer = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(367),
        o = function() {
            function e() {}
            return e.create = function(e, t, i) {
                if (this.libraries[e]) return void n.warn("The library(" + e + ") is tried to create twice.");
                n.debug("The shared library(" + e + ") is registered."), this.libraries[e] = new r.Library(e, t, i)
            }, e.get = function(e) {
                return this.libraries[e]
            }, e
        }();
    o.libraries = {}, t.SharedLibrary = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.CLICK = "click", n.DRAG_OUT = "dragOut", n.DRAG_OVER = "dragOver", n.PRESS = "press", n.RELEASE_OUTSIDE = "releaseOutside", n.FX_SOUND_CLICK = "fxSoundClick", n.UET_CLICK = "uetClick", t.ButtonEvent = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(129),
        o = i(735),
        a = i(8),
        s = i(251),
        c = i(145),
        d = i(19),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.items = [], t._selectedIndex = -1, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "dataProvider", {
                get: function() {
                    return this._dataProvider
                },
                set: function(e) {
                    this._dataProvider && (this.removeAllItems(), this._dataProvider.removeEventListener(a.EventEx.CHANGE, this.handleDataChange)), e instanceof Array && (e = new o.DataProvider(e)), e.addEventListener(a.EventEx.CHANGE, this.handleDataChange), this._dataProvider = e;
                    for (var t, i, n, r = 0, s = e.length; r < s; ++r) t = e[r], i = this.itemRenderer.htmlElement.cloneNode(!0), n = this.itemRenderer.clone(i), n.setData(t), this.addItem(n);
                    this.invalidateRenderers()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "itemRenderer", {
                get: function() {
                    return this._itemRenderer
                },
                set: function(e) {
                    this._itemRenderer = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "labelField", {
                get: function() {
                    return this._labelField
                },
                set: function(e) {
                    this._labelField = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "labelFunction", {
                get: function() {
                    return this._labelFunction
                },
                set: function(e) {
                    this._labelFunction = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "rendererInstanceName", {
                get: function() {
                    return this._rendererInstanceName
                },
                set: function(e) {
                    this._rendererInstanceName = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "selectedIndex", {
                get: function() {
                    return this._selectedIndex
                },
                set: function(e) {
                    var t = this._selectedIndex;
                    if (t !== e) {
                        if (t >= 0) {
                            this.getItemAt(t).selected = !1
                        }
                        if (e >= 0) {
                            this.getItemAt(e).selected = !0
                        }
                        this._selectedIndex = e
                    }
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.preInitialize = function() {
                e.prototype.preInitialize.call(this), this.itemRenderer = c.ParameterUtil.getParameterValue(this.data.parameters.itemRendererName), this.handleDataChange = this._handleDataChange.bind(this), this.handleItemChange = this._handleItemChange.bind(this)
            }, t.prototype.initialize = function() {
                e.prototype.initialize.call(this), this._setScrollBounds()
            }, t.prototype._setScrollBounds = function() {
                var e = this.cssProxies[0];
                e.setProperty("width", this.width + "px"), e.setProperty("height", this.height + "px"), e.setProperty("overflow", "hidden")
            }, t.prototype.createDomNode = function(e) {
                var t = document.createElement("div");
                return t.appendChild(document.createElement("div")), t
            }, t.prototype.initializeDomNode = function(t) {
                e.prototype.initializeDomNode.call(this, t), this.itemContainer = this.htmlElement.children[0], this.initializeScrollbar()
            }, t.prototype.initializeStyle = function(t) {
                e.prototype.initializeStyle.call(this, t);
                var i = this.cssProxies[1] = new s.CSSProxy(this.itemContainer);
                i.setProperty("position", "relative"), i.setProperty("overflow", "hidden"), i.setProperty("width", "100%"), i.setProperty("height", "100%")
            }, t.prototype.cloneStyle = function(t) {
                e.prototype.cloneStyle.call(this, t), this.cssProxies[1] = t.cssProxies[1].clone(this.itemContainer)
            }, t.prototype.initializeScrollbar = function() {
                $(this.itemContainer).perfectScrollbar({
                    minScrollbarLength: 10
                }).find(".ps-scrollbar-x-rail").css({
                    top: "auto",
                    "z-index": 9999
                }).find(".ps-scrollbar-x").css({
                    top: "auto"
                }).end().end().find(".ps-scrollbar-y-rail").css({
                    left: "auto",
                    "z-index": 9999
                }).find(".ps-scrollbar-y").css({
                    left: "auto"
                }).end().end()
            }, t.prototype.getRendererAt = function(e) {
                return this.dataProvider[e].constructor
            }, t.prototype.invalidateRenderers = function() {
                for (var e, t = this.items, i = 0, n = 0, r = t.length; n < r; ++n) e = this.getItemAt(n), e.recalculateSize(), e.toggle = !0, e.y = i, i += e.height
            }, t.prototype.invalidateSelectedIndex = function() {}, t.prototype.itemToLabel = function() {}, t.prototype.scrollToIndex = function() {}, t.prototype.scrollToSelected = function() {}, t.prototype.addItem = function(e) {
                this.addItemAt(e, this.items.length)
            }, t.prototype.addItemAt = function(e, t) {
                return this.items.splice(t, 0, e), e.addEventListener(a.EventEx.SELECT, this.handleItemChange), this.addChild(e), e
            }, t.prototype.removeItemAt = function(e) {
                var t = this.items[e];
                return delete this.items[e], this.items.splice(e, 1), t.removeEventListener(a.EventEx.SELECT, this.handleItemChange), this.removeChild(t), t
            }, t.prototype.removeItem = function(e) {
                for (var t = this.items, i = 0, n = t.length; i < n; ++i)
                    if (t[i] === e) return this.removeItemAt(i), e;
                return e
            }, t.prototype.removeAllItems = function() {
                for (var e = this.items, t = 0, i = e.length; t < i; ++t) this.removeItemAt(0)
            }, t.prototype.getItemAt = function(e) {
                return this.items[e]
            }, t.prototype.getItemIndex = function(e) {
                for (var t = this.items, i = 0, n = t.length; i < n; ++i)
                    if (t[i] === e) return i;
                return -1
            }, t.prototype._handleDataChange = function() {
                this.dataProvider = this._dataProvider
            }, t.prototype._handleItemChange = function(e) {
                var t = e.currentTarget;
                this.selectedIndex = this.getItemIndex(t)
            }, t
        }(r.UIComponent);
    l = n.__decorate([d.component("CoreList")], l), t.CoreList = l
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        var i = function() {
                var i = e.attr("src"),
                    n = t && i !== t ? t : r;
                e.attr("src", n), e.trigger("fallbackSrc")
            },
            n = e.get(0);
        n._fallbackHandler && "function" == typeof n._fallbackHandler && e.off("error", n._fallbackHandler), e.on("error", i), n._fallbackHandler = i
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = "data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAABQAAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkREODIyNEU3RTBFMTExRTVBNzFDRkEzNjBBQTc3ODEyIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkREODIyNEU4RTBFMTExRTVBNzFDRkEzNjBBQTc3ODEyIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6REQ4MjI0RTVFMEUxMTFFNUE3MUNGQTM2MEFBNzc4MTIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REQ4MjI0RTZFMEUxMTFFNUE3MUNGQTM2MEFBNzc4MTIiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAOQWRvYmUAZMAAAAAB/9sAhAACAgICAgICAgICAwICAgMEAwICAwQFBAQEBAQFBgUFBQUFBQYGBwcIBwcGCQkKCgkJDAwMDAwMDAwMDAwMDAwMAQMDAwUEBQkGBgkNCwkLDQ8ODg4ODw8MDAwMDA8PDAwMDAwMDwwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAz/wAARCABAAEADAREAAhEBAxEB/8QAlgAAAwEBAQAAAAAAAAAAAAAAAAYJCAcBAQACAwEAAAAAAAAAAAAAAAAABgMEBwUQAAEDAgMEBwkBAQAAAAAAAAIBBQYDBAAhMXESBwgRUTKiQ9QmgRQVhaW1VjcYFhMRAAECAgQKBgsBAAAAAAAAAAECAwAEEUESBSExUYGRocFSogbwsdGyIyRhIoLSE1OzNBU1FoP/2gAMAwEAAhEDEQA/AJ9x9gpxKnDJ1OoZ/q+Hkr94AAC4uKHT/wALipb1RGrb1KShXBaSkIku6Q+1RWWmvg2HXUWm1U1nLRVRhwRvU5OGdL0pKPfDmG6KgcYChgUFUpNqgkYQddF4twA5aJoxN8kjcUpuTS5U9+3uAdHTpRdCAxW76RMVyIVzRcNrF1SDyAtCaQfSrtjF7w5v5ikH1MPu2Vpxiw3pHqYQajDD/K/Ab8E+qOnm8S/hJPc1q7Yp/wB/ffz+Bv3IP5X4Dfgn1R083g/CSe5rV2wf399/P4G/cg/lfgN+CfVHTzeD8JJ7mtXbB/f338/gb9yD+V+A34J9UdPN4Pwknua1dsH9/ffz+Bv3IXpTwA5aIWxOEkkkTptrS209+4uDdHTpVdBABS76SMlyEUzVcRP3VIMoK1poA9Ku2LkhzhzFPvpYYdtLViFhvSfUwAVmJ0yCP05bTmc6gkM/ynDuKe7gYHcXFdUWvcU7ekJVbipVU65rVQiEF3RH2KSk618a260iy2mis5aK6cOGNok5wyRZlJt74kw5TUBiBUcCQmhIs0AnCTqotwAirFNOWiJxuSN9NyaXKm6BcW56ovxS7UTAkzExXMSTNFw23Uwh6QShYpBp7xjF+b7wfkOYnX2FWVpsUH/NGA5QaxGcfXfJ/O/HknC2SV9g1hTu0rukOwagp1djkeNdD282rpmUNfU6+S52kqm5psaNqm1HOk8VEYtKWKaMTfJI24U3Jpcqe/b3AaouhAYrmJiuRCuaLhsYfQ8gLQaQYxm8LvfkH1MPpsrTjG0ZQajDDiaKcGCCF6UylihbE4SSSOFNtaW2nv3FweqroIAKZkZLkIpmq4hffQygrWaAIuSEg/PvpYYTaWrENpyAVmJ3+uucCdePG+Fkbr7RpCvdq3dUdo0xXq7an417vbraemdR1dezeS5JkqnJpwadqW0nOo8OjeP8WYoXy0SuNxtvptrS202sLe3DVV+KWikZkuZGS5kS5quOverCGZBSECgCjvCErlC8H5/mJp99VpardJ/zXgGQCoQw8q/6GgnzT7pd4luT7NGfvGKfP/7t/wBj6aI7FKoqxTRicI3JG+m5NLlT3Li3PVF1EwJMxMVzEkzRcdB9hDyChYpBhau+8H5B9L7CrK04jsOUGsRO713yfzvx5JwtklfYNYU7tK7pDsGoKdXYU/Guh7ebV0zKGvq2byXO0lU3NNjRtU2o50niojFpSxTRib5JG3Cm5NLlT37e4DVF0IDFcxMVyIVzRcNjD6HkBaDSDGM3hd78g+ph9NlacY2jKDUYJTKWKFsThJJI4U21pbae/cXB6quggApmRkuQimargffQygrWaAIJCQfn30sMJtLViG05AKzE7/XXOBOvHjfCyN19o0hXu1buqO0aYr1dtT8a93t1tPTOo6uvZvJckyVTk04NO1LaTnUeGiEWizFC2Jvjcbb6ba0ttPct7cNVXUjMlzIyXMiXNVw2MMIZQEIFAEYzeF4Pz76n31WlqxnYMgFQjjvNR+hp38r+6WmOfff2a83eEMvIH7tj2/prg5V/0NBPmn3S7wXJ9mjP3jBz/wDu3/Y+miNB460J0L0qirFNGJwjckb6bk0uVPcuLc9UXUTAkzExXMSTNFxC+wh5BQsUgxcu+8H5B9L7CrK04jsOUGsRO713yfzvx5JwtklfYNYU7tK7pDsGoKdXYU/Guh7ebV0zKGvq2byXO0lU3NNjRtU2o50ni99d84E68eN8LI3X2jSFe7Vu6o7RpivV2zxr3e3W09M6jq6zyXJMlU5NODTtS2k51HhohFosxQtib43G2+m2tLbT3Le3DVV1IzJcyMlzIlzVcNjDCGUBCBQBGM3heD8++p99VpasZ2DIBUIYcTRTjPnNR+hp38r+6WmOTff2a83eEOPIH7tj2/prg5V/0NBPmn3S7wXJ9mjP3jBz/wDu3/Y+miNB460J0L0plLFC2JwkkkcKba0ttPfuLg9VXQQAUzIyXIRTNVxC++hlBWs0ARckJB+ffSwwm0tWIbTkArMTv9dc4E68eN8LI3X2jSFe7Vu6o7RpivV21Pxr3e3W09M6jq69m8lyTJVOTTg07UtpOdR4fPXfJ/O/HknC2SV9g1hTu0rukOwagp1dg8a6Ht5tXTMoa+o8lztJVNzTY0bVNqOdJ4qIxWVMU0Ym+SRtwpuTS5U9+3uA1RdCAxXMTFciFc0XDYw+h5AWg0gxjN4Xe/IPqYfTZWnGNoyg1GGHE0U4z5zUfoad/K/ulpjk339mvN3hDjyB+7Y9v6a4OVf9DQT5p90u8FyfZoz94wc//u3/AGPpojsUplLFC2JwkkkcKba0ttPfuLg9VXQQAUzIyXIRTNVx0H30MoK1mgCFqQkH599LDCbS1YhtOQCsxO/11zfzrx43wsjdfaNIV7tW7qjtGmK9XbU/Gvd7dbT0zqOrr2byXJMlU5NODTtS2k51HhohFosxQtib43G2+m2tLbT3Le3DVV1IzJcyMlzIlzVcNjDCGUBCBQBGMz8+/PvqffVaWrGdgyAVCCVRVimjE4RuSN9NyaXKnuXFueqLqJgSZiYrmJJmi4H2EPIKFikGC77wfkH0vsKsrTiOw5QaxE7vXfJ/O/HknC2SV9g1hTu0rukOwagp1dhT8a6Ht5tXTMoa+rZvJc7SVTc02NG1TajnSeKiMVlTFNGJvkkbcKbk0uVPft7gNUXQgMVzExXIhXNFw2MPoeQFoNIMYzeF3vyD6mH02VpxjaMoNRjjvNR+hp38r+6WmOfff2a83eEMvIH7tj2/prhe4ASlihfLRE5JJHCm2tLbTdDuLg9VX4pdoIAKZkZLkIpmq4iup9DMglazQBT3jFznCQfn+YnWGE2lqsUD/NGE5AKzGcvXXN/OvHjfCyN19o0hXu1buqO0aYr1dvkeNe7262npnUdXW6+S5JkqnJpwadqW0nOo8NEItFmKFsTfG423021pbae5b24aqupGZLmRkuZEuarhsYYQygIQKAIxmfn3599T76rS1YzsGQCoQw4minBgghelUVYpoxOEbkjfTcmlyp7lxbnqi6iYEmYmK5iSZouIX2EPIKFikGLl33g/IPpfYVZWnEdhyg1iJ3eu+T+d+PJOFskr7BrCndpXdIdg1BTq7Cn410PbzaumZQ19WzeS52kqm5psaNqm1HOk8WjuP8qYppy0SySRtwpuTS5U2s7e4DVF+KWiEBiuYmK5EK5ouOver6HpBS0GkGjvCErlC735DmJph9NlabdI/wA14RlBqMTpj8gpy2nDILOpn/lOHcU94MDC3uK6ote4qXFUhpW9Oqp1zWqoiRJuiPtQlJp34thp1dltNNRy01U4cMbROSZki9NyjPxJhyisDEAkYVFNCRZpIGEnVRaLcf8AlohbE3xuNyym2tLbT3Le3BrdOlV1IzJbTpIyXMiXNVw2sXrIMoCEKoA9CuyMXn+T+Yp99T77VpasZtt6B6+ACoQw/wBUcBvzv6W6eUxL+bk9/Ursin/AX38jjb9+D+qOA3539LdPKYPzcnv6ldkH8BffyONv34P6o4Dfnf0t08pg/Nye/qV2QfwF9/I42/fg/qjgN+d/S3TymD83J7+pXZB/AX38jjb9+F6Vcf8AlomjE4RuSSym5NLlT3Li3NrdOlF1EwJLTpExXMSTNFxE/esg8goWqkH0K7IuXfyhzFIPpfYasrTiNtvQfXwg1iJ0P7/TiVOZwWCzP/V8PJX7uZmdvcUOn/hcU7ikRUrinSUK4LSQSIU3SH2IKk678G200u02qio5aa6MOCNok5MzpZm5tn4cw3TWDjBScKSqlJtUgHCDr//Z";
    t.default = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.AuctionItemNotExist = 1] = "AuctionItemNotExist", e[e.AuctionItemNotStart = 2] = "AuctionItemNotStart", e[e.AuctionItemNotClosed = 3] = "AuctionItemNotClosed", e[e.AuctionItemAlreadyFinished = 4] = "AuctionItemAlreadyFinished", e[e.AuctionItemLocked = 5] = "AuctionItemLocked", e[e.AuctionItemCreateFailed = 6] = "AuctionItemCreateFailed", e[e.AuctionItemUpdateFailed = 7] = "AuctionItemUpdateFailed", e[e.InvalidAuctionItemTime = 8] = "InvalidAuctionItemTime", e[e.InvalidAuctionItem = 9] = "InvalidAuctionItem", e[e.NoEnoughMileageForAuctionBidding = 100] = "NoEnoughMileageForAuctionBidding", e[e.AuctionBiddingLowerThanMinimumBid = 101] = "AuctionBiddingLowerThanMinimumBid", e[e.AuctionBiddingNotExist = 102] = "AuctionBiddingNotExist", e[e.AuctionBiddingCannotBeCollected = 103] = "AuctionBiddingCannotBeCollected", e[e.AuctionBiddingAlreadyCollected = 104] = "AuctionBiddingAlreadyCollected", e[e.AuctionBiddingSubMileageError = 105] = "AuctionBiddingSubMileageError", e[e.AuctionBiddingLocked = 106] = "AuctionBiddingLocked", e[e.AuctionCannotReceiveItem = 200] = "AuctionCannotReceiveItem", e[e.AuctionAlreadyReceivedItem = 201] = "AuctionAlreadyReceivedItem", e[e.FailedToCreateAuctionBanner = 300] = "FailedToCreateAuctionBanner", e[e.AuctionBannerNotExist = 301] = "AuctionBannerNotExist", e[e.FailedToUpdateAuctionBanner = 302] = "FailedToUpdateAuctionBanner", e[e.AuctionWaitingPeriodCreateFailed = 400] = "AuctionWaitingPeriodCreateFailed", e[e.AuctionWaitingPeriodNotExist = 401] = "AuctionWaitingPeriodNotExist", e[e.FailedToUpdateAuctionWaitingPeriod = 402] = "FailedToUpdateAuctionWaitingPeriod", e[e.InvalidAuctionWaitingPeriod = 403] = "InvalidAuctionWaitingPeriod", e[e.AuctionItemReceiveExpired = 404] = "AuctionItemReceiveExpired", e[e.AuctionRpcError = 500] = "AuctionRpcError"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, , , , , function(e, t, i) {
    "use strict";

    function n(e, t, i) {
        return {
            type: "license.init",
            license: e,
            level: t,
            data: i
        }
    }

    function r(e) {
        return {
            type: "license.passTest",
            testCode: e
        }
    }

    function o(e) {
        return {
            type: "license.promote",
            code: e
        }
    }

    function a() {
        return {
            type: "license.openMain"
        }
    }

    function s() {
        return {
            type: "license.closeMain"
        }
    }

    function c(e) {
        return {
            type: "license.setCurrentTest",
            test: e
        }
    }

    function d() {
        return {
            type: "license.clearCurrentTest"
        }
    }

    function l(e, t) {
        return {
            type: "license.applyStaging",
            level: e,
            data: t
        }
    }

    function u(e) {
        return {
            type: "license.setActiveTab",
            code: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.init = n, t.passTest = r, t.promote = o, t.openMain = a, t.closeMain = s, t.setCurrentTest = c, t.clearCurrentTest = d, t.applyStaging = l, t.setActiveTab = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.ALL = 0] = "ALL", e[e.PC = 1] = "PC", e[e.MOBILE = 2] = "MOBILE"
    }(t.InventoryItemPlatform || (t.InventoryItemPlatform = {})), t.Filters = [{
        type: "ALL",
        text: "INVENTORY_SORT_ALL"
    }, {
        type: "RANDOM",
        text: "INVENTORY_FILTER_TYPE_RANDOMBOX"
    }, {
        type: "BUNDLE",
        text: "INVENTORY_FILTER_TYPE_PACKAGE"
    }], t.Sorters = [{
        field: "addedat",
        reverse: -1,
        text: "INVENTORY_SORT_CREATE_ASC"
    }, {
        field: "addedat",
        reverse: 1,
        text: "INVENTORY_SORT_CREATE_DESC"
    }, {
        field: "count",
        reverse: -1,
        text: "INVENTORY_SORT_NUM_DESC"
    }, {
        field: "count",
        reverse: 1,
        text: "INVENTORY_SORT_NUM_ASC"
    }, {
        field: "name",
        reverse: -1,
        text: "INVENTORY_SORT_NAME_DESC"
    }, {
        field: "name",
        reverse: 1,
        text: "INVENTORY_SORT_NAME_ASC"
    }]
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.MIN_SELECTABLE_ITEMS = 2, t.MAX_SELECTABLE_ITEMS = 5
}, , , , , , , , , , , , , , , , , , , , function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "player.update",
            player: e
        }
    }

    function r(e) {
        return {
            type: "player.updateCheckedat",
            checkedat: e
        }
    }

    function o(e) {
        return {
            type: "player.updateSp",
            sp: e
        }
    }

    function a(e) {
        return {
            type: "player.updateMileage",
            mileage: e
        }
    }

    function s(e) {
        return {
            type: "player.updateLevel",
            level: e
        }
    }

    function c(e) {
        return {
            type: "player.updateExp",
            exp: e
        }
    }

    function d(e) {
        return {
            type: "player.updateUnlock",
            unlock: e
        }
    }

    function l(e) {
        return {
            type: "player.updateRecent",
            vid: e
        }
    }

    function u(e, t) {
        return {
            type: "player.updateNewlyGainedAt",
            nav: e,
            now: t
        }
    }

    function p(e) {
        return {
            type: "player.setLastTrackCode",
            code: e
        }
    }

    function h(e) {
        return {
            type: "player.updateName",
            name: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.update = n, t.updateCheckedat = r, t.updateSp = o, t.updateMileage = a, t.updateLevel = s, t.updateExp = c, t.updateUnlock = d, t.updateRecent = l, t.updateNewlyGainedAt = u, t.setLastTrackCode = p, t.updateName = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = i(6),
        o = i(4),
        a = i(3),
        s = i(68),
        c = i(29),
        d = i(10),
        l = function() {
            function e(e, t, i, n) {
                this.externalService = e, this.sessionService = t, this.popupService = i, this.featureSetService = n
            }
            return Object.defineProperty(e.prototype, "isSetDefault", {
                get: function() {
                    var e = a.store.getState().configuration.configs.inputkey,
                        t = e.applied,
                        i = e.default;
                    return n.isEqual(t, i)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.setWasdType = function() {
                var e = {
                    throttle: [c.KeyboardMap.getKeyCode("W"), 21],
                    brake: [c.KeyboardMap.getKeyCode("S"), 20],
                    secondBrake: [c.KeyboardMap.getKeyCode("/"), 20],
                    steeringLeft: [c.KeyboardMap.getKeyCode("A"), 0],
                    steeringRight: [c.KeyboardMap.getKeyCode("D"), 0],
                    nitro: [c.KeyboardMap.getKeyCode("SPACE"), 12],
                    handBrake: [c.KeyboardMap.getKeyCode("SHIFT"), 14],
                    useItem: [c.KeyboardMap.getKeyCode("CTRL"), 13],
                    useItem2: [c.KeyboardMap.getKeyCode("ALT"), 15],
                    reset: [c.KeyboardMap.getKeyCode("F"), 19],
                    horn: [c.KeyboardMap.getKeyCode("H"), 18],
                    rearView: [c.KeyboardMap.getKeyCode("UP"), 0],
                    leftView: [c.KeyboardMap.getKeyCode("RIGHT"), 0],
                    rightView: [c.KeyboardMap.getKeyCode("LEFT"), 0],
                    toggleCamera: [c.KeyboardMap.getKeyCode("C"), 9],
                    toggleMinimap: [c.KeyboardMap.getKeyCode("X"), 23]
                };
                this.setConfig(e)
            }, e.prototype.setArrowType = function() {
                this.setConfig(this.getDefaultConfig())
            }, e.prototype.setConfig = function(e) {
                a.store.dispatch(s.update("inputkey", e)), this.externalService.beSetConfiguration("inputkey", e), this.updateInputKey(e)
            }, e.prototype.getDefaultConfig = function() {
                return this.externalService.beGetDefaultConfiguration("inputkey")
            }, e.prototype.updateInputKey = function(e) {
                return this.sessionService.getAccount().then(function(t) {
                    return d.request("PUT", "playerconfig/" + t.id + "/inputkey", {
                        inputKey: e
                    })
                })
            }, e.prototype.init = function(e) {
                var t = this,
                    i = this.getDefaultConfig();
                this.addedNewKeys = this.getAddedNewKeys(e, i), -1 !== this.addedNewKeys.indexOf("secondBrake") && (e.secondBrake = [0, 20], n.pull(this.addedNewKeys, "secondBrake")), e = this.addedNewKeys.length > 0 ? this.checkUsedNewKey(e, i) : e;
                var o = {
                    id: "inputkey",
                    applied: e,
                    default: i
                };
                return (this.addedNewKeys.length > 0 ? this.updateInputKey(e) : r.resolve()).then(function() {
                    t.externalService.beSetConfiguration("inputkey", e)
                }), a.store.dispatch(s.addItem(o)), o
            }, e.prototype.checkUsedNewKey = function(e, t) {
                var i = function(t) {
                        return n.map(e, function(e) {
                            return e[0]
                        }).indexOf(t) > -1
                    },
                    r = function(t) {
                        var i = c.getAlternationKeys(t);
                        return n.find(i, function(t) {
                            return -1 === n.map(e, function(e) {
                                return e[0]
                            }).indexOf(t)
                        })
                    };
                return n.forEach(t, function(t, n) {
                    if (!e[n]) {
                        var o = i(t[0]) ? r(n) : t[0];
                        e[n] = [o, t[1]]
                    }
                }), e
            }, e.prototype.getAddedNewKeys = function(e, t) {
                var i = n.keys(e),
                    r = n.keys(t);
                return n.difference(r, i)
            }, e.prototype.checkAddedKeyGuidePopup = function() {
                var e = this;
                0 !== this.addedNewKeys.length && (this.addedNewKeys.forEach(function(t) {
                    "toggleCamera" === t && e.popupService.drawConfirm("FREEDRIVE_GUIDE_CAMTURN_TITLE", "FREEDRIVE_GUIDE_CAMTURN"), e.featureSetService.isEnabled("PURSUIT") && "useItem2" === t && e.popupService.drawConfirm("PURSUITMODE_GUIDEPOPUP_TITLE", "PURSUITMODE_GUIDEPOPUP_DESC"), "toggleMinimap" === t && e.popupService.drawConfirm("MINIMAP_TOGGLE_GUIDEPOPUP_TITLE", "MINIMAP_TOGGLE_GUIDEPOPUP_DESC")
                }), this.addedNewKeys = [])
            }, e.checkFixedPadKeys = function(e, t) {
                switch (e) {
                    case "throttle":
                        return "rt";
                    case "brake":
                        return "lt";
                    case "steeringLeft":
                    case "steeringRight":
                        return "ls";
                    case "rearView":
                        return "rs";
                    case "toggleMinimap":
                        return "dpadDown";
                    default:
                        return c.KeyboardMap.getPadKeyName(t)
                }
            }, e
        }();
    l.$inject = ["externalService", "sessionService", "popupService", "featureSetService"], t.InputKeyConfigService = l, angular.module("edge.components").factory("inputKeyConfigService", o.default.generateService(l))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.Errors = ["ScreenError", "RequestError", "ReduxError", "ReactError"], t.IgnoreErrorsForSentry = ["cdn/LocalizationDB.LocalizationDB.json", "No vehicle", "No Player", "ranked2/seasons/current/players", "ranked2/seasons/current/SPEED1ON1/players", "ranked2/seasons/current/SPEEDINDIVIDUAL/players", "22200003", "20000058", "21600013", "Cannot tween a null target", "usereventtrackinglogs"], t.IgnoreStateForSentry = ["root.menu.settings", "root.coreLevelTest"], t.IgnoreApi = ["/v2/errorlogs/ui", "/v2/errorlogs/statestall", "/v2/usereventtrackinglogs"]
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        a.render(o.createElement(d, {
            model: t,
            key: "dropdown",
            isShow: e
        }), document.getElementById("edge-ui-dropdown"))
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(14),
        a = i(132),
        s = i(52),
        c = i(4),
        d = function(e) {
            function t(i) {
                var n = e.call(this, i) || this;
                return n.state = t.initialState, n
            }
            return r.__extends(t, e), Object.defineProperty(t.prototype, "dropDownListElement", {
                get: function() {
                    return $(a.findDOMNode(this)).children("ul")
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.componentDidMount = function() {
                var e = this;
                this.dropDownListElement.perfectScrollbar({
                    suppressScrollX: !0,
                    handlers: ["click-rail", "drag-scrollbar", "wheel", "touch"]
                });
                ! function() {
                    var t = "dropdown-backdrop-" + Date.now(),
                        i = function() {
                            return e.close()
                        };
                    $("<div id=" + t + ' class="dropdown-backdrop">').css({
                        position: "absolute",
                        width: "1920px",
                        height: "1080px",
                        left: 0,
                        top: 0,
                        "pointer-events": "none"
                    }).click(i).insertBefore("#edge-ui-dropdown")
                }();
                $(".dropdown").keydown(this.onKeyDown.bind(this)), $(".dropdown").focus(this.onFocus.bind(this))
            }, t.prototype.componentWillUnmount = function() {
                this.dropDownListElement.perfectScrollbar("destroy")
            }, t.prototype.componentWillReceiveProps = function(e) {
                var i = this;
                if (!e.model) return this.setState(t.initialState);
                var n = this.getElementProps(e);
                this.setState({
                    left: n.left,
                    top: n.top,
                    width: n.width,
                    itemHeight: n.itemHeight,
                    itemType: e.model.itemType,
                    items: e.model.items,
                    isShow: e.isShow,
                    onClick: e.model.onClick,
                    onClose: e.model.onClose,
                    activeIndex: e.model.selectedIndex,
                    selectedIndex: e.model.selectedIndex
                }), setTimeout(function() {
                    i.dropDownListElement.perfectScrollbar("update"), i.props.model.isActiveKeyEvent ? $(".dropdown").focus() : i.initScroll(i.state.activeIndex)
                }, 0)
            }, t.prototype.componentDidUpdate = function() {
                this.dropDownListElement.perfectScrollbar("update")
            }, t.prototype.initScroll = function(e) {
                this.dropDownListElement[0].scrollTop = this.state.itemHeight * (e || 0)
            }, t.prototype.moveScroll = function(e) {
                var t = this.state.itemHeight * ((e || 0) + 1),
                    i = this.dropDownListElement[0];
                t > i.clientHeight + i.scrollTop ? i.scrollTop += this.state.itemHeight : t - this.state.itemHeight < i.scrollTop && (i.scrollTop -= this.state.itemHeight)
            }, t.prototype.onKeyDown = function(e) {
                var t = this.state.activeIndex || 0;
                38 === e.keyCode && t > 0 ? this.setState({
                    activeIndex: --t
                }) : 40 === e.keyCode && t < this.state.items.length - 1 ? this.setState({
                    activeIndex: ++t
                }) : 13 === e.keyCode && (this.handleClick(this.state.activeIndex), e.stopPropagation()), this.moveScroll(t)
            }, t.prototype.onFocus = function(e) {
                this.setState({
                    activeIndex: 0
                })
            }, t.prototype.setBackdrop = function(e) {
                document.querySelector(".dropdown-backdrop").style.pointerEvents = e ? "auto" : "none"
            }, t.prototype.getElementProps = function(e) {
                var t = e.model;
                if (!t) return {
                    top: 0,
                    left: 0,
                    width: 0,
                    itemHeight: 0
                };
                var i = t.style || {},
                    n = t.element,
                    r = c.default.calcGlobalOffset(n),
                    o = i.itemHeight || n.height(),
                    a = r.top,
                    s = r.left,
                    d = 5 * o;
                this.maxHeight = d > 228 ? 228 : d;
                var l = o * t.items.length > this.maxHeight ? this.maxHeight : o * t.items.length;
                a = i.isDropUp ? a - l : a + o;
                var u = i.width || n.width();
                return {
                    top: this.getAlignedTopInnerBody(228, a),
                    left: s,
                    width: u,
                    itemHeight: o
                }
            }, t.prototype.getAlignedTopInnerBody = function(e, t) {
                if (t < 0 && (t = 0), t + e > document.body.offsetHeight) {
                    t -= t + e - document.body.offsetHeight + 2
                }
                return t
            }, t.prototype.close = function() {
                this.dropDownListElement.scrollTop(0);
                var e = this.state && this.state.onClose;
                n(!1), this.setBackdrop(!1), e && e()
            }, t.prototype.handleClick = function(e) {
                this.setState({
                    selectedIndex: e
                }), this.state.onClick && this.state.onClick(e), this.close()
            }, t.prototype.overItem = function(e) {
                this.setState({
                    activeIndex: e
                })
            }, t.prototype.render = function() {
                var e = this,
                    t = !this.state.isShow || 0 === this.state.items.length;
                t || this.setBackdrop(!0);
                var i = this.state.selectedIndex,
                    n = this.state.activeIndex,
                    r = this.props.model && this.props.model.className || "",
                    a = this.props.model && this.props.model.style && this.props.model.style.isDropUp;
                return o.createElement("div", {
                    tabIndex: 1,
                    className: s("dropdown", {
                        hidden: t
                    }, this.state.itemType + "-type", r, {
                        up: a
                    }),
                    style: {
                        top: this.state.top,
                        left: this.state.left,
                        width: this.state.width
                    }
                }, o.createElement("ul", {
                    className: "always-visible",
                    style: {
                        maxHeight: this.maxHeight
                    }
                }, this.state.items.map(function(t, r) {
                    return o.createElement("li", {
                        style: {
                            lineHeight: e.state.itemHeight + "px",
                            height: e.state.itemHeight + "px"
                        },
                        id: "dropdownItem" + r,
                        className: s("DropdownItem", {
                            active: n === r,
                            selected: i === r
                        }),
                        onClick: e.handleClick.bind(e, r),
                        onMouseOver: e.overItem.bind(e, r),
                        key: r
                    }, "image" === e.state.itemType ? o.createElement("img", {
                        src: t
                    }) : o.createElement("span", {
                        className: s("prevent-click"),
                        dangerouslySetInnerHTML: {
                            __html: t
                        }
                    }))
                })))
            }, t
        }(o.Component);
    d.initialState = {
        left: 0,
        top: 0,
        width: 0,
        itemHeight: 0,
        items: [],
        itemType: "text",
        isShow: !1,
        onClick: void 0,
        onClose: void 0,
        activeIndex: void 0,
        selectedIndex: 0
    }, t.render = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.StateChangeDelayTime = .2
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(1030),
        o = i(7),
        a = i(3),
        s = i(15),
        c = i(175),
        d = i(10),
        l = i(113),
        u = i(4),
        p = i(34);
    ! function(e) {
        e[e.Uninitialized = 0] = "Uninitialized", e[e.Connected = 1] = "Connected", e[e.Reconnecting = 2] = "Reconnecting", e[e.Disconnected = 3] = "Disconnected"
    }(n = t.ConnectionState || (t.ConnectionState = {}));
    var h = function() {
        function e(e, t, i, r, o, a, s, c) {
            this.$rootScope = e, this.$filter = t, this.$exceptionHandler = i, this.sessionService = r, this.externalService = o, this.popupService = a, this.announcementService = s, this.antibotService = c, this.subscriptionsForResource = [], this.connState = n.Uninitialized
        }
        return Object.defineProperty(e.prototype, "connectionState", {
            get: function() {
                return this.connState
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.init = function() {
            var e = this;
            return this.promise ? this.promise : this.promise = this.getPushEndpoint().then(function(t) {
                return e.initInternal(t.pushServer)
            }).catch(function(t) {
                throw e.promise = null, t
            })
        }, e.prototype.getPushEndpoint = function() {
            return d.requestHttp("GET", this.sessionService.config.apiServer + "/v2/push/address")
        }, e.prototype.initInternal = function(e) {
            var t = this;
            this.socket = r.connect(e, {
				transports:['websocket', 'polling'],
                reconnection: !0,
                reconnectionDelay: 2e3,
                reconnectionAttempts: 15
            });
            var i = _.once(function() {
                t.externalService.isEdgeBrowser() && t.antibotService.init()
            });
            this.socket.on("connect", function() {
                o.warn("PUSH connect"), t.socket.emit("auth", {
                    token: t.sessionService.token
                }), i()
            }), this.socket.on("auth", function() {
                o.warn("got 'auth' from push"), t.connState = n.Connected
            }), this.socket.on("reconnecting", function(e) {
                o.warn("reconnecting", e), t.connState = n.Reconnecting
            }), this.socket.on("disconnect", function(e) {
                o.warn("PUSH disconnect :", e), t.connState = n.Disconnected, "io server disconnect" === e && t.unknownShutdown()
            }), this.socket.on("reconnect_failed", function() {
                o.warn("RECONNECT failed : This message is for PUSH error trap. Should be finally removed."), t.connState = n.Disconnected, t.unknownShutdown()
            });
            var a = o.getLevel();
            return this.socket.on("msg", function(e) {
                t.$rootScope.$apply(function() {
                    switch (e.cmd) {
                        case "resources":
                            t.subscriptionsForResource.forEach(function(t) {
                                e.opts.forEach(function(e) {
                                    var i = t.pattern.exec(e.uri);
                                    i && (0 === a && o.trace(e.uri + " >>", JSON.stringify(e)), t.handler(i, e))
                                })
                            });
                            break;
                        case "message":
                            var i = u.default.getUUID(),
                                n = t.$filter("template")({
                                    errorUuid: i
                                }, "ALARM_SERVERLOST_REASON_TEXT");
                            t.$exceptionHandler(new Error("push server msg receive"), e, i), t.popupService.drawConfirm("ALARM_SERVERLOST_TITLE", n);
                            break;
                        case "notice":
                            t.announcementService.draw(c.AnnouncementType.NOTICE, e.opts.message, e.opts.viewingTime);
                            break;
                        case "account.banned":
                            var n = t.$filter("template")({
                                expiredAt: u.default.getLocalISOString(e.opts.expireat)
                            }, "BANNED_MESSAGE");
                            t.shutdown("ALARM_SERVERLOST_TITLE", n, 3);
                            break;
                        case "unauth":
                            ;
                            t.popupService.drawConfirm("ALARM_SERVERLOST_TITLE", "BANNED_DISCONNECTION");
                            break;
                        case "disconnect":
                            t.onDisconnect(e.opts);
                            break;
                        case "tencent.user.protect":
                            t.shutdown("ALARM_SERVERLOST_TITLE", e.opts.text, 8)
                    }
                })
            }), this.socket
        }, e.prototype.on = function(e, t) {
            var i = this,
                n = function() {
                    var e = arguments;
                    i.$rootScope.$apply(function() {
                        t.apply(i.socket, e)
                    })
                };
            n.fn = t, i.socket.on(e, n)
        }, e.prototype.once = function(e, t) {
            var i = this,
                n = function() {
                    var e = arguments;
                    i.$rootScope.$apply(function() {
                        t.apply(i.socket, e)
                    })
                };
            n.fn = t, i.socket.once(e, n)
        }, e.prototype.emit = function(e, t, i) {
            var n = this;
            n.socket.emit(e, t, function() {
                var e = arguments;
                n.$rootScope.$apply(function() {
                    i && i.apply(n.socket, e)
                })
            })
        }, e.prototype.subscribeResource = function(e, t) {
            var i = this,
                n = {
                    pattern: e,
                    handler: t
                },
                r = function() {
                    return _.remove(i.subscriptionsForResource, function(e) {
                        return e === n
                    })
                };
            return this.subscriptionsForResource.push(n), r
        }, e.prototype.removeListener = function(e, t) {
            return this.socket.removeAllListeners(e, t)
        }, e.prototype.shutdown = function(e, t, i) {
            var n = this;
            a.store.getState().videoGuide.show && a.store.dispatch(l.hide()), this.socket.disconnect();
            var r = function() {
                return n.externalService.beShutdown(i)
            };
            this.popupService.draw("ConfirmPopup", {
                title: e,
                description: t,
                confirm: r,
                close: r
            })
        }, e.prototype.unknownShutdown = function() {
            var e = u.default.getUUID(),
                t = this.$filter("template")({
                    errorUuid: e
                }, "ALARM_SERVERLOST_REASON_TEXT");
            this.$exceptionHandler(new Error("push server connect failed"), t, e), this.shutdown("ALARM_SERVERLOST_TITLE", t, 4)
        }, e.prototype.onDisconnect = function(e) {
            switch (e.reason) {
                case s.Session.ExpireReason.Duplicated:
                    this.shutdown("ALARM_SERVERLOST_TITLE", "DUPLICATION_ERROR_DISCONNECTED", 6);
                    break;
                case s.Session.ExpireReason.AdminIntended:
                    var t = e.extra.title || "ALARM_SERVERLOST_TITLE",
                        i = e.extra.desc || "ERROR_DISCONNECT_BY_ADMIN";
                    this.shutdown(t, i, 3);
                    break;
                case s.Session.ExpireReason.ScheduledMaintenance:
                    this.shutdown("ALARM_SERVERLOST_TITLE", "ERROR_DISCONNECTFOR_SERVERCHECK", 4);
                    break;
                case s.Session.ExpireReason.ByLaw:
                    var i = "ALARM_SERVERLOST_TEXT",
                        n = e.extra;
                    if (n) {
                        var r = p.getInjector().get("publisherService"),
                            o = r.getDisconnectReason(n.code);
                        o && (i = o)
                    }
                    this.shutdown("ALARM_SERVERLOST_TITLE", i, 4);
                    break;
                case s.Session.ExpireReason.Security:
                    this.shutdown("ALARM_SERVERLOST_TITLE", "IDS_NEXON_ERRORLOG_HACKSHIELD_SECURITY_ERROR", 9);
                    break;
                case s.Session.ExpireReason.PaymentRequired:
                    this.unknownShutdown()
            }
        }, e
    }();
    h.$inject = ["$rootScope", "$filter", "$exceptionHandler", "sessionService", "externalService", "popupService", "announcementService", "antibotService"], t.default = h, angular.module("edge.components").factory("pushService", u.default.generateService(h))
}, , , , , function(e, t, i) {
    "use strict";

    function n(e) {
        return _.isObject(e) && (e.type === s.RejectType.ABORTED || e.type === s.RejectType.IGNORED || e.type === s.RejectType.SUPERSEDED)
    }

    function r(e, t, i) {
        if (2 === e && 1 === i.coreLevel) return 7;
        if (3 === t.coreLevel) switch (i.state) {
            case 28:
            case 29:
                return 1;
            case 30:
                return 2;
            case 65:
            case 66:
                return 3;
            case 56:
            case 57:
                return 4;
            case 42:
            case 79:
                return 5;
            case 80:
                return 6
        }
        return 0
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0),
        a = i(6),
        s = i(334),
        c = i(111),
        d = i(4),
        l = i(11),
        u = i(289),
        p = i(17),
        h = i(160),
        f = i(3),
        v = i(40),
        m = i(1062),
        g = i(224),
        y = i(174);
    t.isTolerable = n;
    var S = function() {
        function e(e, t, i, s, l, u, p, h, v, S, E, T) {
            var C = this;
            this.$rootScope = e, this.$state = t, this.$exceptionHandler = i, this.$q = s, this.externalService = l, this.popupService = u, this.prebuildService = p, this.lazyLoadService = h, this.presenceService = v, this.openworldService = S, this.$filter = E, this.$transitions = T, this.followingState = {}, this.onChangeStart = function(e) {
                $("#edge-ui").addClass("prevent-click");
                var t = e.from().name,
                    i = e.to().name,
                    n = e.params(),
                    r = C.followingState[i],
                    o = C.$rootScope.$on("$viewContentLoaded", function() {
                        o(), r && setTimeout(function() {
                            var e = Date.now() - r;
                            log.info("state change duration", e / 1e3, "sec;", t, "->", i)
                        }), C.emitEndStateChangeDelay()
                    });
                if (C.isEdgeBrowser) return C.restartBrowserIfNeeded(i, n, t)
            }, this.onChangeFinish = function(e) {
                C.isEdgeBrowser && document.getSelection().collapse(null, 0);
                var t = a.resolve(),
                    i = e.from(),
                    n = e.to();
                if (!n.coreLevel || i.coreLevel === n.coreLevel) return t;
                if (3 === n.coreLevel) return t;
                var o = C.externalService.currentLevel();
                return i.coreLevel || n.coreLevel !== o ? (1 === n.coreLevel ? C.externalService.beLoadFreedrive(r(o, i, n)) : t = C.openworldService.connectRecent(), f.store.dispatch(g.show()), t.then(function() {
                    return C.externalService.levelLoaded
                }).then(function() {
                    return f.store.dispatch(g.hide())
                })) : t
            }, this.onChangeSuccess = function(e) {
                $("#edge-ui").removeClass("prevent-click");
                var t = e.from().name,
                    i = e.to().name;
                C.presenceService.setPresenceInfoOnScene(i), delete C.followingState[i], f.store.dispatch(m.unloadScreen(t))
            }, this.onChangeError = function(e) {
                $("#edge-ui").removeClass("prevent-click");
                var t = e.from(),
                    i = t.name,
                    r = t.url,
                    o = e.to(),
                    a = o.name,
                    s = o.url,
                    c = (e.params(), e.error());
                if (delete C.followingState[a], n(c)) return void log.info("transition _tolerable_ error occured", _.get(c, "type"), i, "->", a);
                log.warn("StateService.onChangeError", i, "->", a), c && log.error(c);
                var l = "";
                try {
                    l = JSON.stringify(c)
                } catch (e) {
                    l = "Could not serialize an error"
                }
                var u = [c.message, l, "-> " + s + " (" + a + ")", "<- " + r + " (" + i + ")"],
                    p = d.default.getUUID(),
                    h = new Error;
                h.name = "StateChangeError", h.message = c ? c.message ? c.message : "" : u.join(" "), log.error(u), C.$exceptionHandler(h, {}, p), C.popupService.draw("ConfirmPopup", {
                    title: "ERROR_POPUP_TITLE",
                    description: C.$filter("template")({
                        errorUuid: p
                    }, "LOBBY_ERROR_MASSAGE_UNKNOWNISSUE")
                }), C.emitEndStateChangeDelay()
            }, this.gcOverrunCount = 0, this.onMemoryExceeded = function() {
                var e = C.externalService.beGetMemoryInfo(),
                    t = {
                        coreLevel: C.externalService.beGetCurrentLevel() || "",
                        uiState: C.getCurrentName()
                    };
                y.captureMessage("Memory Exceeded", {
                    level: "error",
                    tags: t,
                    extra: o.__assign({
                        memoryInfo: e
                    }, t)
                }), log.error("stateService.onMemoryExceeded - shutdown client", e);
                var i = function() {
                    return C.externalService.beShutdown()
                };
                C.popupService.draw("ConfirmPopup", {
                    title: "ALARM_SERVERLOST_TITLE",
                    description: "ALARM_SERVERLOST_TEXT",
                    confirm: i,
                    close: i
                })
            }, this.isEdgeBrowser = l.isEdgeBrowser(), l.on(c.CoreEvent.beNotifyMemoryExceeded, this.onMemoryExceeded), T.onStart({}, this.onChangeStart), T.onFinish({}, this.onChangeFinish), T.onSuccess({}, this.onChangeSuccess), T.onError({}, this.onChangeError)
        }
        return Object.defineProperty(e.prototype, "isTransitionStarted", {
            get: function() {
                return this.transitionStarted
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.go = function(e, t, i) {
            var n = this;
            return log.info("stateService.go", this.getCurrentName(), "->", e), this.followingState[e] ? (log.warn("Drop repeated state change request:", e, t, i), a.resolve()) : (f.store.dispatch(h.closePreview()), this.popupService.isShowPopup() ? this.popupService.closePopup().then(function() {
                return n.transitionTo(e, t, i)
            }) : (f.store.dispatch(v.closeMainChatWindow()), this.transitionTo(e, t, i)))
        }, e.prototype.transitionTo = function(e, t, i) {
            var r = this;
            return this.followingState = {}, this.followingState[e] = Date.now(), this.transitionStarted = !0, a.resolve(this.$state.go(e, t, i)).catch(function(t) {
                if (delete r.followingState[e], !n(t)) {
                    log.error("stateService.transitionTo catch", e, t);
                    var i = r.$state.get(e);
                    throw l.getStagesByUrl(i.url).forEach(function(e) {
                        r.lazyLoadService.cancel(e)
                    }), t
                }
            }).finally(function() {
                r.externalService.beCloseCandidates(), r.transitionStarted = !1
            })
        }, e.prototype.prebuildFaceForState = function(e) {
            var t = this,
                i = this.$state.get(e);
            return this.$q.all(_.map(i.$prebuildContexts, function(e, i) {
                return !e.lazy && t.prebuildService.loadView(i, e)
            })).catch(function(e) {
                return log.error(e)
            })
        }, e.prototype.preloadState = function(e, t, i) {
            var n = this.$state.get(e);
            n.lockTransition(), this.transitionTo(e, t, i);
            var r = this.$q.defer();
            return r.promise.then(function() {
                return n.unlockTransition()
            }).catch(function() {
                return n.abortTransition()
            }), r
        }, e.prototype.getCurrentName = function() {
            return this.$state.current.name
        }, e.prototype.getCurrentCode = function() {
            return this.$state.current.state
        }, e.prototype.emitEndStateChangeDelay = function() {
            var e = this;
            setTimeout(function() {
                log.trace("StateService >>>> onEndStateChangeDelay"), e.$rootScope.$emit("onEndStateChangeDelay")
            }, 1e3 * u.StateChangeDelayTime)
        }, e.prototype.isRestartSupportState = function(e, t) {
            return /root.menu/.test(e) && !/(MultiplayRoom)/.test(e)
        }, e.prototype.totalMemoryOverused = function(e) {
            return e.used / e.capacity > .93
        }, e.prototype.jsMemoryOverused = function(e) {
            return e.totalJSHeapSize > e.jsHeapSizeLimit && e.jsAllocationLimit < 4194304 ? ++this.gcOverrunCount > 5 : (this.gcOverrunCount = 0, !1)
        }, e.prototype.suspectFragmentation = function(e) {
            return e.largestFreeBlock < .05 * e.capacity
        }, e.prototype.restartBrowserIfNeeded = function(e, t, i) {
            var n = this,
                r = function() {
                    return n.restartBrowserIfNeededImpl(e, t, i)
                },
                o = this.$state.get(e);
            return o instanceof l.StateDefinition && o.isTransitionLocked() ? (o.transitionLockPromise().then(r), !0) : r()
        }, e.prototype.restartBrowserIfNeededImpl = function(e, t, i) {
            var n = this.externalService.beGetMemoryInfo();
            if (log.info("memory info>>", i, "->", e, "-", JSON.stringify(n)), !this.isRestartSupportState(e, i)) return !0;
            if (this.totalMemoryOverused(n) || this.jsMemoryOverused(n) || this.suspectFragmentation(n)) {
                var r = this.$state.href(e, t),
                    o = location.href.replace(/#.*$/, r);
                log.warn("restart webkit!!");
                for (var a = 0, s = p.getAllStageBinders(); a < s.length; a++) {
                    s[a].onWebkitRestart()
                }
                return this.externalService.beRestartBrowser(o), !1
            }
            return !0
        }, e
    }();
    S.$inject = ["$rootScope", "$state", "$exceptionHandler", "$q", "externalService", "popupService", "prebuildService", "lazyLoadService", "presenceService", "openworldService", "$filter", "$transitions"], t.StateService = S, t.default = S;
    var E = function() {
        function e(e) {
            this.$stateProvider = e, this.$get = d.default.generateService(S)
        }
        return e.prototype.state = function(e, t) {
            return this.$stateProvider.state(e, t), this
        }, e
    }();
    E.$inject = ["$stateProvider"], t.StateServiceProvider = E, angular.module("edge.components").provider("stateService", d.default.generateProvider(E))
}, , function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "contacts.replaceFriends",
            friends: e
        }
    }

    function r(e, t) {
        return {
            type: "contacts.replaceInvites",
            sentInvites: e,
            recvInvites: t
        }
    }

    function o(e) {
        return {
            type: "contacts.addFriend",
            friend: e
        }
    }

    function a(e) {
        return {
            type: "contacts.deleteFriend",
            id: e
        }
    }

    function s(e) {
        return {
            type: "contacts.addInvite",
            invite: e
        }
    }

    function c(e) {
        return {
            type: "contacts.deleteInvite",
            id: e
        }
    }

    function d(e, t) {
        return {
            type: "contacts.updatePresence",
            pid: e,
            presence: t
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.replaceFriends = n, t.replaceInvites = r, t.addFriend = o, t.deleteFriend = a, t.addInvite = s, t.deleteInvite = c, t.updatePresence = d
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return function(i, n) {
            i(c.hide()), i({
                type: "popup.open",
                name: e,
                context: t
            })
        }
    }

    function r(e) {
        return {
            type: "popup.update",
            props: e
        }
    }

    function o(e) {
        return void 0 === e && (e = !0), {
            type: "popup.confirm",
            value: e
        }
    }

    function a() {
        return {
            type: "popup.cancel"
        }
    }

    function s() {
        return {
            type: "popup.close"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = i(113);
    t.open = n, t.update = r, t.confirm = o, t.cancel = a, t.close = s
}, function(e, t, i) {
    "use strict";

    function n(e) {
        d.store.dispatch({
            type: "inventory.items.set",
            items: e
        })
    }

    function r(e) {
        d.store.dispatch({
            type: "inventory.items.add",
            item: e
        })
    }

    function o(e) {
        d.store.dispatch({
            type: "inventory.items.use",
            item: e
        })
    }

    function a(e) {
        d.store.dispatch({
            type: "inventory.items.del",
            id: e
        })
    }

    function s(e) {
        d.store.dispatch({
            type: "inventory.filter.set",
            filter: e
        })
    }

    function c(e) {
        d.store.dispatch({
            type: "inventory.sorter.set",
            sorter: e
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var d = i(3);
    t.setItems = n, t.addItem = r, t.useItem = o, t.deleteItem = a, t.setViewFilter = s, t.setViewSorter = c
}, function(e, t, i) {
    "use strict";

    function n(e) {
        c.store.dispatch({
            type: "inbox.packages.set",
            packages: e
        })
    }

    function r(e) {
        c.store.dispatch({
            type: "inbox.packages.add",
            pack: e
        })
    }

    function o(e) {
        c.store.dispatch({
            type: "inbox.packages.delete",
            ids: e
        })
    }

    function a(e) {
        c.store.dispatch({
            type: "inbox.filter.set",
            filter: e
        })
    }

    function s(e) {
        c.store.dispatch({
            type: "inbox.packages.deleteorder",
            orderNo: e
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = i(3);
    t.setPackage = n, t.addPackage = r, t.deletePackages = o, t.setViewingFilter = a, t.deletePackageOrder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(3),
        r = i(6),
        o = i(227),
        a = function() {
            function e() {}
            return e.prototype.init = function() {}, e.prototype.initIngameWebViewCookies = function(e) {}, e.prototype.getDisconnectReason = function(e) {
                return ""
            }, e.prototype.isNoReward = function() {
                return !1
            }, e.prototype.getFatigueRate = function() {
                return 0
            }, e.prototype.hasBanWord = function(e) {
                return !1
            }, e.prototype.matchBanWords = function(e) {
                return []
            }, e.prototype.getLeaderboardUri = function() {
                return "http://example.org"
            }, e.prototype.getPlayerInfoUri = function() {
                return "http://example.org"
            }, e.prototype.notifyLoginStatus = function(e) {}, e.prototype.notifyLoginErrorStatus = function(e) {}, e.prototype.openChargeWindow = function(e, t, i, r) {
                n.store.dispatch(o.showChargePopup(!0, e)), r()
            }, e.prototype.cancelChargeWindow = function() {
                n.store.dispatch(o.showChargePopup(!1))
            }, e.prototype.getChargeUrl = function() {
                return r.resolve("http://example.org")
            }, e
        }();
    t.Publisher = a
}, function(e, t, i) {
    "use strict";

    function n() {
        return {
            type: "messenger.toggle"
        }
    }

    function r() {
        return {
            type: "messenger.hide"
        }
    }

    function o(e) {
        return {
            type: "messenger.tab",
            tab: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.toggle = n, t.hide = r, t.tab = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.DRAG_END = "dragEnd", n.DRAG_START = "dragStart", n.DROP = "drop", n.DRAG_OVER = "dragOver", n.DRAG_ENTER = "dragEnter", n.DRAG_LEAVE = "dragLeave", n.DRAG = "drag", t.DragEvent = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(29),
        a = i(172),
        s = i(38),
        c = i(3),
        d = i(40),
        l = i(7),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.onKeyDownEventHandlers = {}, t.onKeyUpEventHandlers = {}, t._isFocusIn = !1, t._isActive = !1, t._isFastInput = !1, t.hideSourceName = !1, t.sourceHasPlaceholder = [], t.inputWith = null, t._displayTabHint = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.chatInput = this.getFace(".id-chatInput"), this.inputTextField = this.convertFace(".id-chatInput .id-textField"), this.inputTextField.htmlElement.onfocus = function() {
                    return e.focusIn()
                }, this.inputTextField.htmlElement.onblur = function() {
                    return e.focusOut()
                }, this.inputTextField.htmlElement.setAttribute("maxlength", 63), this.sourceTextField = this.getFace(".id-chatSource .id-textField");
                var t = this.face.htmlElement,
                    i = this.chatInput.htmlElement,
                    n = this.getFace(".id-chatSource").htmlElement;
                t.removeChild(n), t.insertBefore(n, i), this._focusEventLister = {
                    onEvent: this.onWindowPressEnter.bind(this)
                }, this.onKeyDownEventHandlers[o.KeyboardMap.getKeyCode("ENTER")] = this.onInputPressEnter.bind(this), this.onKeyDownEventHandlers[o.KeyboardMap.getKeyCode("UP")] = this.onInputPressArrowKey.bind(this), this.onKeyDownEventHandlers[o.KeyboardMap.getKeyCode("DOWN")] = this.onInputPressArrowKey.bind(this), this.onKeyDownEventHandlers[o.KeyboardMap.getKeyCode("TAB")] = this.onInputPressTab.bind(this), this.on(this.chatInput, a.KeyboardEventEx.KEY_DOWN, function(t) {
                    var i = e.onKeyDownEventHandlers[t.originalEvent.keyCode];
                    i && i(t), event.stopPropagation()
                }), this.onKeyUpEventHandlers[o.KeyboardMap.getKeyCode("SPACE")] = this.onInputPressSpace.bind(this), this.onKeyUpEventHandlers[o.KeyboardMap.getKeyCode("ESCAPE")] = this.onInputPressESC.bind(this), this.on(this.chatInput, a.KeyboardEventEx.KEY_UP, function(t) {
                    var i = e.onKeyUpEventHandlers[t.originalEvent.keyCode];
                    i && i(t), event.stopPropagation()
                }), this.globalKeyService.pushListener(o.KeyboardMap.getKeyCode("ENTER"), this._focusEventLister)
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                _.isEqual(t.inputState, e.inputState) || this.onChatSourceChange(e.inputState), _.isEqual(t.displayType, e.displayType) || e.displayType === s.ChatDisplayType.MiniChatBar && this.clearChatInput()
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.worldChat;
                return {
                    inputState: t.inputState,
                    displayType: t.displayType
                }
            }, Object.defineProperty(t.prototype, "IsActive", {
                set: function(e) {
                    this._isActive = e
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onWindowPressEnter = function(e, t) {
                return !(!this.isFocusIn && this._isActive) || (this.setFocus(), !1)
            }, t.prototype.onInputPressESC = function(e) {
                this.inputTextField.text = "", this.setBlur(), c.store.dispatch(d.closeMainChatWindow())
            }, t.prototype.onInputPressEnter = function(e) {
                if ("" === this.inputTextField.text) return void this.setBlur();
                this.excuteChatCommand(e.originalEvent.keyCode);
                var t = this.inputTextField.text;
                if (!t.trim()) return this.clearChatInput();
                this.worldChatService.sendMsg(t).then(function(e) {}).catch(function(e) {
                    l.error(e)
                }), this.clearChatInput(), this._isFastInput || this.setBlur()
            }, t.prototype.onInputPressSpace = function(e) {
                0 === this.inputTextField.text.search("/") && this.excuteChatCommand(e.originalEvent.keyCode)
            }, t.prototype.excuteChatCommand = function(e) {
                var t = this.worldChatCommandService.execute(this.inputTextField.text, e);
                this.inputTextField.text = t[0]
            }, t.prototype.onInputPressArrowKey = function(e) {
                this.adjustInputCursorPos(e), e.originalEvent.keyCode === o.KeyboardMap.getKeyCode("UP") ? this.worldChatService.setCurrentFromRecord(!1) : e.originalEvent.keyCode === o.KeyboardMap.getKeyCode("DOWN") && this.worldChatService.setCurrentFromRecord(!0)
            }, t.prototype.onInputPressTab = function(e) {
                this.dispatch(d.activeNextTab()), e.originalEvent.preventDefault()
            }, t.prototype.onDetach = function() {
                this.clearChatInput(), this.clearChatSourceClass(), this.clearChatTextClass(), this.clearChatPlaceHolder(), this.globalKeyService.popListener(o.KeyboardMap.getKeyCode("ENTER"), this._focusEventLister)
            }, t.prototype.setHideSourceName = function(e) {
                this.hideSourceName = e
            }, t.prototype.setSourceHasPlaceholder = function(e) {
                this.sourceHasPlaceholder = e
            }, t.prototype.setFocus = function() {
                this.inputTextField.htmlElement.focus()
            }, t.prototype.setBlur = function() {
                this.inputTextField.htmlElement.blur()
            }, Object.defineProperty(t.prototype, "fastInput", {
                get: function() {
                    return this._isFastInput
                },
                set: function(e) {
                    this._isFastInput = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "isFocusIn", {
                get: function() {
                    return this._isFocusIn
                },
                set: function(e) {
                    this._isFocusIn = e
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.focusIn = function() {
                this.isFocusIn = !0, this.fixSize(), this.clearChatPlaceHolder();
                var e = c.store.getState().worldChat.inputState;
                this.buildText(e.source, e.playerName, e.hideSourceNameThisTime, e.channelCode), this.inputService.overrideKeyboard("chat"), this._onFocusInAnimCallBack && this._onFocusInAnimCallBack(), c.store.dispatch(d.inputBoxFocusStatusChange(!0))
            }, t.prototype.focusOut = function() {
                this.isFocusIn = !1;
                var e = this.reduxProps.inputState,
                    t = e.placeHolderText;
                this._displayTabHint && (t = this.worldChatService.getHintOfCurrentTab()), this.hasPlaceholder(e.source) && t && this.buildPlaceholder(t), this.inputService.clearKeyboardOverride("chat"), this._onFocusOutAnimCallBack && this._onFocusOutAnimCallBack(), c.store.dispatch(d.inputBoxFocusStatusChange(!1))
            }, t.prototype.adjustInputCursorPos = function(e) {
                return
            }, t.prototype.onChatSourceChange = function(e) {
                if (e) {
                    var t = e.source;
                    this.clearChatInput(), this.clearChatSourceClass(), this.clearChatTextClass(), this.clearChatPlaceHolder(), this.buildStyle(t);
                    var i = e.placeHolderText;
                    (void 0 === e.displayTabHint ? this._displayTabHint : e.displayTabHint) && (i = this.worldChatService.getHintOfCurrentTab()), !this._isFocusIn && this.hasPlaceholder(t) && i ? this.buildPlaceholder(i) : (this.buildText(t, e.playerName, e.hideSourceNameThisTime, e.channelCode), this.setFocus()), this.fixSize()
                }
            }, t.prototype.fixSize = function() {
                this.inputWith || (this.inputWith = parseInt(this.inputTextField.htmlElement.style.width, 10));
                var e = parseInt(this.sourceTextField.htmlElement.clientWidth, 10);
                _.isNaN(e) || (this.inputTextField.htmlElement.style.width = this.inputWith - e - 8 - 10 + "px");
                var t = this.sourceTextField.htmlElement,
                    i = this.inputTextField.htmlElement;
                t.style.lineHeight = t.style.height, i.style.lineHeight = i.style.height
            }, t.prototype.clearChatInput = function() {
                this.inputTextField.text = ""
            }, t.prototype.clearChatSourceClass = function() {
                var e = this.sourceTextField.htmlElement;
                "" !== this.sourceClassName && e.classList.contains(this.sourceClassName) && (e.classList.remove(this.sourceClassName), this.sourceClassName = "")
            }, t.prototype.clearChatTextClass = function() {
                var e = this.inputTextField.htmlElement;
                "" !== this.inputClassName && e.classList.contains(this.inputClassName) && (e.classList.remove(this.inputClassName), this.inputClassName = "")
            }, t.prototype.clearChatPlaceHolder = function() {
                var e = this.inputTextField.htmlElement;
                e.hasAttribute("placeholder") && e.removeAttribute("placeholder")
            }, t.prototype.buildText = function(e, t, i, n) {
                var r = this.staticdata.worldChatData.getSourceConfig(e),
                    o = r && !this.hideSourceName && !i,
                    a = n ? " " + n.toString() : "",
                    s = o ? "[" + this.$filter("translate")(r.nameID) + a + "]" : "",
                    c = t ? " " + this.$filter("template")({
                        player: "[" + t + "]"
                    }, "CHATTING_WHISPERING_TO") : "",
                    d = "chat-source-name-only";
                if (!o && t) {
                    var l = this.sourceTextField.htmlElement.classList.contains(d);
                    !l && this.sourceTextField.htmlElement.classList.add(d)
                } else {
                    var l = this.sourceTextField.htmlElement.classList.contains(d);
                    l && this.sourceTextField.htmlElement.classList.remove(d)
                }
                this.sourceTextField.text = s + c
            }, t.prototype.buildStyle = function(e) {
                this.sourceClassName = "source-color-" + s.ChatSourceType[e], this.sourceTextField.htmlElement.classList.add(this.sourceClassName), this.inputClassName = "text-color-" + s.ChatSourceType[e], this.inputTextField.htmlElement.classList.add(this.inputClassName)
            }, t.prototype.hasPlaceholder = function(e) {
                return !!e && this.sourceHasPlaceholder.some(function(t) {
                    return t === e
                })
            }, t.prototype.buildPlaceholder = function(e) {
                this.sourceTextField.text = "", this.inputTextField.htmlElement.setAttribute("placeholder", e || "")
            }, Object.defineProperty(t.prototype, "onFocusOutAnimCallBack", {
                set: function(e) {
                    this._onFocusOutAnimCallBack = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "onFocusInAnimCallBack", {
                set: function(e) {
                    this._onFocusInAnimCallBack = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "displayTabHint", {
                set: function(e) {
                    this._displayTabHint = e
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("worldChatService")], u.prototype, "worldChatService", void 0), n.__decorate([r.autowired("worldChatCommandService")], u.prototype, "worldChatCommandService", void 0), n.__decorate([r.autowired("inputService")], u.prototype, "inputService", void 0), n.__decorate([r.autowired("globalKeyService")], u.prototype, "globalKeyService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], u.prototype, "staticdata", void 0), t.ChatInputBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(4),
        a = i(35),
        s = i(34),
        c = Date.now(),
        d = function() {
            function e(e, t, i) {
                void 0 === t && (t = ["vp6", "mp4"]), this.videoId = "" + c++, this.init(e, t, i)
            }
            return e.prototype.init = function(e, t, i) {
                var n = $("<video>").attr({
                    id: this.videoId,
                    autoplay: !1,
                    class: "edge-video"
                }).hide();
                e && t.forEach(function(t) {
                    n.append('<source src="' + e + "." + t + '" type="video/' + t + '">')
                }), this.video = n[0], i && n.appendTo($(i.spot))
            }, Object.defineProperty(e.prototype, "duration", {
                get: function() {
                    return this.video.duration
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "currentTime", {
                get: function() {
                    return this.video.currentTime
                },
                set: function(e) {
                    this.video.currentTime = e
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.play = function() {
                var e = this;
                return $(this.video).show(), new r(function(t) {
                    e.video.play(), $(e.video).one("ended", function() {
                        return t()
                    })
                })
            }, e.prototype.pause = function() {
                return this.video.pause()
            }, e.prototype.load = function() {
                return this.video.load()
            }, e.prototype.onEnded = function(e) {
                $(this.video).one("ended", function() {
                    e && e()
                })
            }, e.prototype.changeResource = function(e, t) {
                var i = this;
                $(this.video).empty(), ["vp6", "mp4"].forEach(function(t) {
                    $(i.video).append('<source src="' + e + "." + t + '" type="video/' + t + '">')
                }), this.load(), t && this.play()
            }, e.prototype.destroy = function() {
                this.pause(), $(this.video).off("timeupdate").empty().remove()
            }, e.prototype.addClass = function(e) {
                $(this.video).addClass(e)
            }, e.prototype.removeClass = function(e) {
                $(this.video).removeClass(e)
            }, e.prototype.setLoop = function(e) {
                this.video.loop = e
            }, e
        }();
    t.Video = d;
    var l = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.background = $("\n    <svg class='edge-video-background'>\n      <path d='M 0,0 L 1920,0 1920,1080 0,1080 z' />\n    </svg>\n  "), t.playList = [], t
        }
        return n.__extends(t, e), Object.defineProperty(t.prototype, "notifyService", {
            get: function() {
                return this._notifyService || (this._notifyService = s.getInjector().get("uistateNotifyService")), this._notifyService
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.setBackground = function() {
            this.background.parent().length || this.background.appendTo("#edge-ui")
        }, t.prototype.clearBackground = function() {
            this.background.remove()
        }, t.prototype.play = function(e, t) {
            var i = this;
            if (void 0 === t && (t = !0), this.playList.length) throw new Error("Another video(s) is not completed yet");
            var n = _.isArray(e) ? e.slice() : [e];
            return this.playingDefer = o.default.defer(), t && (this.notifyService.setSubState(1), this.playingDefer.promise.finally(function() {
                i.notifyService.setSubState(2)
            })), this._play(n[0]), this.playList = n, this.playingDefer.promise
        }, t.prototype._play = function(e) {
            var t = this;
            $(e.video).appendTo("#edge-ui"), this.initListeners(e, ["play"]), e.play().then(function() {
                return t.playNext()
            })
        }, t.prototype.playNext = function() {
            var e = this.playList.shift();
            $(e.video).off(), this.playList.length ? this._play(this.playList[0]) : (this.playingDefer.resolve(), this.playingDefer = void 0, this.skipHandler && ($(window).off("keydown", this.skipHandler), this.skipHandler = void 0)), e.destroy()
        }, t.prototype.initListeners = function(e, t) {
            for (var i = this, n = 0, r = t; n < r.length; n++) {
                var o = r[n];
                ! function(t) {
                    $(e.video).on(t, function() {
                        return i.emit(t, e)
                    })
                }(o)
            }
        }, t.prototype.setSkipable = function(e, t) {
            var i = this;
            e ? (this.skipHandler && $(window).off("keydown", this.skipHandler), this.skipHandler = function(e) {
                e.keyCode === t && i.playNext()
            }, $(window).on("keydown", this.skipHandler)) : this.skipHandler && ($(window).off("keydown", this.skipHandler), this.skipHandler = void 0)
        }, t.prototype.reset = function() {
            for (var e = 0, t = this.playList; e < t.length; e++) {
                t[e].destroy()
            }
            this.playList = [], this.playingDefer && (this.playingDefer.reject(new Error("video playback was canceled")), this.playingDefer = void 0)
        }, t
    }(a.EventEmitter);
    t.VideoPlayer = l, t.videoPlayer = new l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.Filters = [{
        type: "ALL",
        text: "INVENTORY_SORT_ALL"
    }, {
        type: "PURCHASED",
        text: "INVENTORY_FILTER_PATH_PURCHASE"
    }, {
        type: "PROMOTION",
        text: "INVENTORY_FILTER_PATH_EVENT"
    }, {
        type: "GIFT",
        text: "INVENTORY_FILTER_PATH_GIFT"
    }, {
        type: "RANKED_MATCH_REWARD",
        text: "INVENTORY_FILTER_PATH_RANKED_MATCH_TIER_REWARD"
    }, {
        type: "FESTIVAL",
        text: "INVENTORY_FILTER_FESTIVAL"
    }, {
        type: "MINI_FESTIVAL",
        text: "INVENTORY_FILTER_MINI_FESTIVAL"
    }], t.ReceivedPopupStringMap = {
        gift: {
            title: "INBOX_POPUP_RECEIVEDGIFT_TITLE",
            top: "INBOX_POPUP_RECEIVEDGIFT_TEXT1",
            bottom: "INBOX_POPUP_RECEIVEDGIFT_TEXT2",
            confirm: "INBOX_POPUP_RECEIVEDGIFT_CLOSE"
        },
        giftTuning: {
            title: "INBOX_POPUP_RECEIVEDGIFT_TITLE",
            top: "INBOX_POPUP_RECEIVEDGIFT_TEXT1",
            bottom: "INBOX_POPUP_RECEIVEDGIFT_TEXT2",
            confirm: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES_CONFIRM"
        },
        default: {
            title: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES_TITLE",
            top: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES_TEXT1",
            bottom: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES_TEXT2",
            confirm: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES_CONFIRM"
        },
        defaultTuning: {
            title: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES_TITLE",
            top: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES_TEXT1",
            bottom: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES_TEXT2",
            confirm: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES_CONFIRM"
        }
    }, t.ExpirationDurationDays = 7
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return function(t, i) {
            var n = o.getVehicleInfo(e);
            o.isTrialVehicle(n) ? a.getInjector().get("popupService").draw("ConfirmPopup", {
                title: "HANDLINGTUNING_EXCLUDED_VEHICLE_TITLE",
                description: "HANDLINGTUNING_EXCLUDED_VEHICLE_DESC"
            }) : t({
                type: "steering.showSteeringPopup",
                vehicleId: e
            })
        }
    }

    function r() {
        return {
            type: "steering.hideSteeringPopup"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(12),
        a = i(34);
    t.showSteeringPopup = n, t.hideSteeringPopup = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = i(3),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this,
                    t = 0,
                    i = 0;
                this.face.on("stop", function() {
                    e.hudService.emit("lapPassFinished")
                }), this.addManagedListener(this.externalService, a.default.beHUDSetTotalLaps, function(e) {
                    t = e
                }), this.addManagedListener(this.externalService, a.default.beHUDSetCurrentLap, function(n, r) {
                    if (!(t < 2)) {
                        if (s.store.getState().player.id === r)
                            if (i) {
                                if (i !== n) {
                                    if (n > t || n < 2) return;
                                    e.gotoAndPlay(e.face, "pass"), e.translate(e.face.$(".id-textContainer .id-textField"), "LAP_FINISH_" + ("00" + (n - 1)).slice(-2)), e.hudService.emit("lapPassStarted"), i = n
                                }
                            } else i = n
                    }
                })
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([r.autowired("hudService")], c.prototype, "hudService", void 0), t.HudLapPassNoticeBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(1231),
        s = i(1232),
        c = i(1233),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.itemIndicator = this.getFace(".id-ITEMINDICATOR"), this.addChildBinder(this.face, a.HudHeliIndicatorBinder), this.addChildBinder(this.face, c.HudIonCannonIndicatorBinder), this.addChildBinder(this.face, s.HudEmpIndicatorBinder)
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.hudService.once("intro", function() {
                    e.gotoAndPlay(e.itemIndicator, "intro")
                })
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("hudService")], d.prototype, "hudService", void 0), t.HudItemIndicatorBinder = d
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "driftmode-result.setDriftRankChange",
            finalRank: e
        }
    }

    function r(e) {
        return {
            type: "driftmode-result.setDriftfinalPoint",
            finalPoint: e
        }
    }

    function o() {
        return {
            type: "driftmode-result.clearDriftResultStatus"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.setDriftRankChange = n, t.setDriftfinalPoint = r, t.clearDriftResultStatus = o
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return /AI$/gi.test(e)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.checkGameModeIsManagerMode = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(61),
        a = i(2),
        s = i(1),
        c = i(115),
        d = i(50),
        l = i(3),
        u = i(29),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.pursuitTechButtons = [
                    [],
                    []
                ], t.items = [0, 0], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.visible = !1, this.translate(".id-titleLabel", "GAMEROOM_CHANGING_PURSUIT_POPUP_TITLE"), this.translate(".id-itemListContainer1 .id-slotTitleLabel", "GAMEROOM_CHANGING_PURSUIT_POPUP_CATEGORY1_TITLE"), this.translate(".id-itemListContainer2 .id-slotTitleLabel", "GAMEROOM_CHANGING_PURSUIT_POPUP_CATEGORY2_TITLE"), this.translate(".id-description", "GAMEROOM_CHANGING_PURSUIT_POPUP_DESC"), this.translate(".id-confirmButton", "GAMEROOM_CHANGE_CONFIRM"), this.translate(".id-cancelButton", "GAMEROOM_CHANGE_CANCEL");
                var t = l.store.getState().configuration.configs.inputkey,
                    i = t && t.applied.useItem ? u.KeyboardMap.getKeyName(t.applied.useItem[0]) : "CTRL",
                    n = t && t.applied.useItem2 ? u.KeyboardMap.getKeyName(t.applied.useItem2[0]) : "ALT",
                    r = this.getFace(".id-hudPreviewContainer .id-inputKey1"),
                    o = this.getFace(".id-hudPreviewContainer .id-inputKey2");
                this.bindInputKey(r, i), this.bindInputKey(o, n), this.itemListContainers = [this.convertFace("itemListContainer1"), this.convertFace("itemListContainer2")], this.previewItems = [this.getFace("hudPreviewContainer").$("hudItemGuideEffect1"), this.getFace("hudPreviewContainer").$("hudItemGuideEffect2")], this.onClickSafe(".id-confirmButton", function() {
                    return e.confirm()
                }), this.on(".id-cancelButton", a.MouseEventEx.CLICK, function() {
                    e.hide()
                }), this.bindItems()
            }, t.prototype.bindInputKey = function(e, t) {
                var i = e.$(".id-keyName .id-textField"),
                    n = e.$(".id-keyBackground");
                i.text = t;
                var r = function(e) {
                        var t = $(e.htmlElement).clone().css({
                                width: "auto",
                                top: "100%"
                            }).appendTo("#edge-ui"),
                            i = t.width();
                        return t.remove(), i
                    }(i) + 18,
                    o = r / (n.width * n.scaleX);
                n.scaleXMultiplier = o
            }, t.prototype.onDetach = function() {}, t.prototype.confirm = function() {
                var e = this;
                return this.roomService.changePursuitTech(this.items[0], this.items[1]).then(function() {
                    return e.gameModeService.storeLastPursuitTechs(e.items[0], e.items[1])
                }).finally(function() {
                    return e.hide()
                })
            }, t.prototype.hide = function() {
                this.dispatch(o.hideChangePursuitTechPopup())
            }, t.prototype.bindItems = function() {
                for (var e = this, t = this.gameModeService.getPursuitItemsByGroup(), i = this, n = 0; n < 2; n++) ! function(n) {
                    for (var r = 0; r < 6; r++) ! function(r) {
                        var o = i.itemListContainers[n].$("pursuitTechButton" + (r + 1));
                        if (i.pursuitTechButtons[n].push(o), r >= t[n + 1].length) o.enabled = !1;
                        else {
                            o.enabled = !0;
                            var s = t[n + 1][r];
                            i.on(o, a.MouseEventEx.CLICK, function() {
                                e.onClickTechButton(s.code, n, r)
                            }), i.on(o, a.MouseEventEx.MOUSE_OVER, function(t) {
                                e.onOverTechButton(t, s, n)
                            }), i.on(o, a.MouseEventEx.MOUSE_OUT, function(t) {
                                e.tooltipService.hide()
                            });
                            for (var d = o.$("itemIcon"), l = d.numChildren, u = 0; u < l; u++) d.getChildAt(u).visible = !1;
                            var p = c.PursuitTechMap[s.code];
                            p && (d.$(p).visible = !0, i.translate(o, "PURSUITMODE_PURSUIT_" + s.code + "_NAME"))
                        }
                    }(r)
                }(n)
            }, t.prototype.onClickTechButton = function(e, t, i) {
                this.pursuitTechButtons[t].forEach(function(e) {
                    return e.selected = !1
                }), this.pursuitTechButtons[t][i].selected = !0, this.updateSelectedItem(e, t), this.items[t] = e
            }, t.prototype.onOverTechButton = function(e, t, i) {
                var n = this.$filter("translate"),
                    r = this.$filter("template"),
                    o = [n("PURSUITMODE_PURSUIT_AMOUNT") + ": ", r({
                        value: t.amount
                    }, "PURSUITMODE_PURSUIT_AMOUNT_VALUE")].join(""),
                    a = [n("PURSUITMODE_PURSUIT_COOLDOWNTIME") + ": ", r({
                        value: t.cooldowntime
                    }, "PURSUITMODE_PURSUIT_COOLDOWNTIME_VALUE")].join("");
                this.tooltipService.show(e, 0 === i ? "left" : "right", d.TooltipType.PursuitTech, {
                    title: n("PURSUITMODE_PURSUIT_" + t.code + "_NAME"),
                    desc: n("PURSUITMODE_PURSUIT_" + t.code + "_DESC"),
                    amount: o,
                    coolTime: a
                })
            }, t.prototype.update = function(e) {
                var t = this;
                if (_.isEmpty(e)) return void this.gotoAndPlay(this.face, "out", !0);
                this.gotoAndPlay(this.face, "in", !0), this.visible(this.face, !0);
                var i = this.gameModeService.getPursuitItemsByGroup();
                e.items.forEach(function(e, n) {
                    var r = _.findIndex(i[n + 1], function(t) {
                        return t.code === e
                    });
                    r = -1 === r ? 0 : r, t.onClickTechButton(e, n, r)
                })
            }, t.prototype.updateSelectedItem = function(e, t) {
                for (var i = this.previewItems[t], n = i.$("itemIcon"), r = n.numChildren, o = 0; o < r; o++) n.getChildAt(o).visible = !1;
                n.$(c.PursuitTechMap[e]).visible = !0, this.gotoAndPlay(i, "startAnimation")
            }, t.prototype.mapStateToProps = function(e) {
                return e.room && e.room.changePursuitTechPopup || {}
            }, t
        }(r.Binder);
    n.__decorate([s.autowired("room2Service")], p.prototype, "roomService", void 0), n.__decorate([s.autowired("gameModeService")], p.prototype, "gameModeService", void 0), n.__decorate([s.autowired("tooltipService")], p.prototype, "tooltipService", void 0), n.__decorate([s.autowired("$filter")], p.prototype, "$filter", void 0), t.ChangePursuitTechBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(16),
        o = i(2),
        a = i(613),
        s = i(44),
        c = i(3),
        d = i(50),
        l = i(61),
        u = i(115),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                e.prototype.onFaceReady.call(this);
                var i = this.face;
                i.on(o.MouseEventEx.CLICK, function() {
                    return t.dispatch(l.updateSelectedSlot(t.props.slot))
                }), i.visible = !1;
                var n = i.$(".id-buttons");
                _.forEach(n.$$(".comp-Button"), function(e) {
                    e.hasSize = !0
                }), this.kickPlayerButton = n.$(".id-outButtonButton"), this.grantHostButton = n.$(".id-changeSysopButton"), this.viewDetailButton = n.$(".id-detailButton"), this.addFriendButton = n.$(".id-addFriendButton"), this.pursuitTechContainer = i.$(".id-pursuitTechContainer"), this.pursuitTechContainer && (this.pursuitTech1 = this.pursuitTechContainer.$("item1"), this.pursuitTech2 = this.pursuitTechContainer.$("item2"), this.pursuitTech1.hasSize = !0, this.pursuitTech2.hasSize = !0, this.on(this.pursuitTech1, o.MouseEventEx.MOUSE_OVER, function(e) {
                    t.onOverTechButton(e, 1)
                }), this.on(this.pursuitTech1, o.MouseEventEx.MOUSE_OUT, function() {
                    t.tooltipService.hide()
                }), this.on(this.pursuitTech2, o.MouseEventEx.MOUSE_OVER, function(e) {
                    t.onOverTechButton(e, 2)
                }), this.on(this.pursuitTech2, o.MouseEventEx.MOUSE_OUT, function() {
                    t.tooltipService.hide()
                }));
                var r = this.$filter("translate");
                this.onClickSafe(this.kickPlayerButton, function(e) {
                    return e.originalEvent.stopPropagation(), t.kickSlot(t.props.slot)
                }), this.onClickSafe(this.grantHostButton, function(e) {
                    return e.originalEvent.stopPropagation(), t.grantHost(t.props.slot)
                }), this.viewDetailButton.on(o.MouseEventEx.CLICK, function(e) {
                    e.originalEvent.stopPropagation()
                }), this.addFriendButton.on(o.MouseEventEx.CLICK, function(e) {
                    e.originalEvent.stopPropagation(), t.playerSnippetService.getSnippetAsync(t.props.pid).then(function(e) {
                        t.popupService.draw("ConfirmCancelPopup", {
                            title: {
                                text: "MESSENGER_ADDFRIEND_CONFIRM_TITLE"
                            },
                            description: t.$filter("template")({
                                playername: e.name
                            }, "MESSENGER_ADDFRIEND_CONFIRM"),
                            confirmString: "MESSENGER_ADDFRIEND_CONFIRM_YES",
                            cancelString: "MESSENGER_ADDFRIEND_CONFIRM_NO",
                            confirm: function() {
                                t.contactsService.inviteFriend(e.name).catch(function(e) {
                                    return s.showAddFriendErrorPopup(e, r, t.popupService)
                                })
                            }
                        })
                    })
                });
                var a = function(e, i) {
                    t.on(e, o.MouseEventEx.MOUSE_OVER, function() {
                        t.tooltipService.show(e, "bottom", d.TooltipType.Basic, r(i), {}, {}, "roomUserList")
                    }), t.on(e, o.MouseEventEx.MOUSE_OUT, function() {
                        t.tooltipService.hide()
                    })
                };
                a(this.kickPlayerButton, "GAMEROOM_TOOLTIP_KICKFROMROOM"), a(this.grantHostButton, "GAMEROOM_TOOLTIP_CHANGE_ROOMMASTER"), a(this.viewDetailButton, "GAMEROOM_TOOLTIP_PLAYER_INFO"), a(this.addFriendButton, "GAMEROOM_TOOLTIP_ADDTOFRIEND")
            }, t.prototype.kickSlot = function(e) {
                return this.room2Service.kickSlot(e)
            }, t.prototype.grantHost = function(e) {
                return this.room2Service.grantHost(e)
            }, t.prototype.onPidChanged = function(t, i, n) {
                e.prototype.onPidChanged.call(this, t, i, n), i && (this.externalService.beWaitingRoomUnspawnVehicle(this.props.slot - 1), delete this.vid), this.face.visible = !!n, this.emptySlotMC && (this.emptySlotMC.visible = !n)
            }, t.prototype.onOverTechButton = function(e, t) {
                var i = this.props.pursuitItems["item" + t],
                    n = this.gameModeService.getPursuitItemsByGroup(),
                    r = _.find(n[t], function(e) {
                        return e.code === i.code
                    }),
                    o = this.$filter("translate"),
                    a = this.$filter("template"),
                    s = [o("PURSUITMODE_PURSUIT_AMOUNT") + ": ", a({
                        value: r.amount
                    }, "PURSUITMODE_PURSUIT_AMOUNT_VALUE")].join(""),
                    c = [o("PURSUITMODE_PURSUIT_COOLDOWNTIME") + ": ", a({
                        value: r.cooldowntime
                    }, "PURSUITMODE_PURSUIT_COOLDOWNTIME_VALUE")].join("");
                this.tooltipService.show(e, "bottomleft", d.TooltipType.PursuitTech, {
                    title: o("PURSUITMODE_PURSUIT_" + r.code + "_NAME"),
                    desc: o("PURSUITMODE_PURSUIT_" + r.code + "_DESC"),
                    amount: s,
                    coolTime: c
                })
            }, t.prototype.update = function(t) {
                if (e.prototype.update.call(this, t), !_.isEmpty(t)) {
                    if (this.bindText(".id-index", "" + t.slot), t.entry) {
                        var i = this.face;
                        if (i.customState = "READY" === t.entry.status || t.isHost ? "ready" : "", i.selected = t.isSelected, t.entry.team ? (this.getFace(".id-team").visible = !0, this.getFace(".id-index").visible = !1) : (this.getFace(".id-team").visible = !1, this.getFace(".id-index").visible = !0), this.vid !== t.entry.vehicle.id && (this.vid = t.entry.vehicle.id, this.pid !== c.store.getState().player.id)) {
                            var n = this.props.entry.vehicle.paint;
                            this.externalService.beWaitingRoomSelectVehicle(this.props.slot - 1, this.props.entry.vehicle.code, n)
                        }
                        if (t.pursuitItems) {
                            for (var r = this.pursuitTech1.$("itemIcon"), o = this.pursuitTech2.$("itemIcon"), a = r.numChildren, s = 0; s < a; s++) r.getChildAt(s).visible = !1;
                            for (var d = o.numChildren, s = 0; s < d; s++) o.getChildAt(s).visible = !1;
                            var l = r.$(u.PursuitTechMap[t.pursuitItems.item1.code]),
                                p = o.$(u.PursuitTechMap[t.pursuitItems.item2.code]);
                            l && (l.visible = !0), p && (p.visible = !0)
                        }
                    }
                    if (this.kickPlayerButton.visible = this.amIHostOrReferee() && !t.isMyEntry, this.grantHostButton.visible = this.amIHost() && !t.isMyEntry, this.addFriendButton.visible = !t.isMyEntry && !this.isMyFriend(), this.addFriendButton.enabled = !t.isMyEntry && !this.isSentRequest(), this.viewDetailButton.visible = !1, this.viewDetailButton.enabled = !t.isMyEntry, this.gotoAndStop(".id-sysopMarker", t.isHost ? "sysop" : "none"), this.emptySlotMC && (this.gotoAndStop(this.emptySlotMC.$(".id-background"), t.locked ? "lock" : "unlock"), this.gotoAndStop(this.emptySlotMC.$(".id-lockButton .id-icon"), t.locked ? "lock" : "unlock"), this.translate(this.emptySlotMC.$(".id-lockButton"), t.locked ? "GAMEROOM_OPEN_SLOT" : "GAMEROOM_CLOSE_SLOT")), t.vehicle) {
                        var i = this.face,
                            h = [i.customState, i.selected ? "selected" : ""].filter(function(e) {
                                return !_.isEmpty(e)
                            }).join("_");
                        this.gotoAndStop(".VehicleNameBar", _.isEmpty(h) ? "none" : h)
                    }
                }
            }, t.prototype.amIHostOrReferee = function() {
                return t.isLocalPlayerHost || t.isLocalPlayerReferee
            }, t.prototype.amIHost = function() {
                return t.isLocalPlayerHost
            }, t.prototype.isMyFriend = function() {
                if (!this.props.pid) return !1;
                var e = this.props.pid,
                    t = this.props.contacts.friends;
                return !_.isUndefined(_.find(t, function(t) {
                    return t.snippet.pid === e
                }))
            }, t.prototype.isSentRequest = function() {
                if (!this.props.pid) return !1;
                var e = this.props.pid,
                    t = this.props.contacts.sentInvites;
                return !_.isUndefined(_.find(t, function(t) {
                    return t.snippet.pid === e
                }))
            }, t
        }(a.Player);
    p.isLocalPlayerHost = !1, p.isLocalPlayerReferee = !1, n.__decorate([r.autowired("externalService")], p.prototype, "externalService", void 0), n.__decorate([r.autowired("contactsService")], p.prototype, "contactsService", void 0), n.__decorate([r.autowired("room2Service")], p.prototype, "room2Service", void 0), n.__decorate([r.autowired("popupService")], p.prototype, "popupService", void 0), n.__decorate([r.autowired("tooltipService")], p.prototype, "tooltipService", void 0), n.__decorate([r.autowired("gameModeService")], p.prototype, "gameModeService", void 0), t.RoomPlayer = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(30),
        a = i(16),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                var t = this,
                    i = e.playerInfoState;
                void 0 !== this.level && this.level < i.level && _.forEach(_.range(this.level + 1, i.level + 1), function(e) {
                    var i = t.rewardService.getLevelReward(e),
                        n = _.filter(i, function(e) {
                            return "UNLOCK" === e.type
                        });
                    t.popupService.draw("NewLevelupRewardConfirmPopup", {
                        level: e,
                        rewards: i,
                        background: "dark"
                    }), n.length > 0 && (r.info("Unlock reward", n), t.popupService.draw("FunctionUnlockConfirmPopup", {
                        unlock: n
                    }))
                }), this.level = i.level
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    playerInfoState: e.playerInfo
                }
            }, t
        }(o.Binder);
    n.__decorate([a.autowired("rewardService")], s.prototype, "rewardService", void 0), n.__decorate([a.autowired("popupService")], s.prototype, "popupService", void 0), t.LevelupBinder = s
}, function(e, t, i) {
    "use strict";

    function n() {
        return new r.EventEmitter
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(35);
    t.State = r.EventEmitter;
    ! function(e) {
        e[e.initial = 0] = "initial", e[e.playerNameInput = 1] = "playerNameInput", e[e.keyboardControlSelect = 2] = "keyboardControlSelect", e[e.complete = 3] = "complete"
    }(t.Scene || (t.Scene = {})), t.createSharedState = n, t.Events = {
        changeScene: "changeScene",
        updateSelectedVehicle: "updateSelectedVehicle"
    }
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(16),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".NewIcon", "PARTS_INVENTORY_NEW"), this.update(this.props)
            }, t.prototype.update = function(e) {
                var t = e.resource,
                    i = e.checkedAt,
                    n = this.face;
                if (!_.isEmpty(t) && t.count > 0) {
                    var r = t.count;
                    if (this.bindText(".id-countNumLabel", String(r)), "empty" === n.customState && (n.customState = null), i) {
                        var o = new Date(Date.parse(t.increasedAt));
                        this.visible(".id-newIcon", o > i)
                    }
                } else this.bindText(".id-countNumLabel", "0"), n.customState || (n.customState = "empty"), this.visible(".id-newIcon", !1)
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("sessionService")], a.prototype, "sessionService", void 0), t.PartResourceBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(16),
        a = i(316),
        s = i(2),
        c = i(50),
        d = i(627),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.resourceBinder = this.addChildBinder(this.face, a.PartResourceBinder), this.update(this.props), this.featureSetService.isEnabled("PARTSMATERIALCOMBINE") && this.onClickSafe(this.face, this.showPartsMaterialProduction.bind(this)), this.addManagedListener(this.face, s.MouseEventEx.MOUSE_OVER, function() {
                    var t = e.props.tooltip && e.props.tooltip.side;
                    t || (t = e.props.index < 3 ? "bottomleft" : "topleft"), e.tooltipService.show(e.getFace(".comp-HitArea"), t, c.TooltipType.PartsMaterialSlot, {
                        code: e.props.code,
                        count: e.props.resource ? e.props.resource.count : 0
                    })
                }), this.addManagedListener(this.face, s.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                }), this.visible(".id-arrowIcon", !1)
            }, t.prototype.update = function(e) {
                var t = e.code,
                    i = e.count,
                    n = e.resource,
                    r = e.slotType;
                if (this.resourceBinder.setProps(e), this.partsMaterial = this.staticdataLoaderService.partsMaterialData[t], t && this.drawExternalImage(".MaterialImage", this.$filter("cdn_material")(this.partsMaterial.code)), i && this.bindText(".id-countNumLabel", String(i)), "inventory" === r && this.featureSetService.isEnabled("PARTSMATERIALCOMBINE")) {
                    this.craftable = !(!n || !this.partsMaterial.combine) && n.count >= this.partsMaterial.combine.requiredCount;
                    var o = this.convertFace(".id-arrowIcon");
                    if (!o) return;
                    this.visible(o, this.craftable), this.craftable ? o.play() : o.stop()
                } else this.visible(".id-arrowIcon", !1)
            }, t.prototype.showPartsMaterialProduction = function(e) {
                var t = this,
                    i = this.props;
                return i.resource && this.craftable ? new Promise(function(e) {
                    t.lazyLoadService.loadView("vehicles-parts-material-production").then(function() {
                        t.dispatch(d.show(i)), setTimeout(function() {
                            t.tooltipService.hide(), e()
                        }, 10)
                    }), e()
                }) : Promise.resolve()
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([o.autowired("staticdataLoaderService")], l.prototype, "staticdataLoaderService", void 0), n.__decorate([o.autowired("tooltipService")], l.prototype, "tooltipService", void 0), n.__decorate([o.autowired("lazyLoadService")], l.prototype, "lazyLoadService", void 0), n.__decorate([o.autowired("featureSetService")], l.prototype, "featureSetService", void 0), t.PartsMaterialBinder = l
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        e.draw("ConfirmPopup", {
            title: t.title,
            description: t.description,
            confirmString: "SEARCHPURCHASE_PURCHASE_FAILED_POPUP_CONFIRM"
        })
    }

    function r(e, t) {
        e.draw("ConfirmPopup", {
            title: t.title,
            description: t.description,
            confirmString: "INVENTORY_NUMBERPLATELOTTERY_CONFIRM"
        })
    }

    function o(e, t, i) {
        e.draw("ConfirmCancelPopup", {
            title: i.title,
            description: s(i.description, t),
            confirmString: "RANDOMNUMBERPLATE_NOSPACE_GOTO",
            cancelString: "RANDOMNUMBERPLATE_NOSPACE_CLOSE",
            confirm: function() {
                d.getInjector().get("stateService").go("root.menu.MyNumberPlate")
            }
        })
    }

    function a(e, t, i) {
        e.draw("ConfirmPopup", {
            title: i.title,
            description: t("template")({
                errorcode: i.errorCode
            }, i.description),
            confirm: function() {
                i.confirm && i.confirm()
            }
        })
    }

    function s(e, t) {
        switch (Object.prototype.toString.call(e)) {
            case "[object String]":
                return t("translate")(e);
            case "[object Array]":
                return e.map(function(e) {
                    return t("translate")(e)
                }).join("\n");
            default:
                return ""
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var c = i(0),
        d = i(34),
        l = i(47),
        u = i(44),
        p = i(59),
        h = function() {
            function e() {}
            return e.errorPopup = function(e, t, i, s) {
                if (void 0 === s && (s = {}), l.IslandCodes.NUMBER_PLATE === Number(i.islandCode)) {
                    var d = u.parseError(i);
                    switch (i.errorCode) {
                        case p.ErrorCode.PlateNumberUsed:
                            return n(e, c.__assign({}, s, d));
                        case p.ErrorCode.PlayerLevelLimit:
                            return r(e, c.__assign({}, d));
                        case p.ErrorCode.NumberPlateSlotNotEnough:
                            return o(e, t, c.__assign({}, s, d));
                        case p.ErrorCode.NumberPlateAdvanceRandomError:
                        default:
                            return a(e, t, c.__assign({}, s, d, {
                                errorCode: i.code
                            }))
                    }
                }
            }, e
        }();
    t.NumberPlateErrorPopupHelper = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(8),
        a = i(2),
        s = i(69),
        c = i(1413),
        d = i(181),
        l = i(4),
        u = i(1),
        p = i(12),
        h = i(56),
        f = i(1414),
        v = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.includeParts = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                _.forEach(r.Part.PartTypes, function(t, i) {
                    e.translate(".id-partsInfo .id-" + t + "Parts .id-state", "TRADEMARKET_SEARCHCONDITION_" + t.toUpperCase())
                }), this.translate(".id-popupName", "VEHICLE_DETAIL_TITLE"), "tencent" === this.publisherService.publisher ? (this.visible(".id-priceInfo .id-notice", !1), this.visible(".id-priceInfo .id-priceTitle", !1)) : (this.translate(".id-priceInfo .id-notice", "VEHICLE_DETAIL_INFO1"), this.translate(".id-priceInfo .id-priceTitle", "COMMON_VEHICLEVALUE")), this.translate(".id-priceInfo .id-averagePriceTitle", "VEHICLE_DETAIL_MONTHPRICE"), this.translate(".id-priceInfo .id-noDataAveragePrice", "VEHICLE_DETAIL_DATACOLLECTING"), this.translate(".id-priceInfo .id-minPriceTitle", "VEHICLE_DETAIL_LOWESTPRICE"), this.translate(".id-priceInfo .id-noDataPrice", "TRADEMARKET_NOSALEVEHICLE"), this.translate(".id-graphInfo .id-noData", "VEHICLE_DETAIL_DATACOLLECTING"), this.template(".id-graphInfo .id-priceUnitTitle", "VEHICLE_DETAIL_PRICE_UNIT", {
                    unit: "10,000"
                }), this.translate(".id-graphInfo .id-dateUnitTitle", "VEHICLE_DETAIL_DATE_UNIT"), this.translate(".id-graphInfo .id-graphNotice", "VEHICLE_DATAIL_INFO2"), this.translate(".id-partsCheck .id-checkboxName", "VEHICLE_DETAIL_INCLUDEPARTS"), this.on(".id-close", a.MouseEventEx.CLICK, function() {
                    return e.closePopup()
                }), this.on(".id-partsCheck", a.MouseEventEx.CLICK, function() {
                    return e.onClickIncludeParts()
                }), this.addManagedListener(this.marketService, "openVehicleDetail", this.openVehicleDetail.bind(this)), this.addManagedListener(this.marketService, "checkOwnedAndOpenDetail", this.checkOwnedAndOpenDetail.bind(this)), this.gradeDropdown = this.getFace(".id-upgradeDropdown"), this.gradeDropdown.items = _.range(10).map(function(t) {
                    return {
                        text: e.$filter("translate")("TRADEMARKET_LISTCOLUMN_UPGRADE") + " +" + (t + 1).toString(),
                        value: t + 1
                    }
                }), this.on(this.gradeDropdown, o.EventEx.CHANGE, function(t) {
                    e.selectedGrade = e.gradeDropdown.selectedItem.value, e.changeGradeInfo()
                }), this.vehicleCard = this.addChildBinder(".id-vehicleItem", h.VehicleCard), this.vehicleDetailParts = this.addChildBinder(this.face, f.VehicleDetailPartsBinder)
            }, t.prototype.onDetach = function() {
                this.dispatch(s.resume("vehicle-detail"))
            }, t.prototype.getBonusStatusByPart = function(e) {
                if (void 0 === this.resultVehicle) return "0";
                var t = this.vehicleDataService.getPartData(e, this.resultVehicle.parts[e], this.resultVehicle.clazz);
                return _.isUndefined(t) ? "0" : "+ " + t.ovr[r.Part.PartStatuses[e]]
            }, t.prototype.getStatusByPart = function(e) {
                return void 0 === this.resultVehicle ? 0 : this.resultVehicle.status[r.Part.PartStatuses[e]]
            }, t.prototype.closePopup = function() {
                this.gotoAndPlay(this.face, "hide"), this.dispatch(s.resume("vehicle-detail"))
            }, t.prototype.isEnableParts = function() {
                return "" !== this.detailContext.id && (this.detailContext.parts && _.some(this.detailContext.parts, function(e) {
                    return 0 !== e
                }))
            }, t.prototype.getOwnState = function() {
                return this.detailContext.code ? "" !== this.detailContext.id && this.detailContext.grade === this.selectedGrade ? "VEHICLE_DETAIL_OWN" : "VEHICLE_DETAIL_NOTOWN" : ""
            }, t.prototype.setPartsCheck = function() {
                this.enableButton(".id-partsCheck", this.isEnableParts()), this.convertFace(".id-partsCheck").selected = this.includeParts
            }, t.prototype.onClickIncludeParts = function() {
                this.setVehicleInfo(!this.includeParts)
            }, t.prototype.setVehicleInfo = function(e) {
                var t = this;
                this.includeParts = e, this.setPartsCheck(), this.resultVehicle = this.vehicleDataService.decorateVehicle(n.__assign({}, this.detailContext, {
                    grade: this.selectedGrade,
                    parts: this.includeParts ? this.detailContext.parts : d.default.EmptyParts
                })), this.vehicleCard.setProps({
                    vehicle: this.resultVehicle,
                    muteStatusIcon: !0,
                    disableMouse: !0
                }), this.dispatch(c.setVehicle({
                    vehicle: this.resultVehicle
                })), this.bindText(".id-vehicleInfo .id-OVR", this.resultVehicle.ovr), _.forEach(r.Part.PartTypes, function(e, i) {
                    t.bindText(".id-partsInfo .id-" + e + "Parts .id-addOVR", t.getBonusStatusByPart(e)), t.bindText(".id-partsInfo .id-" + e + "Parts .id-OVR", t.getStatusByPart(e));
                    var n = t.getFace(".id-partsInfo .id-" + e + "Parts .id-OVR");
                    n && (n.alpha = t.resultVehicle.parts[e] ? 1 : .5)
                })
            }, t.prototype.setVehicleDetail = function(e, t, i, n, r, o) {
                this.detailContext = {
                    id: n || "",
                    code: e,
                    grade: i,
                    clazz: t,
                    paint: o || this.vehicleDataService.getDefaultTuningData(e),
                    parts: r || d.default.EmptyParts
                }, this.selectedGrade = i, this.setVehicleInfo(this.isEnableParts()), this.setVehiclePriceInfo(e, i), this.translate(".id-vehicleInfo .id-state", this.getOwnState()), this.bindText(".id-vehicleInfo .id-manufacturerName", this.$filter("manufacturerName")(this.resultVehicle.manufacturerCode)), this.bindText(".id-vehicleInfo .id-vehicleName", this.$filter("vehicleName")(this.resultVehicle.code))
            }, t.prototype.setVehiclePriceInfo = function(e, t) {
                var i = this;
                this.visible(".id-priceInfo .id-price", !1), "tencent" !== this.publisherService.publisher && this.marketService.getMarketLimitPrice(e, t).then(function(e) {
                    var t = e.base || 0;
                    i.bindText(".id-priceInfo .id-price", l.default.toMoney(t)), i.visible(".id-priceInfo .id-price", !!t)
                }), this.visible(".id-priceInfo .id-minPrice", !1), this.visible(".id-priceInfo .id-noDataPrice", !1), this.marketService.getVehicleOffer(e, t).then(function(e) {
                    var t = 0 < e.length ? e[0].summary.price : 0;
                    i.bindText(".id-priceInfo .id-minPrice", l.default.toMoney(t)), i.visible(".id-priceInfo .id-minPrice", !!t), i.visible(".id-priceInfo .id-noDataPrice", !t)
                }), this.visible(".id-priceInfo .id-averagePrice", !1), this.visible(".id-priceInfo .id-noDataAveragePrice", !0)
            }, t.prototype.changeGradeInfo = function() {
                var e = this.detailContext,
                    t = e.code,
                    i = e.clazz,
                    n = this.selectedGrade,
                    r = _.find(p.getOwnTrialVehicles(), {
                        code: t,
                        grade: n
                    }) || {};
                this.setVehicleDetail(t, i, n, r.id, r.parts, r.paint)
            }, t.prototype.openVehicleDetail = function(e) {
                var t = e.code,
                    i = e.clazz,
                    n = e.grade,
                    r = e.id,
                    o = e.parts,
                    a = e.paint;
                this.setVehicleDetail(t, i, n, r, o, a), this.gradeDropdown.selectedIndex = n - 1, this.gotoAndPlay(this.face, "intro"), this.tooltipService.hide(), this.dispatch(s.pause("vehicle-detail"))
            }, t.prototype.checkOwnedAndOpenDetail = function(e) {
                var t = e.code,
                    i = e.grade,
                    n = _.find(p.getOwnTrialVehicles(), {
                        code: t,
                        grade: i
                    }) || {};
                this.openVehicleDetail(_.assign({}, e, {
                    id: n.id,
                    parts: n.parts,
                    paint: n.paint
                }))
            }, t
        }(u.StageBinder);
    n.__decorate([u.autowired("$filter")], v.prototype, "$filter", void 0), n.__decorate([u.autowired("marketService")], v.prototype, "marketService", void 0), n.__decorate([u.autowired("vehicleDataService")], v.prototype, "vehicleDataService", void 0), n.__decorate([u.autowired("tooltipService")], v.prototype, "tooltipService", void 0), n.__decorate([u.autowired("publisherService")], v.prototype, "publisherService", void 0), t.VehicleDetailBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0);
    i(634), i(635), i(242);
    var r = i(11),
        o = i(1436),
        a = i(1437),
        s = i(599);
    t.LicenseDriver = 47;
    var c = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.resumeBgm = function() {
            this.bgmService.playCore()
        }, t
    }(s.VideoGuideBinder);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new r.StateDefinition("/licenseMain?{licensetype}", 79).container({
            stages: {
                "license-main": o.LicenseMain
            },
            resolve: {
                player: ["playerService", function(e) {
                    return e.fetch()
                }],
                license: ["licenseService", function(e) {
                    return e.fetch()
                }]
            }
        }).dialog({
            stages: {
                "license-popup": {
                    stageBinder: a.LicensePopup,
                    lazy: !0
                }
            }
        });
        e.state("root.menu.LicenseTest", t);
        var i = new r.StateDefinition("/license?{fromHud}", 42).container({
            stages: {
                "license-popup": a.LicensePopup
            },
            resolve: {
                player: ["playerService", function(e) {
                    return e.fetch()
                }]
            }
        }).videoGuide({
            stages: {
                "video-guide": {
                    stageBinder: c
                }
            }
        });
        e.state("root.LicenseMain", i)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(8),
        a = i(2),
        s = i(322),
        c = i(644),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translateAll(".id-popupName", "SHOP_POPUP_PURCHASE_TITLE"), this.translateAll(".id-selectBuyingMethod .id-selectiveBuyLabel", "SHOP_POPUP_PURCHASE_SELECT_CURRENCY"), this.translateAll(".id-dropDownPriceMenu .id-subTitleLabel", "SHOP_POPUP_PURCHASE_BUNCH"), this.translateAll(".id-itemPriceLabel", "SHOP_POPUP_PURCHASE_PRICE")
            }, t.prototype.onAddedToScene = function() {
                this.setDatas(), this.setUiContainers(), this.setCurrencyCheckBoxes(), this.setBunchesDropDown(), this.setSelectedBunch(), this.setProductComponent(), this.setCashContainer(), this.setItemCard(), this.setPriceInfoByBunch(), this.setProductDetailInfo(), e.prototype.onAddedToScene.call(this)
            }, t.prototype.setProduct = function() {
                this.product = this.shopService.getProduct(this.$stateParams.productCode)
            }, t.prototype.setDatas = function() {
                this.setProduct(), this.currencies = _.uniq(this.product.bunches.map(function(e) {
                    return e.currency
                })), this.currentCurrency = this.currencies[0], this.isBundle = this.product.rewards && this.product.rewards.length > 1
            }, t.prototype.setNextFlow = function() {
                this.nextBinder = this.addChildBinder(this.targetContainer, s.PurchaseNextBinder, {
                    exit: this.exit.bind(this)
                })
            }, t.prototype.setUiContainers = function() {
                var e = this;
                this.targetContainer = this.getFace(this.isBundle ? ".BuyShopBundleItemPopup" : ".BuyShopSingleItemPopup"), this.targetContainer.visible = !0, this.setNextFlow(), this.bunchesDropDown = this.convertFace(this.targetContainer.$(".DropdownMenuButton")), this.bunchesDropDown.hasSize = !0;
                var t = this.targetContainer.$(".id-selectiveBuyContainer");
                this.gotoAndStop(t, this.currencies.length > 1 ? "choice" : "default"), this.currencyCheckBoxes = this.targetContainer.$$(".id-checkBox"), this.bunchesDropDown.on(o.EventEx.CHANGE, function() {
                    e.setSelectedBunch()
                })
            }, t.prototype.setCurrencyCheckBoxes = function() {
                var e = this;
                if (!(this.currencies.length <= 1)) {
                    this.currencyCheckBoxes.forEach(function(i, n) {
                        if (e.currencies[n]) {
                            i.hasSize = !0;
                            var r = function() {
                                return "SP" === e.currencies[n] ? "SHOP_POPUP_PURCHASE_BY_SP" : "NXCASH" === e.currencies[n] ? "SHOP_POPUP_PURCHASE_BY_CASH" : "TCCASH" === e.currencies[n] ? "SHOP_POPUP_PURCHASE_BY_CASH" : "MILEAGE" === e.currencies[n] ? "SHOP_POPUP_PURCHASE_BY_MILEAGE" : ""
                            }();
                            e.translate(i.$(".id-checkboxName"), r), e.currencies[n] === e.currentCurrency && (i.selected = !0), e.addManagedListener(i, a.MouseEventEx.CLICK, function() {
                                return t(i, n)
                            })
                        }
                    });
                    var t = function(t, i) {
                        e.currencyCheckBoxes.forEach(function(e) {
                            return e.selected = !1
                        }), t.selected = !0, e.currentCurrency = e.currencies[i], e.setBunchesDropDown(), e.setSelectedBunch(), e.setItemCard()
                    }
                }
            }, t.prototype.setBunchesDropDown = function() {
                var e = this;
                this.targetBunches = _.filter(this.product.bunches, function(t) {
                    return t.currency === e.currentCurrency
                }), this.bunchesDropDown.items = this.targetBunches.map(function(t, i) {
                    var n = t.count + e.$filter("translate")("SHOP_POPUP_PURCHASE_AMOUNT");
                    return {
                        text: r.default.toMoney(t.price) + " / " + n,
                        value: i,
                        bunch: t
                    }
                })
            }, t.prototype.setSelectedBunch = function() {
                var e = this.bunchesDropDown.selectedItem;
                this.currentBunch = e.bunch, this.bindText(this.bunchesDropDown.$(".id-buttonName .id-numberLabel"), e.text), this.gotoAndStop(this.bunchesDropDown.$(".MonetaryUnitIcon"), r.default.getPriceIconLabel(this.currentCurrency)), this.setPriceInfoByBunch()
            }, t
        }(c.ProductPurchaseCommBinder);
    t.ProductPurchaseBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(1),
        a = i(643),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                e.prototype.onFaceReady.call(this);
                var i = this.getFace(".id-buyButton"),
                    n = this.getFace(".id-cancelButton"),
                    o = this.getFace(".id-giftButton");
                this.translate(i, "SHOP_POPUP_PURCHASE_PURCHASE"), this.translate(o, "SHOP_POPUP_PURCHASE_GIFT"), this.translate(n, "SHOP_POPUP_PURCHASE_CANCEL"), this.addManagedListener(i, r.MouseEventEx.CLICK, function() {
                    t.buy()
                }), this.addManagedListener(o, r.MouseEventEx.CLICK, function() {
                    t.present()
                }), this.addManagedListener(n, r.MouseEventEx.CLICK, function() {
                    t.enableButton(n, !1), t.exit()
                })
            }, t.prototype.update = function(t) {
                e.prototype.update.call(this, t), this.enableButton(".id-giftButton", this.isCash(this.currentCurrency))
            }, t.prototype.buy = function() {
                var e = this;
                this.checkPurchasedCount().then(function(t) {
                    if (t >= e.product.saleLimit) return void e.popupService.draw("ConfirmPopup", {
                        title: "SHOP_POPUP_PURCHASE_LIMIT_EXCEEDED_TITLE",
                        description: e.$filter("template")({
                            count: t
                        }, "SHOP_POPUP_PURCHASE_LIMIT_EXCEEDED_DESC")
                    });
                    var i = e.shopService.getMyMoney(e.currentCurrency) - e.currentBunch.price;
                    if (i < 0) return e.openInSufficientPopup(i);
                    e.stateService.go("^"), e.popupService.draw("BuyShopItemConfirmPopup", {
                        product: e.product,
                        bunches: e.targetBunches,
                        bunch: e.currentBunch,
                        possession: e.shopService.getMyMoney(e.currentCurrency),
                        confirm: function() {
                            e.popupService.chaining = !0, e.shopService.purchaseProduct(e.product.code, e.currentBunch).then(function(t) {
                                return e.shopService.fetchCash()
                            }).then(function() {
                                return e.inboxService.needFetch()
                            }).then(function() {
                                return e.openPurchaseCompletePopup()
                            }).then(function() {
                                return e.playerService.dispatchNewItemIndicate("inbox")
                            }).catch(e.onErrorPurchase.bind(e))
                        }
                    })
                })
            }, t.prototype.checkPurchasedCount = function() {
                return 0 === this.product.saleLimit ? Promise.resolve(-1) : this.shopService.getProductPurchasedCount(this.product.code)
            }, t.prototype.present = function() {
                var e = this.shopService.getMyMoney(this.currentCurrency) - this.currentBunch.price;
                if (e < 0) return this.openInSufficientPopup(e);
                var t = this.stateService.getCurrentName().replace(/Purchase$/, "Present");
                this.stateService.go(t, {
                    productCode: this.product.code,
                    product: this.product,
                    bunch: this.currentBunch,
                    possession: this.shopService.getMyMoney(this.currentCurrency)
                })
            }, t.prototype.openPurchaseCompletePopup = function() {
                var e = this,
                    t = _.minBy(this.targetBunches, function(e) {
                        return e.count
                    });
                this.popupService.draw("ItemIconConfirmPopup", {
                    title: "SHOP_POPUP_PURCHASEDONE_TITLE",
                    desc: {
                        top: this.$filter("translate")("SHOP_POPUP_PURCHASEDONE_TEXT1"),
                        bottom: this.$filter("translate")("SHOP_POPUP_PURCHASEDONE_TEXT2")
                    },
                    itemCardProps: {
                        info: {
                            name: this.product.name,
                            img: this.shopService.getProductImgPath(this.product),
                            type: "SHOP_PRODUCT",
                            price: t.price,
                            currency: t.currency,
                            count: 1,
                            rank: this.product.rank,
                            fallbackImg: this.shopService.getProductFallbackImgPath(this.product)
                        },
                        mouseDisabled: !0
                    },
                    buttons: [{
                        type: "confirm",
                        name: "SHOP_POPUP_FINALCONFIRMPURCHASE_YES_CONFIRM",
                        onClick: function() {
                            return e.popupService.closePopup()
                        }
                    }, {
                        type: "cancel",
                        name: "SHOP_POPUP_FINALCONFIRMPURCHASE_NO_INBOX",
                        onClick: function() {
                            e.popupService.closePopup().then(function() {
                                return e.stateService.go("root.menu.Inbox")
                            })
                        }
                    }],
                    isInvertTwoButton: !0
                })
            }, t
        }(a.PurchaseNextCommBinder);
    n.__decorate([o.autowired("inboxService")], s.prototype, "inboxService", void 0), t.PurchaseNextBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(645),
        s = i(239),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.face.visible = !1, this.translate(".id-clanIntroTitle", "CLAN_CLANLIST_INFO_INTRODUCTION"), this.translate(".id-clanNumberTitle", "CLAN_CLANLIST_INFO_MEMBERS"), this.translate(".id-clanDateTitle", "CLAN_CLANLIST_INFO_FOUNDDATE"), this.translate(".id-clanMasterTitle", "CLAN_CLANLIST_INFO_LEADER"), this.dateText = this.getFace(".id-dateLabel"), this.clanNameText = this.getFace(".id-clanName"), this.clanEmblemBinder = this.addChildBinder(this.getFace(".id-externalImage"), a.ClanEmblemItemBinder), this.clanMasterNameText = this.addChildBinder(".id-clanMasterName", s.DigitSlashDigitBinder), this.numberText = this.addChildBinder(".id-numberLabel", s.DigitSlashDigitBinder)
            }, t.prototype.update = function(e) {
                this.reduxProps.clanDetail !== e.clanDetail && this.setClanInfo(e.clanDetail)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    clanDetail: e.clan.clanInfo
                }
            }, t.prototype.setClanInfo = function(e) {
                var t = this;
                if (!e || e.disable) return this.face.visible = !1, !1;
                this.drawExternalImage(".id-externalImage", this.$filter("cdn_clan_emblem")(e.emblem)), this.face.visible = !0, this.clanNameText.text = e.name;
                var i = {
                    left: {
                        text: e.memberCount
                    },
                    slash: {
                        text: " / "
                    },
                    right: {
                        text: e.maxMemberCount
                    }
                };
                this.numberText.setProps(i), this.playerSnippetService.getSnippetAsync(e.masterPid).then(function(e) {
                    var i = t.$filter("template")({
                            value: e.level
                        }, "CLAN_CLANLIST_INFO_LEADERLV"),
                        n = {
                            left: {
                                text: i
                            },
                            slash: {
                                text: " "
                            },
                            right: {
                                text: e.name
                            }
                        };
                    t.clanMasterNameText.setProps(n)
                });
                var n = o.default.yyyymmdd(e.createdDate);
                return this.dateText.text = n.year + "." + n.month + "." + n.day, !0
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("playerSnippetService")], c.prototype, "playerSnippetService", void 0), n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), t.ClanDetailBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(604),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.selectItem = function(e) {
                var t = this;
                this.selectedIndex = e, this.listBinder.binders.forEach(function(e) {
                    e.face.selected = e.getProps().info.index === t.selectedIndex
                }), _.isEmpty(this.getSelectedItem()) || this.selectedItem && this.selectedItem(this.items[this.selectedIndex])
            }, t.prototype.getSelectedItem = function() {
                return this.items && this.selectedIndex >= 0 && this.selectedIndex < this.items.length ? this.items[this.selectedIndex] : null
            }, t.prototype.scrollToTopItem = function() {
                this.scrollBar.perfectScrollbar("update").scrollTop(0)
            }, t
        }(r.ScrollListBinder);
    t.ClanScrollListBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(326),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(t) {
                var i = this;
                e.prototype.onFaceReady.call(this, t);
                var n = t.tabInfos;
                _.forEach(n, function(e, t) {
                    var n = i.tabList[t];
                    if (n && e.swap) {
                        var r = n.htmlElement,
                            o = i.getFace(".id-sortingTitle" + (t + 1) + " .id-sortingTitle").htmlElement,
                            a = i.getFace(".id-sortingTitle" + (t + 1) + " .id-sortingArrow").htmlElement;
                        r.removeChild(a), r.insertBefore(a, o)
                    }
                })
            }, t.prototype.forceSortItems = function() {
                e.prototype.selectTab.call(this, this.selectedIndex, this.descending)
            }, t.prototype.firstSort = function(e) {
                var t = this.getProps().tabInfos;
                e && e(t[this.selectedIndex], this.descending)
            }, Object.defineProperty(t.prototype, "enableClick", {
                set: function(e) {
                    _.forEach(this.tabList, function(t) {
                        t.enabled = e
                    }), this.visible(".id-sortingTitle" + (this.selectedIndex + 1) + " .id-sortingArrow", e)
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(r.SortTabBinder);
    t.ClanSortTabBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = function() {
            function e() {}
            return e
        }();
    a.SELECTED_TAB = "event-selected-tab", t.SortTabUiEvent = a;
    var s = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            var t = this,
                i = e.tabInfos,
                n = e.initSelectedIndex,
                r = e.initDescending,
                a = e.disableMouseEvent,
                s = e.selectedTab,
                c = e.sortFun;
            this.tabList = [], _.forEach(i, function(e, i) {
                var n = t.getFace(".id-sortingTitle" + (i + 1));
                n.hasSize = !0, t.translate(n, e.title), a || t.on(n, o.MouseEventEx.CLICK, function(e) {
                    t.selectTab(i), s && s()
                }), t.tabList.push(n)
            }), this.sortFun = c, this.visibleAll(".SortingArrow", !a), this.selectTab(n || 0, r || !1)
        }, t.prototype.onAddedToScene = function() {
            $(".SortingTitle .id-textField").css("width", "auto"), $(".SortingArrow").css("transform", "translate(4px, -10px)")
        }, t.prototype.selectTab = function(e, t) {
            var i = this,
                n = this.getProps(),
                r = n.tabInfos,
                o = (n.initSelectedIndex, n.initDescending),
                a = n.disableMouseEvent;
            _.isUndefined(t) ? this.selectedIndex === e ? this.descending = !this.descending : this.descending = o : this.descending = t, this.selectedIndex = e, this.tabList.forEach(function(t, n) {
                t.selected = n === e;
                var r = t.$(".SortingArrow");
                i.gotoAndStop(r, i.descending ? "down" : "up"), a || i.visible(r, n === e)
            }), this.sortFun && this.sortFun(r[e], this.descending)
        }, t.prototype.getSelectedTabInfo = function() {
            return {
                tabInfo: this.getProps().tabInfos[this.selectedIndex],
                descending: this.descending
            }
        }, t
    }(r.Binder);
    t.SortTabBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(16),
        a = i(185),
        s = i(42),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.itemTag = this.getFace(".id-itemTag"), this.face.hasSize = !0
            }, t.prototype.update = function(e) {
                this.cardType = a.getItemCardType(e.info.type, e.info.code, this.tuningShopService), this.setImageInfo(e.info), this.setFavorite(e.isFavorite), this.setTag(e.isFinished), this.setCardType(this.cardType), this.bindBasicInfo(e.info), "vehicle" === this.cardType && this.bindVehicleInfo(e.info), "blueprint" === this.cardType && this.bindBlueprintInfo(e.info), "product" === this.cardType && this.bindProductInfo(e.info), "tuningColor" === this.cardType && this.bindTuningColorInfo(e.info), "numberPlate" === this.cardType && this.bindNumberPlate(e.info)
            }, Object.defineProperty(t.prototype, "name", {
                get: function() {
                    return this.props && this.props.info.name
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.setImageInfo = function(e) {
                if (e.img = void 0, "parts" === this.cardType) {
                    var t = "PARTS";
                    this.staticdataLoaderService.partsMaterialData[e.code] && (t = "MATERIAL"), e.img = this.$filter("itemCardImg")(t, e.code)
                }
                "tuningWrap" === this.cardType && (e.img = this.$filter("cdn_wrap")(e.code))
            }, t.prototype.setCardType = function(e) {
                this.gotoAndStop(".id-itemType", e)
            }, t.prototype.setTag = function(e) {
                e ? (this.itemTag.visible = !0, this.translate(this.itemTag, "AUCTION_TAG_SUCCESS")) : this.itemTag.visible = !1
            }, t.prototype.setFavorite = function(e) {
                this.getFace(".id-favoriteIcon").visible = !!e
            }, t.prototype.bindBasicInfo = function(e) {
                e.img = e.img ? e.img : this.$filter("itemCardImg")(e.type, e.code), this.bindNormalBasic(e)
            }, t.prototype.bindNormalBasic = function(e) {
                (e.img || e.fallbackImg) && this.drawExternalImage(".id-itemImage", e.img, e.fallbackImg)
            }, t.prototype.bindVehicleInfo = function(e) {}, t.prototype.bindBlueprintInfo = function(e) {}, t.prototype.bindProductInfo = function(e) {}, t.prototype.bindTuningColorInfo = function(e) {
                var t = this.tuningShopService.getTuningItemByCode(e.code);
                if (t) {
                    var i = this.getFace(".id-colorContainer .id-solid"),
                        n = this.getFace(".id-colorContainer .id-secondary");
                    i.hasSize = !0, n.hasSize = !0, i.setCustomStyle({
                        "background-color": t.rgb.solid
                    }), n.setCustomStyle({
                        "background-color": t.rgb.secondary
                    })
                }
            }, t.prototype.bindNumberPlate = function(e) {
                e.plate && this.addChildBinder(".id-itemType .id-numberplate", s.NumberPlateCard).setProps({
                    uniqueNumber: e.plate.plateNumber,
                    templateCode: e.plate.templateCode
                })
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([o.autowired("staticdataLoaderService")], c.prototype, "staticdataLoaderService", void 0), n.__decorate([o.autowired("tuningShopService")], c.prototype, "tuningShopService", void 0), t.AuctionItemBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(5);
    t.SERVER_TIME_THRESHOLD = 59, t.ONE_DAY_SECONDS = 86400;
    var r = function() {
        function e() {}
        return e.formatRemainTime = function(e) {
            var i = n.duration(e, "seconds").add(t.SERVER_TIME_THRESHOLD, "second"),
                r = _.toInteger(i.asHours()),
                o = i.get("minute");
            return _([r, o]).map(function(e) {
                return _.padStart(e.toString(), 2, "0")
            }).join(":")
        }, e.formatDateTime = function(e) {
            var t = n(e).locale("en");
            return {
                date: t.format("YYYY.MM.DD"),
                time: t.format("A hh:mm")
            }
        }, e
    }();
    t.AuctionUtil = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(3),
        a = i(93),
        s = i(2),
        c = i(8),
        d = i(327),
        l = i(197),
        u = i(104),
        p = i(4),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.auctionItemBinder = this.addChildBinder(".AuctionItem", d.AuctionItemBinder), this.face.on(s.MouseEventEx.CLICK, function() {
                    return e.onTranslateToWebLink()
                })
            }, t.prototype.update = function(e) {
                void 0 !== e.info.index && this.gotoAndStop(".id-background", e.info.index % 2 ? "even" : "odd"), this.updateNotification(e)
            }, t.prototype.updateNotification = function(e) {
                this.biddingDetail = e.info, this.itemDetail = o.store.getState().auction.autionItems[this.biddingDetail.auctionItemId], this.updateAuctionItem(), this.itemDetail.immediatePrice && this.biddingDetail.price >= this.itemDetail.immediatePrice ? this.template(".id-descriptionTextField", "AUCTION_ALARM_SUCCESS", {
                    productname: this.itemDetail.itemName,
                    mileage: p.default.toMoney(this.biddingDetail.price)
                }) : this.template(".id-descriptionTextField", "AUCTION_ALARM_BID", {
                    productname: this.itemDetail.itemName,
                    mileage: p.default.toMoney(this.biddingDetail.price)
                });
                var t = this.biddingDetail.playerName === o.store.getState().player.name ? this.$filter("template")({
                    name: this.biddingDetail.playerName
                }, "AUCTION_PLAYER_NAME") : this.biddingDetail.playerName;
                this.template(".id-nameTextField", "AUCTION_ALARM_PLAYER", {
                    playername: t
                })
            }, t.prototype.updateAuctionItem = function() {
                var e = {
                    plateNumber: this.itemDetail.instanceCode,
                    templateCode: this.itemDetail.itemCode
                };
                this.auctionItemBinder.setProps({
                    info: {
                        code: this.itemDetail.itemCode,
                        type: this.itemDetail.itemType,
                        img: void 0,
                        fallbackImg: void 0,
                        plate: "NUMBER_PLATE_INSTANCE" === this.itemDetail.itemType ? e : void 0,
                        count: 1
                    },
                    isFavorite: this.itemDetail.isFavorite,
                    isFinished: this.itemDetail.isFinished
                })
            }, t.prototype.onTranslateToWebLink = function() {
                this.auctionService.fetchBiddingsWithAuctionItemID(this.itemDetail.id, l.AuctionItemDetailPopupBinder.popUp.bind(this))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([r.autowired("auctionService")], h.prototype, "auctionService", void 0), t.AuctionNotificationItemBinder = h;
    var f = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.auctionNotificationListBinder = this.addChildBinder(".id-auctionNotificationWrap", u.LineScrollListBinder, {
                itemBinderClass: h,
                itemCountPerPage: 6
            }), this.hideListMC = this.getFace(".id-hideList"), this.hideListMC.on(c.EventEx.STOP, function(t) {
                e.onStop(t.currentTarget.currentLabel)
            })
        }, t.prototype.conditionalSetupCloseButton = function() {
            var e = this;
            if (!this.closeBtn) {
                var t = this.face.htmlElement,
                    i = document.createElement("div");
                i.className = "auction-notification-close";
                var n = $(t).offset();
                i.style.top = -n.top + "px", i.style.left = -n.left + "px", i.style.position = "absolute", i.style.opacity = "0", i.style.pointerEvents = "auto", this.closeBtn = document.createElement("button"), this.closeBtn.onclick = function(t) {
                    e.onMouseClick()
                }, this.closeBtn.style.width = document.body.offsetWidth + "px", this.closeBtn.style.height = document.body.offsetHeight + "px", i.appendChild(this.closeBtn);
                var r = this.face.$(".DropShadow").htmlElement;
                t.insertBefore(i, r)
            }
        }, t.prototype.mapStateToProps = function(e) {
            var t = e.auction;
            return {
                isNotificationListShown: t.isNotificationListShown,
                biddings: t.biddings,
                autionItems: t.autionItems
            }
        }, t.prototype.update = function(e) {
            var t = this.reduxProps;
            !0 === e.isNotificationListShown && !1 === t.isNotificationListShown ? (this.visibleAll(this.face, !0), this.gotoAndPlay(this.face, "over"), this.gotoAndPlay(this.hideListMC, "over"), this.conditionalSetupCloseButton(), this.auctionNotificationListBinder.scrollTop()) : !1 === e.isNotificationListShown && !0 === t.isNotificationListShown && (this.gotoAndPlay(this.face, "out"), this.gotoAndPlay(this.hideListMC, "out")), e.biddings === t.biddings && e.autionItems === t.autionItems || this.auctionNotificationListBinder.setProps({
                items: e.biddings
            })
        }, t.prototype.onMouseClick = function() {
            a.UpdateNotificationListDisplayStatus(!1)
        }, t.prototype.onStop = function(e) {
            "out" === e && this.visibleAll(this.face, !1)
        }, t
    }(r.Binder);
    t.AuctionNotificationContainerBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(5),
        o = i(1),
        a = i(1603),
        s = i(4),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.face.setCustomStyle({
                    position: "relative",
                    display: "inline-block"
                })
            }, t.prototype.update = function(e) {
                var t = e.rank,
                    i = e.name,
                    n = e.level,
                    o = e.bestLaptime,
                    a = e.updatedAt,
                    c = e.baseLaptime;
                this.bindTextAll(".id-rankNum .id-textField, .id-rankNum", s.default.numberWithCommas(t)), this.bindTextAll(".id-playerName", i), this.bindTextAll(".id-lapTime", s.default.formatLapTime(o)), n && this.bindTextAll(".id-level", "Lv." + n), a && this.bindTextAll(".id-date", r(a).format("YYYY.MM.DD")), this.bindDelta(c, o)
            }, t.prototype.bindDelta = function(e, t) {
                var i = t - e,
                    n = "";
                n = e && e !== t ? (i > 0 ? "+" : "-") + s.default.formatLapTime(Math.abs(i)) : "-", this.bindTextAll(".id-gapNum", n)
            }, t
        }(o.Binder);
    t.RecordItem = c;
    var d = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            e.prototype.onFaceReady.call(this), this.vehicle = this.addChildBinder(this.face, a.TimetrialVehicle)
        }, t.prototype.update = function(t) {
            e.prototype.update.call(this, t);
            var i = t.vehicle;
            i && this.vehicle.setProps(i)
        }, t
    }(c);
    t.DetailedRecordItem = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.on(".id-closeButton", o.MouseEventEx.CLICK, function() {
                    e.onClickClose()
                })
            }, t.prototype.openPopup = function() {
                this.gotoAndPlay(this.face, "in")
            }, t.prototype.closePopup = function() {
                this.gotoAndPlay(this.face, "out")
            }, t.prototype.update = function(e) {
                var t = this;
                if (_.isEmpty(e)) this.closePopup();
                else {
                    var i = this.updatePopup(e);
                    _.isEmpty(this.prevProps) && i.then(function() {
                        return t.openPopup()
                    })
                }
                this.prevProps = e
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("staticdataLoaderService")], a.prototype, "staticdata", void 0), n.__decorate([r.autowired("timetrialService")], a.prototype, "service", void 0), t.TimetrialPopupBase = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(this.face, !0), this.rewardInfoLabels = this.addChildBinder(".RewardInfoLabel, .id-rewardInfoLabel", r.CollectionBinder, {
                    instanceBinder: a
                })
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.info,
                    n = _.map(i, function(e) {
                        if ("string" == typeof e) return {
                            info: e
                        };
                        var i = t.$filter("rewardName")(e.type, e.code, e.count);
                        return "ITEM" !== e.type && "BLUEPRINT" !== e.type || (i += t.$filter("template")({
                            number: e.count
                        }, "BUNDLE_ITEM_COUNT")), {
                            info: i
                        }
                    });
                this.rewardInfoLabels.applyCollection(n)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), t.RewardInfoContainer = o;
    var a = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.hasSize(this.face, !1), this.hasSize(this.face.$(".id-textField"), !1)
        }, t.prototype.update = function(e) {
            var t = e.info;
            this.translate(this.face, t)
        }, t
    }(r.Binder)
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(e, t, i) {
    "use strict";

    function n(e) {
        return 100 === e.colorRedPercent && 0 === e.colorRedAmount && 100 === e.colorGreenPercent && 0 === e.colorGreenAmount && 100 === e.colorBluePercent && 0 === e.colorBlueAmount ? [] : [{
            name: "edge-color",
            value: [e.colorRedPercent / 100, e.colorGreenPercent / 100, e.colorBluePercent / 100, e.colorRedAmount, e.colorGreenAmount, e.colorBlueAmount].join(" ")
        }]
    }

    function r(e) {
        var t = [];
        return e.forEach(function(e) {
            if (!0 === e.enabled) {
                var i;
                switch (e.name) {
                    case "dropShadowFilter":
                        i = s(e);
                        break;
                    case "glowFilter":
                        i = c(e);
                        break;
                    case "blurFilter":
                        i = d(e);
                        break;
                    case "adjustColorFilter":
                        i = l(e)
                }
                Array.isArray(i) ? t = t.concat(i) : _.isObject(i) && t.push(i)
            }
        }), t
    }

    function o(e, t) {
        return {
            name: e,
            value: t.join(" ")
        }
    }

    function a(e) {
        var t = 0,
            i = 0;
        if ("dropShadowFilter" === e.name) {
            var n = e.angle || 0,
                r = n * Math.PI * 2 / 360;
            t = f(e.distance * Math.cos(r), 2), i = f(e.distance * Math.sin(r), 2)
        }
        return {
            offsetX: t,
            offsetY: i
        }
    }

    function s(e) {
        var t = e.strength,
            i = e.blurX,
            n = e.blurY;
        if ((0 !== i || 0 !== n) && 0 !== t) {
            var r = a(e),
                s = r.offsetX,
                c = r.offsetY,
                d = "drop-shadow",
                l = [u(e.color), s + "px", c + "px"];
            return v ? (d = "edge-" + d, l = l.concat([i + "px", n + "px", t, e.quality])) : l.push(Math.max(i, n) + "px"), o(d, l)
        }
    }

    function c(e) {
        var t = e.strength,
            i = e.blurX,
            n = e.blurY;
        if ((0 !== i || 0 !== n) && 0 !== t) {
            var r = "drop-shadow",
                a = [u(e.color)];
            return v ? (r = "edge-glow", a = a.concat([i + "px", n + "px", t, e.quality])) : a = a.concat(["0px", "0px", Math.max(i, n) + "px"]), o(r, a)
        }
    }

    function d(e) {
        var t = e.blurX,
            i = e.blurY;
        if (0 !== t || 0 !== i) {
            var n = "blur",
                r = null;
            return v ? (n = "edge-" + n, r = [t + "px", i + "px", e.quality]) : r = [Math.max(t, i) + "px"], o(n, r)
        }
    }

    function l(e) {
        var t = [],
            i = e.brightness;
        0 !== i && t.push({
            name: "brightness",
            value: f((i + 100) / 100, 3)
        });
        var n = e.contrast;
        0 !== n && t.push({
            name: "contrast",
            value: f((n + 100) / 100, 3)
        });
        var r = e.saturation;
        0 !== r && t.push({
            name: "saturate",
            value: f((r + 100) / 100, 3)
        });
        var o = e.hue;
        return 0 !== o && t.push({
            name: "hue-rotate",
            value: (o >= 0 ? o : o - 360) + "deg"
        }), t
    }

    function u(e) {
        var t = parseInt(e.substr(1, 6), 16),
            i = parseInt(e.substr(7), 16),
            n = t >> 16 & 255,
            r = t >> 8 & 255,
            o = 255 & t;
        return _.isNaN(i) ? "rgb(" + n + ", " + r + ", " + o + ")" : "rgba(" + n + ", " + r + ", " + o + ", " + f(i / 255, 3) + ")"
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var p = i(144),
        h = i(363),
        f = p.NumberUtil.fix,
        v = h.default.isEAWebKit,
        m = {
            normal: "normal",
            multiply: "multiply",
            screen: "screen",
            overlay: "overlay",
            hardlight: "hard-light",
            lighten: "lighten",
            darken: "darken",
            difference: "difference",
            add: "manual",
            subtract: "difference"
        },
        g = function() {
            function e() {}
            return e.getBlendModeStyle = function(e) {
                var t = e.blendMode;
                if (t && "normal" !== t) return "add" !== t || v || (t = "screen"), m[t]
            }, e.getFilterStyle = function(e) {
                var t, i = (n(e) || []).concat(r(e.filters || []));
                return i.length > 0 && (t = i.map(function(e) {
                    return e.name + "(" + e.value + ")"
                }).join(" ")), t
            }, e
        }();
    g.BLEND_MODE_NAME = v ? "-webkit-blend-mode" : "mix-blend-mode", t.EffectUtil = g, t.distanceToPosition = a, t.hexColorToRGBA = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = function() {
            function e() {}
            return Object.defineProperty(e, "isEAWebKit", {
                get: function() {
                    return n.isUndefined(e._isEAWebKit) ? (e._isEAWebKit = /EAWebKit/.test(navigator.userAgent), e._isEAWebKit) : e._isEAWebKit
                },
                enumerable: !0,
                configurable: !0
            }), e
        }();
    t.default = r
}, function(e, t, i) {
    "use strict";

    function n(e, t, i) {
        var n = TweenMax.to(e, t, i);
        return n.timeScale(o.Features.allowFrameSkip ? a : 1), n
    }

    function r(e, t, i, n) {
        var r = TweenMax.fromTo(e, t, i, n);
        return r.timeScale(o.Features.allowFrameSkip ? a : 1), r
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(107),
        a = 1 / 30;
    t.TweenMaxTo = n, t.TweenMaxFromTo = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(49),
        o = i(8),
        a = i(19),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._transparent = !0, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "transparent", {
                get: function() {
                    return this._transparent
                },
                set: function(e) {
                    if (this._transparent !== e) {
                        this._transparent = e;
                        var t = this.cssProxies[0];
                        e ? t.removeProperty("background-color") : t.setProperty("background-color", this.data.backgroundColor), this.addToRenderer()
                    }
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "zIndex", {
                get: function() {
                    return this._zIndex
                },
                set: function(e) {
                    if (this._zIndex !== e) {
                        this._zIndex = e;
                        var t = this.cssProxies[0];
                        void 0 === e ? t.removeProperty("z-index") : t.setProperty("z-index", this.zIndex), this.addToRenderer()
                    }
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.initializeClass = function(t) {
                e.prototype.initializeClass.call(this, t), this.htmlElement.classList.add("fc-container"), this.htmlElement.classList.add("stage-" + t.name.replace(/\.fla$/, ""))
            }, t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.mouseEnabled = !1
            }, t.prototype.detach = function() {
                this.emit(o.EventEx.DETACH)
            }, t
        }(r.default);
    s = n.__decorate([a.component("Stage")], s), t.Stage = s, t.default = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.DYNAMIC = "dynamic", n.INPUT = "input", t.TextFieldType = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(733),
        r = i(254),
        o = function() {
            function e(e, t, i) {
                this.name = e, this.items = {}, this.itemCtorMap = new n.ItemCtorMap(i), this.initialize(t)
            }
            return e.prototype.initialize = function(e) {
                for (var t = 0, i = e.items || []; t < i.length; t++) {
                    var n = i[t],
                        r = this.items[n.name] = {
                            data: n,
                            ctor: this.itemCtorMap.getConstructor(n)
                        },
                        o = n.linkageClassName;
                    o && (this.items[o] = r)
                }
            }, e.prototype.getItemByName = function(e) {
                return this.items[e]
            }, e.prototype.createItemInstance = function(e, t) {
                var i = this.items[t.libraryItemName];
                if (!i) throw new Error("invalid symbol name: " + t.libraryItemName);
                for (; i.data.import;) {
                    var n = r.SharedLibrary.get(i.data.import);
                    if (!n) throw new Error("Couldn't find referenced library [" + i.data.import+":" + t.libraryItemName + "] <= [" + e.screenName + "]");
                    var o = n.items[t.libraryItemName];
                    if (!o) throw new Error("Referenced library does not contain [" + i.data.import+":" + t.libraryItemName + "] <= [" + e.screenName + "]");
                    i = o
                }
                for (var a in i.data)(["name", "blendMode"].indexOf(a) < 0 || !t[a]) && (t[a] = i.data[a]);
                return new i.ctor(e, t).create()
            }, e
        }();
    t.Library = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(742),
        o = i(129),
        a = i(19),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.minThumbSize = 10, t.offsetBottom = 0, t.offsetTop = 0, t._direction = r.ScrollBarDirection.VERTICAL, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "direction", {
                get: function() {
                    return this._direction
                },
                set: function(e) {
                    this._direction = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "isHorizontal", {
                get: function() {
                    return this.direction === r.ScrollBarDirection.HORIZONTAL
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "scrollTarget", {
                get: function() {
                    return this._scrollTarget
                },
                set: function(e) {
                    this._scrollTarget = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "position", {
                get: function() {
                    return this._position
                },
                set: function(e) {
                    this._position = e
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.initialize = function() {
                e.prototype.initialize.call(this), this.thumb = this.getChildByName("thumb"), this.track = this.getChildByName("track")
            }, t
        }(o.UIComponent);
    s = n.__decorate([a.component("ScrollIndicator")], s), t.ScrollIndicator = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(366),
        o = i(129),
        a = i(208),
        s = i(2),
        c = i(19),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "displayAsPassword", {
                get: function() {
                    return this.textField.displayAsPassword
                },
                set: function(e) {
                    this.textField.displayAsPassword = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "maxLength", {
                get: function() {
                    return this.textField.maxLength
                },
                set: function(e) {
                    this.textField.maxLength = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "disabled", {
                get: function() {
                    return this.textField.disabled
                },
                set: function(e) {
                    this.textField.disabled = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "htmlText", {
                get: function() {
                    return this.textField.htmlText
                },
                set: function(e) {
                    this.textField.htmlText = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "length", {
                get: function() {
                    return this.textField ? this.textField.length : 0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "text", {
                get: function() {
                    return this.textField.text
                },
                set: function(e) {
                    this.textField.text = e
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.preInitialize = function() {
                e.prototype.preInitialize.call(this), this.handleFocusIn = this._handleFocusIn.bind(this), this.handleFocusOut = this._handleFocusOut.bind(this), this.handleMouseClick = this._handleMouseClick.bind(this), this.handleMouseOver = this._handleMouseOver.bind(this), this.handleMouseOut = this._handleMouseOut.bind(this)
            }, t.prototype.initialize = function() {
                e.prototype.initialize.call(this);
                var t = this.getChildByName("textField");
                t.htmlElement.setAttribute("ng-model", "myForm." + this.name.replace(/\//g, "")), console.assert(t.type === r.TextFieldType.INPUT), this.textField = t, t.addEventListener(a.FocusEventEx.FOCUS_IN, this.handleFocusIn), t.addEventListener(a.FocusEventEx.FOCUS_OUT, this.handleFocusOut), this.addEventListener(s.MouseEventEx.CLICK, this.handleMouseClick), this.addEventListener(s.MouseEventEx.MOUSE_OVER, this.handleMouseOver), this.addEventListener(s.MouseEventEx.MOUSE_OUT, this.handleMouseOut);
                var i = "true" === ((this.data.parameters || {}).displayAsPassword || {}).value;
                this.displayAsPassword = i
            }, t.prototype._handleFocusIn = function(e) {
                this.enabled && (this.focused = !0, this.gotoAndPlay("focused")), e.currentTarget = this, this.dispatchEvent(a.FocusEventEx.FOCUS_IN, e)
            }, t.prototype._handleFocusOut = function() {
                this.enabled && (this.focused = !1, this.gotoAndPlay("default"))
            }, t.prototype._handleMouseClick = function() {}, t.prototype._handleMouseOver = function() {
                this.enabled && !this.focused && this.gotoAndPlay("over")
            }, t.prototype._handleMouseOut = function() {
                this.enabled && !this.focused && this.gotoAndPlay("default")
            }, t.prototype.appendHtml = function(e) {
                this.htmlText += e
            }, t.prototype.appendText = function(e) {
                this.text += e
            }, t.prototype.destroy = function(t) {
                e.prototype.destroy.call(this, t), this.textField = void 0
            }, t
        }(o.UIComponent);
    d = n.__decorate([c.component("TextInput")], d), t.TextInput = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(211),
        o = i(127),
        a = i(371),
        s = i(372),
        c = i(19),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "frame", {
                get: function() {
                    return this._frame
                },
                set: function(e) {
                    this._frame !== e && (this._frame = e, this.invalidateState())
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.supportsScale9Grid = function() {
                return !0
            }, Object.defineProperty(t.prototype, "scale9Grid", {
                get: function() {
                    return this._parent ? this._parent.scale9Grid : this.data.scalingGridRect
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.initializeStyle = function(t) {
                if (e.prototype.initializeStyle.call(this, t), !t.bitmaps) {
                    var i = this.getImageProperties(t.path),
                        n = this.cssProxies[0];
                    Object.keys(i).forEach(function(e) {
                        return n.setProperty(e, i[e])
                    })
                }
            }, t.prototype.getImageProperties = function(e) {
                var t = s.ImageAtlasLibrary.findTile(this.data.screenName, e),
                    i = r.join(this.getUriPrefix(), t && t.sprite || e),
                    n = {};
                return a.default.exists(this.data.screenName, e) ? n["-edge-surface-ref"] = t ? [i, t.x, t.y, t.width, t.height] : [i] : (n["background-image"] = "url('" + i + "')", t && (n["background-position"] = "-" + t.x + "px -" + t.y + "px")), n
            }, Object.defineProperty(t.prototype, "width", {
                get: function() {
                    return this.data.hPixels
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "height", {
                get: function() {
                    return this.data.vPixels
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.initializeProperties = function(t) {
                var i = this;
                if (e.prototype.initializeProperties.call(this, t), this.hasSize = !0, t.bitmaps) {
                    var n = t.bitmaps;
                    this.frameMap = {}, Object.keys(n).forEach(function(e) {
                        i.frameMap[e] || (i.frameMap[e] = i.getImageProperties(n[e]))
                    }), this.frame = 0
                }
            }, t.prototype.cloneProperties = function(t) {
                e.prototype.cloneProperties.call(this, t);
                var i = t;
                i.frameMap && (this.frameMap = i.frameMap, this.frame = i.frame)
            }, t.prototype.drawState = function() {
                e.prototype.drawState.call(this);
                var t = this.frame,
                    i = this.frameMap || {},
                    n = i[t];
                if (n) {
                    var r = this.cssProxies[0];
                    Object.keys(n).forEach(function(e) {
                        return r.setProperty(e, n[e])
                    })
                }
            }, t.prototype.getBackground = function() {
                return "url(" + r.join(this.getUriPrefix(), this.data.path) + ")"
            }, t.prototype.getUriPrefix = function() {
                return r.join("images", this.data.screenName)
            }, t
        }(o.DisplayObject);
    d = n.__decorate([c.component("Bitmap")], d), t.Bitmap = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e.register = function(t, i) {
            "string" == typeof i && (i = [i]);
            for (var n = e.map[t] || (e.map[t] = {}), r = 0, o = i; r < o.length; r++) {
                n[o[r]] = !0
            }
        }, e.unregister = function(t) {
            var i = e.map[t];
            if (i) return delete e.map[t], Object.keys(i)
        }, e.exists = function(t, i) {
            return e.map[t] && e.map[t].hasOwnProperty(i)
        }, e
    }();
    n.map = {}, t.default = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e.hasDataFor = function(e) {
            return this.libraries.hasOwnProperty(e)
        }, e.register = function(e, t) {
            this.libraries[e] = t
        }, e.findTile = function(e, t) {
            var i = this.libraries[e];
            return i && i.tiles[t]
        }, e
    }();
    n.libraries = {}, t.ImageAtlasLibrary = n
}, function(e, t, i) {
    angular.module("edge.components").directive("egDraggable", i(753)).directive("egEnter", i(754)).directive("egKeyInput", i(755)).directive("egScene", i(756)).directive("egFallbackSrc", i(757)).directive("egLazyScene", i(758)).directive("egScroll", i(759))
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        e.on("keypress keydown", function(e) {
            13 === e.which && (e.preventDefault(), "keydown" === e.type && t())
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = n
}, , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.AUTH, e)
    };
    ! function(e) {
        e[e.BannedAccount = 4] = "BannedAccount"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.CIRCUIT, e)
    };
    ! function(e) {
        e[e.NotEnoughInstance = 2] = "NotEnoughInstance", e[e.InvalidArgument = 3] = "InvalidArgument", e[e.InvalidDediInstanceState = 4] = "InvalidDediInstanceState", e[e.VersionMismatched = 6] = "VersionMismatched", e[e.NotSupportedLevel = 7] = "NotSupportedLevel", e[e.AssignFailed = 8] = "AssignFailed", e[e.MissingReplyQueue = 11] = "MissingReplyQueue", e[e.TerminatedWhileSpawning = 12] = "TerminatedWhileSpawning", e[e.TerminatedWhileAssigning = 13] = "TerminatedWhileAssigning", e[e.TerminatedWhileGameEndProgressing = 14] = "TerminatedWhileGameEndProgressing", e[e.TerminatedWhileGamePlayProgressing = 15] = "TerminatedWhileGamePlayProgressing"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.NoPlayerHasThatName = 1] = "NoPlayerHasThatName", e[e.CanNotInviteMySelf = 2] = "CanNotInviteMySelf", e[e.TargetIsAlreadyFriend = 3] = "TargetIsAlreadyFriend", e[e.InvitesFull = 4] = "InvitesFull", e[e.ReceiverInvitesFull = 5] = "ReceiverInvitesFull", e[e.AlreadyInvited = 6] = "AlreadyInvited", e[e.InviteConflict = 7] = "InviteConflict", e[e.AcceptFailedInviteNotFound = 10] = "AcceptFailedInviteNotFound", e[e.InviteStateIsNotReceived = 11] = "InviteStateIsNotReceived", e[e.AcceptFailedInviteNotOwned = 12] = "AcceptFailedInviteNotOwned", e[e.FriendsFull = 13] = "FriendsFull", e[e.ReceiverFriendsFull = 14] = "ReceiverFriendsFull", e[e.CancelFailedInviteNotFound = 20] = "CancelFailedInviteNotFound", e[e.CancelFailedInviteNotOwned = 21] = "CancelFailedInviteNotOwned", e[e.RemoveFailedFriendNotFound = 30] = "RemoveFailedFriendNotFound", e[e.FriendNotOwned = 31] = "FriendNotOwned", e[e.SetFavoriteFailedFriendNotFound = 40] = "SetFavoriteFailedFriendNotFound", e[e.DuplicateKey = 9e3] = "DuplicateKey"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.MATCH2, e)
    };
    ! function(e) {
        e[e.MatchIdShouldBeZero = 1] = "MatchIdShouldBeZero", e[e.GameModeDoesNotExist = 2] = "GameModeDoesNotExist", e[e.MatchTypeIsNotDefined = 3] = "MatchTypeIsNotDefined", e[e.MatchDoesNotExist = 4] = "MatchDoesNotExist", e[e.VersionMismatched = 6] = "VersionMismatched", e[e.WrongMatchState = 7] = "WrongMatchState", e[e.TrackDBDoesNotExist = 8] = "TrackDBDoesNotExist", e[e.ClientsVersionLengthIsNotOne = 9] = "ClientsVersionLengthIsNotOne", e[e.SomeOfPaintPropertyIsMissing = 10] = "SomeOfPaintPropertyIsMissing", e[e.NotSupportedLevel = 11] = "NotSupportedLevel", e[e.AssignFailed = 12] = "AssignFailed", e[e.CircuitMessageTypeIsNotDefined = 9001] = "CircuitMessageTypeIsNotDefined", e[e.NoSessionPidWhenPlayerLeavesTheMatch = 9002] = "NoSessionPidWhenPlayerLeavesTheMatch"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.SESSION, e)
    };
    ! function(e) {
        e[e.SessionAlreadySet = 1] = "SessionAlreadySet", e[e.MissingSid = 2] = "MissingSid", e[e.MissingAid = 3] = "MissingAid", e[e.SessionLimitExceed = 4] = "SessionLimitExceed", e[e.DuplicatedLogin = 5] = "DuplicatedLogin", e[e.SessionUpdateFailed = 6] = "SessionUpdateFailed", e[e.SessionNotExist = 7] = "SessionNotExist", e[e.SessionAlreadySet2 = 8] = "SessionAlreadySet2", e[e.SessionAlreadySet3 = 9] = "SessionAlreadySet3", e[e.SessionClearFailed = 10] = "SessionClearFailed"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.TENCENT, e)
    };
    ! function(e) {
        e[e.QqidNotExist = 101] = "QqidNotExist", e[e.SidNotExist = 102] = "SidNotExist", e[e.RemoteIpNotExist = 103] = "RemoteIpNotExist", e[e.UinNotExist = 104] = "UinNotExist", e[e.SessionNotFound = 105] = "SessionNotFound", e[e.InvalidSession = 106] = "InvalidSession", e[e.FailedAuthentication = 107] = "FailedAuthentication", e[e.SessionNotFound2 = 108] = "SessionNotFound2", e[e.InvalidSession2 = 109] = "InvalidSession2", e[e.ErrorMessageNotAllowed = 110] = "ErrorMessageNotAllowed", e[e.SessionNotFound3 = 111] = "SessionNotFound3", e[e.InvalidSession3 = 112] = "InvalidSession3", e[e.SessionNotFound4 = 113] = "SessionNotFound4", e[e.InvalidSession4 = 114] = "InvalidSession4", e[e.DocumentNotExist = 115] = "DocumentNotExist", e[e.InvalidIdipParameterByMissingLimitOnlineNum = 116] = "InvalidIdipParameterByMissingLimitOnlineNum", e[e.InvalidIdipCmdId = 117] = "InvalidIdipCmdId", e[e.InvalidAntiSequence = 118] = "InvalidAntiSequence", e[e.AlreadyLogin = 119] = "AlreadyLogin", e[e.UserInfoNotFound = 120] = "UserInfoNotFound", e[e.UserInfoNotExist = 121] = "UserInfoNotExist", e[e.InvalidData = 122] = "InvalidData", e[e.InvalidIdipParameterEndDate = 123] = "InvalidIdipParameterEndDate", e[e.ProtectedUser = 124] = "ProtectedUser", e[e.SessionNotExistOnRedis = 1] = "SessionNotExistOnRedis", e[e.SessionNotExistOnRedis2 = 2] = "SessionNotExistOnRedis2", e[e.InvalidSession5 = 3] = "InvalidSession5", e[e.UserSessionMappingNotFound = 4] = "UserSessionMappingNotFound", e[e.UserSessionMappingNotFound2 = 5] = "UserSessionMappingNotFound2", e[e.SessionNotExistOnRedis3 = 6] = "SessionNotExistOnRedis3", e[e.FailedAuthentication2 = 7] = "FailedAuthentication2", e[e.SessionNotExistOnRedis4 = 8] = "SessionNotExistOnRedis4", e[e.PlayerNotExist = 9] = "PlayerNotExist", e[e.AccountNotExist = 10] = "AccountNotExist", e[e.FailedInitAuthManager = 11] = "FailedInitAuthManager", e[e.FailedInitSsoManager = 12] = "FailedInitSsoManager", e[e.FailedAasLogin = 13] = "FailedAasLogin", e[e.NotImplementedError = 14] = "NotImplementedError", e[e.TencentUserRelatedToPidForCashDoesNotExist = 15] = "TencentUserRelatedToPidForCashDoesNotExist", e[e.FailedToGetInfo = 16] = "FailedToGetInfo", e[e.FailedToCreateSession = 17] = "FailedToCreateSession", e[e.FailedToRemoveSession = 18] = "FailedToRemoveSession", e[e.MissingTdirServerConfig = 19] = "MissingTdirServerConfig"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.EventEmitterMaxListeners = 20, t.TweenMaxFps = 30, t.globalTimeScale = 30, t.MapStreamToReleaseForSentry = {
        dl: "dl",
        ml: "ml",
        "rl.kr.ob": "kr",
        "rl.cn.cb": "cn"
    };
    ! function(e) {
        e[e.L0001_TEMP = 1] = "L0001_TEMP", e[e.L0002_NO_SCOPE = 2] = "L0002_NO_SCOPE", e[e.L0003_MISSING_SESSION_OR_ACCOUNT = 3] = "L0003_MISSING_SESSION_OR_ACCOUNT", e[e.L0004_DO_NOT_HAVE_PERMISSION = 4] = "L0004_DO_NOT_HAVE_PERMISSION", e[e.L0005_NOT_ALLOWED_METHOD = 5] = "L0005_NOT_ALLOWED_METHOD", e[e.L0006_ENDPOINT_UNREGISTERED = 6] = "L0006_ENDPOINT_UNREGISTERED", e[e.L0007_SESSION_EXPIRED = 7] = "L0007_SESSION_EXPIRED", e[e.L0008_QUERY_PARAMETERS_VERIFICATION_FAILED = 8] = "L0008_QUERY_PARAMETERS_VERIFICATION_FAILED", e[e.L0009_BODY_PARAMETERS_VERIFICATION_FAILED = 9] = "L0009_BODY_PARAMETERS_VERIFICATION_FAILED", e[e.L0010_METHOD_NOT_ALLOWED_ERROR = 10] = "L0010_METHOD_NOT_ALLOWED_ERROR", e[e.L0011_SESSION_PARAMETERS_VERIFICATION_FAILED = 11] = "L0011_SESSION_PARAMETERS_VERIFICATION_FAILED", e[e.L0012_PARAMS_PARAMETERS_VERIFICATION_FAILED = 12] = "L0012_PARAMS_PARAMETERS_VERIFICATION_FAILED", e[e.L0013_PUSH_CONNECTION_FAILED = 13] = "L0013_PUSH_CONNECTION_FAILED", e[e.L0014_USED_REFRESH_TOKEN_TO_AUTH = 14] = "L0014_USED_REFRESH_TOKEN_TO_AUTH", e[e.L0015_TOKEN_REVOKED = 15] = "L0015_TOKEN_REVOKED", e[e.L0016_REMOTE_IP_DENIED = 16] = "L0016_REMOTE_IP_DENIED", e[e.L0017_REMOTE_IP_NOT_ALLOWED = 17] = "L0017_REMOTE_IP_NOT_ALLOWED", e[e.L0018_USER_PARAMETERS_VERIFICATION_FAILED = 18] = "L0018_USER_PARAMETERS_VERIFICATION_FAILED", e[e.L0019_WATCH_DUPLICATED = 19] = "L0019_WATCH_DUPLICATED"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.NEXON, e)
    };
    ! function(e) {
        e[e.UserSessionMappingWasNotFoundBecauseItWasDeprecated = 1] = "UserSessionMappingWasNotFoundBecauseItWasDeprecated", e[e.PlayerWasNotFound = 2] = "PlayerWasNotFound", e[e.FailedToUpdateCharacterMirroringBecauseNexonSerialNumberDoesNotExist = 3] = "FailedToUpdateCharacterMirroringBecauseNexonSerialNumberDoesNotExist", e[e.FailedToDeleteCharacterMirroringBecauseNexonSerialNumberDoesNotExist = 4] = "FailedToDeleteCharacterMirroringBecauseNexonSerialNumberDoesNotExist", e[e.CharacterMirroringUpdateRequestError = 5] = "CharacterMirroringUpdateRequestError", e[e.CharacterMirroringDeleteRequestError = 6] = "CharacterMirroringDeleteRequestError", e[e.UserSessionMappingWasNotFound = 7] = "UserSessionMappingWasNotFound", e[e.CannotFindNexonUserWhenGetNxCash = 8] = "CannotFindNexonUserWhenGetNxCash", e[e.CannotFindNexonUserWhenPurchaseWithNxCash = 9] = "CannotFindNexonUserWhenPurchaseWithNxCash", e[e.SendUserWasNotFound = 10] = "SendUserWasNotFound", e[e.ReceiveUserWasNotFound = 11] = "ReceiveUserWasNotFound", e[e.CharacterMirroringFailed = 12] = "CharacterMirroringFailed", e[e.ChargeUrlWasNotFound = 13] = "ChargeUrlWasNotFound", e[e.SSOAuthFailed = 14] = "SSOAuthFailed", e[e.SSOAuthRejectedByForcedShutdown = 15] = "SSOAuthRejectedByForcedShutdown", e[e.DelayLoginsMigrationNeverComplete = 16] = "DelayLoginsMigrationNeverComplete", e[e.ShopHasNoOpts = 17] = "ShopHasNoOpts", e[e.ShopRequiresGameCode = 18] = "ShopRequiresGameCode", e[e.ShopInitFailed = 19] = "ShopInitFailed", e[e.ShopNeedNexonSn = 20] = "ShopNeedNexonSn", e[e.ShopSoapClientNotInitialized = 21] = "ShopSoapClientNotInitialized", e[e.ShopNoMethod = 22] = "ShopNoMethod", e[e.ShopNetworkDelay = 23] = "ShopNetworkDelay", e[e.ShopSoapMethodResponse = 24] = "ShopSoapMethodResponse", e[e.ShopFailedToGetCashInventoryItemList = 25] = "ShopFailedToGetCashInventoryItemList", e[e.ShopInvalidOrder = 26] = "ShopInvalidOrder", e[e.ShopPurchaseError = 27] = "ShopPurchaseError", e[e.ShopNotFound = 28] = "ShopNotFound", e[e.ShopRefundFailed = 29] = "ShopRefundFailed", e[e.ShopItemNotFound = 30] = "ShopItemNotFound", e[e.ShopPresentError = 31] = "ShopPresentError", e[e.ShopNotSupportedPublisher = 32] = "ShopNotSupportedPublisher", e[e.NexonSessionEventTypeDoseNotExists = 40] = "NexonSessionEventTypeDoseNotExists", e[e.SsoNgmArgumentsExpired = 41] = "SsoNgmArgumentsExpired", e[e.SsoNgmArgumentsAbnormal = 42] = "SsoNgmArgumentsAbnormal", e[e.CharacterMirroringFailed1 = 901] = "CharacterMirroringFailed1", e[e.SessionDoesNotExist = 902] = "SessionDoesNotExist", e[e.CharacterMirroringFailed2 = 903] = "CharacterMirroringFailed2", e[e.FailedToUpdateCharacterMirroring = 904] = "FailedToUpdateCharacterMirroring", e[e.FailedToDeleteCharacterMirroring = 905] = "FailedToDeleteCharacterMirroring", e[e.SessionNoToSidMapDoesNotExist = 906] = "SessionNoToSidMapDoesNotExist"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(47);
    t.toCode = function(e) {
        return n.ResponseErrorCode.toCode(n.IslandCodes.OPENWORLD, e)
    };
    ! function(e) {
        e[e.ErrorToError = 1] = "ErrorToError", e[e.NotMatchedCurrentCampaignCode = 11] = "NotMatchedCurrentCampaignCode", e[e.CampaignStatusIsInProgressOrCompleted = 12] = "CampaignStatusIsInProgressOrCompleted", e[e.CampaignStatusIsNotStartedOrCompleted = 13] = "CampaignStatusIsNotStartedOrCompleted", e[e.CampaignTaskNotCompleted = 14] = "CampaignTaskNotCompleted", e[e.TaskCodeNotExists = 15] = "TaskCodeNotExists", e[e.InvalidCampaignData = 16] = "InvalidCampaignData", e[e.UpdateFailedPlayerCampaignTaskData = 17] = "UpdateFailedPlayerCampaignTaskData", e[e.InvalidMissionData = 31] = "InvalidMissionData", e[e.PlayerMissionDataNotExists = 32] = "PlayerMissionDataNotExists", e[e.UpdateFailedPlayerMissionData = 33] = "UpdateFailedPlayerMissionData", e[e.NotUnlockedMissionCode = 34] = "NotUnlockedMissionCode", e[e.InvalidSpotData = 41] = "InvalidSpotData", e[e.UpdateFailedPlayerSpotData = 42] = "UpdateFailedPlayerSpotData", e[e.PlayerSoptDataNotExists = 43] = "PlayerSoptDataNotExists", e[e.CannotReserveChannelId = 101] = "CannotReserveChannelId", e[e.CannotConvertOpenworldPlayer = 102] = "CannotConvertOpenworldPlayer", e[e.NotExistsChannelId = 103] = "NotExistsChannelId", e[e.NotBelongToAnyChannel = 104] = "NotBelongToAnyChannel", e[e.QuizEntryDoesNotExist = 501] = "QuizEntryDoesNotExist", e[e.QuizAlreadyExist = 502] = "QuizAlreadyExist", e[e.QuizEntryAlreadyExist = 503] = "QuizEntryAlreadyExist", e[e.QuizRiddleAlreadyExist = 504] = "QuizRiddleAlreadyExist", e[e.QuizDoesNotExist = 505] = "QuizDoesNotExist", e[e.QuizRiddleDoesNotExist = 506] = "QuizRiddleDoesNotExist", e[e.InvalidQuizPeriod = 511] = "InvalidQuizPeriod", e[e.InvalidQuizCategory = 512] = "InvalidQuizCategory", e[e.InvalidQuizBonus = 513] = "InvalidQuizBonus", e[e.InvalidQuizReward = 514] = "InvalidQuizReward", e[e.InvalidQuizPoint = 515] = "InvalidQuizPoint", e[e.InvalidQuizRiddleCategory = 516] = "InvalidQuizRiddleCategory", e[e.QuizEntryStartAtIsPast = 517] = "QuizEntryStartAtIsPast", e[e.QuizRiddleDoesNotExistInGivenEntry = 518] = "QuizRiddleDoesNotExistInGivenEntry", e[e.SomeOfPaintPropertyIsMissing = 1001] = "SomeOfPaintPropertyIsMissing"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        a.server = new Date(e).valueOf(), a.local = Date.now()
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(4),
        o = i(5),
        a = {
            local: Date.now()
        };
    t.syncTime = n;
    var s = function() {
        function e() {}
        return Object.defineProperty(e.prototype, "time", {
            get: function() {
                return a.server ? new Date(a.server + (Date.now() - a.local)) : (log.trace("ServerTime was not synchronized. return local time"), new Date)
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.getRemainingTime = function(e) {
            var t = this.getRemainingDuration(e);
            return {
                day: Math.floor(t.asDays()),
                hour: t.hours(),
                minute: t.minutes(),
                second: t.seconds(),
                timestamp: t.asMilliseconds()
            }
        }, e.prototype.getRemainingDuration = function(e) {
            var t = o(this.time);
            return o.duration(o(e).diff(t))
        }, e
    }();
    t.ServerTimeService = s, t.default = s, angular.module("edge.components").factory("serverTimeService", r.default.generateService(s))
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.Friend = 1] = "Friend", e[e.Chat = 2] = "Chat"
    }(t.Tab || (t.Tab = {}))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return !o[e]
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = ["time", "rank", "laptime", "completionrate", "topspeed", "safedriving", "takedowntime", "durabilitystay", "lowesthp", "lowestHpRatio", "maxHp", "mileage", "speed"].reduce(function(e, t) {
            return r.__assign({}, e, (i = {}, i[t] = !0, i));
            var i
        }, {});
    t.isRecordTypeArray = n;
    ! function(e) {
        e[e.Vehicle = 0] = "Vehicle", e[e.Weapon = 1] = "Weapon", e[e.Unknown = -1] = "Unknown"
    }(t.DestroyAttacker || (t.DestroyAttacker = {}))
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "parts.fetch",
            parts: e
        }
    }

    function r(e) {
        return {
            type: "parts.update",
            part: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.fetch = n, t.update = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e(e, t) {
            this.scope = e, this.emitter = t
        }
        return e.prototype.on = function(e, t) {
            var i = this;
            return this.emitter.on(e, t), this.scope.$on("$destroy", function() {
                return i.emitter.removeListener(e, t)
            }), this
        }, e.prototype.once = function(e, t) {
            var i = this;
            return this.emitter.once(e, t), this.scope.$on("$destroy", function() {
                return i.emitter.removeListener(e, t)
            }), this
        }, e
    }();
    t.default = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(202),
        o = i(150),
        a = i(131),
        s = i(4),
        c = i(3),
        d = i(213),
        l = i(10),
        u = i(151),
        p = i(285),
        h = i(39),
        f = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.logPrefix = "quick", t
            }
            return n.__extends(t, e), t.prototype.init = function(e) {
                this._isMatchAbandoned = !1, this.featureType = "quick", this.pushService.on("msg", this._onMessage), log.info(">>> " + this.logPrefix + "MatchService push handler installed"), "SPEEDTEAM" === e ? this.initTeamMatchEndPushListener() : this.initMatchEndPushListener()
            }, t.prototype.destroy = function() {
                this.pushService.removeListener("msg", this._onMessage), log.info("<<< QuickMatchService push handler removed"), this.cleanUp.forEach(function(e) {
                    return e()
                }), this.cleanUp = []
            }, t.prototype.initMatchEndPushListener = function() {
                var e = this;
                this.cleanUp.push(this.pushService.subscribeResource(/\/v2\/room2s\/matchmaking\/matchend$/, function(e, t) {
                    log.info("/v2/room2s/matchmaking/matchend"), console.dir(t), c.store.dispatch(a.endMatch(t.body))
                })), this.cleanUp.push(this.pushService.subscribeResource(/\/v2\/room2s\/matchmaking\/matchend\/(.*)\/reward/, function(t, i) {
                    log.info("/v2/room2s/matchmaking/matchend/(.*)/reward"), console.dir(i), c.store.dispatch(a.receiveReward(i.body)), c.store.dispatch(o.reserveMatchReward(i.body)), e.resolveReward()
                }))
            }, t.prototype.initTeamMatchEndPushListener = function() {
                var e = this;
                this.cleanUp.push(this.pushService.subscribeResource(/room2\.team\.matchend/, function(t, i) {
                    log.info("/v2/room2.team.matchend"), console.dir(i), c.store.dispatch(a.endMatch(i.body, e.calculateTeamBattleScore(i.body)))
                })), this.cleanUp.push(this.pushService.subscribeResource(/room2\.team\.reward/, function(t, i) {
                    log.info("/v2/room2.team.reward"), console.dir(i), c.store.dispatch(a.receiveReward(i.body)), c.store.dispatch(o.reserveMatchReward(i.body)), e.resolveReward()
                }))
            }, t.prototype.requestDeleteFeature = function() {}, t.prototype.cleanupOnConnectionError = function() {
                var e = c.store.getState().player.id;
                return l.request("DELETE", "match2/players/" + e), "root.menu.MultiplayQuickMatch"
            }, t.prototype.clearMatchState = function() {
                this.isSuperPeer = !1, this.records = [], this.foxhuntingWinner = void 0, this.foxhuntingWinType = h.FoxhuntingWinType.FinishTrack, this.recordService.distanceList = {}, this.recordService.initRecord(), this.removeHandler(), this.deferredRewarded && this.deferredRewarded.reject(new Error("clearMatchState")), this.deferredFinished && this.deferredFinished.reject(new Error("clearMatchState")), this.cancelServerTimeout(), c.store.dispatch(u.leaveMatch())
            }, t.prototype.createMatch = function(t) {
                e.prototype.createMatch.call(this, t), c.store.dispatch(p.setLastTrackCode(t.trackCode))
            }, t.prototype.onPlayerLeft = function(e) {
                var t = this;
                this.playerSnippetService.getSnippetAsync(e).then(function(e) {
                    t.worldChatService.printRoomSystemMsg(e, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_EXIT")
                })
            }, t
        }(d.default);
    t.QuickMatchService = f, r.module("edge.components").factory("quickMatchService", s.default.generateService(f))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(22),
        o = i(4),
        a = i(3),
        s = i(68),
        c = i(9);
    t.screenDataWidth = 1920, t.screenDataHeight = 1080;
    var d = function() {
        function e(e, t) {
            var i = this;
            this.$filter = e, this.externalService = t, this.presetCache = {}, this.readAvailableResolutions(), this.externalService.on(c.default.beSyncViewScale, function() {
                var e = i.getConfig();
                i.applyViewScale(e), a.store.dispatch(s.update("graphic", e))
            })
        }
        return Object.defineProperty(e.prototype, "translateX", {
            get: function() {
                return this._translateX
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.getRatio = function(e, t, i) {
            void 0 === i && (i = !1);
            var n = [{
                    w: 16,
                    h: 10,
                    label: "16:10 Wide"
                }, {
                    w: 16,
                    h: 9,
                    label: "16:9 Wide"
                }, {
                    w: 5,
                    h: 3,
                    label: "5:3 Wide"
                }, {
                    w: 4,
                    h: 3,
                    label: "4:3"
                }],
                o = r(n).map(function(i) {
                    return {
                        score: Math.abs(i.w / i.h - e / t),
                        ratio: i
                    }
                }).sortBy(function(e) {
                    return e.score
                }).value()[0],
                a = o.score,
                s = o.ratio;
            return i && s || a < .001 && s
        }, e.prototype.readAvailableResolutions = function() {
            var e = this,
                t = this.externalService.beGetAvailableResolutions();
            t.length || (n.error("beGetAvailableResolutions() returned empty list."), t = t.concat(["1280X800", "1280X720", "1024X768"])), this.resolutions = r.filter(r.map(t, function(t) {
                var i = t.split("X"),
                    n = parseInt(i[0], 10),
                    r = parseInt(i[1], 10),
                    o = e.getRatio(n, r);
                return o && {
                    text: n + " X " + r + " (" + o.label + ")",
                    width: n,
                    height: r
                }
            }), function(e) {
                return e
            })
        }, e.prototype.getResolutions = function() {
            return this.resolutions
        }, e.prototype.getFrameLimits = function() {
            var e = this.$filter("translate");
            return [{
                mode: 0,
                text: e("GAMEOPTION_GRAPHIC_FRAME_DISPLAY")
            }, {
                mode: 1,
                text: e("GAMEOPTION_GRAPHIC_FRAME_30")
            }, {
                mode: 2,
                text: e("GAMEOPTION_GRAPHIC_FRAME_CUSTOM")
            }]
        }, e.prototype.prepareDisplayModes = function() {
            var e = this.$filter("translate"),
                t = [{
                    str: "GAMEOPTION_GRAPHIC_RESOLUTION_WINDOW",
                    mode: 0
                }];
            this.getConfig().preventBorderless || t.push({
                str: "GAMEOPTION_GRAPHIC_RESOLUTION_BORDERLESS",
                mode: 2
            }), this.getConfig().preventFullscreen || t.push({
                str: "GAMEOPTION_GRAPHIC_RESOLUTION_FULL",
                mode: 1
            }), this.displayModes = t.map(function(t) {
                var i = t.str,
                    n = t.mode;
                return {
                    text: e(i),
                    mode: n
                }
            })
        }, e.prototype.getDisplayModes = function() {
            return this.displayModes || this.prepareDisplayModes(), this.displayModes
        }, Object.defineProperty(e.prototype, "scaleRatio", {
            get: function() {
                return this._scaleRatio
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.applyViewScale = function(e) {
            n.info("graphic config: " + JSON.stringify(e));
            var i = e.fullscreen,
                r = e.clientWidth,
                o = e.clientHeight,
                a = e.width,
                s = e.height,
                c = 2 === i;
            c && (a = r, s = o);
            var d = a,
                l = s;
            0 === i && (r < d || o < l) && (d = r, l = o);
            var u = this._scaleRatio = l / t.screenDataHeight,
                p = this.getRatio(d, l, c),
                h = t.screenDataHeight / p.h * p.w;
            if (this._translateX = (h - t.screenDataWidth) / 2, angular.element("body").css("-webkit-transform", "scale(" + u + ") translate(" + this.translateX + "px, 0px)"), n.info("applyViewScale: " + u + " " + d + " " + l + " " + (p ? p.label : "unsupported resolution") + " " + this.translateX), !p) return void n.warn("unsupported resolution", d, l);
            var f = "ratio-Ratio" + p.w + "x" + p.h;
            angular.element("#edge-ui").attr("data-ratio", f)
        }, e.prototype.getConfig = function() {
            return this.externalService.beGetConfiguration("graphic")
        }, e.prototype.setConfig = function(e) {
            this.externalService.beSetConfiguration("graphic", e), a.store.dispatch(s.update("graphic", e)), this.applyViewScale(e)
        }, e.prototype.getDefaultConfig = function() {
            return this.externalService.beGetDefaultConfiguration("graphic")
        }, e.prototype.setInitialViewScale = function() {
            this.applyViewScale(this.getConfig())
        }, e.prototype.getGraphicPreset = function(e) {
            return this.presetCache[e] || (this.presetCache[e] = this.externalService.beGetGraphicFeature(e)), this.presetCache[e]
        }, e.prototype.init = function() {
            var e = {
                id: "graphic",
                applied: this.getConfig(),
                default: this.getDefaultConfig(),
                isActive: !0
            };
            a.store.dispatch(s.addItem(e))
        }, e
    }();
    d.$inject = ["$filter", "externalService"], t.GraphicConfigService = d, angular.module("edge.components").factory("graphicConfigService", o.default.generateService(d))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(7),
        o = i(174),
        a = i(4),
        s = i(287),
        c = i(10),
        d = i(539),
        l = function() {
            function e(e, t, i, n, r, o, a, s, c, d, l, u, p, h) {
                this.$location = e, this.sessionService = t, this.pushService = i, this.externalService = n, this.stateService = r, this.securityLogService = o, this.serverTimeService = a, this.configLoader = s, this.configInitService = c, this.publisherService = d, this.featureSetService = l, this.inboxService = u, this.userEventTrackingService = p, this.bgmService = h
            }
            return e.prototype.checkTestAccount = function() {
                return this.getConfig().then(function(e) {
                    return e.testAccount
                })
            }, e.prototype.getConfig = function() {
                var e = this;
                return this.configLoader.getConfig().then(function(t) {
                    return e.sessionService.config = t
                })
            }, e.prototype.getAccessToken = function() {
                var e = this;
                return this.getConfig().then(function() {
                    var i = e.sessionService.config,
                        n = i.qqid,
                        o = i.token,
                        a = i.apiServer,
                        s = i.netbar,
                        d = i.pcbang;
                    if (r.info("Api server:", a), n) return t.loginApiEndpoint = a + "/v2/tc/token", c.requestHttp("POST", t.loginApiEndpoint, {
                        qqid: parseInt(n, 10),
                        token: o,
                        netbar: s
                    });
                    if (o) {
                        t.loginApiEndpoint = a + "/v2/nx/sso";
                        var l = {
                            passport: o
                        };
                        if (d && !_.isEmpty(d) && _.isString(d)) try {
                            l.pcbang = JSON.parse(d.replace(/\'/g, '"'))
                        } catch (e) {
                            r.error("Failed to parse pcbang info", e)
                        }
                        return c.requestHttp("POST", t.loginApiEndpoint, l)
                    }
                    t.loginApiEndpoint = a + "/v2/oauth2/token";
                    var u = i.testAccount || e.testAccount,
                        p = {
                            grant_type: "password",
                            username: u,
                            client_id: i.localAuthId || "586de64f909c36304b6ce31c",
                            client_secret: i.localAuthSecret || "16c9d47f86f84a1f"
                        };
                    return c.requestHttp("POST", t.loginApiEndpoint, p)
                }).then(function(t) {
                    return e.publisherService.notifyLoginStatus(7), t
                }).catch(function(t) {
                    throw e.publisherService.notifyLoginErrorStatus(6), t
                })
            }, e.prototype.saveAccessToken = function(e) {
                var t = this;
                return n.try(function() {
                    var i = t.sessionService.config;
                    i.testAccount || t.testAccount;
                    t.sessionService.token = e.access_token, t.externalService.beSetAccessToken(e.access_token), t.externalService.beSetRefreshToken(e.refresh_token);
                    var n = t.decryptToken(e.access_token).exp;
                    return t.scheduleAccessTokenRefresh(n), e
                })
            }, e.prototype.getNoticeBanners = function() {
                var e = this.sessionService.config.apiServer,
                    t = {
                        1: {
                            idx: 1
                        },
                        2: {
                            idx: 2
                        },
                        3: {
                            idx: 3
                        }
                    };
                return c.request("GET", e + "/v2/noticebanners").then(function(e) {
                    if (_.isUndefined(e) || _.isEmpty(e)) return t;
                    var i = {};
                    return _.forEach(t, function(t) {
                        var n = t.idx;
                        i[n] = _.find(e, {
                            idx: n
                        }) || t
                    }), i
                }).catch(function(e) {
                    return t
                })
            }, e.prototype.scheduleAccessTokenRefresh = function(e) {
                var t = this,
                    i = 1e3 * e - +this.serverTimeService.time - 6e4;
                setTimeout(function() {
                    return t.refreshAccessToken()
                }, i)
            }, e.prototype.refreshAccessToken = function() {
                var e = this,
                    t = this.sessionService.config.apiServer;
                return c.requestHttp("POST", t + "/v2/oauth2/token", {
                    grant_type: "refresh_token",
                    refresh_token: this.externalService.beGetRefreshToken()
                }).then(function(t) {
                    var i = t.access_token,
                        n = e.decryptToken(i).exp;
                    e.sessionService.token = i, e.externalService.beSetAccessToken(i), e.setRequestToken(), e.scheduleAccessTokenRefresh(n)
                })
            }, e.prototype.createSession = function() {
                var e = this,
                    t = this.sessionService.config,
                    i = t.apiServer,
                    n = t.debug && "/v2/session/@debug" || "/v2/session";
                return c.requestHttp("POST", i + n, {
                    accessToken: this.sessionService.token
                }, {
                    Authorization: "Bearer " + this.sessionService.token
                }).then(function() {
                    e.publisherService.notifyLoginStatus(8)
                }).catch(function(t) {
                    throw e.publisherService.notifyLoginErrorStatus(7), t
                })
            }, e.prototype.loadSessionToken = function() {
                var e = this;
                if (!this.externalService.beGetRefreshToken()) throw new Error("can't find saved session token");
                return this.refreshAccessToken().then(function() {
                    return c.request("GET", "players").catch(function(t) {
                        throw e.sessionService.token = void 0, r.info("session expired:", t), t
                    })
                })
            }, e.prototype.initPush = function(e) {
                var t = this;
                return this.pushService.init().then(function() {
                    t.publisherService.notifyLoginStatus(9)
                }).catch(function(e) {
                    throw t.publisherService.notifyLoginErrorStatus(8), e
                })
            }, e.prototype.notifyEndpointIpAddress = function() {
                var e = this,
                    t = this.sessionService.config.apiServer;
                c.requestHttp("GET", t + "/v2/remoteaddress").then(function(t) {
                    e.externalService.beSetEndpointIpAddress(t.remoteAddress)
                })
            }, e.prototype.createConfigurationItem = function() {
                return this.configInitService.init()
            }, e.prototype.initPublisher = function() {
                this.publisherService.init()
            }, e.prototype.setRequestToken = function() {
                c.requestConfig.authorization = "Bearer " + this.sessionService.token
            }, e.prototype.setupLogSystem = function() {
                var e = this;
                if (this.externalService.isEdgeBrowser()) {
                    var t = this.sessionService.config.logApiServer;
                    this.userEventTrackingService.syncLoginTime(), c.requestHttp("GET", t + "/log/config").then(function(t) {
                        var i = e.sessionService.logConfig = t || {};
                        if (e.userEventTrackingService.isSampling = i.trackEvent, e.externalService.beGetCoreVersion() && i.dsn && !_.isEmpty(i.dsn) && !(e.testAccount && e.testAccount.indexOf("dmy") > -1)) return o.config(i.dsn, {
                            environment: e.externalService.isDevelopment() ? "development" : "production",
                            tags: {
                                changelist: e.externalService.beGetCoreVersion() + ""
                            },
                            release: e.externalService.beGetCoreVersion() + "",
                            ignoreErrors: s.IgnoreErrorsForSentry,
                            shouldSendCallback: function(e) {
                                return !e.exception || s.Errors.indexOf(e.exception.values[0].type) > -1
                            }
                        }).install()
                    })
                }
            }, e.prototype.afterCreateSession = function() {
                var e = this;
                return n.resolve(this.setRequestToken()).then(this.initPush.bind(this)).then(function() {
                    return n.all([e.createConfigurationItem(), e.initPublisher(), e.featureSetService.init(), c.disposeQueue()])
                }).then(this.setupLogSystem.bind(this))
            }, e.prototype.init = function() {
                var e = this;
                return this.promise ? this.promise : this.promise = this.getConfig().then(function() {
                    return e.userEventTrackingService.initState()
                }).then(this.createSession.bind(this)).then(this.notifyEndpointIpAddress.bind(this)).then(this.afterCreateSession.bind(this)).catch(function(t) {
                    throw e.promise = void 0, e.publisherService.notifyLoginErrorStatus(4), r.error("Auth failed:", t), t
                })
            }, e.prototype.recoverSession = function() {
                var e = this;
                return this.promise ? this.promise : this.promise = this.getConfig().then(function() {
                    return e.userEventTrackingService.recoverState()
                }).then(this.loadSessionToken.bind(this)).then(this.afterCreateSession.bind(this)).then(function() {
                    return e.bgmService.init()
                }).catch(function(t) {
                    throw e.promise = void 0, t
                })
            }, e.prototype.checkWaiting = function(e) {
                var t = this,
                    i = this.decryptToken(e.access_token),
                    o = i.waiting,
                    a = i.remain;
                if (o) {
                    var s = this.sessionService.config.apiServer;
                    return c.requestHttp("GET", s + "/v2/auth/waiting", {}, {
                        Authorization: "Bearer " + e.access_token
                    }).then(function(e) {
                        return e.waiting ? e.remain : t.refreshAccessToken().then(function() {
                            return 0
                        })
                    }).catch(function(e) {
                        return r.info(e)
                    })
                }
                return n.resolve(a)
            }, e.prototype.decryptToken = function(e) {
                var t = e.split(".")[1],
                    i = d.enc.Base64.parse(t),
                    n = d.enc.Utf8.stringify(i);
                return JSON.parse(n)
            }, e.prototype.getSandSDKApiServerIp = function() {
                var e = this.sessionService.config.apiServer;
                return c.request("GET", e + "/v2/tc/sandsdk/apiserver")
            }, e
        }();
    l.$inject = ["$location", "sessionService", "pushService", "externalService", "stateService", "securityLogService", "serverTimeService", "configLoader", "configInitService", "publisherService", "featureSetService", "inboxService", "userEventTrackingService", "bgmService"], t.default = l, angular.module("edge.components").factory("bootstrapService", a.default.generateService(l))
}, , , , function(e, t, i) {
    "use strict";

    function n(e) {
        if (!/^(\d{1,3}\.){3}\d{1,3}(:\d+)?$/.test(e)) return h.error("Can't parse ip address: " + e);
        u = "http://" + e + "/d?id=7&dn="
    }

    function r(e) {
        return v.DES.encrypt(e, m, {
            mode: v.mode.ECB
        }).ciphertext.toString()
    }

    function o(e) {
        var t = v.enc.Base64.stringify(v.enc.Hex.parse(e)),
            i = v.DES.decrypt(t, m, {
                mode: v.mode.ECB
            });
        return v.enc.Utf8.stringify(i)
    }

    function a(e) {
        return /^(\d{1,3}\.){3}\d{1,3}$/.test(e)
    }

    function s(e) {
        var t = "" + u + r(e);
        return f.requestHttp("GET", t).then(function(e) {
            if (!e) throw new Error("empty reponse");
            var t = o(e).split(",")[0];
            if (!a(t)) throw new Error("unexpected response: " + t);
            return t
        })
    }

    function c(e) {
        var t = e.match(/(https?:\/\/)?([^\/:]+)/);
        if (t) {
            var i = t[2];
            if (!a(i)) return {
                host: i,
                formatted: e.replace(i, g)
            }
        }
    }

    function d(e, t) {
        return e.replace(g, t)
    }

    function l(e) {
        var t = c(e);
        return t ? s(t.host).then(function(i) {
            return h.info("httpdns resolved [" + e + "] => [" + i + "]"), d(t.formatted, i)
        }).catch(function(t) {
            return h.warn("httpdns failed [" + e + "] - " + t.message), e
        }) : p.resolve(e)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var u, p = i(6),
        h = i(7),
        f = i(10),
        v = i(539),
        m = v.enc.Utf8.parse("O6<Oclr<");
    t.setServerAddr = n, n("182.254.116.117");
    var g = "%host%";
    t.httpdns = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(285),
        a = i(150),
        s = i(174),
        c = i(6),
        d = i(35),
        l = i(4),
        u = i(12),
        p = i(10),
        h = i(3),
        f = i(5),
        v = i(40),
        m = i(38),
        g = function(e) {
            function t(t, i, n, r, o, a, s, c) {
                var d = e.call(this) || this;
                return d.$filter = t, d.externalService = i, d.pushService = n, d.presenceService = r, d.serverTimeService = o, d.numberPlateService = a, d.staticdata = s, d.featureSetService = c, d.subscribe(/\/players\/(.*)\/sp/, d.onPushedSp.bind(d)), d.subscribe(/\/players\/(.*)\/mileage/, d.onPushedMileage.bind(d)), d.subscribe(/\/players\/(.*)\/exp/, d.onPushedExp.bind(d)), d.subscribe(/\/players\/(.*)\/level/, d.onPushedLevel.bind(d)), d.subscribe(/\/players\/(.*)\/unlock\/maxGarageCount/, d.onPushedMaxGarageCount.bind(d)), d.subscribe(/\/players\/(.*)\/unlock\/maxMarketRegisterCount/, d.onPushedMaxMarketRegisterCount.bind(d)), d.subscribe(/\/players\/(.*)\/recent\/vid/, d.onPushedRecentVehicle.bind(d)), d.subscribe(/\/asset\/mileage\/changedresettime/, d.onChangedResetTime.bind(d)), d.subscribe(/\/players\/(.*)\/name/, d.onPushedName.bind(d)), d
            }
            return n.__extends(t, e), t.prototype.fetch = function() {
                var e = this;
                return _.isEmpty(h.store.getState().player) ? this.fetchPlayer().then(function() {
                    return e.notifyMileageReset(!0)
                }) : c.resolve()
            }, t.prototype.fetchPlayer = function() {
                var e = this;
                return p.request("GET", "players").then(function(e) {
                    var t = e[0];
                    t && (h.store.dispatch(o.update(t)), h.store.dispatch(a.updatePlayer(t)), s.setUserContext({
                        id: t.id,
                        username: t.name
                    }))
                }).then(function() {
                    return e.presenceService.setPresenceInfo("idle")
                }).catch(function(e) {
                    throw r.error("cant initialize player.service:", e), e
                })
            }, t.prototype.fetchMileage = function() {
                var e = h.store.getState().player.mileage;
                return this.isMileageExpired(e.nextResetAt) ? p.request("GET", "players").then(function(e) {
                    var t = e[0];
                    t && h.store.dispatch(o.updateMileage(t.mileage))
                }) : c.resolve()
            }, t.prototype.selectPlayer = function(e) {
                return p.request("POST", "players/" + e + "/@login", {
                    clientVersion: this.externalService.beGetCoreVersion()
                })
            }, t.prototype.createPlayer = function(e) {
                var t = e.vcode,
                    i = e.dcode,
                    n = e.name,
                    r = e.slot;
                return p.request("POST", "players", {
                    vcode: t,
                    dcode: i,
                    name: n,
                    slot: r
                }).then(this.fetch.bind(this)).then(function() {
                    return h.store.getState().player
                })
            }, t.prototype.updatePlayerName = function(e, t) {
                return p.request("PUT", "players/" + e + "/name", {
                    name: t
                }).then(function() {
                    h.store.dispatch(o.updateName(t))
                })
            }, t.prototype.getPlayerState = function() {
                return h.store.getState().player
            }, t.prototype.notifyMileageReset = function(e) {
                var t = this;
                void 0 === e && (e = !1);
                var i = h.store.getState().player.mileage;
                if (i && this.featureSetService.isEnabled("MILEAGE")) {
                    var n = i.nextResetAt,
                        r = f(this.serverTimeService.time);
                    if (this.isMileageExpired(n)) return void this.fetchMileage();
                    var o = _.orderBy(this.staticdata.mileageData, ["remainingHours"], ["asc"]),
                        a = f.duration(f(n).diff(r));
                    if (a <= f.duration(o[o.length - 1].remainingHours, "h")) {
                        e && this.printSystemMsg(n);
                        for (var s = 0, c = o; s < c.length; s++) {
                            var d = c[s];
                            if (a <= f.duration(d.remainingHours, "h")) {
                                var l = this.getNextNotifyTime(d.alarmPeriod, r, f(n));
                                if (l < 0) break;
                                this.nextMileageResetNotify || (this.nextMileageResetNotify = setTimeout(function() {
                                    t.printSystemMsg(h.store.getState().player.mileage.nextResetAt), t.nextMileageResetNotify = null, t.notifyMileageReset(!1)
                                }, l));
                                break
                            }
                        }
                    }
                }
            }, t.prototype.isMileageExpired = function(e) {
                return +f(e) < +f(this.serverTimeService.time)
            }, t.prototype.printSystemMsg = function(e) {
                h.store.dispatch(v.addChatMessage({
                    source: m.ChatSourceType.System,
                    text: this.getRemainingTime(e),
                    timestamp: Date.now(),
                    owned: !0,
                    mask: m.ChatMessageMask.ForceDisplay
                }, !0))
            }, t.prototype.getNextNotifyTime = function(e, t, i) {
                var n = Math.ceil(i.diff(t) / +f.duration(e, "h"));
                if (n <= 0) return 0;
                var r = i.clone().subtract(e * (n - 1), "h");
                return +f.duration(r.diff(t))
            }, t.prototype.cheatAddLevel = function(e) {
                var t = h.store.getState().player;
                return p.request("PUT", "players/" + t.id + "/level", {
                    delta: e
                })
            }, t.prototype.cheatAddExp = function(e) {
                var t = h.store.getState().player;
                return p.request("PUT", "players/" + t.id + "/exp", {
                    delta: e
                })
            }, t.prototype.cheatSp = function(e) {
                return p.request("PUT", "players/" + h.store.getState().player.id + "/sp", {
                    delta: e
                })
            }, t.prototype.cheatUpdateMileage = function(e) {
                return p.request("POST", "players/" + h.store.getState().player.id + "/mileage", {
                    mileage: e
                })
            }, t.prototype.cheatMileageResetNextAt = function(e) {
                return p.request("PUT", "mileage/resettime", {
                    resetTime: e
                })
            }, t.prototype.changeRecentVehicle = function(e) {
                var t = h.store.getState().player;
                return (u.getVehicleInfo(e).igr ? c.resolve() : p.request("PUT", "players/" + t.id + "/recent", {
                    vid: e
                })).then(function() {
                    h.store.dispatch(o.updateRecent(e))
                })
            }, t.prototype.cheatChangeName = function(e) {
                var t = h.store.getState().player;
                return p.request("PUT", "players/" + t.id + "/name", {
                    name: e
                })
            }, t.prototype.setRecentVehicleIfNeeded = function(e) {
                var t = u.getRecentVehicle(),
                    i = u.getVehicles(e);
                if (_.includes(i, t)) return t;
                var n = _.sortBy(i, function(e) {
                        return -e.ovr
                    })[0],
                    r = h.store.getState().player;
                return h.store.dispatch(o.updateRecent(n.id)), p.request("PUT", "players/" + r.id + "/recent", {
                    vid: n.id
                }), n
            }, t.prototype.getRecentVehicleOfType = function(e) {
                var t = u.getRecentVehicle(),
                    i = u.getVehicles(e);
                return _.includes(i, t) ? t : _.sortBy(i, function(e) {
                    return -e.ovr
                })[0]
            }, t.prototype.markPartsAsChecked = function() {
                return this.markPlayerAssetCheckedat("part")
            }, t.prototype.markVehiclesAsChecked = function() {
                return this.markPlayerAssetCheckedat("vehicle")
            }, t.prototype.markInventoryAsChecked = function() {
                return this.markPlayerAssetCheckedat("inventory")
            }, t.prototype.markInboxAsChecked = function() {
                return this.markPlayerAssetCheckedat("inbox")
            }, t.prototype.isPlayerInfoFrozen = function() {
                var e = h.store.getState().playerInfo.pendingBonuses;
                return !_.isEmpty(e)
            }, t.prototype.markPlayerAssetCheckedat = function(e) {
                var t = this,
                    i = h.store.getState().player;
                return p.request("PUT", "players/" + i.id + "/checkedat", {
                    assetType: e
                }).then(function(e) {
                    h.store.dispatch(o.updateCheckedat(e.checkedat))
                }).then(function() {
                    t.emit("newItemIndicate")
                })
            }, t.prototype.dispatchNewItemIndicate = function(e) {
                var t = this.serverTimeService.time.toISOString();
                h.store.dispatch(o.updateNewlyGainedAt(e, t)), this.emit("newItemIndicate")
            }, t.prototype.subscribe = function(e, t) {
                this.pushService.subscribeResource(e, t.bind(this))
            }, t.prototype.isPushedMyInfo = function(e) {
                var t = h.store.getState().player;
                return -1 !== e.uri.indexOf(t.id)
            }, t.prototype.onPushedSp = function(e, t) {
                r.info(">> player sp", e, t);
                var i = t.body;
                this.isPushedMyInfo(t) && (h.store.dispatch(o.updateSp(i)), this.isPlayerInfoFrozen() || h.store.dispatch(a.updateSnapshot({
                    sp: i
                })))
            }, t.prototype.onPushedMileage = function(e, t) {
                if (r.info(">> player mileage", e, t), this.isPushedMyInfo(t)) {
                    var i = t.body;
                    h.store.dispatch(o.updateMileage(i)), this.isPlayerInfoFrozen() || h.store.dispatch(a.updateSnapshot({
                        mileage: i
                    }))
                }
            }, t.prototype.onChangedResetTime = function(e, t) {
                r.info(">> mileage reset time", e, t), clearTimeout(this.nextMileageResetNotify), this.nextMileageResetNotify = null;
                var i = t.body,
                    n = h.store.getState().player.mileage;
                n.nextResetAt = i, h.store.dispatch(o.updateMileage(n)), this.notifyMileageReset(!0)
            }, t.prototype.onPushedLevel = function(e, t) {
                var i = this;
                if (r.info(">> player level", e, t), this.isPushedMyInfo(t)) {
                    var n = t.body;
                    h.store.dispatch(o.updateLevel(n)), this.isPlayerInfoFrozen() || h.store.dispatch(a.updateSnapshot({
                        level: n
                    }));
                    n >= Number(this.staticdata.numberPlateDataManager.numberPlateData.configs.NUMBER_PLATE_MIN_PLAYER_LEVEL) && setTimeout(function() {
                        return i.numberPlateService.fetchInfo()
                    }, 100)
                }
            }, t.prototype.onPushedExp = function(e, t) {
                if (r.info(">> player exp", e, t), this.isPushedMyInfo(t)) {
                    var i = t.body;
                    h.store.dispatch(o.updateExp(i)), this.isPlayerInfoFrozen() || h.store.dispatch(a.updateSnapshot({
                        exp: i
                    }))
                }
            }, t.prototype.onPushedMaxGarageCount = function(e, t) {
                r.info(">> player maxGarageCount", e, t), h.store.dispatch(o.updateUnlock({
                    maxGarageCount: t.body
                }))
            }, t.prototype.onPushedMaxMarketRegisterCount = function(e, t) {
                r.info(">> player maxMarketRegisterCount", e, t), h.store.dispatch(o.updateUnlock({
                    maxMarketRegisterCount: t.body
                }))
            }, t.prototype.onPushedRecentVehicle = function(e, t) {
                r.info(">> player recentVehicle", e, t);
                var i = t.body;
                h.store.dispatch(o.updateRecent(i))
            }, t.prototype.onPushedName = function(e, t) {
                if (r.info(">> player name", e, t), e[1] === h.store.getState().player.id) {
                    var i = t.body,
                        c = n.__assign({}, h.store.getState().player, {
                            name: i
                        });
                    h.store.dispatch(o.update(c)), h.store.dispatch(a.updatePlayer(c)), s.setUserContext({
                        id: c.id,
                        username: c.name
                    })
                }
            }, t.prototype.changeClientVersion = function(e) {
                var t = h.store.getState().player;
                return p.request("POST", "players/" + t.id + "/update/clientversion", {
                    clientVersion: e
                })
            }, t.prototype.formatDate = function(e, t) {
                return f(e).format(this.$filter("translate")(t))
            }, t.prototype.getRemainingTime = function(e) {
                var t = this.serverTimeService.getRemainingDuration(e);
                t.seconds() > 0 && t.minutes() % 5 != 0 && t.add(1, "m");
                var i = t.days(),
                    n = t.hours(),
                    r = t.minutes(),
                    o = t.asMilliseconds(),
                    a = i > 0 ? "MILEAGE_INFO_RESETREMAINING" : n > 0 ? "MILEAGE_INFO_RESETREMAINING_H" : r > 1 ? "MILEAGE_INFO_RESETREMAINING_M" : "MILEAGE_INFO_RESETREMAINING_LESSTHAN1M";
                return o < 0 ? this.$filter("translate")("MILEAGE_INFO_RESETMESSAGE") : f({
                    day: i,
                    hour: n,
                    minute: r
                }).format(this.$filter("translate")(a))
            }, t.prototype.addMileageResetTimer = function(e) {
                var t = h.store.getState().player.mileage,
                    i = f.duration(f(t.nextResetAt).diff(f(this.serverTimeService.time))).asMilliseconds();
                this.resetMileageTimer && this.nextResetAt === t.nextResetAt || (this.nextResetAt = t.nextResetAt, this.setResetMileageTimer(t, i, e))
            }, t.prototype.setResetMileageTimer = function(e, t, i) {
                var n = this;
                this.clearMileageResetTimer(), l.MaxSetTimeoutDelay < t ? this.resetMileageTimer = setTimeout(function() {
                    n.setResetMileageTimer(e, t - l.MaxSetTimeoutDelay, i)
                }, l.MaxSetTimeoutDelay) : this.resetMileageTimer = setTimeout(function() {
                    h.store.dispatch(o.updateMileage(_.assign({}, e, {
                        balance: 0
                    }))), i && i()
                }, t)
            }, t.prototype.clearMileageResetTimer = function() {
                this.resetMileageTimer && (clearTimeout(this.resetMileageTimer), this.resetMileageTimer = null)
            }, t
        }(d.EventEmitter);
    g.$inject = ["$filter", "externalService", "pushService", "presenceService", "serverTimeService", "numberPlateService", "staticdataLoaderService", "featureSetService"], t.PlayerService = g, t.default = g, angular.module("edge.components").factory("playerService", l.default.generateService(g))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(545),
        r = i(1025),
        o = i(546),
        a = i(1026),
        s = i(1027),
        c = i(547),
        d = i(1028),
        l = i(1029);
    t.GlobalCustomComponents = {
        CSSButton: n.default,
        BackgroundBlur: r.default,
        ExternalImage: o.default,
        HitArea: a.default,
        DropdownButton: s.default,
        Progress: c.default,
        TextInputView: d.TextInputView,
        NoneEvents: l.NoneEvents
    }
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(22),
        o = i(49),
        a = i(2),
        s = i(209),
        c = i(19),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._enabled = !0, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "text", {
                get: function() {
                    return this._text
                },
                set: function(e) {
                    this._text !== e && (this._text = e, this.htmlElement.textContent = e)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "enabled", {
                get: function() {
                    return this._enabled
                },
                set: function(e) {
                    if (this._enabled !== e) {
                        var t = [a.MouseEventEx.CLICK, a.MouseEventEx.MOUSE_DOWN, a.MouseEventEx.MOUSE_MOVE, a.MouseEventEx.MOUSE_OUT, a.MouseEventEx.MOUSE_OVER, a.MouseEventEx.MOUSE_UP, a.MouseEventEx.MOUSE_WHEEL],
                            i = this.htmlElement;
                        e ? (this.enableEvents(t), i && i.removeAttribute("disabled")) : (this.disableEvents(t), i && i.setAttribute("disabled", "")), this._enabled = e
                    }
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.createDomNode = function(e) {
                return document.createElement("button")
            }, t.prototype.initializeClass = function(t) {
                e.prototype.initializeClass.call(this, t);
                var i = this.htmlElement;
                if (i.classList.add("css-button"), r.isObject(t.libraryItemNameOptions)) {
                    var n = Object.keys(t.libraryItemNameOptions);
                    i.classList.add.apply(i.classList, n)
                }
            }, t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.hasSize = !0
            }, t.prototype.cloneProperties = function(t) {
                e.prototype.cloneProperties.call(this, t);
                var i = t;
                this._text = i._text, this._enabled = i._enabled
            }, t.prototype.postCreate = function() {
                e.prototype.postCreate.call(this);
                var t = this.$(".comp-TextField");
                if (t) {
                    this.text = t.text;
                    var i = this.cssProxies[0],
                        n = t.textAttrs;
                    n && (i.setProperty("font-size", n.size + "px"), n.size <= s.DisableHintingThreshold && i.setProperty("-webkit-font-smoothing", "-edge-disable-hinting"), i.setProperty("text-align", n.alignment || "center"), n.bold && i.setProperty("font-weight", "bold"), n.characterSpacing && i.setProperty("letter-spacing", n.characterSpacing + "px"), n.indent && i.setProperty("text-indent", n.indent + "px"), n.italic && i.setProperty("font-style", "italic"))
                }
                this.removeAllChildren()
            }, t
        }(o.MovieClip);
    d = n.__decorate([c.component("CSSButton")], d), t.default = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(49),
        o = i(257),
        a = i(8),
        s = i(19),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._src = "", t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "src", {
                get: function() {
                    return this._src
                },
                set: function(e) {
                    var t = this;
                    this._src = e;
                    var i = this.htmlElement.getAttribute("src");
                    this.htmlElement.setAttribute("src", e);
                    var n = $(this.htmlElement).off("load.ExternalImage");
                    i !== e && (this.visible = !1), n.one("load.ExternalImage", function() {
                        return t.visible = !0
                    })
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.createDomNode = function(e) {
                var t = this,
                    i = document.createElement("img");
                return i.onload = function() {
                    t.emit(a.EventEx.LOAD)
                }, i
            }, t.prototype.initializeDomNode = function(t) {
                e.prototype.initializeDomNode.call(this, t), o.default($(this.htmlElement))
            }, t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.hasSize = !0
            }, t.prototype.postCreate = function() {
                e.prototype.postCreate.call(this);
                var t = this.$(".comp-Shape");
                t && (this.width = t.width, this.height = t.height), this.removeAllChildren()
            }, t.prototype.setFallbackImg = function(e) {
                o.default($(this.htmlElement), e)
            }, t
        }(r.MovieClip);
    c = n.__decorate([s.component("ExternalImage")], c), t.ExternalImage = c, t.default = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(49),
        a = i(19),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._ratio = .5, t._scaleVertical = !1, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "ratio", {
                get: function() {
                    return this._ratio
                },
                set: function(e) {
                    e = Math.max(0, e), e = Math.min(1, e), this._ratio !== e && (this._ratio = e, this.invalidateData())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "scaleVertical", {
                set: function(e) {
                    this._scaleVertical = e
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.postCreate = function() {
                e.prototype.postCreate.call(this), this.assignMask(), this.invalidateData()
            }, t.prototype.drawData = function() {
                e.prototype.drawData.call(this), this.progressMask && (this._scaleVertical ? this.progressMask.scaleYMultiplier = 1 * this.ratio : this.progressMask.scaleXMultiplier = 1 * this.ratio)
            }, t.prototype.assignMask = function() {
                var e = this.progressMask = this.$(".id-mask, .Mask");
                if (!e) return r.error("Progress.postCreate: could'n find [Mask] in a asset");
                e.regX = 0
            }, t
        }(o.default);
    s = n.__decorate([a.component("Progress")], s), t.Progress = s, t.default = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = "0.6.1",
        o = r.split("."),
        a = o[0],
        s = o[1],
        c = (o[2], function() {
            function e() {}
            return e.prototype.convert = function(e, t) {
                if (t.version !== r) {
                    if (!new RegExp(a + "\\." + s + "\\.\\d+").test(t.version)) throw new Error("version mismatch; " + e + ".json(" + t.version + "), code(" + r + ")");
                    n.warn("patch version mismatch; " + e + ".json(" + t.version + "), code(" + r + ")")
                }
                if ("shared-common-buttons" === e)
                    for (var i = 0, o = t.library.items || []; i < o.length; i++) {
                        var c = o[i];
                        "Button" === this.getComponentType(c) && (c.noTextScale = !0)
                    } else if ("shared-item-card" === e)
                        for (var d = ["shared-item-card/ItemCardSmall : Button", "shared-item-card/ItemCardSmallLabel : Button"], l = 0, u = t.library.items || []; l < u.length; l++) {
                            var c = u[l]; - 1 !== d.indexOf(c.name) && (c.noTextScale = !0)
                        }
            }, e.prototype.getComponentType = function(e) {
                if (e.libraryItemNameClass) return e.libraryItemNameClass;
                var t = e.name.split("/").pop().trim(),
                    i = t.split(":");
                if (2 === i.length) {
                    var n = i[0].trim(),
                        r = i[1].trim();
                    return "=" === r ? n : r
                }
                return e.linkageBaseClass ? e.linkageBaseClass.split(".").pop() : ""
            }, e
        }());
    t.DataConverter = c
}, , , , , , , , , , , , , function(e, t, i) {
    "use strict";

    function n(e) {
        return function(t, i) {
            var n = Reflect.getOwnMetadata(o, t, o) || [];
            n.push({
                propertyKey: i,
                selector: e
            }), Reflect.defineMetadata(o, n, t, o)
        }
    }

    function r(e) {
        var t = Reflect.getOwnMetadata(o, Object.getPrototypeOf(e), o);
        if (t)
            for (var i = 0, n = t; i < n.length; i++) {
                var r = n[i];
                e[r.propertyKey] = e.face.$(r.selector)
            }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(296);
    var o = "faceSelectName";
    t.select = n, t.selectFaces = r
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        e.gotoAndPlay(t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(185);
    t.gotoAndPlay = r.makeHandler(function(e, t) {
        e.gotoAndPlay(t)
    }), t.gotoAndStop = r.makeHandler(function(e, t) {
        e.gotoAndStop(t)
    }), t.gotoAndPlayIgnoreReboot = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(185);
    t.param = n.makeHandler(function(e, t) {
        _.each(t, function(t, i) {
            e[i] = t
        })
    })
}, function(e, t, i) {
    "use strict";

    function n(e) {
        for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
        var n = e.htmlElement,
            o = r.apply(null, t),
            a = n._faceBinderClasses;
        a !== o && (a && n.classList.remove.apply(n.classList, a.split(" ")), o && n.classList.add.apply(n.classList, o.split(" ")), n._faceBinderClasses = o)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(52);
    t.classNames = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        var i = t.event,
            n = t.callback;
        e.on(i, n)
    }

    function r(e, t) {
        var i = t.event,
            n = t.callback;
        e.once(i, n)
    }

    function o(e, t, i) {
        e.on(s.MouseEventEx.CLICK, function(i) {
            var n = e;
            n && (n.enabled = !1);
            var r = function() {
                n && (n.enabled = !0)
            };
            t(i).then(r).catch(function(e) {
                throw r(), e
            })
        })
    }

    function a(e, t) {
        e.on(s.MouseEventEx.CLICK, t)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var s = i(2);
    t.on = n, t.once = r, t.onClickSafe = o, t.onClick = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(567),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.bind = function(t, i) {
                void 0 === i && (i = {}), this._template = t, t.boot();
                var n = t.parent;
                this._insertPosition = n.getChildIndex(t), this._domAnchor = document.createComment(" structural-binder: " + t.htmlElement.id + " "), t.htmlElement.parentNode.insertBefore(this._domAnchor, t.htmlElement), t.purgeTimeline(), n.removeChildAt(this._insertPosition), e.prototype.bind.call(this, n, i)
            }, t.prototype.onDestroy = function() {
                e.prototype.onDestroy.call(this), this._template.destroy(), this._template = void 0, this._domAnchor && (this._domAnchor.parentNode && this._domAnchor.parentNode.removeChild(this._domAnchor), this._domAnchor = void 0)
            }, t.prototype.updatePositionIfNeeded = function(e, t) {
                var i = this.face,
                    n = i.getChildIndex(e),
                    r = this._insertPosition + t;
                if (n !== r) {
                    var o = i.getChildAt(r),
                        a = o ? o.htmlElement : null,
                        s = e.htmlElement.parentNode;
                    i.removeChildAt(n), i.addChildAt(e, r), s.insertBefore(e.htmlElement, a)
                }
            }, t.prototype.createInstance = function(e, t) {
                void 0 === t && (t = 0);
                var i = this._template.htmlElement.cloneNode(!0),
                    n = o.rebindFace(i, this._template.htmlElement._face),
                    r = this.face,
                    a = this._insertPosition + t,
                    s = r.getChildAt(a),
                    c = s ? s.htmlElement : null,
                    d = this._domAnchor.parentNode;
                r.addChildAt(n, this._insertPosition + t), d.insertBefore(i, c), this._template.exist && n.reboot();
                var l, u = this.props.instanceBinder;
                return this.isStateful(u) ? (l = this.addChildBinder(n, u, e), l.setPropsAndUpdateRedux(e)) : u(n, e), {
                    face: n,
                    binder: l
                }
            }, t.prototype.updateInstance = function(e, t, i) {
                var n = this.props.instanceBinder;
                this.isStateful(n) ? t.setProps(i) : n(e, i)
            }, t.prototype.destroyInstance = function(e, t) {
                t && t.onDetachRecursively(), this.face.removeChild(e), e.destroy()
            }, t
        }(r.Binder);
    t.StructuralBinder = a
}, function(e, t, i) {
    "use strict";

    function n(e, t, i) {
        if (!t) throw new Error("Should provide non-null faceObject to rebind");
        var s = t.clone(e);
        if (s instanceof a.MaskLayerContainer) {
            if (!i) throw new Error("invalid face parent");
            s.parent = i
        }
        if (t instanceof r.DisplayObjectContainer)
            for (var c = t, d = s, l = _.map(e.children, function(e) {
                    return e
                }), u = 0, p = l; u < p.length; u++) {
                var h = p[u],
                    f = h.getAttribute("id"),
                    v = void 0;
                v = c instanceof a.MaskLayerContainer ? c.parent.getChildByObjectId(f) : c.getChildByObjectId(f) || c.getIgnoredChildByObjectId(f);
                var m = n(h, v, d);
                s instanceof a.MaskLayerContainer ? (s.parent.addChild(m), s.mask = l[0]._face) : d.addChild(m)
            }
        return s instanceof o.MovieClip && s.postCreate(), s
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(253),
        o = i(49),
        a = i(252);
    t.rebindFace = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "market.sell.updatePrice",
            props: e
        }
    }

    function r(e) {
        return {
            type: "market.fetchMyOffers",
            props: e
        }
    }

    function o(e) {
        return {
            type: "market.modifyMyOffers",
            props: e
        }
    }

    function a(e) {
        return {
            type: "market.addMyOffers",
            props: e
        }
    }

    function s(e) {
        return {
            type: "market.removeMyOffers",
            props: e
        }
    }

    function c(e) {
        return {
            type: "market.fetchFavorites",
            props: e
        }
    }

    function d(e) {
        return {
            type: "market.addFavorite",
            props: e
        }
    }

    function l(e) {
        return {
            type: "market.removeFavorite",
            props: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.updatePrice = n, t.fetchMyOffers = r, t.modifyMyOffer = o, t.addMyOffer = a, t.removeMyOffer = s, t.fetchFavorites = c, t.addFavorite = d, t.removeFavorite = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(5),
        o = i(4),
        a = i(10),
        s = i(3),
        c = function() {
            function e(e, t, i) {
                var c = this;
                this.pushService = e, this.featureSetService = t, this.$filter = i, this.initialized = !1, this.snippets = {}, this.pendingUpdates = {}, this.revalidateSnippets = function() {
                    var e = s.store.getState().player.id,
                        t = +r().subtract(10, "minutes"),
                        i = t,
                        n = [];
                    _.each(c.snippets, function(r) {
                        r.pid !== e && r.usedAt < t ? delete c.snippets[r.pid] : !r.isAi && r.fetchedAt < i && n.push(r.pid)
                    }), n.length && c.fetchSnippets(n)
                }, this.fetchSnippets = function(e) {
                    var t = _.uniq(e);
                    return a.request("POST", "snippets/players", t).then(function(e) {
                        var t = n.resolve({});
                        return c.featureSetService.isEnabled("CLAN") && (t = c.fetchClansForSnippet(e)), t.then(function(t) {
                            return n.map(e, function(e, i) {
                                return c.addSnippet(e.pid, e, t)
                            }, {
                                concurrency: 3
                            })
                        })
                    }).catch(function(e) {
                        _.forEach(t, function(t) {
                            c.pendingUpdates[t] && (c.pendingUpdates[t].reject(e), delete c.pendingUpdates[t])
                        })
                    })
                }, this.request = o.default.queuedDispatcher(this.fetchSnippets)
            }
            return e.prototype.init = function() {
                return this.initialized ? n.resolve() : (this.initialized = !0, this.pushService.subscribeResource(/\/players\/(.*)\/level/, this.onLevelResourceChanged.bind(this)), this.pushService.subscribeResource(/\/players\/(.*)\/name/, this.onNameResourceChanged.bind(this)), setInterval(this.revalidateSnippets, 3e5), this.fetchSnippets([s.store.getState().player.id]))
            }, e.prototype.getSnippet = function(e) {
                var t = this.snippets[e] || {};
                return t.usedAt = Date.now(), t
            }, e.prototype.getSnippetByName = function(e) {
                var t = _.find(this.snippets, {
                    name: e
                });
                if (t) return t.usedAt = Date.now(), t
            }, e.prototype.getSnippetAsync = function(e) {
                var t = this.snippets[e];
                if (t) return t.usedAt = Date.now(), n.resolve(t);
                if (this.pendingUpdates[e]) return this.pendingUpdates[e].promise;
                if (!o.default.isMongooseId(e)) return n.resolve({});
                var i = o.default.defer();
                return this.request(e), this.pendingUpdates[e] = i, i.promise
            }, e.prototype.setAiSnippet = function(e) {
                var t = Date.now();
                return this.snippets[e.id] = {
                    pid: e.id,
                    fetchedAt: t,
                    usedAt: t,
                    name: this.$filter("translate")("DRIVERCREW_NAME_" + e.id),
                    level: e.ai.level,
                    avatar: "notfound",
                    ranked: {},
                    vCode: e.vehicle.code,
                    ovr: e.vehicle.ovr,
                    loginDate: new Date,
                    online: !0,
                    clanId: void 0,
                    isAi: !0
                }
            }, e.prototype.onLevelResourceChanged = function(e, t) {
                var i = e[1],
                    n = this.snippets[i];
                n && (n.level = t.body)
            }, e.prototype.onNameResourceChanged = function(e, t) {
                var i = e[1],
                    n = this.snippets[i];
                n && (n.name = t.body)
            }, e.prototype.resolveSnippet = function(e) {
                var t = e.pid;
                return this.snippets[t] && (e.usedAt = this.snippets[t].usedAt), this.snippets[t] = e, this.pendingUpdates[t] && (this.pendingUpdates[t].resolve(e), delete this.pendingUpdates[t]), n.resolve(e)
            }, e.prototype.createSnippet = function(e, t) {
                var i = Date.now();
                return {
                    pid: e,
                    fetchedAt: i,
                    usedAt: i,
                    name: t.name,
                    level: t.level,
                    avatar: t.avatar || "notfound",
                    ranked: t.ranked,
                    vCode: t.vCode,
                    ovr: t.ovr,
                    loginDate: new Date(t.loginDate),
                    online: t.online,
                    clanId: t.clanId,
                    isManager: t.isManager
                }
            }, e.prototype.updateSnippetClanInfo = function(e, t) {
                e.clanEmblemId = t.emblem, e.clanName = t.name
            }, e.prototype.addSnippet = function(e, t, i) {
                var n = this;
                void 0 === i && (i = {});
                var r = this.createSnippet(e, t);
                if (!this.featureSetService.isEnabled("CLAN") || !r.clanId) return this.resolveSnippet(r);
                var o = i[r.clanId];
                return o ? (this.updateSnippetClanInfo(r, o), this.resolveSnippet(r)) : a.request("GET", "clans/" + r.clanId + "/info").then(function(e) {
                    return e.length ? n.updateSnippetClanInfo(r, e[0]) : log.warn("addSnippet for clan " + r.clanId + " error"), n.resolveSnippet(r)
                })
            }, e.prototype.fetchSnippetsForClan = function(e, t) {
                var i = this,
                    r = _.uniq(e);
                return a.request("GET", "snippets/players", {
                    pids: r
                }).then(function(e) {
                    return n.map(r, function(n, r) {
                        var o = i.createSnippet(n, e[r]);
                        return i.updateSnippetClanInfo(o, t), i.resolveSnippet(o)
                    })
                }).catch(_.noop)
            }, e.prototype.fetchClansForSnippet = function(e) {
                var t = _(e).filter(function(e) {
                    return e.clanId
                }).map(function(e) {
                    return e.clanId
                }).uniq().value();
                return t.length ? n.all(t.map(function(e) {
                    return a.request("GET", "clans/" + e + "/info")
                })).then(function(e) {
                    return _(e).filter(function(e) {
                        return e.length
                    }).map(function(e) {
                        return e[0]
                    }).keyBy("id").value()
                }) : n.resolve({})
            }, e
        }();
    c.$inject = ["pushService", "featureSetService", "$filter"], t.PlayerSnippetService = c, angular.module("edge.components").factory("playerSnippetService", o.default.generateService(c))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = i(6),
        a = i(7),
        s = i(4),
        c = i(3),
        d = i(298),
        l = function(e) {
            function t(t) {
                var i = e.call(this) || this;
                return i.$rootScope = t, i.popupQueue = [], i
            }
            return n.__extends(t, e), t.prototype.draw = function(e, t) {
                this.currentPopup ? (this.popupQueue.push({
                    popupName: e,
                    context: t
                }), this.chaining = !0) : (this.currentPopup = {
                    confirm: t.confirm || _.noop,
                    cancel: t.cancel || _.noop,
                    close: t.close || _.noop,
                    cleanup: t.cleanup || _.noop
                }, t = _.pickBy(t, function(e, t) {
                    return "confirm" !== t && "cancel" !== t && "close" !== t && "cleanup" !== t
                }), c.store.dispatch(d.open(e, t)), this.emit("draw"), s.default.blockEdgeContentsMouseEvent(!0), this.chaining = !1)
            }, t.prototype.drawConfirm = function(e, t, i) {
                this.draw("ConfirmPopup", {
                    title: e,
                    description: t,
                    confirm: i
                })
            }, t.prototype.closePopup = function() {
                return this.currentPopup ? (this.closeDefer = s.default.defer(), c.store.dispatch(d.close()), this.closeDefer.promise) : (this.wrapUpCurrent(), o.resolve())
            }, t.prototype.isShowPopup = function() {
                return !!this.currentPopup
            }, t.prototype.updateMessage = function(e) {
                if (!this.isShowPopup()) return a.warn("popupService.updateMessage should not called without visible popup");
                c.store.dispatch(d.update(e))
            }, t.prototype.wrapUpCurrent = function() {
                var e = this;
                if (this.currentPopup && this.$rootScope.$apply(function() {
                        e.currentPopup.cleanup(), e.currentPopup = void 0
                    }), _.isEmpty(this.popupQueue)) s.default.blockEdgeContentsMouseEvent(this.chaining), this.chaining = !1;
                else {
                    var t = _.head(this.popupQueue),
                        i = t.popupName,
                        n = t.context;
                    this.popupQueue = _.drop(this.popupQueue), this.draw(i, n)
                }
            }, t.prototype.confirmCurrent = function(e) {
                var t = this;
                this.currentPopup && (this.$rootScope.$apply(function() {
                    return t.currentPopup.confirm(e)
                }), this.wrapUpCurrent())
            }, t.prototype.cancelCurrent = function() {
                var e = this;
                this.currentPopup && (this.$rootScope.$apply(function() {
                    return e.currentPopup.cancel()
                }), this.wrapUpCurrent())
            }, t.prototype.closeCurrent = function() {
                var e = this;
                this.currentPopup && (this.$rootScope.$apply(function() {
                    return e.currentPopup.close()
                }), this.wrapUpCurrent())
            }, t.prototype.notifyClose = function() {
                var e = this;
                this.emit("close"), this.closeDefer && (this.$rootScope.$apply(function() {
                    e.closeDefer.resolve()
                }), this.closeDefer = void 0)
            }, Object.defineProperty(t.prototype, "chaining", {
                get: function() {
                    return this._chaining
                },
                set: function(e) {
                    this._chaining = e
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(r.EventEmitter);
    l.$inject = ["$rootScope"], t.PopupService = l, t.default = l, angular.module("edge.components").factory("popupService", s.default.generateService(l))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e.cdn = function(e, t) {
            return this._filter || (this._filter = angular.element(document.body).injector().get("$filter")), this._filter(e)(t)
        }, e.itemImg = function(e, t) {
            return this._filter || (this._filter = angular.element(document.body).injector().get("$filter")), this._filter("itemCardImg")(e, t)
        }, e.itemName = function(e, t, i) {
            return this._filter || (this._filter = angular.element(document.body).injector().get("$filter")), this._filter("rewardName")(e, t, i)
        }, e.template = function(e, t) {
            return this._filter || (this._filter = angular.element(document.body).injector().get("$filter")), this._filter("template")(t, e)
        }, e.translate = function(e) {
            return this._filter || (this._filter = angular.element(document.body).injector().get("$filter")), this._filter("translate")(e)
        }, e
    }();
    t.default = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1114),
        a = i(1115),
        s = i(573),
        c = i(1116),
        d = i(1117),
        l = i(1118),
        u = i(1119),
        p = function() {
            function e() {}
            return e.prototype.loadAnnotatedStaticdata = function() {
                return o.loadStaticdata(this)
            }, e.prototype.fetch = function() {
                return this.initPromise ? this.initPromise : this.initPromise = this.loadAnnotatedStaticdata()
            }, e
        }();
    p.$inject = [], n.__decorate([o.staticdata("license-data")], p.prototype, "licenseData", void 0), n.__decorate([o.staticdata("license-test-data")], p.prototype, "licenseTestData", void 0), n.__decorate([o.staticdata("license-reward-data")], p.prototype, "licenseRewardData", void 0), n.__decorate([o.staticdata("inventory-item")], p.prototype, "inventoryItemData", void 0), n.__decorate([o.staticdata("team-battle-rank-point")], p.prototype, "teamBattleRankPointData", void 0), n.__decorate([o.staticdata("navigation-data")], p.prototype, "navigationData", void 0), n.__decorate([o.staticdata("sound-fx-data")], p.prototype, "soundFxData", void 0), n.__decorate([o.staticdata("sound-bgm-data")], p.prototype, "soundBgmData", void 0), n.__decorate([o.staticdataCustom("track-data", a.TrackDataManager)], p.prototype, "trackData", void 0), n.__decorate([o.staticdata("track-limit")], p.prototype, "trackLimit", void 0), n.__decorate([o.staticdata("vehicle-db")], p.prototype, "vehicleData", void 0), n.__decorate([o.staticdata("vehicle-upgrade")], p.prototype, "vehicleUpgradeData", void 0), n.__decorate([o.staticdata("vehicle-penalty")], p.prototype, "vehiclePenalty", void 0), n.__decorate([o.staticdata("parts-item")], p.prototype, "partsItemData", void 0), n.__decorate([o.staticdata("parts-material")], p.prototype, "partsMaterialData", void 0), n.__decorate([o.staticdata("parts-combine")], p.prototype, "partsCombineData", void 0), n.__decorate([o.staticdata("tuning-db")], p.prototype, "tuningData", void 0), n.__decorate([o.staticdata("match-define")], p.prototype, "gameModeData", void 0), n.__decorate([o.staticdata("static-values")], p.prototype, "staticValues", void 0), n.__decorate([o.staticdata("blueprint-data")], p.prototype, "blueprintData", void 0), n.__decorate([o.staticdata("ranked-match-match-define")], p.prototype, "rankedMatchMatchDefineData", void 0), n.__decorate([o.staticdata("ranked-match-tier")], p.prototype, "rankedMatchTierData", void 0), n.__decorate([o.staticdata("ranked-match-static")], p.prototype, "rankedMatchStaticData", void 0), n.__decorate([o.staticdata("market-search-value")], p.prototype, "searchStatusValue", void 0), n.__decorate([o.staticdata("market-commission")], p.prototype, "commissionValue", void 0), n.__decorate([o.staticdata("driver")], p.prototype, "driverData", void 0), n.__decorate([o.staticdata("player-level-up")], p.prototype, "playerLevelUp", void 0), n.__decorate([o.staticdata("reward-level-up")], p.prototype, "rewardLevelUp", void 0), n.__decorate([o.staticdata("license-channel-reward")], p.prototype, "channelReward", void 0), n.__decorate([o.staticdata("loading-tip")], p.prototype, "loadingTip", void 0), n.__decorate([o.staticdata("mileage-data")], p.prototype, "mileageData", void 0), n.__decorate([o.staticdataCustom(["forbidden-words-chat-kor"], s.BanWords)], p.prototype, "forbiddenWordsChatKor", void 0), n.__decorate([o.staticdataCustom(["worldchat-data"], c.WorldChatDataManager)], p.prototype, "worldChatData", void 0), n.__decorate([o.staticdata("game-room-data")], p.prototype, "gameRoomData", void 0), n.__decorate([o.staticdata("video-guide")], p.prototype, "videoGuideData", void 0), n.__decorate([o.staticdataCustom(["clan-data"], d.ClanDataManager)], p.prototype, "clanDataManager", void 0), n.__decorate([o.staticdataCustom(["auction-data"], l.AuctionDataManager)], p.prototype, "auctionDataManager", void 0), n.__decorate([o.staticdataCustom(["number-plate-data"], u.NumberPlateDataManager)], p.prototype, "numberPlateDataManager", void 0), n.__decorate([o.staticdata("pursuit-data")], p.prototype, "pursuitData", void 0), n.__decorate([o.staticdata("steering-preset-db")], p.prototype, "steeringPresetData", void 0), n.__decorate([o.staticdata("steering-category-db")], p.prototype, "steeringCategoryData", void 0), n.__decorate([o.staticdata("steering-handling-style-db")], p.prototype, "steeringHandlingStyleData", void 0), n.__decorate([o.staticdata("steering-attribute-db")], p.prototype, "steeringAttributeData", void 0), n.__decorate([o.staticdata("dealer-npc-data")], p.prototype, "dealerNpcData", void 0), n.__decorate([o.staticdata("vehicle-trade-boost-data")], p.prototype, "vehicleTradeBoostData", void 0), n.__decorate([o.staticdata("pc-benefit-data")], p.prototype, "pcBenefitData", void 0), n.__decorate([o.staticdata("action-feedback-data")], p.prototype, "actionFeedbackSettings", void 0), n.__decorate([o.staticdata("quest")], p.prototype, "quest", void 0), n.__decorate([o.staticdata("ai-db")], p.prototype, "aiDb", void 0), n.__decorate([o.staticdata("timetrial")], p.prototype, "timetrial", void 0), n.__decorate([o.staticdata("openworld-campaign")], p.prototype, "campaign", void 0), n.__decorate([o.staticdata("openworld-mission")], p.prototype, "mission", void 0), t.StaticdataLoaderService = p, t.default = p, angular.module("edge.components").factory("staticdataLoaderService", r.default.generateService(p))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e(t) {
            e.caseInsensitive = t.map(function(e) {
                return String(e).toLowerCase()
            })
        }
        return e
    }();
    t.BanWords = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(22),
        a = i(15),
        s = i(6),
        c = i(7),
        d = i(5),
        l = i(4),
        u = i(10),
        p = i(225),
        h = i(3),
        f = i(226);
    ! function(e) {
        e[e.Rookie = 1e5] = "Rookie", e[e.Active = 100001] = "Active", e[e.Attendance = 100002] = "Attendance", e[e.DailyQuest = 100003] = "DailyQuest", e[e.PreClosing = 100004] = "PreClosing"
    }(n = t.ReservedPromotionCode || (t.ReservedPromotionCode = {}));
    var v = function() {
        function e(e, t, i, n, r, o) {
            this.$filter = e, this.pushService = t, this.notifierService = i, this.serverTimeService = n, this.publisherService = r, this.externalService = o, this.pushService.subscribeResource(/\/promotion2\/updated/, this.promotionUpdated.bind(this)), this.pushService.subscribeResource(/\/promotion2\/records/, this.promotionProgressChanged.bind(this)), this.boostTimeouts = [], this.matchCountTimeouts = [], i.on("promotion.open", this.openPromotionList)
        }
        return e.prototype.init = function() {
            return h.store.getState().promotion.promotions ? s.resolve() : this.fetch()
        }, e.prototype.fetch = function() {
            var e = this;
            return this.fetchPromotion().then(function() {
                return e.fetchPromotionBanners()
            })
        }, e.prototype.fetchPromotion = function() {
            var e = this;
            return s.all([this.fetchPromotionList(), this.fetchPromotionRecords()]).then(function(t) {
                e.clearHotTimeBoostTimers(), e.clearMatchCountEventTimers(), e.updateRedux(e.createPromotions(t[0], t[1]))
            }).catch(function(e) {
                c.error(e.message)
            })
        }, e.prototype.fetchPromotionList = function() {
            return u.request("GET", "promotion2/promotions")
        }, e.prototype.fetchPromotionRecords = function() {
            return u.request("GET", "promotion2/records")
        }, e.prototype.fetchPromotionBanners = function() {
            var e = this;
            return u.request("GET", "promotion2/banners").then(function(t) {
                return e.updateBanners(t)
            }).catch(function(t) {
                if (!e.externalService.isDevelopment()) throw t;
                c.error("Promotion fetchPromotionBanners failed :: ", t)
            })
        }, e.prototype.updateBanners = function(e) {
            var t = h.store.getState().promotion.promotions,
                i = d(this.serverTime);
            e = e.filter(function(e) {
                var n = o.find(t, function(t) {
                    return t.info.id === e
                });
                return n && d(n.info.show.startAt) <= i
            }), h.store.dispatch(f.updateBanners(e))
        }, e.prototype.clearHotTimeBoostTimers = function() {
            this.boostTimeouts.forEach(function(e) {
                clearTimeout(e)
            }), this.boostTimeouts = []
        }, e.prototype.resetHotTimeBoostTimers = function(e) {
            var t = this,
                i = d(this.serverTime),
                n = 60 * i.hour() + i.minute();
            e.forEach(function(e) {
                if ("MATCHREWARD" === e.type && t.isAvailableToday(e)) {
                    var i = e.condition;
                    if (n < i.startTime) {
                        var r = 60 * (i.startTime - n) * 1e3,
                            o = setTimeout(function() {
                                t.notifyHotTimeBoost(e)
                            }, r);
                        return void t.boostTimeouts.push(o)
                    }(i.startTimeStr === i.endTimeStr || n < i.endTime) && t.notifyHotTimeBoost(e)
                }
            })
        }, e.prototype.notifyHotTimeBoost = function(e) {
            var t = this.$filter("translate")("SYSTEMTRAY_PROMOTIONSTART_HOTTIMETITLE"),
                i = "00:00" === e.condition.endTimeStr ? "24:00" : e.condition.endTimeStr,
                n = this.$filter("template")({
                    starttime: e.condition.startTimeStr,
                    endtime: i
                }, "SYSTEMTRAY_PROMOTIONSTART_HOTTIMEDESC");
            this.notifierService.addLast(t, n, "root.promotion", {
                id: e.id
            })
        }, e.prototype.clearMatchCountEventTimers = function() {
            this.matchCountTimeouts.forEach(function(e) {
                clearTimeout(e)
            }), this.matchCountTimeouts = []
        }, e.prototype.resetMatchCountEventTimers = function(e) {
            var t = this,
                i = d(this.serverTime),
                n = 60 * i.hour() + i.minute();
            e.forEach(function(e) {
                if ("MATCHCOUNT" === e.info.type && t.isAvailableToday(e.info)) {
                    var i = e.info.condition;
                    if (n < i.startTime) {
                        var r = 60 * (i.startTime - n) * 1e3,
                            o = setTimeout(function() {
                                t.notifyMatchCountEvent(e)
                            }, r);
                        return void t.matchCountTimeouts.push(o)
                    }(i.startTimeStr === i.endTimeStr || n < i.endTime) && t.notifyMatchCountEvent(e)
                }
            })
        }, e.prototype.notifyMatchCountEvent = function(e) {
            var t = e.info.condition,
                i = this.$filter("translate")("SYSTEMTRAY_PROMOTIONSTART_MATCHCOUNTTITLE"),
                n = "00:00" === t.endTimeStr ? "24:00" : t.endTimeStr,
                r = this.$filter("template")({
                    starttime: t.startTimeStr,
                    endtime: n,
                    count: t.matchCount.count,
                    current: this.getMatchCountRecord(e),
                    target: t.matchCount.count
                }, "SYSTEMTRAY_PROMOTIONSTART_MATCHCOUNTDESC");
            this.notifierService.addLast(i, r, "root.promotion", {
                id: e.info.id
            })
        }, e.prototype.createPromotions = function(e, t) {
            if (!e || !e.length) return [];
            this.resetHotTimeBoostTimers(e);
            var i = d(this.serverTime),
                n = o.map(o.filter(e, function(e) {
                    return d(e.condition.endAt) >= i
                }), function(e) {
                    return {
                        info: e,
                        record: o.find(t, {
                            promotionId: e.id
                        })
                    }
                });
            return this.resetMatchCountEventTimers(n), n
        }, e.prototype.getShowablePromotions = function() {
            var e = this;
            return o.filter(h.store.getState().promotion.promotions, function(t) {
                return d(e.serverTime).isSameOrAfter(t.info.show.startAt)
            })
        }, e.prototype.getPromotionWithFilterForDt = function() {
            var e = this,
                t = o.map(this.getShowablePromotions(), function(t) {
                    if ("DT" === t.info.type && e.isAvailableNow(t.info) && !e.isComplete(t)) return t
                });
            return this.filterPromotionsBySponsor(t)
        }, e.prototype.filterPromotionsBySponsor = function(e) {
            var t = this,
                i = this.publisherService.isIgr;
            return 0 === e.length ? [] : o.filter(e, function(e) {
                return !!e && (!!t.isProceeding(e.info) && (!!t.usersWithNormal(e.info.condition) || !(!t.usersWithIgr(e.info.condition) || !i)))
            })
        }, e.prototype.togglePreview = function() {
            h.store.dispatch(f.togglePreview())
        }, e.prototype.hidePreview = function() {
            h.store.dispatch(f.hidePreview())
        }, e.prototype.openPromotionList = function(e) {
            h.store.dispatch(f.openPromotionList(e))
        }, e.prototype.closePromotionList = function() {
            h.store.dispatch(f.closePromotionList())
        }, e.prototype.promotionUpdated = function(e, t) {
            var i = this;
            clearTimeout(this.updateTimeout);
            var n = t.body.timeLimit || 0,
                r = o.random(0, n);
            this.updateTimeout = setTimeout(function() {
                i.fetchPromotion().then(function() {
                    return i.fetchPromotionBanners()
                })
            }, 1e3 * r)
        }, e.prototype.promotionProgressChanged = function(e, t) {
            var i = this;
            if (t.body) {
                var n = t.body.filter(function(e) {
                    return e
                });
                0 !== n.length && setTimeout(function() {
                    var e = h.store.getState().promotion.promotions;
                    e && i.updateRedux(e.map(function(e) {
                        var t = o.find(n, {
                            promotionId: e.info.id
                        });
                        return t ? r.__assign({}, e, {
                            record: t
                        }) : e
                    }))
                }, 1e3)
            }
        }, e.prototype.updateRedux = function(e) {
            h.store.dispatch(f.updatePromotions(e))
        }, Object.defineProperty(e.prototype, "serverTime", {
            get: function() {
                return this.serverTimeService.time
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.getStatus = function(e) {
            if (this.isComplete(e)) return p.PromotionStatus.Completed;
            var t = e.info.condition,
                i = d(this.serverTimeService.time);
            if (this.isAvailableToday(e.info)) {
                var n = t.startTime,
                    r = t.endTime,
                    o = 60 * i.hour() + i.minute();
                return n === r ? p.PromotionStatus.Ongoing : n > o ? p.PromotionStatus.Expected : 0 !== r && r < o ? p.PromotionStatus.Expired : p.PromotionStatus.Ongoing
            }
            return d(t.startAt).unix() > i.unix() ? p.PromotionStatus.Expected : d(t.endAt).unix() < i.unix() ? p.PromotionStatus.Expired : p.PromotionStatus.Ongoing
        }, e.prototype.getColorFormatString = function(e, t) {
            return '<span style="color:' + e + '">' + t + "</span>"
        }, e.prototype.isComplete = function(e) {
            if (!e.record) return !1;
            switch (e.info.type) {
                case "LOGIN":
                    return e.record.login.isCompleted && this.isLoginRewardCompleted(e);
                case "DT":
                    return e.info.condition.dt.length === (e.record ? e.record.dt.step : 0);
                case "MATCHCOUNT":
                    return e.info.condition.matchCount.count === this.getMatchCountRecord(e)
            }
            return !1
        }, e.prototype.isLoginRewardCompleted = function(e) {
            var t = d(e.record.login.updatedAt);
            switch (e.info.condition.repeatCycle) {
                case a.Promotion2.RepeatCycleEnum.DAILY:
                    var i = d(this.serverTime).startOf("day");
                    return t >= d(i.format("YYYYMMDD") + e.info.condition.startTimeStr.replace(":", ""), "YYYYMMDDhhmm");
                case a.Promotion2.RepeatCycleEnum.WEEKLY:
                    var n = d(this.serverTime).startOf("week");
                    return t >= d(n.format("YYYYMMDD") + e.info.condition.startTimeStr.replace(":", ""), "YYYYMMDDhhmm");
                case a.Promotion2.RepeatCycleEnum.ONCE:
                    return !0
            }
            return !1
        }, e.prototype.usersWithNormal = function(e) {
            return e.targetUser && !e.targetUser.igr
        }, e.prototype.usersWithIgr = function(e) {
            return e.targetUser && e.targetUser.igr
        }, e.prototype.usersWithVip = function(e) {
            return !1
        }, e.prototype.participatingStep = function(e) {
            return e.record && "DT" === e.info.type ? Math.min(e.record.dt.step, e.info.condition.dt.length - 1) : 0
        }, e.prototype.isProceeding = function(e) {
            var t = d(this.serverTime);
            return d(e.condition.startAt) <= t && d(e.condition.endAt) >= t
        }, e.prototype.isAvailableToday = function(e) {
            var t = d(this.serverTime).weekday();
            return this.isProceeding(e) && e.condition.dayOfWeek[t]
        }, e.prototype.filterPreviewPromotions = function(e) {
            var t = d(this.serverTime).weekday(),
                i = d(this.serverTime);
            return e.filter(function(e) {
                var n = e.info,
                    r = n.type,
                    o = n.condition,
                    a = o.startAt,
                    s = o.endAt,
                    c = o.dayOfWeek;
                return "WEBEVENT" !== r && d(a).startOf("day") <= i && d(s).endOf("day") >= i && c[t]
            })
        }, e.prototype.isAvailableNow = function(e) {
            if (!this.isAvailableToday(e)) return !1;
            var t = d(this.serverTime),
                i = 60 * t.hour() + t.minute(),
                n = e.condition.startTime,
                r = e.condition.endTime;
            return n === r || 0 === r || n <= i && i < r
        }, e.prototype.openRookiePromotionPage = function() {
            var e = this.getPromotionByCode(n.Rookie);
            e && h.store.dispatch(f.openPromotionList(e.info.id))
        }, e.prototype.openActivePromotionPage = function() {
            var e = this.getPromotionByCode(n.Active);
            e && h.store.dispatch(f.openPromotionList(e.info.id))
        }, e.prototype.openAttendancePromotionPage = function() {
            var e = this.getPromotionByCode(n.Attendance);
            e && h.store.dispatch(f.openPromotionList(e.info.id))
        }, e.prototype.getDailyQuestPromotionUrl = function() {
            var e = this.getPromotionByCode(n.DailyQuest);
            return e ? e.info.webpageAddr : ""
        }, e.prototype.getPreClosingPromotionUrl = function() {
            var e = this.getPromotionByCode(n.PreClosing);
            return e && e.info.webpageAddr
        }, e.prototype.getPromotionByCode = function(e) {
            return o.find(this.getShowablePromotions(), function(t) {
                return t.info.code === e
            })
        }, e.prototype.getMatchCountRecord = function(e) {
            if (!e.record) return 0;
            var t = !1;
            switch (e.info.condition.repeatCycle) {
                case a.Promotion2.RepeatCycleEnum.DAILY:
                    d(this.serverTime).startOf("day").isBefore(e.record.matchCount.updatedAt) && (t = !0);
                    break;
                case a.Promotion2.RepeatCycleEnum.WEEKLY:
                    d(this.serverTime).startOf("day").isBefore(e.record.matchCount.updatedAt) && (t = !0);
                    break;
                case a.Promotion2.RepeatCycleEnum.ONCE:
                    t = !0
            }
            return t ? e.record.matchCount.record : 0
        }, e.prototype.openLink = function(e) {
            var t = e.info.webpageAddr;
            t && this.externalService.beOpenBrowserWithURL(l.default.normalizeUrl(t))
        }, e
    }();
    v.$inject = ["$filter", "pushService", "notifierService", "serverTimeService", "publisherService", "externalService"], t.PromotionService = v, angular.module("edge.components").factory("promotionService", l.default.generateService(v))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(35),
        a = i(69),
        s = i(3),
        c = ["root.menu.Production.ProductionScene", "root.MatchResult", "root.MultiplayReward", "root.MultiplayRewardTeamBattle", "root.menu.Inventory.Randombox", "root.LicenseMain.acquire"].concat(r.default.loadingStateList, r.default.hudStateList),
        d = ["root.menu.MultiplayRoom", "root.menu.MultiplayTeamRoom"],
        l = function(e) {
            function t(t, i, n, r) {
                var o = e.call(this) || this;
                return o.stateService = t, o.popupService = i, o.$transitions = n, o.$filter = r, n.onSuccess({}, function(e) {
                    -1 === c.indexOf(e.$to().name) ? s.store.dispatch(a.resume()) : s.store.dispatch(a.pause())
                }), o
            }
            return n.__extends(t, e), t.prototype.isClickable = function() {
                var e = this.stateService.getCurrentName();
                return !(d.indexOf(e) > -1)
            }, t.prototype.addLast = function(e, t, i, n) {
                s.store.dispatch(a.addLast({
                    title: e,
                    body: t,
                    transition: i,
                    params: n
                }))
            }, t.prototype.addFirst = function(e, t, i, n) {
                s.store.dispatch(a.addFirst({
                    title: e,
                    body: t,
                    transition: i,
                    params: n
                }))
            }, t.prototype.hideHistory = function() {
                s.store.getState().notifier.historyVisible && s.store.dispatch(a.toggleHistory())
            }, t.prototype.deleteHistory = function(e) {
                s.store.dispatch(a.deleteHistory(e))
            }, t.prototype.openMessenger = function(e, t) {
                this.deleteHistory(e), this.hideHistory(), this.emit("messenger.open", t)
            }, t.prototype.openPromotion = function(e, t, i) {
                this.deleteHistory(e), this.hideHistory(), this.emit("promotion.open", t, i)
            }, t.prototype.openQuestPreview = function(e, t) {
                this.emit("questPreview.open", t), this.deleteHistory(e), this.hideHistory()
            }, t.prototype.confirmCancelPopup = function(e, t, i) {
                var n = this;
                this.popupService.draw("ConfirmCancelPopup", {
                    title: this.$filter("template")({
                        feature: this.$filter("translate")(t)
                    }, "SYSTEMTRAY_POPUP_MOVE_TITLE"),
                    description: this.$filter("template")({
                        feature: this.$filter("translate")(t)
                    }, "SYSTEMTRAY_POPUP_MOVE_DESC"),
                    confirm: function() {
                        n.deleteHistory(i), n.hideHistory(), e()
                    }
                })
            }, t
        }(o.EventEmitter);
    l.$inject = ["stateService", "popupService", "$transitions", "$filter"], t.NotifierService = l, t.default = l, angular.module("edge.components").factory("notifierService", r.default.generateService(l))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(7),
        o = i(61),
        a = i(4),
        s = i(10),
        c = i(3),
        d = i(39),
        l = i(47),
        u = i(147),
        p = function() {
            function e(e, t, i, n, o) {
                var a = this;
                this.pushService = e, this.worldChatService = t, this.room2MatchService = i, this.playerSnippetService = n, this.gameModeService = o, this.roomList = [], i.on("match.reward.timeout", function() {
                    r.error("room2 reward.timeout; try to reset states"), a.roomManager && a.exitRoom()
                })
            }
            return Object.defineProperty(e.prototype, "currentRoom", {
                get: function() {
                    return this.roomManager && this.roomManager.room
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.createRoomManager = function(e) {
                return this.roomManager = new h(e, this, this.room2MatchService, this.pushService, this.worldChatService, this.playerSnippetService), this.onRoomManagerCreated(), this.roomManager
            }, e.prototype.onRoomManagerCreated = function() {
                if ("PURSUITINDIVIDUAL" === this.currentRoom.gameMode) {
                    var e = this.gameModeService.getLastPursuitTechs();
                    this.changePursuitTech(e[0], e[1])
                }
            }, e.prototype.createRoom = function(e) {
                var t = this;
                return s.request("POST", "room2", e).then(function(e) {
                    return t.createRoomManager(e), e
                })
            }, e.prototype.getRoom = function(e) {
                return s.request("GET", "room2/@test/" + e)
            }, e.prototype.getRoomList = function(e, t) {
                var i = this;
                return void 0 === e && (e = "ITEMINDIVIDUAL"), void 0 === t && (t = "ALL"), s.request("GET", "room2summaries", {
                    gameMode: e,
                    channel: t
                }).then(function(e) {
                    return i.roomList = e
                })
            }, e.prototype.getRoomSummary = function(e) {
                return _.find(this.roomList, function(t) {
                    return t.roomId === e
                })
            }, e.prototype.enterRoom = function(e, t) {
                var i = this;
                if (this.currentRoom) {
                    if (this.currentRoom.id === e) {
                        var r = new l.RequestError;
                        return r.islandCode = l.IslandCodes.ROOM2, r.islandLevel = l.IslandLevel.APPLICATION, r.errorCode = u.ErrorCode.AlreadyEnteredThisRoom, n.reject(r)
                    }
                    this.leaveRoom(!1)
                }
                return s.request("POST", "room2/" + e + "/players", {
                    password: t || "-1"
                }).then(function(e) {
                    return i.createRoomManager(e), e
                })
            }, e.prototype.enterRoomQuickly = function(e, t) {
                var i = this;
                return void 0 === e && (e = "ITEMINDIVIDUAL"), void 0 === t && (t = "ALL"), s.request("POST", "room2/@quickjoin", {
                    gameMode: e,
                    channel: t
                }).then(function(e) {
                    return i.createRoomManager(e), e
                })
            }, e.prototype.setReady = function(e) {
                if (void 0 === e && (e = !0), this.isObserver()) return n.resolve();
                var t = this.getMyEntry();
                return s.request("PUT", "room2/" + this.currentRoom.id + "/players/" + t.slot + "/status", {
                    status: e && "READY" || "JOIN"
                })
            }, e.prototype.reEnterRoom = function() {
                return this.room2MatchService.clearMatchState(), s.request("PUT", this.mySlotUri + "/status", {
                    status: "JOIN"
                })
            }, e.prototype.setVehicle = function(e) {
                var t = this.getMyEntry();
                return s.request("PUT", "room2/" + this.currentRoom.id + "/players/" + t.slot + "/vehicle/vid", {
                    vid: e
                })
            }, e.prototype.changeTeam = function() {
                var e = this.getMyEntry();
                if (!e.team) return new n(function(e, t) {
                    e(!1)
                });
                var t = e.team === d.Team.A ? d.Team.B : d.Team.A;
                return s.request("PUT", "room2/" + this.currentRoom.id + "/players/" + e.slot + "/team", {
                    team: t
                }).then(function(e) {
                    return e
                })
            }, e.prototype.setTrack = function(e, t) {
                return t ? s.request("PUT", "room2/" + this.currentRoom.id + "/trackcode", {
                    isRandomTrack: e,
                    trackCode: t
                }) : n.resolve()
            }, e.prototype.setMaxVehicleClazz = function(e) {
                return s.request("PUT", "room2/" + this.currentRoom.id + "/maxvehicleclazz", {
                    maxVehicleClazz: e
                })
            }, e.prototype.lockSlot = function(e) {
                var t = _.clone(this.currentRoom.locked);
                return t.push(e), s.request("PUT", "room2/" + this.currentRoom.id + "/locked", {
                    locked: _.uniq(t)
                })
            }, e.prototype.unlockSlot = function(e) {
                var t = _.clone(this.currentRoom.locked);
                return _.pull(t, e), s.request("PUT", "room2/" + this.currentRoom.id + "/locked", {
                    locked: t
                })
            }, e.prototype.exitRoom = function() {
                var e = this;
                return this.currentRoom ? s.request("DELETE", this.mySlotUri).then(function() {
                    e.roomManager && e.leaveRoom(!1)
                }) : (this.room2MatchService.onExitRoom(), n.resolve())
            }, e.prototype.kickSlot = function(e) {
                return s.request("POST", "room2/" + this.currentRoom.id + "/players/" + e + "/@kick")
            }, e.prototype.grantHost = function(e) {
                return s.request("POST", "room2/" + this.currentRoom.id + "/@grant", {
                    hostSlot: e
                })
            }, e.prototype.inviteRoom = function(e) {
                return s.request("POST", "room2/" + this.currentRoom.id + "/@invite", {
                    pid: e
                })
            }, e.prototype.inviteRoomByName = function(e) {
                return s.request("POST", "room2/" + this.currentRoom.id + "/@invitebyname", {
                    name: e
                })
            }, e.prototype.changePursuitTech = function(e, t) {
                var i = this.getMyEntry(),
                    n = {
                        item1: e,
                        item2: t
                    };
                return s.request("PUT", "room2/" + this.currentRoom.id + "/players/" + i.slot + "/pursuititemsparam", {
                    pursuitItemsParam: n
                }).catch(function(e) {
                    r.info(e.message)
                })
            }, e.prototype.startGame = function() {
                return this.room2MatchService.setAsSuperPeerIfItSupportsHostModeEnable(), s.request("POST", "room2/" + this.currentRoom.id + "/@start", {
                    superPeer: true
                })
            }, e.prototype.getMyEntry = function() {
                return _.find(this.currentRoom.players, {
                    pid: c.store.getState().player.id
                })
            }, e.prototype.getMyObserverEntry = function() {
                return _.find(this.currentRoom.observers, {
                    pid: c.store.getState().player.id
                })
            }, e.prototype.isObserver = function() {
                return this.currentRoom.isRefereeMode && !!this.getMyObserverEntry()
            }, Object.defineProperty(e.prototype, "mySlotUri", {
                get: function() {
                    var e = this.currentRoom,
                        t = e.id;
                    if (e.isRefereeMode) {
                        var i = this.getMyObserverEntry();
                        if (i) return "room2/" + t + "/observers/" + i.slot
                    }
                    return "room2/" + t + "/players/" + this.getMyEntry().slot
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.leaveRoom = function(e) {
                this.room2MatchService.clearMatchState(), this.roomManager.destroy(), delete this.roomManager, c.store.dispatch(o.leaveRoom(e))
            }, e.prototype.prepareRoomIfNeeded = function(e) {
                var t = this;
                return this.currentRoom ? n.resolve() : this.getRoom(e).then(function(e) {
                    t.createRoomManager(e)
                }).catch(function(e) {
                    r.warn("Room을 조회할 수 없습니다. (룸이 지워졌거나 접근할 권한이 없습니다.)", e)
                })
            }, e.prototype.isHost = function(e, t) {
                if (void 0 === e && (e = c.store.getState().player.id), void 0 === t && (t = c.store.getState().room.room), !t.isRefereeMode) {
                    var i = _.find(t.players, {
                        pid: e
                    });
                    return i && t.hostSlot === i.slot
                }
            }, e.prototype.isReferee = function(e, t) {
                if (void 0 === e && (e = c.store.getState().player.id), void 0 === t && (t = c.store.getState().room.room), t.isRefereeMode) {
                    var i = _.find(t.observers, {
                        pid: e
                    });
                    return i && t.refereeSlot === i.slot
                }
            }, e
        }();
    p.$inject = ["pushService", "worldChatService", "room2MatchService", "playerSnippetService", "gameModeService"], t.Room2Service = p, t.default = p;
    var h = function() {
        function e(e, t, i, n, r, a) {
            var s = this;
            this.room2Service = t, this.room2MatchService = i, this.pushService = n, this.worldChatService = r, this.playerSnippetService = a, this.cleanUp = [], this.onUpdateEntry = function(e, t) {
                var i = t.delete,
                    n = t.kick,
                    r = t.body,
                    a = !_.some(s.room.players, {
                        pid: r.pid
                    });
                if (c.store.dispatch(o.updateEntry({
                        isExit: i,
                        entry: r
                    })), i && r.pid === c.store.getState().player.id) return void s.room2Service.leaveRoom(n);
                (a || i) && s.playerSnippetService.getSnippetAsync(r.pid).then(function(e) {
                    var t = n ? "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_KICKED" : "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_EXIT";
                    s.worldChatService.printRoomSystemMsg(e, i ? t : "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_ENTRANCE")
                })
            }, this.onUpdateInfo = function(e, t) {
                var i = t.body;
                c.store.dispatch(o.updateInfo(i))
            }, this.onUpdateHostSlot = function(e, t) {
                var i = t.body;
                c.store.dispatch(o.updateHostSlot(i));
                var n = _.find(s.room.players, function(e) {
                    return e.slot === i.hostSlot
                });
                n && s.playerSnippetService.getSnippetAsync(n.pid).then(function(e) {
                    s.worldChatService.printRoomSystemMsg(e, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_MASTERCHANGE")
                })
            }, this.onDestroyed = function(e, t) {
                c.store.dispatch(o.removeEntry(c.store.getState().player.id)), s.room2Service.leaveRoom(!0)
            }, this.cleanUp.push(n.subscribeResource(/\/v2\/room2s\/(.*)\/players\/(.*)/, this.onUpdateEntry)), this.cleanUp.push(n.subscribeResource(/\/v2\/room2s\/([^\/]*)$/, this.onUpdateInfo)), this.cleanUp.push(n.subscribeResource(/\/v2\/room2s\/(.*)\/hostSlot/, this.onUpdateHostSlot)), this.cleanUp.push(n.subscribeResource(/\/v2\/room2s\/(.*)\/@destroyed/, this.onDestroyed)), i.init(), c.store.dispatch(o.createRoom(e));
            var d = c.store.getState().player.id;
            this.isHostOrReferee(d) && this.worldChatService.printRoomSystemMsg(null, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_CREATION"), this.playerSnippetService.getSnippetAsync(d).then(function(e) {
                s.worldChatService.printRoomSystemMsg(e, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_ENTRANCE")
            })
        }
        return Object.defineProperty(e.prototype, "room", {
            get: function() {
                return c.store.getState().room.room || {}
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.isHostOrReferee = function(e) {
            return this.room2Service.isHost(e, this.room) || this.room2Service.isReferee(e, this.room)
        }, e.prototype.destroy = function() {
            this.room.id;
            this.room2MatchService.destroy(), this.cleanUp.forEach(function(e) {
                return e()
            }), this.cleanUp = []
        }, e
    }();
    t.RoomManager = h, angular.module("edge.components").factory("room2Service", a.default.generateService(p))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(6),
        a = i(7),
        s = i(578),
        c = i(4),
        d = i(10),
        l = i(3),
        u = i(108),
        p = i(162),
        h = function() {
            function e(e, t, i, n, r, o, s) {
                var c = this;
                this.staticdataLoaderService = e, this.externalService = t, this.playerSnippetService = i, this.ranked2MatchService = n, this.pushService = r, this.playerService = o, this.contactsService = s, this.gameMode = "SPEED1ON1", this.lastPlayerState = {}, this.matchDefineData = this.staticdataLoaderService.rankedMatchMatchDefineData, this.tierData = this.staticdataLoaderService.rankedMatchTierData, n.on("match.reward.timeout", function() {
                    a.error("ranked2 reward.timeout; try to reset states"), c.exit()
                })
            }
            return e.prototype.setGameMode = function(e) {
                this.gameMode = e
            }, e.prototype.getGameMode = function() {
                return this.gameMode
            }, e.prototype.getMainStateName = function() {
                return "SPEED1ON1" === this.gameMode ? "root.menu.RankedMatch1On1" : "root.menu.RankedMatch6Players"
            }, e.prototype.fetch = function() {
                var e = this;
                return this.getRankedPlayer().catch(function(t) {
                    if (t.code === u.toCode(u.ErrorCode.PlayerDoesNotExistInSeason)) return e.createRankedPlayer()
                }).then(function() {
                    return e.playerSnippetService.fetchSnippets([l.store.getState().player.id])
                }).then(function() {
                    return e.fetchSeasonInfo(!0)
                }).then(function() {
                    return e.fetchTotalTierSummary()
                }).then(function() {
                    return e.fetchTopPlayer()
                })
            }, e.prototype.fetchSeasonInfo = function(e) {
                return void 0 === e && (e = !1), !e && l.store.getState().ranked.seasons ? o.resolve() : d.request("GET", "ranked2/seasons").then(function(e) {
                    l.store.dispatch(s.fetchSeasons(e))
                })
            }, e.prototype.getRankedPlayer = function() {
                var e = this,
                    t = l.store.getState().player.id;
                return d.request("GET", "ranked2/seasons/current/" + this.gameMode + "/players/" + t).then(function(t) {
                    var i = l.store.getState().ranked.modes[e.gameMode];
                    if (i && i.rankedPlayer) {
                        var n = i.rankedPlayer.records,
                            r = t.records;
                        e.updateRankedMatchNoticeScreen(n.state, r.state, n.fp, r.fp)
                    }
                    return l.store.dispatch(s.clearPrevSeasonInfo(e.gameMode)), l.store.dispatch(s.updateRankedPlayer(e.gameMode, t)), t
                })
            }, e.prototype.createRankedPlayer = function() {
                var e = this,
                    t = l.store.getState().player.id;
                return d.request("POST", "ranked2/seasons/current/" + this.gameMode + "/players/" + t).then(function(t) {
                    l.store.dispatch(s.updatePrevSeasonInfo(e.gameMode, t)), l.store.dispatch(p.pushEvents(e.gameMode, e.isExistPrev() ? [u.SeasonEvent.PreSeasonExistingStart] : [u.SeasonEvent.PreSeasonPrimaryStart]))
                })
            }, e.prototype.fetchTotalTierSummary = function() {
                var e = this;
                return d.request("GET", "ranked2/seasons/current/" + this.gameMode + "/tierrankinfo").then(function(t) {
                    _.keys(e.tierData[e.gameMode]).forEach(function(e) {
                        t.tierPlayerCount[e] || (t.tierPlayerCount[e] = 0)
                    }), l.store.dispatch(s.fetchTierRankInfo(e.gameMode, t))
                })
            }, e.prototype.fetchTopPlayer = function() {
                var e = this;
                return d.request("GET", "ranked2/seasons/current/" + this.gameMode + "/topplayerinfo").then(function(t) {
                    l.store.dispatch(s.fetchTopPlayersInfo(e.gameMode, t))
                }).catch(function(t) {
                    l.store.dispatch(s.fetchTopPlayersInfo(e.gameMode, {
                        top5: []
                    }))
                })
            }, e.prototype.startRankedMatchMaking = function() {
                var e = l.store.getState(),
                    t = e.player,
                    i = t.level,
                    n = t.recent.vid,
                    r = t.lastTrackCode,
                    o = e.ranked.seasons.currSeason;
                return d.request("POST", "ranked2/" + this.gameMode + "/matchmaking", {
                    vid: n,
                    level: i,
                    lastTrackCode: r,
                    seasonId: o.id,
                    coreVer: "EdgeBrowser"
                })
            }, e.prototype.cancelRankedMatchMaking = function() {
                var e = this;
                this.externalService.beGetCoreVersion();
                return d.request("DELETE", "ranked2/" + this.gameMode + "/matchmaking?coreVer=EdgeBrowser").then(function(t) {
                    if (!Number(t)) throw new Error("Resource not found");
                    e.clearMatchMakingStates()
                })
            }, e.prototype.clearMatchMakingStates = function() {
                this.ranked2MatchService.destroy()
            }, e.prototype.exit = function() {
                return this.ranked2MatchService.clearMatchState(), this.ranked2MatchService.destroy(), o.resolve()
            }, e.prototype.updateRankedMatchNoticeScreen = function(e, t, i, n) {
                var o = [];
                switch (e) {
                    case r.Ranked.RankedPlayerStateValuation.NORMAL:
                        t === r.Ranked.RankedPlayerStateValuation.PROMOTION ? o.push(u.SeasonEvent.PromoteStart) : t === r.Ranked.RankedPlayerStateValuation.DEPROMOTION && o.push(u.SeasonEvent.DemoteStart);
                        break;
                    case r.Ranked.RankedPlayerStateValuation.BATCH:
                        t !== r.Ranked.RankedPlayerStateValuation.BATCH && o.push(u.SeasonEvent.PreSeasonResult), t === r.Ranked.RankedPlayerStateValuation.PROMOTION ? o.push(u.SeasonEvent.PromoteStart) : t === r.Ranked.RankedPlayerStateValuation.DEPROMOTION && o.push(u.SeasonEvent.DemoteStart);
                        break;
                    case r.Ranked.RankedPlayerStateValuation.PROMOTION:
                        t !== r.Ranked.RankedPlayerStateValuation.PROMOTION && this.setLastPlayerState(e);
                        break;
                    case r.Ranked.RankedPlayerStateValuation.DEPROMOTION:
                        t !== r.Ranked.RankedPlayerStateValuation.DEPROMOTION && this.setLastPlayerState(e)
                }
                0 < o.length && (l.store.dispatch(p.pushEvents(this.gameMode, o)), a.debug(">> ranked2 event queue result - ", o))
            }, e.prototype.getFpWithinTier = function(e) {
                var t = this.getTierByFp(e),
                    i = this.getTierInfoByTier(t.code - 1),
                    n = e;
                return i && (n = e - i.rating), Math.floor(n)
            }, e.prototype.getTierByFp = function(e) {
                var t = _.find(this.tierData[this.gameMode], function(t) {
                    return t.rating >= e
                });
                return t || this.tierData[this.gameMode][1]
            }, e.prototype.getNumberByTier = function(e) {
                return 1 === Number(e) ? e : (e - 1) % 4 ? (e - 1) % 4 : 4
            }, e.prototype.getNameByTier = function(e) {
                return e >= 14 ? "legend" : e >= 10 ? "ace" : e >= 6 ? "master" : e >= 2 ? "challenge" : "driver"
            }, e.prototype.getTierGroupNumber = function(e) {
                var t = (e - 2) / 4 + 2;
                return t >= 2 ? Math.floor(t) : 1
            }, e.prototype.getMaxTier = function() {
                return _.max(_.map(_.keys(this.tierData[this.gameMode]), _.toNumber))
            }, e.prototype.getTierInfoByTier = function(e) {
                return this.tierData[this.gameMode][e]
            }, e.prototype.getStartFp = function() {
                return this.matchDefineData[this.gameMode].startFp
            }, e.prototype.getMedalContentionNumber = function() {
                return this.matchDefineData[this.gameMode].medalContentionNumber
            }, e.prototype.getMedalContentionRewardCode = function() {
                return this.matchDefineData[this.gameMode].package.rewards[0].code
            }, e.prototype.getMedalContentionRewards = function() {
                return this.matchDefineData[this.gameMode].package.rewards
            }, e.prototype.getMatchDefine = function() {
                return this.matchDefineData[this.gameMode]
            }, e.prototype.setVehicle = function(e) {
                return this.playerService.changeRecentVehicle(e)
            }, e.prototype.isExistPrev = function() {
                var e = l.store.getState().ranked.modes[this.gameMode];
                return !!e.prevSeasonInfo && e.prevSeasonInfo.isExistPrev
            }, e.prototype.isMedalReward = function(e) {
                return e >= 10
            }, e.prototype.getMedalTier = function(e, t) {
                var i = {
                        code: 0,
                        mode: ""
                    },
                    r = l.store.getState().ranked;
                if (!r.seasons || !r.seasons.prevSeason) return i;
                var o = this.playerSnippetService.getSnippet(e);
                if (!o || !o.ranked) return i;
                if ("ranked" === t) return o.ranked[this.gameMode] ? r.seasons.prevSeason.id !== o.ranked[this.gameMode].medalSeasonId ? i : {
                    code: o.ranked[this.gameMode].medalTier,
                    mode: this.gameMode
                } : i;
                var a = _.orderBy(_.map(o.ranked, function(e, t) {
                    return n.__assign({}, e, {
                        mode: t
                    })
                }).filter(function(e) {
                    return e.medalSeasonId && e.medalSeasonId === r.seasons.prevSeason.id
                }), ["medalTier", "mode"], ["desc"]);
                if (0 === a.length) return i;
                var s = a[0];
                return {
                    code: s.medalTier,
                    mode: s.mode
                }
            }, e.prototype.getMinHighRank = function() {
                return "SPEED1ON1" === this.gameMode ? 1 : 3
            }, e.prototype.setLastPlayerState = function(e) {
                this.lastPlayerState[this.gameMode] = e
            }, e.prototype.getLastPlayerState = function() {
                return this.lastPlayerState[this.gameMode]
            }, e.prototype.createdRankedSeason = function(e) {
                return d.request("POST", "ranked2/season", e).then(function(e) {
                    return e
                })
            }, e.prototype.removeRankedSeason = function(e) {
                return d.request("DELETE", "ranked2/seasons/" + e).then(function(e) {
                    return e
                })
            }, e.prototype.dispenseSeasonalReward = function(e) {
                return d.request("POST", "ranked2/seasons/" + e + "/rewards").then(function() {
                    a.debug(">> requested to dispense seasonal reward for " + e + ".")
                })
            }, e.prototype.modifyRankedPlayer = function(e) {
                return d.request("PUT", "ranked2/seasons/" + e.seasonid + "/" + e.gameMode + "/players/" + e.pid, e).then(function(e) {
                    return e
                })
            }, e.prototype.getRankedSeasonList = function() {
                return d.request("GET", "ranked2/seasons").then(function(e) {
                    return e
                })
            }, e.prototype.getRankedSeasonCurrent = function() {
                return d.request("GET", "ranked2/seasons/current").then(function(e) {
                    return e
                })
            }, e
        }();
    h.$inject = ["staticdataLoaderService", "externalService", "playerSnippetService", "ranked2MatchService", "pushService", "playerService", "contactsService"], t.Ranked2Service = h, t.default = h, angular.module("edge.components").factory("ranked2Service", c.default.generateService(h))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "ranked.fetchSeasons",
            seasons: e
        }
    }

    function r(e, t) {
        return {
            type: "ranked.fetchTopPlayersInfo",
            gameMode: e,
            topPlayersInfo: t
        }
    }

    function o(e, t) {
        return {
            type: "ranked.fetchTierRankInfo",
            gameMode: e,
            tierRankInfo: t
        }
    }

    function a(e, t) {
        return {
            type: "ranked.updateRankedPlayer",
            gameMode: e,
            rankedPlayer: t
        }
    }

    function s(e, t) {
        return {
            type: "ranked.updatePrevSeasonInfo",
            gameMode: e,
            prevSeasonInfo: t
        }
    }

    function c(e) {
        return {
            type: "ranked.clearPrevSeasonInfo",
            gameMode: e
        }
    }

    function d(e) {
        return {
            type: "ranked.selectTab",
            selectedTab: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.fetchSeasons = n, t.fetchTopPlayersInfo = r, t.fetchTierRankInfo = o, t.updateRankedPlayer = a, t.updatePrevSeasonInfo = s, t.clearPrevSeasonInfo = c, t.selectTab = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = i(6),
        a = i(4),
        s = i(10),
        c = i(3),
        d = function(e) {
            function t(t, i, n, r, o, a) {
                var s = e.call(this) || this;
                return s.$filter = t, s.pushService = i, s.sessionService = n, s.quickMatchService = r, s.popupService = o, s.gameModeService = a, s.cleanUp = [], s
            }
            return n.__extends(t, e), t.prototype.waitSearch = function(e) {
                this.gameMode = e, this.initMatchService()
            }, t.prototype.cancelWaitSearch = function() {
                this.onCancel()
            }, t.prototype.search = function(e, t) {
                switch (e) {
                    case "SPEEDTEAM":
                        return this.searchTeamMode(e, t);
                    default:
                        return this.searchSingleMode(e, t)
                }
            }, t.prototype.searchTeamMode = function(e, t) {
                var i = this,
                    n = c.store.getState(),
                    r = n.room,
                    o = (r.room, r.teamId),
                    a = n.player,
                    d = a.id,
                    l = a.lastTrackCode,
                    u = function() {
                        i.gameMode = e, i.initMatchService()
                    };
                return o ? s.request("POST", "room2/team/" + o + "/@matchmaking", {
                    lastTrackCode: l
                }).then(u) : s.request("POST", "room2/team/players/" + d + "/@matchmaking", {
                    gameMode: e,
                    lastTrackCode: l,
                    vid: t
                }).then(u)
            }, t.prototype.searchSingleMode = function(e, t) {
                var i = this,
                    n = function() {
                        i.gameMode = e, i.initMatchService()
                    },
                    r = c.store.getState().player,
                    o = r.level,
                    a = r.lastTrackCode,
                    d = {
                        vid: t,
                        level: o,
                        lastTrackCode: a
                    };
                if ("PURSUITINDIVIDUAL" === e) {
                    var l = this.gameModeService.getLastPursuitTechs();
                    d.pursuitItemsParam = {
                        item1: l[0],
                        item2: l[1]
                    }
                }
                return s.request("POST", "room2/quickmatch/" + e, d).then(function() {
                    return n()
                })
            }, t.prototype.initMatchService = function() {
                var e = this,
                    t = function(t) {
                        e.popupService.drawConfirm("GAMEROOM_ERROR_POPUP_TITLE", t), e.onCancel(), e.emit("matchmaking.fail", t)
                    };
                this.quickMatchService.init(this.gameMode), this.cleanUp.push(a.default.once(this.quickMatchService, "server.created", function() {
                    e.emit("matchmaking.success")
                })), this.cleanUp.push(a.default.once(this.quickMatchService, "server.timeout", t)), this.cleanUp.push(a.default.once(this.quickMatchService, "all.loaded", function() {}))
            }, t.prototype.onCancel = function() {
                this.cleanUp.forEach(function(e) {
                    return e()
                }), this.cleanUp = [], this.quickMatchService.clearMatchState(), this.quickMatchService.destroy()
            }, t.prototype.cancel = function() {
                switch (this.gameMode) {
                    case "SPEEDTEAM":
                        return this.cancelTeamMode();
                    default:
                        return this.cancelSingleMode()
                }
            }, t.prototype.cancelTeamMode = function() {
                var e, t = this;
                c.store.getState().room && c.store.getState().room.room && (e = c.store.getState().room.room.id);
                var i;
                if (void 0 === e) {
                    var n = c.store.getState().player.id;
                    i = s.request("POST", "room2/team/players/" + n + "/@cancelmatchmaking")
                } else i = s.request("POST", "room2/team/" + e + "/@cancelmatchmaking");
                return i.then(function(e) {
                    if (!e.result) throw new Error("Resource not found");
                    t.onCancel()
                })
            }, t.prototype.cancelSingleMode = function() {
                var e = this,
                    t = function(t) {
                        if (!Number(t)) throw new Error("Resource not found");
                        e.onCancel()
                    };
                return s.request("DELETE", "room2/quickmatch/" + this.gameMode).then(function(e) {
                    return t(e)
                })
            }, t.prototype.end = function() {
                return this.onCancel(), o.resolve()
            }, t.prototype.cancelForcefully = function() {
                this.onCancel()
            }, t
        }(r.EventEmitter);
    d.$inject = ["$filter", "pushService", "sessionService", "quickMatchService", "popupService", "gameModeService"], t.Room2MatchmakingService = d, angular.module("edge.components").factory("room2MatchmakingService", a.default.generateService(d))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(9),
        o = i(7),
        a = i(34),
        s = i(10),
        c = function() {
            function e(e, t) {
                this.externalService = e, this.sessionService = t, this.isKickChannel = !1
            }
            return e.prototype.init = function() {
                "tencent" === this.sessionService.config.publisher ? (o.debug("Antibot Service Initialized"), this.setCoreTencentEventListeners(), this.externalService.beAntibotInitialize(!1)) : "nexon" === this.sessionService.config.publisher && (this.setCoreNexonEventListeners(), this.notifyNGSInfoToCore(5))
            }, e.prototype.notifyNGSInfoToCore = function(t) {
                var i = this;
                this.externalService.isEdgeBrowser() && this.externalService.hasPublisherToken() && (t <= 0 || s.request("GET", "ngs/address").then(function(e) {
                    i.externalService.beSetNGSHost(e.address, e.key)
                }).catch(function(n) {
                    o.error("GET Request (/ngs/address) failed. ", n), setTimeout(function() {
                        return i.notifyNGSInfoToCore(t - 1)
                    }, e.NGS_CALL_DELTA_TIME)
                }))
            }, e.prototype.setCoreNexonEventListeners = function() {
                var e = this;
                this.externalService.on(r.default.beGetNGSHost, function() {
                    e.notifyNGSInfoToCore(5)
                })
            }, e.prototype.setCoreTencentEventListeners = function() {
                var e = this;
                this.externalService.on(r.default.beGetAntibotHost, function() {
                    "tencent" === e.sessionService.config.publisher ? s.request("GET", "antibot/info").then(function(t) {
                        e.externalService.beSetAntibotHost(t.host, Number(t.port))
                    }).catch(function(e) {
                        return o.error("GET Request (/antibot/info) failed. ", e)
                    }) : o.error("'beGetAntibotHost' is called from CORE when publisher is not set to tencent.")
                })
            }, e.prototype.punishKickChannel = function() {
                this.isKickChannel = !0
            }, e.prototype.startType2Checker = function() {
                o.info("antibot.service => START type2 checker"), this.type2CheckerTimer && (o.warn("antibot.service => previous checking timer is still alive"), this.stopType2Checker()), this.type2CheckerTimer = setInterval(this.onType2CheckingTimer.bind(this), 3e3)
            }, e.prototype.stopType2Checker = function() {
                this.type2CheckerTimer && (clearInterval(this.type2CheckerTimer), this.type2CheckerTimer = void 0)
            }, e.prototype.onType2CheckingTimer = function() {
                if (this.isKickChannel) {
                    a.getInjector().get("hudService").getMatchService().abandonMatch(), this.stopType2Checker()
                }
            }, Object.defineProperty(e.prototype, "isKicking", {
                get: function() {
                    return this.isKickChannel
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.endPunishKickChannel = function() {
                o.info("antibot.service => END type2 checker"), this.isKickChannel = !1
            }, e
        }();
    c.$inject = ["externalService", "sessionService"], c.NGS_CALL_DELTA_TIME = 3e3, t.default = c, angular.module("edge.components").factory("antibotService", n.default.generateService(c))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(6),
        o = i(60),
        a = i(4),
        s = i(10),
        c = i(3),
        d = i(227),
        l = i(5),
        u = function() {
            function e(e, t, i, n) {
                this.$filter = e, this.publisherService = t, this.playerService = i, this.serverTimeService = n
            }
            return e.prototype.fetch = function() {
                var e = this;
                return r.all([this.fetchBanners(), this.fetchTopProducts(), this.fetchCash(), this.playerService.fetchMileage()].concat(o.ProductCategories.map(function(t) {
                    return e.fetchCategoryProducts("shop_" + t.name.toLowerCase())
                })))
            }, e.prototype.fetchCash = function() {
                var e = this.publisherService.publisher;
                if ("dev" === e) return r.resolve();
                var t = "tencent" === e ? "TCCASH" : "NXCASH",
                    i = "tencent" === e ? "tc" : "nx";
                return s.request("GET", i + "/balance").then(function(e) {
                    n.debug(">> GET fetchCash - ", e), c.store.dispatch(d.fetchPubCash(t, e.balance))
                }).catch(function(e) {
                    n.error("Currency fetching error. Set cash to [0]"), c.store.dispatch(d.fetchPubCash(t, 0))
                })
            }, e.prototype.fetchBanners = function() {
                return s.request("GET", "shop/banners").then(function(e) {
                    n.debug(">> GET fetchBanners - ", e), c.store.dispatch(d.fetchBanners(e))
                })
            }, e.prototype.fetchTopProducts = function() {
                return s.request("GET", "shop/bestproducts").then(function(e) {
                    n.debug(">> GET fetchTopProducts - ", e), c.store.dispatch(d.fetchTopProducts(e))
                })
            }, e.prototype.fetchCategoryProducts = function(e) {
                return s.request("GET", "shop/products?category=" + e).then(function(t) {
                    n.debug(">> GET fetchCategoryProducts - ", t), c.store.dispatch(d.fetchProductCollection(t, e))
                })
            }, e.prototype.getProductPurchasedCount = function(e) {
                return s.request("GET", "shop/products/" + e + "/@purchasedcount").then(function(t) {
                    return n.debug("POST", "v2/shop/products/" + e + "/@purchasedcount", t), t.purchaseCount
                })
            }, e.prototype.purchaseProduct = function(e, t) {
                return s.request("POST", "shop/products/" + e + "/@purchase", {
                    price: t.price,
                    currency: t.currency,
                    count: t.count
                }).then(function(t) {
                    return n.debug(">> POST shop/products/" + e + "/@purchase", t), t
                })
            }, e.prototype.purchaseComplete = function(e) {
                return s.request("POST", "shop/orders/" + e + "/@complete").then(function(t) {
                    return n.debug("POST", "v2/shop/orders/" + e + "/@complete", t), t
                })
            }, e.prototype.purchaseCancel = function(e) {
                return s.request("POST", "shop/orders/" + e + "/@cancel").then(function(t) {
                    return n.debug("POST", "v2/shop/orders/" + e + "/@cancel", t), t
                })
            }, e.prototype.presentProduct = function(e, t, i, r, o) {
                return s.request("POST", "shop/products/" + i + "/@present", {
                    name: e,
                    receiver: t,
                    price: r.price,
                    currency: r.currency,
                    count: r.count,
                    message: o
                }).then(function(e) {
                    return n.debug(">> POST shop/products/" + i + "/@present", e), e
                })
            }, e.prototype.getProduct = function(e) {
                var t = c.store.getState().shop.productCollection,
                    i = [];
                return _.forEach(t, function(e, t) {
                    void 0 === e && (e = []), i = i.concat(e)
                }), _.find(i, {
                    code: Number(e)
                })
            }, e.prototype.getMyMoney = function(e) {
                var t = c.store.getState(),
                    i = t.player,
                    n = t.shop;
                return "SP" === e ? i.sp || 0 : "MILEAGE" === e ? i.mileage.balance || 0 : n.cash[e] || 0
            }, e.prototype.checkEnoughMoney = function(e, t) {
                return this.getMyMoney(e) >= t
            }, e.prototype.isReadyShopData = function() {
                var e = c.store.getState().shop,
                    t = e.banners.length > 0,
                    i = e.productCollection,
                    n = [];
                _.forEach(i, function(e, t) {
                    void 0 === e && (e = []), n = n.concat(e)
                });
                n.length;
                return n && t
            }, e.prototype.isOnSaleProduct = function(e) {
                var t = l(this.serverTimeService.time);
                return t.isBetween(e.viewFrom, e.viewTo) && t.isBetween(e.saleFrom, e.saleTo)
            }, e.prototype.getPopupText = function(e) {
                var t, i;
                switch (e) {
                    case "SP":
                        t = "SHOP_POPUP_PURCHASE_MYSP", i = "SHOP_POPUP_PURCHASE_AFTERPURCHASE_SP";
                        break;
                    case "NXCASH":
                    case "TCCASH":
                        t = "SHOP_POPUP_GIFT_MYCASH", i = "SHOP_POPUP_GIFT_AFTERPURCHASE";
                        break;
                    case "MILEAGE":
                        t = "SHOP_POPUP_GIFT_MYMILEAGE", i = "SHOP_POPUP_GIFT_AFTERPURCHASE_MILEAGE";
                        break;
                    default:
                        throw new Error("unsupported currency type.")
                }
                return {
                    possessionText: t,
                    balanceText: i
                }
            }, e.prototype.getProductImgPath = function(e) {
                var t = c.store.getState().shop.fallbackImgProducts[e.category];
                return !!t && t[e.code] ? this.getProductFallbackImgPath(e) : this.$filter("cdn_shop_product")(e.code)
            }, e.prototype.getProductFallbackImgPath = function(e) {
                return _.isEmpty(e.rewards) ? void 0 : this.$filter("itemCardImg")(e.rewards[0].type, e.rewards[0].code)
            }, e.prototype.isCash = function(e) {
                return ["SP", "MILEAGE"].indexOf(e) < 0
            }, e
        }();
    u.$inject = ["$filter", "publisherService", "playerService", "serverTimeService"], t.default = u, angular.module("edge.components").factory("shopService", a.default.generateService(u))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = i(7),
        a = i(6),
        s = i(4),
        c = i(1132),
        d = i(10),
        l = i(63),
        u = i(3),
        p = i(60),
        h = function(e) {
            function t(t, i, n, r, o, a, s, d) {
                var l = e.call(this) || this;
                return l.configLoader = t, l.announcementService = i, l.externalService = n, l.popupService = r, l.pushService = o, l.antibotService = a, l.vehicleService = s, l.serverTimeService = d, l.init = _.once(function() {
                    l.pushService.on("msg", l.onMessage.bind(l)), l.delegate.init(), l.fetchIgr()
                }), l.configLoader.getConfig().then(function(e) {
                    switch (l.config = e, l.config.publisher) {
                        case "tencent":
                            l.delegate = new c.Tencent(l.pushService, l.antibotService, l.announcementService, l.externalService, l.popupService);
                            break;
                        case "nexon":
                            l.delegate = new c.Nexon(l.externalService, l.announcementService, l.pushService, l.popupService, l.serverTimeService);
                            break;
                        default:
                            l.delegate = new c.Publisher
                    }
                }), l
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "publisher", {
                get: function() {
                    return this.config.publisher
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "isIgr", {
                get: function() {
                    return this.igr
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onMessage = function(e) {
                "igr" === e.cmd && this.setIgr(e.opts)
            }, t.prototype.setIgr = function(e) {
                var t = this;
                this.igr = (e || {}).igr, this.igr ? this.vehicleService.fetchIgrVehicles().then(function() {
                    return t.emit("igr")
                }) : (u.store.dispatch(l.fetchIgr({
                    vehicles: []
                })), this.emit("igr"))
            }, t.prototype.getDisconnectReason = function(e) {
                return this.delegate.getDisconnectReason(e)
            }, t.prototype.isNoReward = function() {
                return this.delegate.isNoReward()
            }, t.prototype.getFatigueRate = function() {
                return this.delegate.getFatigueRate()
            }, t.prototype.initIngameWebViewCookies = function() {
                this.delegate.initIngameWebViewCookies(this.config)
            }, t.prototype.hasBanWord = function(e) {
                return this.delegate.hasBanWord(e)
            }, t.prototype.matchBanWords = function(e) {
                return this.delegate.matchBanWords(e)
            }, t.prototype.getLeaderboardUri = function() {
                return this.delegate.getLeaderboardUri()
            }, t.prototype.getPlayerInfoUri = function() {
                return this.delegate.getPlayerInfoUri()
            }, t.prototype.isNeedUpdateIgrVehicles = function() {
                if (!this.isIgr) return !1;
                var e = u.store.getState().vehicle.igr;
                return !e || e.endAt < this.serverTimeService.time
            }, t.prototype.notifyLoginStatus = function(e) {
                this.delegate.notifyLoginStatus(e)
            }, t.prototype.notifyLoginErrorStatus = function(e) {
                this.delegate.notifyLoginErrorStatus(e)
            }, t.prototype.fetchIgr = function() {
                var e = this;
                if ("dev" === this.publisher) return a.resolve(this.igr);
                var t = function() {
                    return "nexon" === e.publisher ? "nx" : "tencent" === e.publisher ? "tc" : void 0
                }();
                return d.request("GET", t + "/igr").then(function(t) {
                    return e.setIgr(t), t.igr
                })
            }, t.prototype.isDisablePurchaseNumperPlate = function() {
                return "nexon" === this.publisher
            }, t.prototype.putIgr = function(e) {
                return d.request("PUT", ("dev" === this.publisher ? "publisher" : this.publisher) + "/igr", {
                    igr: e
                })
            }, t.prototype.postBlock = function(e, t) {
                switch (this.publisher) {
                    case "tencent":
                        return d.request("POST", "tencent/underage/block", {
                            duration: e,
                            message: t
                        });
                    default:
                        return a.resolve()
                }
            }, t.prototype.getChargeUrl = function() {
                return this.delegate.getChargeUrl()
            }, t.prototype.openChargeWindow = function() {
                var e = this,
                    t = p.ChargeWindowSize[this.publisher],
                    i = t.width,
                    n = t.height;
                return this.getChargeUrl().then(function(t) {
                    return o.debug(">> open charge windows", t), new a(function(r, o, a) {
                        e.delegate.openChargeWindow(t, i, n, r), a(function() {
                            return e.delegate.cancelChargeWindow()
                        })
                    })
                })
            }, t
        }(r.EventEmitter);
    h.$inject = ["configLoader", "announcementService", "externalService", "popupService", "pushService", "antibotService", "vehicleService", "serverTimeService"], t.PublisherService = h, angular.module("edge.components").factory("publisherService", s.default.service(h))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(4),
        o = i(10),
        a = function() {
            function e() {}
            return e.prototype.init = function() {
                var e = this;
                return this.featureSet ? n.resolve() : o.request("GET", "staticdata/clientfeature").then(function(t) {
                    e.featureSet = {};
                    for (var i = 0, n = t || []; i < n.length; i++) {
                        var r = n[i];
                        e.featureSet[r] = !0
                    }
                }).then(function() {
                    $("<style>.id-chatBackground { display: none; }</style>").appendTo("head")
                })
            }, e.prototype.isEnabled = function(e) {
                return this.featureSet && this.featureSet[e]
            }, e.prototype.cheatEnable = function(e) {
                this.featureSet && (this.featureSet[e] = !0)
            }, e.prototype.cheatDisable = function(e) {
                this.featureSet && (this.featureSet[e] = !1)
            }, e
        }();
    t.FeatureSetService = a, angular.module("edge.components").factory("featureSetService", r.default.service(a))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(15),
        a = i(4),
        s = i(10),
        c = i(3),
        d = i(40),
        l = i(585),
        u = i(1136),
        p = i(1137),
        h = i(586),
        f = i(1138),
        v = i(38),
        m = i(40),
        g = i(29),
        y = i(1139),
        S = i(44),
        E = i(1140),
        T = i(34),
        C = function() {
            function e(e, t, i, n, r, o, a, s, c, d) {
                var l = this;
                this.$filter = e, this.pushService = t, this.playerSnippetService = i, this.staticdata = n, this.globalKeyService = r, this.contactsService = o, this.inGameConfigService = a, this.worldChatCommandService = s, this.externalService = c, this.featureSetService = d, this.chatFilterManager = new u.ChatFilterManager, this.chatSystemMsgHelper = new f.default, this.chatSourceRecorder = new y.default, this.eventLimitHelper = new E.EventLimitHelper, this.blacklist = [], this._lastRaceState = v.ChatRaceState.None, this._raceState = v.ChatRaceState.None, this.isBanned = !1, this.contextMenuGroups = {}, this.displayMessageRouteContainer = [], this.excutingRoute = !1, this.onPushedChannelJoined = function(e, t) {
                    "" !== t.body.channelCode && (l.channelCode = +t.body.channelCode, h.ChatCacheManager.localStoreChannelCode(l.channelCode))
                }, this.onPushedRoomJoined = function(e, t) {
                    "" === t.body.roomId ? l.leaveRoom() : l.enterRoom(), l.roomId = +t.body.roomId, h.ChatCacheManager.localStoreRoomId(l.roomId)
                }, this.onPushedTeamJoined = function(e, t) {
                    l.teamId = t.body.roomId, l.raceState = l.teamId ? v.ChatRaceState.QuickTeam : v.ChatRaceState.None, h.ChatCacheManager.localStoreTeamId(l.teamId)
                }, this.onPushedMatchJoined = function(e, t) {
                    "" === t.body.matchId ? l.leaveMatch() : l.enterMatch(), l.matchId = +t.body.matchId, h.ChatCacheManager.localStoreMatchId(l.matchId)
                }, this.onPushedLobbyJoined = function(e, t) {
                    "" === t.body.lobbyId ? l.leaveRoom() : l.enterLobby(), l.lobbyId = +t.body.lobbyId, h.ChatCacheManager.localStorelobbyId(l.lobbyId)
                }, this.onPushedOpenworldJoined = function(e, t) {
                    var i = t.body.openworldId;
                    l.setRaceStateForOpenworld(+i)
                }, this.onPushedBaseInstanMessage = function(e, t) {
                    _.forEach(t.body.message, function(e) {
                        var t = l.generateBaseInstantMessage(e),
                            i = l.createBaseInstantMessageDisplayRoute(t);
                        l.onMessageRouteComing(i)
                    })
                }, this.onPushedWhisperMessage = function(e, t) {
                    var i = l.generateWhisperMessage(t.body.message),
                        n = l.createBaseInstantMessageDisplayRoute(i);
                    l.onMessageRouteComing(n)
                }, this.registerPushMessage()
            }
            return Object.defineProperty(e.prototype, "channelCode", {
                get: function() {
                    return this._channelCode
                },
                set: function(e) {
                    this._channelCode = e, c.store.dispatch(d.changeChannel(e))
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "clanId", {
                get: function() {
                    var e = c.store.getState().clan,
                        t = e.myClanInfo;
                    return t ? t.id : null
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "helpTooltipData", {
                get: function() {
                    return {
                        data: this._helpTooltipData,
                        marginLeft: 25,
                        marginTop: 18,
                        paddingBottom: 18
                    }
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.init = function() {
                if (!this._init) {
                    this._init = !0, this.initFilters(), this.initTabs();
                    var e = this.staticdata.worldChatData;
                    c.store.dispatch(m.setMessageCountLimit(parseInt(e.getConfig("CHAT_MAX_MESSAGE_COUNT"), 10))), this.registerFloodPreventEvents(), this.registerContextMenu(), this.buildTooltipData();
                    var t = parseInt(e.getConfig("CHAT_SOURCE_RECORD_LIMITE"), 10);
                    _.isNaN(t) || (this.chatSourceRecorder.maximum = t);
                    var i = {
                        onEvent: this.enterKeyhandler.bind(this)
                    };
                    this.globalKeyService.pushListener(g.KeyboardMap.getKeyCode("ENTER"), i);
                    var n = {
                        onEvent: this.closeKeyhandler.bind(this)
                    };
                    this.globalKeyService.pushListener(g.KeyboardMap.getKeyCode("ESCAPE"), n);
                    var r = {
                        onEvent: this.f2KeyHandler.bind(this)
                    };
                    this.globalKeyService.pushListener(g.KeyboardMap.getKeyCode("F2"), r), this.channelCode = h.ChatCacheManager.getLocalChannelCode(), this.roomId = h.ChatCacheManager.getLocalRoomId(), this.teamId = h.ChatCacheManager.getLocalTeamId(), this.matchId = h.ChatCacheManager.getLocalMatchId(), this.lobbyId = h.ChatCacheManager.getLocalLobbyId(), this.openworldId = h.ChatCacheManager.getLocalOpenworldId(), this.fetchBroadcastTicketCount()
                }
            }, Object.defineProperty(e.prototype, "sourceRecorder", {
                get: function() {
                    return this.chatSourceRecorder
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.initTabs = function() {
                var e = this.staticdata.worldChatData,
                    t = e.getConfig("MINI_CHAT_DEFAULT_TAB") || "general";
                c.store.dispatch(d.setMinibarDefaultTab(t));
                var i = _.cloneDeep(e.tabs);
                this.featureSetService.isEnabled("CLAN") || (i = _.omit(i, "clan"));
                var r = [];
                for (var o in i) {
                    var a = i[o],
                        s = n.__assign({}, a, {
                            isActivated: a.id === t,
                            isEnabled: !0,
                            isLocked: !1,
                            selectedSources: a.selectedfilters.map(function(e) {
                                return e.source
                            }),
                            lastFiltersState: {}
                        });
                    r.push(s)
                }
                c.store.dispatch(d.addTabs(r)), this.onTabActived(_.find(r, {
                    isActivated: !0
                }))
            }, e.prototype.enterKeyhandler = function(e) {
                return c.store.getState().worldChat.displayType !== v.ChatDisplayType.MiniChatBar || (c.store.dispatch(m.openMainChatWindow()), !1)
            }, e.prototype.f2KeyHandler = function(e) {
                if (c.store.getState().worldChat.hidingEnabled) return this.inGameConfigService.toggleCoreChat(), !1
            }, e.prototype.closeKeyhandler = function(e) {
                return c.store.dispatch(m.closeMainChatWindow()), l.hide(), !1
            }, e.prototype.initFilters = function() {
                var e = this,
                    t = _.cloneDeep(this.staticdata.worldChatData.filters);
                this.featureSetService.isEnabled("CLAN") || (t = _.omit(t, "clan")), _.forEach(t, function(t) {
                    t.id;
                    e.chatFilterManager.registerFilter(t.id, {
                        filter: p.makeSourceFilter(t.source),
                        enable: !1,
                        selected: !1
                    }), t.visible && c.store.dispatch(d.addFilterMenuItem(t.id, t.nameID, !1, !1))
                }), this.chatFilterManager.registerFilter("filter-blocklist", {
                    filter: p.blocklistFilter(this.getBlacklist()),
                    enable: !1,
                    selected: !1
                })
            }, e.prototype.registerPushMessage = function() {
                this.pushService.subscribeResource(/chat.channel.joined/, this.onPushedChannelJoined), this.pushService.subscribeResource(/chat.match.joined/, this.onPushedMatchJoined), this.pushService.subscribeResource(/chat.room.joined/, this.onPushedRoomJoined), this.pushService.subscribeResource(/chat.qtm.joined/, this.onPushedTeamJoined), this.pushService.subscribeResource(/chat.lobby.joined/, this.onPushedLobbyJoined), this.pushService.subscribeResource(/chat.ow.joined/, this.onPushedOpenworldJoined), this.pushService.subscribeResource(/chat.(channel|clan|match|room|lobby|broadcasting|qtm|ow).message.arrived/, this.onPushedBaseInstanMessage), this.pushService.subscribeResource(/chat.whispering.message.arrived/, this.onPushedWhisperMessage)
            }, e.prototype.registerFloodPreventEvents = function() {
                var e = this,
                    t = this.staticdata.worldChatData,
                    i = parseInt(t.getConfig("CHAT_FLODD_PREVENT_CHECK_MILLISECONDS"), 10),
                    n = parseInt(t.getConfig("CHAT_FLOOD_PREVENT_TRY_TIMES"), 10),
                    r = parseInt(t.getConfig("CHAT_FLOOD_BANNED_MILLISECNODS"), 10);
                this.eventLimitHelper.registerTriesInTimeLimitEvent("SEND_MSG_LIMIT", n, i, null, function() {
                    e.onTriggerFlood()
                }), this.eventLimitHelper.registerTimeLimitEvent("BANNED_LIMIT", r, function() {
                    e.isBanned = !1
                }, function(t) {
                    var i = (r - t) / 1e3 + 1,
                        n = r / 1e3;
                    i = i > n ? n : i, i = parseInt(i.toString(), 10);
                    var o = e.chatSystemMsgHelper.getSystemMsgByCode(9, {
                        number: i
                    });
                    e.printSystemMsg(o)
                })
            }, e.prototype.onTriggerFlood = function() {
                this.isBanned = !0, this.eventLimitHelper.limit("BANNED_LIMIT")
            }, e.prototype.isOpenworldMessage = function(e) {
                return e.source === v.ChatSourceType.Race && this.raceState === v.ChatRaceState.Openworld
            }, e.prototype.addFilteredMessage = function(e) {
                var t = this.chatFilterManager.isPassed(e);
                c.store.dispatch(d.addChatMessage(e, t)), t && this.isOpenworldMessage(e) && this.externalService.beOnOpenworldChat(e.playerId, e.text)
            }, e.prototype.resetAllFilters = function(e) {
                this.chatFilterManager.resetAllFilters(e)
            }, e.prototype.enableFilterMenuItem = function(e, t) {
                c.store.dispatch(d.enableFilterMenuItem(e, t))
            }, e.prototype.toggleFilterMenuItem = function(e, t) {
                this.chatFilterManager.toggleFilterMenuItem(e, t), c.store.dispatch(d.toggleFilterMenuItem(e, t)), c.store.dispatch(d.refreshChatMessages(this.chatFilterManager))
            }, e.prototype.refreshChatMessages = function() {
                c.store.dispatch(d.refreshChatMessages(this.chatFilterManager))
            }, e.prototype.setCurrentSource = function(e, t) {
                var i = this.generateMsgOptsBySource(e, t);
                return !!i && (this.chatOpts = i, this.currentSource = e, c.store.dispatch(d.changeSource(this.chatOpts)), !0)
            }, e.prototype.getCurrentSource = function() {
                return this.currentSource
            }, e.prototype.setCurrentFromRecord = function(e) {
                var t = {
                        sourceType: this.currentSource,
                        parameters: {
                            playerId: this.chatOpts.playerId,
                            playerName: this.chatOpts.playerName
                        }
                    },
                    i = e ? this.sourceRecorder.next(t) : this.sourceRecorder.previous(t);
                i && this.setCurrentSource(i.sourceType, i.parameters)
            }, e.prototype.generateMsgOptsBySource = function(e, t) {
                var i = {
                    placeHolderText: this.$filter("translate")("CHATTING_MINI_TIP_5")
                };
                switch (t = n.__assign({}, t, i), e) {
                    case v.ChatSourceType.Channel:
                        return this.generateChannelMsgOpts(t);
                    case v.ChatSourceType.Clan:
                        return this.currentSource !== e ? this.generateClanMsgOpts(t) : null;
                    case v.ChatSourceType.Whisper:
                        return this.generateWisperMsgOpts(e, t);
                    case v.ChatSourceType.Race:
                        return this.currentSource !== e ? this.generateRaceMsgOpts(t) : null;
                    default:
                        return null
                }
            }, e.prototype.generateChannelMsgOpts = function(e) {
                return this.channelCode ? {
                    fn: this.sendChannelMsg.bind(this),
                    source: v.ChatSourceType.Channel,
                    channelCode: this.channelCode,
                    placeHolderText: e.placeHolderText
                } : null
            }, e.prototype.generateClanMsgOpts = function(e) {
                return this.clanId ? {
                    fn: this.sendClanMsg.bind(this),
                    source: v.ChatSourceType.Clan,
                    clanId: this.clanId,
                    placeHolderText: e.placeHolderText
                } : null
            }, e.prototype.generateWisperMsgOpts = function(e, t) {
                if (t.playerId && t.playerName) return {
                    fn: this.sendWhisperMsg.bind(this),
                    source: v.ChatSourceType.Whisper,
                    playerId: t.playerId,
                    playerName: t.playerName,
                    displayTabHint: !1
                };
                var i = this.chatSourceRecorder.lastWhisper();
                return i ? i.parameters.playerId && i.parameters.playerName ? {
                    fn: this.sendWhisperMsg.bind(this),
                    source: v.ChatSourceType.Whisper,
                    playerId: i.parameters.playerId,
                    playerName: i.parameters.playerName,
                    displayTabHint: !1
                } : null : {
                    fn: this.sendEmptyMsg.bind(this),
                    source: v.ChatSourceType.Whisper,
                    placeHolderText: this.$filter("translate")("CHATTING_WHISPER_NOTARGET"),
                    hideSourceNameThisTime: !0
                }
            }, e.prototype.generateRaceMsgOpts = function(e) {
                return {
                    fn: this.sendRaceMsg.bind(this),
                    source: v.ChatSourceType.Race,
                    placeHolderText: e.placeHolderText
                }
            }, e.prototype.enterRoom = function() {
                this.raceState = v.ChatRaceState.Room
            }, e.prototype.leaveRoom = function() {
                this.raceState = v.ChatRaceState.None
            }, e.prototype.leaveMatch = function() {
                v.ChatRaceState.Match === this.raceState && (this.raceState = this._lastRaceState)
            }, e.prototype.enterMatch = function() {
                this.raceState = v.ChatRaceState.Match
            }, e.prototype.enterLobby = function() {
                this.raceState = v.ChatRaceState.Lobby
            }, e.prototype.setRaceStateForOpenworld = function(e) {
                e > 0 ? this.raceState = v.ChatRaceState.Openworld : this.raceState === v.ChatRaceState.Openworld && (this.raceState = v.ChatRaceState.None), this.openworldId = e, h.ChatCacheManager.localStoreOpenworldId(this.openworldId)
            }, Object.defineProperty(e.prototype, "raceState", {
                get: function() {
                    return this._raceState
                },
                set: function(e) {
                    if (e !== v.ChatRaceState.Openworld && (this._raceState === v.ChatRaceState.None && e !== v.ChatRaceState.None || this._raceState !== e && e === v.ChatRaceState.Room)) {
                        var t = this.staticdata.worldChatData,
                            i = t.getConfig("SIMPLE_CHAT_DEFAULT_TAB");
                        i && c.store.dispatch(d.activeTab(i))
                    }
                    this._lastRaceState = this._raceState, this._raceState = e
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.generateBaseInstantMessage = function(e) {
                var t = e,
                    i = this.translateChatSource(t.type),
                    n = {
                        source: i,
                        playerId: t.senderId,
                        playerName: "",
                        text: t.text,
                        timestamp: t.timestamp,
                        owned: this.checkMsgOwned(t.senderId)
                    };
                return i === v.ChatSourceType.Race && (n.team = this.getRaceTeam(t.type, t.senderId)), n
            }, e.prototype.generateWhisperMessage = function(e) {
                var t = e,
                    i = this.translateChatSource(t.type),
                    n = this.checkMsgOwned(t.senderId);
                return {
                    source: i,
                    playerId: n ? t.receiverId : t.senderId,
                    playerName: "",
                    text: t.text,
                    timestamp: t.timestamp,
                    owned: n
                }
            }, e.prototype.createBaseInstantMessageDisplayRoute = function(e) {
                return {
                    message: e,
                    checkDisplayFns: [{
                        pass: !1,
                        finish: !1,
                        checkFn: this.fetchSenderName.bind(this),
                        checkCallBack: this.onFetchNameFinish.bind(this)
                    }],
                    displayFn: this.onMessageReady.bind(this)
                }
            }, e.prototype.translateChatSource = function(e) {
                switch (e) {
                    case o.WorldChat.ChatType.Channel:
                        return v.ChatSourceType.Channel;
                    case o.WorldChat.ChatType.Clan:
                        return v.ChatSourceType.Clan;
                    case o.WorldChat.ChatType.Room:
                    case o.WorldChat.ChatType.QuickTeamMatch:
                    case o.WorldChat.ChatType.Lobby:
                    case o.WorldChat.ChatType.Match:
                    case o.WorldChat.ChatType.Openworld:
                        return v.ChatSourceType.Race;
                    case o.WorldChat.ChatType.Whispering:
                        return v.ChatSourceType.Whisper;
                    case o.WorldChat.ChatType.Broadcasts:
                        return v.ChatSourceType.Broadcast;
                    default:
                        return v.ChatSourceType.Other
                }
            }, e.prototype.getRaceTeam = function(e, t) {
                switch (e) {
                    case o.WorldChat.ChatType.Room:
                    case o.WorldChat.ChatType.Lobby:
                        var i = c.store.getState().room.room;
                        if (i) {
                            var n = _.find(i.players, {
                                pid: t
                            });
                            return n && n.team
                        }
                        break;
                    case o.WorldChat.ChatType.Match:
                        var r = c.store.getState().match.match;
                        if (r) {
                            var n = _.find(r.players, {
                                id: t
                            });
                            return n && n.team
                        }
                }
            }, e.prototype.checkMsgOwned = function(e) {
                var t = c.store.getState().player;
                return !(!t.id || t.id !== e)
            }, e.prototype.onMessageRouteComing = function(e) {
                this.displayMessageRouteContainer.push(e), this.excutingRoute || this.excuteRoute()
            }, e.prototype.excuteRoute = function() {
                if (0 === this.displayMessageRouteContainer.length) return void(this.excutingRoute = !1);
                this.excutingRoute = !0;
                var e = this.displayMessageRouteContainer.pop();
                this.startDisplayMessageRoute(e)
            }, e.prototype.startDisplayMessageRoute = function(e) {
                e.checkDisplayFns.forEach(function(t) {
                    t.pass || t.checkFn(e, t)
                })
            }, e.prototype.fetchSenderName = function(e, t) {
                this.playerSnippetService.getSnippetAsync(e.message.playerId).then(function(i) {
                    e.message.playerName = i.name, e.message.isManager = i.isManager, t.pass = !0, t.checkCallBack(e, t)
                }).catch(function(i) {
                    e.message.playerName = e.message.playerId, t.pass = !1, t.checkCallBack(e, t)
                })
            }, e.prototype.onFetchNameFinish = function(e, t) {
                t.finish = !0, this.checkRouteResult(e)
            }, e.prototype.checkRouteResult = function(e) {
                var t = !0,
                    i = !0;
                e.checkDisplayFns.forEach(function(e) {
                    e.pass || (t = !1), e.finish || (i = !1)
                }), t && e.displayFn(e.message), i && this.excuteRoute()
            }, e.prototype.onMessageReady = function(e) {
                this.addFilteredMessage(e)
            }, e.prototype.joinChannel = function(e) {
                var t = this,
                    i = NaN;
                if (/^[0-9]+$/.test(e) && (i = Number(e)), !i) {
                    this.printSystemMsgByCode(2);
                    var n = this.chatSystemMsgHelper.getSystemMsgByCode(2);
                    return Promise.reject(new Error(n))
                }
                return s.request("POST", "chat/channels/" + i, {}).then(function() {
                    t.printSystemMsgByCode(102)
                }).catch(function(e) {
                    var i = S.getChatErrorDescriptionCode(e);
                    t.handleServerError(i)
                })
            }, e.prototype.sendMsg = function(e) {
                var t = this;
                return new Promise(function(i) {
                    return t.isBanned ? void t.eventLimitHelper.limit("BANNED_LIMIT") : (t.eventLimitHelper.limit("SEND_MSG_LIMIT"), t.isBanned ? void t.eventLimitHelper.limit("BANNED_LIMIT") : void t.chatOpts.fn(e, t.chatOpts).then(function() {
                        i(t.chatOpts), t.chatSourceRecorder.add({
                            sourceType: t.chatOpts.source,
                            parameters: {
                                playerId: t.chatOpts.playerId,
                                playerName: t.chatOpts.playerName
                            }
                        })
                    }).catch(function(e) {
                        var i = S.getChatErrorDescriptionCode(e);
                        t.handleServerError(i)
                    }))
                })
            }, e.prototype.sendBroadcastMsg = function(e) {
                var t = this;
                return new Promise(function(i, n) {
                    return t.isBanned ? (t.eventLimitHelper.limit("BANNED_LIMIT"), void i()) : (t.eventLimitHelper.limit("SEND_MSG_LIMIT"), t.isBanned ? (t.eventLimitHelper.limit("BANNED_LIMIT"), void i()) : void t.sendBroadcast(e).then(function(e) {
                        if (e) {
                            var t = e.itemCount || 0;
                            c.store.dispatch(d.updateBroadcastTicketCount(t))
                        }
                        i()
                    }).catch(function(e) {
                        n(e)
                    }))
                })
            }, e.prototype.jsonfyPlayerName = function(e) {
                return e && 0 !== e.length ? _.map(e, function(e) {
                    return "<Player>" + JSON.stringify(e) + "<Player>"
                }).join("") : ""
            }, e.prototype.printRoomSystemMsg = function(e, t) {
                var i = e ? this.jsonfyPlayerName([{
                        id: e.pid,
                        name: e.name
                    }]) + " " : "",
                    n = i + this.$filter("translate")(t);
                this.printSystemMsg(n)
            }, e.prototype.printInviteFriendServerErrorMsg = function(e) {
                var t = S.getAddFriendErrorDesc(e);
                this.printSystemMsg(this.$filter("translate")(t))
            }, e.prototype.printSystemMsgByCode = function(e) {
                var t = this.chatSystemMsgHelper.getSystemMsgByCode(e);
                t && this.printSystemMsg(t)
            }, e.prototype.printSystemMsg = function(e) {
                var t = {
                    source: v.ChatSourceType.System,
                    text: e,
                    timestamp: Date.now(),
                    owned: !0
                };
                this.addFilteredMessage(t)
            }, e.prototype.printMultiRaceMsg = function(e) {
                var t = {
                    source: v.ChatSourceType.MultiRace,
                    text: e,
                    timestamp: Date.now(),
                    owned: !0
                };
                this.addFilteredMessage(t)
            }, e.prototype.printSystemMessage = function(e, t) {
                var i;
                i = t ? this.$filter("template")(t, e) : this.$filter("translate")(e), this.printSystemMsg(i)
            }, e.prototype.printNoticeMessage = function(e) {
                this.printSystemMsg(this.$filter("translate")("CHATTING_PREFIX_NOTICE") + " " + e)
            }, e.prototype.sendEmptyMsg = function(e, t) {
                return this.printSystemMsg(this.$filter("translate")("CHATTING_WHISPER_NOTARGET")), Promise.reject(new Error("Invalid Whisper"))
            }, e.prototype.sendChannelMsg = function(e, t) {
                return s.request("POST", "chat/channels/" + t.channelCode + "/messages", {
                    message: e
                })
            }, e.prototype.sendClanMsg = function(e, t) {
                return s.request("POST", "chat/clans/" + t.clanId + "/messages", {
                    message: e
                })
            }, e.prototype.sendRaceMsg = function(e, t) {
                switch (this.raceState) {
                    case v.ChatRaceState.Lobby:
                        return s.request("POST", "chat/lobbies/" + this.lobbyId + "/messages", {
                            message: e
                        });
                    case v.ChatRaceState.Room:
                        return s.request("POST", "chat/rooms/" + this.roomId + "/messages", {
                            message: e
                        });
                    case v.ChatRaceState.QuickTeam:
                        return s.request("POST", "chat/quickteammatch/" + this.teamId + "/messages", {
                            message: e
                        });
                    case v.ChatRaceState.Match:
                        return s.request("POST", "chat/matches/" + this.matchId + "/messages", {
                            message: e
                        });
                    case v.ChatRaceState.Openworld:
                        return s.request("POST", "chat/openworld/" + this.openworldId + "/messages", {
                            message: e
                        });
                    default:
                        return this.printSystemMsg("CHATTING_LOBBY_UNAVAILABLE"), Promise.resolve()
                }
            }, e.prototype.sendWhisperMsg = function(e, t) {
                return s.request("POST", "chat/players/" + t.playerId + "/messages", {
                    message: e
                })
            }, e.prototype.sendBroadcast = function(e) {
                return s.request("POST", "chat/broadcasts", {
                    message: e
                })
            }, e.prototype.sendleaveMatch = function() {
                return s.request("DELETE", "chat/matches/@leave").catch(function(e) {
                    return r.debug(e)
                })
            }, e.prototype.fetchBroadcastTicketCount = function() {
                s.request("GET", "chat/broadcasts/item").then(function(e) {
                    var t = e.itemCount || 0;
                    c.store.dispatch(d.updateBroadcastTicketCount(t))
                }).catch(function(e) {
                    return r.debug(e)
                })
            }, e.prototype.displayChatContextMenu = function(e, t, i, n) {
                var r = c.store.getState().player;
                if (e !== r.id && t !== r.name) {
                    var o = this.generateChatMenuOrderList(e, t),
                        a = 0;
                    o.forEach(function(e, t) {
                        e.style = t % 2 == 1 ? {
                            height: 40,
                            backgroundColor: "#34383B"
                        } : {
                            height: 40,
                            backgroundColor: "#343D40"
                        }, a += 40
                    });
                    var s = {
                        top: i,
                        left: n,
                        height: a
                    };
                    l.render(s, "chat-context-menu", o)
                }
            }, e.prototype.registerContextMenu = function() {
                var e = this;
                _.each(this.staticdata.worldChatData.contextMenu, function(t) {
                    var i = e.contextMenuGroups[t.groupId];
                    i ? i.push(t) : (e.contextMenuGroups[t.groupId] = [], e.contextMenuGroups[t.groupId].push(t))
                })
            }, e.prototype.generateChatMenuOrderList = function(e, t) {
                var i = this,
                    n = {
                        id: e,
                        name: t
                    },
                    r = [];
                return _.each(this.contextMenuGroups, function(e) {
                    var t = e[0];
                    if (e.length > 1) {
                        var o = e[0].selectHandler;
                        if (o && "function" == typeof i[o]) {
                            var a = i[o](n);
                            t = i.staticdata.worldChatData.contextMenu[a]
                        }
                    }
                    if (t) {
                        var s = {
                            orderName: i.$filter("translate")(t.nameID),
                            data: n,
                            callback: "function" == typeof i[t.handler] ? i[t.handler].bind(i) : null
                        };
                        r.push(s)
                    }
                }), r
            }, e.prototype.onContextMenuWisper = function(e) {
                this.setCurrentSource(v.ChatSourceType.Whisper, {
                    playerId: e.id,
                    playerName: e.name
                })
            }, e.prototype.onContextPlayerInfo = function() {}, e.prototype.onContextMenuInviteFriend = function(e) {
                var t = this;
                this.contactsService.inviteFriend(e.name).then(function() {
                    t.printSystemMsgByCode(103)
                }).catch(function(e) {
                    t.printInviteFriendServerErrorMsg(e)
                })
            }, e.prototype.onContextMenuBlock = function(e) {
                this.addPlayerToBlacklist(e.id, e.name) && this.printBlockMsg(!0, e.name, e.id)
            }, e.prototype.onContextMenuUnBlock = function(e) {
                this.removePlayerFromBlacklistById(e.id) || this.removePlayerFromBlacklistByName(e.name), this.printBlockMsg(!1, e.name, e.id)
            }, e.prototype.onContextMenuReport = function() {}, e.prototype.onContextMenuInviteGame = function() {}, e.prototype.checkContextMenuBlock = function(e) {
                return -1 === this.checkPlayerInBlacklistById(e.id) && -1 === this.checkPlayerInBlacklistByName(e.name) ? "block" : "unblock"
            }, e.prototype.checkPlayerInBlacklistById = function(e) {
                var t = -1;
                return e && "" !== e ? (this.blacklist.forEach(function(i, n) {
                    if (i.id === e) return void(t = n)
                }), t) : t
            }, e.prototype.checkPlayerInBlacklistByName = function(e) {
                var t = -1;
                return e && "" !== e ? (this.blacklist.forEach(function(i, n) {
                    if (i.name === e) return void(t = n)
                }), t) : t
            }, e.prototype.removePlayerFromBlacklistById = function(e) {
                var t = this.checkPlayerInBlacklistById(e);
                return -1 !== t && (this.blacklist.splice(t), !0)
            }, e.prototype.removePlayerFromBlacklistByName = function(e) {
                var t = this.checkPlayerInBlacklistByName(e);
                return -1 !== t && (this.blacklist.splice(t), !0)
            }, e.prototype.addPlayerToBlacklist = function(e, t) {
                var i = c.store.getState().player;
                return e === i.id || t === i.name ? (this.printSystemMsgByCode(204), !1) : -1 === this.checkPlayerInBlacklistById(e) && (this.blacklist.push({
                    id: e,
                    name: t
                }), !0)
            }, e.prototype.getBlacklist = function() {
                return this.blacklist
            }, e.prototype.printBlockMsg = function(e, t, i) {
                void 0 === i && (i = "");
                var n = e ? 100 : 101,
                    r = this.jsonfyPlayerName([{
                        id: i,
                        name: t
                    }]),
                    o = this.chatSystemMsgHelper.getSystemMsgByCode(n, {
                        playername: r
                    });
                this.printSystemMsg(o)
            }, e.prototype.getFilterManager = function() {
                return this.chatFilterManager
            }, e.prototype.onTabActived = function(e) {
                var t = this;
                if (e) {
                    if (this.setCurrentSource(e.defaultSource), this.worldChatCommandService.deregisterAll(), e.commands.forEach(function(e) {
                            t.worldChatCommandService.register(e)
                        }), "race" === e.id && this.featureSetService.isEnabled("ESPORTS")) {
                        var i = this.staticdata.worldChatData.commands.invite;
                        this.worldChatCommandService.register(i)
                    }
                    var n = [];
                    e.selectedfilters.forEach(function(t) {
                        !1 !== e.lastFiltersState[t.id] && n.push(t.id)
                    }), this.resetAllFilters(n), e.enablefilters.forEach(function(e) {
                        t.enableFilterMenuItem(e.id, !0)
                    }), this.refreshChatMessages();
                    var r = [];
                    e.selectedfilters.forEach(function(e) {
                        r.push(e.source)
                    }), this.sourceRecorder.allow = r, this.sourceRecorder.resetSourceList()
                }
            }, e.prototype.getHintOfCurrentTab = function() {
                var e = this,
                    t = c.store.getState().worldChat,
                    i = "";
                return _.forEach(t.tabStates, function(t, n) {
                    t.isActivated && (i = _.isEmpty(t.hint) ? "" : e.$filter("translate")(t.hint))
                }), i
            }, e.prototype.onSlashCommandBlockWithPlayerName = function(e) {
                -1 === this.checkPlayerInBlacklistByName(e) ? this.addPlayerToBlacklist("", e) && this.printBlockMsg(!0, e) : (this.removePlayerFromBlacklistByName(e), this.printBlockMsg(!1, e))
            }, e.prototype.onSlashCommandShowClanMemebers = function(e) {
                if (void 0 === e && (e = !1), !this.clanId) return void this.printSystemMsgByCode(202);
                if (e) return void this.printSystemMsgByCode(203);
                var t = c.store.getState().clan.members;
                if (t) {
                    var i = [];
                    _.forEach(t, function(e, t) {
                        e.playerInfo.online && i.push({
                            id: e.pid,
                            name: e.playerInfo.name
                        })
                    });
                    var n = this.jsonfyPlayerName(i),
                        r = this.chatSystemMsgHelper.getSystemMsgByCode(104, {
                            number: i.length,
                            members: n
                        });
                    this.printSystemMsg(r)
                }
            }, e.prototype.onSlashCommandBroadCast = function() {
                c.store.dispatch(d.openBroadcastWindow())
            }, e.prototype.onSlashCommandWhisperByName = function(e) {
                var t = this,
                    i = this.playerSnippetService.getSnippetByName(e);
                i ? this.setCurrentSource(v.ChatSourceType.Whisper, {
                    playerId: i.pid,
                    playerName: e
                }) : s.request("GET", "players/name/" + e).then(function(i) {
                    t.setCurrentSource(v.ChatSourceType.Whisper, {
                        playerId: i.id,
                        playerName: e
                    }), t.playerSnippetService.addSnippet(i.id, i)
                }).catch(function(e) {
                    t.printSystemMsgByCode(7)
                })
            }, e.prototype.onSlashCommandHelp = function(e) {
                if (!(e.length <= 0)) {
                    var t = "<br>" + e.join("<br>");
                    this.printSystemMsg(t)
                }
            }, e.prototype.onSlashCommandInvitePlayer = function(e) {
                var t = this,
                    i = this.$filter("translate");
                return this.raceState !== v.ChatRaceState.Room ? this.printSystemMsg(i("CHATTING_INVITE_UNAVAILABLE")) : e === c.store.getState().player.name ? this.printSystemMsg(i("CHATTING_INVITE_SELF_ERROR")) : void T.getInjector().get("room2Service").inviteRoomByName(e).then(function() {
                    var i = t.$filter("template");
                    t.printSystemMsg(i({
                        name: e
                    }, "CHATTING_INVITE_NOTIFY"))
                }).catch(function(e) {
                    r.error("invite player error", e), t.printSystemMsg(i("CHATTING_INVITE_ERROR"))
                })
            }, e.prototype.buildTooltipData = function() {
                var e = this,
                    t = this.staticdata.worldChatData.commandsDescriptions,
                    i = t.map(function(t) {
                        return {
                            commandkey: t.cmd,
                            description: e.$filter("translate")(t.description)
                        }
                    });
                this._helpTooltipData = i
            }, e.prototype.handleServerError = function(e) {
                switch (e) {
                    case 9:
                        this.onTriggerFlood();
                        var t = parseInt(this.staticdata.worldChatData.getConfig("CHAT_FLOOD_BANNED_MILLISECNODS"), 10),
                            i = this.chatSystemMsgHelper.getSystemMsgByCode(e, {
                                number: t / 1e3
                            });
                        this.printSystemMsg(i);
                        break;
                    default:
                        this.printSystemMsgByCode(e)
                }
            }, e
        }();
    C.$inject = ["$filter", "pushService", "playerSnippetService", "staticdataLoaderService", "globalKeyService", "contactsService", "inGameConfigService", "worldChatCommandService", "externalService", "featureSetService"], t.WorldChatService = C, t.default = C, angular.module("edge.components").factory("worldChatService", a.default.generateService(C))
}, function(e, t, i) {
    "use strict";

    function n() {
        return document.getElementById("edge-ui-context-menu")
    }

    function r(e) {
        if (void 0 === e && (e = null), !h) {
            var t = n(),
                i = document.createElement("div");
            i.className = "chatFilterClose chat-window-position-listener";
            var r = document.createElement("button");
            r.style.width = document.body.offsetWidth + "px", r.style.height = document.body.offsetHeight + "px", i.appendChild(r), t.insertBefore(i, e), i.hidden = !0, h = i, f = r
        }
    }

    function o() {
        var e = n(),
            t = $(e).offset();
        h.style.top = -t.top + "px", h.style.left = -t.left + "px"
    }

    function a() {
        h.hidden = !1, o(), h.addEventListener("chat-window-position", function(e) {
            o()
        }), f.onclick = function(e) {
            return c()
        }
    }

    function s() {
        if (h) {
            h.hidden = !0;
            n().removeChild(h), h = void 0
        }
        f && (f.onclick = null, f = void 0)
    }

    function c() {
        s();
        var e = l.createElement("div", null);
        u.render(e, document.getElementById("edge-ui-context-menu"))
    }

    function d(e, t, i) {
        var n = e.top && e.left,
            o = n ? l.createElement(p.ContextMenu, {
                style: e,
                className: t,
                orderOpts: i
            }) : l.createElement("div", null);
        u.render(o, document.getElementById("edge-ui-context-menu"));
        var s = document.getElementsByClassName(t);
        s.length > 0 && (r(s[0]), a())
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var l = i(14),
        u = i(132),
        p = i(1135),
        h = void 0,
        f = void 0;
    t.hide = c, t.render = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e.localStoreChannelCode = function(e) {
            localStorage.setItem("c.storage.channelcode", e.toString())
        }, e.getLocalChannelCode = function() {
            var e = localStorage.getItem("c.storage.channelcode");
            return e ? +e : null
        }, e.localStoreRoomId = function(e) {
            localStorage.setItem("c.storage.roomId", e.toString())
        }, e.getLocalRoomId = function() {
            var e = localStorage.getItem("c.storage.roomId");
            return e ? +e : null
        }, e.localStoreTeamId = function(e) {
            localStorage.setItem("c.storage.teamId", e.toString())
        }, e.getLocalTeamId = function() {
            var e = localStorage.getItem("c.storage.teamId");
            return e ? +e : null
        }, e.localStoreMatchId = function(e) {
            localStorage.setItem("c.storage.matchId", e.toString())
        }, e.getLocalMatchId = function() {
            var e = localStorage.getItem("c.storage.matchId");
            return e ? +e : null
        }, e.localStorelobbyId = function(e) {
            localStorage.setItem("c.storage.lobbyId", e.toString())
        }, e.getLocalLobbyId = function() {
            var e = localStorage.getItem("c.storage.lobbyId");
            return e ? +e : null
        }, e.localStoreOpenworldId = function(e) {
            localStorage.setItem("c.storage.openworldId", e.toString())
        }, e.getLocalOpenworldId = function() {
            var e = localStorage.getItem("c.storage.openworldId");
            return e ? +e : null
        }, e.localStoreChatWindowPosition = function(e, t) {
            localStorage.setItem("c.mainWindow.px.storage", e.toString()), localStorage.setItem("c.mainWindow.py.storage", t.toString())
        }, e.getLocalChatWindowPosition = function() {
            var e = localStorage.getItem("c.mainWindow.px.storage"),
                t = localStorage.getItem("c.mainWindow.py.storage");
            if (e && t) return {
                x: parseInt(e),
                y: parseInt(t)
            }
        }, e
    }();
    t.ChatCacheManager = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(29),
        r = i(4),
        o = i(3),
        a = function() {
            function e() {
                var e = this;
                this.listenerMap = {}, $(window).on("keydown", function(t) {
                    var i = t.target,
                        n = i.tagName,
                        r = i.isContentEditable;
                    0 !== o.store.getState().view.modal.shown.length || r || /textarea|input/i.test(n) || e.onEvent(t)
                })
            }
            return e.prototype.pushListener = function(e, t) {
                this.listenerMap[e] || (this.listenerMap[e] = []), this.listenerMap[e].push(t)
            }, e.prototype.popListener = function(e, t) {
                t && _.remove(this.listenerMap[e], t)
            }, e.prototype.onEvent = function(e) {
                if (!e.originalEvent.repeat) {
                    var t = e.keyCode ? this.listenerMap[e.keyCode] : this.listenerMap[e.originalEvent.keyIdentifier];
                    if (t && t.length)
                        for (var i = t.length; i--;) {
                            var n = t[i];
                            if (!n.onEvent(e)) break
                        }
                }
            }, e.prototype.dumpFilterCount = function() {
                var e = this;
                _.forEach(this.listenerMap, function(t, i) {
                    console.log(n.KeyboardMap.getKeyName(+i) + "listener cout : " + e.listenerMap[i].length)
                })
            }, e
        }();
    a.$inject = [], t.GlobalKeyService = a, angular.module("edge.components").factory("globalKeyService", r.default.generateService(a))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(10),
        o = i(3),
        a = i(116),
        s = i(15),
        c = i(160),
        d = i(40),
        l = {
            cn: "zh-CN",
            en: "en",
            ko: "kr"
        },
        u = function() {
            function e(e, t, i, n, r, o, a, s, c, d) {
                this.$q = e, this.$filter = t, this.pushService = i, this.staticData = n, this.playerSnippetService = r, this.vehicleDataService = o, this.configLoader = a, this.sessionService = s, this.featureSetService = c, this.notifierService = d, this._init = !1, this.pushHandler = {}
            }
            return e.prototype.init = function() {
                if (!this._init) {
                    var e = this.staticData.clanDataManager;
                    this._maxMemberCount = Number(e.getConfig("CLAN_MEMBER_MAX_COUNT")), this._clanNameMinLength = Number(e.getConfig("CLAN_NAME_MIN_LENGTH")), this._clanNameMaxLength = Number(e.getConfig("CLAN_NAME_MAX_LENGTH")), this._clanIntroMinLength = Number(e.getConfig("CLAN_INTRODUCTION_MIN_LENGTH")), this._clanIntroMaxLength = Number(e.getConfig("CLAN_INTRODUCTION_MAX_LENGTH")), this._clanCreationLevel = Number(e.getConfig("CLAN_MIN_PLAYER_LEVEL_FOR_CREATION")), this._clanCreationSP = Number(e.getConfig("CLAN_SP_FOR_CREATION")), this._init = !0, this.locale = this.configLoader.config && this.configLoader.config.locale || "en", this._enableClan = this.featureSetService.isEnabled("CLAN"), this.registerPushMessageAndHandler()
                }
            }, Object.defineProperty(e.prototype, "enableClan", {
                get: function() {
                    return this._enableClan
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "maxMemberCount", {
                get: function() {
                    return this._maxMemberCount
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "clanNameMinLength", {
                get: function() {
                    return this._clanNameMinLength
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "clanNameMaxLength", {
                get: function() {
                    return this._clanNameMaxLength
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "clanIntroMinLength", {
                get: function() {
                    return this._clanIntroMinLength
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "clanIntroMaxLength", {
                get: function() {
                    return this._clanIntroMaxLength
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "clanCreationLevel", {
                get: function() {
                    return this._clanCreationLevel
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "clanCreationSP", {
                get: function() {
                    return this._clanCreationSP
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.fetch = function() {
                var e = this;
                this.init(), this._enableClan && this.refreshMyClanInfo().then(function(t) {
                    return t && e.fetchMyClanMembers()
                })
            }, e.prototype.getSortLocale = function() {
                return l[this.locale] ? l[this.locale] : "en"
            }, e.prototype.registerPushMessageAndHandler = function() {
                this.pushService.subscribeResource(/clan.push.message.arrived/, this.onPushedClanMessage.bind(this)), this.pushHandler[s.Clan.Notice.CLAN_ACCEPT_REQUEST] = this.onPushedRequestAccpeted.bind(this), this.pushHandler[s.Clan.Notice.CLAN_REJECT_REQUEST] = this.onPushedRequestRejected.bind(this), this.pushHandler[s.Clan.Notice.CLAN_EXPEL_MEMBER] = this.onPushedExpeled.bind(this), this.pushHandler[s.Clan.Notice.CLAN_DISMISSED] = this.onPushedDismissed.bind(this), this.pushHandler[s.Clan.Notice.CLAN_REQUESTED] = this.onPushedNewApplication.bind(this), this.pushHandler[s.Clan.Notice.CLAN_JOINED] = this.onPushedNewMember.bind(this)
            }, e.prototype.fetchClanCount = function() {
                var e = this;
                r.request("GET", "clancount").then(function(e) {
                    o.store.dispatch(a.changeClanCount(e.count))
                }).catch(function(t) {
                    e.handleServerError(t)
                })
            }, e.prototype.fetchMyRequestedClan = function() {
                var e = o.store.getState().clan;
                this.fetchRequestedClan(e.baseInfo)
            }, e.prototype.fetchRequestedClan = function(e) {
                e.requestedClanId && e.requestedClanId.length > 0 ? this.fetchClanDetail(e.requestedClanId).then(function(e) {
                    return o.store.dispatch(a.changeAppliedClan(e))
                }) : o.store.dispatch(a.changeAppliedClan(null))
            }, e.prototype.fetchClanInfo = function() {
                var e = this,
                    t = o.store.getState().player.id;
                return r.request("GET", "claninfo/" + t).then(function(i) {
                    var n = i;
                    o.store.dispatch(a.changeClanBaseInformation(n));
                    var r = e.$filter("translate"),
                        s = e.$filter("template");
                    if (n.acceptNotification && n.acceptNotification.length > 0) {
                        var c = r("SYSTEMTRAY_CLANJOIN_TITLE"),
                            d = r("SYSTEMTRAY_CLANJOINACCEPT_DESC");
                        e.notifierService.addLast(c, d, "root.menu.MyClan"), e.cleanNotification(t, {
                            acceptNotification: "1"
                        })
                    }
                    if (n.rejectNotification && n.rejectNotification.length > 0) {
                        var c = r("SYSTEMTRAY_CLANJOIN_TITLE"),
                            d = r("SYSTEMTRAY_CLANJOINREJECT_DESC");
                        e.notifierService.addLast(c, d, "root.menu.ClanList"), e.cleanNotification(t, {
                            rejectNotification: "1"
                        })
                    }
                    if (n.expelNotification && n.expelNotification.length > 0 && (e.fetchClanDetail(n.expelNotification).then(function(t) {
                            var i = r("SYSTEMTRAY_BANNED_TITLE"),
                                n = s({
                                    clanname: t.name
                                }, "SYSTEMTRAY_BANNED_DESC");
                            e.notifierService.addLast(i, n, "root.menu.ClanList")
                        }), e.cleanNotification(t, {
                            expelNotification: "1"
                        })), n.dismissNotification && n.dismissNotification.length > 0) {
                        var c = r("CLAN_JOIN_NOTEXIST_TITLE"),
                            d = r("CLAN_JOIN_NOTEXIST_DESC");
                        e.notifierService.addLast(c, d, "root.menu.ClanList"), e.cleanNotification(t, {
                            dismissNotification: "1"
                        })
                    }
                    return n
                })
            }, e.prototype.fetchClanDetail = function(e) {
                var t = this;
                return r.request("GET", "clans/" + e + "/info").then(function(i) {
                    var n = i;
                    if (n.length > 0) {
                        var r = _.assign({}, n[0], {
                            maxMemberCount: t.maxMemberCount
                        });
                        return r.createdDate = new Date(n[0].createdDate.toString()), r
                    }
                    throw new Error("Clan [" + e + "] does not exist")
                })
            }, e.prototype.fetchMyMemberInfoInClan = function() {
                var e = this,
                    t = o.store.getState().clan,
                    i = t.baseInfo.clanId;
                this.fetchMemberInfoInClan(i, o.store.getState().player.id, function() {
                    e.stayInAClan()
                })
            }, e.prototype.fetchMemberInfoInClan = function(e, t, i, n) {
                var s = this;
                r.request("GET", "clans/" + e + "/members/" + t).then(function(e) {
                    var t = e;
                    if (t) {
                        var r = {
                            pid: t.pid,
                            clanId: t.clanId,
                            playerInfo: null,
                            role: t.role,
                            joinDate: new Date(t.joinDate.toString())
                        };
                        s.playerSnippetService.getSnippetAsync(t.pid).then(function(e) {
                            r.playerInfo = e, o.store.dispatch(a.refreshClanMember(r)), i && i()
                        }).catch(function(e) {
                            n && n()
                        })
                    }
                }).catch(function(e) {})
            }, e.prototype.fetchMyClanMembers = function() {
                this.fetchClanMembers(o.store.getState().clan.myClanInfo.id)
            }, e.prototype.fetchClanMembers = function(e) {
                var t = this;
                e && r.request("GET", "clans/" + e + "/members").then(function(e) {
                    var i = e;
                    if (i && i.length > 0) {
                        var n = [],
                            r = [];
                        _.forEach(i, function(e) {
                            r.push(e.pid);
                            var t = {
                                pid: e.pid,
                                clanId: e.clanId,
                                playerInfo: null,
                                role: e.role,
                                joinDate: new Date(e.joinDate.toString())
                            };
                            n.push(t)
                        }), t.playerSnippetService.fetchSnippetsForClan(r, o.store.getState().clan.myClanInfo).then(function() {
                            _.forEach(n, function(e) {
                                var i = t.playerSnippetService.getSnippet(e.pid);
                                e.playerInfo = i
                            }), o.store.dispatch(a.refreshClanMembers(n))
                        })
                    }
                }).catch(function(e) {
                    return t.handleServerError(e)
                })
            }, e.prototype.refreshMyClanInfo = function() {
                var e = this;
                return this.fetchClanInfo().then(function(t) {
                    if (t.clanId) return e.fetchMyMemberInfoInClan(), e.fetchClanDetail(t.clanId).then(function(i) {
                        return e.onChangeMyClanInformation(i), t.clanId
                    });
                    e.onClanLeft()
                })
            }, e.prototype.stayOutOfClan = function() {
                o.store.dispatch(c.lock("root.menu.MyClan")), o.store.dispatch(c.lock("root.menu.ClanManage"))
            }, e.prototype.stayInAClan = function() {
                o.store.dispatch(c.unlock("root.menu.MyClan"));
                var e = this.getMyDetail(),
                    t = e ? e.role : void 0;
                !!t && this.staticData.clanDataManager.authorities[t].manageable ? o.store.dispatch(c.unlock("root.menu.ClanManage")) : o.store.dispatch(c.lock("root.menu.ClanManage"))
            }, e.prototype.onPushedClanMessage = function(e, t) {
                var i = t.body.action;
                this.pushHandler[i] && this.pushHandler[i](t.body)
            }, e.prototype.onPushedRequestAccpeted = function(e) {
                this.refreshMyClanInfo()
            }, e.prototype.onPushedRequestRejected = function(e) {
                this.fetchClanInfo(), o.store.dispatch(a.changeAppliedClan(null))
            }, e.prototype.onPushedExpeled = function(e) {
                var t = this;
                this.fetchClanInfo().then(function() {
                    return t.onClanLeft()
                })
            }, e.prototype.onPushedDismissed = function(e) {
                this.fetchClanInfo(), o.store.dispatch(a.changeAppliedClan(null))
            }, e.prototype.onPushedNewApplication = function(e) {
                var t = this;
                this.playerSnippetService.getSnippetAsync(e.operatedPid).then(function(e) {
                    var i = t.$filter("translate")("WORLDGRANDPRIX_SYSTEMTRAY_SCREENING_TITLE"),
                        n = t.$filter("translate")("WORLDGRANDPRIX_SYSTEMTRAY_SCREENING_DESC");
                    t.notifierService.addLast(i, n, "root.menu.ClanManage")
                })
            }, e.prototype.onPushedNewMember = function(e) {
                var t = this;
                this.playerSnippetService.getSnippetAsync(e.operatedPid).then(function(e) {
                    var i = t.$filter("translate")("WORLDGRANDPRIX_SYSTEMTRAY_CLANJOIN_TITLE"),
                        n = t.$filter("template")({
                            name: e.name
                        }, "WORLDGRANDPRIX_SYSTEMTRAY_CLANJOIN_DESC");
                    t.notifierService.addLast(i, n, "root.menu.MyClan"), t.fetchMyClanMembers()
                })
            }, e.prototype.onChangeMyClanInformation = function(e) {
                o.store.dispatch(a.changeMyClanInformation(e)), o.store.dispatch(null === e ? d.lockTab("clan") : d.unlockTab("clan"))
            }, e.prototype.getMyDetail = function() {
                var e = o.store.getState().player.id;
                return o.store.getState().clan.members[e]
            }, e.prototype.createClan = function(e, t, i, n) {
                var o = this;
                r.request("POST", "clans", {
                    name: e,
                    introduction: t
                }).then(function(e) {
                    var t = new Date(e.createdDate),
                        n = _.assign({}, e, {
                            maxMemberCount: o.maxMemberCount,
                            createdDate: t
                        });
                    o.onChangeMyClanInformation(n), i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.searchClan = function(e, t, i) {
                var n = this;
                void 0 === i && (i = ""), r.request("GET", "clans?name=" + i + "&recruiting=" + e.toString() + "&censorship=" + t.toString()).then(function(e) {
                    var t = _.map(e, function(e) {
                        var t = new Date(e.createdDate);
                        return _.assign({}, e, {
                            maxMemberCount: n.maxMemberCount,
                            createdDate: t
                        })
                    });
                    o.store.dispatch(a.refreshSearchResult(t))
                }).catch(function(e) {
                    n.handleServerError(e)
                })
            }, e.prototype.findClanInSearchList = function(e) {
                if (e) {
                    var t, i = o.store.getState().clan;
                    return i.clanList.forEach(function(i) {
                        i.id === e && (t = i)
                    }), t
                }
            }, e.prototype.onJoinClanRespond = function(e) {
                if (e.clan) {
                    var t = new Date(e.clan.createdDate),
                        i = _.assign({}, e.clan, {
                            maxMemberCount: this.maxMemberCount,
                            createdDate: t
                        });
                    i.id, this.onChangeMyClanInformation(i)
                } else if (e.info) {
                    e.info.requestedClanId;
                    var n = this.findClanInSearchList(e.info.requestedClanId);
                    o.store.dispatch(a.changeAppliedClan(n))
                }
            }, e.prototype.joinClan = function(e, t, i) {
                var n = this;
                r.request("POST", "clans/" + e + "/@join").then(function(e) {
                    n.onJoinClanRespond(e);
                    var i = void 0 !== e.info && void 0 === e.clan;
                    t && t(i)
                }).catch(function(e) {
                    n.handleServerError(e), i && i(e)
                })
            }, e.prototype.cancelJoinRequest = function(e) {
                var t = this;
                r.request("DELETE", "clans/" + e + "/@join").then(function(e) {
                    o.store.dispatch(a.changeAppliedClan(null))
                }).catch(function(e) {
                    t.handleServerError(e)
                })
            }, e.prototype.fetchMyClanApplicants = function() {
                this.fetchJoinRequests(o.store.getState().clan.myClanInfo.id)
            }, e.prototype.fetchJoinRequests = function(e) {
                var t = this;
                e && r.request("GET", "clans/" + e + "/requests").then(function(e) {
                    var i = [],
                        n = [];
                    e.forEach(function(e) {
                        n.push(e.pid);
                        var t = {
                            pid: e.pid,
                            clanId: e.clanId,
                            date: new Date(e.date.toString()),
                            playerInfo: null
                        };
                        i.push(t)
                    }), n.length > 0 ? t.playerSnippetService.fetchSnippets(n).then(function() {
                        _.forEach(i, function(e) {
                            e.playerInfo = t.playerSnippetService.getSnippet(e.pid)
                        }), o.store.dispatch(a.refreshApplicants(i))
                    }) : 0 === n.length && o.store.dispatch(a.refreshApplicants([]))
                }).catch(function(e) {
                    o.store.dispatch(a.refreshApplicants([]))
                })
            }, e.prototype.onClanLeft = function() {
                this.onChangeMyClanInformation(null), this.stayOutOfClan(), o.store.dispatch(d.removeClanChatMessage())
            }, e.prototype.leaveClan = function(e, t, i) {
                var n = this;
                r.request("POST", "clans/" + e + "/@leave").then(function(e) {
                    n.onClanLeft(), t && t()
                }).catch(function(e) {
                    i && i(e)
                })
            }, e.prototype.dismissClan = function(e, t, i) {
                var n = this;
                r.request("DELETE", "clans/" + e).then(function(e) {
                    n.onClanLeft(), t && t()
                }).catch(function(e) {
                    i && i(e)
                })
            }, e.prototype.changeNotice = function(e, t, i, n) {
                r.request("PUT", "clans/" + e, {
                    notice: t
                }).then(function(e) {
                    o.store.dispatch(a.changeNotice(e.notice)), i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.changeIntroduction = function(e, t, i, n) {
                r.request("PUT", "clans/" + e, {
                    introduction: t
                }).then(function(e) {
                    i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.changeEmblem = function(e, t, i, n) {
                r.request("PUT", "clans/" + e, {
                    emblem: t
                }).then(function(e) {
                    i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.setRecruiting = function(e, t, i, n) {
                var o = !0 === t ? {
                    recruiting: !0
                } : {
                    recruiting: !1,
                    censorship: !1
                };
                r.request("PUT", "clans/" + e, o).then(function(e) {
                    i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.setCensorship = function(e, t, i, n) {
                r.request("PUT", "clans/" + e, {
                    censorship: t
                }).then(function(e) {
                    i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.acceptClanRequest = function(e, t, i, n) {
                r.request("POST", "clans/" + e + "/requests/" + t + "/@accept", {}).then(function(e) {
                    i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.rejectClanRequest = function(e, t, i, n) {
                r.request("POST", "clans/" + e + "/requests/" + t + "/@reject", {}).then(function(e) {
                    i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.changeClanMemberPostion = function(e, t, i, n, o) {
                r.request("PUT", "clans/" + e + "/members/" + t, {
                    role: i
                }).then(function(e) {
                    n && n()
                }).catch(function(e) {
                    o && o(e)
                })
            }, e.prototype.expelClanMember = function(e, t, i, n) {
                r.request("DELETE", "clans/" + e + "/members/" + t).then(function(e) {
                    i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.cleanNotification = function(e, t, i, n) {
                r.request("PUT", "claninfo/" + e, t).then(function(e) {
                    var t = o.store.getState().clan,
                        n = _.cloneDeep(t.baseInfo);
                    n.acceptNotification = "", o.store.dispatch(a.changeClanBaseInformation(n)), i && i()
                }).catch(function(e) {
                    n && n(e)
                })
            }, e.prototype.handleServerError = function(e) {}, e
        }();
    u.$inject = ["$q", "$filter", "pushService", "staticdataLoaderService", "playerSnippetService", "vehicleDataService", "sessionService", "configLoader", "featureSetService", "notifierService"], t.ClanService = u, t.default = u, angular.module("edge.components").factory("clanService", n.default.generateService(u))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(15),
        o = i(4),
        a = i(10),
        s = i(3),
        c = i(59),
        d = i(1155),
        l = i(84);
    t.numberPlateService = "numberPlateService";
    var u = function() {
        function e(e, t, i, n, r, o) {
            this.$filter = e, this.staticData = t, this.externalService = i, this.publisherService = n, this.featureSetService = r, this.popupService = o, this._init = !1, this._templates = {}
        }
        return Object.defineProperty(e.prototype, "enableNumberPlate", {
            get: function() {
                return this._enableNumberPlate
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.init = function() {
            var e = this;
            if (this._init) return n.resolve();
            if (this._enableNumberPlate = this.featureSetService.isEnabled("NUMBERPLATE"), this.enableNumberPlate) {
                var t = this.staticData.numberPlateDataManager.numberPlateData.configs.NUMBER_PLATE_VEHICLE_BASE_HEIGHT_FOR_CAMERA;
                t && this.externalService.beNumberPlateSetVehicleBaseHeight(_.toNumber(t))
            } else $("<style>.id-numberPlate { display:none; }</style>").appendTo("head");
            return n.all([this.fetchTemplateCodes(), this.fetchInfo(), this.initDefaultPlate()]).then(function() {
                return e._init = !0
            }).catch(function(t) {
                if (!e.externalService.isDevelopment()) throw t;
                log.error("Number-plate fetch failed :: ", t)
            })
        }, e.prototype.fetchInfo = function() {
            var e = this;
            if (!this.enableNumberPlate) return n.resolve();
            var t = Number(this.staticData.numberPlateDataManager.numberPlateData.configs.NUMBER_PLATE_MIN_PLAYER_LEVEL);
            return s.store.getState().player.level < t ? (s.store.dispatch(l.changeState(c.UIState.Lock)), n.resolve()) : this.fetchMyPlatePlayerInfo().then(function(t) {
                if (t) {
                    var i = t.selected;
                    i.length > 0 ? (s.store.dispatch(l.changeState(c.UIState.Main)), e.fetchMyNumberPlates().then(function() {
                        s.store.dispatch(l.previewNumberPlate(t.selected[0].plateNumber))
                    })) : 0 === i.length && s.store.dispatch(l.changeState(c.UIState.FirstBuild)), "" !== t.prefix && e.fetchMySelectedPlates()
                }
            }).catch(function(t) {
                if (!e.externalService.isDevelopment()) throw t;
                log.error("Number-plate fetchMyPlatePlayerInfo failed :: ", t)
            })
        }, e.prototype.fetchMySelectedPlates = function() {
            var e = s.store.getState().player.id;
            return d.get_number_plate_select_list(e).then(function(e) {
                return s.store.dispatch(l.refreshFirstRandomResultList(e.firstRandom)), s.store.dispatch(l.refreshExchangeResultList(e.exchange)), s.store.dispatch(l.refreshLotteryResultList(e.lottery)), s.store.dispatch(l.refreshRecycleList(e.expiration)), s.store.dispatch(l.refreshLotteryCode(e.lotteryCode)), e
            }).catch(function(e) {
                console.error(e.message)
            })
        }, e.prototype.initDefaultPlate = function() {
            var e = this;
            return s.store.getState().numberPlate.defaultNumberPlate ? n.resolve() : d.get_default_number_plate().then(function(t) {
                log.debug("get_default_number_plate:", t), t ? (s.store.dispatch(l.refreshDefaultNumberPlate(t)), e.externalService.beSetDefaultLicense(t)) : log.error("get_default_number_plate")
            }).catch(function(e) {
                log.debug("get_default_number_plate failed : " + e.message)
            })
        }, e.prototype.selectPlate = function(e, t) {
            var i = this,
                n = s.store.getState().player.id;
            return d.number_plate_select_ret(t, n, e).then(function(e) {
                switch (e.selectType) {
                    case r.NumberPlate.SelectType.INIT_PLAYER:
                        r.NumberPlate.SelectRetType.SUCCESS === e.selectRetType && (e.ret.length > 0 && s.store.dispatch(l.addNumberPlate(e.ret[0])), i.externalService.beSetLicensePlateText(e.ret[0].plateNumber));
                    case r.NumberPlate.SelectType.EXCHANGE:
                        r.NumberPlate.SelectRetType.SUCCESS === e.selectRetType && (s.store.dispatch(l.refreshExchangeResultList([])), i.fetchMyNumberPlates());
                    case r.NumberPlate.SelectType.EXPIRATION:
                        r.NumberPlate.SelectRetType.SUCCESS === e.selectRetType && s.store.dispatch(l.refreshRecycleList([]));
                        break;
                    case r.NumberPlate.SelectType.LOTTERY:
                        r.NumberPlate.SelectRetType.SUCCESS === e.selectRetType && (s.store.dispatch(l.refreshLotteryResultList([])), i.fetchMyNumberPlates())
                }
                return e
            }).catch(function(e) {
                console.error(e.message)
            })
        }, e.prototype.fetchMyNumberPlates = function() {
            var e = s.store.getState().player.id;
            return this.fetchPlayerPlates(e).then(function(e) {
                return s.store.dispatch(l.refreshMyNumberPlates(e)), e
            })
        }, e.prototype.fetchPlayerPlates = function(e) {
            return d.get_number_plate_slots(e).then(function(e) {
                return e
            }).catch(function(e) {
                console.error(e.message)
            })
        }, e.prototype.searchPlates = function(e) {
            var t = this;
            return d.search_number_plate(e).then(function(e) {
                var i = e.sort(function(e, i) {
                    return t.comparePlate(e, i)
                });
                return s.store.dispatch(l.refreshSearchList(i)), i
            }).catch(function(e) {
                return console.error(e.message), []
            })
        }, e.prototype.fetchPlate = function(e) {
            return d.search_number_plate(e).then(function(e) {
                return e[0]
            })
        }, e.prototype.buyPlate = function(e) {
            var t = this,
                i = s.store.getState().player.id;
            return d.purchase_number_plate(i, e).then(function(t) {
                s.store.dispatch(l.addNumberPlate(t)), s.store.dispatch(l.successPurchaseNumberPlate(e, i))
            }).catch(function(i) {
                return i.errorCode === c.ErrorCode.PlateNumberUsed && t.fetchPlate(e).then(function(e) {
                    e && s.store.dispatch(l.updatePlateInSearch(e))
                }), n.reject(i)
            })
        }, e.prototype.exchangePlates = function(e) {
            var t = s.store.getState().player.id;
            return d.exchange_number_plate(e, t).then(function(e) {
                s.store.dispatch(l.clearExchangeList()), s.store.dispatch(l.refreshExchangeResultList(e))
            })
        }, e.prototype.destroyPlate = function(e) {
            var t = this,
                i = s.store.getState().player.id;
            return d.destroy_number_plate(i, e).then(function() {
                t.fetchInfo()
            })
        }, e.prototype.fetchMyPlatePlayerInfo = function() {
            var e = s.store.getState().player.id;
            return d.get_number_plate_player_info(e).then(function(e) {
                return s.store.dispatch(l.refreshMyNumberPlateInfo(e)), e
            })
        }, e.prototype.modifyPlatePrefix = function(e) {
            var t = this,
                i = s.store.getState().player.id;
            return a.request("PUT", "numberplate/playerinfo/" + i, {
                prefix: e
            }).then(function(i) {
                return s.store.dispatch(l.refreshMyNumberPlateInfo(i)), t.externalService.beSetLicensePlatePrefix(e), i
            })
        }, e.prototype.modifyPlateNumber = function(e) {
            var t = this,
                i = s.store.getState().player.id;
            return a.request("PUT", "numberplate/playerinfo/" + i, {
                selected: e
            }).then(function(i) {
                s.store.dispatch(l.refreshMyNumberPlateInfo(i)), t.externalService.beSetLicensePlateText(e);
                var n = t._templates[i.selected[0].templateCode].appearancecode,
                    r = t.staticData.numberPlateDataManager.numberPlateData.numberPlateAppearanceData[n].bg,
                    o = t.staticData.numberPlateDataManager.numberPlateData.numberPlateAppearanceData[n].fontcolor;
                return t.externalService.beSetVehiclePlateID(r), t.externalService.beSetLicensePlateTextColor(o), i
            }).catch(function(e) {
                console.error(e.message)
            })
        }, e.prototype.fetchTemplateCodes = function() {
            var e = this;
            return !this.enableNumberPlate || Object.keys(this._templates).length ? n.resolve() : d.get_number_plate_item_template_code().then(function(t) {
                if (0 === t.length) return e.popupService.draw("ConfirmPopup", {
                    title: "ERROR_POPUP_TITLE",
                    description: "NUMBERPLATE_POPUP_ERROR_CANNOT"
                }), n.reject("Client cannot show number plate!");
                _.each(t, function(t) {
                    e._templates[t.templatecode] = t
                })
            })
        }, e.prototype.cheatServerTime = function(e) {
            return this.devSetServerCurrentTime(e || "").catch(function(e) {
                console.error(e.message)
            })
        }, e.prototype.getServerTime = function() {
            return d.admin_dev_get_current_time().then(function(e) {
                return e
            })
        }, e.prototype.devCreatePlate = function(e, t, i) {
            return a.request("POST", "numberplate/players/" + i + "/platenumbers/" + t + "/@create", {
                templateCode: e
            })
        }, e.prototype.devModifyPlateNumber = function(e, t) {
            return a.request("PUT", "numberplate/playerinfo/" + e, {
                selected: t
            })
        }, e.prototype.devSetServerCurrentTime = function(e) {
            return a.request("PUT", "numberplate/currenttime", {
                currentTime: e
            })
        }, e.prototype.purchasePrice = function(e) {
            return this._templates[e].price
        }, e.prototype.isHigh = function(e) {
            return this._templates[e].codeclass > 1
        }, e.prototype.templateData = function(e) {
            return this._templates[e]
        }, e.prototype.getPlayerExpandSlots = function(e) {
            var t = s.store.getState().player;
            return (t && t.level ? this.staticData.numberPlateDataManager.levelSlots(t.level) : 0) + 0
        }, e.prototype.comparePlate = function(e, t) {
            var i = this.isHigh(e.templateCode);
            return i !== this.isHigh(t.templateCode) ? i ? -1 : 1 : e.plateNumber.localeCompare(t.plateNumber)
        }, e.prototype.getDecidePurchaseItem = function() {
            var e = s.store.getState().numberPlate.decidePurchaseItem,
                t = s.store.getState().numberPlate.searchResults[e];
            return t && t.templateCode ? {
                code: -1,
                name: t.plateNumber,
                desc: this.$filter("translate")("NUMBERPLATE_ITEMCARD_DESC"),
                category: "",
                order: -1,
                isPromotion: !1,
                isNewProduct: !1,
                saleFrom: void 0,
                saleTo: void 0,
                viewFrom: void 0,
                viewTo: void 0,
                bunches: [{
                    price: this.purchasePrice(t.templateCode),
                    currency: "tencent" === this.publisherService.publisher ? "TCCASH" : "NXCASH",
                    count: 1
                }],
                rewards: [{
                    type: "NUMBER_PLATE_INSTANCE",
                    code: -1,
                    count: 1
                }],
                isShowDates: !1,
                sellingShop: "SHOP",
                spare: t,
                saleLimit: 0
            } : {}
        }, e.prototype.createPaintData = function() {
            var e = s.store.getState().numberPlate;
            if (!e || !e.myNumberPlateInfo || !e.myNumberPlateInfo.selected || 0 === e.myNumberPlateInfo.selected.length) return e.defaultNumberPlate;
            var t = e.myNumberPlateInfo,
                i = e.myNumberPlateInfo.selected[0];
            if (!i) return e.defaultNumberPlate;
            var n = this.templateData(i.templateCode);
            if (!n) return e.defaultNumberPlate;
            var r = this.staticData.numberPlateDataManager.numberPlateData.numberPlateAppearanceData[n.appearancecode];
            return {
                plateNumber: i.plateNumber,
                templateCode: i.templateCode,
                prefix: t.prefix,
                background: r.bg,
                fontColor: r.fontcolor
            }
        }, e
    }();
    u.$inject = ["$filter", "staticdataLoaderService", "externalService", "publisherService", "featureSetService", "popupService"], t.NumberPlateService = u, angular.module("edge.components").factory(t.numberPlateService, o.default.generateService(u))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(4),
        o = i(10),
        a = i(3),
        s = i(1161),
        c = i(61),
        d = function() {
            function e(e, t, i, n) {
                this.pushService = e, this.worldChatService = t, this.quickMatchService = i, this.playerSnippetService = n
            }
            return e.prototype.initRoomManager = function(e) {
                void 0 === this.roomManager && (this.roomManager = new l(this, this.pushService, this.worldChatService, this.playerSnippetService)), this.roomManager.init(e)
            }, e.prototype.createTeamRoom = function(e) {
                var t = this;
                return s.create_team(e).then(function(e) {
                    return t.initRoomManager(e), e
                })
            }, e.prototype.getRoom = function() {
                return this.roomManager ? this.roomManager.room : null
            }, e.prototype.getPlayers = function() {
                return this.roomManager && this.roomManager.room && this.roomManager.room.players || []
            }, e.prototype.joinTeamRoom = function(e, t) {
                var i = this,
                    n = a.store.getState().player.id;
                return o.request("POST", "room2/team/" + e + "/players/" + n, {
                    password: t
                }).then(function(e) {
                    return i.initRoomManager(e), e
                })
            }, e.prototype.onLeaveTeamRoom = function(e) {
                this.roomManager && this.roomManager.destroy(), a.store.dispatch(c.leaveRoom(e))
            }, e.prototype.inviteRoom = function(e) {
                return s.invite_friend(e, this.roomManager.room.id)
            }, e.prototype.kickPlayer = function(e) {
                return s.kick_player(this.roomManager.room.id, e)
            }, e.prototype.grantHost = function(e) {
                return n.resolve()
            }, e.prototype.setReady = function(e) {
                void 0 === e && (e = !0);
                var t = a.store.getState().player.id;
                return s.set_ready_state(e && "READY" || "JOIN", this.roomManager.room.id, t)
            }, e.prototype.setVehicle = function(e) {
                var t = a.store.getState().player.id;
                return s.change_vehicle(this.roomManager.room.id, t, e)
            }, e.prototype.leaveTeam = function() {
                var e = this,
                    t = a.store.getState().player.id;
                if (this.roomManager) {
                    var i = this.roomManager.room;
                    return i && i.id ? s.leave_team(this.roomManager.room.id, t).then(function() {
                        return e.onLeaveTeamRoom(!1)
                    }) : n.resolve().then(function() {
                        e.quickMatchService.onExitRoom()
                    })
                }
                return n.resolve().then(function() {
                    e.quickMatchService.onExitRoom()
                })
            }, e.prototype.fetchRoom = function(e) {
                return o.request("GET", "room2/team/@test/" + e)
            }, e.prototype.prepareRoomIfNeeded = function(e) {
                var t = this;
                return this.getRoom() ? n.resolve() : this.fetchRoom(e).then(function(e) {
                    t.initRoomManager(e)
                }).catch(function(e) {
                    log.warn("Room을 조회할 수 없습니다. (룸이 지워졌거나 접근할 권한이 없습니다.)", e)
                })
            }, e.prototype.checkTimeout = function(e, t) {
                return this.quickMatchService.checkTimeout(e, t)
            }, e
        }();
    d.$inject = ["pushService", "worldChatService", "quickMatchService", "playerSnippetService"], t.TeamRoomService = d;
    var l = function() {
        function e(e, t, i, n) {
            this.teamRoomService = e, this.pushService = t, this.worldChatService = i, this.playerSnippetService = n, this.cleanUp = [], this.hasSubscribedPush = !1
        }
        return Object.defineProperty(e.prototype, "room", {
            get: function() {
                return a.store.getState().room.room
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.init = function(e) {
            var t = this;
            a.store.dispatch(c.createRoom(e)), a.store.dispatch(c.updateTeam(e.id));
            var i = a.store.getState().player.id,
                n = _.find(e.players, {
                    slot: this.room.hostSlot
                });
            n && i === n.pid && this.worldChatService.printRoomSystemMsg(null, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_CREATION"), this.playerSnippetService.getSnippetAsync(i).then(function(e) {
                t.worldChatService.printRoomSystemMsg(e, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_ENTRANCE")
            }), this.subscribedPush()
        }, e.prototype.subscribedPush = function() {
            this.hasSubscribedPush || (this.cleanUp.push(this.pushService.subscribeResource(/room2\.team\.joined/, this.teamJoined.bind(this))), this.cleanUp.push(this.pushService.subscribeResource(/room2\.team\.leaved/, this.teamLeaved.bind(this))), this.cleanUp.push(this.pushService.subscribeResource(/room2\.team\.host/, this.switchHost.bind(this))), this.cleanUp.push(this.pushService.subscribeResource(/room2\.team\.vehicle/, this.playerChangeVehicle.bind(this))), this.cleanUp.push(this.pushService.subscribeResource(/room2\.team\.player\.status/, this.playerChangeStatus.bind(this))), this.cleanUp.push(this.pushService.subscribeResource(/room2\.team\.matchmaking\.begin/, this.beginMatchMaking.bind(this))), this.cleanUp.push(this.pushService.subscribeResource(/room2\.team\.matchmaking\.cancel/, this.cancelMatchMaking.bind(this))), this.hasSubscribedPush = !0)
        }, e.prototype.unSubscribedPush = function() {
            this.cleanUp.forEach(function(e) {
                return e()
            }), this.cleanUp = [], this.hasSubscribedPush = !1
        }, e.prototype.teamJoined = function(e, t) {
            var i = this;
            console.log("team Joined. Player ID :" + t.body.player.pid);
            var n = t.body.player;
            a.store.dispatch(c.updateEntry({
                isExit: !1,
                entry: n
            })), this.playerSnippetService.getSnippetAsync(n.pid).then(function(e) {
                return i.worldChatService.printRoomSystemMsg(e, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_ENTRANCE")
            })
        }, e.prototype.teamLeaved = function(e, t) {
            var i = this;
            console.log("player leave team. Player ID:" + t.body.pid);
            var n = t.body.pid,
                r = t.body.isKicked,
                o = _.find(this.room.players, function(e) {
                    return e.pid === n
                });
            a.store.getState().player.id === n ? (a.store.dispatch(c.leaveRoom(r)), this.destroy()) : a.store.dispatch(c.updateEntry({
                isExit: !0,
                entry: o
            })), this.playerSnippetService.getSnippetAsync(n).then(function(e) {
                return i.worldChatService.printRoomSystemMsg(e, r ? "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_KICKED" : "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_EXIT")
            })
        }, e.prototype.switchHost = function(e, t) {
            var i = this;
            console.log("switch host to :" + t.body.hostId);
            var n = _.find(this.room.players, function(e) {
                return e.pid === t.body.hostId
            });
            n && this.playerSnippetService.getSnippetAsync(n.pid).then(function(e) {
                i.worldChatService.printRoomSystemMsg(e, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_MASTERCHANGE")
            }), a.store.dispatch(c.updateHostSlot({
                hostSlot: n.slot
            }))
        }, e.prototype.playerChangeVehicle = function(e, t) {
            console.log("player [" + t.body.pid + "] change vehicle to " + t.body.vehicle.id);
            var i = _.find(this.room.players, function(e) {
                return e.pid === t.body.pid
            });
            i.vehicle = t.body.vehicle, a.store.dispatch(c.updateEntry({
                isExit: !1,
                entry: i
            }))
        }, e.prototype.playerChangeStatus = function(e, t) {
            console.log("player [" + t.body.pid + "] change status to " + t.body.status);
            var i = _.find(this.room.players, function(e) {
                return e.pid === t.body.pid
            });
            i.status = t.body.status, a.store.dispatch(c.updateEntry({
                isExit: !1,
                entry: i
            }))
        }, e.prototype.beginMatchMaking = function() {
            console.log("begin match making."), a.store.dispatch(c.updateRoomStatus("MATCHMAKING"))
        }, e.prototype.cancelMatchMaking = function() {
            console.log("cancel match making."), a.store.dispatch(c.updateRoomStatus("READY"))
        }, e.prototype.destroy = function() {
            this.unSubscribedPush()
        }, e
    }();
    t.QuickTeamRoomManager = l, angular.module("edge.components").factory("teamRoomService", r.default.generateService(d))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(4),
        a = i(10),
        s = i(137),
        c = i(3),
        d = i(5),
        l = i(12),
        u = i(35),
        p = function(e) {
            function t(t, i) {
                var n = e.call(this) || this;
                return n.serverTimeService = t, n.staticdataLoaderService = i, n
            }
            return n.__extends(t, e), t.prototype.fetch = function() {
                return n.__awaiter(this, void 0, void 0, function() {
                    var e, t;
                    return n.__generator(this, function(i) {
                        switch (i.label) {
                            case 0:
                                return [4, this.record()];
                            case 1:
                                return e = i.sent(), c.store.dispatch(s.setTradeRecord(e)), [4, this.updateDealerNpcData()];
                            case 2:
                                return i.sent(), [4, this.availableGrade()];
                            case 3:
                                return t = i.sent(), c.store.dispatch(s.setVehicleAvailables(t)), [2, Promise.resolve()]
                        }
                    })
                })
            }, t.prototype.record = function() {
                return a.request("GET", "traderecords")
            }, Object.defineProperty(t.prototype, "dealerNpcData", {
                get: function() {
                    return this._dealerNpcData
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.getDealerNpcStaticData = function(e) {
                return this.staticdataLoaderService.dealerNpcData[e]
            }, t.prototype.updateDealerNpcData = function() {
                return n.__awaiter(this, void 0, void 0, function() {
                    var e, t, i;
                    return n.__generator(this, function(n) {
                        switch (n.label) {
                            case 0:
                                return n.trys.push([0, 2, , 3]), [4, a.request("GET", "trades")];
                            case 1:
                                return e = n.sent(), t = {}, _.forEach(e, function(e) {
                                    t[e.code] = e
                                }), this._dealerNpcData = t, [2, Promise.resolve()];
                            case 2:
                                return i = n.sent(), log.error(i), [2, Promise.reject(i)];
                            case 3:
                                return [2]
                        }
                    })
                })
            }, t.prototype.expectBestResult = function(e, t) {
                return a.request("GET", "trades/bestresult/" + e, {
                    vids: t
                }).then(function(t) {
                    return log.debug("Trade Vehicle Expectable Best Result", e, t), t
                })
            }, t.prototype.trade = function(e, t) {
                return a.request("POST", "trades/" + e, {
                    vids: t
                }).then(function(t) {
                    return log.debug("Trade Vehicle Result", e, t), t
                })
            }, t.prototype.getCooltime = function(e) {
                var t = c.store.getState().trade,
                    i = t.cooldown;
                if (i[e] >= 0) return i[e];
                var n = this.getDealerNpc(e);
                if (!n) return 0;
                var r = t.tradeRecord[n.type];
                if (!r) return 0;
                var o = r.code,
                    a = r.tradedAt;
                return this.setCooltime(o, a)
            }, t.prototype.setCooltime = function(e, t) {
                var i = this.getDealerNpc(e);
                if (i.coolDownMinutes > 0) {
                    var n = d(t).add(i.coolDownMinutes, "minutes").toDate(),
                        r = this.serverTimeService.getRemainingTime(n);
                    return c.store.dispatch(s.setCooldown(e, r.timestamp)), c.store.dispatch(s.setDealerNpc(1)), r.timestamp
                }
                return 0
            }, t.prototype.getCooltimeText = function(e) {
                return "TRADE_DEALERNPC_COOLDOWNMSG_" + e
            }, t.prototype.getDealerNpc = function(e) {
                return this.dealerNpcData || this.updateDealerNpcData(), this.dealerNpcData[e]
            }, t.prototype.getVehicleTradeBoost = function(e) {
                return this.staticdataLoaderService.vehicleTradeBoostData[e]
            }, t.prototype.getDayOfWeek = function() {
                return this.serverTimeService.time.getDay() - 1
            }, t.prototype.isCompleteQuest = function(e, t) {
                var i, n = this.getVehicleTradeBoost(e),
                    o = n.type,
                    a = n.criteria,
                    s = n.minCount,
                    c = n.bonusRate;
                switch (o) {
                    case "manufacturer":
                        i = _.filter(t, function(e) {
                            return l.getVehicleInfo(e) && -1 !== a.indexOf(l.getVehicleInfo(e).manufacturerCode)
                        });
                        break;
                    case "grade":
                        i = _.filter(t, function(e) {
                            return l.getVehicleInfo(e) && l.getVehicleInfo(e).grade >= a[0]
                        });
                        break;
                    case "ovr":
                        i = _.filter(t, function(e) {
                            return l.getVehicleInfo(e) && l.getVehicleInfo(e).ovr >= a[0]
                        });
                        break;
                    case "class":
                        i = _.filter(t, function(e) {
                            return l.getVehicleInfo(e) && r.Vehicle.VehicleClassEnum[l.getVehicleInfo(e).clazz] <= a[0]
                        })
                }
                var d = i.length >= s;
                return {
                    qid: e,
                    bonusRate: d ? c : 0,
                    complete: d
                }
            }, t.prototype.availableGrade = function() {
                return a.request("GET", "trades/availablegrade").then(function(e) {
                    return log.debug("Trade Vehicle Available", e), e
                })
            }, t
        }(u.EventEmitter);
    p.$inject = ["serverTimeService", "staticdataLoaderService"], t.TradeService = p, t.default = p, angular.module("edge.components").factory("tradeService", o.default.generateService(p))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(9),
        r = i(4),
        o = function() {
            function e() {
                this.startComposition = 0, this.candidates = []
            }
            return e.prototype.init = function(e) {
                var t = this;
                e.on(n.default.beOpenCandidates, _.noop), e.on(n.default.beCloseCandidates, function() {
                    t.closeCandidate()
                }), e.on(n.default.beChangeCandidates, function(e) {
                    t.changeCandidates(e)
                }), this.delegate = e
            }, e.prototype.closeCandidate = function() {
                $("#edge-ui-ime-contents").remove(), this.candidates = [], this.inputPosition = void 0
            }, e.prototype.changeCandidates = function(e) {
                var t = document.activeElement,
                    i = t.isContentEditable,
                    n = t.tagName;
                (i || /textarea|input/i.test(n.toLowerCase())) && this.renderCandidates(e)
            }, e.prototype.calcPosition = function() {
                var e = document.body.style,
                    t = e.getPropertyValue("-webkit-transform");
                e.setProperty("-webkit-transform", "scale(1)");
                try {
                    var i = $(document.activeElement),
                        n = i.parent().find(".TextInputFrame .comp-Shape"),
                        r = (n.length ? n : i).get(0).getBoundingClientRect(),
                        o = r.left;
                    return {
                        top: r.top,
                        left: o,
                        height: r.height
                    }
                } catch (e) {
                    throw log.error("ime.service.calcPosition", e), e
                } finally {
                    e.setProperty("-webkit-transform", t)
                }
            }, e.prototype.getMostRightOffset = function() {
                switch ($("#edge-ui").attr("data-ratio")) {
                    case "ratio-Ratio4x3":
                        return 1680;
                    case "ratio-Ratio16x10":
                        return 1822;
                    case "ratio-Ratio5x3":
                        return 1858;
                    default:
                        return 1920
                }
            }, e.prototype.layout = function(e, t) {
                var i = this.getPosition(),
                    n = i.left,
                    r = i.top,
                    o = i.height,
                    a = this.getMostRightOffset() - n;
                e.appendChild(t);
                var s = e.offsetHeight,
                    c = r - s;
                c < 0 && $(e).prepend(t);
                var d = c >= 0 ? c : r + o;
                $(e).css({
                    left: n,
                    top: d,
                    maxWidth: a
                }).find(".ime-content").each(function(e, t) {
                    t.style.maxWidth = a + "px"
                })
            }, e.prototype.getPosition = function() {
                return this.inputPosition || (this.inputPosition = this.calcPosition())
            }, e.prototype.getCompositionWindow = function(e, t) {
                void 0 === t && (t = e.length);
                var i = !1,
                    n = e.slice(0, t),
                    r = e.slice(t, e.length),
                    o = $("#edge-ime-composition");
                return o.size() ? (o.find("#edge-ime-composition-before").text(n), o.find("#edge-ime-composition-after").text(r)) : (o = $("\n        <div id='edge-ime-composition' class='ime-content ime-composition'>\n          <span id='edge-ime-composition-before'>\n          " + n + "</span><span id='edge-ime-composition-caret' class='ime-caret'>\n          </span><span id='edge-ime-composition-after'>\n          " + r + "</span>\n        </div>\n      "), i = !0), {
                    htmlElement: o.get(0),
                    created: i
                }
            }, e.prototype.getCandidatesWindow = function(e, t) {
                var i = this,
                    n = !1,
                    r = $("#edge-ui-ime-contents").get(0);
                return r ? $(r).find(".ime-content").size() !== t.length && ($(r).empty(), n = !0) : (r = $('<div id="edge-ui-ime-contents" class="contents">').get(0), n = !0), _.each(t, function(t, n) {
                    var o = n + 1,
                        a = "edge-ime-content-" + o,
                        s = $("#" + a).get(0);
                    s ? (s.innerText = o.toString() + ". " + t, o === e ? s.classList.add("ime-current") : s.classList.remove("ime-current")) : (s = document.createElement("div"), s.id = a, s.innerText = o.toString() + ". " + t, s.classList.add("ime-content"), o === e && s.classList.add("ime-current"), s.sequence = o, s.onclick = function(e) {
                        var t = e.srcElement;
                        return i.delegate.beSelectCandidate(t.sequence)
                    }, r.appendChild(s))
                }), n && $("#edge-ui-ime").append(r), {
                    htmlElement: r,
                    created: n
                }
            }, e.prototype.renderCandidates = function(e) {
                var t = JSON.parse(e),
                    i = t.current,
                    n = t.composition,
                    r = t.caret,
                    o = this.candidates = _.map(t.items, function(e) {
                        return e.toString()
                    }),
                    a = this.getCandidatesWindow(i, o),
                    s = this.getCompositionWindow(n, r);
                (a.created || s.created) && this.layout(a.htmlElement, s.htmlElement)
            }, e
        }();
    t.ImeService = o, angular.module("edge.components").factory("imeService", r.default.generateService(o))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "tutorial.updateTutorialStatus",
            status: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.updateTutorialStatus = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.TaskToRecordMap = {
        gameplay_topspeed: "speed",
        gameplay_distance: "mileage",
        gameplay_jumpdistance: "jump",
        gameplay_useturbo: "turbouse",
        gameplay_chargeturbo: "turbocharge",
        gameplay_drifttime: "drift",
        gameplay_useshortturbo: "shortturbo"
    }, t.AlwaysSaveTaskTypes = {
        match_win: !0,
        gameplay_useturbo: !0,
        gameplay_chargeturbo: !0,
        gameplay_useshortturbo: !0
    }, t.UpdateIntervalTime = 1e4, t.UpdateIntervalMileage = 5e3
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(35),
        a = i(118),
        s = i(4),
        c = i(3),
        d = i(229),
        l = i(10),
        u = function(e) {
            function t(t, i, r, o, a) {
                var s = e.call(this) || this;
                return s.externalService = t, s.recordService = i, s.staticdata = r, s.serverTimeService = o, s.pushService = a, s.updateLimitedMission = function(e, t) {
                    var i = e[1],
                        r = t.body.deltaProgress,
                        o = n.__assign({}, r, {
                            code: Number(i)
                        });
                    c.store.dispatch(d.updateLimitedMission(o)), s.externalService.beUpdateLimitedMission(o)
                }, s
            }
            return n.__extends(t, e), t.prototype.init = function() {
                var e = this;
                if (c.store.getState().mission.spotRecords) return r.resolve();
                if (this.initPromise) return this.initPromise;
                this.pushService.subscribeResource(/\/limitedmission\/progress\/(\d+)/, this.updateLimitedMission);
                var t = c.store.getState().player.id;
                return this.initPromise = r.all([this.fetchSpotRecords(t), this.fetchMissionRecords(t), this.fetchPortals(t), this.initLimitedMission(t)]).then(function(t) {
                    e.initPromise = void 0;
                    var i = t[0],
                        n = t[1],
                        r = t[2];
                    c.store.dispatch(d.fetchSpotAndMission(i, n)), e.externalService.beInitOpenworldSpot(i), e.externalService.beInitOpenworldMission(n), e.externalService.beInitOpenworldPortal(r)
                })
            }, t.prototype.onUnlockPortal = function(e) {
                var t = c.store.getState().player.id;
                l.request("POST", "openworld/portals/" + t + "/@update", {
                    code: e
                })
            }, t.prototype.fetchSpotRecords = function(e) {
                return l.request("GET", "openworld/spots/" + e).then(function(e) {
                    return _.map(e.spots, function(e, t) {
                        return {
                            code: Number(t),
                            type: e.type,
                            record: e.record
                        }
                    })
                })
            }, t.prototype.fetchMissionRecords = function(e) {
                var t = this;
                return l.request("GET", "openworld/missions/" + e).then(function(e) {
                    return _.map(e.missions, function(e, i) {
                        return {
                            code: Number(i),
                            record: e.record,
                            medal: a.Medal[t.toMedal(i, e.record)],
                            difficulty: t.getMission(i).difficulty
                        }
                    })
                })
            }, t.prototype.fetchPortals = function(e) {
                return l.request("GET", "openworld/portals/" + e).then(function(e) {
                    return e.portals || []
                })
            }, t.prototype.initLimitedMissionState = function(e) {
                var t = this,
                    i = _.reduce(e.progress, function(e, t, i) {
                        return e[i] = n.__assign({}, t, {
                            code: Number(i)
                        }), e
                    }, {}),
                    r = new Date(e.resetDate);
                c.store.dispatch(d.initLimitedMission({
                    resetDate: r,
                    progress: i
                })), this.externalService.beInitLimitedMission(_.values(i));
                var o = c.store.getState().player.id,
                    a = this.serverTimeService.getRemainingDuration(r).asMilliseconds();
                setTimeout(function() {
                    return t.initLimitedMission(o)
                }, a)
            }, t.prototype.initLimitedMission = function(e) {
                var t = this;
                return l.request("GET", "openworld/limitedmission/" + e).then(function(e) {
                    return t.initLimitedMissionState(e)
                })
            }, t.prototype.updateSpotRecord = function(e) {
                var t = c.store.getState(),
                    i = t.mission.spotRecords,
                    n = t.player.id;
                return l.request("POST", "openworld/spots/" + n + "/@update", e), !i[e.code] || i[e.code].record < e.record ? (c.store.dispatch(d.updateSpotRecord(e)), e) : i[e.code]
            }, t.prototype.getMissions = function() {
                return this.staticdata.mission
            }, t.prototype.getMission = function(e) {
                return this.getMissions().mission[e]
            }, t.prototype.onFinish = function(e) {
                var t = c.store.getState().mission,
                    i = t.missionId,
                    n = t.gameMode;
                if (1 === e) return this.sendResult(i, void 0, !0), a.Medal.empty;
                var r = this.recordService.getAllRecords(),
                    o = this.getMyRecord(n, r),
                    s = a.Medal[this.toMedal(i, o)];
                return this.sendResult(i, o), this.externalService.beFinishOpenworldMission({
                    code: i,
                    record: o,
                    medal: s,
                    difficulty: this.getMission(i).difficulty
                }), this.emit("mission.finish", {
                    missionId: i,
                    gameMode: n,
                    medal: s,
                    rank: r.rank,
                    missionData: this.getMission(i)
                }), s
            }, t.prototype.sendResult = function(e, t, i) {
                void 0 === i && (i = !1);
                var n = c.store.getState().player.id;
                l.request("POST", "openworld/missions/" + n + "/@end", {
                    code: e,
                    record: t,
                    isAbandoned: i
                })
            }, t.prototype.getMyRecord = function(e, t) {
                return e === a.GameMode.TIMEATTACK ? t.laptime : t.rank
            }, t.prototype.toMedal = function(e, t) {
                if (t < 0) return "retire";
                var i = this.getMission(e);
                return _.findKey(i.record, function(e) {
                    return e >= t
                }) || "retire"
            }, t.prototype.onUnlock = function(e) {
                var t = this.getMissions().mission,
                    i = _(e).map(function(e) {
                        var i = t[e];
                        return i || log.error("missionService.onUnlock: ignore unknown mission code [" + e + "]"), i
                    }).filter(function(e) {
                        return e
                    }).map(function(e) {
                        return {
                            code: e.code,
                            difficulty: e.difficulty
                        }
                    }).value();
                c.store.dispatch(d.addUnlockedMissions(e)), this.externalService.beUnlockMission(i)
            }, t.prototype.highlightMissions = function(e) {
                this.externalService.beHighlightMission(e)
            }, t.prototype.isLimitedMission = function(e) {
                var t = c.store.getState().mission.limitedMission,
                    i = t && t.progress[e];
                return i && i.currentCount < i.limitCount
            }, t.prototype.getReward = function(e, t) {
                var i;
                if (this.isLimitedMission(e.code)) {
                    var n = _.find(this.staticdata.mission.limitedReward, function(t) {
                        return _.includes(t.missionPool, e.code)
                    });
                    n && (i = n.reward)
                }
                return {
                    limited: i,
                    default: e.reward[t]
                }
            }, t.prototype.cheatUnlockAllMissions = function() {
                var e = this,
                    t = c.store.getState().player.id;
                return l.request("PUT", "openworld/missions/unlock/" + t).then(function(t) {
                    e.onUnlock(t.unlockCodes)
                })
            }, t.prototype.cheatUnlockAllPortals = function() {
                var e = this,
                    t = c.store.getState().player.id;
                return l.request("PUT", "openworld/portals/unlock/" + t).then(function(t) {
                    e.externalService.beInitOpenworldPortal(t.unlockCodes)
                })
            }, t.prototype.cheatLimitedMission = function(e) {
                var t = this,
                    i = c.store.getState(),
                    r = i.player.id,
                    o = i.mission.limitedMission;
                return l.request("PUT", "openworld/limitedmission/players/" + r + "/progress", {
                    progress: n.__assign({}, o.progress, (a = {}, a[e.code] = e, a))
                }).then(function(e) {
                    return t.initLimitedMissionState(e)
                });
                var a
            }, t.prototype.cheatResetLimitedMissions = function() {
                var e = this,
                    t = c.store.getState(),
                    i = t.player.id,
                    r = t.mission.limitedMission;
                return l.request("PUT", "openworld/limitedmission/players/" + i + "/progress", {
                    progress: _.mapValues(r.progress, function(e) {
                        return n.__assign({}, e, {
                            currentCount: 0
                        })
                    })
                }).then(function(t) {
                    return e.initLimitedMissionState(t)
                })
            }, t.prototype.cheatLimitedMissionResetDate = function(e) {
                var t = this,
                    i = c.store.getState().player.id;
                return l.request("PUT", "openworld/limitedmission/season", {
                    endDate: e
                }).then(function() {
                    return t.initLimitedMission(i)
                })
            }, t
        }(o.EventEmitter);
    u.$inject = ["externalService", "recordService", "staticdataLoaderService", "serverTimeService", "pushService"], t.OpenworldMissionService = u, angular.module("edge.components").factory("openworldMissionService", s.default.service(u))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = i(4),
        a = i(3),
        s = i(10),
        c = function(e) {
            function t() {
                var t = e.call(this) || this;
                return t.driveMileageInfo = {
                    accMileage: 0,
                    rewardCount: 0,
                    rewardMileage: 15e3,
                    updateMileageThreshold: 5e3,
                    lastMileage: void 0
                }, t.isInitialized = !1, t
            }
            return n.__extends(t, e), t.prototype.init = function() {
                var e = this;
                if (!this.isInitialized) {
                    var t = a.store.getState().player.id;
                    this.fetchDriveMileage(t).then(function(t) {
                        var i = t.mileageInfo,
                            n = t.rewardMileage,
                            r = void 0 === n ? 1e3 : n,
                            o = t.updateMileageThreshold,
                            a = void 0 === o ? 3e3 : o;
                        e.driveMileageInfo.accMileage = i.mileage, e.driveMileageInfo.rewardCount = i.rewardCount, e.driveMileageInfo.rewardMileage = r, e.driveMileageInfo.updateMileageThreshold = a, e.isInitialized = !0
                    })
                }
            }, t.prototype.fetchDriveMileage = function(e) {
                return s.request("GET", "openworld/drive/mileage/" + e)
            }, t.prototype.getAccMileage = function() {
                return this.driveMileageInfo.accMileage
            }, t.prototype.getLastMileage = function() {
                return this.driveMileageInfo.lastMileage
            }, t.prototype.getDriveMileageInfo = function() {
                return this.driveMileageInfo
            }, t.prototype.increaseMileage = function(e) {
                return this.driveMileageInfo.accMileage += e, this.driveMileageInfo.accMileage
            }, t.prototype.updateLastMileage = function(e) {
                this.driveMileageInfo.lastMileage = e
            }, t.prototype.updateRewardCount = function(e) {
                this.driveMileageInfo.rewardCount = e
            }, t.prototype.updateDriveMileage = function(e) {
                var t = a.store.getState().player.id,
                    i = Math.floor(e);
                s.request("PUT", "openworld/drive/mileage/" + t, {
                    deltaMileage: i
                })
            }, t.prototype.displayRewardMessageBar = function() {
                this.emit("updateMileage", this.driveMileageInfo.accMileage)
            }, t
        }(r.EventEmitter);
    t.OpenworldDriveMileageService = c, angular.module("edge.components").factory("openworldDriveMileageService", o.default.service(c))
}, function(e, t, i) {
    "use strict";
    var n = angular.module("edge.components");
    i(1167)(n), i(1168)(n), i(1169)(n), i(1170)(n), i(1171)(n), i(1172)(n), i(1173)(n)
}, function(e, t, i) {
    "use strict";

    function n() {
        return '\n<div>\n  <div id="messenger" class="clickable" ng-if="messengerVisible()"\n  eg-draggable\n  eg-draggable-bounce={{isBounce}}\n  eg-draggable-in-bound={{::true}}\n  eg-draggable-limit="translateLimit()"\n  >\n    <header class="title-header clear" eg-drag-handle>\n      <h1 class="lfloat">{{::"MESSENGER_TEMPLATE_FRIENDLIST"|translate}} <span class="count">({{favorites.length + getFriends().length}})</span></h1>\n      <div class="close-btn rfloat" ng-click="onCloseClick(e)">\n        <img src="images/html/messenger/ExitButtonIcon.png">\n      </div>\n    </header>\n    <div class="content clear">\n      <div class="left-sidebar lfloat">\n        <div id="friends">\n          <div id="add-friend" class="btn">\n            <i class="icon-invite"></i>\n            <span>{{::"MESSENGER_TEMPLATE_ADDFRIEND"|translate}}</span>\n          </div>\n          <div class="tab-content always-visible" eg-scroll="suppressScrollX: true;destroyDelay: 200" ng-class="{\'friends-open\': friendsOpened}">\n            <div class="friends-list-top twbs" ng-click="toggleFriends()">\n              <span></span>\n              {{::"MESSENGER_TEMPLATE_TAP_FRIEND"|translate}}\n            </div>\n            <div id="empty-guide" ng-show="getFriends().length === 0">\n              <div class="icon"></div>\n              <div class="guide1">{{::"MESSENGER_NOFRIENDS1"|translate}}</div>\n              <div class="guide2">{{::"MESSENGER_NOFRIENDS2"|translate}}</div>\n            </div>\n            <ul class="player-items">\n              <li ng-repeat="friend in getFriends() | orderBy:getFriendSortOrder"\n                class="player-item clear"\n                ng-mouseover="hover=true" ng-mouseleave="hover=false"\n                ng-click="showChannel($event, friend)"\n                ng-class="getThumbnailClass(friend)">\n                <div class="thumb lfloat" ng-class="showNewFriendIcon(friend)">\n                  <img ng-src="{{friend.snippet.avatar|cdn_avatar}}" eg-fallback-src ng-class="getThumbnailClass(friend)">\n                </div>\n                <i class="icon-delete right-button" ng-show="hover" ng-click="onUnfriend(friend)"></i>\n                <div class="tier-medal">\n                  <img ng-show="{{hasMedalTier(friend)}}" ng-src="{{getMedalImage(friend)}}">\n                </div>\n                <div class="player-content">\n                  <span class="name" ng-class="isIdle(friend) ? \'hover\' : \'\'">Lv.{{friend.snippet.level}} {{friend.snippet.name}}</span>\n                  <span ng-show="friend.snippet.igr"><img src="images/html/messenger/Icon_Pc.png"></span>\n                  <span ng-show="friend.snippet.vip"><img src="images/html/messenger/Icon_Vip.png"></span>\n                  <div class="channel" ng-click="changeChannel(friend)">{{::"MESSENGER_GOTOMYFRIEND"|translate}}</div>\n                </div>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <div class="main-container lfloat">\n        <div class="invite-panel">\n          <div class="clear form">\n            <input id="player-name" placeholder="{{::\'MESSENGER_ADDFRIENDWITHNAME\'|translate}}" class="lfloat" eg-enter="onSendRequestClick()" ng-model="friendRequest.name" eg-key-input=""/>\n            <a class="btn-send lfloat" ng-click="onSendRequestClick()">\n              {{::"MESSENGER_SENDREQUEST" | translate}}\n            </a>\n          </div>\n          <div class="error" ng-class="{\'message-text\': friendRequest.error}">{{friendRequest.error}}</div>\n          <div class="list-container always-visible" eg-scroll="suppressScrollX: true;destroyDelay: 200">\n            <div class="recv-list-top tab">{{::"MESSENGER_TEMPLATE_REQUEST_RECEIVE"|translate}}</div>\n            <ul>\n              <li ng-repeat="invite in getRecvInvites()" class="request-item clear">\n                <div class="request-thumb lfloat" ng-class="showNewRequestIcon(invite)">\n                  <img ng-src="{{invite.snippet.avatar|cdn_avatar}}" eg-fallback-src class="img-thumbnail">\n                </div>\n                <a class="btn-recv rfloat" ng-click="onRejectRequestClick(invite)">{{::"MESSENGER_TEMPLATE_REFUSE"|translate}}</a>\n                <div class="seperator rfloat"></div>\n                <a class="btn-recv rfloat" ng-click="onAcceptRequestClick(invite)">{{::"MESSENGER_TEMPLATE_ACCEPT"|translate}}</a>\n                <div class="request-content">\n                  <p class="name">{{invite.snippet.name}}</p>\n                </div>\n              </li>\n              <div class="empty-guide" ng-hide="getRecvInvites().length">{{::\'MESSENGER_TEMPLATE_NO_REQUEST_RECEIVE\'|translate}}</div>\n            </ul>\n            <div class="send-list-top tab" >{{::"MESSENGER_TEMPLATE_REQUEST_SEND"|translate}}</div>\n            <ul>\n              <li ng-repeat="invite in getSentInvites()" class="request-item clear" ng-mouseover="hover=true" ng-mouseleave="hover=false">\n                <div class="request-thumb lfloat">\n                  <img ng-src="{{invite.snippet.avatar|cdn_avatar}}" eg-fallback-src class="img-thumbnail">\n                </div>\n                <i class="icon-delete right-button" ng-show="hover" ng-click="onDeleteRequestClick(invite)"></i>\n                <p class="wait right-button" ng-show="!hover">{{::"MESSENGER_TEMPLATE_REQUEST_WAITING"|translate}}</p>\n                <div class="request-content">\n                  <p class="name">{{invite.snippet.name}}</p>\n                </div>\n              </li>\n              <div class="empty-guide" ng-hide="getSentInvites().length">{{::\'MESSENGER_TEMPLATE_NO_REQUEST_SEND\'|translate}}</div>\n            </ul>\n          </div>\n        </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n  '
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.tmpl = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(29),
        a = i(3),
        s = i(2),
        c = i(113),
        d = i(1204),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.isKeyDown = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.menuContainer = this.getFace(".MenuContainer"), this.menuContainer.hasSize = !0, this.translate(".id-keyDescription .comp-TextField", "SCREENHELP_F1F3"), this.translate(".id-header .id-title", "VIDEOGUIDE_TITLE"), this.on(".id-close", s.MouseEventEx.CLICK, function() {
                    return e.dispatch(c.hide())
                }), this.guideViewBinder = this.addChildBinder(".id-videoContainer", d.GuideViewBinder)
            }, t.prototype.onAddedToScene = function() {
                this.videoGuideMenuRenderer.render(), this.registerEventHandler()
            }, t.prototype.registerEventHandler = function() {
                $(window).on("keydown.videoguide", this.onKeyDown.bind(this)), $(window).on("keyup.videoguide", this.onKeyUp.bind(this))
            }, t.prototype.onKeyDown = function(e) {
                this.isKeyDown || e.keyCode !== o.KeyboardMap.getKeyCode("F3") || this.isShowingOtherGlobalUI() || (this.isKeyDown = !0, this.isShowed() ? this.dispatch(c.hide()) : this.dispatch(c.show()))
            }, t.prototype.onKeyUp = function() {
                this.isKeyDown && (this.isKeyDown = !1)
            }, t.prototype.show = function(e) {
                this.bgmService.stop(1e3), this.stage.gotoAndPlay("in")
            }, t.prototype.hide = function() {
                this.resumeBgm(), this.stage.gotoAndPlay("out")
            }, t.prototype.resumeBgm = function() {
                this.bgmService.playMeta()
            }, t.prototype.isShowed = function() {
                return "in" === this.face.currentLabel
            }, t.prototype.shouldUpdate = function(e) {
                return !e.isShowCoreLoading
            }, t.prototype.update = function(e) {
                var t = e.videoGuide;
                this.isShowed() && !t.show && this.hide(), !this.isShowed() && t.show && this.show(), this.guideViewBinder.setProps(t)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    videoGuide: e.videoGuide,
                    isShowCoreLoading: e.coreLoading.show
                }
            }, t.prototype.isShowingOtherGlobalUI = function() {
                var e = "block" === $("#edge-ui-help-screen .id-contents").css("display"),
                    t = a.store.getState().coreLoading.show,
                    i = _(a.store.getState().globalPanel.systemTrayState).every(function(e) {
                        return !e
                    });
                return e || t || i
            }, t.prototype.onDetach = function() {
                $(window).off("keydown.videoguide"), $(window).off("keyup.videoguide"), this.dispatch(c.hide()), this.videoGuideMenuRenderer.unmount()
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("videoGuideMenuRenderer")], l.prototype, "videoGuideMenuRenderer", void 0), n.__decorate([r.autowired("bgmService")], l.prototype, "bgmService", void 0), t.VideoGuideBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.INSTANT_CHAT_GROUPS = ["room", "lobby", "match"];
    ! function(e) {
        e[e.TEXT = 1] = "TEXT", e[e.CUSTOM = 10] = "CUSTOM"
    }(t.ChatMessageType || (t.ChatMessageType = {})), t.messageMap = {
        "root.messenger": {
            buttonName: "SYSTEMTRAY_MOVEMESSENGER_BUTTON",
            transition: "SYSTEMTRAY_MOVEMESSENGER_FEATURENAME"
        },
        "root.promotion": {
            buttonName: "SYSTEMTRAY_MOVEPROMOTION_BUTTON",
            transition: "SYSTEMTRAY_MOVEPROMOTION_FEATURENAME"
        },
        "root.menu.MultiplayRoom": {
            buttonName: "SYSTEMTRAY_MOVEWAITROOM_BUTTON",
            transition: "SYSTEMTRAY_MOVEWAITROOM_FEATURENAME"
        },
        "root.menu.MultiplayTeamRoom": {
            buttonName: "SYSTEMTRAY_MOVEWAITROOM_BUTTON",
            transition: "SYSTEMTRAY_MOVEWAITROOM_FEATURENAME"
        },
        "root.menu.Inbox": {
            buttonName: "SYSTEMTRAY_MOVEINBOX_BUTTON",
            transition: "SYSTEMTRAY_MOVEINBOX_FEATURENAME"
        },
        "root.menu.VehicleSellList": {
            buttonName: "SYSTEMTRAY_MOVETRADEMARKETSELLLIST_BUTTON",
            transition: "SYSTEMTRAY_MOVETRADEMARKETSELLLIST_FEATURENAME"
        },
        "root.menu.MyClan": {
            buttonName: "SYSTEMTRAY_CLANJOIN_BUTTON",
            transition: "SYSTEMTRAY_CLANJOIN_FEATURENAME"
        },
        "root.menu.ClanList": {
            buttonName: "SYSTEMTRAY_CLANJOIN_REJECT_BUTTON",
            transition: "SYSTEMTRAY_CLANJOIN_REJECT_FEATURENAME"
        },
        "root.menu.ClanManage": {
            buttonName: "SYSTEMTRAY_CLANJOIN_BUTTON_2",
            transition: "SYSTEMTRAY_CLANJOIN_FEATURENAME_2"
        },
        "root.menu.TradePlayerAuction": {
            buttonName: "SYSTEMMESSAGE_AUCTIONSUCCESSFAILURE_BUTTON",
            transition: "SYSTEMMESSAGE_AUCTIONSUCCESSFAILURE_FEATURENAME"
        },
        "root.questPreview": {
            buttonName: "SYSTEMTRAY_MOVEQUEST_BUTTON",
            transition: "SYSTEMTRAY_MOVEQUEST_FEATURENAME"
        },
        "root.menu.Inventory": {
            buttonName: "SYSTEMTRAY_MOVEINVENTORY_BUTTON",
            transition: "SYSTEMTRAY_MOVEINVENTORY_FEATURENAME"
        }
    }
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(44),
        s = i(69),
        c = i(600),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.enterRoom = function(e, t) {
                var i = this;
                return this.preventClick(function() {
                    return i.leaveRoom().then(function() {
                        return i.room2Service.enterRoom(e, t)
                    }).then(function() {
                        return i.stateService.go("root.menu.MultiplayRoom", {
                            roomId: e
                        })
                    })
                })
            }, t.prototype.enterTeamRoom = function(e, t) {
                var i = this;
                return this.preventClick(function() {
                    return i.leaveRoom().then(function() {
                        return i.teamRoomService.joinTeamRoom(e, t)
                    }).then(function() {
                        return i.stateService.go("root.menu.MultiplayTeamRoom", {
                            roomId: e
                        })
                    })
                })
            }, t.prototype.preventClick = function(e) {
                var t = this;
                $("#edge-ui").addClass("prevent-click"), e().catch(function(e) {
                    return a.showRoomErrorPopup(e, t.$filter, t.popupService)
                }).finally(function() {
                    return $("#edge-ui").removeClass("prevent-click")
                })
            }, t.prototype.leaveRoom = function() {
                return r.all([this.teamRoomService.getRoom() && this.teamRoomService.leaveTeam(), this.room2Service.currentRoom && this.room2Service.exitRoom()])
            }, t.prototype.onRoomInvite = function(e, t, i) {
                this.storeState.view.flags.matchmaking ? this.popupService.drawConfirm("MATCHMAKING_NOINVITE_TITLE", "MATCHMAKING_NOINVITE_DESC") : this.notifierService.confirmCancelPopup(e, t, i)
            }, t.prototype.onClickClose = function() {
                var e = this,
                    t = this.props,
                    i = t.transition,
                    n = t.date,
                    r = t.params;
                if (i) {
                    this.dispatch(s.hide());
                    var o = c.messageMap[i].transition;
                    "root.messenger" === i ? this.notifierService.openMessenger(n) : "root.questPreview" === i ? this.notifierService.openQuestPreview(n) : this.notifierService.isClickable() ? "root.promotion" === i ? this.notifierService.openPromotion(n, r.id) : "root.menu.MultiplayRoom" === i ? this.onRoomInvite(function() {
                        return e.enterRoom(r.roomId, r.password)
                    }, o, n) : "root.menu.MultiplayTeamRoom" === i ? this.onRoomInvite(function() {
                        return e.enterTeamRoom(r.roomId, r.password)
                    }, o, n) : this.notifierService.confirmCancelPopup(function() {
                        !e.navService.isTabLocked(i) && e.stateService.go(i)
                    }, o, n) : this.popupService.drawConfirm("WAITINGROOM_NOEXIT_TITLE", "WAITINGROOM_NOEXIT_DESC")
                }
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("navService")], d.prototype, "navService", void 0), n.__decorate([o.autowired("popupService")], d.prototype, "popupService", void 0), n.__decorate([o.autowired("stateService")], d.prototype, "stateService", void 0), n.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([o.autowired("notifierService")], d.prototype, "notifierService", void 0), n.__decorate([o.autowired("room2Service")], d.prototype, "room2Service", void 0), n.__decorate([o.autowired("teamRoomService")], d.prototype, "teamRoomService", void 0), t.NotificationItem = d
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            mainText: [{
                title: "PCROOM_TOOLTIP_BENEFIT_TITLE"
            }, {
                description: "PCROOM_TOOLTIP_BENEFIT_DESC"
            }],
            subText: ["QUEST_SP", "QUEST_QP", "REWARD_EXP", "REWARD_SP", "REWARD_CARD", "MARKET_FEE", "MODE_CAR"].map(function(i) {
                var n = 0;
                switch (i) {
                    case "REWARD_EXP":
                        n = t.rewardExp;
                        break;
                    case "REWARD_SP":
                        n = t.rewardSp;
                        break;
                    case "MARKET_FEE":
                        n = t.marketFee;
                        break;
                    case "QUEST_SP":
                        n = t.questSp;
                        break;
                    case "QUEST_QP":
                        n = t.questQp;
                        break;
                    case "REWARD_CARD":
                    case "MODE_CAR":
                        n = 42
                }
                if (n) return e({
                    value: n
                }, "PCROOM_TOOLTIP_BENEFIT_" + i)
            }).filter(function(e) {
                return e
            })
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(1),
        a = i(46),
        s = i(3),
        c = i(2),
        d = i(13),
        l = i(54),
        u = i(94);
    t.getPcBefitTooltipInfo = n;
    var p = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.updatePcCafeIcon = function() {
                t.apply(".PcCafeIcon", u.igr, t.publisherService.isIgr)
            }, t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.hasSize(this.face, !0), this.hasSize(".RankedMatchRewardIconSmall", !0), this.hasSizeAll(".comp-TextField", !1), this.classNames(this.face, "leftsideReviseCoordinateOfScreenRatio"), this.progressBinder = this.addChildBinder(".comp-StatusIndicator", a.ProgressBinder, {
                useOldStyleProgress: !0
            }), this.medal = this.addChildBinder(".RankedMatchRewardIconSmall", l.TierMedalBinder), this.on(".id-userInfo", c.MouseEventEx.MOUSE_OVER, function(t) {
                return e.onPlayerInfoOver(t)
            }), this.on(".id-userInfo", c.MouseEventEx.MOUSE_OUT, function() {
                return e.tooltipService.hide()
            }), this.on(".PcCafeIcon", c.MouseEventEx.MOUSE_OVER, function(t) {
                e.tooltipService.show(t, "bottom", d.TooltipType.BasicDetail, n(e.$filter("template"), e.staticdata.pcBenefitData), void 0, void 0, "freedrive-igr-tooltip")
            }), this.on(".PcCafeIcon", c.MouseEventEx.MOUSE_OUT, function() {
                return e.tooltipService.hide()
            })
        }, t.prototype.onAddedToScene = function() {
            this.updatePcCafeIcon(), this.publisherService.on("igr", this.updatePcCafeIcon)
        }, t.prototype.onDetach = function() {
            this.publisherService.removeListener("igr", this.updatePcCafeIcon), this.tooltipService.hide()
        }, t.prototype.update = function(e) {
            var t = e.playerInfoState,
                i = t.id,
                n = t.level,
                r = t.name,
                o = t.exp,
                a = t.sp,
                s = this.ranked2Service.getMedalTier(i);
            this.medal.setProps({
                hide: !s.code,
                tierCode: s.code,
                tierMode: s.mode
            }), this.bindText(".id-userInfo .id-level", "Lv." + n), this.bindText(".id-userInfo .id-name", r);
            var c = o - this.rewardService.getMaxExpByLevel(n),
                d = this.rewardService.getRequiredPlayerExp4NextLevel(n);
            this.progressBinder.setProps({
                value: c,
                max: d,
                useOldStyleProgress: !0
            }), this.visible(".id-vipIcon", !1), this.template(".id-SpTextField", "PLAYER_INFO_SP", {
                currency: this.$filter("currency")(a, "", 0)
            })
        }, t.prototype.mapStateToProps = function(e) {
            return {
                playerInfoState: e.playerInfo,
                rankedState: e.ranked
            }
        }, t.prototype.onPlayerInfoOver = function(e) {
            var t = s.store.getState().player,
                i = t.exp - this.rewardService.getMaxExpByLevel(t.level),
                n = i / this.rewardService.getRequiredPlayerExp4NextLevel(t.level),
                r = {
                    level: t.level,
                    nextLevel: t.level + 1,
                    exp: i,
                    expMax: this.rewardService.getRequiredPlayerExp4NextLevel(t.level),
                    expPercent: Math.floor(1e3 * n) / 10,
                    rewards: this.rewardService.getLevelReward(t.level + 1)
                };
            this.tooltipService.show(e, "bottom", d.TooltipType.ExpDetail, r, {
                marginTop: 10
            })
        }, t
    }(o.Binder);
    r.__decorate([o.autowired("$filter")], p.prototype, "$filter", void 0), r.__decorate([o.autowired("rewardService")], p.prototype, "rewardService", void 0), r.__decorate([o.autowired("ranked2Service")], p.prototype, "ranked2Service", void 0), r.__decorate([o.autowired("publisherService")], p.prototype, "publisherService", void 0), r.__decorate([o.autowired("tooltipService")], p.prototype, "tooltipService", void 0), r.__decorate([o.autowired("staticdataLoaderService")], p.prototype, "staticdata", void 0), t.PlayerInfoBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(225),
        s = i(226),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(this.face, !0), this.face.setCustomStyle({
                    position: "relative",
                    display: "inline-block"
                }), this.on(this.face, o.MouseEventEx.CLICK, function() {
                    var t = e.props;
                    (0, t.onClick)(t.index)
                })
            }, t.prototype.update = function(e) {
                this.face.selected = e.selected
            }, t
        }(r.Binder);
    t.PageNumber = c;
    var d = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.prevIndex = 0, t.nextIndex = 0, t.openPromotionList = function() {
                var e = t.props;
                e.banners && e.banners.length && t.dispatch(s.openPromotionList(e.banners[t.nextIndex]))
            }, t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.translate(".id-title", "PROMOTION_BANNER_TITLE");
            var e = this.getFace(".id-bannerContainer");
            e.setCustomStyle({
                "pointer-events": "none"
            }), this.on(e, o.MouseEventEx.CLICK, this.openPromotionList);
            var t = this.getFace(".id-pageNumContainer");
            t.setCustomStyle({
                "text-align": "center"
            }), this.hasSize(t, !0), this.pageNumbers = this.addChildBinder(".id-pageNum", r.CollectionBinder, {
                instanceBinder: c
            })
        }, t.prototype.setSlideInterval = function(e) {
            var t = this;
            this.clearSlideInterval(), e.banners.length > 1 && (this.slideInterval = setInterval(function() {
                return t.slideBanner()
            }, a.PromotionBannerSlidingTerm))
        }, t.prototype.shouldUpdate = function(e) {
            return this.props.banners !== e.banners
        }, t.prototype.update = function(e) {
            var t = e.banners.length > 0;
            if (this.visible(this.face, t), !t) return this.clearSlideInterval();
            this.nextIndex = this.prevIndex = 0, this.bindImages(e), this.updatePageNumbers(e), this.storeState.globalPanel.showGnbHub && this.setSlideInterval(e)
        }, t.prototype.updatePageNumbers = function(e) {
            var t = this,
                i = function(e) {
                    return t.slideBanner(e)
                };
            this.pageNumbers.applyCollection(e.banners.map(function(e, n) {
                return {
                    onClick: i,
                    index: n,
                    selected: n === t.nextIndex
                }
            }))
        }, t.prototype.slideBanner = function(e) {
            if (this.nextIndex !== e) {
                var t = this.props,
                    i = void 0 !== e;
                this.nextIndex = i ? e : (this.nextIndex + 1) % t.banners.length, this.prevIndex = 0 === this.nextIndex ? t.banners.length - 1 : this.nextIndex - 1, this.bindImages(t), this.gotoAndPlay(".id-bannerContainer", "transition"), this.updatePageNumbers(t), i && this.setSlideInterval(t)
            }
        }, t.prototype.getImageUri = function(e, t) {
            var i = e.banners[t],
                n = _.find(e.promotions, function(e) {
                    return e.info.id === i
                });
            return this.$filter("cdn")(n.info.imageCdn)
        }, t.prototype.bindImages = function(e) {
            this.drawExternalImage(".id-preBanner .id-externalImage", this.getImageUri(e, this.prevIndex)), this.drawExternalImage(".id-nextBanner .id-externalImage", this.getImageUri(e, this.nextIndex))
        }, t.prototype.onDetach = function() {
            this.clearSlideInterval()
        }, t.prototype.clearSlideInterval = function() {
            this.slideInterval && (clearInterval(this.slideInterval), this.slideInterval = void 0)
        }, t.prototype.onShowGnbHub = function() {
            this.setSlideInterval(this.props)
        }, t.prototype.onHideGnbHub = function() {
            this.clearSlideInterval()
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), t.PromotionBannerBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function() {
            function e() {}
            return e
        }();
    o.SELECTED_ITEM = "event-selected-item", t.ScrollListUiEvent = o;
    var a = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.selectedIndex = -1, t.itemCountPerPage = 0, t.scrollBar = void 0, t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            var t = e.itemBinderClass,
                i = e.sortTabBinder,
                n = e.selectedItem,
                o = e.itemCountPerPage;
            this.selectedItem = n, this.face.hasSize = !0, this.listBinder = this.addChildBinder(".id-listItem", r.CollectionBinder, {
                instanceBinder: t
            }), this.sortTabBinder = i, this.itemCountPerPage = o || 1
        }, t.prototype.onDetach = function() {
            this.destroyScrollBar()
        }, t.prototype.update = function(e) {
            this.setItems(e), this.applyCollection(), this.selectItem(this.selectedIndex), this.setScroll()
        }, t.prototype.setScroll = function() {
            var e = this;
            this.listBinder.binders.length <= this.itemCountPerPage && !_.isUndefined(this.scrollBar) ? this.destroyScrollBar() : this.itemCountPerPage < this.listBinder.binders.length && (this.scrollBar || (this.scrollBar = $(this.face.htmlElement).perfectScrollbar({
                suppressScrollX: !0
            })), setTimeout(function() {
                return e.scrollBar && e.scrollBar.perfectScrollbar("update")
            }))
        }, t.prototype.destroyScrollBar = function() {
            this.scrollBar && (this.scrollBar.perfectScrollbar("destroy"), this.scrollBar = void 0)
        }, t.prototype.setItems = function(e) {
            var t = e.items || [];
            this.items = t.map(function(e, t) {
                return n.__assign({}, e, {
                    index: t
                })
            })
        }, t.prototype.getItemProps = function(e) {
            var t = this;
            return {
                info: e,
                onClick: function(e) {
                    return t.selectItem(e.index)
                }
            }
        }, t.prototype.updateItemProp = function(e, t) {
            var i = this.items[e],
                n = null;
            i && (n = _.assign({}, i, t), this.props.items[e] = n, this.items[e] = n);
            var r = this.listBinder.binders[e];
            r && n && r.setProps(_.assign({}, r.getProps(), {
                info: n
            }))
        }, t.prototype.applyCollection = function() {
            var e = this;
            this.listBinder.applyCollection(_.map(this.items, function(t, i) {
                return n.__assign({}, e.getItemProps(t), {
                    viewIndex: i
                })
            }))
        }, t.prototype.selectItem = function(e) {
            var t = this;
            this.selectedIndex = e, _.isEmpty(this.getSelectedItem()) || this.listBinder.binders.forEach(function(e) {
                e.face.selected = e.getProps().info.index === t.selectedIndex
            }), this.selectedItem && this.selectedItem(this.items[this.selectedIndex])
        }, t.prototype.selectNone = function() {
            this.selectedIndex = -1, this.listBinder.binders.forEach(function(e) {
                e.face.selected = !1
            })
        }, t.prototype.scrollToTop = function() {
            this.scrollBar && this.scrollBar.perfectScrollbar("update").scrollTop(0)
        }, t.prototype.getSelectedItem = function() {
            return this.items[this.selectedIndex]
        }, t
    }(r.Binder);
    t.ScrollListBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(1),
        a = i(17),
        s = i(9),
        c = i(39),
        d = i(3),
        l = i(4),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.isTeamMatch = !1, t.isDriftMode = !1, t.isObserver = !1, t.itemByPid = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = d.store.getState().match.match;
                this.featureType = t.featureType, this.gameMode = t.gameMode, this.isTeamMatch = this.gameModeService.isTeamMode(this.gameMode), this.isDriftMode = "DRIFT" === this.gameModeService.getCoreModeFromGameMode(this.gameMode), this.isObserver = this.hudService.isObserver, this.container = this.getFace(".id-leaderboard"), this._onChanging = !1, _.range(8).forEach(function(t) {
                    var i = e.container.$("item" + t);
                    i.$("itemContainer").alpha = 0, i.visible = !0, i.alpha = 0
                })
            }, t.prototype.mapStateToProps = function(e) {
                return e.match
            }, t.prototype.update = function(e) {
                e.match && this.handleDisconnectedPlayer(e.match.players)
            }, t.prototype.onAddedToScene = function(e) {
                var t = this;
                this.focusPlayer = _.find(e.match.players, {
                    id: this.storeState.player.id
                }) || e.match.players[0], this.addManagedListener(this.externalService, s.default.beHUDSetLeaderboard, function(e, i, n) {
                    t.updateInternal(i, n)
                }), this.addManagedListener(this.externalService, s.default.beHUDSetLeaderboardVisible, function(e) {
                    t.face.visible = e
                }), this.addManagedListener(this.externalService, s.default.beAddRecord, function(e, i, n, o) {
                    void 0 === n && (n = 0), void 0 === o && (o = 0);
                    var a = t.itemByPid[e];
                    if (!a) return void r.warn("hud-leaderboard.binder addManagedListener item is undefined");
                    t.bindText(a.$(".id-lapTimeLabel"), l.default.formatLapTime(i)), t.gotoAndPlay(a.$("userFinishRecord"), "startAnimation"), (t.isTeamMatch || t.isObserver) && (a.$("itemContainer").alpha = 0)
                }), this.addManagedListener(this.externalService, s.default.beHUDSetPursuitModeClass, function(e, i) {
                    1 === i && (t.vipPid = e)
                }), this.addManagedListener(this.externalService, s.default.beHUDObserverSelectPlayer, function(e) {
                    var i = t.itemByPid[e];
                    i && t.focusItem(i, e)
                })
            }, t.prototype.focusItem = function(e, t) {
                var i = _.find(this.reduxProps.match.players, {
                    id: t
                });
                if (i) {
                    this.isTeamMatch ? this.gotoAndPlay(e.$("rank"), c.getTeamString(i.team)) : this.gotoAndPlay(e.$("rank"), "mylist"), this.gotoAndPlay(e.$("rankedList"), "player");
                    var n = this.focusPlayer,
                        r = this.itemByPid[n.id];
                    this.focusPlayer = i, n.id !== t && r && ("left" === n.state || "disconnected" === n.state ? (r.gotoAndPlay("disconnection"), this.gotoAndPlay(r.$("rankedList"), "disconnection")) : this.gotoAndPlay(r.$("rankedList"), "normal"), n.team === c.Team.Individual ? this.gotoAndPlay(r.$("rank"), "default") : this.gotoAndPlay(r.$("rank"), c.getTeamString(n.team)))
                }
            }, t.prototype.onFirstData = function(e, t) {
                var i = this;
                this._initialData = this._prevData = e, this._prevItemCountList = t, "PURSUITINDIVIDUAL" === this.gameMode && (this.aiGroup = this.gameModeService.getPursuitAiGroup());
                var n = 1;
                e.forEach(function(e) {
                    var t = _.find(i.reduxProps.match.players, {
                        id: e
                    });
                    if (t) {
                        var r;
                        if (i.focusPlayer && i.focusPlayer.id === e) r = i.container.$("item0"), i.bindText(r.$(".id-playerName"), i.playerSnippetService.getSnippet(e).name), i.isTeamMatch ? (i.gotoAndPlay(r.$("rank"), c.getTeamString(t.team)), i.gotoAndPlay(r.$("disconnect"), c.getTeamString(t.team))) : i.gotoAndPlay(r.$("rank"), "mylist"), i.gotoAndPlay(r.$("rankedList"), "player");
                        else {
                            if (!(r = i.container.$("item" + n++))) return;
                            if (i.aiGroup && i.aiGroup[e]) {
                                var o = i.aiGroup[e],
                                    a = i.driverService.getDriverInfo(o.driverCode);
                                i.translate(r.$(".id-playerName"), a.name)
                            } else {
                                var s = i.playerSnippetService.getSnippet(e).name;
                                i.vipPid === e && (s = "[VIP] " + s, r.$(".id-playerName").$("textField").setCustomStyle({
                                    color: "#00ccff"
                                })), i.bindText(r.$(".id-playerName"), s), i.isTeamMatch && (i.gotoAndPlay(r.$("rank"), c.getTeamString(t.team)), i.gotoAndPlay(r.$("disconnect"), c.getTeamString(t.team)), i.focusPlayer && i.focusPlayer.team === t.team && (r.$("itemContainer").alpha = 1))
                            }
                        }
                        i.isObserver && (r.$("itemContainer").alpha = 1), r.alpha = 1, i.itemByPid[e] = r
                    }
                })
            }, t.prototype.handleDisconnectedPlayer = function(e) {
                var t = this;
                e.forEach(function(e) {
                    if ("left" === e.state || "disconnected" === e.state) {
                        var i = t.itemByPid[e.id];
                        i && (i.gotoAndPlay("disconnection"), t.gotoAndPlay(i.$("rankedList"), "disconnection"))
                    }
                })
            }, t.prototype.updateInternal = function(e, t) {
                var i = this;
                if (this._onChanging) return this._skippedData = e, void(this._skippedItemCountList = t);
                this._onChanging = !0, this._initialData || this.onFirstData(e, t);
                var n = new TimelineMax({
                    paused: !0,
                    onComplete: function() {
                        i._onChanging = !1, i._skippedData && (i.updateInternal(i._skippedData, i._skippedItemCountList), i._skippedData = null, i._skippedItemCountList = null)
                    }
                });
                n.timeScale(1 / 30), e.forEach(function(r) {
                    var o = i._prevData.indexOf(r),
                        a = e.indexOf(r),
                        s = i.itemByPid[r];
                    if (s) {
                        var c = t[a];
                        if (0 === s.alpha && (s.alpha = 1), i.isTeamMatch || i.isObserver) {
                            var d = i._prevItemCountList[o],
                                u = t[a];
                            u > d ? i.gotoAndPlay(s.$("itemContainer").$("item" + u), "acquire") : u < d && i.gotoAndPlay(s.$("itemContainer").$("item" + d), "useItem")
                        }
                        i.isDriftMode && i.bindText(s.$("driftPoint"), l.default.toMoney(c)), s.$$(".id-rank .id-textField").forEach(function(e) {
                            return i.bindText(e, a + 1)
                        }), n.kill(null, s), n.to(s, .3, {
                            flash: {
                                y: 34 * a
                            },
                            ease: Power2.easeInOut
                        }, 0)
                    }
                }), this._prevData = e, this._prevItemCountList = t, n.resume()
            }, t
        }(a.StageBinder);
    n.__decorate([o.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([o.autowired("driverService")], u.prototype, "driverService", void 0), n.__decorate([o.autowired("playerSnippetService")], u.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("gameModeService")], u.prototype, "gameModeService", void 0), n.__decorate([o.autowired("hudService")], u.prototype, "hudService", void 0), t.HudLeaderboardBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = i(3),
        c = i(4),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this;
                this.translate(".id-bestLapTimeContainer .id-bestRecordName", "ID_HUD_RECORD_MY_TOP_TRACK_RECORD"), this.translate(".id-currentLapTimeContainer .id-currentRecordName", "ID_HUD_RECORD_MY_TRACK_RECORD");
                var t = 0,
                    i = this.getFace(".id-lapContainer");
                i.visible = !1, this.addManagedListener(this.externalService, a.default.beHUDSetTotalLaps, function(n) {
                    t = n, n > 1 ? (i.visible = !0, e.bindText(i.$(".id-totalLapsLabel .id-textField"), n.toString())) : i.visible = !1
                }), this.addManagedListener(this.externalService, a.default.beHUDSetCurrentLap, function(n, r) {
                    if (!(t < 2)) {
                        s.store.getState().player.id === r && e.bindText(i.$(".id-currentLapLabel .id-textField"), n)
                    }
                });
                var n = this.convertFace(".id-currentLapTimeContainer .id-lapTimeLabel");
                n.ignoreRepositionLayout = !0, this.addManagedListener(this.externalService, a.default.beHUDSetTimeElapsed, function(t) {
                    _.isNumber(t) && e.bindText(n, c.default.formatLapTime(t))
                });
                var r = s.store.getState().match.match;
                if (r) {
                    var o = s.store.getState().player,
                        d = _.filter(r.players, function(e) {
                            return e.id === o.id
                        });
                    this.historyService.getLaptimes(r.gameMode, r.trackCode, d).then(function(t) {
                        t.length > 0 ? e.setBestLapTime(t[0].laptime) : e.setBestLapTime(0)
                    })
                }
            }, t.prototype.setBestLapTime = function(e) {
                _.isNumber(e) && this.bindText(".id-bestLapTimeContainer .id-lapTimeLabel", c.default.formatLapTime(e))
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("historyService")], d.prototype, "historyService", void 0), t.HudRecordBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = function() {
            function e(e) {
                var t = this;
                this.externalService = e, this.container = $('<div class="twbs" style="position: fixed; right: 0px; top: 0px; opacity: 0"></div>'), this.button = $('<button class="btn btn-danger" type="submit">장비를 정지합니다</button>'), this.button.appendTo(this.container), this.button.on("click", function() {
                    t.button.attr("disabled", ""), t.externalService.beCheatFinishRace()
                }), this.container.appendTo($("body")).hide()
            }
            return e.prototype.showExitButton = function(e) {
                this.externalService.isDevelopment() && (e ? (this.button.removeAttr("disabled"), this.container.show()) : this.container.hide())
            }, e
        }();
    r.$inject = ["externalService"], t.default = r, angular.module("edge.app").factory("hudExitButtonService", n.default.service(r))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = i(120),
        c = {
            0: {
                instanceName: "ELECTRONICFIELD",
                label: "PURSUIT_NAME_ELECTRONICFIELD"
            },
            1: {
                instanceName: "EMP",
                label: "PURSUIT_NAME_EMP"
            },
            2: {
                instanceName: "SHOCKRAM",
                label: "PURSUIT_NAME_SHOCKRAM"
            },
            3: {
                instanceName: "SPIKESTRIP",
                label: "PURSUIT_NAME_SPIKESTRIP"
            },
            4: {
                instanceName: "HELI",
                label: "PURSUIT_NAME_HELI"
            },
            6: {
                instanceName: "SHOCKWAVE",
                label: "PURSUIT_NAME_SHOCKWAVE"
            },
            8: {
                instanceName: "TURBO",
                label: "PURSUIT_NAME_TURBO"
            },
            10: {
                instanceName: "SMOKEGRENADE",
                label: "PURSUIT_NAME_SMOKEGRENADE"
            },
            11: {
                instanceName: "SHIELD",
                label: "PURSUIT_NAME_SHIELD"
            },
            12: {
                instanceName: "IONCANNON",
                label: "PURSUIT_NAME_IONCANNON"
            },
            13: {
                instanceName: "RUSHTURBO",
                label: "PURSUIT_NAME_RUSHTURBO"
            },
            14: {
                instanceName: "INFINITENITRO",
                label: "PURSUIT_NAME_INFINITENITRO"
            }
        },
        d = function() {
            function e(e, t) {
                this.slot = e, this.next = t, this.holdItem = null, this.cooltime = $('<div style="font-size: 50px; color: red; width: 120px; position: absolute;" edge-textfield></div>'), this.amount = $('<div style="font-size: 50px; color: red; width: 120px; position: absolute; left: 120px; top: 120px;" edge-textfield></div>'), $(e.htmlElement).append(this.cooltime), $(e.htmlElement).append(this.amount)
            }
            return e.prototype.setCooltime = function(e) {
                var t = this;
                this.cooltimeTimer && (clearTimeout(this.cooltimeTimer), this.cooltimeTimer = void 0), this.cooltime.text(e > 0 ? Math.ceil(.001 * e) : ""), e > 0 && (this.cooltimeTimer = setTimeout(function() {
                    return t.setCooltime(e - 1e3)
                }, Math.min(1e3, e)))
            }, e.prototype.setAmount = function(e) {
                this.amount.text(e)
            }, e.prototype.init = function() {
                this.reset(), this.next && this.next.init()
            }, e.prototype.isFull = function() {
                return !!this.hasItem() && (this.next && this.next.isFull())
            }, e.prototype.code = function() {
                return this.holdItem
            }, e.prototype.reset = function() {
                var t = this;
                _.each(c, function(i, n) {
                    var r = t.slot.$("ACQUIRE_ITEMICON").$(i.instanceName);
                    r && parseInt(n, 10) !== t.holdItem && e.stop(r)
                })
            }, e.prototype.add = function(t) {
                if (this.reset(), this.hasItem()) return this.next && this.next.add(t);
                var i = this.slot;
                i.gotoAndPlay("acquire"), i.$("EFFECT").gotoAndPlay("acquire"), i.$("BACKGROUND").gotoAndPlay("acquire"), i.$("LIGHTNINGEFFECT").gotoAndPlay("loopAnimation");
                var n = c[t];
                i.$("ITEMNAME_TEXTFIELD").$("textfield").text = n.text, e.play(i.$("ACQUIRE_ITEMICON").$(n.instanceName)), this.holdItem = t
            }, e.prototype.use = function() {
                var e = this;
                if (this.hasItem()) {
                    this.reset(), this.holdItem = null;
                    var t = this.slot;
                    t.gotoAndPlay("useItem"), t.$("EFFECT").gotoAndPlay("useItem"), t.$("BACKGROUND").gotoAndPlay("useItem"), t.$("LIGHTNINGEFFECT").gotoAndStop(1), t.once("stop", function() {
                        return e.reset()
                    }), this.shiftItem()
                }
            }, e.prototype.shiftItem = function() {
                if (this.next && this.next.hasItem()) {
                    this.reset();
                    var e = this.next.moveOut();
                    this.moveIn(e), this.next.shiftItem()
                }
            }, e.prototype.moveIn = function(t) {
                this.holdItem = t;
                var i = this.slot,
                    n = c[t];
                e.play(i.$("ACQUIRE_ITEMICON").$(n.instanceName)), i.gotoAndPlay("moveIn"), i.$("EFFECT").gotoAndPlay("moveIn"), i.$("BACKGROUND").gotoAndStop("movedIn"), i.$("LIGHTNINGEFFECT").gotoAndPlay("loopAnimation"), i.$("ITEMNAME_TEXTFIELD").$("textfield").text = n.text
            }, e.prototype.moveOut = function() {
                var e = this,
                    t = this.slot;
                t.gotoAndPlay("moveOut"), t.$("EFFECT").gotoAndPlay("moveOut"), t.$("BACKGROUND").gotoAndStop(1), t.$("LIGHTNINGEFFECT").gotoAndStop(1), t.once("stop", function() {
                    return e.reset()
                });
                var i = this.holdItem;
                return this.holdItem = null, i
            }, e.prototype.hasItem = function() {
                return !_.isNull(this.holdItem)
            }, e.play = function(e) {
                e.visible = !0, e.gotoAndPlay("loopAnimation")
            }, e.stop = function(e) {
                e.stop(), e.visible = !1
            }, e
        }(),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.container = this.getFace(".CONTAINER"), this.centerbottom = this.container.$(".id-CENTERBOTTOM"), this.slot = new d(this.centerbottom.$(".id-FIRST_ITEMSLOT"), new d(this.centerbottom.$(".id-SECOND_ITEMSLOT"))), this.actionGuideItem = this.addChildBinder(".id-actionGuide", s.HudActionGuideBinder, {
                    inputKey: "useItem",
                    condNextGuide: function() {
                        return e.slot.hasItem()
                    }
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".CONTAINER"),
                    i = t.$(".id-CENTERBOTTOM"),
                    n = new d(i.$(".id-SECOND_ITEMSLOT"), new d(i.$(".id-FIRST_ITEMSLOT")));
                this.visible(i.$(".id-SECOND_ITEMSLOT .id-autoUseItemContainer"), !1), this.visible(".CONTAINER_pursuit", !1), this.hudService.once("intro", function() {
                    return e.gotoAndPlay(e.container, "intro")
                }), _.each(c, function(t) {
                    return t.text = e.$filter("translate")(t.label)
                }), this.addManagedListener(this.externalService, a.default.beHUDAddItem, function(t) {
                    c[t] && !e.slot.isFull() && (e.recordService.pushRecord("itemget", {
                        itemid: t,
                        time: e.hudService.timeElapsed
                    }), e.slot.add(t), e.actionGuideItem.guide())
                }), this.addManagedListener(this.externalService, a.default.beHUDUseItem, function() {
                    e.slot.hasItem() && (e.recordService.pushRecord("itemuse", {
                        itemid: e.slot.code(),
                        time: e.hudService.timeElapsed
                    }), e.slot.use(), e.actionGuideItem.use())
                }), this.addManagedListener(this.externalService, a.default.beAddItemHitRecord, function(t, i) {
                    e.recordService.pushRecord("itemhit", {
                        itemid: 0,
                        target: t,
                        time: i
                    })
                }), this.addManagedListener(this.externalService, a.default.beHUDUpdateItem, function(e, t, i) {
                    0 === e ? (n.setCooltime(t), n.setAmount(i)) : 1 === e && (n.next.setCooltime(t), n.next.setAmount(i))
                }), n.init()
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], l.prototype, "externalService", void 0), n.__decorate([r.autowired("recordService")], l.prototype, "recordService", void 0), n.__decorate([r.autowired("hudService")], l.prototype, "hudService", void 0), t.HudItemSlotBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.isVehicleBroken = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.effectContainer = this.convertFace(".id-effectContainer")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.addManagedListener(this.externalService, a.default.beHUDSetHpGauge, function(t) {
                    var i = t <= 0;
                    i !== e.isVehicleBroken && (i && (e.effectContainer.stop(), e.effectContainer.visible = !1), e.isVehicleBroken = i)
                }), this.addManagedListener(this.externalService, a.default.beHUDSetTeamBonusEffectEnabled, function(t) {
                    e.isVehicleBroken || (e.effectContainer.visible = !0, t ? (e.gotoAndPlay(e.effectContainer, "in"), e.$window.beHUDShowMessage("SPEEDTEAMMATCH_ BE_HUD_TEAMBONUS_TITLE")) : "in" === e.effectContainer.currentLabel && e.gotoAndPlay(e.effectContainer, "out"))
                })
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("$window")], s.prototype, "$window", void 0), n.__decorate([r.autowired("externalService")], s.prototype, "externalService", void 0), t.HudTeamFeverEffectBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(1),
        a = i(17),
        s = i(9),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.playerContainers = [], t.nextContainerIndex = 0, t.lastActiveGauge = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.teamFeverGauge = this.stage.$("CONTAINER").$("teamFeverGauge"), this.translate(this.teamFeverGauge.$("titleLabel"), "SPEEDTEAMMATCH_ BE_HUD_TEAMBONUS_GAUGE"), _.range(t.NUMBER_OF_PLAYER_CONTAINER).forEach(function(t) {
                    e.playerContainers.push({
                        mc: e.teamFeverGauge.$("playerContainer" + (t + 1)),
                        step: 0
                    })
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                r.trace("fever gauge onAddedToScene"), this.addManagedListener(this.externalService, s.default.beHUDSetTeamBonusGauge, function(t, i, n) {
                    if (e.maxGauge = n, r.debug("beHUDSetTeamBonusGauge " + t + ": " + i + " / " + n), t) {
                        var o = e.playerSnippetService.getSnippet(t);
                        e.addPlayer(o.name);
                        var a = i || n;
                        if (e.lastActiveGauge < a)
                            for (var s = e.lastActiveGauge + 1; s <= a; s++) e.gotoAndPlay(e.teamFeverGauge.$(".id-gauge" + n + "_0" + s), "in");
                        else {
                            for (var s = e.lastActiveGauge + 1; s <= e.maxGauge; s++) e.gotoAndPlay(e.teamFeverGauge.$(".id-gauge" + n + "_0" + s), "in");
                            for (var s = 1; s <= a; s++) e.gotoAndPlay(e.teamFeverGauge.$(".id-gauge" + n + "_0" + s), "in")
                        }
                        e.lastActiveGauge = i, e.gotoAndPlay("CONTAINER", "acquire")
                    } else e.teamFeverGauge.gotoAndPlay("gauge" + n)
                }), this.addManagedListener(this.externalService, s.default.beHUDSetTeamBonusEffectEnabled, function(t) {
                    r.debug("beHUDSetTeamBonusEffectEnabled " + t), t && e.teamFeverGauge.gotoAndPlay("gauge" + e.maxGauge + "-fever")
                }), this.teamFeverGauge.on("reset", function() {
                    for (var t = 1; t <= e.maxGauge; t++) t > e.lastActiveGauge && e.gotoAndStop(e.teamFeverGauge.$(".id-gauge" + e.maxGauge + "_0" + t), 0);
                    var i = function() {
                        e.teamFeverGauge.gotoAndPlay("gauge" + e.maxGauge), e.teamFeverGauge.off("stop", i)
                    };
                    e.teamFeverGauge.on("stop", i), e.teamFeverGauge.play()
                })
            }, t.prototype.addPlayer = function(e) {
                var i = this,
                    n = this.playerContainers[this.nextContainerIndex];
                n.step = 1, this.bindText(n.mc.$("playerName").$("name"), e), this.gotoAndPlay(n.mc.$("playerName"), "in"), setTimeout(function() {
                    i.gotoAndPlay(n.mc.$("playerName"), "out"), n.step = 0
                }, 2e3), _.range(t.NUMBER_OF_PLAYER_CONTAINER).forEach(function(e) {
                    var n = i.playerContainers[e];
                    n.step && (i.gotoAndPlay(n.mc, "step" + n.step), n.step = (n.step + 1) % (t.NUMBER_OF_PLAYER_CONTAINER + 1))
                }), this.nextContainerIndex = (this.nextContainerIndex + 1) % t.NUMBER_OF_PLAYER_CONTAINER
            }, t
        }(a.StageBinder);
    c.NUMBER_OF_PLAYER_CONTAINER = 4, n.__decorate([o.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([o.autowired("playerSnippetService")], c.prototype, "playerSnippetService", void 0), t.HudTeamFeverGaugeBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = i(39),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.lastWinningTeam = s.Team.Individual, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.indicatorA = this.convertFace(".id-indicatorTeamA"), this.indicatorB = this.convertFace(".id-indicatorTeamB"), this.indicatorA.regX = 0, this.indicatorB.regX = this.indicatorB.width, this.winEffectA = this.convertFace(".id-winEffectTeamA"), this.winEffectB = this.convertFace(".id-winEffectTeamB"), this.maskA = this.winEffectA.$(".id-mask"), this.maskB = this.winEffectB.$(".id-mask"), this.maskA.regX = 0, this.maskB.regX = this.winEffectB.width, this.lineEffectA = this.convertFace(".id-winEffectTeamA .id-lineEffect"), this.lineEffectB = this.convertFace(".id-winEffectTeamB .id-lineEffect"), this.lineEffectA.regX = 0, this.lineEffectB.regX = this.lineEffectB.width, this.scoreA = this.convertFace(".id-scoreTeamA"), this.scoreB = this.convertFace(".id-scoreTeamB"), this.applyScore(0, 0), this.addManagedListener(this.externalService, a.default.beHUDSetTeamScore, function(t, i) {
                    e.applyScore(t, i)
                }), this.translate(".id-titleLabel", "SPEEDTEAMMATCH_ BE_HUD_TEAMTOTALSCORE"), this.translate(".id-scoreTeamA .id-myTeamLabel", "SPEEDTEAMMATCH_ BE_HUD_MYTEAM"), this.translate(".id-scoreTeamB .id-myTeamLabel", "SPEEDTEAMMATCH_ BE_HUD_MYTEAM");
                var t = this.storeState,
                    i = t.player,
                    n = t.match.match,
                    r = _.find(n.players, {
                        id: i.id
                    }) || n.players[0];
                this.playerSnippetService.getSnippetAsync(r.id).then(function(t) {
                    var i = s.getTeamString(r.team);
                    e.gotoAndPlay(".id-playerTeam", i);
                    var n = e.$filter("translate")("SPEEDTEAMMATCH_TEAMRESULT_TEAMNAME_" + i.toUpperCase());
                    e.bindText(".id-playerTeam .id-" + i + "Player", t.name + " (" + n + ")")
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.hudService.supportRoomMirror ? "mirrorOn" : "mirrorOff";
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay(".CONTAINER", t)
                }), this.hudService.once("intro", function() {
                    e.gotoAndPlay("CONTAINER", "intro"), setTimeout(function() {
                        e.gotoAndPlay(".id-teamScore", "in")
                    }, 3e3)
                })
            }, t.prototype.applyScore = function(e, t) {
                this.bindText(".id-scoreTeamA .id-score", e.toString()), this.bindText(".id-scoreTeamB .id-score", t.toString());
                var i = e / (e + t || 1),
                    n = t / (e + t || 1);
                i = Math.max(i, 0), n = Math.max(n, 0), this.indicatorA.scaleXMultiplier = this.maskA.scaleXMultiplier = this.lineEffectA.scaleXMultiplier = i, this.indicatorB.scaleXMultiplier = this.maskB.scaleXMultiplier = this.lineEffectB.scaleXMultiplier = n, this.winEffectA.visible = e > t, this.winEffectB.visible = e < t;
                var r = s.Team.Individual;
                e > t ? r = s.Team.A : e < t && (r = s.Team.B), this.lastWinningTeam !== r && (this.scoreA.gotoAndPlay(e > t ? "win" : "default"), this.scoreB.gotoAndPlay(t > e ? "win" : "default"), this.lastWinningTeam = r)
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([r.autowired("hudService")], c.prototype, "hudService", void 0), n.__decorate([r.autowired("playerSnippetService")], c.prototype, "playerSnippetService", void 0), t.HudTeamScoreBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(17),
        a = i(9),
        s = i(1),
        c = i(310),
        d = i(3),
        l = i(28);
    ! function(e) {
        e[e.DPRESET_DRIFTEND = 0] = "DPRESET_DRIFTEND", e[e.DPRESET_COLLISION = 1] = "DPRESET_COLLISION", e[e.DPRESET_WRONGWAY = 2] = "DPRESET_WRONGWAY", e[e.DPRESET_DONUT = 3] = "DPRESET_DONUT", e[e.DPRESET_PLAYERRESET = 4] = "DPRESET_PLAYERRESET", e[e.DPRESET_TIMEOUT = 5] = "DPRESET_TIMEOUT", e[e.DPRESET_CHEAT = 6] = "DPRESET_CHEAT"
    }(n = t.DPResetReason || (t.DPResetReason = {}));
    var u = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.isDrifting = !1, t.currentDP = 0, t.currentTotalDP = 0, t.updatedTotalDP = 0, t.timeEffect = [], t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.playerId = d.store.getState().player.id, this.container = this.getFace(".CONTAINER"), this.addEffect = this.getFace(".id-addEffect"), this.reasonText = this.getFace(".id-extinctionText .comp-TextField"), this.currentDPText = this.getFace(".driftPointLabel .id-textField"), this.currentRateText = this.getFace(".id-driftRateLabelText .comp-TextField"), this.apply(this.stage, l.classNames, "rightsideReviseCoordinateOfScreenRatio"), this.addManagedListener(this.externalService, a.default.beHudSetCurrentDriftInfo, function(t, i, n) {
                return e.updateCurrent(t, i, n)
            }), this.addManagedListener(this.externalService, a.default.beHudDPResetReason, function(t) {
                return e.resetDrift(t)
            }), this.addManagedListener(this.externalService, a.default.beHUDSetLeaderboard, function(t, i, n) {
                var r = i.indexOf(e.playerId);
                e.updatedTotalDP = n[r]
            }), this.resetToDefault(), this.bindText(".id-driftTotalPoint .id-textField", 0), this.translate(".id-driftTotalPoint .id-dpText", "BEPLAY_DRIFTMODE_DP");
            for (var t = 1; t <= 4; t++) this.bindTextAll(".id-SecondText_0" + t + " .id-secondValue", t), this.translateAll(".id-secondText", "BEPLAY_DRIFTMODE_HUD_SEC"), this.timeEffect.push({
                object: this.getFace(".CONTAINER .id-effect0" + t),
                on: !1
            })
        }, t.prototype.onAddedToScene = function() {
            var e = this;
            this.$totalDP = $(".id-driftTotalPoint .id-textField"), this.showDebugButtons(), this.hudService.once("intro", function() {
                e.gotoAndPlay(e.face, "intro"), e.gotoAndPlay(e.container, "intro")
            })
        }, t.prototype.updateCurrent = function(e, t, i) {
            0 !== t && (this.setDP(e), t >= 1e3 && this.setTime(t), this.setRate(i), this.isDrifting || (this.gotoAndPlay(this.face, "start"), this.gotoAndStop(this.container, "normal"), this.isDrifting = !0, this.removeTimeEffect()))
        }, t.prototype.updateTotalDP = function() {
            var e = this,
                t = this.$filter("currency");
            this.$totalDP.text(this.updatedTotalDP), this.$totalDP.stop(), this.$totalDP.prop("Counter", this.currentTotalDP).animate({
                Counter: this.$totalDP.text()
            }, {
                duration: 300,
                easing: "swing",
                step: function(i) {
                    return e.$totalDP.text(t(Math.ceil(i), "", 0))
                }
            }), this.currentTotalDP = this.updatedTotalDP
        }, t.prototype.resetDrift = function(e) {
            var t = this;
            if (e === n.DPRESET_TIMEOUT) return void this.dispatch(c.setDriftfinalPoint(this.currentDP));
            var i = this.currentDP > 0;
            if (this.resetToDefault(), this.isDrifting = !1, e === n.DPRESET_DRIFTEND || e === n.DPRESET_CHEAT) this.addEffect.once("stop", function() {
                t.updateTotalDP()
            }), this.container.once("stop", function() {
                t.removeTimeEffect()
            }), this.gotoAndPlay(this.face, "end"), this.gotoAndPlay(this.container, "end"), this.gotoAndPlay(this.addEffect, "startAnimation");
            else if (i) switch (this.container.once("stop", function() {
                    t.removeTimeEffect()
                }), this.gotoAndPlay(this.face, "extinction"), this.gotoAndPlay(this.container, "extinction"), e) {
                case n.DPRESET_COLLISION:
                    this.translate(this.reasonText, "BEPLAY_DRIFTMODE_HUD_CRUSH");
                    break;
                case n.DPRESET_WRONGWAY:
                case n.DPRESET_DONUT:
                    this.translate(this.reasonText, "BEPLAY_DRIFTMODE_HUD_WRONGWAY");
                    break;
                case n.DPRESET_PLAYERRESET:
                    this.translate(this.reasonText, "BEPLAY_DRIFTMODE_HUD_RESPAWN")
            }
        }, t.prototype.setDP = function(e) {
            this.currentDP = e;
            var t = this.$filter("currency"),
                i = t(e, "", 0);
            this.bindText(this.currentDPText, i)
        }, t.prototype.setTime = function(e) {
            var t = Math.floor(e / 1e3),
                i = this.timeEffect[t - 1];
            t < 5 && !i.on ? (this.gotoAndPlay(i.object, "startAnimation", !0), i.on = !0) : this.bindTextAll(".CONTAINER .id-effect04 .id-SecondText_04 .id-secondValue", t)
        }, t.prototype.setRate = function(e) {
            var t = "x" + e.toFixed(1);
            t !== this.currentRate && (this.bindText(this.currentRateText, t), e > 0 && this.gotoAndPlay(".id-driftRateLabel", "startAnimation"), this.currentRate = t)
        }, t.prototype.removeTimeEffect = function() {
            this.bindTextAll(".CONTAINER .id-effect04 .id-SecondText_04 .id-secondValue", 4);
            for (var e = 0, t = this.timeEffect; e < t.length; e++) {
                var i = t[e];
                i.on && (this.gotoAndStop(i.object, 1), i.on = !1)
            }
        }, t.prototype.resetToDefault = function() {
            this.setDP(0), this.setRate(0), this.bindText(this.reasonText, "")
        }, t.prototype.onDetach = function() {
            this.removeDebugButtons()
        }, t.prototype.removeDebugButtons = function() {
            this.debug && this.debug.remove()
        }, t.prototype.showDebugButtons = function() {
            var e = this;
            this.externalService.isDevelopment() && (this.debug = $('<div class="twbs" style="position: fixed; left: 45%; top: 20px">'), $('<button class="btn btn-success btn-lg" type="submit">DP+1k</button>').on("click", function() {
                e.externalService.beAddDP(1e3)
            }).appendTo(this.debug), $('<button class="btn btn-warning btn-lg" type="submit">DP+5k</button>').on("click", function() {
                e.externalService.beAddDP(5e3)
            }).appendTo(this.debug), $('<button class="btn btn-danger btn-lg" type="submit">DP+10k</button>').on("click", function() {
                e.externalService.beAddDP(1e4)
            }).appendTo(this.debug), this.debug.appendTo("#edge-ui"))
        }, t
    }(o.StageBinder);
    r.__decorate([s.autowired("externalService")], u.prototype, "externalService", void 0), r.__decorate([s.autowired("$filter")], u.prototype, "$filter", void 0), r.__decorate([s.autowired("hudService")], u.prototype, "hudService", void 0), t.HudDriftModeInfo = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1),
        a = i(39),
        s = i(54),
        c = i(94),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.disabled = !1, t
            }
            return n.__extends(t, e), t.prototype.disable = function() {
                this.disabled = !0
            }, t.prototype.onPidChanged = function(e, t, i) {
                this.pid = i, i && this.bindPlayerLevelAndName(i, e.isMyEntry)
            }, t.prototype.bindPlayerLevelAndName = function(e, t) {
                var i = this;
                this.hasSize(".id-name", !0), this.playerSnippetService.getSnippetAsync(e).then(function(n) {
                    n.level && i.template(".id-level", "GAMEROOM_WAITINGROOM_PLAYERLEVEL", {
                        playerlevel: n.level
                    }), n.name && (i.isHost ? i.template(".id-name .id-textField", "GAMEROOM_MASTER_NAME", {
                        Name: n.name
                    }) : i.bindHtml(".id-name .id-textField", n.name), t && (i.getFace(".id-level .id-textField").setCustomStyle({
                        color: "#fffc00"
                    }), i.getFace(".id-name .id-textField").setCustomStyle({
                        color: "#fffc00"
                    })));
                    var r = i.getFace(".id-clanEmblem");
                    if (r && n.clanEmblemId && i.clanService.enableClan ? (i.drawExternalImage(".id-name .id-clanEmblem", i.$filter("cdn_clan_emblem")(n.clanEmblemId)), r.htmlElement.style.width = r.width * r.scaleX + "px", r.htmlElement.style.height = r.height * r.scaleY + "px") : (r.htmlElement.style.width = "0px", r.htmlElement.style.height = "0px", r.visible = !1, r.htmlElement.style.visibility = "hidden"), i.medal) {
                        var o = i.ranked2Service.getMedalTier(e);
                        i.medal.setProps({
                            hide: !o.code,
                            tierCode: o.code,
                            tierMode: o.mode
                        })
                    }
                })
            }, t.prototype.onFaceReady = function() {
                var e = this.props;
                this.hasSize(".VehicleNameBar .id-vehicleName .comp-TextField", !1), this.getFace(".VehicleNameBar .id-vehicleName").layoutPosition = "relative", this.getFace(".VehicleNameBar .id-vehicleName").layoutFloat = "left", this.getFace(".VehicleNameBar .id-vehicleName").hasSize = !1;
                var t = this.getFace(".id-name .id-medalMC");
                t && (this.hasSize(t, !0), this.medal = this.addChildBinder(t, s.TierMedalBinder)), this.update(e)
            }, t.prototype.update = function(e) {
                if (!this.disabled && (this.pid !== e.pid && this.onPidChanged(e, this.pid, e.pid), e.pid)) {
                    if (this.isHost !== e.isHost && (this.isHost = e.isHost, this.bindPlayerLevelAndName(e.pid, e.isMyEntry)), e.vehicle) {
                        this.gotoAndStop(".id-vehicleGrade", "grade" + e.vehicle.grade);
                        var t = e.vehicle.code || e.vehicle.vcode,
                            i = this.vehicleDataService.getVehicleData(t);
                        this.bindHtml(".VehicleNameBar .id-vehicleName .comp-TextField", this.$filter("vehicleName")(t)), this.bindText(".id-ovr", r.default.calculateOVR(e.vehicle.status).toString()), this.bindHtml(".id-vehicleClass", i.clazz), this.apply(".VehicleNameBar .PcCafeIcon", c.igr, e.vehicle.igr)
                    }
                    if (e.team) {
                        var n = a.getTeamString(e.team);
                        n = e.isMyTeam ? n + "_loop" : n, this.gotoAndStop(this.getFace(".id-team"), n)
                    }
                }
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([o.autowired("playerSnippetService")], d.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("vehicleDataService")], d.prototype, "vehicleDataService", void 0), n.__decorate([o.autowired("clanService")], d.prototype, "clanService", void 0), n.__decorate([o.autowired("ranked2Service")], d.prototype, "ranked2Service", void 0), t.Player = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(53),
        o = i(1),
        a = i(75),
        s = i(12),
        c = i(2),
        d = i(193),
        l = i(165),
        u = i(124),
        p = i(58),
        h = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.vehicles = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-changeButton", "GAMEROOM_CHANGING_VEHICLE"), this.translate(".id-exitButton", "COMMON_POPUP_EXIT_BUTTON_CANCEL"), this.on(".id-changeButton", c.MouseEventEx.CLICK, this.change.bind(this)), this.on(".id-exitButton", c.MouseEventEx.CLICK, this.cancel.bind(this)), this.filterBinder = this.addChildBinder(this.face, u.VehicleListFilterBinder), this.filterBinder.setManufacturerDropUp(!1), this.filterBinder.setClassDropUp(!1), this.filterBinder.setSorterDropUp(!1), this.vehicleListBinder = this.addChildBinder(this.face, l.VehicleListBinder, {
                    itemCountPerPage: 12,
                    rowSize: 6
                }), this.vehicleInfoBinder = this.addChildBinder(".id-vehicleDetail", d.VehicleInfoBinder), this.addManagedListener(this.filterBinder.face, "filterSortChange", function(t) {
                    var i = e.applyFilter(t);
                    e.vehicleListBinder.setProps({
                        vehicles: i
                    })
                }), this.addManagedListener(this.filterBinder.face, "selected", function(t) {
                    e.selected = t.id, e.vehicleInfoBinder.setProps({
                        vehicle: t
                    }), e.externalService.beSelectVehicle(t)
                }), this.on(this.face, "stop", function() {
                    var t = "changeVehicle_in" !== e.face.currentLabel;
                    e.classNames(".VehicleTileListContainer", t ? "prevent-click" : "")
                })
            }, t.prototype.applyFilter = function(e) {
                var t = this.vehicles;
                if (e) {
                    var i = e.manufacturerCode,
                        n = e.clazz,
                        r = e.sortKey;
                    i && (t = _.filter(t, {
                        manufacturerCode: i
                    })), n && "ALL" !== n && (t = _.filter(t, (o = {}, o.clazz = n, o))), this.$util.applySorter(t, r || ["default"])
                }
                return t;
                var o
            }, t.prototype.update = function(e) {
                this.initialSelected = this.selected = s.getRecentVehicle().id, this.initVehicles(), this.vehicleInfoBinder.setProps({
                    vehicle: s.getVehicleInfo(this.selected)
                })
            }, t.prototype.initVehicles = function() {
                this.vehicles = s.getAllVehicles();
                var e = s.getVehicleState();
                this.bindText(".id-retentionTextfield", "" + this.vehicles.length), this.vehicleListBinder.setProps(n.__assign({}, e, {
                    vehicles: this.applyFilter(a.defaultSortKeys),
                    selected: this.selected
                })), this.filterBinder.setProps(n.__assign({}, e, {
                    filterState: a.defaultSortKeys,
                    useVehicleTypes: 7
                }))
            }, t.prototype.preventClick = function() {
                var e = this;
                $(this.face.htmlElement).addClass("prevent-click"), this.face.on("stop", function() {
                    $(e.face.htmlElement).removeClass("prevent-click")
                })
            }, t.prototype.change = function() {
                var e = this;
                if (this.initialSelected === this.selected) return void this.closePopup();
                this.playerService.changeRecentVehicle(this.selected).then(function() {
                    return e.closePopup()
                }).catch(function(t) {
                    if (t.code === p.toCode(p.ErrorCode.IgrVehicleDateExpiredWhenGetIgrVehicle)) {
                        e.popupService.drawConfirm("PCVEHICLE_UPDATE_COMMONPOPUP_TITLE", "PCVEHICLE_UPDATE_COMMONPOPUP_DESC", function() {
                            e.vehicleService.fetchIgrVehicles()
                        });
                        var i = e.playerService.setRecentVehicleIfNeeded(1);
                        e.externalService.beSelectVehicle(i), e.vehicleInfoBinder.setProps({
                            vehicle: i
                        }), e.closePopup()
                    } else e.cancel()
                })
            }, t.prototype.cancel = function() {
                var e = s.getVehicleInfo(this.initialSelected);
                this.externalService.beSelectVehicle(e), this.vehicleInfoBinder.setProps({
                    vehicle: e
                }), this.closePopup()
            }, t.prototype.closePopup = function() {
                this.preventClick(), this.changeVehicleCamera(!1), this.gotoAndPlay(this.face, "changeVehicle_out"), this.face.emit("changeVehicle_out"), this.tooltipService.hide(), this.dispatch(r.showNav()), this.enableStartButton(!0), this.enableButton(".id-withFriend", !0)
            }, t.prototype.enableStartButton = function(e) {
                this.enableButton(".id-startButton", e)
            }, t.prototype.changeVehicleCamera = function(e) {
                this.externalService.beQuickFriendlyMatchChangeVehicle(e)
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$util")], h.prototype, "$util", void 0), n.__decorate([o.autowired("playerService")], h.prototype, "playerService", void 0), n.__decorate([o.autowired("tooltipService")], h.prototype, "tooltipService", void 0), n.__decorate([o.autowired("externalService")], h.prototype, "externalService", void 0), n.__decorate([o.autowired("popupService")], h.prototype, "popupService", void 0), n.__decorate([o.autowired("vehicleService")], h.prototype, "vehicleService", void 0), t.ChangeVehicleBinder = h
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "lobby.selectGameMode",
            gameMode: e
        }
    }

    function r() {
        return {
            type: "lobby.resetLobby"
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.selectGameMode = n, t.resetLobby = r
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return _.indexOf(a.Room.ClazzArray, t) >= _.indexOf(a.Room.ClazzArray, e)
    }

    function r(e) {
        return -1 === _.findIndex(e.players, function(t) {
            return (e.isRefereeMode || t.slot !== e.hostSlot) && "READY" !== t.status
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0),
        a = i(15),
        s = i(7),
        c = i(61),
        d = i(40),
        l = i(9),
        u = i(1),
        p = i(28),
        h = i(1277),
        f = i(184),
        v = i(12),
        m = i(39),
        g = i(2),
        y = i(313),
        S = i(3),
        E = i(50),
        T = i(4),
        C = i(617),
        b = i(1278),
        P = i(618),
        I = i(8),
        M = i(103),
        A = i(5),
        N = i(42),
        R = i(58),
        L = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.roomPlayers = [], t.isButtonLocked = !1, t.isTeamMode = !1, t.isGameStarted = !1, t
            }
            return o.__extends(t, e), Object.defineProperty(t.prototype, "roomState", {
                get: function() {
                    return _.isEmpty(this.reduxProps) ? {} : this.reduxProps.roomState || {}
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "room", {
                get: function() {
                    return _.isEmpty(this.roomState) ? {} : this.roomState.room || {}
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "isHostOrReferee", {
                get: function() {
                    return this.isHost || this.isReferee
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.getSlotCount = function(e) {
                return 2 * Math.ceil(.5 * e)
            }, t.prototype.onFaceReady = function() {
                this.trackData = this.staticdata.trackData, this.bindDropdownStaticData(), this.bindClazzLimitTooltip(), this.channelBinder = this.addChildBinder(".id-channel", h.ChannelBinder), this.vehicleDetailBinder = this.addChildBinder(".id-vehicleDetail", C.VehicleDetailBinder), this.numberPlateBinder = this.addChildBinder(".id-vehicleDetail .id-numberPlate", N.NumberPlateCard), this.topContainerBinder = this.addChildBinder(".id-topContainer", b.TopContainerBinder), this.messageBarBinder = this.addChildBinder(".id-messageBar", P.MessageBarBinder), this.hasSize(".id-channel", !0), this.convertFace(".id-channel .id-channel").hasSize = !1, this.convertFace(".id-channel .id-description").hasSize = !1, this.addChildBinder(".id-sevenLineChat", M.SimpleChatWindowBinder, {
                    entrance: M.SimpleChatEntrance.Room
                })
            }, t.prototype.bindPlayerContainer = function() {
                for (var e = this, t = this.getFace(".id-playerContainer"), i = 8 === this.slotCount ? "8" : "6", n = this, r = 0; r < this.slotCount; r++) ! function(r) {
                    var o = t.$(".id-playerItem" + (r + 1) + "." + i + "PlayerContainerItem"),
                        a = t.$(".id-emptyItem" + (r + 1) + "." + i + "EmptyItem"),
                        s = n.addChildBinder(o, y.RoomPlayer);
                    s.emptySlotMC = a, n.gameModeInfo.maxPlayer <= r && s.disable(), n.roomPlayers.push(s);
                    var c = a.$(".id-lockButton");
                    c.enabled = c.visible = !n.gameModeInfo.isMaxPlayerFixed && r < n.gameModeInfo.maxPlayer, c.on(g.MouseEventEx.CLICK, function() {
                        return e.onClickSlotLockButton(r + 1)
                    })
                }(r);
                this.gotoAndPlay(t, "player" + this.slotCount), this.gotoAndPlay(t.$("dropShadow"), "player" + this.slotCount)
            }, t.prototype.onClickSlotLockButton = function(e) {
                -1 === _.indexOf(this.room.locked, e) ? this.roomService.lockSlot(e) : this.roomService.unlockSlot(e)
            }, t.prototype.bindButtons = function() {
                var e = this;
                this.changeTeamButton = this.convertFace(".id-changeTeamButton"), this.translate(this.changeTeamButton, "GAMEROOM_CHANGING_TEAM"), this.onClickSafe(this.changeTeamButton, function() {
                    return e.roomService.changeTeam()
                });
                var t = "PURSUITINDIVIDUAL" === this.gameModeInfo.gameMode ? ".ChangeVehicleHalfButton" : ".ChangeVehicleButton";
                this.changeVehicleButton = this.convertFace(".id-buttons " + t), this.bindButton(this.changeVehicleButton, "GAMEROOM_CHANGING_VEHICLE", function() {
                    var t = function() {
                        e.dispatch(c.showChangeVehiclePopup(e.myEntry.slot, "room"))
                    };
                    e.publisherService.isNeedUpdateIgrVehicles() ? e.vehicleService.fetchIgrVehicles().finally(function() {
                        return t()
                    }) : t()
                }), this.invitationButton = this.bindButton("invite", "GAMEROOM_INVITING_FRIENDS", function() {
                    e.dispatch(c.showInvitationPopup())
                }), this.changeTrackButton = this.convertFace(".id-trackButton"), this.on(this.changeTrackButton, g.MouseEventEx.CLICK, function() {
                    if (e.roomService.currentRoom) {
                        var t = e.trackData.getTrack(e.room.trackCode, e.room.isRandomTrack);
                        e.dispatch(c.showChangeTrackPopup(e.staticdata, e.room.gameMode, e.room.channel, t.code))
                    }
                }), this.backButton = this.convertFace(".id-backButton"), this.translate(this.backButton, "GAMEROOM_BACK_TO_GAMELIST"), this.onClickSafe(this.backButton, function() {
                    return e.exitRoom().then(function() {
                        return e.onLeaveRoom()
                    })
                }), this.readyButton = this.bindButton("ready", "GAMEROOM_GAME_READY", this.onClickReadyButton.bind(this)), this.translate(".id-trackButton .id-buttonName", "WAITINGROOM_CHANGETRACK")
            }, t.prototype.bindButton = function(e, t, i) {
                var n;
                if ("string" == typeof e) {
                    var r = ".id-" + e + "Button";
                    n = this.convertFace(r)
                } else n = e;
                return this.translate(n, t), n.on(g.MouseEventEx.CLICK, i), n
            }, t.prototype.bindDropdownStaticData = function() {
                var e = this,
                    t = this.convertFace(".id-qualifiedDropdown");
                this.translate(t, "GAMEROOM_CLASS_AVAILABLE"), this.translate(t.$(".id-label"), "GAMEROOM_CLASS_AVAILABLE"), t.$(".id-label .id-tooltipButton").layoutPosition = "relative", t.$(".id-label .id-tooltipButton").layoutFloat = "left", t.$(".id-label .id-textField").layoutPosition = "relative", t.$(".id-label .id-textField").layoutFloat = "left";
                var i = f.getFilter("translate");
                t.items = a.Room.ClazzLimitArray.map(function(e) {
                    return {
                        text: i("ALL" === e ? "GAMEROOM_CLASS" : "GAMEROOM_CLASS_LIMITATION_" + e),
                        value: e
                    }
                }), t.onClick = function(i) {
                    t.selectedIndex = i, e.roomService.setMaxVehicleClazz(t.selectedItem.value)
                }
            }, t.prototype.bindClazzLimitTooltip = function() {
                var e = this,
                    t = this.getFace(".id-qualifiedDropdown .id-label .id-tooltipButton"),
                    i = this.$filter("translate");
                t.on(g.MouseEventEx.MOUSE_OVER, function(t) {
                    e.tooltipService.show(t, "bottom", E.TooltipType.Basic, i("GAMEROOM_GRADE_LIMITATION_DESC"), {
                        marginTop: -14,
                        marginLeft: 35
                    }, {}, "classLimitTooltip")
                }), t.on(g.MouseEventEx.MOUSE_OUT, function(t) {
                    return e.tooltipService.hide()
                })
            }, t.prototype.bindPursuitComponent = function() {
                var e = this;
                "PURSUITINDIVIDUAL" === this.gameModeInfo.gameMode ? (this.gotoAndPlay(".id-buttons", "pursuit"), this.changePursuitButton = this.bindButton("changePursuitTech", "GAMEROOM_CHANGING_PURSUIT", function() {
                    e.dispatch(c.showChangePursuitTechPopup(e.myEntry.pursuitItems.item1.code, e.myEntry.pursuitItems.item2.code))
                })) : this.visibleAll(".id-pursuitTechContainer", !1)
            }, t.prototype.onClickReadyButton = function() {
                var e = this;
                if (this.isHostOrReferee) this.startGame();
                else {
                    var t = !("READY" === this.myEntry.status);
                    this.lockButton(t), this.roomService.setReady(t).catch(function(t) {
                        if (t.code === R.toCode(R.ErrorCode.IgrVehicleDateExpiredWhenGetIgrVehicle)) {
                            e.popupService.drawConfirm("PCVEHICLE_UPDATE_COMMONPOPUP_TITLE", "PCVEHICLE_UPDATE_COMMONPOPUP_DESC", function() {
                                e.vehicleService.fetchIgrVehicles()
                            });
                            var i = e.playerService.getRecentVehicleOfType(1);
                            e.roomService.setVehicle(i.id).then(function() {
                                e.playerService.changeRecentVehicle(i.id), e.externalService.beSelectVehicle(i, e.myEntry.slot - 1)
                            })
                        }
                    }).finally(function() {
                        e.lockButton(!1)
                    })
                }
            }, t.prototype.startGame = function() {
                var e = this;
                this.isGameStarted = !0, this.apply(this.readyButton.$(".id-loopDescription .id-description"), p.bindText, ""), this.lockButton(!0), this.roomService.startGame().catch(function(t) {
                    if (t.code === R.toCode(R.ErrorCode.IgrVehicleDateExpiredWhenGetIgrVehicle)) {
                        e.popupService.drawConfirm("PCVEHICLE_UPDATE_COMMONPOPUP_TITLE", "PCVEHICLE_UPDATE_COMMONPOPUP_DESC", function() {
                            e.vehicleService.fetchIgrVehicles()
                        });
                        var i = e.playerService.getRecentVehicleOfType(1);
                        e.roomService.setVehicle(i.id).then(function() {
                            e.playerService.changeRecentVehicle(i.id), e.externalService.beSelectVehicle(i, e.myEntry.slot - 1)
                        })
                    } else e.popupService.drawConfirm("COMMON_ERROR_SERVICE_TITLE", "GAMEROOM_CANNOT_STARTAGAME");
                    e.readyButton.enabled = r(e.room), e.lockButton(!1), e.isGameStarted = !1
                })
            }, t.prototype.exitRoom = function() {
                return this.roomService.exitRoom()
            }, t.prototype.onDetach = function() {
                this.externalService.beWaitingRoomUnspawnAllVehicles(), this.externalService.offAll(l.default.beWaitingRoomFeedbackCameraWork), S.store.dispatch(c.clearKickState())
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    roomState: e.room,
                    contactsState: e.contacts
                }
            }, t.prototype.isPropsInvalid = function(e) {
                return _.isEmpty(e) || _.isEmpty(e.roomState) || !e.roomState.room
            }, t.prototype.update = function(e) {
                this.isPropsInvalid(e) || this.applyProps(e)
            }, t.prototype.isChangedRoomState = function(e) {
                for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
                for (var n = 0, r = t; n < r.length; n++) {
                    var o = r[n];
                    if (this.roomState[o] !== e[o]) return !0
                }
                return !1
            }, t.prototype.isNeedCheckAutoStart = function(e) {
                if ((this.room.locked || []).length !== e.locked.length) return !0;
                var t = this.room.players || [],
                    i = e.players || [];
                if (t.length !== i.length) return !0;
                for (var n = 0, r = t; n < r.length; n++) {
                    var o = r[n],
                        a = _.find(i, {
                            pid: o.pid
                        });
                    if (!a || a.status !== o.status || a.team !== o.team || a.vehicle.code !== o.vehicle.code) return !0
                }
                return !1
            }, t.prototype.applyProps = function(e) {
                var t = this,
                    i = e.roomState,
                    n = i.room,
                    r = e.contactsState;
                this.isTeamMode = this.gameModeService.isTeamMode(n.gameMode);
                var o = !1;
                if (this.isObserver(n)) {
                    var a = this.roomService.isReferee();
                    this.isReferee !== a && this.handleRefereeChange(a)
                } else {
                    if (this.myEntry = this.getMyEntry(n.players), !this.myEntry) return this.onLeaveRoom();
                    o = !n.isRefereeMode && this.myEntry.slot === n.hostSlot, this.isHost !== o && this.handleHostChange(o)
                }
                this.channelBinder.setProps({
                    type: n.channel
                }), this.topContainerBinder.setProps(n), this.updateDropdown(n), this.updateTrackData(n.isRandomTrack, n.trackCode), this.updateButtonEnabled(n), this.updateReadyButton(n), this.isChangedRoomState(i, "changeVehiclePopup") ? this.gotoAndPlay(this.face, i.changeVehiclePopup ? "changeVehicle_in" : "changeVehicle_out", !0) : this.isHost && this.isNeedCheckAutoStart(n) && this.checkIsAllPlayerReady(n), this.updateTeamInfo(n), this.updatePlayerSelection(n, i.selectedSlot);
                var s = [];
                if (n.players !== this.room.players) {
                    var c = (new Date).getTime() - 6e4;
                    _.forEach(n.players, function(e) {
                        var i = t.playerSnippetService.getSnippet(e.pid);
                        (!i || !i.name || i.fetchedAt < c) && s.push(e.pid)
                    })
                }
                0 < s.length ? this.playerSnippetService.fetchSnippets(s).then(function() {
                    t.updateUserSlots(i, n, r)
                }) : this.updateUserSlots(i, n, r)
            }, t.prototype.updateUserSlots = function(e, t, i) {
                var n = this,
                    r = this.isObserver(t);
                _.range(1, this.slotCount + 1).forEach(function(o, a) {
                    var s = o === e.selectedSlot,
                        c = -1 !== t.locked.indexOf(o),
                        d = _.find(t.players, function(e) {
                            return e.slot === o
                        }),
                        l = d ? d.vehicle : null,
                        u = d ? d.team : null,
                        p = d ? d.pid : null,
                        h = !t.isRefereeMode && t.hostSlot === o,
                        f = !r && n.myEntry.slot === o,
                        v = !(r || !d) && n.myEntry.team === d.team,
                        m = i,
                        g = d && d.pursuitItems,
                        y = {
                            slot: o,
                            pid: p,
                            isMyTeam: v,
                            vehicle: l,
                            team: u,
                            isSelected: s,
                            locked: c,
                            isHost: h,
                            isMyEntry: f,
                            entry: d,
                            contacts: m,
                            pursuitItems: g
                        };
                    n.roomPlayers[a].setProps(y)
                })
            }, t.prototype.updateReadyButton = function(e) {
                if (!this.isHostOrReferee || !this.isButtonLocked) {
                    var t = this.isObserver(e);
                    if (t && !this.isReferee) return this.readyButton.enabled = !1, void(this.readyButton.$(".id-loopDescription").visible = !1);
                    var i = !t && "READY" === this.myEntry.status;
                    this.readyButton.selected = !this.isHostOrReferee && i;
                    var o, a;
                    if (this.isHostOrReferee) {
                        var s = this.trackData.getTrack(e.trackCode, e.isRandomTrack),
                            c = s.modeTest && this.gameModeService.isTeamMode(e.gameMode) ? 2 : this.gameModeInfo.minPlayer;
                        if (e.players.length < c && (o = "GAMEROOM_LOBBY_CANNOTSTART_LESSTHANMINIMUMPLAYER", a = {
                                count: c
                            }), "SPEEDTEAM" === this.room.gameMode) {
                            var d = _.countBy(e.players, "team");
                            d[m.Team.A] !== d[m.Team.B] && (o = o || "GAMEROOM_TEAMMODE_PLAYER_UNBALANCE")
                        }
                        r(e) || (o = o || "GAMEROOM_NOT_READY"), this.translate(this.readyButton, "GAMEROOM_GAME_START")
                    } else this.translate(this.readyButton, i ? "GAMEROOM_GAME_READY_CANCEL" : "GAMEROOM_GAME_READY");
                    if (!t) {
                        var l = this.vehicleDataService.getVehicleData(this.myEntry.vehicle.code);
                        n(e.maxVehicleClazz, l.clazz) || (o = o || "GAMEROOM_LIMITED_CAR_SELECTED")
                    }
                    this.template(this.readyButton.$(".id-loopDescription .id-description"), o, a), this.readyButton.enabled = "PLAYING" !== e.status && !o
                }
            }, t.prototype.updateTeamInfo = function(e) {
                var t = e.players,
                    i = this.getFace(".id-teamCountContainer");
                if (this.apply(i, p.param, {
                        visible: this.isTeamMode
                    }), this.isTeamMode) {
                    var n = _.countBy(t, "team");
                    if (this.translate(i.$(".id-titleLabel"), "GAMEROOM_STATE_TEAM"), this.bindText(i.$(".id-teamACount"), (n[m.Team.A] || 0).toString()), this.bindText(i.$(".id-teamBCount"), (n[m.Team.B] || 0).toString()), !this.isObserver(e)) {
                        var r = m.getTeamString(this.myEntry.team),
                            o = this.changeTeamButton.$(".id-changeTeamIcon");
                        o.currentLabel !== r && this.gotoAndPlay(o, r)
                    }
                }
            }, t.prototype.availableSlotCount = function(e) {
                var t = this,
                    i = e.filter(function(e) {
                        return e <= t.slotCount
                    });
                return this.slotCount - i.length
            }, t.prototype.checkIsAllPlayerReady = function(e) {
                var t = e.players.length;
                if (!(this.isGameStarted || t < 3) && this.readyButton.enabled) {
                    this.isGameStarted = !0;
                    if (r(e) && t === this.availableSlotCount(e.locked)) {
                        var i = _.find(S.store.getState().vehicle.vehicles, {
                            id: this.myEntry.vehicle.id
                        });
                        i ? this.externalService.beSelectVehicle(i, this.myEntry.slot - 1) : s.warn("checkIsAllPlayerReady: vehicle is undefined"), this.startGame()
                    } else this.isGameStarted = !1
                }
            }, t.prototype.lockButton = function(e) {
                this.isPropsInvalid(this.reduxProps) || (this.isButtonLocked = e, this.isHostOrReferee && e && (this.readyButton.enabled = !1), this.updateButtonEnabled(this.room))
            }, t.prototype.updateButtonEnabled = function(e) {
                var t = this.isObserver(e),
                    i = e.status,
                    n = "PLAYING" !== i;
                t || this.isHost || (n = n && "JOIN" === this.myEntry.status), n = !this.isButtonLocked && n, this.classNames(".id-playerContainer", this.isReferee || n ? "" : "prevent-click"), this.changeVehicleButton.enabled = !t && n, this.invitationButton.enabled = !t && n, this.changeTeamButton.enabled = this.isTeamMode && !t && n, this.backButton.enabled = n, this.changeTrackButton.enabled = this.isHostOrReferee && n, this.changePursuitButton && (this.changePursuitButton.enabled = n)
            }, t.prototype.updateHostFunctions = function(e, t) {
                y.RoomPlayer.isLocalPlayerHost = e, y.RoomPlayer.isLocalPlayerReferee = t;
                for (var i = 8 === this.slotCount ? "8" : "6", n = 0; n < this.slotCount; n++) this.enableButton(".id-playerContainer .id-emptyItem" + (n + 1) + "." + i + "EmptyItem", e || t)
            }, t.prototype.handleHostChange = function(e) {
                this.isHost = e, this.updateHostFunctions(this.isHost, this.isReferee), e && "READY" === this.myEntry.status && this.roomService.setReady(!1)
            }, t.prototype.handleRefereeChange = function(e) {
                this.isReferee = e, this.updateHostFunctions(this.isHost, this.isReferee)
            }, t.prototype.updateTrackData = function(e, t) {
                var i = this.trackData.getTrack(this.room.trackCode, this.room.isRandomTrack),
                    n = this.trackData.getTrack(t, e);
                i && i.code !== n.code && (this.roomService.setReady(!1), this.isHostOrReferee || this.messageBarBinder.setProps({
                    code: "GAMEROOM_TRACK_CHANGED"
                })), this.translate(".id-trackButton .id-trackName", n.nameCode), this.translate(".id-trackButton .id-trackDifficulty", n.difficultyCode), this.drawExternalImage(".id-trackButton .id-trackImage", this.$filter("cdn_track")(n.code)), this.drawExternalImage(".id-trackButton .id-trackMap", this.$filter("cdn_track_map")(n.code))
            }, t.prototype.updateDropdown = function(e) {
                var t = this.convertFace(".id-qualifiedDropdown");
                t.enabled = this.isHostOrReferee, this.getFace(".id-qualifiedDropdown .id-hitArea").mouseEnabled = this.isHostOrReferee;
                var i = _.indexOf(a.Room.ClazzLimitArray, e.maxVehicleClazz); - 1 === i && (i = 0), t.selectedIndex = i;
                var n = "ALL" === e.maxVehicleClazz ? "SS" : e.maxVehicleClazz;
                if (p.bindText(t.$(".id-vehicleClass"), n), this.room.maxVehicleClazz && this.room.maxVehicleClazz !== e.maxVehicleClazz && !this.isHostOrReferee) {
                    var r = "C" === e.maxVehicleClazz ? "GAMEROOM_CHANGING_CLASS_UNDER_C" : "GAMEROOM_CHANGING_CLASS";
                    this.messageBarBinder.setProps({
                        code: r,
                        param: {
                            clazz: e.maxVehicleClazz
                        }
                    })
                }
            }, t.prototype.updatePlayerSelection = function(e, t) {
                var i = _.find(e.players, function(e) {
                    return e.slot === t
                });
                if (this.visible(".id-vehicleDetail", !!i), i) {
                    var n = this.vehicleDataService.decorateVehicle(i.vehicle);
                    this.vehicleDetailBinder.setProps(n);
                    var r = i.plate;
                    r && this.numberPlateBinder.setProps({
                        personalNumber: r.prefix,
                        uniqueNumber: r.plateNumber,
                        templateCode: r.templateCode
                    }), t !== this.roomState.selectedSlot && this.externalService.beWaitingRoomFocusVehicle(i.slot - 1)
                }
            }, t.prototype.isObserver = function(e) {
                void 0 === e && (e = this.room);
                var t = this.storeState.player.id;
                return e.isRefereeMode && !!_.find(e.observers, {
                    pid: t
                })
            }, t.prototype.initObserver = function(e) {
                this.stage.gotoAndPlay("in"), this.externalService.beWaitingRoomInitCompleted(0)
            }, t.prototype.initNormal = function(e) {
                var t = this,
                    i = this.getMyEntry(e.players),
                    n = v.getVehicleInfo(i.vehicle.id);
                if (!n || v.isTrialVehicle(n) && n.remainingCount <= 0) {
                    var r = this.playerService.getRecentVehicleOfType(1);
                    this.roomService.setVehicle(r.id).then(function() {
                        return t.installCamera(i.slot, r)
                    })
                } else n && n.id !== v.getRecentVehicle().id && this.playerService.changeRecentVehicle(n.id), this.installCamera(i.slot, i.vehicle)
            }, t.prototype.onAddedToScene = function(e) {
                var t = this;
                if (this.isPropsInvalid(e)) return void this.stateService.go("root.menu.MultiplayLobby");
                var i = e.roomState.room;
                this.gameModeInfo = this.gameModeService.getGameModeInfo(i.gameMode), this.slotCount = this.getSlotCount(this.gameModeInfo.maxPlayer), this.externalService.camera.waitingRoom(), this.isObserver(i) ? this.initObserver(i) : this.initNormal(i), this.bindButtons(), this.bindPlayerContainer(), this.bindPursuitComponent(), this.addManagedOnceListener(this.room2MatchService, "server.created", this.onServerCreated.bind(this)), this.addManagedOnceListener(this.room2MatchService, "server.timeout", this.onServerTimeout.bind(this)), this.addManagedOnceListener(this.room2MatchService, "connect.error", this.onConnectionError.bind(this)), setTimeout(function() {
                    t.uistateNotifyService.setSubState(5, i.id)
                }), this.stage.on(I.EventEx.STOP, function(e) {
                    "in" === e.currentTarget.currentLabel && S.store.dispatch(d.updateChatList())
                }), this.setupLongWaiting()
            }, t.prototype.setupLongWaiting = function() {
                var e = this;
                if (this.roomService.currentRoom) {
                    var t = this.staticdata.gameRoomData.roomWaitingTime,
                        i = A(this.roomService.currentRoom.matchEndAt).add(t, "seconds").diff(this.serverTimeService.time);
                    i <= 0 || (this.longWaitingTimer = setTimeout(function() {
                        e.worldChatService.printRoomSystemMsg(null, "FRIENDLYMATCH_LONGWAIT_SYSTEMMESSAGE")
                    }, i))
                }
            }, t.prototype.installCamera = function(e, t) {
                this.externalService.beWaitingRoomSelectVehicle(e - 1, t.code, t.paint), this.externalService.beWaitingRoomInitCompleted(e - 1), this.stage.gotoAndPlay("in"), this.externalService.beSelectVehicle(t, e - 1)
            }, t.prototype.getMyEntry = function(e) {
                return _.find(e, {
                    pid: this.storeState.player.id
                })
            }, t.prototype.onServerCreated = function(e) {
                var t = this;
                this.dispatch(c.hideChangeTrackPopup()), this.dispatch(c.hideInvitationPopup()), this.dispatch(c.hideChangeVehiclePopup()), this.dispatch(c.hideChangePursuitTechPopup());
                var i = function() {
                    s.debug("beWaitingRoomFeedbackCameraWork called(from beWaitingRoomRequestLeave)"), t.externalService.off(l.default.beWaitingRoomFeedbackCameraWork, i);
                    var e = t.room.gameMode,
                        n = T.default.gameModeToHudState[e];
                    t.isObserver(t.room) && (n += "Observer"), t.stateService.go(n + ".loading")
                };
                this.addManagedListener(this.stage, I.EventEx.STOP, i), this.stage.gotoAndPlay("out"), this.externalService.beWaitingRoomRequestLeave(), clearTimeout(this.longWaitingTimer)
            }, t.prototype.onServerTimeout = function(e) {
                var t = this;
                this.popupService.draw("ConfirmPopup", {
                    title: "COMMON_ERROR_SERVICE_TITLE",
                    description: "Reason - " + e,
                    confirm: function() {
                        t.exitRoom().then(function() {
                            return t.onLeaveRoom()
                        })
                    }
                })
            }, t.prototype.onConnectionError = function(e) {
                var t = this;
                if (this.room2MatchService.isVersionMismatched(e.errorCode)) {
                    this.room2MatchService.cancelServerTimeout();
                    var i = function() {
                        return t.exitRoom().then(function() {
                            return t.onLeaveRoom()
                        })
                    };
                    this.room2MatchService.popupConnectionError(e, i)
                }
            }, t.prototype.onLeaveRoom = function() {
                var e = {
                    gamemode: this.gameModeInfo.gameMode
                };
                this.stateService.go("root.menu.MultiplayLobby", e), clearTimeout(this.longWaitingTimer)
            }, t
        }(u.StageBinder);
    o.__decorate([u.autowired("$filter")], L.prototype, "$filter", void 0), o.__decorate([u.autowired("stateService")], L.prototype, "stateService", void 0), o.__decorate([u.autowired("room2Service")], L.prototype, "roomService", void 0), o.__decorate([u.autowired("playerSnippetService")], L.prototype, "playerSnippetService", void 0), o.__decorate([u.autowired("room2MatchService")], L.prototype, "room2MatchService", void 0), o.__decorate([u.autowired("externalService")], L.prototype, "externalService", void 0), o.__decorate([u.autowired("staticdataLoaderService")], L.prototype, "staticdata", void 0), o.__decorate([u.autowired("tooltipService")], L.prototype, "tooltipService", void 0), o.__decorate([u.autowired("vehicleDataService")], L.prototype, "vehicleDataService", void 0), o.__decorate([u.autowired("popupService")], L.prototype, "popupService", void 0), o.__decorate([u.autowired("uistateNotifyService")], L.prototype, "uistateNotifyService", void 0), o.__decorate([u.autowired("gameModeService")], L.prototype, "gameModeService", void 0), o.__decorate([u.autowired("worldChatService")], L.prototype, "worldChatService", void 0), o.__decorate([u.autowired("serverTimeService")], L.prototype, "serverTimeService", void 0), o.__decorate([u.autowired("vehicleService")], L.prototype, "vehicleService", void 0), o.__decorate([u.autowired("publisherService")], L.prototype, "publisherService", void 0), o.__decorate([u.autowired("playerService")], L.prototype, "playerService", void 0), t.MultiplayRoom = L
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(1),
        a = i(12),
        s = i(13),
        c = i(2),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.initTrialVehicleInfo()
            }, t.prototype.update = function(e) {
                var t = e.manufacturerCode,
                    i = e.code,
                    n = e.ovr,
                    r = e.clazz,
                    o = e.grade,
                    s = e.remainingCount;
                this.bindText(".id-manufacturerName", this.$filter("manufacturerName")(t)), this.bindText(".id-vehicleName", this.$filter("vehicleName")(i)), this.bindText(".id-ovr", n), this.bindText(".id-vehicleClass", r), this.gotoAndStop(".id-vehicleGrade", "grade" + o), this.visible(".id-expVehicleTitle", a.isTrialVehicle(e)), this.visible(".id-expVehicleCount", a.isTrialVehicle(e)), a.isTrialVehicle(e) && (this.translate(".id-expVehicleCount .id-textField", "EXPVEHICLE_REMAININGCOUNT"), this.bindText(".id-expVehicleCount .id-currentNum", s))
            }, t.prototype.initTrialVehicleInfo = function() {
                var e = this;
                this.hasSize(".id-expVehicleTitle", !0), this.hasSize(".id-expVehicleTitle .id-textField", !1), this.translate(".id-expVehicleTitle .id-textField", "EXPVEHICLE_GARAGE_INFORMATION"), this.on(".id-expVehicleTitle .id-tooltipIcon", c.MouseEventEx.MOUSE_OVER, this.showTooltipTrialVehicle.bind(this)), this.on(".id-expVehicleTitle .id-tooltipIcon", c.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.showTooltipTrialVehicle = function(e) {
                this.tooltipService.show(e, "topright", s.TooltipType.BasicDetail, {
                    mainText: [{
                        title: "EXPVEHICLE_INFORMATION_TITLE"
                    }, {
                        description: "EXPVEHICLE_INFORMATION_DESC"
                    }],
                    subText: []
                }, {
                    marginTop: 22,
                    marginLeft: 30
                }, {}, "vehicles-trial-info-tooltip")
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([o.autowired("tooltipService")], d.prototype, "tooltipService", void 0), t.VehicleDetailBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this.face,
                    t = e.$(".id-message").$(".id-textField");
                e.$(".id-message").hasSize = !0, $(t.htmlElement).css({
                    position: "relative",
                    display: "table-cell",
                    "vertical-align": "middle"
                })
            }, t.prototype.onDetach = function() {
                this.notificationPopupTimer && (clearTimeout(this.notificationPopupTimer), this.notificationPopupTimer = null)
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.code,
                    n = e.param;
                this.gotoAndPlay(this.face, "in"), n ? this.template(".id-message", i, n) : this.translate(".id-message", i), this.notificationPopupTimer && (clearTimeout(this.notificationPopupTimer), this.notificationPopupTimer = null), this.notificationPopupTimer = setTimeout(function() {
                    t.gotoAndPlay(t.face, "out")
                }, 2e3)
            }, t
        }(r.Binder);
    t.MessageBarBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(620),
        a = i(1279),
        s = i(623),
        c = i(312),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.addChildBinder(".InvitePopup", s.InvitationPopupBinder), this.addChildBinder(".ChangeVehiclePopup", o.ChangeVehicleBinder), this.addChildBinder(".ChangeTrackPopup", a.ChangeTrackBinder), this.addChildBinder(".ChangePursuitTechPopup", c.ChangePursuitTechBinder)
            }, t
        }(r.StageBinder);
    t.MultiplayRoomPopupBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(61),
        a = i(16),
        s = i(30),
        c = i(75),
        d = i(12),
        l = i(2),
        u = i(3),
        p = i(193),
        h = i(165),
        f = i(124),
        v = i(58),
        m = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.slot = void 0, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "featureType", {
                get: function() {
                    var e = u.store.getState().room.changeVehiclePopup;
                    return e ? e.featureType : void 0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "service", {
                get: function() {
                    return "room" === this.featureType ? this.roomService : this.ranked2Service
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "vehicles", {
                get: function() {
                    return d.getAllVehicles()
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.visible = !0, this.vehicleInfoBinder = this.addChildBinder(".id-vehicleDetail", p.VehicleInfoBinder), this.vehicleListBinder = this.addChildBinder(".id-VehicleSelectContainer", h.VehicleListBinder, {
                    itemCountPerPage: 8,
                    rowSize: 4
                }), this.vehicleListFilterBinder = this.addChildBinder(".id-VehicleSelectContainer", f.VehicleListFilterBinder), this.translate(".id-changeButton", "LOBBY_CHANGEVEHICLE"), this.translate(".id-exitButton", "COMMON_POPUP_EXIT_BUTTON_CANCEL"), this.on(".id-exitButton", l.MouseEventEx.CLICK, function() {
                    return e.cancel()
                }), this.on(".id-changeButton", l.MouseEventEx.CLICK, function() {
                    e.classNames(e.face, {
                        "prevent-click": !0
                    }), e.enableButton(".id-changeButton", !1), e.onChangeVehicle().then(function() {
                        return e.closePopup()
                    }).catch(function(t) {
                        if (t.code === v.toCode(v.ErrorCode.IgrVehicleDateExpiredWhenGetIgrVehicle)) {
                            e.popupService.drawConfirm("PCVEHICLE_UPDATE_COMMONPOPUP_TITLE", "PCVEHICLE_UPDATE_COMMONPOPUP_DESC", function() {
                                e.vehicleService.fetchIgrVehicles()
                            });
                            var i = e.playerService.getRecentVehicleOfType(1);
                            e.selectedVehicle = i.id, e.onChangeVehicle().then(function() {
                                e.externalService.beSelectVehicle(i, e.slot - 1), e.vehicleInfoBinder.setProps({
                                    vehicle: i
                                })
                            }), e.closePopup()
                        } else e.cancel()
                    }).finally(function() {
                        e.classNames(e.face, {
                            "prevent-click": !1
                        }), e.enableButton(".id-changeButton", !0)
                    })
                }), this.addManagedListener(this.vehicleListBinder.face, "selected", function(t) {
                    e.selectedVehicle = t.id, e.externalService.beSelectVehicle(t, e.slot - 1), e.vehicleInfoBinder.setProps({
                        vehicle: t
                    })
                }), this.addManagedListener(this.vehicleListFilterBinder.face, "filterSortChange", function(t) {
                    var i = e.applyFilter(t);
                    e.vehicleListBinder.setProps({
                        vehicles: i
                    })
                }), this.on(this.face, "stop", function() {
                    var t = "in" !== e.face.currentLabel;
                    e.classNames(e.face, t ? "prevent-click" : "")
                })
            }, t.prototype.applyFilter = function(e) {
                var t = this.vehicles;
                if (e) {
                    var i = e.manufacturerCode,
                        n = e.clazz,
                        r = e.sortKey;
                    i && (t = _.filter(t, {
                        manufacturerCode: i
                    })), n && "ALL" !== n && (t = _.filter(t, (o = {}, o.clazz = n, o))), this.$util.applySorter(t, r || ["default"])
                }
                return t;
                var o
            }, t.prototype.update = function(e) {
                var t = this.reduxProps.roomState || {},
                    i = e.roomState,
                    r = d.getVehicleState();
                if (t.changeVehiclePopup !== i.changeVehiclePopup) {
                    if (!i.changeVehiclePopup) return void("in" === this.face.currentLabel && this.cancel());
                    this.bindText(".id-retentionTextfield", "" + this.vehicles.length);
                    var o = d.getRecentVehicle();
                    this.initialVehicle = this.selectedVehicle = o.id, this.vehicleInfoBinder.setProps({
                        vehicle: o
                    }), this.vehicleListBinder.setProps(n.__assign({}, r, {
                        vehicles: this.applyFilter(c.defaultSortKeys),
                        selected: this.selectedVehicle
                    })), this.vehicleListFilterBinder.setProps(n.__assign({}, r, {
                        filterState: c.defaultSortKeys,
                        useVehicleTypes: 7
                    })), this.externalService.beWaitingRoomChangeVehicle(!1), this.gotoAndPlay(this.face, "in", !0), this.slot = i.changeVehiclePopup.slot, this.externalService.beWaitingRoomFocusVehicle(this.slot - 1)
                }
            }, t.prototype.onChangeVehicle = function() {
                var e = this;
                return this.featureType && this.initialVehicle !== this.selectedVehicle ? this.service.setVehicle(this.selectedVehicle).then(function() {
                    e.playerService.changeRecentVehicle(e.selectedVehicle)
                }) : r.resolve()
            }, t.prototype.cancel = function() {
                var e = d.getVehicleInfo(this.initialVehicle);
                this.externalService.beSelectVehicle(e, this.slot - 1), this.vehicleInfoBinder.setProps({
                    vehicle: e
                }), this.closePopup()
            }, t.prototype.closePopup = function() {
                this.gotoAndPlay(this.face, "out", !0), this.selectedVehicle = void 0, this.externalService.beWaitingRoomChangeVehicle(!0), this.playerService.markVehiclesAsChecked(), this.dispatch(o.hideChangeVehiclePopup())
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    roomState: e.room
                }
            }, t
        }(s.Binder);
    n.__decorate([a.autowired("$util")], m.prototype, "$util", void 0), n.__decorate([a.autowired("room2Service")], m.prototype, "roomService", void 0), n.__decorate([a.autowired("ranked2Service")], m.prototype, "ranked2Service", void 0), n.__decorate([a.autowired("externalService")], m.prototype, "externalService", void 0), n.__decorate([a.autowired("playerService")], m.prototype, "playerService", void 0), n.__decorate([a.autowired("popupService")], m.prototype, "popupService", void 0), n.__decorate([a.autowired("vehicleService")], m.prototype, "vehicleService", void 0), t.ChangeVehicleBinder = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(622),
        s = i(166),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                this.pagingContainer = this.getFace(".id-trackTileList") || this.getFace(".id-TrackTileList"), this.pagingContainer.hasSize = !0, e.prototype.onFaceReady.call(this), this.itemCountPerPage = this.props.itemCountPerPage, this.rowSize = this.props.rowSize, _.times(this.props.itemCountPerPage, function(e) {
                    var i = t.getFace(".id-current .id-trackCard" + (e + 1)),
                        n = t.getFace(".id-next .id-trackCard" + (e + 1));
                    i.hasSize = !0, n.hasSize = !0, t.pushTrackBinderToList(i, n), t.addManagedListener(i, o.MouseEventEx.CLICK, t.onClick.bind(t, e)), t.addManagedListener(i, o.MouseEventEx.MOUSE_OVER, t.onOver.bind(t, e)), t.addManagedListener(i, o.MouseEventEx.MOUSE_OUT, function(e) {
                        return t.tooltipService.hide()
                    })
                }), this.addManagedListener(this.pagingContainer, "reset", function(e) {
                    t.gotoAndPlay(t.pagingContainer, "default"), t.isPaging = !1
                }), this.bindList = function(e, i) {
                    var n = t.chunkedTracks[i] || [];
                    e.forEach(function(e, i) {
                        t.bindTrackInfo(e, n[i], i)
                    })
                }, this.movePageCallback1 = function() {
                    t.tooltipService.hide()
                }
            }, t.prototype.update = function(e) {
                this.tracks = e.tracks, e.selected && (this.selectedCode = e.selected), this.pageIndex = 0, this.initTrackList(), this.resetScrollBar()
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this), this.resetScrollBar()
            }, t.prototype.initTrackList = function() {
                this.chunkedTracks = _.chunk(this.tracks, this.itemCountPerPage), this.pageSize = Math.max(1, this.chunkedTracks.length), this.isPaging = !1, this.bindList(this.currListBinder, this.pageIndex)
            }, t.prototype.bindTrackInfo = function(e, t, i) {
                var n = e.face;
                t ? (n.enabled = n.visible = !0, e.setProps(t), t.code === this.selectedCode ? (n.selected = !0, this.selectedIndex = i) : n.selected = !1) : (n.enabled = n.visible = !1, e.setProps({}))
            }, t.prototype.onClick = function(e, t) {
                var i = this.currListBinder[e].face,
                    n = this.chunkedTracks[this.pageIndex][e];
                i.selected || (this.currListBinder.forEach(function(e) {
                    e.face.selected = !1
                }), i.selected = !0, this.selectedCode = n.code, this.selectedIndex = e, this.face.dispatchEvent("selected", n))
            }, t.prototype.getSide = function(e) {
                var t = (e + 1) % this.rowSize;
                return t < this.rowSize / 2 + 1 && t > 0 ? "right" : "left"
            }, t.prototype.onOver = function(e, t) {}, t.prototype.pushTrackBinderToList = function(e, t) {
                this.currListBinder.push(this.addChildBinder(e, a.TrackBinder)), this.nextListBinder.push(this.addChildBinder(t, a.TrackBinder))
            }, t
        }(s.ScrollBarPageBinder);
    n.__decorate([r.autowired("$util")], c.prototype, "$util", void 0), n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("playerService")], c.prototype, "playerService", void 0), n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.TrackList = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.translate(".id-selectedLabel", "FRIENDLYMATCH_LOBBY_TRACK_SELECTED")
            }, t.prototype.update = function(e) {
                this.translate(".id-trackName", e.nameCode), this.translate(".id-trackDifficulty", e.difficultyCode), this.drawExternalImage(".id-trackImage", this.$filter("cdn_track")(e.code)), this.drawExternalImage(".id-trackMap", this.$filter("cdn_track_map")(e.code))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], o.prototype, "staticdataLoaderService", void 0), t.TrackBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(61),
        o = i(30),
        a = i(62),
        s = i(2),
        c = i(16),
        d = i(135),
        l = i(54),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-inviting", "GAMEROOM_INVITING_PLAYERS"), this.translate(".id-playing", "GAMEROOM_PLAYING_GAMES"), this.hasSize(".RankedMatchRewardIconSmall", !0), this.medal = this.addChildBinder(".RankedMatchRewardIconSmall", l.TierMedalBinder), this.face.hasSize = !0, this.onClickSafe(".id-inviteButton", function() {
                    return e.RoomService.inviteRoom(e.props.snippet.pid).then(function() {
                        var t = 20,
                            i = function() {
                                0 == --t ? e.clearTimer() : d.bindText(e.getFace(".id-invitCount .id-count"), t)
                            };
                        e.intervalId = setInterval(i, 1e3), i(), e.gotoAndPlay(".id-status", "inviting")
                    })
                })
            }, t.prototype.clearTimer = function() {
                clearInterval(this.intervalId), this.gotoAndPlay(".id-status", "normal")
            }, Object.defineProperty(t.prototype, "RoomService", {
                get: function() {
                    return this.roomService
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.update = function(e) {
                this.clearTimer(), this.template(".id-level", "GAMEROOM_FRIENDS_PLAYERLEVEL", {
                    playerlevel: e.snippet.level
                }), this.template(".id-name", "GAMEROOM_FRIENDS_PLAYERNAME", {
                    playername: e.snippet.name
                }), this.getFace(".id-newIcon").visible = e.newly;
                var t = this.ranked2Service.getMedalTier(e.snippet.pid);
                this.medal.setProps({
                    hide: !t.code,
                    tierCode: t.code,
                    tierMode: t.mode
                })
            }, t
        }(o.Binder);
    n.__decorate([c.autowired("room2Service")], u.prototype, "roomService", void 0), n.__decorate([c.autowired("ranked2Service")], u.prototype, "ranked2Service", void 0), t.User = u;
    var p = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.mapStateToProps = function(e) {
            return e.room && e.room.invitationPopup && e.contacts ? {
                room: e.room,
                contacts: e.contacts
            } : {}
        }, t.prototype.onFaceReady = function() {
            var e = this;
            _.forEach([
                ["titleLabel", "WAITINGROOM_INVITEFRIENDLIST"],
                ["confirmButton", "WAITINGROOM_INVITELIST_CLOSE"],
                ["friendsLabel", "GAMEROOM_FRIENDS_LIST_SMALL"]
            ], function(t) {
                var i = t[0],
                    n = t[1];
                e.translate(".id-" + i, n)
            });
            var t = this.getFace(".id-inviteList");
            t.hasSize = !0, this.inviteList = $(t.htmlElement), this.inviteList.perfectScrollbar({
                suppressScrollX: !0
            }), this.getFace(".id-friendsLabel").hasSize = !0, this.on(".id-confirmButton", s.MouseEventEx.CLICK, function() {
                e.dispatch(r.hideInvitationPopup())
            }), this.friendsList = this.addChildBinder(".id-friendsContainer > .id-inviteItem", a.CollectionBinder, {
                instanceBinder: u
            }), this.face.visible = !1, this.update(this.props)
        }, t.prototype.update = function(e) {
            var t = this;
            if (_.isEmpty(e)) return this.gotoAndPlay(this.face, "out", !0);
            var i = _(e.contacts.friends).filter(function(e) {
                return /busy|idle|match\.reward/.test(e.presence.state)
            }).filter(function(e) {
                return !_.find(t.room2Service.currentRoom.players, {
                    pid: e.fpid
                })
            }).value();
            this.friendsList.applyCollection(i), this.face.visible = !0, this.gotoAndPlay(this.face, "in", !0)
        }, t.prototype.onDetach = function() {
            this.inviteList.perfectScrollbar("destroy")
        }, t
    }(o.Binder);
    n.__decorate([c.autowired("room2Service")], p.prototype, "room2Service", void 0), t.InvitationPopupBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1281),
        a = i(1282),
        s = i(1283),
        c = i(1284),
        d = i(1285),
        l = i(1286),
        u = i(3),
        p = i(103),
        h = i(1287),
        f = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.featureType = u.store.getState().match.match.featureType, this.rewardCardBinder = this.addChildBinder(".id-RewardArea", o.MultiplayRewardCardBinder), this.rewardNextBinder = this.addChildBinder(".id-RewardArea", s.MultiplayRewardNextBinder), this.rewardInfoBinder = this.addChildBinder(this.face, a.MultiplayRewardInfoBinder), this.rewardRankBinder = this.addChildBinder(".id-PlayerLists", c.MultiplayRewardRankBinder), this.rewardSpExpBinder = this.addChildBinder(this.face, l.MultiplayRewardSpExpBinder), this.antibotService.isKicking || ("ranked" === this.featureType ? this.rewardRankedMatchBinder = this.addChildBinder(".id-currentStatusInfoContainer", d.MultiplayRewardRankedMatchBinder) : "festival" === this.featureType && (this.rewardFestivalBinder = this.addChildBinder(".id-currentStatusInfoContainer", h.MultiplayRewardFestivalBinder))), this.chatBinder = this.addChildBinder(".id-fiveLineChat", p.SimpleChatWindowBinder, {
                    entrance: p.SimpleChatEntrance.Reward
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = u.store.getState().reward,
                    i = "root.MultiplayRewardTeamBattle" === this.stateService.getCurrentName(),
                    n = !t.isMatchAbandoned && !t.isMatchExpired;
                if (i && n) return void this.face.on("teamBattleStageFinished", function() {
                    e.showResultContainer()
                });
                this.showResultContainer()
            }, t.prototype.showResultContainer = function() {
                var e = this;
                this.gotoAndPlay(".id-ResultContainer", "in");
                var t = this.featureSetService.isEnabled("PARTNERSHIPMARKETING");
                this.visible(".MarketingArea", t), t && this.drawExternalImage(".MarketingArea", this.$filter("cdn_marketing")("marketing-type-01")), setTimeout(function() {
                    e.rewardCardBinder.face.emit("showRewardArea")
                }, 1), this.rewardNextBinder.setChatBinder(this.chatBinder)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    rewardState: e.reward,
                    roomState: e.room
                }
            }, t.prototype.update = function(e) {
                if (!(_.isEmpty(e) || _.isEmpty(e.rewardState) || _.isEmpty(e.rewardState.matchResult))) {
                    var t = this.reduxProps.rewardState !== e.rewardState,
                        i = this.reduxProps.roomState !== e.roomState;
                    t && this.rewardCardBinder.setProps(e.rewardState), t && this.rewardInfoBinder.setProps(e.rewardState), t && this.rewardRankBinder.setProps(e.rewardState), t && this.rewardSpExpBinder.setProps(e.rewardState), (t || i) && this.rewardNextBinder.setProps(e), this.antibotService.isKicking || ("ranked" === this.featureType ? t && this.rewardRankedMatchBinder.setProps(e.rewardState) : "festival" === this.featureType && t && this.rewardFestivalBinder.setProps(e.rewardState))
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("stateService")], f.prototype, "stateService", void 0), n.__decorate([r.autowired("antibotService")], f.prototype, "antibotService", void 0), n.__decorate([r.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([r.autowired("featureSetService")], f.prototype, "featureSetService", void 0), n.__decorate([r.autowired("worldChatService")], f.prototype, "worldChatService", void 0), t.MultiplayRewardBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(30),
        a = i(195),
        s = i(16),
        c = i(12),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.partsBinders = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                _.each(r.Part.PartTypes, function(t) {
                    e.partsBinders[t] = e.addChildBinder(".id-" + t + "Parts", a.AttachedPartsBinder)
                })
            }, t.prototype.update = function(e) {
                var t = this;
                _.isEmpty(e) || _.isEmpty(e.vehicle) || _.forEach(r.Part.PartTypes, function(i) {
                    var n = e.vehicle.parts[i],
                        r = t.staticdataLoaderService.partsItemData[n],
                        o = e.vehicle.clazz,
                        a = r ? r.level : 0,
                        s = (t.partsService.isPartsUpgradable(n) || t.partsService.isPartsAttachable(i, o, a)) && !c.isTrialVehicle(e.vehicle);
                    n ? t.partsBinders[i].setProps({
                        code: n,
                        type: i,
                        potential: s
                    }) : t.partsBinders[i].setProps({
                        code: void 0,
                        type: i,
                        potential: s
                    })
                })
            }, t
        }(o.Binder);
    n.__decorate([s.autowired("partsService")], d.prototype, "partsService", void 0), n.__decorate([s.autowired("staticdataLoaderService")], d.prototype, "staticdataLoaderService", void 0), t.VehiclePartsBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(172),
        a = i(3),
        s = i(568),
        c = i(4),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.vehiclePrice = this.face, this.placeholder = this.face.parent.$(".id-defaultText .comp-TextField");
                var t = !1;
                this.on(this.vehiclePrice, o.KeyboardEventEx.KEY_DOWN, function(i) {
                    c.default.validateNumber(i) && !t || (!c.default.validateNumber(i) && e.externalService.isEdgeBrowser() ? (t = !0, e.vehiclePrice.text = e.vehiclePrice.text.replace(/[^0-9\.|,]/g, "")) : t = !1, i.originalEvent.preventDefault())
                }), $(this.face.htmlElement).find(".id-textField").on("input", function() {
                    a.store.dispatch(s.updatePrice({
                        inputPrice: e.vehiclePrice.text,
                        spUnit: e.placeholder.text,
                        min: e.min,
                        max: e.max
                    }))
                })
            }, t.prototype.update = function(e) {
                if (this.priceData !== e.priceData) {
                    this.priceData = e.priceData;
                    var t = this.priceData,
                        i = t.min,
                        n = t.max,
                        r = t.inputPrice;
                    this.min = i, this.max = n, this.vehiclePrice.text = r
                }
            }, t.prototype.setInitialPrice = function(e, t, i, n) {
                var r = this.updateSpUnit(t),
                    o = String(e / Math.pow(10, c.default.toNumberString(r).length));
                a.store.dispatch(s.updatePrice({
                    inputPrice: o,
                    spUnit: r,
                    min: i,
                    max: n
                }))
            }, t.prototype.mapStateToProps = function(e) {
                return e.market
            }, t.prototype.updateSpUnit = function(e) {
                var t = this.vehiclePrice.width,
                    i = c.default.getBasePriceDivider(e),
                    n = 0 === e ? "0" : c.default.numberWithCommas(i).substr(1),
                    r = n.match(/,/g);
                return null === r && (r = []), this.vehiclePrice.textField.width = t - 10 * (n.length - r.length) - 6 * r.length, this.placeholder.text = n, n
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), t.VehiclePriceBinder = d
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "parts-material-production.show",
            partsMaterial: e
        }
    }

    function r() {
        return {
            type: "parts-material-production.hide"
        }
    }

    function o() {
        return {
            type: "parts-material-production.increase"
        }
    }

    function a() {
        return {
            type: "parts-material-production.decrease"
        }
    }

    function s(e) {
        return {
            type: "parts-material-production.setCurrent",
            current: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.show = n, t.hide = r, t.increase = o, t.decrease = a, t.setCurrent = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(175),
        a = i(28),
        s = i(8),
        c = i(4),
        d = i(3),
        l = i(40),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.mapFaces(".AnnouncementText", ".RestrictionText").forEach(function(e) {
                    return e.hasSize = !0
                });
                var t = ["root.MatchResult"].concat(c.default.loadingStateList).concat(c.default.hudStateList),
                    i = this.getFace(".AnnouncementBackground");
                this.cleanup = this.$transitions.onSuccess({}, function(n) {
                    e.apply(i, a.classNames, {
                        "show-bg": t.indexOf(n.$to().name) >= 0
                    })
                }), this.getFace(".id-announcement").on(s.EventEx.STOP, function(t) {
                    e.onStop(o.AnnouncementType.NOTICE, t.currentTarget.currentLabel)
                }), this.getFace(".id-restriction").on(s.EventEx.STOP, function(t) {
                    e.onStop(o.AnnouncementType.FATIGUE, t.currentTarget.currentLabel)
                }), this.getFace(".AnnouncementText .id-textField").setCustomStyle({
                    "font-size": "21px",
                    color: "#fffc00"
                }), this.hasSize(".AnnouncementText", !1), this.closeTimer = {
                    notices: void 0,
                    fatigues: void 0
                }
            }, t.prototype.onDetach = function() {
                this.cleanup(), this.clearTimer("notices"), this.clearTimer("fatigues")
            }, t.prototype.clearTimer = function(e) {
                this.closeTimer[e] && (clearTimeout(this.closeTimer[e]), this.closeTimer[e] = void 0)
            }, t.prototype.update = function(e) {
                var t = e.notices,
                    i = e.fatigues;
                if (this.visible(this.face, t.length > 0 || i.length > 0), this.visible(".id-announcement", t.length > 0), _.isEqual(t, this.notices) || this.updateNotice(t), this.visible(".id-restriction", i.length > 0), !_.isEqual(_.last(i), this.fatigue)) {
                    if (this.fatigue && "intro" === this.fatigue.frame) return void this.close(o.AnnouncementType.FATIGUE);
                    this.updateFatigue(i)
                }
            }, t.prototype.updateNotice = function(e) {
                var t = e[0];
                t && this.notices[0] !== t && (this.chain(".Announcement .id-textField").apply(a.bindHtml, t.content).apply(a.classNames, {
                    marquee: t.isRolling
                }), this.apply(".id-announcement", a.gotoAndPlay, t.frame), "intro" === t.frame && d.store.dispatch(l.setVisibleOfMinibar(!1))), this.notices = e
            }, t.prototype.updateFatigue = function(e) {
                var t = _.head(e);
                if (t) {
                    var i = t.frame,
                        n = t.content;
                    "intro" === i && this.apply(".RestrictionText .id-textField", a.bindHtml, n), this.apply(".id-restriction", a.gotoAndPlay, i)
                }
                this.fatigue = t
            }, t.prototype.onStop = function(e, t) {
                var i = this,
                    n = e === o.AnnouncementType.NOTICE ? _.head(this.notices) : this.fatigue;
                if (!n) return void(e === o.AnnouncementType.FATIGUE && this.visible(".id-restriction", !1));
                "intro" === t ? this.closeTimer[o.getAnnounceTypeString(e)] = setTimeout(function() {
                    return i.close(e)
                }, 1e3 * n.viewingTime) : "outro" === t && (e === o.AnnouncementType.NOTICE && (this.apply(".Announcement .id-textField", a.classNames, {
                    marquee: !1
                }), d.store.dispatch(l.setVisibleOfMinibar(!0))), setTimeout(function() {
                    return i.service.next(e)
                }))
            }, t.prototype.close = function(e) {
                e === o.AnnouncementType.FATIGUE && (this.fatigue = void 0), this.clearTimer(o.getAnnounceTypeString(e)), this.service.close(e)
            }, t.prototype.mapStateToProps = function(e) {
                return e.announcement
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("announcementService")], u.prototype, "service", void 0), n.__decorate([r.autowired("$transitions")], u.prototype, "$transitions", void 0), t.AnnouncementBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(8),
        s = i(43),
        c = i(4),
        d = i(42),
        l = i(59),
        u = i(15),
        p = i(27),
        h = i(3),
        f = i(84),
        v = i(237),
        m = i(318),
        g = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.personalNumber = "", t.source = "", t.itemId = -1, t._selecting = !1, t._selected = "", t.selectPlates = [], t.selectPlateItems = [], t.resetPlates = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.buttons = this.getFace(".id-buttons"), this.itemOpenEffect = this.getFace(".id-itemOpenEffect"), this.bindStatic(), this.initIn(), this.initSelect(), this.initResult()
            }, t.prototype.bindStatic = function() {
                this.translate(">.id-itemName .id-textField", "RANDOMNUMBERPLATE_TITLE"), this.translate(".id-countTitle .id-textField", "RANDOMNUMBERPLATE_COUNT"), this.translate(".id-buttons .id-openButton .id-buttonName .id-textField", "RANDOMNUMBERPLATE_OPEN"), this.translate(".id-buttons .id-reopenButton .id-buttonName .id-textField", "RANDOMNUMBERPLATE_DONE_OPENMORE"), this.translate(".id-buttons .id-selectButton .id-buttonName .id-textField", "RANDOMNUMBERPLATE_GET"), this.translate(".id-exitButton .id-buttonName .id-textField", "RANDOMNUMBERPLATE_EXIT"), this.translate(".id-buttons .id-selectDescription", "RANDOMNUMBERPLATE_CHOOSE_TEXT1"), this.translate(".id-buttons .id-subSelectDescription", "RANDOMNUMBERPLATE_CHOOSE_TEXT2"), this.translate(".id-itemOpenEffect .id-subResultDescription", "RANDOMNUMBERPLATE_DONE_TEXT"), this.translateAll(".id-selectContainer .id-highClassTag .id-highTagLabel .id-textField", "MYNUMBERPLATE_EXCHANGE_SCREEN_HIGHCLASS")
            }, t.prototype.initIn = function() {
                var e = this;
                this.itemCard = this.addChildBinder(".id-itemOpenEffect .id-itemCard .id-cardPack", p.ItemCardBinder);
                var t = this.getFace(".id-buttons .id-exitButton");
                t && this.on(t, o.MouseEventEx.CLICK, function() {
                    e.onClickExit()
                }), this._openButton = this.getFace(".id-buttons .id-openButton"), this._openButton && this.on(this._openButton, o.MouseEventEx.CLICK, function() {
                    e.onClickOpen(!0)
                })
            }, t.prototype.initSelect = function() {
                var e = this;
                this.selectContainer = this.getFace(".id-selectContainer"), _.times(10, function(t) {
                    var i = e.getFace(".id-selectContainer .id-numberPlate" + (t + 1));
                    e.selectPlateItems.push(i);
                    var n = e.addChildBinder(".id-selectContainer .id-numberPlate" + (t + 1) + " .id-current", d.NumberPlateCard);
                    e.selectPlates.push(n);
                    var r = e.addChildBinder(".id-selectContainer .id-numberPlate" + (t + 1) + " .id-next", d.NumberPlateCard);
                    e.resetPlates.push(r), e.gotoAndPlay(".id-selectContainer .id-numberPlate" + (t + 1) + " .id-highClassTag", "in"), e.on(i, o.MouseEventEx.CLICK, function() {
                        e.onClickPlate(t)
                    }), e.on(i, "reset", function(e) {
                        n.setProps(r.getProps())
                    })
                }), this._selectButton = this.getFace(".id-buttons .id-selectButton"), this.on(this._selectButton, o.MouseEventEx.CLICK, function() {
                    var t = e.selected;
                    e.selecting = !1;
                    var i = e.reduxProps.results.map(function(e) {
                        return e.plateNumber
                    });
                    t && e.numberPlateService.selectPlate(t, u.NumberPlate.SelectType.LOTTERY).then(function(t) {
                        switch (t.selectRetType) {
                            case u.NumberPlate.SelectRetType.SUCCESS:
                                e.playResult(t.ret[0]);
                                break;
                            case u.NumberPlate.SelectRetType.RESET:
                                var n = _.cloneDeep(t.ret);
                                i = i.map(function(e) {
                                    return _.remove(n, function(t) {
                                        return t.plateNumber === e
                                    }).length > 0 ? void 0 : e
                                });
                                var r = _.findIndex(i, function(e) {
                                    return void 0 !== e
                                });
                                e.selectPlateItems[r].selected = !1, v.NumberPlatePopupHelper.onLotteryOwned(e.popupService, function() {
                                    r > -1 && (n.length > 0 && e.resetPlates[r].setProps({
                                        personalNumber: e.personalNumber,
                                        uniqueNumber: n[0].plateNumber,
                                        templateCode: n[0].templateCode
                                    }), e.gotoAndPlay(e.selectPlateItems[r], "reset")), h.store.dispatch(f.refreshLotteryResultList(t.ret))
                                })
                        }
                    })
                })
            }, t.prototype.initResult = function() {
                var e = this;
                this._reopenButton = this.getFace(".id-buttons .id-reopenButton"), this._reopenButton && this.on(this._reopenButton, o.MouseEventEx.CLICK, function() {
                    e.onClickOpen()
                }), this.resultPlate = this.addChildBinder(".id-itemOpenEffect .id-numberPlateMain", d.NumberPlateCard)
            }, t.prototype.onClickExit = function() {
                var e = this;
                this.selecting = !1, this.gotoAndPlay(this.face, "out"), this.once(this.face, a.EventEx.STOP, function() {
                    c.default.blockEdgeContentsMouseEvent(!1), e.source && e.stateService.go(e.source), e.exitCallback && e.exitCallback()
                })
            }, t.prototype.onClickOpen = function(e) {
                var t = this;
                void 0 === e && (e = !1), this.selecting = !0;
                var i = this.reduxProps.item ? this.reduxProps.item.id : "";
                this.inventoryService.useItem(i, 1).then(function() {
                    t.numberPlateService.fetchMySelectedPlates().then(function(i) {
                        i.lottery.length > 0 && t.playOpen(i.lottery, e)
                    })
                }).catch(function(e) {
                    switch (t.selecting = !1, e.errorCode) {
                        case l.ErrorCode.NumberPlateSlotNotEnough:
                        case l.ErrorCode.PlayerLevelLimit:
                        case l.ErrorCode.NumberPlateAdvanceRandomError:
                        default:
                            m.NumberPlateErrorPopupHelper.errorPopup(t.popupService, t.$filter, e)
                    }
                })
            }, t.prototype.onClickPlate = function(e) {
                var t = this;
                _.times(10, function(i) {
                    if (t.selectPlateItems[i].selected = e === i, e === i && t.reduxProps.results) {
                        var n = t.reduxProps.results[i];
                        t.updateResult(n), t.selected = n.plateNumber
                    }
                })
            }, t.prototype.onAddedToScene = function(e) {
                this.source = this.$stateParams.source, this.itemId = this.$stateParams.itemId, this.exitCallback = this.$stateParams.exitCallback, e.results.length > 0 ? this.playRestart(e.results) : this.playIn()
            }, t.prototype.playIn = function() {
                this.gotoAndPlay(this.face, "in"), this.gotoAndPlay(this.buttons, "in"), this.gotoAndPlay(this.itemOpenEffect, "in"), this.selecting = !1
            }, t.prototype.playOpen = function(e, t) {
                var i = this;
                this.gotoAndPlay(this.buttons, t ? "opening" : "reopen"), this.gotoAndPlay(this.selectContainer, e.length + "numberPlate"), this.once(this.selectContainer, a.EventEx.STOP, function() {
                    i.gotoAndPlay(i.itemOpenEffect, t ? "opening" : "reopen")
                }), this.selecting = !0, this.selected = ""
            }, t.prototype.playRestart = function(e) {
                var t = this;
                this.gotoAndPlay(this.buttons, "reopenPoint"), this.once(this.buttons, a.EventEx.STOP, function() {
                    t.gotoAndPlay(t.selectContainer, e.length + "numberPlate"), t.once(t.selectContainer, a.EventEx.STOP, function() {
                        t.gotoAndPlay(t.itemOpenEffect, "opening")
                    })
                }), this.selecting = !0, this.selected = ""
            }, t.prototype.playResult = function(e) {
                var t = this;
                _.times(10, function(e) {
                    t.selectPlateItems[e].selected = !1
                }), this.gotoAndPlay(this.buttons, "result"), this.gotoAndPlay(this.itemOpenEffect, "result"), this.selecting = !1, this._openButton.visible = !1
            }, Object.defineProperty(t.prototype, "selected", {
                get: function() {
                    return this._selected
                },
                set: function(e) {
                    this._selected = e, this._selectButton.enabled = !!e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "selecting", {
                get: function() {
                    return this._selecting
                },
                set: function(e) {
                    this._selecting = e, this._selecting || (this.selected = "");
                    var t = this.reduxProps.item,
                        i = !this._selecting && t && t.count > 0;
                    this._openButton.enabled = this._reopenButton.enabled = i
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onDetach = function() {
                this.selecting = !1
            }, t.prototype.update = function(e) {
                if (this.personalNumber !== e.personalNumber && (this.personalNumber = e.personalNumber), !e.item || !_.isEqual(this.reduxProps.item, e.item)) {
                    this.reduxProps.item = e.item;
                    var t = e.item,
                        i = t ? t.count : 0;
                    this.updateIn(t), this.selecting = this.selecting, this.translate(".id-reopenDescription", i > 0 ? "" : "RANDOMNUMBERPLATE_DONE_NONE")
                }
                e.results.length > 0 && (_.isEqual(this.reduxProps.results, e.results) || this.updateOpen(e.results))
            }, t.prototype.updateIn = function(e) {
                this.bindText(".id-itemCount .id-textField", e ? e.count : 0), this.itemCard && e && this.itemCard.setProps({
                    info: {
                        type: "NUMBER_PLATE",
                        name: e.name,
                        img: this.$filter("itemCardImg")("ITEM", e.code),
                        isHideItemNum: !0
                    },
                    mouseDisabled: !0
                })
            }, t.prototype.updateOpen = function(e) {
                var t = this;
                e.forEach(function(e, i) {
                    t.getFace(".id-selectContainer .id-numberPlate" + (i + 1) + " .id-highClassTag").visible = t.numberPlateService.isHigh(e.templateCode), t.selectPlates[i].setProps({
                        personalNumber: t.personalNumber,
                        uniqueNumber: e.plateNumber,
                        templateCode: e.templateCode
                    })
                })
            }, t.prototype.updateResult = function(e) {
                if (e && this.resultPlate) {
                    var t = this.numberPlateService.isHigh(e.templateCode) ? "RANDOMNUMBERPLATE_DONE_HIGHCLASS" : "RANDOMNUMBERPLATE_DONE_NORMAL";
                    this.translate(".id-itemOpenEffect .id-resultDescription", t), this.resultPlate.setProps({
                        myNumberPlateInfo: {
                            prefix: this.personalNumber
                        },
                        plates: (i = {}, i[e.plateNumber] = e, i),
                        plateNumber: e.plateNumber
                    });
                    var i
                }
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.numberPlate,
                    i = e.inventory;
                return {
                    personalNumber: t.myNumberPlateInfo ? t.myNumberPlateInfo.prefix || "" : "",
                    plates: t.myNumberPlates,
                    results: t.lotteryResults,
                    item: _.filter(i.items, {
                        code: this.itemId
                    })[0]
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], g.prototype, "$filter", void 0), n.__decorate([r.autowired("$stateParams")], g.prototype, "$stateParams", void 0), n.__decorate([r.autowired("inventoryService")], g.prototype, "inventoryService", void 0), n.__decorate([r.autowired(s.numberPlateService)], g.prototype, "numberPlateService", void 0), n.__decorate([r.autowired("popupService")], g.prototype, "popupService", void 0), n.__decorate([r.autowired("stateService")], g.prototype, "stateService", void 0), t.NumberPlateLotteryBinder = g
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function() {
            function e() {}
            return e
        }();
    o.SELECTED_ITEM = "event-selected-item", t.ScrollListUiEvent = o;
    var a = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.selectedIndex = -1, t.itemCountPerPage = 0, t.scrollBar = void 0, t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            var t = e.itemBinderClass,
                i = e.sortTabBinder,
                n = e.selectedItem,
                o = e.itemCountPerPage;
            this.selectedItem = n, this.face.hasSize = !0, this.listBinder = this.addChildBinder(".id-listItem", r.CollectionBinder, {
                instanceBinder: t
            }), this.sortTabBinder = i, this.itemCountPerPage = o || 1
        }, t.prototype.onDetach = function() {
            this.destroyScrollBar()
        }, t.prototype.update = function(e) {
            this.setItems(e), this.applyCollection(), this.selectItem(this.selectedIndex), this.setScroll()
        }, t.prototype.isNeedScrollBar = function() {
            return this.itemCountPerPage < this.items.length
        }, t.prototype.setScroll = function() {
            var e = this;
            this.isNeedScrollBar() || _.isUndefined(this.scrollBar) ? this.isNeedScrollBar() && (this.scrollBar || (this.scrollBar = $(this.face.htmlElement).perfectScrollbar({
                suppressScrollX: !0
            })), setTimeout(function() {
                return e.scrollBar.perfectScrollbar("update")
            })) : this.destroyScrollBar()
        }, t.prototype.updateItemProp = function(e, t) {
            var i = this.items[e],
                n = null;
            i && (n = _.assign({}, i, t), this.props.items[e] = n, this.items[e] = n);
            var r = this.listBinder.binders[e];
            r && n && r.setProps(_.assign({}, r.getProps(), {
                info: n
            }))
        }, t.prototype.selectNone = function() {
            this.selectedIndex = -1, this.listBinder.binders.forEach(function(e) {
                e.face.selected = !1
            })
        }, t.prototype.destroyScrollBar = function() {
            this.scrollBar && (this.scrollBar.perfectScrollbar("destroy"), this.scrollBar = void 0)
        }, t.prototype.setItems = function(e) {
            var t = e.items || [];
            this.items = t.map(function(e, t) {
                return n.__assign({}, e, {
                    index: t
                })
            })
        }, t.prototype.getItemProps = function(e) {
            var t = this;
            return {
                info: e,
                onClick: function(e) {
                    return t.selectItem(e.index)
                }
            }
        }, t.prototype.applyCollection = function() {
            var e = this;
            this.listBinder.applyCollection(_.map(this.items, function(t, i) {
                return n.__assign({}, e.getItemProps(t), {
                    viewIndex: i
                })
            }))
        }, t.prototype.updatelistItemSelected = function(e) {
            this.listBinder.binders.forEach(function(t) {
                t.face.selected = t.getProps().info.index === e
            })
        }, t.prototype.selectItem = function(e) {
            this.selectedIndex = e, this.updatelistItemSelected(e), this.selectedItem && this.selectedItem(this.items[this.selectedIndex])
        }, t.prototype.getSelectedItem = function() {
            return this.items[this.selectedIndex]
        }, t.prototype.scrollTop = function(e) {
            e = e || 0, this.scrollBar && this.scrollBar.perfectScrollbar("update").scrollTop(e)
        }, t
    }(r.Binder);
    t.ScrollListBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(104),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(t) {
                e.prototype.onFaceReady.call(this, t), this.onRegister = t.onRegister, this.onDetail = t.onDetail
            }, t.prototype.setItems = function(e) {
                var t = this,
                    i = e.code,
                    r = e.grade,
                    o = e.items || [],
                    a = e.favorites || [],
                    s = this.sortTabBinder.getSelectedTabInfo(),
                    c = s.tabInfo,
                    d = s.descending;
                o = this.marketService.sortingSummariesInfo(o, c.type, d), this.items = o.map(function(e, t) {
                    return n.__assign({}, e.vehicle, e.summary, {
                        status: e.calStatus,
                        ovr: e.calOvr,
                        index: t,
                        favorite: 0 <= _.findIndex(a, function(t) {
                            var i = t.favorite;
                            return i.code === e.summary.code && i.grade === e.summary.grade
                        })
                    })
                }), _.findIndex(this.items, function(e, n) {
                    i === e.code && r === e.grade && (t.selectedIndex = n)
                })
            }, t.prototype.getItemProps = function(e) {
                var t = this;
                return {
                    info: e,
                    onClick: function(e) {
                        return t.selectItem(e.index)
                    },
                    onRegister: function(e, i, n) {
                        return t.onRegister(e, i, n)
                    },
                    onDetail: function(e) {
                        return t.onDetail(e)
                    }
                }
            }, t
        }(o.LineScrollListBinder);
    n.__decorate([r.autowired("marketService")], a.prototype, "marketService", void 0), t.VehicleSearchListBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(13),
        s = i(88),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.addManagedListener(this.face, o.MouseEventEx.MOUSE_OVER, this.showTooltip.bind(this)), this.addManagedListener(this.face, o.MouseEventEx.MOUSE_OUT, function(t) {
                    e.tooltipService.hide()
                }), this.addManagedListener(this.face, o.MouseEventEx.CLICK, function(t) {
                    var i = e.getProps(),
                        n = i.info,
                        r = i.onClick;
                    r && r(n)
                });
                var t = this.getFace(".id-detail");
                this.addManagedListener(t, o.MouseEventEx.CLICK, function(t) {
                    var i = e.getProps(),
                        n = i.info,
                        r = i.onDetail;
                    r && r(n)
                });
                var i = this.getFace(".id-register");
                this.addManagedListener(i, o.MouseEventEx.CLICK, function(t) {
                    var i = e.getProps(),
                        n = i.info,
                        r = i.onRegister;
                    r && r(n.favorite ? s.UnregisterFavorite : s.RegisterFavorite, n.code, n.grade)
                })
            }, t.prototype.update = function(e) {
                var t = e.info;
                this.gotoAndStop(".id-background", t.index % 2 ? "odd" : "even");
                var i = !_.isEmpty(t);
                if (this.visible(".id-vehicleClass", i), this.visible(".id-manufacturerName", i), this.visible(".id-vehicleName", i), this.visible(".id-vehicleGrade", i), this.visible(".id-ovr", i), this.visible(".id-price", i), this.visible(".id-count", i), this.visible(".id-tagContainer", i && t.favorite), i) {
                    this.gotoAndStop(".id-vehicleGrade", "grade" + t.grade), this.bindText(".id-vehicleClass .id-textField", t.clazz), this.bindText(".id-manufacturerName .id-textField", this.$filter("manufacturerName")(t.manufacturerCode)), this.bindText(".id-vehicleName .id-textField", this.$filter("vehicleName")(t.code));
                    this.getFace(".id-ovr").hasSize = !0, this.bindText(".id-ovr .id-textField", t.ovr), this.bindText(".id-price .id-textField", this.$filter("currency")(t.price, "", 0)), this.translate(".id-register .id-buttonTextField .id-textField", t.favorite ? "TRADEMARKET_FAVORITELIST_REGISTRATIONCANCLE" : "TRADEMARKET_FAVORITELIST_REGISTRATION")
                }
                this.face.mouseEventEnabled = i
            }, t.prototype.showTooltip = function(e) {
                var t = this.getProps(),
                    i = t.viewIndex,
                    n = t.info,
                    r = this.getFace(".id-ovr");
                r = r.htmlElement || r;
                var o = this.tootipPosition(i);
                this.tooltipService.show(r, o, a.TooltipType.MarketOvr, {
                    vehicle: n
                }, {
                    marginTop: "bottom" === o ? 10 : -12,
                    marginLeft: 3,
                    width: 250
                })
            }, t.prototype.tootipPosition = function(e) {
                return e < 9 ? "bottom" : "top"
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("vehicleDataService")], c.prototype, "vehicleDataService", void 0), n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.VehicleSearchListItemBinder = c;
    var d = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.tootipPosition = function(e) {
            return e < 5 ? "bottom" : "top"
        }, t
    }(c);
    t.VehicleConditionSearchListItemBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(104),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(t) {
                e.prototype.onFaceReady.call(this, t), this.onSearch = t.onSearch, this.onDetail = t.onDetail
            }, t.prototype.setItems = function(e) {
                var t = e.items || [],
                    i = this.sortTabBinder.getSelectedTabInfo(),
                    r = i.tabInfo,
                    o = i.descending;
                t = this.marketService.sortingVehicleInfo(t, r.type, o), this.items = t.map(function(e, t) {
                    return n.__assign({}, e, {
                        index: t
                    })
                })
            }, t.prototype.getItemProps = function(e) {
                var t = this;
                return {
                    info: e,
                    onClick: function(e) {
                        return t.selectItem(e.index)
                    },
                    onSearch: function(e) {
                        return t.onSearch(e.code, e.grade)
                    },
                    onDetail: function(e) {
                        return t.onDetail(e)
                    }
                }
            }, t
        }(o.LineScrollListBinder);
    n.__decorate([r.autowired("marketService")], a.prototype, "marketService", void 0), t.VehicleListBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(28),
        s = i(2),
        c = i(8),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-completeLabel", "LICENSE_TEST_COMPLETE"), this.translate(".id-enterButton", "LICENSE_MAIN_START"), this.chain(this.face).apply(a.on, {
                    event: s.MouseEventEx.MOUSE_OVER,
                    callback: function() {
                        return e.gotoAndPlay(e.face, "over")
                    }
                }).apply(a.on, {
                    event: s.MouseEventEx.MOUSE_OUT,
                    callback: function() {
                        return e.gotoAndPlay(e.face, "out")
                    }
                }), this.on(".id-enterButton", s.MouseEventEx.CLICK, function() {
                    e.props.onClick(e.props)
                }), this.classNames(".OverEffect", "prevent-click")
            }, t.prototype.update = function(e) {
                var t = e.license,
                    i = e.code,
                    n = e.name,
                    r = e.type,
                    o = e.licenseCode,
                    a = e.iconCdnFilter,
                    s = e.trackCdnFilter,
                    c = e.trackCode;
                this.translate(".id-objectiveLabel", n), this.translate(".id-titleLabel", "LICENSE_TEST_" + r.toUpperCase()), this.drawExternalImage(".id-testIcon", a(i)), this.drawExternalImage(".id-trackImage", s(c)), t.code > o || _.some(t.completedTest, function(e) {
                    return e === i
                }) ? this.gotoAndStop(".id-completeContainer", "complete") : this.gotoAndStop(".id-completeContainer", 1)
            }, t.prototype.unlock = function() {
                var e = this;
                return new r(function(t, i) {
                    var n = e.face.$(".id-completeContainer");
                    e.gotoAndPlay(n, "in"), n.once(c.EventEx.STOP, t)
                })
            }, t
        }(o.Binder);
    t.TestButtonBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(242),
        s = i(3),
        c = i(636),
        d = i(637),
        l = i(8),
        u = i(320),
        p = i(16),
        h = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.conditions = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-cancelButton", "LICENSE_START_LEAVE"), this.translate(".id-confirmButton", "LICENSE_START_TESTSTART"), this.translate(".id-objectiveLabel", "LICENSE_TEST_LOADING_CONDITION"), this.translate(".id-trackLabel", "LICENSE_TEST_LOADING_TRACK"), this.translate(".id-vehicleLabel", "LICENSE_TEST_LOADING_VEHICLE"), this.translate(".id-npcTitle", "LICENSE_START_NAME");
                for (var t = 0; t < 3; t++) this.conditions.push(this.addChildBinder(".id-objective" + (t + 1), a.ConditionBinder));
                this.track = this.addChildBinder(".id-trackContainer", c.LicenseTrackBinder), this.vehicle = this.addChildBinder(".id-vehicleContainer", d.LicenseVehicleBinder), this.onClickSafe(".id-cancelButton", function() {
                    return e.cancel()
                }), this.onClickSafe(".id-confirmButton", function() {
                    return e.start()
                }), this.drawExternalImage("> .id-externalImage", this.props.$filter("cdn_driver")(u.LicenseDriver))
            }, t.prototype.show = function(e) {
                this.test = e, this.translate(".id-titleLabel", e.name), this.translate(".id-categoryLabel", "LICENSE_TEST_" + e.type.toUpperCase()), this.translate(".id-npcDescription", e.lang.start);
                for (var t = s.store.getState().license, i = t.license, n = i.code > e.licenseCode || _.some(i.completedTest, function(t) {
                        return t === e.code
                    }), r = 0; r < 3; r++) this.conditions[r].setProps(_.assign({}, e.conditions[r], {
                    complete: n
                }));
                this.track.setProps(e);
                var o = this.vehicleDataService.createRefinedVehicle(e.vehicleCode);
                this.vehicle.setProps({
                    vehicle: o
                }), this.gotoAndPlay(this.face, "in")
            }, t.prototype.start = function() {
                var e = this;
                return new r(function(t) {
                    var i = e.props.service,
                        n = e.props.stateService;
                    n.go("root.LicenseLoading", {
                        fromLobby: "root.LicenseMain" !== n.getCurrentName()
                    }).then(function() {
                        return t()
                    }), i.startTest(e.test)
                })
            }, t.prototype.cancel = function() {
                var e = this;
                return new r(function(t) {
                    e.gotoAndPlay(e.face, "out"), e.face.once(l.EventEx.STOP, t)
                })
            }, t
        }(o.Binder);
    n.__decorate([p.autowired("vehicleDataService")], h.prototype, "vehicleDataService", void 0), t.TestStartBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                _.isEmpty(e) || this.bindTrack(e)
            }, t.prototype.update = function(e) {
                this.bindTrack(e)
            }, t.prototype.bindTrack = function(e) {
                var t = this.staticdata.trackData,
                    i = t.getTrack(e.trackCode);
                this.translate(".id-trackName", i.nameCode), this.drawExternalImage(".id-trackImage", this.$filter("cdn_track")(i.code));
                var n = this.getFace(".id-trackMap");
                "driving" === e.type ? (n.visible = !0, this.drawExternalImage(n, this.$filter("cdn_track_map")(i.code))) : n.visible = !1
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], o.prototype, "staticdata", void 0), t.LicenseTrackBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(164),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.gotoAndStop(".id-vehicleGrade", "grade1"), e.prototype.onFaceReady.call(this)
            }, t
        }(r.VehicleBinder);
    t.LicenseVehicleBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(13),
        a = i(27),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.bindReward = function(e) {
                var t = this,
                    i = function(e, i) {
                        t.tooltipService.show(e, "top", o.TooltipType.ItemCard, i, {
                            marginTop: -5
                        })
                    },
                    n = function() {
                        return t.tooltipService.hide()
                    },
                    r = this.service.licenseRewardData[e];
                this.delegate ? this.delegate.setProps({
                    info: {
                        type: r.type,
                        code: r.code,
                        count: 1
                    },
                    onMouseOver: i,
                    onMouseOut: n
                }) : this.delegate = this.addChildBinder(this.face, a.ItemCardBinder, {
                    info: {
                        type: r.type,
                        code: r.code,
                        count: 1
                    },
                    onMouseOver: i,
                    onMouseOut: n
                })
            }, Object.defineProperty(t.prototype, "name", {
                get: function() {
                    return this.delegate && this.delegate.name
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(r.Binder);
    n.__decorate([r.autowired("licenseService")], s.prototype, "service", void 0), n.__decorate([r.autowired("tooltipService")], s.prototype, "tooltipService", void 0), t.RewardItemBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(3),
        s = i(109),
        c = i(8),
        d = i(638),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = a.store.getState().license,
                    i = t.license,
                    n = s.LicenseCode[i.code],
                    r = s.LicenseCode[i.code + 1];
                this.gotoAndStop(".id-beforeIcon", n.toLowerCase()), this.translate(".id-beforeLicenseTitle", "LICENSE_MAIN_TITLE_" + n.toUpperCase()), this.gotoAndStop(".id-afterIcon", r.toLowerCase()), this.translate(".id-afterLicenseTitle", "LICENSE_ACQUISITION_TITLE_" + r.toUpperCase()), this.translate(".id-confirmButton", "LICENSE_ACQUISITION_CONFIRM"), this.onClickSafe(".id-confirmButton", function() {
                    return e.exit()
                });
                var o = this.addChildBinder(".id-itemCard", d.RewardItemBinder);
                o.bindReward(i.code + 1), this.bindText(".id-rewardDescriptionLabel .comp-TextField", o.name)
            }, t.prototype.onAddedToScene = function() {
                this.stage.gotoAndPlay("in")
            }, t.prototype.exit = function() {
                var e = this;
                return new r(function(t, i) {
                    e.stage.gotoAndPlay("out"), e.stage.once(c.EventEx.STOP, function() {
                        e.stateService.go("^").then(t, i)
                    })
                })
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("stateService")], l.prototype, "stateService", void 0), n.__decorate([o.autowired("licenseService")], l.prototype, "licenseService", void 0), t.LicenseAcquireEffect = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(54),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.medals = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                for (var e = this, t = 1; t <= 5; ++t) this.medals[t] = this.face.$$(".id-medalMC" + t).map(function(t) {
                    return e.addChildBinder(t, o.TierMedalBinder)
                });
                this.visibleAll(".TierPoint", !1)
            }, t.prototype.update = function(e) {
                var t = this.props,
                    i = t.tier,
                    n = t.fpWithinTier;
                if (t.hide) return void this.visible(this.face, !1);
                this.visible(this.face, !0);
                var r = n.toString().length >= 5 ? 5 : n.toString().length;
                this.visibleAll(".id-tierPoint" + r, !0), this.bindTextAll(".id-tierPoint" + r + " .id-textField", n), this.translateAll(".id-tierName .comp-TextField", "RANKEDMATCH_TIERNAME_" + i);
                for (var o = this, a = 1; a <= 5; ++a) ! function(e) {
                    o.medals[e].forEach(function(t) {
                        return t.setProps({
                            hide: e !== r,
                            tierCode: i
                        })
                    })
                }(a)
            }, t
        }(r.Binder);
    t.SeasonOverallContainerBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(5),
        o = i(2),
        a = i(1),
        s = i(27),
        c = i(13),
        d = i(227),
        l = i(3),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                if (this.face.hasSize = !0, this.delegate = this.addChildBinder(this.face, s.ItemCardBinder), !e.disableMouseEvent) {
                    var i = this.getFace(".id-itemReceive");
                    this.addManagedListener(this.face, o.MouseEventEx.MOUSE_OVER, function(e) {
                        var i = t.props,
                            r = t.getSide(i.index),
                            o = c.TooltipType.ShopProduct,
                            a = n.__assign({}, i, {
                                serverTime: t.serverTimeService.time
                            }),
                            s = {
                                marginTop: 26,
                                marginLeft: "left" === r ? -3 : -14
                            },
                            d = e && e.currentTarget ? e : t.face;
                        t.tooltipService.show(d, r, o, a, s)
                    }), this.addManagedListener(this.face, o.MouseEventEx.MOUSE_OUT, function() {
                        t.face.mouseEventEnabled ? t.tooltipService.hide() : (t.face.mouseEventEnabled = !0, t.face.emit(o.MouseEventEx.MOUSE_OUT))
                    }), this.addManagedListener(this.face, o.MouseEventEx.MOUSE_DOWN, function() {
                        t.face.mouseEventEnabled = !1
                    }), this.addManagedListener(this.face, o.MouseEventEx.MOUSE_UP, function() {
                        t.face.mouseEventEnabled = !0
                    }), this.addManagedListener(i, o.MouseEventEx.CLICK, function() {
                        t.tooltipService.hide();
                        var e = t.props;
                        t.onClickProduct(e)
                    })
                }
                var r = $(this.getFace(".id-itemImage").htmlElement);
                r && r.on("fallbackSrc", function() {
                    var e = t.getProps();
                    l.store.dispatch(d.setFallbackImg(e.category, e.code))
                })
            }, t.prototype.update = function(e) {
                _.isEmpty(e) || this.delegate.setProps(this.getItemCardProp(e))
            }, t.prototype.onClickProduct = function(e) {
                if (!this.shopService.isOnSaleProduct(e)) return void this.popupService.draw("ConfirmPopup", {
                    title: "SHOP_POPUP_PURCHASEFAIL_TITLE",
                    description: "SHOP_POPUP_PURCHASEFAIL_DESC"
                });
                var t = this.stateService.getCurrentName() + ".Purchase";
                this.stateService.go(t, {
                    productCode: e.code
                })
            }, t.prototype.getDescProductSaleRemain = function(e, t, i) {
                var n = i.diff(t, "days"),
                    r = i.diff(t, "hours"),
                    o = i.diff(t, "minutes"),
                    a = i.diff(t, "seconds");
                return 0 < n ? this.delegate.$filter("template")({
                    day: n
                }, "SHOP_ITEM_" + e + "_REMAINING_D") : 0 < r ? this.delegate.$filter("template")({
                    hour: r
                }, "SHOP_ITEM_" + e + "_REMAINING_H") : 0 < o || 0 < a ? this.delegate.$filter("template")({
                    minute: o || 1
                }, "SHOP_ITEM_" + e + "_REMAINING_M") : void 0
            }, t.prototype.getItemCardProp = function(e) {
                var t, i = r(this.serverTimeService.time);
                e.isShowDates && (i.isBefore(e.saleFrom) ? t = this.getDescProductSaleRemain("SALESTART", i, r(e.saleFrom)) : i.isBefore(e.saleTo) && (t = this.getDescProductSaleRemain("SALEEND", i, r(e.saleTo))));
                var n = 0;
                "SP" === e.filterOpt.type || "MILEAGE" === e.filterOpt.type ? n = _.findIndex(e.bunches, {
                    currency: e.filterOpt.type
                }) : "CASH" === e.filterOpt.type && (n = _.findIndex(e.bunches, function(e) {
                    return -1 !== e.currency.indexOf("CASH")
                })), n < 0 && (n = 0);
                var o = e.bunches[n];
                return {
                    info: {
                        name: e.name,
                        img: this.shopService.getProductImgPath(e),
                        type: "SHOP_PRODUCT",
                        price: o.price,
                        currency: o.currency,
                        count: 1,
                        isNew: e.isNewProduct,
                        isPromotion: e.isPromotion,
                        rank: e.rank,
                        tagType: t ? "duration" : void 0,
                        tagName: t,
                        fallbackImg: this.shopService.getProductFallbackImgPath(e)
                    },
                    actionButtonEnabled: !0
                }
            }, t.prototype.getSide = function(e) {
                var t = (e + 1) % 6;
                return t < 4 && t > 0 ? "right" : "left"
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("tooltipService")], u.prototype, "tooltipService", void 0), n.__decorate([a.autowired("popupService")], u.prototype, "popupService", void 0), n.__decorate([a.autowired("stateService")], u.prototype, "stateService", void 0), n.__decorate([a.autowired("shopService")], u.prototype, "shopService", void 0), n.__decorate([a.autowired("serverTimeService")], u.prototype, "serverTimeService", void 0), t.ProductListItemBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(4),
        s = i(13),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.chargeButton = this.convertFace(".id-chargeCash"), this.translate(this.chargeButton, "SHOP_CASHCHARGE"), this.addManagedListener(this.chargeButton, o.MouseEventEx.CLICK, function() {
                    return e.openChargeWindow()
                });
                var t = this.getFace(".id-cashLabel");
                this.translate(t, "SHOP_MYCASH");
                var i = this.getFace(".id-cash");
                this.cashIcon = i.$(".id-monetaryUnitIcon"), this.cashText = i.$(".id-textField"), this.hasSize(i, !0), this.hasSize(this.cashIcon, !0), i.htmlElement.insertBefore(this.cashText.htmlElement, this.cashIcon.htmlElement);
                var n = this.getFace(".id-mileage"),
                    r = this.getFace(".id-mileageLabel");
                if (this.visible(n, !1), this.visible(r, !1), this.featureSetService.isEnabled("MILEAGE")) this.visible(n, !0), this.visible(r, !0), this.translate(".id-mileageLabel", "SHOP_MYMILEAGE"), this.mileageIcon = n.$(".id-monetaryUnitIcon"), this.mileageText = n.$(".id-textField"), this.hasSize(n, !0), this.hasSize(this.mileageIcon, !0), n.htmlElement.insertBefore(this.mileageText.htmlElement, this.mileageIcon.htmlElement);
                else {
                    i.setCustomStyle({
                        "margin-top": "14px"
                    }), t.setCustomStyle({
                        "margin-top": "14px"
                    })
                }
            }, t.prototype.update = function(e) {
                _.isEmpty(e) || (this.setCashInfo(e), this.setMileageInfo(e.mileage))
            }, t.prototype.setCashInfo = function(e) {
                var t = "tencent" === this.publisherService.publisher ? "TCCASH" : "NXCASH",
                    i = e.cash || [],
                    n = i[t] || 0;
                this.gotoAndStop(this.cashIcon, "cash"), this.bindText(this.cashText, a.default.toMoney(n))
            }, t.prototype.setMileageInfo = function(e) {
                var t = this,
                    i = e.balance || 0;
                this.gotoAndStop(this.mileageIcon, "mileage"), this.bindText(this.mileageText, a.default.toMoney(i));
                var n = this.getFace(".id-mileageLabel .id-tooltipButton");
                this.addManagedListener(n, o.MouseEventEx.MOUSE_OVER, function(i) {
                    var n = t.playerService.getRemainingTime(e.nextResetAt);
                    t.tooltipService.show(i, "right", s.TooltipType.MileageReset, {
                        mainText: [{
                            title: "MILEAGE_INFO_TITLE"
                        }, {
                            description: n
                        }],
                        subText: [t.playerService.formatDate(e.nextResetAt, "MILEAGE_INFO_RESETINFO")]
                    })
                }), this.addManagedListener(n, o.MouseEventEx.MOUSE_OUT, function(e) {
                    t.tooltipService.hide()
                }), this.playerService.addMileageResetTimer()
            }, t.prototype.openChargeWindow = function() {
                var e = this;
                this.getProps();
                this.chargePromise = this.publisherService.openChargeWindow().then(function() {
                    return e.shopService.fetchCash()
                })
            }, t.prototype.onDetach = function() {
                this.chargePromise && this.chargePromise.cancel()
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([r.autowired("shopService")], c.prototype, "shopService", void 0), n.__decorate([r.autowired("publisherService")], c.prototype, "publisherService", void 0), n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), n.__decorate([r.autowired("featureSetService")], c.prototype, "featureSetService", void 0), n.__decorate([r.autowired("playerService")], c.prototype, "playerService", void 0), t.ChargeCashBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(1),
        a = i(4),
        s = i(60),
        c = i(60),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.exit = this.props.exit
            }, t.prototype.onAddedToScene = function() {
                a.default.blockEdgeContentsMouseEvent(!0)
            }, t.prototype.update = function(e) {
                var t = this;
                this.product = e.product, this.currentBunch = e.bunch, this.currentCurrency = e.bunch.currency, this.targetBunches = _.filter(this.product.bunches, function(e) {
                    return e.currency === t.currentCurrency
                })
            }, t.prototype.openInSufficientPopup = function(e) {
                var t = this,
                    i = this.isCash(this.currentCurrency) ? "ConfirmCancelPopup" : "ConfirmPopup",
                    n = "SHOP_POPUP_INSUFFICIENT" + this.currentCurrency + "_TITLE",
                    o = this.$filter("template")((l = {}, l["insufficient" + this.currentCurrency.toLowerCase()] = a.default.toMoney(-1 * e), l), "SHOP_POPUP_INSUFFICIENT" + this.currentCurrency + "_TEXT1"),
                    c = {
                        title: n,
                        description: o,
                        confirm: function() {
                            if (!t.isCash(t.currentCurrency)) return t.playerService.fetchMileage(), void t.exit();
                            t.popupService.chaining = !0, r.debug(">> 퍼블리셔 캐시충전 팝업");
                            var e = s.ChargeWindowSize[t.publisherService.publisher];
                            e.width, e.height;
                            t.chargePromise = t.publisherService.openChargeWindow().then(function() {
                                return t.shopService.fetchCash()
                            })
                        }
                    },
                    d = _.assign({}, c, this.refinedParams(e));
                this.popupService.draw(i, d);
                var l
            }, t.prototype.refinedParams = function(e) {
                return void 0 === e && (e = 0), {}
            }, t.prototype.onErrorPurchase = function(e) {
                var t = "SHOP_POPUP_PURCHASEFAIL_TITLE",
                    i = e.extra && e.extra.meta && e.extra.meta.message || "SHOP_POPUP_PURCHASEFAIL_DESC";
                e.code === c.toCode(c.ErrorCode.PresentMsgHasBanKeyword) && (t = "SHOP_GIFT_MESSAGE_BANNED_TITLE", i = "SHOP_GIFT_MESSAGE_BANNED_DESC"), this.popupService.drawConfirm(t, i)
            }, t.prototype.isCash = function(e) {
                return this.shopService.isCash(e)
            }, t.prototype.onDetach = function() {
                this.chargePromise && this.chargePromise.cancel()
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([o.autowired("popupService")], d.prototype, "popupService", void 0), n.__decorate([o.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([o.autowired("shopService")], d.prototype, "shopService", void 0), n.__decorate([o.autowired("playerService")], d.prototype, "playerService", void 0), n.__decorate([o.autowired("stateService")], d.prototype, "stateService", void 0), n.__decorate([o.autowired("publisherService")], d.prototype, "publisherService", void 0), t.PurchaseNextCommBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1),
        a = i(1477),
        s = i(27),
        c = i(8),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.getFace(".ContentsContainer").$$("> div").forEach(function(e) {
                    e.visible = !1
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                setTimeout(function() {
                    return e.gotoAndPlay(e.face, "in")
                }, 100)
            }, t.prototype.setProductComponent = function() {
                this.isBundle && (this.productComponentBinder = this.addChildBinder(this.targetContainer.$(".id-itemTileList"), a.ProductComponentBinder), this.productComponentBinder.setProps({
                    rewards: this.product.rewards
                }))
            }, t.prototype.setCashContainer = function() {
                var e = this.targetContainer.$(".ItemPriceNumber"),
                    t = e.$(".id-monetaryUnitIcon"),
                    i = e.$(".id-itemPriceNum");
                e.hasSize = !0, t.hasSize = !0, e.htmlElement.insertBefore(i.htmlElement, t.htmlElement)
            }, t.prototype.setItemCard = function() {
                this.itemCardBinder = this.addChildBinder(this.targetContainer.$(".id-itemCard"), s.ItemCardBinder);
                var e = _.minBy(this.targetBunches, function(e) {
                    return e.count
                });
                this.itemCardBinder.setProps({
                    info: {
                        name: this.product.name,
                        img: this.shopService.getProductImgPath(this.product),
                        type: "SHOP_PRODUCT",
                        price: e.price,
                        currency: e.currency,
                        count: 1,
                        rank: this.product.rank,
                        fallbackImg: this.shopService.getProductFallbackImgPath(this.product)
                    },
                    mouseDisabled: !0
                })
            }, t.prototype.setPriceInfoByBunch = function() {
                var e = this.shopService.getMyMoney(this.currentCurrency),
                    t = this.shopService.getPopupText(this.currentCurrency),
                    i = t.possessionText,
                    n = t.balanceText;
                this.translate(this.targetContainer.$(".id-myPossessionLabel"), i), this.translate(this.targetContainer.$(".id-balanceLabel"), n), this.bindText(this.targetContainer.$(".id-myPossessionNum"), r.default.toMoney(e)), this.bindText(this.targetContainer.$(".id-itemPriceNum .id-itemPriceNum"), r.default.toMoney(this.currentBunch.price)), this.bindText(this.targetContainer.$(".id-balanceNum"), r.default.toMoney(e - this.currentBunch.price)), this.gotoAndStop(this.targetContainer.$(".id-itemPriceNum .id-monetaryUnitIcon"), r.default.getPriceIconLabel(this.currentCurrency)), this.nextBinder.setProps({
                    product: this.product,
                    bunch: this.currentBunch
                })
            }, t.prototype.getDescAreaValues = function() {
                var e = this;
                return ['<div class="desc">' + this.product.desc + "</div>", '<div class="components-label">' + this.$filter("translate")("INBOX_CONFIRM_POPUP_REWARDTITLE") + "</div>", '<ul class="components">'].concat(this.product.rewards.map(function(t) {
                    return "<li>" + r.default.getRewardName(t, e.$filter) + "</li>"
                }), ["</ul>"])
            }, t.prototype.setProductDetailInfo = function() {
                this.targetContainer.$(".id-itemListTextArea .id-textField").hasSize = !0, $(this.targetContainer.$(".id-itemListTextArea .id-textField").htmlElement).perfectScrollbar({
                    suppressScrollX: !0
                });
                var e = this.getDescAreaValues();
                this.bindHtml(this.targetContainer.$(".id-itemListTextArea"), e.join(""))
            }, t.prototype.onDetach = function() {
                $(this.targetContainer.$(".id-itemListTextArea .id-textField").htmlElement).perfectScrollbar("destroy"), this.targetContainer.visible = !1, e.prototype.onDetach.call(this)
            }, t.prototype.exit = function() {
                var e = this;
                this.gotoAndPlay(this.face, "out"), this.once(this.face, c.EventEx.STOP, function() {
                    r.default.blockEdgeContentsMouseEvent(!1), e.stateService.go("^")
                })
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([o.autowired("$stateParams")], d.prototype, "$stateParams", void 0), n.__decorate([o.autowired("stateService")], d.prototype, "stateService", void 0), n.__decorate([o.autowired("shopService")], d.prototype, "shopService", void 0), t.ProductPurchaseCommBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0
            }, t.prototype.update = function(e) {
                var t = e.emblemId;
                t && this.drawExternalImageAll(".ClanEmblem", this.$filter("cdn_clan_emblem")(t))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), t.ClanEmblemItemBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(43),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.lock = !1, t.select = !1, t.equip = !1, t.uniqueNumber = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                this.emptyMovie = e.lockMovie || "", _.times(5, function(e) {
                    t.uniqueNumber.push(t.getFace(".id-uniqueNumber .id-num" + (e + 1)))
                }), this.equipTag = this.getFace(".id-equipTag"), this.equipTag && this.translate(".id-equipTag .id-equipLabel", "MYNUMBERPLATE_INSTALLED"), this.translate(".id-highClassTag .id-highTagLabel", "MYNUMBERPLATE_HIGHCLASS"), this.gotoAndPlay(".id-highClassTag", "in"), this.addManagedListener(this.face, "stop", function() {
                    t.equip && t.gotoAndStop(t.equipTag, "installed")
                })
            }, t.prototype.onAddedToScene = function() {
                this.face.customState = this.lock ? "lock" : ""
            }, t.prototype.update = function(e) {
                this.select === e.select && this.lock === e.lock && this.equip === e.equip && e.plate && _.isEqual(e.plate, this.plate) || (this.lock = e.lock, this.plate = e.plate, void 0 === e.disableUnselect && this.select === e.select || (this.select = e.select, void 0 !== e.disableUnselect && e.disableUnselect ? this.select ? (this.face.enabled = !0, this.face.selected = !0) : (this.face.selected = !1, this.face.enabled = !1) : this.face.selected = this.face.enabled && this.select), this.equipTag && this.equip !== e.equip && (this.equip = e.equip, this.equip && this.gotoAndPlay(this.equipTag, "in"), this.equipTag.visible = this.equip), this.getFace(".id-highClassTag").visible = this._plate && this.numberPlateService.isHigh(this._plate.templateCode))
            }, Object.defineProperty(t.prototype, "plate", {
                get: function() {
                    return this._plate
                },
                set: function(e) {
                    var t = this;
                    this._plate = e;
                    var i = this._plate && this.numberPlateService.isHigh(this._plate.templateCode),
                        n = i ? "normal-color" : "high-color",
                        r = i ? "high-color" : "normal-color",
                        o = [];
                    this._plate && (this._plate.plateNumber || "").split("").slice(0, 5).forEach(function(e) {
                        return o.push(e)
                    }), _.times(5, function(e) {
                        t.uniqueNumber[e].text = o[e] || "";
                        var i = t.uniqueNumber[e].htmlElement.classList;
                        i.remove(n), i.add(r)
                    }), this.face.enabled = !this.lock && void 0 !== this._plate, this.lock && this.emptyMovie && this.gotoAndStop(this.face, this.emptyMovie), this.face.customState = this.lock ? "lock" : ""
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(r.Binder);
    n.__decorate([r.autowired(o.numberPlateService)], a.prototype, "numberPlateService", void 0), t.NumberPlateListItemBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(1),
        a = i(2),
        s = i(3),
        c = Math.floor(2.5);
    ! function(e) {
        e[e.default = -1] = "default", e[e.first = 0] = "first", e[e.previous = 1] = "previous", e[e.next = 2] = "next", e[e.last = 3] = "last"
    }(n = t.PageAction || (t.PageAction = {}));
    var d = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.action = "", t.isPaging = !1, t.page = -1, t.pageMax = -1, t.pageNumbers = [], t.pageButtons = {}, t.hasButtons = !0, t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function(e) {
            var t = this;
            this.face.hasSize = !0, this.action = e.action, _.times(5, function(e) {
                var i = t.getFace(".id-curr" + (e + 2));
                t.pageNumbers.push(i), t.addManagedListener(i, a.MouseEventEx.CLICK, function() {
                    t.onClickPageNumber(e - c)
                })
            }), this.face.parent.htmlElement.addEventListener("mousewheel", this.onMouseWheel.bind(this)), this.addManagedListener(this.face, "reset", function(e) {
                t.gotoAndPlay(t.face, "default"), t.updateCurrentPageNumbers(t.page), t.isPaging = !1
            }), this.initPageButtons()
        }, t.prototype.onClickPageNumber = function(e) {
            this.isPaging || s.store.dispatch({
                type: this.action,
                page: this.page + e
            })
        }, t.prototype.onMouseWheel = function(e) {
            this.onPageAction(e.wheelDeltaY < 0 ? n.next : n.previous)
        }, t.prototype.initPageButtons = function() {
            var e = this;
            this.pageButtons[n.first] = this.face.parent.$(".id-firstButton"), this.pageButtons[n.previous] = this.face.parent.$(".id-previousButton"), this.pageButtons[n.next] = this.face.parent.$(".id-nextButton"), this.pageButtons[n.last] = this.face.parent.$(".id-lastButton"), Object.keys(this.pageButtons).forEach(function(t) {
                var i = Number(t);
                e.hasButtons && e.pageButtons[i] ? e.addManagedListener(e.pageButtons[i], a.MouseEventEx.CLICK, function() {
                    e.onClickPageButton(i)
                }) : e.hasButtons = !1
            })
        }, t.prototype.onClickPageButton = function(e) {
            this.onPageAction(e)
        }, t.prototype.onPageAction = function(e) {
            if (!this.isPaging) {
                var t = this.getNextPage(e);
                t !== this.page && s.store.dispatch({
                    type: this.action,
                    page: t
                })
            }
        }, t.prototype.getNextPage = function(e) {
            switch (e) {
                case n.first:
                    return 0;
                case n.previous:
                    return 0 === this.page ? this.page : this.page - 1;
                case n.next:
                    return this.page === this.pageMax ? this.page : this.page + 1;
                case n.last:
                    return this.pageMax;
                default:
                    return 0
            }
        }, t.prototype.onAddedToScene = function() {
            e.prototype.onAddedToScene.call(this)
        }, t.prototype.onDetach = function() {
            this.face.parent.htmlElement.removeEventListener("mousewheel", this.onMouseWheel.bind(this)), e.prototype.onDetach.call(this)
        }, t.prototype.update = function(e) {
            if (this.page !== e.page || this.pageMax !== e.pageMax) {
                this.isPaging = !0, this.pageMax = e.pageMax;
                var t = e.page > this.page ? n.last : n.first;
                this.goToPage(e.page, t)
            }
        }, t.prototype.goToPage = function(e, t) {
            this.updateNextPageNumbers(e, t);
            var i = this.getNumberListMovie(t);
            this.gotoAndPlay(this.face, i), this.page = e, this.hasButtons && this.updatePageButtons(e)
        }, t.prototype.updateCurrentPageNumbers = function(e) {
            var t = this;
            this.bindText(this.face.parent.$(".id-currentPage .id-current"), e + 1), _.times(5, function(i) {
                var n = t.pageNumbers[i];
                n && t.updatePageNumber(n, e - c + i)
            })
        }, t.prototype.updateNextPageNumbers = function(e, t) {
            var i = this;
            switch (t) {
                case n.first:
                case n.previous:
                    _.times(7, function(t) {
                        var n = i.getFace(".id-num" + (t + 1));
                        n && i.updatePageNumber(n, e - c + t)
                    });
                    break;
                case n.next:
                case n.last:
                    _.times(7, function(t) {
                        var n = i.getFace(".id-num" + (t + 1));
                        n && i.updatePageNumber(n, e - c + t - 2)
                    })
            }
        }, t.prototype.updatePageNumber = function(e, t) {
            t < 0 || t > this.pageMax ? (e.textField.text = "", e.enabled = !1) : (e.textField.text = String(t + 1), e.enabled = !0)
        }, t.prototype.getNumberListMovie = function(e) {
            switch (e) {
                case n.first:
                case n.previous:
                case n.next:
                case n.last:
                    return n[e];
                default:
                    return n[n.default]
            }
        }, t.prototype.updatePageButtons = function(e) {
            this.pageButtons[n.first].enabled = 0 !== e, this.pageButtons[n.previous].enabled = 0 !== e, this.pageButtons[n.next].enabled = e !== this.pageMax, this.pageButtons[n.last].enabled = e !== this.pageMax
        }, t
    }(o.Binder);
    r.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), t.PageNumberContainer = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(59),
        a = i(43),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = e.page;
                this.parentPage = t
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                if (this.parentPage === o.Page.MainPage) {
                    if (!_.isEqual(t.myPreviewPlateNumber, e.myPreviewPlateNumber)) {
                        var i = e.myNumberPlates[e.myPreviewPlateNumber];
                        this.showCircle(i)
                    }
                } else if (!_.isEqual(t.searchPreviewPlateNumber, e.searchPreviewPlateNumber)) {
                    var i = e.searchResults[e.searchPreviewPlateNumber];
                    this.showCircle(i)
                }
            }, t.prototype.showCircle = function(e) {
                if (e) {
                    var t = this.numberPlateService.isHigh(e.templateCode) ? "high" : "normal";
                    this.gotoAndPlay(this.face, t)
                }
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.numberPlate;
                return {
                    myNumberPlates: t.myNumberPlates,
                    myPreviewPlateNumber: t.myPreviewPlateNumber,
                    searchResults: t.searchResults,
                    searchPreviewPlateNumber: t.plateNumberSelectedInSearch,
                    uiState: t.uiState
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired(a.numberPlateService)], s.prototype, "numberPlateService", void 0), t.NumberPlateClassCircle = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(104),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.getItemProps = function(e) {
                var t = this;
                return {
                    info: e,
                    onClick: function(e) {
                        t.selectedItem && t.selectedItem(e.item)
                    }
                }
            }, t
        }(r.LineScrollListBinder);
    t.AuctionScrollListBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(13),
        s = i(3),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.on(o.MouseEventEx.MOUSE_OVER, function(t) {
                    return e.onHelpOver(t)
                }), this.face.on(o.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.onHelpOver = function(e) {
                var t = s.store.getState().player.mileage;
                if (t) {
                    var i = this.playerService.getRemainingTime(t.nextResetAt);
                    this.tooltipService.show(e, "topleft", a.TooltipType.MileageReset, {
                        mainText: [{
                            title: "MILEAGE_INFO_TITLE"
                        }, {
                            description: i
                        }],
                        subText: [this.playerService.formatDate(t.nextResetAt, "MILEAGE_INFO_RESETINFO")]
                    })
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), n.__decorate([r.autowired("playerService")], c.prototype, "playerService", void 0), t.AuctionMileageTooltipBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(652),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.imageUrls = [], t.imageIndex = 0, t.updateDuration = 1e3, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.auctionService.fetchAdvertisements();
                var t = Number(this.staticdataLoaderService.auctionDataManager.getConfig("Auction_Banner_Update_Time"));
                isNaN(t) || (this.updateDuration = 1e3 * t), this.containerNames.forEach(function(t) {
                    var i = e.getFace(t),
                        n = i.htmlElement;
                    n.onmouseenter = function() {
                        return e.stopInterval()
                    }, n.onmouseleave = function() {
                        return e.startInterval()
                    }
                })
            }, t.prototype.onDetach = function() {
                this.stopInterval()
            }, t.prototype.setBannerImage = function(e, t) {
                this.drawExternalImageAll(t, e)
            }, t.prototype.updateBanner = function(e, t) {
                e ? (this.imageIndex = 0, this.setBannerImage(this.imageUrls[this.imageIndex], t)) : (this.imageIndex = (this.imageIndex + 1) % this.imageUrls.length, this.setBannerImage(this.imageUrls[this.imageIndex], t))
            }, t.prototype.resetBanner = function() {
                e.prototype.resetBanner.call(this), this.stopInterval(), this.startInterval()
            }, t.prototype.startInterval = function() {
                var e = this;
                this.updateInterval || (this.updateInterval = setInterval(function() {
                    !1 === e.reduxProps.isNotificationListShown && e.imageUrls.length > 1 && e.playNext()
                }, this.updateDuration))
            }, t.prototype.stopInterval = function() {
                this.updateInterval && (clearInterval(this.updateInterval), this.updateInterval = null)
            }, t.prototype.update = function(e) {
                this.reduxProps.bannersUrl !== e.bannersUrl && (this.imageUrls = e.bannersUrl, this.imageUrls.length > 0 && this.resetBanner())
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.auction;
                return {
                    bannersUrl: t.bannersUrl,
                    isNotificationListShown: t.isNotificationListShown
                }
            }, t
        }(o.AuctionBannerBinder);
    n.__decorate([r.autowired("auctionService")], a.prototype, "auctionService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], a.prototype, "staticdataLoaderService", void 0), t.AuctionAdvertisementBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.containerNames = [".id-next", ".id-current"], t.animationNames = ["nextOdd", "nextEven"], t.nextIndex = 0, t.updateInterval = void 0, t
            }
            return n.__extends(t, e), t.prototype.updateBanner = function(e, t) {}, t.prototype.playNext = function() {
                var e = this.nextIndex;
                this.gotoAndPlay(this.face, this.animationNames[e]), this.updateBanner(!1, this.containerNames[e]), this.nextIndex = (this.nextIndex + 1) % 2
            }, t.prototype.resetBanner = function() {
                this.nextIndex = 0, this.gotoAndPlay(this.face, "default"), this.updateBanner(!0, ".id-current")
            }, t
        }(r.Binder);
    t.AuctionBannerBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(652),
        o = i(2),
        a = i(329),
        s = i(93),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.bidding = void 0, t.biddingBinderDetails = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.visible = !1, this.containerNames.forEach(function(t) {
                    e.biddingBinderDetails[t] = e.addChildBinder(t, a.AuctionNotificationItemBinder)
                }), this.getFace(".id-showListButton").addListener(o.MouseEventEx.CLICK, function() {
                    return e.onMouseClick()
                })
            }, t.prototype.onMouseClick = function() {
                s.UpdateNotificationListDisplayStatus(!0)
            }, t.prototype.updateBanner = function(e, t) {
                this.setBidding(t)
            }, t.prototype.setBidding = function(e) {
                this.bidding && this.biddingBinderDetails[e].updateNotification({
                    info: n.__assign({}, this.bidding)
                })
            }, t.prototype.refreshBidding = function() {
                this.face.visible = void 0 !== this.bidding, this.bidding && this.playNext()
            }, t.prototype.update = function(e) {
                if (this.reduxProps.biddings !== e.biddings) {
                    var t = e.biddings;
                    this.bidding = t.length > 0 ? t[0] : void 0, this.refreshBidding()
                }
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    biddings: e.auction.biddings
                }
            }, t
        }(r.AuctionBannerBinder);
    t.AuctionBiddingBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(650),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.mileageText = void 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-title .id-textField", "AUCTION_MYMILEAGE"), this.mileageText = this.getFace(".id-textField"), this.gotoAndStopAll(".MonetaryUnitIcon", "mileage"), this.tooltip = this.addChildBinder(".id-title .id-tooltipButton", o.AuctionMileageTooltipBinder)
            }, t.prototype.updateMileage = function(e) {
                this.mileageText.text = this.$filter("currency")(e.balance, "", 0)
            }, t.prototype.update = function(e) {
                this.reduxProps.mileage !== e.mileage && (this.updateMileage(e.mileage), this.tooltip.setProps(e))
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    mileage: e.player.mileage
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], a.prototype, "$filter", void 0), t.AuctionMileageBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(7),
        a = i(65),
        s = i(1547),
        c = i(2),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                o.debug("FestivalEntryBinder:: onFaceReady"), this.translate(".id-titleLabel", "FESTIVAL_ENTRYSCREEN_SELECTION_TITLE"), this.translate(".id-descriptionLabel", "FESTIVAL_ENTRYSCREEN_SELECTION_DESC"), this.translate(".id-calendarButton", "FESTIVAL_ENTRYSCREEN_SCHEDULE"), this.on(".id-calendarButton", c.MouseEventEx.CLICK, function() {
                    e.dispatch(a.showSchedule())
                })
            }, t.prototype.onDetach = function() {
                o.debug("FestivalEntryBinder:: onDetach")
            }, t.prototype.onAddedToScene = function() {
                o.debug("FestivalEntryBinder:: onAddedToScene"), this.gotoAndPlay(this.face, "in"), this.dispatch(a.deselectFestival())
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.festivalState,
                    n = this.festivalService.getViewFestivals(!0);
                _.range(0, 3).forEach(function(e) {
                    var i = ".id-banner" + (e + 1);
                    t.addChildBinder(i, s.FestivalEntryBannerBinder, {
                        bannerIndex: e
                    }).setProps(n[e])
                }), this.getFace(".id-calendarButton").enabled = n.length > 0;
                var r = i.view.festivalId;
                r && this.festivalService.checkRewardLobby(r)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    vehicleState: e.vehicle,
                    festivalState: e.festival
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("festivalService")], d.prototype, "festivalService", void 0), t.FestivalEntryBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(65),
        a = i(4),
        s = i(1),
        c = i(2),
        d = i(5),
        l = i(657),
        u = i(658),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.stage.visible = !1, this.on(".id-close", c.MouseEventEx.CLICK, function() {
                    e.dispatch(o.hideSchedule())
                }), this.on(".id-monthStepper .id-left", c.MouseEventEx.CLICK, function() {
                    e.onChangeCalendar(-1)
                }), this.on(".id-monthStepper .id-right", c.MouseEventEx.CLICK, function() {
                    e.onChangeCalendar(1)
                }), this.prepareTabButtons(), this.titleBinder = this.addChildBinder(".id-titleContainer", u.FestivalTitleBinder), this.days = this.addChildBinder(".id-calendarContainer .id-days", h), this.hasSize(".id-schedule .DateAndOrder", !0), this.hasSize(".id-schedule .id-date", !1), this.hasSize(".id-schedule .id-date .id-textField", !1), this.hasSize(".id-schedule .id-order", !1), this.hasSize(".id-schedule .id-order .id-textField", !1), this.translate(".RewardContainer .id-day .id-gaugeName", "MINIFESTIVAL_MAINSCREEN_POINT_DAILY_POINT_REWARD"), this.translate(".RewardContainer .id-accumulate .id-gaugeName", "MINIFESTIVAL_MAINSCREEN_POINT_STACK_POINT_REWARD"), this.tooltipBinder = this.addChildBinder(".id-tooltipConatiner", l.FestivalTooltipBinder), this.translate(".id-detailInfoContainer .id-title .id-textField", "FESTIVAL_CALENDER_INFORMATION"), this.translate(".id-detailInfoContainer .id-rewardTitle .id-textField", "MINIFESTIVAL_MAINSCREEN_POINT_REWARD")
            }, t.prototype.onDetach = function() {
                r.debug("FestivalScheduleBinder:: onFaceReady")
            }, t.prototype.onAddedToScene = function() {
                r.debug("FestivalScheduleBinder:: onAddedToScene")
            }, t.prototype.update = function(e) {
                this.reduxProps.view && e.view.schedulePopup !== this.reduxProps.view.schedulePopup && (e.view.schedulePopup ? (this.stage.visible = !0, this.gotoAndPlay(this.face, "in"), this.resetCalendar(), this.selectedFestival = e.view.festivalId ? this.festivalService.getFestival(e.view.festivalId) : null, this.bindTabButtons(e.data), this.drawCalander(e.data), this.drawInfo(e.data), this.setupTitle()) : this.gotoAndPlay(this.face, "out")), e.view.schedulePopup && this.tooltipBinder.setProps(e.tooltip)
            }, t.prototype.prepareTabButtons = function() {
                this.hasSize(".id-festivalTabList", !0), this.tabButtons = this.addChildBinder(".id-tabButton", s.CollectionBinder, {
                    instanceBinder: v
                })
            }, t.prototype.bindTabButtons = function(e) {
                var t = this,
                    i = this.festivalService.getViewFestivals(!0),
                    n = _.map(i, function(i, n) {
                        return t.selectedFestival || (t.selectedFestival = i), {
                            label: i.view.name,
                            selected: t.selectedFestival.id === i.id,
                            image: i.view.imgUrl,
                            onClick: function() {
                                t.selectedFestival = i, t.resetCalendar(), t.drawCalander(e), t.drawInfo(e), t.setupTitle(), t.bindTabButtons(e)
                            }
                        }
                    });
                this.tabButtons.applyCollection(n)
            }, t.prototype.resetCalendar = function() {
                this.selectedCalendar = this.serverTimeService.time, this.selectedDate = d(this.selectedCalendar).startOf("day").toDate()
            }, t.prototype.drawCalander = function(e) {
                var t = this;
                if (e) {
                    var i = {
                        info: this.selectedFestival,
                        month: this.selectedCalendar,
                        date: this.selectedDate,
                        onClick: function(i) {
                            return t.drawInfo(e, i)
                        }
                    };
                    this.days.setProps(i), this.setupChangeMonthButtons()
                }
            }, t.prototype.setupTitle = function() {
                var e = this.selectedFestival,
                    t = this.festivalService.getCurrentMiniFestival(e.id);
                this.titleBinder.setProps({
                    festival: e,
                    miniFestival: t
                })
            }, t.prototype.drawInfo = function(e, t) {
                var i = ["SUNDAY", "MONDAY", "TUESDAY", "WEDSDAY", "THUSDAY", "FRIDAY", "SATURDAY"];
                t || (t = d(this.serverTimeService.time).startOf("day").toDate()), this.selectedDate = t, this.gotoAndPlay(".id-detailInfoContainer", "in"), this.bindHtml(".id-dateNum .id-textField", d(t).format("D")), this.translate(".id-week .id-textField", "FESTIVAL_CALENDAR_FESTIVAL_SCHEDULE_SELECTION_REWARD_" + i[d(t).day()]), this.setScheduleString(this.selectedFestival, t), d(t).isSameOrAfter(this.selectedFestival.startAt, "day") && d(t).isSameOrBefore(this.selectedFestival.endAt, "day") ? this.getDailyMiniFestival(t) ? (this.gotoAndStop(".RewardContainer", "on"), this.setDailyReward(e.festivalPlayers, t), this.setAccumReward(e, t)) : (this.gotoAndStop(".RewardContainer", "accum"), this.setAccumReward(e, t)) : this.gotoAndStop(".RewardContainer", "off")
            }, t.prototype.onChangeCalendar = function(e) {
                this.selectedCalendar = d(this.selectedCalendar).add(e, "month").toDate(), this.drawCalander(this.reduxProps.data)
            }, t.prototype.setupChangeMonthButtons = function() {
                var e = d(this.selectedCalendar);
                this.bindHtml(".id-monthStepper .id-monthName", e.format("Y.M"));
                var t = this.getFace(".id-monthStepper .id-left"),
                    i = Math.min(d(this.selectedFestival.startAt).month(), d(this.serverTimeService.time).month());
                this.enableButton(t, i < e.month());
                var n = this.getFace(".id-monthStepper .id-right");
                this.enableButton(n, d(this.selectedFestival.endAt).isAfter(e, "month"))
            }, t.prototype.setScheduleString = function(e, t) {
                var i = this.getDailyMiniFestival(t);
                this.gotoAndStop(".id-schedule", i ? "on" : "off"), i && this.bindText(".id-schedule .id-date .id-textField", d(i.startAt).format("HH:mm") + " - " + d(i.endAt).format("HH:mm"));
                var n = d(t).endOf("day").diff(e.startAt, "day");
                n >= 0 && this.template(".id-schedule .id-order .id-textField", "MINIFESTIVAL_MAINSCREEN_SCHEDULE_PERDAY", {
                    day: n + 1
                })
            }, t.prototype.getDailyMiniFestival = function(e) {
                return _.find(this.selectedFestival.miniFestivals, function(t) {
                    return d(t.startAt).isSame(e, "day")
                })
            }, t.prototype.setDailyReward = function(e, t) {
                var i = this.getDailyMiniFestival(t),
                    n = this.getDailyFP(e, t, i),
                    r = this.getRewardInfo(i.rewardSteps, n);
                this.setRewards(n, r, "day"), this.createTooltipEvent("day", this.selectedFestival.id, i.id)
            }, t.prototype.getDailyFP = function(e, t, i) {
                var n = this,
                    r = _.find(e, function(e) {
                        return e.fid === n.selectedFestival.id
                    });
                if (!r) return 0;
                var o = 0;
                return _.forEach(_.filter(r.miniFestivals, function(e) {
                    return i.id === e.miniId
                }), function(e) {
                    o += e.point
                }), o
            }, t.prototype.setAccumReward = function(e, t) {
                var i = this.getAccumFP(e, t),
                    n = this.getRewardInfo(this.selectedFestival.rewardSteps, i);
                this.setRewards(i, n, "accumulate"), this.createTooltipEvent("accumulate", this.selectedFestival.id, "")
            }, t.prototype.getAccumFP = function(e, t) {
                var i = this,
                    n = _.find(e.festivalPlayers, function(e) {
                        return e.fid === i.selectedFestival.id
                    });
                if (!n) return 0;
                var r = 0;
                return _.forEach(n.miniFestivals, function(e) {
                    var n = _.find(i.selectedFestival.miniFestivals, function(t) {
                        return t.id === e.miniId
                    });
                    n && d(t).isSameOrAfter(n.startAt, "day") && (r += e.point)
                }), r
            }, t.prototype.getRewardInfo = function(e, t) {
                for (var i = {
                        point: 0,
                        rewards: []
                    }, n = 0; n < e.length - 1; n++) {
                    if (e[n].point > t) return [i, e[n]];
                    i = e[n]
                }
                return [i, e[e.length - 1]]
            }, t.prototype.setRewards = function(e, t, i) {
                var n = this.$filter("translate")("NAV_GAME_MULTIPLAY_FESTIVAL_FP");
                this.gotoAndStop(".RewardContainer .id-" + i + " .id-gaugeNum", i), this.bindHtml(".RewardContainer .id-" + i + " .id-gaugeNum .id-" + i + " .id-textField", a.default.toMoney(e) + " " + n), this.bindHtml(".RewardContainer .id-" + i + " .id-gaugeMin .id-textField", a.default.toMoney(t[0].point) + " " + n);
                var r = this.getFace(".RewardContainer .id-" + i + " .id-iconBackButton .id-rewardItemContainer");
                this.gotoAndStop(r, e >= t[1].point ? "done" : "reward"), this.bindHtml(".RewardContainer .id-" + i + " .id-gaugeMax .id-textField", a.default.toMoney(t[1].point) + " " + n), this.drawExternalImage(r.$(".id-externalImage"), this.$filter("itemCardImg")(t[1].rewards[0].type, t[1].rewards[0].code)), this.festivalService.setupRewardGauge(this.getFace(".RewardContainer .id-" + i + " .id-gaugeIndicator"), t[0].point, e, t[1].point)
            }, t.prototype.mapStateToProps = function(e) {
                return e.festival
            }, t.prototype.createTooltipEvent = function(e, t, i) {
                var n = this,
                    r = this.getFace(".RewardContainer .id-" + e + " .id-iconBackButton");
                this.on(r, c.MouseEventEx.MOUSE_OVER, function(a) {
                    var s = {
                        type: e,
                        festivalId: t,
                        miniFestivalId: i
                    };
                    n.dispatch(o.showTooltip(r, "rewardList", s))
                }), this.on(r, c.MouseEventEx.MOUSE_OUT, function() {
                    n.dispatch(o.hideTooltip())
                })
            }, t
        }(s.StageBinder);
    n.__decorate([s.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([s.autowired("serverTimeService")], p.prototype, "serverTimeService", void 0), n.__decorate([s.autowired("festivalService")], p.prototype, "festivalService", void 0), t.FestivalCalendarBinder = p;
    var h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(this.face, !0), this.itemListBinder = this.addChildBinder(".id-dayboxButton", s.CollectionBinder, {
                    instanceBinder: f
                })
            }, t.prototype.update = function(e) {
                for (var t = this, i = e.month, n = e.date, r = e.info, o = [], a = d(i).locale("ko").startOf("months").startOf("week"), s = 0; s < 42; s++) {
                    var c = a.toDate(),
                        l = !!n && d(c).isSame(n, "day");
                    o.push({
                        date: c,
                        info: r,
                        selected: l,
                        isThisMonth: a.isSame(i, "month"),
                        onClick: function(e) {
                            return t.onClickItem(e)
                        }
                    }), a.add(1, "days")
                }
                this.itemListBinder.applyCollection(o)
            }, t.prototype.onClickItem = function(e) {
                this.props.onClick(e), this.update(n.__assign({}, this.props, {
                    date: e
                }))
            }, t
        }(s.Binder),
        f = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                this.hasSize(this.face, !0), this.hasSize(".id-box", !0), this.on(this.face, c.MouseEventEx.CLICK, function() {
                    return t.onClickDaybox()
                })
            }, t.prototype.update = function(e) {
                var t = e.date,
                    i = e.info,
                    n = e.isThisMonth,
                    r = this.serverTimeService.time,
                    o = this.getEventState(t, i.startAt, i.endAt),
                    a = d(t).isSame(r, "day"),
                    s = d(i.startAt).isSameOrBefore(r, "day");
                if (this.bindHtmlAll(".id-date .id-textField", d(t).format("D")), this.gotoAndStop(".id-date", a ? "today" : n ? "current" : "notCurrent"), this.gotoAndStop(".id-box", n ? "current" : "notCurrent"), this.gotoAndStop(".id-today", a ? "on" : "off"), "none" !== o) {
                    var c = _.find(i.miniFestivals, function(e) {
                        return d(t).isSame(e.startAt, "day")
                    });
                    this.visible(".id-event", !!c), this.gotoAndStop(".id-event", o), this.gotoAndStop(".id-event .id-" + o, s ? d(t).endOf("day").isAfter(r) ? "on" : "past" : "off")
                } else this.visible(".id-event", !1);
                this.selectButton(this.face, e.selected), e.selected ? this.face.setCustomStyle({
                    "z-index": "1"
                }) : this.face.setCustomStyle({
                    "z-index": "2"
                })
            }, t.prototype.onClickDaybox = function() {
                this.props.selected || this.props.onClick(this.props.date)
            }, t.prototype.getEventState = function(e, t, i) {
                return d(e).isSame(t, "day") ? "start" : d(e).isSame(i, "day") ? "finish" : d(e).isBetween(t, i) ? "proceed" : "none"
            }, t
        }(s.Binder);
    n.__decorate([s.autowired("serverTimeService")], f.prototype, "serverTimeService", void 0);
    var v = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            this.hasSize(this.face, !0), this.face.setCustomStyle({
                position: "relative",
                display: "inline-block"
            }), this.on(this.face, c.MouseEventEx.CLICK, e.onClick)
        }, t.prototype.update = function(e) {
            this.bindText(this.face, e.label), this.face.selected = e.selected, this.drawExternalImage(".id-externalImage", this.$filter("cdn")("festival/" + e.image + "_banner.png"))
        }, t
    }(s.Binder);
    n.__decorate([s.autowired("$filter")], v.prototype, "$filter", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(8),
        a = i(4),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.visible(this.face, !1), this.gameModeInfoTooltip = this.getFace(".id-gameModeInfoTooltip"), this.rewardListTooltip = this.getFace(".id-festivalRewardListTooltip"), this.vehicleTooltip = this.getFace(".id-festivalXVehicleTooltip"), this.vehicleTooltip && (this.translate(this.vehicleTooltip.$(".id-title .id-conditionLabel"), "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_LIMITED_CAR"), this.translate(this.vehicleTooltip.$(".id-title .id-myVehicleLabel"), "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_LIMITED_OWN_CAR"), this.translate(this.vehicleTooltip.$(".id-title .id-ovrLabel"), "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_OVR"), this.translate(this.vehicleTooltip.$(".id-title .id-reinforceLabel"), "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_GRADE"), this.translate(this.vehicleTooltip.$(".id-title .id-vehicleLabel"), "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_MANUFACTURE"), this.translate(this.vehicleTooltip.$(".id-title .id-vehicleLabel"), "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_MANUFACTURE"), this.translate(this.vehicleTooltip.$(".id-experience .id-experienceLabel"), "EXPVEHICLE_REMAININGCOUNT")), this.gameModeInfoTooltip && this.hasSize(this.gameModeInfoTooltip.$(".Body"), !0), this.rewardItemList = this.addChildBinder(this.rewardListTooltip.$(".id-rewardListContainer"), r.CollectionBinder, {
                    instanceBinder: c
                }), this.hasSize(this.rewardListTooltip, !0), this.hasSize(this.rewardListTooltip.$(".Body"), !0), this.isShow = !1
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.isShow;
                if (this.isShow || i) {
                    this.isShow = i;
                    var n, r, a, s = this.getTooltipPosition(e.target);
                    switch (e.type) {
                        case "gameModeInfo":
                            n = this.gameModeInfoTooltip, this.bindGameModeInfo(e.info), r = {
                                x: s.left + s.width - 10,
                                y: s.top
                            };
                            break;
                        case "rewardList":
                            n = this.rewardListTooltip, this.bindRewardList(e.info), r = {
                                x: s.left - n.width,
                                y: s.top
                            };
                            break;
                        case "vehicleInfo":
                            n = this.vehicleTooltip, a = e.info, this.bindVehicleInfo(a);
                            r = "right" === a.side ? {
                                x: s.left + s.width - 18,
                                y: s.top - n.height
                            } : {
                                x: s.left - n.width + 18,
                                y: s.top - n.height
                            };
                            var c = this.vehicleTooltip.$(".Body"),
                                d = c.height,
                                l = 0;
                            _.isUndefined(a.targetVehicle.remainingCount) || (d += 20, l = 20, r.y -= 40), c.scaleYMultiplier = d / c.height, c.setCustomStyle({
                                "margin-top": l + "px"
                            })
                    }
                    this.gotoAndPlay(n, i ? "in" : "out"), i ? (n.x = r.x, n.y = r.y, this.visible(this.face, !0)) : this.once(n, o.EventEx.STOP, function() {
                        "out" === n.currentLabel && t.visible(t.face, !1)
                    })
                }
            }, t.prototype.getTooltipPosition = function(e) {
                return e = e.currentTarget || e, e = e.htmlElement || e, a.default.calcGlobalOffset($(e))
            }, t.prototype.bindGameModeInfo = function(e) {
                if (this.isShow) {
                    var t = e.gameMode,
                        i = this.gameModeService.getCoreModeFromGameMode(t);
                    this.translate(this.gameModeInfoTooltip.$(".id-title"), this.gameModeService.getGameModeLocaleString(t)), this.translate(this.gameModeInfoTooltip.$(".id-description"), "FRIENDLYMATCH_MODESELECT_" + i + "MODE_DESC")
                }
            }, t.prototype.bindRewardList = function(e) {
                if (this.isShow) {
                    this.translate(this.rewardListTooltip.$(".id-title"), "day" === e.type ? "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_DAILY_REWARD" : "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_TOTAL_REWARD");
                    var t = this.festivalService.getFestival(e.festivalId),
                        i = this.festivalService.getMiniFestival(e.festivalId, e.miniFestivalId),
                        r = this.festivalService.getFestivalPlayer(e.festivalId),
                        o = this.festivalService.getMiniFestivalPlayer(e.festivalId, e.miniFestivalId),
                        a = "day" === e.type ? i.rewardSteps : t.rewardSteps,
                        s = "day" === e.type ? o ? o.rewardStep : -1 : r ? r.rewardStep : -1,
                        c = a.length - 1,
                        d = Math.min(s + 1, c),
                        l = Math.max(0, d - 2),
                        u = Math.min(d + 1, c),
                        p = Math.max(0, Math.min(l, u - 3)),
                        h = Math.min(Math.max(l + 3, u), c),
                        f = _.map(a, function(e, t) {
                            return {
                                rewardStep: e,
                                step: t,
                                currentStep: d,
                                completeStep: s
                            }
                        }).filter(function(e, t) {
                            return _.inRange(e.step, p, h + 1)
                        }).map(function(e, t) {
                            return n.__assign({}, e, {
                                index: t
                            })
                        });
                    this.rewardItemList.applyCollection(f)
                }
            }, t.prototype.bindVehicleInfo = function(e) {
                if (this.isShow) {
                    var t = e.targetVehicle,
                        i = this.festivalService.selectedMiniFestival;
                    this.bindText(this.vehicleTooltip.$(".id-condition .id-ovr"), i.conditions.minOvr + "-" + i.conditions.maxOvr), this.gotoAndStop(this.vehicleTooltip.$(".id-condition .id-min"), "grade" + i.conditions.minGrade), this.gotoAndStop(this.vehicleTooltip.$(".id-condition .id-max"), "grade" + i.conditions.maxGrade);
                    var n = _.inRange(t.ovr, i.conditions.minOvr, i.conditions.maxOvr + 1);
                    this.bindText(this.vehicleTooltip.$(".id-confirmContainer .OvrContainer .id-ovr"), t.ovr), this.gotoAndStop(this.vehicleTooltip.$(".id-confirmContainer .id-ovr"), n ? "on" : "off");
                    var r = _.inRange(t.grade, i.conditions.minGrade, i.conditions.maxGrade + 1);
                    this.gotoAndStop(this.vehicleTooltip.$(".id-confirmContainer .id-reinforce .id-reinforce"), "grade" + t.grade), this.gotoAndStop(this.vehicleTooltip.$(".id-confirmContainer .id-reinforce"), r ? "on" : "off");
                    var o = _.some(i.conditions.vcodes, function(e) {
                        return e === t.code
                    });
                    this.translate(this.vehicleTooltip.$(".id-confirmContainer .id-vehicle .id-possesion"), o ? "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_LIMITED_CAR_ALLOW" : "MINIFESTIVAL_CAR_CHANGE_SELECTION_TOOLTIP_LIMITED_CAR_REJECT"), this.gotoAndStop(this.vehicleTooltip.$(".id-confirmContainer .id-vehicle"), o ? "on" : "off"), this.bindText(this.vehicleTooltip.$(".id-experience .id-textField"), t.remainingCount), this.visible(this.vehicleTooltip.$(".id-experience"), !_.isUndefined(t.remainingCount))
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("gameModeService")], s.prototype, "gameModeService", void 0), n.__decorate([r.autowired("festivalService")], s.prototype, "festivalService", void 0), t.FestivalTooltipBinder = s;
    var c = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.hasSize(this.face, !0)
        }, t.prototype.update = function(e) {
            var t = this.$filter("translate"),
                i = e.rewardStep,
                n = e.step,
                r = e.currentStep,
                o = e.completeStep,
                s = e.index,
                c = n <= o ? "past" : n === r ? "now" : "future";
            this.gotoAndStop(this.face, c), this.gotoAndStop(".id-back", s % 2 ? "even" : "odd");
            var d = i.rewards[0],
                l = d.code,
                u = d.type,
                p = d.count,
                h = d.opts,
                f = this.$filter("rewardName")(u, l, p, h).replace(/\<br\>/gi, " ");
            this.bindText(".id-fp", "" + a.default.toMoney(i.point) + t("NAV_GAME_MULTIPLAY_FESTIVAL_FP")), this.bindText(".id-reward", f + " " + this.$filter("template")({
                count: p
            }, "MINIFESTIVAL_MAINSCREEN_TOOLTIP_COUNT_AMOUNT_REWARD"))
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(198),
        a = i(117),
        s = i(5),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(".id-dateContainer", !0), this.hasSize(".id-dateContainer .id-date *", !1)
            }, t.prototype.updateContainer = function(e) {
                var t, i = e.festival,
                    n = e.miniFestival,
                    r = _.indexOf(i.miniFestivals, n) + 1,
                    o = this.festivalService.getFestivalStatus(i.id),
                    c = "default";
                switch (o) {
                    case a.FestivalStatus.TOBEOPEN:
                        t = "MINIFESTIVAL_MAINSCREEN_EXPECTED_OPEN";
                        break;
                    case a.FestivalStatus.UPCOMING:
                        t = "MINIFESTIVAL_MAINSCREEN_ONGOING_EXPECTED";
                        break;
                    case a.FestivalStatus.PROCEED:
                        t = "MINIFESTIVAL_MAINSCREEN_ONGOING", c = "proceed"
                }
                var d = s(i.startAt),
                    l = s(i.endAt),
                    u = s(n.startAt),
                    p = s(n.endAt),
                    h = d.format("Y.M.D") + " - " + l.format("Y.M.D") + " / <span class='" + c + "'>" + u.format("HH:mm") + " - " + p.format("HH:mm") + "</span>",
                    f = this.$filter("template")({
                        day: r
                    }, "MINIFESTIVAL_MAINSCREEN_SCHEDULE_PERDAY");
                this.translate(".id-tagLabel", t), this.bindText(".id-titleLabel", n.view.name), this.bindHtml(".id-dateContainer .id-date", h), this.bindHtml(".id-dateContainer .id-order", "<span class='" + c + "'>" + f + "</span>")
            }, t
        }(o.FestivalContainerBaseBinder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("festivalService")], c.prototype, "festivalService", void 0), t.FestivalTitleBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1549),
        o = i(1550),
        a = i(1551),
        s = i(658),
        c = i(1552),
        d = i(1553),
        l = i(1555),
        u = i(1556),
        p = i(1),
        h = i(12),
        f = i(2),
        v = i(7),
        m = i(5),
        g = i(65),
        y = i(53),
        S = i(1557),
        E = i(657),
        T = i(6),
        C = i(8),
        b = i(1559),
        P = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.selectPanelBinder = this.addChildBinder(".id-topPannel", d.FestivalSelectPanelBinder), this.titleBinder = this.addChildBinder(".id-titleContainer", s.FestivalTitleBinder), this.gameModeBinder = this.addChildBinder(".id-gameModeInfoContainer", o.FestivalGameModeBinder), this.conditionInfoBinder = this.addChildBinder(".id-conditionInfoContainer", r.FestivalConditionInfoBinder), this.rewardBinder = this.addChildBinder(".id-rewardInfoContainer", a.FestivalRewardBinder), this.vehicleBinder = this.addChildBinder(this.face, S.FestivalVehicleBinder), this.changeVehicleBinder = this.addChildBinder(this.face, c.FestivalChangeVehicleBinder), this.pursuitTechBinder = this.addChildBinder(this.face, b.FestivalPursuitTechBinder), this.matchBinder = this.addChildBinder(this.face, l.FestivalMatchBinder), this.matchInfoBinder = this.addChildBinder(".id-participationConfirm", u.FestivalMatchInfoBinder), this.tooltipBinder = this.addChildBinder(".id-inScreenTooltip", E.FestivalTooltipBinder), this.translate(".id-change", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_CAR_CHANGE"), this.onClickSafe(".id-conditionInfoContainer .id-view", this.showConditionVehicles.bind(this)), this.on(".id-change", f.MouseEventEx.CLICK, this.onChangeVehicle.bind(this)), this.dispatch(y.hideNav("festival")), this.on(".id-calendar", f.MouseEventEx.CLICK, function() {
                    e.dispatch(g.showSchedule())
                })
            }, t.prototype.onAddedToScene = function() {
                this.gotoAndPlay(this.face, "in")
            }, t.prototype.onDetach = function() {
                this.dispatch(y.showNav("festival"))
            }, t.prototype.update = function(e) {
                var t = e.festivalState,
                    i = t.view.festivalId;
                if (!i) return void this.goBackToEntry();
                if (this.festival = this.festivalService.getFestival(i), this.miniFestival = this.festivalService.getCurrentMiniFestival(i, !0), !this.miniFestival || m(this.miniFestival.endAt).isBefore(this.festivalService.serverTime)) return void this.goBackToEntry();
                i !== this.festivalId && (v.info("Select Festival : " + i), _.isUndefined(this.festivalId) || (this.gotoAndPlay(".Diagonal", "in"), [this.titleBinder, this.gameModeBinder, this.conditionInfoBinder, this.rewardBinder, this.matchInfoBinder].forEach(function(e) {
                    return e.startFade()
                })), this.festivalService.checkRewardLobby(i)), this.festivalId = i;
                var n = t.view.isMatching;
                this.enableButton(".id-calendar", !n), this.enableButton(".id-change", !n), this.enableButton(".id-conditionInfoContainer .id-view", !n), this.selectPanelBinder.setProps(e), this.titleBinder.setProps({
                    festival: this.festival,
                    miniFestival: this.miniFestival
                }), this.gameModeBinder.setProps(this.miniFestival), this.conditionInfoBinder.setProps(this.miniFestival), this.rewardBinder.setProps({
                    festival: this.festival,
                    miniFestival: this.miniFestival
                }), this.pursuitTechBinder.setProps(this.miniFestival), this.matchBinder.setProps({
                    festival: this.festival,
                    miniFestival: this.miniFestival,
                    isMatching: n
                }), this.matchInfoBinder.setProps({
                    festival: this.festival,
                    miniFestival: this.miniFestival
                }), !t.view.schedulePopup && this.tooltipBinder.setProps(e.festivalState.tooltip)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    vehicleState: e.vehicle,
                    festivalState: e.festival
                }
            }, t.prototype.showConditionVehicles = function() {
                var e = this;
                return this.gotoAndPlay(this.face, "festivalVehicle_in"), this.vehicleBinder.setProps(this.miniFestival), this.externalService.camera.festivalVehicles(18), new T(function(t) {
                    e.once(e.face, C.EventEx.STOP, function() {
                        t()
                    })
                })
            }, t.prototype.onChangeVehicle = function() {
                var e = this,
                    t = function() {
                        var t = h.getAllVehicles();
                        _.map(t, function(t) {
                            return e.miniFestival.conditions.vcodes.indexOf(t.code) > -1 ? t.id : void 0
                        }).filter(function(e) {
                            return !_.isUndefined(e)
                        });
                        e.gotoAndPlay(e.face, "changeVehicle_in", !0), e.changeVehicleBinder.setProps({
                            vehicles: t,
                            recentVid: h.getRecentVehicle().id,
                            festival: e.festival,
                            miniFestival: e.miniFestival
                        }), e.externalService.beFestivalShowChangeVehicleUi(!0)
                    };
                this.publisherService.isNeedUpdateIgrVehicles() ? this.vehicleService.fetchIgrVehicles().finally(function() {
                    return t()
                }) : t()
            }, t.prototype.goBackToEntry = function() {
                var e = this;
                setTimeout(function() {
                    e.stateService.go("root.menu.ConditionLimitedMatch")
                }, 1)
            }, t
        }(p.StageBinder);
    n.__decorate([p.autowired("stateService")], P.prototype, "stateService", void 0), n.__decorate([p.autowired("festivalService")], P.prototype, "festivalService", void 0), n.__decorate([p.autowired("externalService")], P.prototype, "externalService", void 0), n.__decorate([p.autowired("vehicleService")], P.prototype, "vehicleService", void 0), n.__decorate([p.autowired("publisherService")], P.prototype, "publisherService", void 0), t.FestivalLobbyBinder = P
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(27),
        a = i(50),
        s = i(2),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.resultItem = this.addChildBinder(this.face, o.ItemCardBinder), this.face.on(s.MouseEventEx.MOUSE_OVER, function() {
                    var t = e.props,
                        i = t.code,
                        n = t.grade,
                        r = _.assign({}, e.vehicleDataService.createRefinedVehicle(i, n));
                    e.tooltipService.show(e.face, "horizontal", a.TooltipType.Vehicle, r, {
                        marginTop: 25,
                        marginLeft: -16
                    })
                }), this.face.on(s.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                })
            }, t.prototype.update = function(e) {
                var t = e.code,
                    i = e.grade,
                    n = e.price;
                this.resultItem.setProps({
                    info: {
                        code: t,
                        grade: i,
                        price: n,
                        type: "VEHICLE",
                        opts: {
                            VEHICLE: {
                                grade: i
                            }
                        }
                    }
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("vehicleDataService")], c.prototype, "vehicleDataService", void 0), n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.VehicleCardBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(2),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = this.getFace("> .id-title");
                t.hasSize = !0, this.translate(t, "TIMETRIAL_TRACKINFO_MEDAL");
                var i = this.getFace(".id-tooltipButton");
                i.hasSize = !0, this.on(i, a.MouseEventEx.MOUSE_OVER, function() {
                    e.gotoAndPlay(".id-currentMedalTooltip", "over")
                }), this.on(i, a.MouseEventEx.MOUSE_OUT, function() {
                    e.gotoAndPlay(".id-currentMedalTooltip", "out")
                }), this.translateSubtree(".id-currentMedalTooltip", {
                    title: "TIMETRIAL_MEDALREWARD_TOOLTIP_TITLE",
                    description: "TIMETRIAL_MEDALREWARD_TOOLTIP_DESC",
                    keyword: "TIMETRIAL_MEDALREWARD_TOOLTIP_NOTICE",
                    subTitle: "TIMETRIAL_MEDALREWARD_TOOLTIP_SUBTITLE",
                    title1: "TIMETRIAL_MEDALREWARD_TOOLTIP_TOP10",
                    itemName1: "TIMETRIAL_MEDALREWARD_TOOLTIP_PLATINUMMEDAL"
                }), this.translate(".id-top10TextLabel .id-top10", "TIMETRIAL_SELECTGHOST_MISSIONINFO_TOP10_01"), this.translate(".id-top10TextLabel .id-textField", "TIMETRIAL_SELECTGHOST_MISSIONINFO_TOP10_02")
            }, t.prototype.bindProgress = function(e) {
                var t = this,
                    i = e.medalLaptimes,
                    n = e.selectedTrack,
                    r = e.playerInfo,
                    a = e.platinumTrackCodes;
                if (_.each(i[n], function(e, i) {
                        var n = o.default.formatLapTime(e);
                        t.bindText(".id-progressiveContainer .id-laptime" + i, n), t.bindText(".id-progressiveContainer .id-laptimeDone" + i, n)
                    }), _.isUndefined(r.trackRecords) || _.isUndefined(r.trackRecords[n])) this.gotoAndPlay(".id-progressiveContainer", "default"), this.gotoAndPlay(".id-progressiveContainer .MissionPlatinumIcon", "default");
                else {
                    var s = r.trackRecords[n].medalStep;
                    _.isUndefined(s) || s < 1 ? this.gotoAndPlay(".id-progressiveContainer", "default") : this.gotoAndPlay(".id-progressiveContainer", "get" + s);
                    a && a.indexOf(n) >= 0 ? this.gotoAndPlay(".id-progressiveContainer .MissionPlatinumIcon", "get") : this.gotoAndPlay(".id-progressiveContainer .MissionPlatinumIcon", "default")
                }
            }, t.prototype.bindReward = function(e) {
                var t = this,
                    i = this.$filter("translate"),
                    n = this.service.medalRewardsByTrack(e.selectedTrack);
                _.each(n, function(e, n) {
                    var r = i("ITEM_" + e.code + "_NAME");
                    t.bindText(".id-currentMedalTooltip .id-itemName" + (5 - Number(n)), r + " x " + e.count)
                })
            }, t.prototype.update = function(e) {
                this.trackCode !== e.selectedTrack && (this.bindProgress(e), this.bindReward(e), this.trackCode = e.selectedTrack)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([r.autowired("timetrialService")], s.prototype, "service", void 0), t.MissionInfo = s
}, function(e, t, i) {
    "use strict";

    function n(e, t, i) {
        var n = "id " + t.code + " is not exist.",
            r = e("translate")("HUD_OPENWORLD_" + a.GameMode[i]),
            o = e("translate")("MISSION_NAME_" + t.code);
        return t && (n = i === a.GameMode.MULTIRACE ? o : e("template")({
            difficulty: e("translate")("TRACK_DIFFICULTY_0" + t.difficulty),
            name: o
        }, "HUD_OPENWORLD_MISSIONNAME")), {
            missionName: n,
            mode: r
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(1),
        a = i(118),
        s = i(9),
        c = i(229),
        d = i(120),
        l = i(332),
        u = i(110),
        p = i(228),
        h = i(663),
        f = i(81);
    t.getMissionLabels = n;
    var v = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.modeStartInfoContainer = this.addChildBinder(".ModeStartInfoContainer", g), this.limitedInfo = this.addChildBinder(".id-limitedinfoContainer", h.LimitedInfoBinder), this.addManagedListener(this.externalService, s.CoreEvent.bePromptOnOpenworldRace, function(t, i, n) {
                log.debug("core >> bePromptOnOpenworldRace", t, i, n), e.retryReadyMission(3, t, i, n)
            }), this.addManagedListener(this.externalService, s.CoreEvent.bePromptBlockedChanged, function(t) {
                log.debug("core >> bePromptBlockedChanged", t), e.dispatch(c.block(t))
            }), this.addManagedListener(this.externalService, s.CoreEvent.bePromptOffOpenworldRace, function() {
                log.debug("core >> bePromptOffOpenworldRace"), e.clearTimerId(), e.dispatch(c.clear())
            }), this.addManagedListener(this.externalService, s.CoreEvent.beAcceptOpenworldRace, function(t, i, n) {
                log.debug("core >> beAcceptOpenworldRace", t, i, n), e.clearTimerId();
                var r;
                if (n) {
                    var o = e.playerSnippetService.getSnippet(n);
                    r = e.$filter("template")({
                        value: o.level,
                        name: o.name
                    }, "HUD_OPENWORLD_RACESTART_PLAYERNAME")
                }
                e.dispatch(c.accept({
                    missionId: t,
                    gameMode: i,
                    host: r
                })), e.hudService.emit("accept-openworld-mission")
            })
        }, t.prototype.onAddedToScene = function() {
            var e = this;
            this.firstAttempt = p.isFirstAttempt(), this.hudService.once("intro", function() {
                return e.gotoAndPlay(".CONTAINER", "intro")
            })
        }, t.prototype.shouldUpdate = function(e) {
            var t = e.status,
                i = e.isBlocked;
            return this.reduxProps.status !== t || this.reduxProps.isBlocked !== i
        }, t.prototype.update = function(e) {
            var t = e.missionId,
                i = e.gameMode,
                r = e.status,
                o = e.isBlocked,
                a = e.limitedMission,
                s = e.host;
            if (!t || r >= 2) return this.gotoAndPlay(this.CENTERTOP, "out", !0);
            var c = this.openworldMissionService.getMission(t),
                d = n(this.$filter, c, i),
                l = d.missionName,
                p = d.mode;
            this.modeStartInfoContainer.setProps({
                gameMode: i,
                mission: c,
                mode: p,
                missionName: l,
                isBlocked: o,
                host: s
            }), this.limitedInfo.setProps({
                info: a.progress[t]
            });
            var h = this.firstAttempt && t === u.TUTORIAL_START_MISSION_CODE;
            0 === r ? this.gotoAndPlay(".ModeStartInfoContainer", h ? "tutorial" : 0) : 1 === r && (this.gotoAndPlay(".ModeStartInfoContainer", h ? "tutCount" : "count"), this.firstAttempt = !1), this.gotoAndPlay(this.CENTERTOP, "in", !0)
        }, t.prototype.mapStateToProps = function(e) {
            return e.mission
        }, t.prototype.onDetach = function() {
            this.clearTimerId()
        }, t.prototype.clearTimerId = function() {
            this.timerId && (clearTimeout(this.timerId), this.timerId = void 0)
        }, t.prototype.retryReadyMission = function(e, t, i, n) {
            var r = this;
            if (e) {
                var o = this.storeState.mission.status;
                _.isUndefined(o) ? this.readyMission(t, i, n) : 3 === o && (this.clearTimerId(), this.timerId = setTimeout(function() {
                    return r.retryReadyMission(e - 1, t, i, n)
                }, 3e3))
            }
        }, t.prototype.readyMission = function(e, t, i) {
            this.dispatch(c.set({
                missionId: e,
                gameMode: t,
                isBlocked: i
            }))
        }, t
    }(o.StageBinder);
    r.__decorate([o.autowired("$filter")], v.prototype, "$filter", void 0), r.__decorate([o.autowired("hudService")], v.prototype, "hudService", void 0), r.__decorate([o.autowired("openworldMissionService")], v.prototype, "openworldMissionService", void 0), r.__decorate([o.autowired("externalService")], v.prototype, "externalService", void 0), r.__decorate([o.autowired("playerSnippetService")], v.prototype, "playerSnippetService", void 0), r.__decorate([o.select(".id-CENTERTOP")], v.prototype, "CENTERTOP", void 0), t.HudGameModeInfoBinder = v;
    var m = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            this.limitedReward = this.addChildBinder(".id-rewardInfoContainer1", l.RewardInfoContainer), this.defaultReward = this.addChildBinder(".id-rewardInfoContainer2", l.RewardInfoContainer)
        }, t.prototype.update = function(e) {
            var t = e.mission;
            if (this.visible(this.face, !!t), t) {
                var i = this.missionService.getReward(t, "gold");
                f.shallowEqual(this.rewards || {}, i) || (this.rewards = i, i.limited && this.limitedReward.setProps({
                    info: i.limited
                }), this.defaultReward.setProps({
                    info: i.default
                }))
            }
        }, t.prototype.playReward = function() {
            this.gotoAndPlay(this.face, this.rewards.limited ? "limited" : "default")
        }, t
    }(o.Binder);
    r.__decorate([o.autowired("openworldMissionService")], m.prototype, "missionService", void 0);
    var g = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.actionGuide = this.addChildBinder(".id-actionGuide", d.HudActionGuideBinder, {
                inputKey: "useItem2",
                showAlways: !0
            }), this.rewardContainer = this.addChildBinder(".id-rewardContainer", m), this.translate(this.cautionLabel, "HUD_OPENWORLD_MULTIRACE_NOTICE"), this.translate(".id-medalInfoLabel1", "HUD_OPENWORLD_SPECIALMISSIONREWARD"), this.face.on("rewardBranch", function() {
                return e.rewardContainer.playReward()
            })
        }, t.prototype.onAddedToScene = function() {
            this.hasSize(this.description, !0), this.hasSize(this.description.$(".id-textField"), !1), this.hasSize(this.description.$(".IconMC"), !0), this.hasSize(this.countMasterNameLabel, !0), this.hasSize(this.countMasterNameLabel.$(".id-textField"), !1)
        }, t.prototype.bindGameMode = function(e, t) {
            var i = e === a.GameMode.MULTIRACE ? "multi" : "single";
            this.gotoAndStopAll(".BackgroundBar, .MedalIconContainer, .id-descriptionContainer", i);
            var n = this.description.$(".IconMC");
            this.gotoAndStop(n, i + (t ? "Caution" : "") + "Icon")
        }, t.prototype.update = function(e) {
            var t = this,
                i = e.gameMode,
                n = e.mission,
                r = e.mode,
                o = e.missionName,
                s = e.isBlocked,
                c = e.host;
            this.bindGameMode(i, s), this.bindText(this.title, o), this.translate(this.countTitle, "HUD_OPENWORLD_" + a.GameMode[i] + "MISSION"), this.translate(this.countMasterNameLabel, c), this.bindText(this.countDescription, o), this.visible(this.countMasterNameLabel, i === a.GameMode.MULTIRACE), s ? (this.bindHtml(this.description, this.$filter("translate")(i === a.GameMode.MULTIRACE ? "HUD_OPENWORLD_MULTIRACE_CANTSTART" : "HUD_OPENWORLD_WAITDESC")), this.translate(this.keyInfo, "HUD_OPENWORLD_CANTSTART"), this.timer && clearTimeout(this.timer), this.actionGuide.hide()) : (this.bindHtml(this.description, r), this.translate(this.keyInfo, "HUD_OPENWORLD_STARTMISSIONBUTTON"), this.timer = setTimeout(function() {
                return t.actionGuide.guide()
            }, 1e3)), this.rewardContainer.setProps({
                mission: n
            });
            var d = "gold";
            this.gotoAndStop(this.medalIcon, d), this.translate(this.rewardLabel, i === a.GameMode.MULTIRACE ? "HUD_OPENWORLD_FINISHREWARD" : "HUD_OPENWORLD_" + d.toUpperCase() + "REWARD"), this.visible(this.medalIcon, i !== a.GameMode.MULTIRACE)
        }, t
    }(o.Binder);
    r.__decorate([o.autowired("$filter")], g.prototype, "$filter", void 0), r.__decorate([o.select(".id-titleLabel")], g.prototype, "title", void 0), r.__decorate([o.select(".id-descriptionContainer .DescriptionLabel")], g.prototype, "description", void 0), r.__decorate([o.select(".id-descriptionContainer .CautionLabel")], g.prototype, "cautionLabel", void 0), r.__decorate([o.select(".id-countTitleLabel")], g.prototype, "countTitle", void 0), r.__decorate([o.select(".id-countDescriptionLabel")], g.prototype, "countDescription", void 0), r.__decorate([o.select(".id-keyInfoLabel")], g.prototype, "keyInfo", void 0), r.__decorate([o.select(".id-medalInfoLabel2")], g.prototype, "rewardLabel", void 0), r.__decorate([o.select(".id-medalIconMC")], g.prototype, "medalIcon", void 0), r.__decorate([o.select(".id-countMasterNameLabel")], g.prototype, "countMasterNameLabel", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-titleLabel", "OPENWORLD_WORLDMAP_MISSIONDESC_SPECIAL")
            }, t.prototype.shouldUpdate = function(e) {
                return !e.info || this.props.info !== e.info
            }, t.prototype.update = function(e) {
                var t = e.info;
                if (!t) return this.visible(this.face, !1);
                var i = t.currentCount,
                    n = t.limitCount,
                    r = n - i;
                this.visible(this.face, r > 0), this.bindTextAll(this.count, r)
            }, t
        }(r.Binder);
    n.__decorate([r.select(".id-countLabel")], o.prototype, "count", void 0), t.LimitedInfoBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(29),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.$transitions.onStart({}, function(i) {
                        return t(), e.beforeExit()
                    });
                this.escListener = {
                    onEvent: function() {
                        return e.onEscKey()
                    }
                }, this.globalKeyService.pushListener(o.KeyboardMap.getKeyCode("ESCAPE"), this.escListener)
            }, t.prototype.onDetach = function() {
                this.globalKeyService.popListener(o.KeyboardMap.getKeyCode("ESCAPE"), this.escListener)
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("openworldService")], a.prototype, "openworldService", void 0), n.__decorate([r.autowired("globalKeyService")], a.prototype, "globalKeyService", void 0), n.__decorate([r.autowired("$transitions")], a.prototype, "$transitions", void 0), t.OpenworldPopupBase = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(666), i(718);
    var n = i(723);
    angular.module("edge", []), angular.module("face", []).factory("face", function() {
        return n.Face
    }), angular.module("edge.components", ["ngAnimate", "ngSanitize", "LocalStorageModule", "ui.router", "ui.preloadimage", "angular.filter"]), i(373), i(43), i(597), angular.module("edge.react", ["edge.components"]), angular.module("edge.app", ["edge.components", "edge.react", "face", "pascalprecht.translate", "ngCookies"]), i(1174), i(1654), i(1656), i(373), i(43), i(597)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = window,
        r = i(200);
    n.$ = n.jQuery = r, i(667), i(167), i(682);
    var o = i(202);
    i(334), i(705), i(707), i(709), i(710), i(712), i(714), i(715), i(717);
    var a = i(7);
    n.angular = o, n.log = a
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(719), i(720), i(721), i(722)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0);
    window._gsDefine("plugins.FlashPropsPlugin", ["plugins.TweenPlugin"], function(e) {
        function t(e, t, i, n) {
            for (var r = 0, o = e.filters.length; r < o; r++) n = new c(e, e.filters[r], t[r], i[r], n);
            return n
        }
        var i = function() {
                function e(e) {
                    this.next = e
                }
                return e
            }(),
            r = {},
            o = {
                textAttrs: "textAttributes"
            },
            a = function(e) {
                function t() {
                    return e.call(this, "flash") || this
                }
                return n.__extends(t, e), t.prototype._onInitTween = function(e, t, i) {
                    return this.target = e, this.rawTween = i, this.firstTween = this.parse(e, t), !0
                }, t.prototype.parse = function(e, t) {
                    for (var i, n = t._beginningValues || {}, a = 0, c = Object.keys(t); a < c.length; a++) {
                        var d = c[a];
                        if ("_" !== d[0]) {
                            var l = void 0 !== n[d] ? n[d] : e[d];
                            console.assert(void 0 !== l || "motionTween" === d || "symbolType" === d);
                            var u = t[d],
                                p = r[d];
                            p ? i = p(e, l, u, i) : (d = o[d] || d, i = new s(e, d, l, u, i))
                        }
                    }
                    return i
                }, t.prototype.setRatio = function(e) {
                    var t = this.target;
                    t.guide && (t.tweenStatus || (t.tweenStatus = {}), t.tweenStatus.ratio = e);
                    var i = this.firstTween;
                    if (1 !== e || this.rawTween._time !== this.rawTween._duration && 0 !== this.rawTween._time)
                        if (e || this.rawTween._time !== this.rawTween._duration && 0 !== this.rawTween._time || -1e-6 === this.rawTween._rawPrevTime)
                            for (; i;) i.setRatio(e), i = i.next;
                        else
                            for (; i;) i.setRatioBegin(), i = i.next;
                    else
                        for (; i;) i.setRatioEnd(), i = i.next
                }, t
            }(e);
        a.version = "0.1", a.API = 2;
        var s = function(e) {
                function t(t, i, n, r, o) {
                    var a = e.call(this, o) || this;
                    return a.target = t, a.name = i, a.changeValue = r - n, a.beginningValue = "motionTween" === i ? r : n, a.endingValue = r, a.noTween = "number" != typeof n, a
                }
                return n.__extends(t, e), t.prototype.setRatio = function(e) {
                    if (!this.noTween) {
                        var t = this.changeValue * e + this.beginningValue;
                        t < 1e-6 && t > -1e-6 && (t = 0), this.setValue(t)
                    }
                }, t.prototype.setRatioBegin = function() {
                    this.setValue(this.beginningValue)
                }, t.prototype.setRatioEnd = function() {
                    this.setValue(this.endingValue)
                }, t.prototype.setValue = function(e) {
                    var t = this,
                        i = t.target,
                        n = t.name;
                    i[n] = e, i.guide && (i.tweenStatus || (i.tweenStatus = {}), i.tweenStatus[n] = {
                        begin: this.beginningValue,
                        end: this.endingValue
                    })
                }, t
            }(i),
            c = function(e) {
                function t(t, i, n, r, o) {
                    var a = e.call(this, o) || this;
                    a.target = t, a.filter = i, a.begin = n, a.end = r, a.changeValues = [], a.beginningValues = [], a.endingValues = [];
                    for (var s = 0, c = Object.keys(r); s < c.length; s++) {
                        var d = c[s],
                            l = n[d],
                            u = r[d];
                        "number" != typeof l || "number" != typeof u ? a.changeValues.push(null) : a.changeValues.push(u - l), a.beginningValues.push(l), a.endingValues.push(u)
                    }
                    return a
                }
                return n.__extends(t, e), t.prototype.setRatio = function(e) {
                    var t = this,
                        i = t.beginningValues,
                        n = t.changeValues,
                        r = n.map(function(t, n) {
                            if ("number" != typeof t || "number" == typeof t && isNaN(t)) return i[n];
                            var r = t * e + i[n];
                            return r < 1e-6 && r > -1e-6 && (r = 0), r
                        });
                    this.setValue(r)
                }, t.prototype.setRatioBegin = function() {
                    this.setValue(this.beginningValues)
                }, t.prototype.setRatioEnd = function() {
                    this.setValue(this.endingValues)
                }, t.prototype.setValue = function(e) {
                    var t = this,
                        i = t.target,
                        n = t.end,
                        r = t.filter,
                        o = !1;
                    Object.keys(n).forEach(function(t, i) {
                        r[t] !== e[i] && (o = !0, r[t] = e[i])
                    }), o && i.invalidateEffects()
                }, t
            }(i);
        return r.filters = t, TweenPlugin.activate([a]), a
    }, !0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0);
    window._gsDefine("plugins.ObjectSetterPlugin", ["plugins.TweenPlugin"], function(e) {
        var t = function(e) {
            function t() {
                return e.call(this, "objectSetter") || this
            }
            return n.__extends(t, e), t.prototype._onInitTween = function(e, t, i) {
                return console.assert(!i.duration()), this.target = e, this.vars = t, this.firstTween = this.parse(e, t), !0
            }, t.prototype.parse = function(e, t) {
                for (var n, r = 0, o = Object.keys(t); r < o.length; r++) {
                    var a = o[r],
                        s = e[a],
                        c = t[a];
                    n = new i(e, a, s, c, n)
                }
                return n
            }, t.prototype.setRatio = function(e) {
                console.assert(0 === e || 1 === e);
                for (var t = 0 === e ? "setRatioBegin" : "setRatioEnd", i = this.firstTween; i;) i[t](), i = i.next
            }, t
        }(e);
        t.version = "0.1", t.API = 2;
        var i = function() {
            function e(e, t, i, n, r) {
                this.target = e, this.name = t, this.beginningValue = i, this.endingValue = n, this.next = r
            }
            return e.prototype.setRatioBegin = function() {
                this.target[this.name] = this.beginningValue
            }, e.prototype.setRatioEnd = function() {
                this.target[this.name] = this.endingValue
            }, e
        }();
        return TweenPlugin.activate([t]), t
    }, !0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), window._gsDefine("easing.FlashEase", [], function() {
        function e(e, t, i, n, r) {
            return e /= n, 0 === r ? t + e : t + e * (-r * e + 1 + r)
        }
        return e
    }, !0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), window._gsDefine("easing.FlashCustomEase", [], function() {
        function e(e, t, i, n) {
            var r = Array.prototype.slice.call(arguments, 4),
                o = Math.round(e * r.length);
            return o === r.length ? 1 : r[o]
        }
        return e
    }, !0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(724),
        r = i(367),
        o = function() {
            function e() {}
            return e.create = function(e, t, i, o) {
                TweenLite.defaultEase = Linear.easeNone;
                var a = new r.Library(e, t.library, i);
                delete t.library;
                var s = (i || {}).$stage;
                return (new n.TreeBuilder).buildStage(e, s, t, a, o)
            }, e
        }();
    t.Face = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = i(725),
        o = i(127),
        a = i(252),
        s = i(49),
        c = i(365),
        d = i(731),
        l = i(209),
        u = i(254),
        p = i(752),
        h = function() {
            function e() {}
            return e.prototype.buildStage = function(e, t, i, n, o) {
                this.idIssuer = new r.IdIssuer(e), t = t || c.Stage;
                var a;
                return o ? (a = new p.DelayLoadableStage(this.idIssuer, i).create(), a.setTreeBuilder(this, n)) : a = new t(this.idIssuer, i).create(), this.buildMovieClip(a, n, i, !1), a
            }, e.prototype.buildMovieClip = function(e, t, i, n) {
                if (i.timeline && e instanceof s.MovieClip) {
                    i.export && (t = u.SharedLibrary.get(i.export));
                    var r = e,
                        o = i.timeline.layers || [],
                        a = [];
                    delete i.timeline;
                    for (var c = 0, d = o; c < d.length; c++) {
                        var l = d[c],
                            p = l.layerType;
                        if ("guide" !== p || 0 !== a.length) {
                            var h = this.createStateObjects(t, r, l, n);
                            switch (p) {
                                case "masked":
                                    a = a.concat(h);
                                    break;
                                case "mask":
                                    var f = this.postProcessMaskLayer(l, r, h, a);
                                    r.addChildren(h.concat(a), f.htmlElement), a = [];
                                    break;
                                case "guided":
                                    a = a.concat(h);
                                    break;
                                case "guide":
                                    this.postProcessGuideLayer(h, a), a = []
                            }
                            "masked" !== p && "mask" !== p && r.addChildren(h)
                        }
                    }
                    r.postCreate()
                }
            }, e.prototype.postProcessMaskLayer = function(e, t, i, n) {
                var r = new a.MaskLayerContainer(this.idIssuer, o.DisplayObject.createDefaultData()).create();
                if (t.addMaskLayer(r), e.multiMask) {
                    t.ensureTimeline();
                    for (var s = t.timeline, c = void 0, d = 0, l = e.multiMask.length; d < l; ++d) c = e.multiMask[d], s.set(r, {
                        objectSetter: {
                            mask: i[c.stateIdx]
                        }
                    }, c.position), s.set(r, {
                        objectSetter: {
                            mask: void 0
                        }
                    }, c.position + c.duration)
                } else r.mask = i[0];
                return r.reboot(), r
            }, e.prototype.postProcessGuideLayer = function(e, t) {
                var i = e[0];
                if (!i) throw new Error("No guide object");
                i.isGuide = !0;
                for (var n = 0, r = t; n < r.length; n++) {
                    r[n].guide = i
                }
            }, e.prototype.createElement = function(e, t) {
                var i = t.elementType;
                switch (i) {
                    case "shape":
                        return new d.Shape(this.idIssuer, t).create();
                    case "text":
                        return new l.TextField(this.idIssuer, t).create();
                    case "instance":
                        return e.createItemInstance(this.idIssuer, t);
                    default:
                        throw new Error("'" + i + "' is unknown element type.")
                }
            }, e.prototype.createStateObjects = function(e, t, i, r) {
                for (var o = [], a = 0, s = i.stateObjs; a < s.length; a++) {
                    var c = s[a],
                        d = r ? n.assign({}, c.elem) : c.elem;
                    d.needToCloneFilters && (d.filters = n.cloneDeep(d.filters));
                    var l = this.createElement(e, d);
                    this.buildMovieClip(l, e, d, !0), o.push(l)
                }
                return o
            }, e
        }();
    t.TreeBuilder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e(e) {
            this._screenName = e, this._id = 0
        }
        return e.prototype.createId = function() {
            return this._screenName + "-" + ++this._id
        }, Object.defineProperty(e.prototype, "screenName", {
            get: function() {
                return this._screenName
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "id", {
            get: function() {
                return this._id
            },
            enumerable: !0,
            configurable: !0
        }), e
    }();
    t.IdIssuer = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        var t = e[0],
            i = e[1],
            n = e[2],
            o = e[3],
            a = e[4],
            s = e[5],
            c = e[6],
            d = new r.Matrix(n, 0, 0, o, t, i);
        if (a) {
            var l = a * Math.PI / 180,
                u = Math.cos(l),
                p = Math.sin(l);
            d.append(u, -p, p, u, 0, 0)
        }
        if (s || c) {
            var h = s * Math.PI / 180,
                f = c * Math.PI / 180;
            d.append(Math.cos(f), -Math.sin(h), Math.sin(f), Math.cos(h), 0, 0)
        }
        return d
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(727);
    t.toTransformMatrix = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e(e, t, i, n, r, o) {
            this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0, this.alpha = 1, this.shadow = null, this.compositeOperation = null, this.visible = !0, this.initialize(e, t, i, n, r, o)
        }
        return e.prototype.initialize = function(e, t, i, n, r, o) {
            return this.a = null == e ? 1 : e, this.b = t || 0, this.c = i || 0, this.d = null == n ? 1 : n, this.tx = r || 0, this.ty = o || 0, this
        }, e.prototype.prepend = function(e, t, i, n, r, o) {
            var a = this.tx;
            if (1 != e || 0 != t || 0 != i || 1 != n) {
                var s = this.a,
                    c = this.c;
                this.a = s * e + this.b * i, this.b = s * t + this.b * n, this.c = c * e + this.d * i, this.d = c * t + this.d * n
            }
            return this.tx = a * e + this.ty * i + r, this.ty = a * t + this.ty * n + o, this
        }, e.prototype.append = function(e, t, i, n, r, o) {
            var a = this.a,
                s = this.b,
                c = this.c,
                d = this.d;
            return this.a = e * a + t * c, this.b = e * s + t * d, this.c = i * a + n * c, this.d = i * s + n * d, this.tx = r * a + o * c + this.tx, this.ty = r * s + o * d + this.ty, this
        }, e.prototype.prependMatrix = function(e) {
            return this.prepend(e.a, e.b, e.c, e.d, e.tx, e.ty), this.prependProperties(e.alpha, e.shadow, e.compositeOperation, e.visible), this
        }, e.prototype.appendMatrix = function(e) {
            return this.append(e.a, e.b, e.c, e.d, e.tx, e.ty), this.appendProperties(e.alpha, e.shadow, e.compositeOperation, e.visible), this
        }, e.prototype.prependTransform = function(t, i, n, r, o, a, s, c, d) {
            if (o % 360) var l = o * e.DEG_TO_RAD,
                u = Math.cos(l),
                p = Math.sin(l);
            else u = 1, p = 0;
            return (c || d) && (this.tx -= c, this.ty -= d), a || s ? (a *= e.DEG_TO_RAD, s *= e.DEG_TO_RAD, this.prepend(u * n, p * n, -p * r, u * r, 0, 0), this.prepend(Math.cos(s), Math.sin(s), -Math.sin(a), Math.cos(a), t, i)) : this.prepend(u * n, p * n, -p * r, u * r, t, i), this
        }, e.prototype.appendTransform = function(t, i, n, r, o, a, s, c, d) {
            if (o % 360) var l = o * e.DEG_TO_RAD,
                u = Math.cos(l),
                p = Math.sin(l);
            else u = 1, p = 0;
            return a || s ? (a *= e.DEG_TO_RAD, s *= e.DEG_TO_RAD, this.append(Math.cos(s), Math.sin(s), -Math.sin(a), Math.cos(a), t, i), this.append(u * n, p * n, -p * r, u * r, 0, 0)) : this.append(u * n, p * n, -p * r, u * r, t, i), (c || d) && (this.tx -= c * this.a + d * this.c, this.ty -= c * this.b + d * this.d), this
        }, e.prototype.rotate = function(e) {
            var t = Math.cos(e),
                i = Math.sin(e),
                n = this.a,
                r = this.c,
                o = this.tx;
            return this.a = n * t - this.b * i, this.b = n * i + this.b * t, this.c = r * t - this.d * i, this.d = r * i + this.d * t, this.tx = o * t - this.ty * i, this.ty = o * i + this.ty * t, this
        }, e.prototype.skew = function(t, i) {
            return t *= e.DEG_TO_RAD, i *= e.DEG_TO_RAD, this.append(Math.cos(i), Math.sin(i), -Math.sin(t), Math.cos(t), 0, 0), this
        }, e.prototype.scale = function(e, t) {
            return this.a *= e, this.d *= t, this.c *= e, this.b *= t, this.tx *= e, this.ty *= t, this
        }, e.prototype.translate = function(e, t) {
            return this.tx += e, this.ty += t, this
        }, e.prototype.identity = function() {
            return this.alpha = this.a = this.d = 1, this.b = this.c = this.tx = this.ty = 0, this.shadow = this.compositeOperation = null, this.visible = !0, this
        }, e.prototype.invert = function() {
            var e = this.a,
                t = this.b,
                i = this.c,
                n = this.d,
                r = this.tx,
                o = e * n - t * i;
            return this.a = n / o, this.b = -t / o, this.c = -i / o, this.d = e / o, this.tx = (i * this.ty - n * r) / o, this.ty = -(e * this.ty - t * r) / o, this
        }, e.prototype.isIdentity = function() {
            return 0 == this.tx && 0 == this.ty && 1 == this.a && 0 == this.b && 0 == this.c && 1 == this.d
        }, e.prototype.transformPoint = function(e, t, i) {
            return i = i || {}, i.x = e * this.a + t * this.c + this.tx, i.y = e * this.b + t * this.d + this.ty, i
        }, e.prototype.reinitialize = function(e, t, i, n, r, o, a, s, c, d) {
            return this.initialize(e, t, i, n, r, o), this.alpha = null == a ? 1 : a, this.shadow = s, this.compositeOperation = c, this.visible = null == d || d, this
        }, e.prototype.copy = function(e) {
            return this.reinitialize(e.a, e.b, e.c, e.d, e.tx, e.ty, e.alpha, e.shadow, e.compositeOperation, e.visible)
        }, e.prototype.appendProperties = function(e, t, i, n) {
            return this.alpha *= e, this.shadow = t || this.shadow, this.compositeOperation = i || this.compositeOperation, this.visible = this.visible && n, this
        }, e.prototype.prependProperties = function(e, t, i, n) {
            return this.alpha *= e, this.shadow = this.shadow || t, this.compositeOperation = this.compositeOperation || i, this.visible = this.visible && n, this
        }, e.prototype.clone = function() {
            return (new e).copy(this)
        }, e.prototype.toString = function() {
            return "[Matrix (a=" + this.a + " b=" + this.b + " c=" + this.c + " d=" + this.d + " tx=" + this.tx + " ty=" + this.ty + ")]"
        }, e
    }();
    n.identity = new n, n.DEG_TO_RAD = Math.PI / 180, t.Matrix = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e.getClosestPoint = function(e, t) {
            function i(e) {
                var i = e.x - t[0],
                    n = e.y - t[1];
                return i * i + n * n
            }
            for (var n, r, o, a, s = e.getTotalLength(), c = s / e.pathSegList.numberOfItems * .125, d = 1 / 0, l = 0; l <= s; l += c)(a = i(o = e.getPointAtLength(l))) < d && (n = o, r = l, d = a);
            for (c *= .5; c > .5;) {
                var u, p, h, f, v, m;
                (h = r - c) >= 0 && (v = i(u = e.getPointAtLength(h))) < d ? (n = u, r = h, d = v) : (f = r + c) <= s && (m = i(p = e.getPointAtLength(f))) < d ? (n = p, r = f, d = m) : c *= .5
            }
            return n = [n.x, n.y], n.distance = Math.sqrt(d), n.pointLength = r, n
        }, e
    }();
    t.SvgUtil = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {
            this.q = []
        }
        return e.instance = function() {
            if (!e._instance) {
                var t = new e;
                e._instance = t, TweenMax.ticker.addEventListener("tick", t.onRender.bind(t))
            }
            return e._instance
        }, e.prototype.schedule = function(e) {
            this.q.indexOf(e) >= 0 || this.q.push(e)
        }, e.prototype.cancel = function(e) {
            var t = this.q.indexOf(e);
            t < 0 || this.q.splice(t, 1)
        }, e.prototype.onRender = function() {
            var e = this.q;
            this.q = [];
            for (var t = 0, i = e; t < i.length; t++) {
                i[t].render()
            }
        }, e
    }();
    t.HTMLRenderer = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = function() {
            function e(e) {
                this.face = e, this.cache = {
                    filters: []
                }
            }
            return e.prototype.addFiltersDelta = function(e, t) {
                for (var i = e.filters = [], r = 0; r < t.length; ++r) {
                    for (var o = this.cache.filters[r] || this.face.filters[r] || t[r], a = {}, s = 0, c = Object.keys(t[r]); s < c.length; s++) {
                        var d = c[s];
                        a[d] = o[d]
                    }
                    i[r] = a, this.cache.filters[r] = n.__assign({}, o, t[r])
                }
            }, e.prototype.addGeneralDelta = function(e, t, i) {
                e[t] = void 0 !== this.cache[t] ? this.cache[t] : this.face[t], this.cache[t] = i
            }, e.prototype.addDelta = function(e) {
                for (var t = {}, i = 0, n = Object.keys(e); i < n.length; i++) {
                    var r = n[i];
                    "filters" === r ? this.addFiltersDelta(t, e[r]) : this.addGeneralDelta(t, r, e[r])
                }
                return t
            }, e
        }();
    t.TweenDeltaCalculator = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(127),
        o = i(144),
        a = i(107),
        s = i(363),
        c = i(19),
        d = l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._enableHwRendering = !1, t
            }
            return n.__extends(t, e), t.prototype.createDomNode = function(e) {
                var t = document.createElementNS(l.SVG_NS, "svg");
                return this.createPath(e.contour, t), t
            }, t.prototype.createPath = function(e, t) {
                var i = this;
                e.forEach(function(e) {
                    var n = document.createElementNS(l.SVG_NS, "path");
                    if (n.setAttribute("d", e.path), e.fill) {
                        var r = i._getColorAndAlphaFromARGB(e.fill),
                            o = r.color,
                            a = r.alpha;
                        n.setAttribute("fill", o), n.setAttribute("fill-rule", "evenodd"), a < 1 && n.setAttribute("fill-opacity", a.toString())
                    } else n.setAttribute("fill-opacity", "0");
                    if (e.stroke) {
                        var s = i._getColorAndAlphaFromARGB(e.stroke.color),
                            c = s.color,
                            d = s.alpha;
                        n.setAttribute("stroke", c), n.setAttribute("stroke-width", (e.stroke.thickness || 1).toString()), d < 1 && n.setAttribute("stroke-opacity", d.toString())
                    }
                    t.appendChild(n)
                })
            }, t.prototype._getColorAndAlphaFromARGB = function(e) {
                return /#([a-fA-F0-9]{6})([a-fA-F0-9]{2})/g.exec(e) ? {
                    color: "#" + RegExp.$1,
                    alpha: o.NumberUtil.fix(parseInt(RegExp.$2, 16) / 255, 5)
                } : {
                    color: e,
                    alpha: 1
                }
            }, t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.hasSize = !0, this.enableHwRendering = s.default.isEAWebKit && a.Features.hwRenderedSvg
            }, t.prototype.cloneProperties = function(t) {
                e.prototype.cloneProperties.call(this, t);
                var i = t;
                this._enableHwRendering = i._enableHwRendering
            }, Object.defineProperty(t.prototype, "enableHwRendering", {
                get: function() {
                    return this._enableHwRendering
                },
                set: function(e) {
                    if (this._enableHwRendering !== e) {
                        this._enableHwRendering = e;
                        var t = this.cssProxies[0];
                        e ? t.setProperty("-edge-hw-rendered-svg", "enabled") : t.removeProperty("-edge-hw-rendered-svg"), this.addToRenderer()
                    }
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.supportsScale9Grid = function() {
                return !0
            }, Object.defineProperty(t.prototype, "scale9Grid", {
                get: function() {
                    return this._parent ? this._parent.scale9Grid : this.data.scalingGridRect
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(r.DisplayObject);
    d.SVG_NS = "http://www.w3.org/2000/svg", d = l = n.__decorate([c.component("Shape")], d), t.Shape = d;
    var l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e.calc = function(e, t, i, n) {
            var r = this.caches[e] || (this.caches[e] = {});
            if (!i) return n;
            if (r.hasOwnProperty(String(t.size))) return r[t.size];
            var o = this.createElement(t.size, e),
                a = o.appendTo("body").height();
            return o.remove(), r[t.size] = a, a
        }, e.createElement = function(e, t) {
            return $("<div>").css({
                border: 0,
                margin: 0,
                padding: 0,
                "-webkit-backface-visibility": "hidden",
                "font-size": e + "px",
                "line-height": "normal",
                display: "inline-block",
                "white-space": "nowrap",
                position: "absolute",
                left: "100%",
                top: "100%"
            }).text(this.PlaceholderText).addClass(t)
        }, e
    }();
    n.PlaceholderText = "Lorem ipsum", n.DefaultFont = "serif", n.caches = {}, t.LineHeightUtil = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(128),
        o = i(734),
        a = i(256),
        s = i(737),
        c = i(738),
        d = i(740),
        l = i(741),
        u = i(368),
        p = i(744),
        h = i(745),
        f = i(747),
        v = i(748),
        m = i(369),
        g = i(749),
        y = i(750),
        S = i(49),
        E = function() {
            function e(t) {
                this.constructorMap = _.assign({}, e.DEFAULT_CONSTRUCTOR_MAP, t || {})
            }
            return e.prototype.getConstructor = function(e) {
                switch (e.itemType) {
                    case "component":
                    case "movie clip":
                        return this.getComponentConstructor(e);
                    case "graphic":
                        return S.MovieClip;
                    case "bitmap":
                        return this.getBitmapConstructor(e);
                    case "folder":
                    case "sound":
                    default:
                        throw new Error("'" + e.itemType + "' is unknown item type.")
                }
            }, e.prototype.getBitmapConstructor = function(e) {
                var t = this.constructorMap[this.getBitmapType(e)];
                return t || y.Bitmap
            }, e.prototype.getComponentConstructor = function(e) {
                var t = this.getComponentType(e);
                if (!t) return S.MovieClip;
                var i = this.constructorMap[t];
                return i || (n.warn("baseClass should be valid: ", t), S.MovieClip)
            }, e.prototype.getComponentType = function(e) {
                if (e.libraryItemNameClass) return e.libraryItemNameClass;
                var t = e.name.split("/").pop().trim(),
                    i = t.split(":");
                if (2 === i.length) {
                    t = i[0].trim();
                    var n = i[1].trim();
                    return "=" === n ? t : n
                }
                return e.linkageBaseClass ? e.linkageBaseClass.split(".").pop() : ""
            }, e.prototype.getBitmapType = function(e) {
                return e.name.split("/").pop().trim()
            }, e
        }();
    E.DEFAULT_CONSTRUCTOR_MAP = {
        Button: r.Button,
        CheckBox: o.CheckBox,
        CoreList: a.CoreList,
        Label: s.Label,
        ListItemRenderer: c.ListItemRenderer,
        RadioButton: d.RadioButton,
        ScrollBar: l.ScrollBar,
        ScrollIndicator: u.ScrollIndicator,
        ScrollingList: p.ScrollingList,
        Slider: h.Slider,
        StatusIndicator: f.StatusIndicator,
        TextArea: v.TextArea,
        TextInput: m.TextInput,
        TileList: g.TileList
    }, t.ItemCtorMap = E
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(128),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.toggle = !0
            }, t
        }(r.Button);
    a = n.__decorate([o.component("CheckBox")], a), t.CheckBox = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = i(22),
        a = i(736),
        s = i(8),
        c = function(e) {
            function t(t) {
                var i = e.call(this) || this;
                return i.source = t, i.push.apply(i, t), i
            }
            return n.__extends(t, e), t.prototype.addEventListener = function(e, t) {}, t.prototype.removeEventListener = function(e, t) {}, t.prototype.dispatchEvent = function(e) {
                for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i]
            }, t.prototype.getListeners = function(e) {
                return []
            }, t.prototype.hasEventListener = function(e) {
                var t = this.getListeners(e);
                return !(!t || !t.length)
            }, t.prototype.cleanUp = function() {}, t.prototype.indexOf = function(e, t) {
                return this.source.indexOf(e, t)
            }, t.prototype.invalidate = function() {
                this.dispatchEvent(s.EventEx.CHANGE)
            }, t.prototype.requestItemAt = function(e, t) {
                var i = this.source[e];
                return t ? t(i) : i
            }, t.prototype.requestItemRange = function(e, t, i) {
                var n = this.slice(e, t);
                return i ? i(n) : n
            }, t.prototype.setSource = function(e) {
                this.source = e
            }, t.prototype.willTrigger = function() {
                return !0
            }, t
        }(a.DummyArray);
    t.DataProvider = c, o.assign(c.prototype, r.EventEmitter.prototype), c.prototype.addEventListener = c.prototype.on, c.prototype.removeEventListener = c.prototype.removeListener, c.prototype.dispatchEvent = c.prototype.emit
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {
            return Array.apply(this, arguments), []
        }
        return e.prototype.toString = function() {
            return ""
        }, e.prototype.toLocaleString = function() {
            return ""
        }, e.prototype.push = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return 0
        }, e.prototype.pop = function() {
            return null
        }, e.prototype.concat = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return []
        }, e.prototype.join = function(e) {
            return ""
        }, e.prototype.reverse = function() {
            return []
        }, e.prototype.shift = function() {
            return null
        }, e.prototype.slice = function(e, t) {
            return []
        }, e.prototype.sort = function(e) {
            return []
        }, e.prototype.splice = function(e, t) {
            for (var i = [], n = 2; n < arguments.length; n++) i[n - 2] = arguments[n];
            return []
        }, e.prototype.unshift = function() {
            for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
            return 0
        }, e.prototype.lastIndexOf = function(e, t) {
            return 0
        }, e.prototype.every = function(e, t) {
            return !0
        }, e.prototype.some = function(e, t) {
            return !0
        }, e.prototype.forEach = function(e, t) {}, e.prototype.map = function(e, t) {
            return []
        }, e.prototype.filter = function(e, t) {
            return []
        }, e.prototype.reduce = function(e, t) {
            return null
        }, e.prototype.reduceRight = function(e, t) {
            return null
        }, e
    }();
    t.DummyArray = n, n.prototype = []
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(129),
        o = i(210),
        a = i(145),
        s = i(19),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "enabled", {
                get: function() {
                    return o.ObjectUtil.getPropertyDescriptor(r.UIComponent.prototype, "enabled").get.call(this)
                },
                set: function(e) {
                    o.ObjectUtil.getPropertyDescriptor(r.UIComponent.prototype, "enabled").set.call(this, e), this.invalidateState()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "htmlText", {
                get: function() {
                    return this._text
                },
                set: function(e) {
                    this._text = e || "", this.invalidateData()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "length", {
                get: function() {
                    return (this.text || "").length
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "text", {
                get: function() {
                    return this._text
                },
                set: function(e) {
                    e = e || "", this._text = e, this.invalidateData()
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.applyParameters = function(t, i) {
                if (void 0 === i && (i = !1), e.prototype.applyParameters.call(this, t, i), t) {
                    var n = a.ParameterUtil.getParameterValue(t.text);
                    n && (this.text = n)
                }
            }, t.prototype.preInitialize = function() {
                e.prototype.preInitialize.call(this), this.textField = this.getChildByName("textField")
            }, t.prototype.initialize = function() {
                e.prototype.initialize.call(this)
            }, t.prototype.drawState = function() {
                e.prototype.drawState.call(this), this.gotoAndPlay(this.enabled ? "default" : "disabled")
            }, t.prototype.drawData = function() {
                e.prototype.drawData.call(this), this.text && this.textField && (this.textField.text = this.text)
            }, t.prototype.reboot = function() {
                e.prototype.reboot.call(this), this.invalidateState()
            }, t.prototype.halt = function() {
                e.prototype.halt.call(this), this.invalidateState()
            }, t.prototype.destroy = function(t) {
                e.prototype.destroy.call(this, t), this.textField = void 0
            }, t
        }(r.UIComponent);
    c = n.__decorate([s.component("Label")], c), t.Label = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(128),
        o = i(739),
        a = i(19),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.initialize = function() {
                e.prototype.initialize.call(this), this.recalculateSize(), this.toggle = !0
            }, t.prototype.initializeStyle = function(t) {
                e.prototype.initializeStyle.call(this, t);
                var i = this.cssProxies[0];
                i.setProperty("position", "relative"), i.setProperty("top", "auto"), i.setProperty("left", "auto")
            }, t.prototype.setData = function(e) {
                "string" == typeof e && (this.label = e)
            }, t.prototype.setListData = function(e) {
                if (!(e instanceof o.ListData)) throw new Error('invalid "ListData"')
            }, t
        }(r.Button);
    s = n.__decorate([a.component("ListItemRenderer")], s), t.ListItemRenderer = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e(e, t, i) {
            this.index = 0, this.label = "Empty", this.selected = !1, this.index = void 0 !== e ? e : this.index, this.label = void 0 !== t ? t : this.label, this.selected = void 0 !== i ? i : this.selected
        }
        return e
    }();
    t.ListData = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(128),
        o = i(72),
        a = i(210),
        s = i(145),
        c = i(19),
        d = l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "parent", {
                get: function() {
                    return a.ObjectUtil.getPropertyDescriptor(r.Button.prototype, "parent").get.call(this)
                },
                set: function(e) {
                    if (a.ObjectUtil.getPropertyDescriptor(r.Button.prototype, "parent").set.call(this, e), e) {
                        var t = this.groupName,
                            i = o.ButtonGroup.getGroup(t, e);
                        if (!i) {
                            i = new o.ButtonGroup(t, e);
                            var n = o.ButtonGroup.groups[t] || [];
                            n.push(i), o.ButtonGroup.groups[t] = n
                        }
                        i.addButton(this)
                    }
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.preInitialize = function() {
                e.prototype.preInitialize.call(this), this.groupName = this.data.parameters && s.ParameterUtil.getParameterValue(this.data.parameters.groupName) || l.DEFAULT_GROUPNAME
            }, t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.toggle = !0
            }, t
        }(r.Button);
    d.DEFAULT_GROUPNAME = "default", d = l = n.__decorate([c.component("RadioButton")], d), t.RadioButton = d;
    var l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(368),
        a = i(743),
        s = i(19),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.trackMode = a.ScrollBarTrackMode.SCROLL_PAGE, t.trackScrollPageSize = 1, t._dragging = !1, t
            }
            return n.__extends(t, e), t.prototype.initialize = function() {
                e.prototype.initialize.call(this), this.downArrow = this.getChildByName("downArrow"), this.upArrow = this.getChildByName("upArrow"), this.initializeThumb()
            }, t.prototype.initializeThumb = function() {
                var e = this.track,
                    t = this.thumb;
                $(t.htmlElement).one("mousedown", function(i) {
                    var n = i.clientX - i.offsetX,
                        r = i.clientY - i.offsetY;
                    $(this).draggable("option", "containment", [n, r, n + e.width, r + e.height - t.height])
                }).draggable({
                    axis: "y",
                    scroll: !1,
                    create: function(e) {
                        r.trace(e)
                    },
                    drag: function(e) {
                        r.trace(e)
                    },
                    start: function(e) {
                        r.trace(e)
                    },
                    stop: function(e) {
                        r.trace(e)
                    }
                })
            }, t
        }(o.ScrollIndicator);
    c = n.__decorate([s.component("ScrollBar")], c), t.ScrollBar = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.HORIZONTAL = "horizontal", n.VERTICAL = "vertical", t.ScrollBarDirection = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.SCROLL_PAGE = "scrollPage", n.SCROLL_TO_CURSOR = "scrollToCursor", t.ScrollBarTrackMode = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(256),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.invalidateRenderers = function() {
                e.prototype.invalidateRenderers.call(this);
                for (var t, i = this.items, n = 0, r = i.length; n < r; ++n) t = this.getItemAt(n), t.recalculateSize(), t.toggle = !0;
                $(this.itemContainer).perfectScrollbar("update")
            }, t
        }(r.CoreList);
    a = n.__decorate([o.component("ScrollingList")], a), t.ScrollingList = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(129),
        o = i(8),
        a = i(746),
        s = i(145),
        c = i(19),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "positon", {
                get: function() {
                    return this.value
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "position", {
                set: function(e) {
                    this.value = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "value", {
                get: function() {
                    return this._value
                },
                set: function(e) {
                    this._value !== e && (this._value = e, this.dispatchEvent(a.SliderEvent.VALUE_CHANGE, new o.EventEx(a.SliderEvent.VALUE_CHANGE, {
                        currentTarget: this,
                        value: e
                    })))
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.preInitialize = function() {
                e.prototype.preInitialize.call(this);
                var t = this.data.parameters;
                this.liveDragging = s.ParameterUtil.getParameterValue(t.liveDragging), this.maximum = s.ParameterUtil.getParameterValue(t.maximum), this.minimum = s.ParameterUtil.getParameterValue(t.minimum), this.offsetLeft = s.ParameterUtil.getParameterValue(t.offsetLeft), this.offsetRight = s.ParameterUtil.getParameterValue(t.offsetRight), this.snapInterval = s.ParameterUtil.getParameterValue(t.snapInterval), this.snapping = s.ParameterUtil.getParameterValue(t.snapping), this.value = s.ParameterUtil.getParameterValue(t.value)
            }, t.prototype.initialize = function() {
                e.prototype.initialize.call(this), this.thumb = this.getChildByName("thumb"), this.track = this.getChildByName("track"), this.thumb.x = 0, this.initializeThumb()
            }, t.prototype.initializeThumb = function() {
                var e = this,
                    t = this.track,
                    i = this.thumb,
                    n = {
                        axis: "x",
                        scroll: !1,
                        drag: function() {
                            this.liveDragging && e.updateValue($(i.htmlElement).position().left)
                        },
                        stop: function() {
                            e.updateValue($(i.htmlElement).position().left)
                        }
                    };
                if (this.snapping) {
                    var r = (t.width - i.width) / ((this.maximum - this.minimum) / this.snapInterval);
                    n.grid = [r, 1]
                }
                $(i.htmlElement).draggable(n).one("mousedown", function(n) {
                    var r = n.clientX - n.offsetX - i.x - .5,
                        o = n.clientY - n.offsetY - i.y - .5,
                        a = r + t.width - i.width + 1,
                        s = o + t.height - i.height + 1;
                    e.containment = [r, o, a, s], $(this).draggable("option", "containment", e.containment)
                })
            }, t.prototype.updateValue = function(e) {
                var t = this.track,
                    i = this.thumb,
                    n = e / (t.width - i.width),
                    r = (this.maximum - this.minimum) * n;
                this.snapping && (r = Math.round(r / this.snapInterval) * this.snapInterval), r += this.minimum, this.value = Math.min(Math.max(r, this.minimum), this.maximum)
            }, t
        }(r.UIComponent);
    d = n.__decorate([c.component("Slider")], d), t.Slider = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e() {}
        return e
    }();
    n.VALUE_CHANGE = "valueChange", t.SliderEvent = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(129),
        o = i(19),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._maximum = 10, t._minimum = 0, t._value = 0, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "maximum", {
                get: function() {
                    return this._maximum
                },
                set: function(e) {
                    this._maximum = e, this.invalidateState()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "minimum", {
                get: function() {
                    return this._minimum
                },
                set: function(e) {
                    this._minimum = e, this.invalidateState()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "value", {
                get: function() {
                    return this._value
                },
                set: function(e) {
                    this._value = e, this.invalidateState()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "position", {
                get: function() {
                    return this.value
                },
                set: function(e) {
                    this.value = e
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.drawState = function() {
                if (e.prototype.drawState.call(this), this.timeline) {
                    var t = Math.floor(this.timeline.duration()),
                        i = (this.value - this.minimum) / (this.maximum - this.minimum);
                    i = i || 0;
                    var n = Math.round(i * t);
                    n = Math.min(Math.max(1, n), t), this.gotoAndStop(n)
                }
            }, t
        }(r.UIComponent);
    a = n.__decorate([o.component("StatusIndicator")], a), t.StatusIndicator = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(369),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t
        }(r.TextInput);
    a = n.__decorate([o.component("TextArea")], a), t.TextArea = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(256),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.invalidateRenderers = function() {
                e.prototype.invalidateRenderers.call(this);
                for (var t, i = this.items, n = 0, r = i.length; n < r; ++n) t = this.getItemAt(n), t.recalculateSize(), t.toggle = !0, t.validateNow(), t.htmlElement.style.float = "left";
                $(this.itemContainer).perfectScrollbar("update")
            }, t
        }(r.CoreList);
    a = n.__decorate([o.component("TileList")], a), t.TileList = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(370);
    i(751);
    t.Bitmap = n.Bitmap
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(251),
        o = i(144),
        a = i(8),
        s = i(370),
        c = i(19),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.scale9GridInitialized = !1, t
            }
            return n.__extends(t, e), t.prototype.parentScale9Grid = function() {
                if (this.parent && this.parent.scale9Grid && this.scale9GridInitialized) return this.parent.scale9Grid
            }, t.prototype.destroy = function(t) {
                this.onParentScaleChange && this.parent.off(a.EventEx.SCALE_CHANGE, this.onParentScaleChange), e.prototype.destroy.call(this, t)
            }, t.prototype._onParentScaleChange = function() {
                this.invalidateTransform(), this.invalidateSize()
            }, t.prototype.drawScale9Grid = function() {
                if (!this.scale9GridInitialized) {
                    this.scale9GridInitialized = !0;
                    var e = _.find(this.htmlElement.children, function(e) {
                        return e.hasAttribute("fc-bitmap-center-region")
                    });
                    e && this.htmlElement.removeChild(e), this.onParentScaleChange = this._onParentScaleChange.bind(this), this.parent.on(a.EventEx.SCALE_CHANGE, this.onParentScaleChange), this.parent.emulatingScale9Grid = !0, this.centerRegion = document.createElement("div"), this.centerRegion.setAttribute("fc-bitmap-center-region", ""), this.htmlElement.appendChild(this.centerRegion);
                    var t = this.cssProxies[0],
                        i = this.getBackground();
                    t.removeProperty("background-image");
                    var n = this.parentScale9Grid(),
                        o = Math.round(n.top - this.y),
                        s = Math.round(this.width - (n.right - this.x)),
                        c = Math.round(this.height - (n.bottom - this.y)),
                        d = Math.round(n.left - this.x);
                    t.setProperty("border", "0px solid transparent"), t.setProperty("border-width", [o + "px", s + "px", c + "px", d + "px"].join(" ")), t.setProperty("border-image-source", i), t.setProperty("border-image-slice", [o, s, c, d].join(" ")), t.setProperty("border-image-repeat", "stretch"), this.cssProxies[1] = new r.CSSProxy(this.centerRegion);
                    var l = this.cssProxies[1];
                    l.setProperty("background-image", i), l.setProperty("background-repeat", "no-repeat"), this.invalidateTransform(), this.invalidateSize()
                }
            }, t.prototype.drawSize = function() {
                var t = this.parentScale9Grid();
                if (t) {
                    var i = o.NumberUtil.fix,
                        n = this.width,
                        r = this.height,
                        a = Math.round(t.top - this.y),
                        s = Math.round(n - (t.right - this.x)),
                        c = Math.round(r - (t.bottom - this.y)),
                        d = Math.round(t.left - this.x),
                        l = n * this.parent.scaleX,
                        u = r * this.parent.scaleY,
                        p = i(Math.abs(l - d - s), 2),
                        h = i(Math.abs(u - a - c), 2),
                        f = p / Math.abs(n - d - s) || 0,
                        v = h / Math.abs(r - a - c) || 0,
                        m = i(d * f, 2),
                        g = i(a * v, 2),
                        y = i(n * f, 2),
                        S = i(r * v, 2),
                        _ = this.cssProxies[0];
                    _.setProperty("width", p + "px"), _.setProperty("height", h + "px");
                    var E = this.cssProxies[1];
                    E.setProperty("width", p + "px"), E.setProperty("height", h + "px"), E.setProperty("background-position", "-" + m + "px -" + g + "px"), E.setProperty("background-size", y + "px " + S + "px")
                } else e.prototype.drawSize.call(this)
            }, t.prototype.getTransform = function() {
                var t = e.prototype.getTransform.call(this);
                if (this.parentScale9Grid()) {
                    var i = this.parent;
                    t[0] += i.regX * (1 - i.scaleX), t[1] += i.regY * (1 - i.scaleY)
                }
                return t
            }, t.prototype.getTranslation = function(t, i) {
                return this.parentScale9Grid() ? {
                    x: t * (this.parent.scaleX || 0),
                    y: i * (this.parent.scaleY || 0)
                } : e.prototype.getTranslation.call(this, t, i)
            }, t
        }(s.Bitmap);
    d = n.__decorate([c.component("Bitmap")], d), t.BitmapEx = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(365),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.setTreeBuilder = function(e, t) {
                this.treeBuilder = e, this.library = t
            }, t.prototype.buildInstance = function(e) {
                var t = this.library.createItemInstance(this.idIssuer, e);
                return this.treeBuilder.buildMovieClip(t, this.library, e, !0), t
            }, t
        }(r.default);
    a = n.__decorate([o.component("DelayLoadableStage")], a), t.DelayLoadableStage = a
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            restrict: "EA",
            link: function(i, n, r) {
                var o, a, s, c, d = 0,
                    l = 0,
                    u = Boolean(r.egDraggableBounce) || !1,
                    p = !1,
                    h = Boolean(r.egDraggableInBound) || !1;
                r.egDraggableOnend && (c = t(r.egDraggableOnend)), r.egDraggablePrevent && i.$watch(r.egDraggablePrevent, function(e) {
                    return p = e
                });
                var f = function(e, t) {
                        a = Math.min(Math.max(e, o.left), o.right), s = Math.min(Math.max(t, o.top), o.bottom)
                    },
                    v = function(e) {
                        var t = e.pageX - d,
                            c = e.pageY - l;
                        o = r.egDraggableLimit && i.$eval(r.egDraggableLimit), !u && o && (c < o.top || c > o.bottom || t < o.left || t > o.right) || (h && o ? f(t, c) : (a = t, s = c), n.css("-webkit-transform", "matrix(1, 0, 0, 1, " + a + ", " + s + ")"))
                    },
                    m = function() {
                        u && o && (f(a, s), n.css({
                            "-webkit-transition": "0.13s ease-in-out -webkit-transform",
                            "-webkit-transform": "translate(" + a + "px, " + s + "px)"
                        })), e.off("mousemove", v), e.off("mouseup", m), c && c(i, {
                            $dx: a,
                            $dy: s
                        })
                    },
                    g = n.find("[eg-drag-handle]");
                g.length || (g = n), g.on("mousedown", function(t) {
                    if (!p) {
                        t.preventDefault(), n.css("-webkit-transition", "");
                        var i = n.css("-webkit-transform").match(/-?[\d\.]+/g);
                        d = t.pageX - parseInt(i[4], 10), l = t.pageY - parseInt(i[5], 10), e.on("mousemove", v), e.on("mouseup", m)
                    }
                }), n.on("$destroy", function() {
                    c = null, m()
                })
            }
        }
    }
    n.$inject = ["$document", "$parse"], e.exports = n
}, function(e, t, i) {
    "use strict";

    function n() {
        return function(e, t, i) {
            r.default(t, function() {
                return e.$apply(function() {
                    return e.$eval(i.egEnter)
                })
            })
        }
    }
    var r = i(374);
    e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            link: function(t, i) {
                i.on("focus", function() {
                    return e.overrideKeyboard("eg-key")
                }), i.on("blur $destroy", function() {
                    return e.clearKeyboardOverride("eg-key")
                })
            }
        }
    }
    n.$inject = ["inputService"], e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e, t, i, n) {
        return {
            restrict: "E",
            template: "<div></div>",
            replace: !0,
            scope: !0,
            link: function(t, o, a) {
                var s = r.basename(a.src, ".json"),
                    c = n.pop(s),
                    d = c.stage,
                    l = i.transition.$from().name;
                d.reboot(), t.scene = d;
                var u = t.$on("$destroy", function() {
                    u(), delete t.scene, d.detach(), n.requestDestroy(d)
                });
                c.binder ? (o.replaceWith(d.htmlElement), c.binder.onStageInitialize(l)) : o.replaceWith(e(d.htmlElement)(t)), t.$broadcast("handleSceneInitialize", d)
            }
        }
    }
    var r = i(211);
    n.$inject = ["$compile", "$transitions", "$state", "prebuildService"], e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            restrict: "A",
            link: function(t, i, n) {
                if (i.is("img")) {
                    var o = n.egFallbackSrc;
                    r.default(i, o && e("cdn")(o))
                }
            }
        }
    }
    var r = i(257);
    n.$inject = ["$filter"], e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            restrict: "E",
            template: "<div></div>",
            replace: !0,
            scope: !0,
            link: function(i, n, o) {
                var a = r.basename(o.src, ".json"),
                    s = e.transition.$from().name;
                t.setLink(a, i, n, s);
                var c = i.$on("$destroy", function() {
                    c(), t.purgeIfNotLoaded(a)
                })
            }
        }
    }
    var r = i(211);
    n.$inject = ["$state", "lazyLoadService"], e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        var t = ["wheelSpeed", "wheelPropagation", "swipePropagation", "minScrollbarLength", "maxScrollbarLength", "useBothWheelAxes", "useKeyboard", "suppressScrollX", "suppressScrollY", "scrollXMarginOffset", "scrollYMarginOffset", "destroyDelay"];
        return {
            link: function(i, n, r) {
                var o = {};
                r.egScroll && r.egScroll.split(";").forEach(function(t) {
                    var i = t.split(":");
                    2 === i.length && (o[i[0]] = e(i[1])())
                }), t.forEach(function(t) {
                    r[t] && (o[t] = e(r[t])())
                }), n.perfectScrollbar(o), i.$on("$destroy", function() {
                    setTimeout(function() {
                        return n.perfectScrollbar("destroy")
                    }, o.destroyDelay || 0)
                })
            }
        }
    }
    n.$inject = ["$parse"], e.exports = n
}, function(e, t, i) {
    window.beStartGame && !/development/.test(navigator.userAgent) || i(761)
}, function(e, t) {
    ! function(e) {
        e.someTestFunction = function() {}, e.addEntry = function() {
            angular.element(document.body).injector().get("room2Service").roomManager.updateEntry({}, {
                delete: !1,
                body: {
                    slot: 2,
                    pid: "pid12345",
                    vehicle: {
                        id: "vid12345",
                        code: 90,
                        grade: 5,
                        parts: {
                            engine: 0,
                            transmission: 0,
                            nitroTank: 0,
                            bumper: 0,
                            frame: 0
                        },
                        paint: {
                            color: 10,
                            wrap: 0,
                            decal: -1
                        }
                    },
                    ready: !1
                }
            })
        }, e.deleteEntry = function() {
            angular.element(document.body).injector().get("room2Service").roomManager.updateEntry({}, {
                delete: !0,
                body: {
                    slot: 2,
                    pid: "pid12345",
                    vehicle: {
                        id: "vid12345",
                        code: 90,
                        grade: 5,
                        parts: {
                            engine: 0,
                            transmission: 0,
                            nitroTank: 0,
                            bumper: 0,
                            frame: 0
                        },
                        paint: {
                            color: 10,
                            wrap: 0,
                            decal: -1
                        }
                    },
                    ready: !1
                }
            })
        }
    }(window)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(6),
        a = i(10),
        s = function() {
            function e(e, t, i) {
                this.$window = e, this.$translate = t, this.$rootScope = i, this.langCache = {}, this.localLangDate = new Date(e.edge.buildDate)
            }
            return e.prototype.isEdgeBrowser = function() {
                return !!this.$window.beStartGame
            }, e.prototype.getConfig = function() {
                if (this.configPromise) return this.configPromise;
                var e = this.isEdgeBrowser() ? o.resolve(this.getCoreConfig()) : this.getMetaConfig();
                return this.configPromise = e.then(function(e) {
                    return log.info("init edge-ui config:", JSON.stringify(e)), e
                })
            }, e.prototype.getCoreConfig = function() {
                return this.$window.beGetConfig()
            }, e.prototype.getMetaConfig = function() {
                return a.requestHttp("GET", "staticdata/config.json").then(function(e) {
                    return n.__assign({
                        locale: "ko",
                        publisher: "dev",
                        debug: !1
                    }, e)
                })
            }, e.prototype.getCdnLangDataAndDate = function(e) {
                return this.getConfig().then(function(t) {
                    return new o(function(i) {
                        var n = function() {
                                log.error("getCdnLangDataAndDate; couldn't found data"), i({
                                    date: new Date(0)
                                })
                            },
                            r = function(t) {
                                if (!t || !t.data || t.locale !== e) return !1;
                                var i = _.first(_.keys(t.data));
                                return "string" == typeof t.data[i]
                            };
                        $.get(t.cdn + "l10n-string-" + e + ".json").then(function(e, t, o) {
                            if (!e) return n();
                            if (!e.data && (log.warn("getCdnLangDataAndDate; couldn't recognize response. trying parse...", o.getAllResponseHeaders()), "string" == typeof e)) try {
                                e = JSON.parse(e)
                            } catch (e) {}
                            if (!r(e)) return n();
                            i({
                                data: e.data,
                                date: new Date(o.getResponseHeader("last-modified"))
                            })
                        }, n)
                    })
                })
            }, e.prototype.getLocalLangData = function(e) {
                return a.requestHttp("GET", "staticdata/l10n-string-" + e + ".json").then(function(e) {
                    return (_.isObject(e) ? e : JSON.parse(e)).data
                })
            }, e.prototype.scheduleRefresh = function(e) {
                var t = this,
                    i = function() {
                        return t.$translate.refresh()
                    };
                if (e === this.$translate.use()) return i();
                var n = this.$rootScope.$on("$translateChangeEnd", function() {
                    n(), i()
                })
            }, e.prototype.getLangData = function(e) {
                var t = this;
                if (this.langCache[e]) return o.resolve(this.langCache[e]);
                var i = this.getCdnLangDataAndDate(e);
                return this.getLocalLangData(e).then(function(n) {
                    return i.then(function(i) {
                        i.data && +t.localLangDate < +i.date && (t.langCache[e] = i.data, t.scheduleRefresh(e)), $(t.$window).trigger("l10n.settled", [e, t.langCache[e]])
                    }), t.langCache[e] = n
                })
            }, e
        }();
    s.$inject = ["$window", "$translate", "$rootScope"], t.ConfigLoader = s, angular.module("edge.components").factory("configLoader", r.default.generateService(s))
}, , , , , , , , function(e, t, i) {
    "use strict";

    function n(e) {
        return r.encrypt(JSON.stringify(e), o).toString()
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(500),
        o = "37c1#5^z28x7s4ds10x[81";
    t.encrypt = n
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(215),
        r = i(829),
        o = i(830),
        a = i(831),
        s = i(832),
        c = i(833),
        d = i(834),
        l = i(835),
        u = i(836),
        p = i(838),
        h = i(839),
        f = i(840),
        v = i(841),
        m = i(842),
        g = i(843),
        y = i(849),
        S = i(850),
        _ = i(851),
        E = i(852),
        T = i(853),
        C = i(854),
        b = i(855),
        P = i(856),
        I = i(857),
        M = i(858),
        A = i(859),
        N = i(860),
        R = i(861),
        L = i(862),
        O = i(863),
        x = i(864),
        w = i(865),
        B = i(866),
        D = i(867),
        F = i(868),
        k = i(869),
        U = i(870),
        H = i(871),
        V = i(872),
        G = i(873),
        $ = i(874),
        j = i(875),
        K = i(876),
        W = i(877),
        z = i(881),
        Y = i(882),
        q = i(883),
        X = i(884),
        Q = i(885),
        J = i(886),
        Z = i(887),
        ee = i(888),
        te = i(889),
        ie = i(890);
    t.reducer = n.combineReducers({
        messenger: r.default,
        navigation: o.default,
        notifier: a.default,
        inviteList: s.default,
        popup: c.default,
        configuration: d.default,
        multiplayLobby: l.default,
        announcement: u.default,
        room: p.default,
        reward: h.default,
        match: f.default,
        inbox: v.default,
        contacts: m.default,
        license: g.default,
        inventory: y.default,
        player: S.default,
        market: _.default,
        marketSearch: E.default,
        ranked: T.default,
        vehicle: C.default,
        production: b.default,
        shop: P.default,
        parts: I.default,
        partsInventory: M.default,
        partsManagement: A.default,
        vehicleDetailParts: N.default,
        vehicleUpgrade: R.default,
        partsCombine: L.default,
        vehicleStatus: O.default,
        driftmodeResult: x.default,
        playerInfo: w.default,
        globalPanel: B.default,
        promotion: D.default,
        lobby: F.reducer,
        tuningShop: k.default,
        quickMatch: U.reducer,
        rankedEvent: H.default,
        worldChat: V.default,
        clan: G.default,
        videoGuide: $.default,
        auction: j.default,
        numberPlate: K.default,
        view: W.default,
        festival: z.default,
        coreLoading: Y.default,
        steering: q.default,
        partsMaterialProductionState: X.default,
        trade: Q.default,
        quest: J.default,
        timetrial: Z.default,
        campaign: ee.default,
        mission: te.default,
        tutorial: ie.default
    });
    ! function() {
        var e = {},
            t = {};
        r.default(e, t), o.default(e, t), a.default(e, t), s.default(e, t), c.default(e, t), d.default(e, t), l.default(e, t), u.default(e, t), p.default(e, t), h.default(e, t), f.default(e, t), v.default(e, t), m.default(e, t), g.default(e, t), y.default(e, t), S.default(e, t), _.default(e, t), E.default(e, t), T.default(e, t), C.default(e, t), b.default(e, t), P.default(e, t), I.default(e, t), M.default(e, t), A.default(e, t), N.default(e, t), R.default(e, t), L.default(e, t), O.default(e, t), x.default(e, t), w.default(e, t), B.default(e, t), D.default(e, t), F.reducer(e, t), k.default(e, t), U.reducer(e, t), H.default(e, t), V.default(e, t), G.default(e, t), $.default(e, t), j.default(e, t), K.default(e, t), W.default(e, t), z.default(e, t), Y.default(e, t), q.default(e, t), X.default(e, t), Q.default(e, t), J.default(e, t), Z.default(e, t), ee.default(e, t), te.default(e, t), ie.default(e, t)
    }()
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = a), t.type) {
            case "messenger.toggle":
                return r.__assign({}, e, {
                    selected: !e.selected
                });
            case "messenger.hide":
                return r.__assign({}, e, {
                    selected: !1
                });
            case "messenger.tab":
                return r.__assign({}, e, {
                    tab: t.tab
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(501),
        a = {
            selected: !1,
            tab: o.Tab.Friend
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        if (!_.isEmpty(t)) return _.isUndefined(e[t]) ? n(e, t.substring(0, t.lastIndexOf("."))) : e[t]
    }

    function r(e, t) {
        switch (void 0 === e && (e = v), t.type) {
            case "navigation.init":
                return t.state;
            case "navigation.changeLocalization":
                var i = {};
                return _.each(e.navs, function(e, n) {
                    i[n] = _.assign({}, e, {
                        text: t.translate(e.stringCode)
                    })
                }), _.assign({}, e, {
                    navs: i
                });
            case "navigation.navigated":
                var r = n(e.stateMap, t.uiState),
                    o = l(e, e.navs[r]),
                    m = _.find(o, function(e) {
                        return e.selected && e.parent
                    }),
                    g = a(o, t.uiState, e.stateMap),
                    y = _.assign({}, e, {
                        navs: o,
                        uiState: t.uiState,
                        subState: g,
                        wasSub2NavDisplayed: s(),
                        shouldNav2Display: m ? c(m) : e.shouldNav2Display,
                        shouldNav2Disappear: m ? d(m) : e.shouldNav2Disappear
                    });
                return h = y, f.__assign({}, e, y);
            case "navigation.showPreview":
                return _.assign({}, e, {
                    previewNavs: l(e, t.nav),
                    preview: t.nav
                });
            case "navigation.closePreview":
                var S = e.navs;
                return t.restoreOriginalUiState && (S = l(e, e.navs[e.stateMap[e.uiState]])), _.assign({}, e, {
                    navs: S,
                    previewNavs: void 0,
                    preview: void 0
                });
            case "navigation.lockNavigate":
                var E = u(e, t.navOrState);
                return E && !E.locked ? _.assign({}, e, {
                    navs: p(e, E)
                }) : e;
            case "navigation.unlockNavigate":
                var E = u(e, t.navOrState);
                return E && E.locked ? _.assign({}, e, {
                    navs: p(e, E)
                }) : e;
            default:
                return e
        }
    }

    function o(e, t) {
        if (e) {
            for (; e.parent;) e = t[e.parent];
            return e
        }
    }

    function a(e, t, i) {
        var n = {
                open: !1,
                close: !1
            },
            r = o(e[i[t]], e);
        if (!r) return n;
        var a = {
            open: r.children.length > 0,
            close: !r.children.length
        };
        if (!h || !h.uiState) return a;
        if (h.uiState === t) return n;
        var s = o(e[i[h.uiState]], e);
        return s ? {
            open: !s.children.length && r.children.length > 0,
            close: s.children.length > 0 && !r.children.length
        } : a
    }

    function s() {
        var e = h ? _.find(h.navs, function(e) {
            return e.selected && e.parent
        }) : void 0;
        return e && e.children && e.children.length > 0
    }

    function c(e) {
        return e.children.length > 0
    }

    function d(e) {
        var t = h ? _.find(h.navs, function(e) {
            return e.selected && e.parent
        }) : void 0;
        return t && e.parent === t.parent
    }

    function l(e, t) {
        for (var i = _.filter(e.navs, function(e) {
                return e.selected
            }).map(function(e) {
                return _.assign({}, e, {
                    selected: !1
                })
            }), n = []; t;) n.push(t), t = e.navs[t.parent];
        return n = n.map(function(e) {
            return _.assign({}, e, {
                selected: !0
            })
        }), _.assign({}, e.navs, _.keyBy(i, "id"), _.keyBy(n, "id"))
    }

    function u(e, t) {
        var i;
        if ("string" == typeof t) {
            var n = e.stateMap[t];
            n && (i = e.navs[n.toString()])
        } else i = t;
        return i
    }

    function p(e, t) {
        return _.mapValues(e.navs, function(e) {
            return e.id === t.id ? _.assign({}, e, {
                locked: !e.locked
            }) : e
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var h, f = i(0),
        v = {
            mainNavs: [],
            navs: {},
            stateMap: {},
            uiState: "",
            subState: {
                open: !1,
                close: !1
            },
            wasSub2NavDisplayed: !1,
            shouldNav2Display: !1,
            shouldNav2Disappear: !0
        };
    t.default = r
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = a), t.type) {
            case "notifier.addLast":
                return r(e, t.notifier);
            case "notifier.addFirst":
                return r(e, t.notifier, !0);
            case "global-panel.hide":
                t = o.__assign({}, t, {
                    tag: t.tag + ".from-global-panel"
                });
            case "notifier.pause":
                return _.includes(e.pauseTags, t.tag) ? e : o.__assign({}, e, {
                    pauseTags: e.pauseTags.concat([t.tag])
                });
            case "global-panel.show":
            case "global-panel.resetTopPanel":
                t = o.__assign({}, t, {
                    tag: t.tag + ".from-global-panel"
                });
            case "notifier.resume":
                return _.includes(e.pauseTags, t.tag) ? o.__assign({}, e, {
                    pauseTags: _.without(e.pauseTags, t.tag)
                }) : e;
            case "notifier.display":
                return e.notifiers.length ? o.__assign({}, e, {
                    displayed: _.head(e.notifiers),
                    notifiers: _.tail(e.notifiers)
                }) : e;
            case "notifier.hide":
                return e.displayed ? o.__assign({}, e, {
                    displayed: void 0
                }) : e;
            case "notifier.toggleHistory":
                return o.__assign({}, e, {
                    histories: e.historyVisible ? e.histories.map(function(e) {
                        return e.isNew ? o.__assign({}, e, {
                            isNew: !1
                        }) : e
                    }) : e.histories,
                    historyVisible: !e.historyVisible,
                    isNewArrival: !1
                });
            case "notifier.hideHistory":
                return e.historyVisible ? o.__assign({}, e, {
                    histories: e.histories.map(function(e) {
                        return e.isNew ? o.__assign({}, e, {
                            isNew: !1
                        }) : e
                    }),
                    historyVisible: !1,
                    isNewArrival: !1
                }) : e;
            case "notifier.deleteHistory":
                var i = _.remove(e.histories, function(e) {
                    return e.date !== t.date
                });
                return o.__assign({}, e, {
                    histories: i,
                    isNewArrival: _.some(i, function(e) {
                        return e.isNew
                    })
                });
            case "notifier.deleteAllHistory":
                return o.__assign({}, e, {
                    histories: [],
                    isNewArrival: !1
                });
            default:
                return e
        }
    }

    function r(e, t, i) {
        if (void 0 === i && (i = !1), void 0 === t.title && void 0 === t.body) return e;
        var n = o.__assign({}, t);
        return e.histories.length >= s && e.histories.pop(), o.__assign({}, e, {
            notifiers: i ? [t].concat(e.notifiers) : e.notifiers.concat([t]),
            histories: [n].concat(e.histories),
            isNewArrival: !0
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0),
        a = {
            notifiers: [],
            histories: [],
            historyVisible: !1,
            pauseTags: [],
            displayed: void 0,
            isNewArrival: !1
        },
        s = 30;
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        var t = new Date(+new Date - 6e5);
        return e.filter(function(e) {
            return e.date > t
        })
    }

    function r(e, t) {
        switch (void 0 === e && (e = {
                messages: [],
                listVisible: !1,
                checkNewInvite: !0,
                openInviteList: !1,
                notifiedMessage: {},
                notiClass: ""
            }), t.type) {
            case "invite-list.invite":
                var i = t.message;
                return {
                    messages: [i].concat(n(e.messages).filter(function(e) {
                        return !(i.sender.pid === e.sender.pid && i.roomId === e.roomId)
                    })).slice(0, 10), notifiedMessage: i, notiClass: "show", listVisible: !1, checkNewInvite: !1, openInviteList: !1
                };
            case "invite-list.removeUnavailable":
                return Object.assign({}, e, {
                    messages: e.messages.filter(function(e) {
                        return !(e.roomId == t.roomId)
                    })
                });
            case "invite-list.clear":
                return Object.assign({}, e, {
                    notifiedMessage: null,
                    notiClass: ""
                });
            case "invite-list.removeMessage":
                return Object.assign({}, e, {
                    messages: e.messages.filter(function(e) {
                        return !(e.sender == t.message.sender && e.roomId == t.message.roomId)
                    })
                });
            case "invite-list.toggleInviteList":
                return Object.assign({}, e, {
                    listVisible: !e.listVisible && e.messages.length > 0,
                    openInviteList: !e.openInviteList
                });
            case "invite-list.onClickOutOfHitArea":
                return {
                    messages: n(e.messages), notifiedMessage: null, notiClass: "", listVisible: !1, checkNewInvite: e.checkNewInvite, openInviteList: !1
                };
            default:
                return e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = r
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "popup.open":
                return _.assign({}, e, {
                    name: t.name,
                    context: t.context,
                    confirm: void 0,
                    cancel: void 0,
                    close: void 0
                });
            case "popup.update":
                return _.assign({}, e, {
                    context: _.assign({}, e.context, t.props)
                });
            case "popup.confirm":
                return {
                    confirm: t.value
                };
            case "popup.cancel":
                return {
                    cancel: !0
                };
            case "popup.close":
                return {
                    close: !0
                }
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t, i) {
        return o.__assign({}, e, {
            configs: o.__assign({}, e.configs, (n = {}, n[t] = o.__assign({}, e.configs[t], {
                staging: i
            }), n))
        });
        var n
    }

    function r(e, t) {
        switch (void 0 === e && (e = {
                configs: {},
                isShow: !1
            }), t.type) {
            case "configuration.show":
                return o.__assign({}, e, {
                    isShow: t.isShow
                });
            case "configuration.addItem":
                var i = t.item;
                return i.staging = _.cloneDeep(i.applied), i.isActive && (e.activeId = i.id), e.configs[i.id] = i, o.__assign({}, e);
            case "configuration.activateItem":
                var r = e.configs,
                    s = r[e.activeId],
                    c = r[t.id];
                if (!c || s === c) break;
                return o.__assign({}, e, {
                    configs: o.__assign({}, r, (p = {}, p[s.id] = o.__assign({}, s, {
                        isActive: !1
                    }), p[c.id] = o.__assign({}, c, {
                        isActive: !0
                    }), p)),
                    activeId: c.id
                });
            case "configuration.updateStaging":
                var d = e.configs[t.id];
                if (!d) break;
                if (_.every(t.changes, function(e, t) {
                        return d.staging[t] === e
                    })) break;
                var l = o.__assign({}, d.staging, t.changes);
                return _.each(l, function(e, t) {
                    void 0 === e && delete l[t]
                }), n(e, t.id, l);
            case "configuration.discardStaging":
                var i = e.configs[t.id];
                if (!i || a.shallowEqual(i.staging, i.applied)) break;
                return n(e, t.id, _.cloneDeep(i.applied));
            case "configuration.initialize":
                var i = e.configs[t.id];
                if (!i || a.shallowEqual(i.staging, i.default)) break;
                return n(e, t.id, _.cloneDeep(i.default));
            case "configuration.update":
                var i = e.configs[t.id];
                if (!i) break;
                var u = n(e, t.id, _.cloneDeep(t.config));
                return u.configs[t.id].applied = _.cloneDeep(t.config), u
        }
        return e;
        var p
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0),
        a = i(81);
    t.default = r
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "multiplay-lobby.showCreateRoomPopup":
                return r.__assign({}, e, {
                    createRoomPopup: r.__assign({}, o.createRoomPopup, {
                        mode: t.mode
                    })
                });
            case "multiplay-lobby.hideCreateRoomPopup":
                return r.__assign({}, e, {
                    createRoomPopup: void 0
                });
            case "multiplay-lobby.showEnterRoomPopup":
                return r.__assign({}, e, {
                    enterRoomPopup: r.__assign({}, o.enterRoomPopup)
                });
            case "multiplay-lobby.hideEnterRoomPopup":
                return r.__assign({}, e, {
                    enterRoomPopup: void 0
                });
            case "multiplay-lobby.showRoomPasswordPopup":
                return r.__assign({}, e, {
                    roomPasswordPopup: r.__assign({}, o.roomPasswordPopup, {
                        roomId: t.roomId
                    })
                });
            case "multiplay-lobby.updateRoomPasswordPopup":
                return r.__assign({}, e, {
                    roomPasswordPopup: r.__assign({}, e.roomPasswordPopup, {
                        password: t.data.password
                    })
                });
            case "multiplay-lobby.hideRoomPasswordPopup":
                return r.__assign({}, e, {
                    roomPasswordPopup: void 0
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            createRoomPopup: {
                title: "",
                maxPlayer: 8,
                maxVehicleClazz: "ALL",
                mode: "SPEEDINDIVIDUAL",
                hidden: !1,
                password: ""
            },
            enterRoomPopup: {
                roomId: -1
            },
            roomPasswordPopup: {
                roomId: -1,
                password: ""
            }
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {
                notices: [],
                fatigues: []
            }), t.type) {
            case "ANNOUNCEMENT_PUSH":
                var i = t.content;
                if (!i || o.default.isEmptyString(i.content)) return e;
                var n = r.getAnnounceTypeString(t.kind);
                return _.isEqual(_.last(e[n]), i) ? e : _.assign({}, e, (s = {}, s[n] = e[n].concat([i]), s));
            case "ANNOUNCEMENT_CLOSE_CURRENT":
                var n = r.getAnnounceTypeString(t.kind),
                    a = _.head(e[n]);
                return e[n].length && "intro" === a.frame ? _.assign({}, e, (c = {}, c[n] = [_.assign({}, a, {
                    frame: "outro"
                })].concat(_.tail(e[n])), c)) : e;
            case "ANNOUNCEMENT_SHOW_NEXT":
                var n = r.getAnnounceTypeString(t.kind);
                return e[n].length < 1 ? e : _.assign({}, e, (d = {}, d[n] = _.tail(e[n]), d))
        }
        return e;
        var s, c, d
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(175),
        o = i(4);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return {
            type: "ANNOUNCEMENT_PUSH",
            kind: e,
            content: t
        }
    }

    function r(e) {
        return {
            type: "ANNOUNCEMENT_CLOSE_CURRENT",
            kind: e
        }
    }

    function o(e) {
        return {
            type: "ANNOUNCEMENT_SHOW_NEXT",
            kind: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.push = n, t.close = r, t.next = o
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "room.createRoom":
                return _.assign({}, e, {
                    room: t.room,
                    selectedSlot: t.mySlot,
                    isKicked: !1
                });
            case "room.leaveRoom":
                return _.assign({}, {
                    isKicked: t.isKicked
                });
            case "room.updateEntry":
                var i = t.changes,
                    n = _.findIndex(e.room.players, function(e) {
                        return e.pid === i.entry.pid
                    }),
                    a = _.assign({}, e.room);
                if (-1 === n && (n = a.players.length), i.isExit) {
                    var s = e.room.players;
                    a.players = s.slice(0, n).concat(s.slice(n + 1, s.length))
                } else a.players = e.room.players.slice(), a.players[n] = i.entry;
                return _.assign({}, e, {
                    room: a
                });
            case "room.removeEntry":
                var c = t.pid,
                    d = e.room.players.filter(function(e) {
                        return e.pid !== c
                    }),
                    l = e.room.observers.filter(function(e) {
                        return e.pid !== c
                    });
                return r.__assign({}, e, {
                    room: r.__assign({}, e.room, {
                        players: d,
                        observers: l
                    })
                });
            case "room.updateInfo":
                var u = t.changes,
                    p = u.gameMode,
                    h = u.maxVehicleClazz,
                    f = u.trackCode,
                    v = u.isRandomTrack,
                    m = u.locked,
                    a = _.assign({}, e.room, {
                        gameMode: p,
                        maxVehicleClazz: h,
                        trackCode: f,
                        isRandomTrack: v
                    });
                return o.shallowEqual(e.room.locked, m) || (a.locked = m), _.assign({}, e, {
                    room: a
                });
            case "room.updateHostSlot":
                var u = t.changes,
                    a = _.assign({}, e.room, {
                        hostSlot: u.hostSlot
                    });
                return _.assign({}, e, {
                    room: a
                });
            case "room.updateSelectedSlot":
                return _.assign({}, e, {
                    selectedSlot: t.slot
                });
            case "room.clearKickState":
                return _.assign({}, e, {
                    isKicked: !1
                });
            case "room.showInvitationPopup":
                return _.assign({}, e, {
                    invitationPopup: !0
                });
            case "room.hideInvitationPopup":
                return _.assign({}, e, {
                    invitationPopup: !1
                });
            case "room.showChangeVehiclePopup":
                return _.assign({}, e, {
                    changeVehiclePopup: {
                        slot: t.slot,
                        featureType: t.featureType
                    }
                });
            case "room.hideChangeVehiclePopup":
                return _.assign({}, e, {
                    changeVehiclePopup: void 0
                });
            case "room.setupChangeTrackPopup":
                return _.assign({}, e, {
                    changeTrackPopup: _.pick(t, ["tracks", "defaultOrder", "gameMode", "channel"])
                });
            case "room.setChangeTrackPopupIndices":
                return _.assign({}, e, {
                    changeTrackPopup: _.assign({}, e.changeTrackPopup, _.pick(t, ["indices", "difficultyCode"]))
                });
            case "room.hideChangeTrackPopup":
                return _.assign({}, e, {
                    changeTrackPopup: void 0
                });
            case "room.setChangeTrackPopupTrack":
                return _.assign({}, e, {
                    changeTrackPopup: _.assign({}, e.changeTrackPopup, _.pick(t, ["selected"]))
                });
            case "room.resetMatchEndTime":
                var a = _.assign({}, e.room, {
                    matchEndAt: t.timestamp
                });
                return _.assign({}, e, {
                    room: a
                });
            case "room.updateTeam":
                var g = t.teamId;
                return _.assign({}, e, {
                    teamId: g
                });
            case "room.updateRoomStatus":
                if (!e.room) break;
                return r.__assign({}, e, {
                    room: r.__assign({}, e.room, {
                        status: t.status
                    })
                });
            case "room.showChangePursuitTechPopup":
                return _.assign({}, e, {
                    changePursuitTechPopup: {
                        items: [t.item1, t.item2]
                    }
                });
            case "room.hideChangePursuitTechPopup":
                return _.assign({}, e, {
                    changePursuitTechPopup: void 0
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(81);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "reward.endMatch":
                return _.assign({}, e, {
                    matchResult: t.matchResult,
                    teamBattleResult: t.teamBattleResult,
                    pickState: "unpicked"
                });
            case "reward.receiveReward":
                return _.assign({}, e, {
                    reward: t.reward,
                    pickState: "unpicked",
                    isRetired: !1
                });
            case "reward.receiveFestivalPoint":
                return _.assign({}, e, {
                    festivalPoint: t.festivalPoint
                });
            case "reward.setPrevPlayerStatus":
                return _.assign({}, e, {
                    prevStatus: t.prevStatus
                });
            case "reward.setRankedMatchStatus":
                return _.assign({}, e, {
                    rankedMatch: t.rankedMatch
                });
            case "reward.abandonMatch":
                return _.assign({}, e, {
                    matchResult: t.matchResult,
                    isMatchAbandoned: !0,
                    pickState: "unpicked"
                });
            case "reward.expiredMatch":
                return r.__assign({}, e, {
                    matchResult: t.matchResult,
                    teamBattleResult: t.teamBattleResult,
                    isMatchExpired: !0,
                    pickState: "unpicked"
                });
            case "reward.setRetired":
                return _.assign({}, e, {
                    isRetired: !0
                });
            case "reward.updatePickState":
                var i = t.state,
                    n = t.reward,
                    o = {
                        pickState: i
                    };
                return n && (o.pickReward = n), _.assign({}, e, o);
            case "reward.clearState":
                return {}
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "match.createMatch":
                return r.__assign({}, e, {
                    match: t.match
                });
            case "match.leaveMatch":
                return {};
            case "match.updatePlayer":
                var i = t.changes.pid,
                    n = _.findIndex(e.match.players, function(e) {
                        return e.id === i
                    });
                if (n < 0) break;
                return r.__assign({}, e, {
                    match: r.__assign({}, e.match, {
                        players: e.match.players.map(function(e) {
                            return e.id === i ? r.__assign({}, e, {
                                state: t.changes.state
                            }) : e
                        })
                    })
                });
            case "match.addRecord":
                if (e.records && _.find(e.records, {
                        id: t.record.id
                    })) return o.info("Drop duplicated addRecord action:", t.record.id, t.record), e;
                if (e.match && !_.find(e.match.players, {
                        id: t.record.id
                    })) return e;
                var a = e.records ? e.records.slice() : [];
                return a.push(t.record), r.__assign({}, e, {
                    records: a
                });
            case "match.createDedicatedServer":
                return r.__assign({}, e, {
                    hostInfo: t.server
                });
            case "match.updatePlayerLoadingProgress":
                return r.__assign({}, e, {
                    match: r.__assign({}, e.match, {
                        players: e.match.players.map(function(e) {
                            var i = t.changes[e.id];
                            return i ? r.__assign({}, e, {
                                loadingProgress: i
                            }) : e
                        })
                    })
                });
            case "match.fillAiPlayers":
                var s = r.__assign({}, e.match);
                return s.players = s.players.concat(t.players), r.__assign({}, e, {
                    match: s
                });
            case "match.updateDistanceCheckEnd":
                return r.__assign({}, e, {
                    isEndFromDistanceCheck: !0
                });
            case "match.updatePlayerArrested":
                var c = t.pid,
                    n = _.findIndex(e.match.players, function(e) {
                        return e.id === c
                    });
                if (n < 0) break;
                return r.__assign({}, e, {
                    match: r.__assign({}, e.match, {
                        players: e.match.players.map(function(e) {
                            return e.id === c ? r.__assign({}, e, {
                                arrested: !0
                            }) : e
                        })
                    })
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(7);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "inbox.packages.set":
                return _.extend({}, {
                    packages: t.packages || []
                });
            case "inbox.packages.add":
                var i = t.pack,
                    n = (e.packages || []).concat([i]);
                return _.extend({}, e, {
                    packages: n
                });
            case "inbox.packages.delete":
                var o = _.filter(e.packages, function(e) {
                    return !_.includes(t.ids, e.id)
                });
                return r.__assign({}, e, {
                    packages: o
                });
            case "inbox.packages.deleteorder":
                var a = _.findIndex(e.packages, function(e) {
                    return e.opts && e.opts.orderNo && e.opts.orderNo === t.orderNo
                });
                return -1 === a ? e : _.extend({}, e, {
                    packages: e.packages.slice(0, a).concat(e.packages.slice(a + 1, e.packages.length))
                });
            case "inbox.filter.set":
                return _.extend({}, e, {
                    filter: t.filter
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        if (void 0 === e && (e = r), !/contacts\./.test(t.type)) return e;
        switch (t.type) {
            case "contacts.replaceFriends":
                var i = t.friends.slice();
                return _.assign({}, e, {
                    friends: i
                });
            case "contacts.replaceInvites":
                var n = t.sentInvites.slice(),
                    o = t.recvInvites.slice();
                return _.assign({}, e, {
                    sentInvites: n,
                    recvInvites: o
                });
            case "contacts.addFriend":
                var i = e.friends.concat([t.friend]);
                return _.assign({}, e, {
                    friends: i
                });
            case "contacts.deleteFriend":
                var a = _.findIndex(e.friends, function(e) {
                    return e.id === t.id
                });
                if (-1 === a) return e;
                var s = e.friends,
                    i = s.slice(0, a).concat(s.slice(a + 1, s.length));
                return _.assign({}, e, {
                    friends: i
                });
            case "contacts.addInvite":
                if ("sent" === t.invite.state) {
                    var n = e.sentInvites.concat([t.invite]);
                    return _.assign({}, e, {
                        sentInvites: n
                    })
                }
                var o = e.recvInvites.concat([t.invite]);
                return _.assign({}, e, {
                    recvInvites: o
                });
            case "contacts.deleteInvite":
                var c = _.assign({}, e),
                    d = _.findIndex(e.sentInvites, function(e) {
                        return e.id === t.id
                    });
                if (-1 !== d) {
                    var s = e.sentInvites,
                        n = s.slice(0, d).concat(s.slice(d + 1, s.length));
                    c.sentInvites = n
                }
                var l = _.findIndex(e.recvInvites, function(e) {
                    return e.id === t.id
                });
                if (-1 !== l) {
                    var s = e.recvInvites,
                        o = s.slice(0, l).concat(s.slice(l + 1, s.length));
                    c.recvInvites = o
                }
                return c;
            case "contacts.updatePresence":
                var a = _.findIndex(e.friends, function(e) {
                    return e.fpid === t.pid
                });
                if (-1 !== a) {
                    var u = _.assign({}, e.friends[a], {
                            presence: t.presence
                        }),
                        i = e.friends.slice();
                    return i.splice(a, 1, u), _.assign({}, e, {
                        friends: i
                    })
                }
                return e
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = {
        friends: [],
        sentInvites: [],
        recvInvites: []
    };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = a), t.type) {
            case "license.init":
                var i = t.license,
                    n = i.code,
                    s = i.completedTest;
                return r.__assign({}, e, {
                    license: {
                        code: n,
                        completedTest: s
                    },
                    activeTab: Math.min(n + 1, o.LicenseCode.Expert),
                    licenseData: t.data
                });
            case "license.passTest":
                return r.__assign({}, e, {
                    staging: {
                        passedTest: t.testCode
                    }
                });
            case "license.promote":
                return r.__assign({}, e, {
                    staging: {
                        promote: t.code
                    }
                });
            case "license.openMain":
                return r.__assign({}, e, {
                    mainOpen: !0,
                    activeTab: Math.min(e.license.code + 1, o.LicenseCode.Expert)
                });
            case "license.closeMain":
                return r.__assign({}, e, {
                    mainOpen: !1
                });
            case "license.setCurrentTest":
                return r.__assign({}, e, {
                    currentTest: t.test
                });
            case "license.clearCurrentTest":
                return r.__assign({}, e, {
                    currentTest: void 0
                });
            case "license.applyStaging":
                var c = e.staging,
                    d = e.license;
                if (!c) break;
                if (void 0 !== c.passedTest) return r.__assign({}, e, {
                    license: r.__assign({}, d, {
                        completedTest: d.completedTest.concat([c.passedTest])
                    }),
                    staging: void 0
                });
                if (void 0 !== c.promote) return r.__assign({}, e, {
                    license: {
                        code: c.promote,
                        completedTest: []
                    },
                    staging: void 0
                });
                break;
            case "license.setActiveTab":
                var l = Math.min(t.code, o.LicenseCode.Expert);
                if (l !== e.activeTab) return r.__assign({}, e, {
                    activeTab: l
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(109);
    ! function(e) {
        e[e.normal = 0] = "normal", e[e.lock = 1] = "lock", e[e.unlock = 2] = "unlock"
    }(t.ChannelStatus || (t.ChannelStatus = {}));
    var a = {
        mainOpen: !1,
        activeTab: o.LicenseCode.Junior
    };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        for (var i in e) t.hasOwnProperty(i) || (t[i] = e[i])
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), n(i(845)), n(i(846)), n(i(847))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.Beginner = 1] = "Beginner", e[e.Junior = 2] = "Junior", e[e.Senior = 3] = "Senior", e[e.Expert = 4] = "Expert"
    }(t.LicenseCode || (t.LicenseCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.DefCoreModes = ["SPEED", "SPEED1ON1", "ITEM", "DRIFT", "FOXHUNTING", "PURSUIT"], t.SingleOnlyCoreModes = ["TIMEATTACK", "HOTPURSUIT", "TIMETRIAL"], t.CoreModes = t.DefCoreModes.concat(t.SingleOnlyCoreModes), t.PeerModes = ["INDIVIDUAL", "TEAM"]
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.ActionFeedbackTypes = ["speedreach", "perfectturbo", "overtaken", "slipstream", "noaccident", "jump", "driftdistance"]
}, function(e, t, i) {
    "use strict";

    function n(e, t, i) {
        switch (i.name) {
            case "time":
                return new f(e, t, i);
            case "takedowntime":
                return new v(e, t, i);
            case "jumprange":
                return new m(e, t, i);
            case "drifttime":
                return new g(e, t, i);
            case "slipstream":
                return new y(e, t, i);
            case "destroy":
                return new S(e, t, i);
            case "takedowntarget":
                return new E(e, t, i);
            case "durabilitystay":
                return new T(e, t, i);
            case "takedown":
                return new C(e, t, i);
            case "rank":
            case "topspeed":
            case "safedriving":
            case "itemhit":
            case "itemuse":
            case "turbocharge":
            case "turbouse":
            case "shortturbo":
            case "perfectturbo":
            case "itemget":
            case "brakeuse":
            case "vehicle":
            case "vehicleclass":
            case "handbrakeuse":
            case "perfectstart":
            case "vehiclereset":
            case "usehandbrake":
                return new p(e, t, i)
        }
        a.error("Unexpected test condition", i.name, i)
    }

    function r(e, t, i, n, r) {
        var o = i;
        return "time" === t ? o = d.default.formatLapTime(i) : "topspeed" === t ? o = Math.floor(i) : /drifttime|takedowntime|slipstream/.test(t) && (o = Math.floor(i / 1e3)), e("template")(_.assign({
            value: o
        }, r), n)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0),
        a = i(7),
        s = i(502),
        c = i(9),
        d = i(4),
        l = {
            time: "laptime",
            rank: "rank",
            takedown: "takedown",
            topspeed: "topspeed",
            safedriving: "hit",
            takedowntime: "takedown",
            itemhit: "itemhit",
            itemuse: "itemuse",
            jumprange: "jump",
            turbocharge: "turbocharge",
            turbouse: "turbouse",
            shortturbo: "shortturbo",
            drifttime: "drift",
            perfectturbo: "perfectturbo",
            itemget: "itemget",
            brakeuse: "brakeuse",
            slipstream: "slipstream",
            vehicle: "vehicle",
            vehicleclass: "vehicleclass",
            durabilitystay: "lowestHpRatio",
            handbrakeuse: "handBrakeUse",
            destroy: "destroy",
            takedowntarget: "takedown",
            perfectstart: "perfectstart",
            vehiclereset: "vehiclereset",
            usehandbrake: "usehandbrake"
        },
        u = function() {
            function e(e, t, i) {
                this.recordService = e, this.externalService = t, this.condition = i, this.name = l[i.name], this.lastStatus = this.test()
            }
            return Object.defineProperty(e.prototype, "current", {
                get: function() {
                    var e = this.recordService.getRecord(this.name);
                    return s.isRecordTypeArray(this.name) ? (e || []).length : e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "goal", {
                get: function() {
                    return this.condition.goal
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.test = function(e) {
                if (void 0 === e && (e = !1), this.isUnknown()) return 2;
                var t = this,
                    i = t.current,
                    n = t.goal;
                switch (this.condition.type.valuation) {
                    case "lower":
                        return i <= n ? 1 : 0;
                    case "upper":
                        return i >= n ? 1 : 0;
                    case "equal":
                        return i === n ? 1 : 0
                }
            }, e.prototype.getChange = function() {
                var e = this.test();
                return e !== this.lastStatus ? (this.lastStatus = e, 1 === e ? 1 : 0 === e ? 2 : 3) : 0
            }, e.prototype.cheat = function() {
                var e = this.recordService.getRecord(this.name),
                    t = this.goal;
                switch (this.condition.type.valuation) {
                    case "lower":
                        t = _.min([this.goal, e]);
                        break;
                    case "upper":
                        t = _.max([this.goal, e])
                }
                this.recordService.cheatRecord(this.name, t, s.isRecordTypeArray(this.name))
            }, e.prototype.cheatLose = function() {
                var e, t = this.recordService.getRecord(this.name);
                switch (this.condition.type.valuation) {
                    case "lower":
                        e = _.max([this.goal + 1, t]);
                        break;
                    case "upper":
                        e = _.min([this.goal - 1, t])
                }
                this.recordService.cheatRecord(this.name, e, s.isRecordTypeArray(this.name))
            }, e.prototype.getHudLabel = function(e) {
                var t = this.condition,
                    i = t.name,
                    n = t.type.lang.desc,
                    o = this,
                    a = o.current;
                return r(e, i, o.goal, n + "_HUD", {
                    current: a
                })
            }, e.prototype.destroy = function() {}, e.prototype.isUnknown = function() {
                return !1
            }, e
        }();
    t.Checker = u;
    var p = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), t
    }(u);
    t.DefaultChecker = p;
    var h = function(e) {
        function t(t, i, n) {
            var r = e.call(this, t, i, n) || this;
            return r.recordService = t, r.externalService = i, r.condition = n, r.deregister = i.on(c.default.beHUDSetTimeElapsed, function(e) {
                r.elapsedTime = e, e > r.goal && t.emit("changed", r.name)
            }), r
        }
        return o.__extends(t, e), t.prototype.test = function(t) {
            void 0 === t && (t = !1);
            var i = e.prototype.test.call(this, t);
            return this.deregister && 2 !== i && (this.deregister(), this.deregister = void 0), i
        }, t.prototype.destroy = function() {
            this.deregister && this.deregister()
        }, t
    }(u);
    t.ElapsedTimeChecker = h;
    var f = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), Object.defineProperty(t.prototype, "current", {
            get: function() {
                return this.recordService.getRecord(this.name) || this.elapsedTime
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.isUnknown = function() {
            return !this.recordService.getRecord(this.name) && (!this.elapsedTime || this.elapsedTime <= this.goal)
        }, t.prototype.test = function(t) {
            return void 0 === t && (t = !1), t ? 0 : e.prototype.test.call(this, t)
        }, t
    }(h);
    t.TimeChecker = f;
    var v = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), t.prototype.isUnknown = function() {
            return !this.elapsedTime || this.elapsedTime < this.goal && void 0 === this.current
        }, Object.defineProperty(t.prototype, "current", {
            get: function() {
                var e = _.minBy(this.recordService.getRecord(this.name), "time");
                return e && e.time
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.cheat = function() {
            this.recordService.pushRecord(this.name, {
                target: "42",
                time: this.goal - 1
            })
        }, t
    }(h);
    t.TakedownTimeChecker = v;
    var m = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), Object.defineProperty(t.prototype, "current", {
            get: function() {
                var e = _.maxBy(this.recordService.getRecord(this.name), "range");
                return e && e.range || 0
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.cheat = function() {
            this.recordService.pushRecord(this.name, {
                range: this.goal + 1
            })
        }, t
    }(u);
    t.JumpRangeChecker = m;
    var g = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), Object.defineProperty(t.prototype, "current", {
            get: function() {
                return _.sumBy(this.recordService.getRecord(this.name), "duration")
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.cheat = function() {
            this.recordService.pushRecord(this.name, {
                duration: this.goal + 1
            })
        }, t
    }(u);
    t.DriftTimeChecker = g;
    var y = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), Object.defineProperty(t.prototype, "current", {
            get: function() {
                return _.sumBy(this.recordService.getRecord(this.name), "duration")
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.cheat = function() {
            this.recordService.pushRecord(this.name, {
                duration: this.goal + 1
            })
        }, t
    }(u);
    t.SlipStreamChecker = y;
    var S = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), Object.defineProperty(t.prototype, "current", {
            get: function() {
                return (this.recordService.getRecord(this.name) || []).filter(function(e) {
                    return e.attacker === s.DestroyAttacker.Weapon
                }).length
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.cheat = function() {
            for (var e = 0; e < this.goal; e++) {
                this.recordService.getRecord(this.name).push({
                    attacker: s.DestroyAttacker.Weapon,
                    time: 42
                })
            }
        }, t
    }(u);
    t.DestroyChecker = S;
    var E = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), Object.defineProperty(t.prototype, "current", {
            get: function() {
                return _.find(this.recordService.getRecord(this.name), {
                    target: String(this.goal)
                }) && this.goal
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.test = function() {
            return this.current === this.goal ? 1 : 0
        }, t.prototype.cheat = function() {
            this.recordService.pushRecord(this.name, {
                target: String(this.goal),
                time: 42
            })
        }, t.prototype.cheatLose = function() {}, t
    }(u);
    t.TakedownTargetChecker = E;
    var T = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), t.prototype.test = function() {
            var e = this,
                t = e.current,
                i = e.goal;
            return void 0 === t || 100 * t >= i ? 1 : 0
        }, t.prototype.cheat = function() {
            this.recordService.setRecord("maxHp", 100), this.recordService.setRecord("lowesthp", this.goal)
        }, t
    }(u);
    t.DurabilityStayChecker = T;
    var C = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return o.__extends(t, e), t.prototype.cheat = function() {
            for (var e = 0; e < this.goal; e++) this.recordService.pushRecord(this.name, {
                target: "42",
                time: 42
            })
        }, t
    }(u);
    t.TakedownChecker = C, t.buildChecker = n, t.filteredCondition = r
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "inventory.items.set":
                var i = e.filter || o.Filters[0],
                    n = e.sorter || o.Sorters[0];
                return _.extend({}, {
                    items: t.items || [],
                    filter: i,
                    sorter: n
                });
            case "inventory.items.add":
                var a = _.findIndex(e.items || [], function(e) {
                    return e.id === t.item.id
                });
                return -1 === a ? r.__assign({}, e, {
                    items: (e.items || []).concat([t.item])
                }) : r.__assign({}, e, {
                    items: (e.items || []).map(function(e, i) {
                        return a === i ? t.item : e
                    })
                });
            case "inventory.items.use":
                var s = _.findIndex(e.items, function(e) {
                    return e.id === t.item.id
                });
                return -1 === s ? e : r.__assign({}, e, {
                    items: e.items.map(function(e, i) {
                        return i !== s ? e : r.__assign({}, e, t.item)
                    })
                });
            case "inventory.items.del":
                var c = _.findIndex(e.items, function(e) {
                    return e.id === t.id
                });
                return -1 === c ? e : _.extend({}, e, {
                    items: e.items.slice(0, c).concat(e.items.slice(c + 1, e.items.length))
                });
            case "inventory.filter.set":
                return _.extend({}, e, {
                    filter: t.filter
                });
            case "inventory.sorter.set":
                return _.extend({}, e, {
                    sorter: t.sorter
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(264);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "player.update":
                return r.__assign({}, e, t.player);
            case "player.updateRecent":
                return e.recent.vid === t.vid ? e : r.__assign({}, e, {
                    recent: {
                        vid: t.vid
                    }
                });
            case "player.updateCheckedat":
                return r.__assign({}, e, {
                    checkedat: t.checkedat
                });
            case "player.updateSp":
                return r.__assign({}, e, {
                    sp: t.sp
                });
            case "player.updateMileage":
                return r.__assign({}, e, {
                    mileage: t.mileage
                });
            case "player.updateLevel":
                return r.__assign({}, e, {
                    level: t.level
                });
            case "player.updateExp":
                return r.__assign({}, e, {
                    exp: t.exp
                });
            case "player.updateUnlock":
                return r.__assign({}, e, {
                    unlock: r.__assign({}, e.unlock, t.unlock)
                });
            case "player.updateNewlyGainedAt":
                return _.includes(["inventory", "inbox"], t.nav) ? (e.newlyGainedAt || (e.newlyGainedAt = {}), r.__assign({}, e, {
                    newlyGainedAt: r.__assign({}, e.newlyGainedAt, (i = {}, i[t.nav] = t.now, i))
                })) : e;
            case "player.setLastTrackCode":
                return r.__assign({}, e, {
                    lastTrackCode: t.code
                });
            case "player.updateName":
                return r.__assign({}, e, {
                    name: t.name
                })
        }
        return e;
        var i
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {
                myOffers: [],
                favorites: [],
                priceData: s
            }), t.type) {
            case "market.fetchMyOffers":
                var i = t.props;
                return o.__assign({}, e, {
                    myOffers: i
                });
            case "market.modifyMyOffers":
            case "market.addMyOffers":
                var n = t.props;
                return o.__assign({}, e, {
                    myOffers: _.filter(e.myOffers, function(e) {
                        return e.offer.id !== n.offer.id
                    }).concat([n])
                });
            case "market.removeMyOffers":
                var c = t.props.id,
                    d = _.findIndex(e.myOffers, function(e) {
                        return e.offer.id === c
                    });
                return -1 === d ? e : o.__assign({}, e, {
                    myOffers: _.filter(e.myOffers, function(e, t) {
                        return t !== d
                    }).slice()
                });
            case "market.fetchFavorites":
                var l = t.props;
                return o.__assign({}, e, {
                    favorites: l
                });
            case "market.addFavorite":
                var u = t.props;
                return 0 <= _.findIndex(e.favorites, function(e) {
                    var t = e.favorite;
                    return t.code === u.favorite.code && t.grade === u.favorite.grade
                }) ? e : o.__assign({}, e, {
                    favorites: e.favorites.concat([u])
                });
            case "market.removeFavorite":
                var p = t.props,
                    h = p.code,
                    f = p.grade,
                    v = _.findIndex(e.favorites, function(e) {
                        var t = e.favorite;
                        return t.code === h && t.grade === f
                    });
                return -1 === v ? e : o.__assign({}, e, {
                    favorites: _.filter(e.favorites, function(e, t) {
                        return t !== v
                    }).slice()
                });
            case "market.sell.updatePrice":
                var m = t.props.inputPrice;
                m = a.default.toNumberString(m);
                var g = r(m, t.props.max, t.props.spUnit),
                    y = void 0;
                try {
                    y = a.default.toMoneyNumber(g, t.props.spUnit)
                } catch (t) {
                    y = e.priceData.price
                }
                var S = !_.isEmpty(g) && y >= t.props.min;
                return _.assign({}, e, {
                    priceData: _.assign({}, e.priceData, {
                        price: y,
                        inputPrice: g,
                        min: t.props.min,
                        max: t.props.max,
                        isValidPrice: S
                    })
                })
        }
        return e
    }

    function r(e, t, i) {
        var n;
        try {
            n = a.default.toMoneyNumber(Math.round(Number(e)).toString(), i)
        } catch (e) {
            return ""
        }
        n > t && (n = t);
        var r = a.default.toMoney(n);
        return r.substr(0, r.length - i.length)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0),
        a = i(4),
        s = {
            price: 0,
            inputPrice: 0,
            basePrice: 0,
            min: 0,
            max: Number.MAX_VALUE,
            isValidPrice: !1
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = s), t.type) {
            case "market.search.updateLowPrice":
                return _.assign({}, e, {
                    min: r(t.price)
                });
            case "market.search.updateHighPrice":
                return _.assign({}, e, {
                    max: r(t.price)
                })
        }
        return e
    }

    function r(e) {
        var t = o.default.toNumberString(e),
            i = parseInt(t);
        return i > a && (i = Math.floor(i / 10)), i
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(4),
        a = 1e15,
        s = {
            min: 0,
            max: a
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o.defaultRankedState), t.type) {
            case "ranked.fetchSeasons":
                return r.__assign({}, e, {
                    seasons: t.seasons
                });
            case "ranked.fetchTopPlayersInfo":
                var i = t.gameMode,
                    n = t.topPlayersInfo;
                return r.__assign({}, e, {
                    modes: r.__assign({}, e.modes, (d = {}, d[i] = r.__assign({}, e.modes[i], {
                        topPlayersInfo: n
                    }), d))
                });
            case "ranked.fetchTierRankInfo":
                var i = t.gameMode,
                    a = t.tierRankInfo;
                return r.__assign({}, e, {
                    modes: r.__assign({}, e.modes, (l = {}, l[i] = r.__assign({}, e.modes[i], {
                        tierRankInfo: a
                    }), l))
                });
            case "ranked.updateRankedPlayer":
                var i = t.gameMode,
                    s = t.rankedPlayer;
                return r.__assign({}, e, {
                    modes: r.__assign({}, e.modes, (u = {}, u[i] = r.__assign({}, e.modes[i], {
                        rankedPlayer: s
                    }), u))
                });
            case "ranked.updatePrevSeasonInfo":
                var i = t.gameMode,
                    c = t.prevSeasonInfo;
                return r.__assign({}, e, {
                    modes: r.__assign({}, e.modes, (p = {}, p[i] = r.__assign({}, e.modes[i], {
                        rankedPlayer: c.newPlayer,
                        prevSeasonInfo: c
                    }), p))
                });
            case "ranked.clearPrevSeasonInfo":
                var i = t.gameMode;
                return r.__assign({}, e, {
                    modes: r.__assign({}, e.modes, (h = {}, h[i] = r.__assign({}, e.modes[i], {
                        prevSeasonInfo: void 0
                    }), h))
                });
            case "ranked.selectTab":
                return e.selectedTab !== t.selectedTab ? _.assign({}, e, {
                    selectedTab: t.selectedTab
                }) : e
        }
        return e;
        var d, l, u, p, h
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(108);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return e.igr ? 4 : _.isUndefined(e.remainingCount) ? 1 : 2
    }

    function r(e, t) {
        switch (void 0 === e && (e = s.DefaultVehicleState), t.type) {
            case "vehicle.fetch":
                var i = (y = {}, y[1] = [], y[2] = [], y[4] = [], y),
                    r = _.keyBy(t.vehicles, "id");
                return _.forEach(r, function(e) {
                    var t = n(e);
                    i[t].push(e.id)
                }), a.__assign({}, e, {
                    vehicles: r,
                    vehicleIds: i
                });
            case "vehicle.fetchIgr":
                var c = t.props,
                    r = c.vehicles,
                    d = c.startAt,
                    l = c.endAt,
                    u = _.keyBy(r, "id"),
                    p = _.map(u, function(e) {
                        return e.id
                    });
                return a.__assign({}, e, {
                    vehicles: a.__assign({}, e.vehicles, u),
                    vehicleIds: a.__assign({}, e.vehicleIds, (S = {}, S[4] = p, S)),
                    igr: {
                        startAt: d,
                        endAt: l
                    }
                });
            case "vehicle.updateVehicles":
                return a.__assign({}, e, {
                    vehicles: a.__assign({}, e.vehicles, t.vehicles)
                });
            case "vehicle.add":
                if (e.vehicles[t.vehicle.id]) return e;
                var h = n(t.vehicle),
                    f = a.__assign({}, e.vehicleIds, (E = {}, E[h] = e.vehicleIds[h].concat([t.vehicle.id]), E));
                return a.__assign({}, e, {
                    vehicles: a.__assign({}, e.vehicles, (T = {}, T[t.vehicle.id] = t.vehicle, T)),
                    vehicleIds: f
                });
            case "vehicle.update":
                var v = e.vehicles[t.vehicle.id];
                return v ? (v.price > 0 && !t.vehicle.price && (t.vehicle.price = v.price), a.__assign({}, e, {
                    vehicles: a.__assign({}, e.vehicles, (C = {}, C[t.vehicle.id] = _.assign({}, v, t.vehicle), C))
                })) : e;
            case "vehicle.updateSelected":
                return o(e, t.id);
            case "vehicle.remove":
                if (!_.find(e.vehicles, {
                        id: t.id
                    })) return e;
                var m = a.__assign({}, e.vehicleIds);
                return _.forEach(m, function(e, i) {
                    m[i] = _.includes(e, t.id) ? _.without(e, t.id) : e
                }), a.__assign({}, e, {
                    selected: e.selected === t.id ? void 0 : e.selected,
                    vehicles: _.omit(e.vehicles, t.id),
                    vehicleIds: m
                });
            case "vehicle.changeFilter":
                return a.__assign({}, e, {
                    filterState: t.filterState
                });
            case "vehicle.removeFilter":
                return a.__assign({}, e, {
                    filterState: {
                        clazz: "ALL",
                        manufacturerCode: 0,
                        sortKey: void 0
                    }
                });
            case "vehicle.resetUserCheck":
                var g = e.vehicles[t.id];
                return a.__assign({}, e, {
                    vehicles: a.__assign({}, e.vehicles, (b = {}, b[t.id] = a.__assign({}, g, {
                        isUserChecked: !1
                    }), b))
                });
            case "player.update":
                return o(e, _.get(t.player, "recent.vid"));
            case "player.updateRecent":
                return o(e, t.vid)
        }
        return e;
        var y, S, E, T, C, b
    }

    function o(e, t) {
        return e.vehicles[t] && e.selected !== t ? a.__assign({}, e, {
            selected: t
        }) : e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = i(0),
        s = i(82);
    t.default = r
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "production.fetch":
                var i = t.props.map(function(e) {
                    return _.assign(e, {
                        grade: 1
                    })
                });
                return _.assign({}, e, {
                    vehicles: i
                });
            case "production.changeFilter":
                var n = t.props;
                return _.assign({}, e, {
                    filterState: n
                });
            case "production.selectVehicle":
                var r = t.props;
                return _.assign({}, e, {
                    selectedVehicle: r
                });
            case "production.productVehicle":
                var o = t.props;
                return _.assign({}, e, {
                    productionVehicle: o
                });
            case "production.updatePrice":
                var a = t.props,
                    i = e.vehicles.slice();
                return i.forEach(function(e) {
                    e.price = a.get(e.code, 1)
                }), _.assign({}, e, {
                    vehicles: i
                });
            case "production.removeFilter":
                var s = _.assign({}, e.filterState, {
                    manufacturerCode: 0,
                    producibleFilter: "ALL",
                    sortKey: void 0
                });
                return _.assign({}, e, {
                    filterState: s,
                    selectedVehicle: void 0
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {
                productCollection: {},
                cash: {},
                fallbackImgProducts: {}
            }), t.type) {
            case "shop.fetchBanners":
                var i = t.props;
                return _.assign({}, e, {
                    banners: i
                });
            case "shop.fetchTopProducts":
                var n = t.props,
                    o = _.sortBy(n, ["rank"]);
                return _.assign({}, e, {
                    topProducts: o
                });
            case "shop.fetchProductCollection":
                var a = t.props,
                    s = a.category,
                    c = a.products,
                    d = e.fallbackImgProducts[s] || {};
                return r.__assign({}, e, {
                    productCollection: r.__assign({}, e.productCollection, (h = {}, h[s] = c, h)),
                    fallbackImgProducts: r.__assign({}, e.fallbackImgProducts, (f = {}, f[s] = d, f))
                });
            case "shop.fetchCash":
                var l = _.assign({}, e.cash);
                return l[t.props.pub] = t.props.cash, _.assign({}, e, {
                    cash: l
                });
            case "shop.showChargePopup":
                return _.assign({}, e, {
                    showChargePopup: t.props.show,
                    chargeUrl: t.props.chargeUrl
                });
            case "shop.setFallbackImg":
                var u = t.props,
                    s = u.category,
                    p = u.code;
                return e.fallbackImgProducts[s] && e.fallbackImgProducts[s][p] || !1 ? e : r.__assign({}, e, {
                    fallbackImgProducts: r.__assign({}, e.fallbackImgProducts, (v = {}, v[s] = r.__assign({}, e.fallbackImgProducts[s], (m = {}, m[p] = !0, m)), v))
                })
        }
        return e;
        var h, f, v, m
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {
                parts: {}
            }), t.type) {
            case "parts.fetch":
                return r.__assign({}, e, {
                    parts: t.parts
                });
            case "parts.update":
                return r.__assign({}, e, {
                    parts: r.__assign({}, e.parts, (i = {}, i[t.part.code] = 0 < t.part.count ? r.__assign({}, t.part) : void 0, i))
                })
        }
        return e;
        var i
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {
                classType: "C"
            }), t.type) {
            case "parts-inventory.show":
                return _.defaults({
                    visible: !0,
                    classType: t.classType
                }, e);
            case "parts-inventory.hide":
                return _.defaults({
                    visible: !1,
                    classType: "C"
                }, e);
            case "parts-inventory.setClassType":
                return _.defaults({
                    classType: t.classType
                }, e);
            case "parts-inventory.reset":
                return {
                    classType: "C"
                };
            case "parts-inventory.animate":
                return _.defaults({
                    animation: {
                        code: t.code
                    }
                }, e);
            case "parts-inventory.resetAnimation":
                return _.assign({}, e, {
                    animation: void 0
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "parts-management.showManagement":
                return _.assign({}, e, {
                    managementType: t.partsType
                });
            case "parts-management.hideManagement":
                return _.assign({}, e, {
                    managementType: void 0
                });
            case "parts-management.showAttachmentPopup":
                return _.assign({}, e, {
                    attachmentPopup: {
                        code: t.code
                    }
                });
            case "parts-management.hideAttachmentPopup":
                return _.assign({}, e, {
                    attachmentPopup: {}
                });
            case "parts-management.resetAttachmentPopup":
                return _.assign({}, e, {
                    attachmentPopup: void 0
                });
            case "parts-management.attach":
                return e.attachmentPopup && e.attachmentPopup.code ? _.assign({}, e, {
                    attachmentPopup: {
                        code: e.attachmentPopup.code,
                        before: t.before,
                        after: t.after
                    }
                }) : e;
            case "parts-management.showDetachmentPopup":
                return _.assign({}, e, {
                    detachmentPopup: {
                        code: t.code
                    }
                });
            case "parts-management.hideDetachmentPopup":
                return _.assign({}, e, {
                    detachmentPopup: {}
                });
            case "parts-management.resetDetachmentPopup":
                return _.assign({}, e, {
                    detachmentPopup: void 0
                });
            case "parts-management.detach":
                return e.detachmentPopup && e.detachmentPopup.code ? _.assign({}, e, {
                    detachmentPopup: {
                        code: e.detachmentPopup.code,
                        before: t.before,
                        after: t.after
                    }
                }) : e
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "vehicle-detail-parts.setVehicle":
                return t.props
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "vehicleUpgrade.init":
                return o;
            case "vehicleUpgrade.setUpgradeState":
                return r.__assign({}, e, {
                    upgradeState: t.upgradeState,
                    selectedExterior: t.selectedExterior
                });
            case "vehicleUpgrade.pickVehicle":
                return _.assign({}, e, {
                    picked: t.picked,
                    selectedVehicles: []
                });
            case "vehicleUpgrade.selectVehicle":
                return 2 === e.selectedVehicles.length ? e : r.__assign({}, e, {
                    selectedVehicles: e.selectedVehicles.concat([t.index]).sort(function(e, t) {
                        return e - t
                    })
                });
            case "vehicleUpgrade.deselectVehicle":
                return r.__assign({}, e, {
                    selectedVehicles: _.filter(e.selectedVehicles, function(e) {
                        return e !== t.index
                    })
                });
            case "vehicleUpgrade.clearSelection":
                return e.selectedVehicles.length ? r.__assign({}, e, {
                    selectedVehicles: []
                }) : e
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            upgradeState: "NOT_START",
            selectedVehicles: []
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {
                popupState: !1
            }), t.type) {
            case "parts-combine.showCraftPopup":
                return _.assign({}, e, {
                    popupState: !0,
                    crafting: _.pick(t, ["code"]),
                    upgrading: void 0
                });
            case "parts-combine.showUpgradePopup":
                return _.assign({}, e, {
                    popupState: !0,
                    crafting: void 0,
                    upgrading: _.pick(t, ["vehicle", "partsType"])
                });
            case "parts-combine.hide":
                return {
                    popupState: !1
                };
            case "parts-combine.craftComplete":
                return _.assign({}, e, {
                    crafting: _.assign({}, e.crafting, {
                        result: _.pick(t, ["part", "isSuccess"])
                    })
                });
            case "parts-combine.upgradeComplete":
                return _.assign({}, e, {
                    upgrading: _.assign({}, e.upgrading, {
                        result: _.pick(t, ["before", "after", "isSuccess"])
                    })
                });
            case "parts-combine.retryCraft":
                return _.assign({}, e, {
                    crafting: _.assign({}, e.crafting, {
                        result: void 0
                    })
                });
            case "parts-combine.retryUpgrade":
                return _.assign({}, e, {
                    upgrading: _.assign({}, e.upgrading, {
                        result: void 0
                    })
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "vehicle-status.animate":
                return _.assign({}, e, {
                    animate: _.pick(t, ["before", "after"])
                });
            case "vehicle-status.animateComplete":
                return _.assign({}, e, {
                    animate: void 0
                });
            case "vehicle-status.showComposition":
                return _.assign({}, e, {
                    composition: _.pick(t, ["statusType"])
                });
            case "vehicle-status.hideComposition":
                return _.assign({}, e, {
                    composition: void 0
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "driftmode-result.setDriftRankChange":
                return r.__assign({}, e, {
                    finalRank: t.finalRank
                });
            case "driftmode-result.setDriftfinalPoint":
                return r.__assign({}, e, {
                    finalPoint: t.finalPoint
                });
            case "driftmode-result.clearDriftResultStatus":
                return o
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            finalRank: -1,
            finalPoint: 0
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {
                id: "",
                name: "",
                sp: 0,
                exp: 0,
                level: 0,
                pendingBonuses: {}
            }), t.type) {
            case "player-info.updatePlayer":
                return r.__assign({}, e, _.pick(t.player, ["id", "sp", "level", "exp", "name"]));
            case "player-info.updateSnapshot":
                return o.info("player-info.updateSnapshot", t), r.__assign({}, e, t.snapshot);
            case "player-info.reserveBonus":
                return o.info("player-info.reserveBonus", t, e.pendingBonuses), r.__assign({}, e, {
                    pendingBonuses: r.__assign({}, e.pendingBonuses, (s = {}, s[t.key] = t.bonus, s))
                });
            case "player-info.applyBonus":
                var i = e.pendingBonuses[t.key] || {
                        sp: 0,
                        exp: 0
                    },
                    n = i.sp,
                    a = i.exp;
                return o.info("player-info.applyBonus", t, n, a, e.pendingBonuses), r.__assign({}, e, {
                    sp: e.sp + n,
                    exp: e.exp + a,
                    pendingBonuses: _.omit(e.pendingBonuses, [t.key])
                })
        }
        return e;
        var s
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(7);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, i) {
        switch (void 0 === e && (e = o), i.type) {
            case "global-panel.show":
                var n = i.tag;
                _.includes(e.hidingTags, n) && (e = r.__assign({}, e, {
                    hidingTags: _.filter(e.hidingTags, function(e) {
                        return e !== n
                    })
                })), n = n + "." + t.navHidePostfix, _.includes(e.navHidingTags, n) && (e = r.__assign({}, e, {
                    navHidingTags: _.filter(e.navHidingTags, function(e) {
                        return e !== n
                    })
                }));
                break;
            case "global-panel.hide":
                var a = i.tag;
                _.includes(e.hidingTags, a) || (e = r.__assign({}, e, {
                    hidingTags: e.hidingTags.concat([a])
                })), a = a + "." + t.navHidePostfix, _.includes(e.navHidingTags, a) || (e = r.__assign({}, e, {
                    navHidingTags: e.navHidingTags.concat([a])
                }));
                break;
            case "global-panel.resetTopPanel":
                if (!e.hidingTags.length) break;
                var s = new RegExp("\\." + t.navHidePostfix + "$");
                return r.__assign({}, e, {
                    hidingTags: [],
                    navHidingTags: _.filter(e.navHidingTags, function(e) {
                        return !s.test(e)
                    })
                });
            case "global-panel.enableSystemTray":
                var c = i.tray;
                if (_.some(e.systemTrayState, function(e, t) {
                        return c[t] !== e
                    })) return r.__assign({}, e, {
                    systemTrayState: r.__assign({}, e.systemTrayState, c)
                });
                break;
            case "global-panel.enableSystemTrayAll":
                var d = i.enabled;
                if (_.some(e.systemTrayState, function(e) {
                        return e !== d
                    })) return r.__assign({}, e, {
                    systemTrayState: _.mapValues(e.systemTrayState, function(e) {
                        return d
                    })
                });
                break;
            case "global-panel.showNav":
                if (!_.includes(e.navHidingTags, i.tag)) break;
                return r.__assign({}, e, {
                    navHidingTags: _.filter(e.navHidingTags, function(e) {
                        return e !== i.tag
                    })
                });
            case "global-panel.hideNav":
                if (_.includes(e.navHidingTags, i.tag)) break;
                return r.__assign({}, e, {
                    navHidingTags: e.navHidingTags.concat([i.tag])
                });
            case "global-panel.showGnbHub":
                if (e.showGnbHub === i.show) break;
                return r.__assign({}, e, {
                    showGnbHub: i.show
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.navHidePostfix = "global-panel";
    var o = {
        hidingTags: [],
        navHidingTags: [],
        systemTrayState: {
            promotion: !0,
            messenger: !0,
            notifier: !0,
            miniChat: !0,
            quest: !0
        },
        showGnbHub: !1
    };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "promotion.updatePromotions":
                var i = t.promotions;
                return r.__assign({}, e, {
                    promotions: i,
                    hasNewPromotion: i.length
                });
            case "promotion.updateBanners":
                return r.__assign({}, e, {
                    banners: _.take(t.banners, 5)
                });
            case "promotion.togglePreview":
                return r.__assign({}, e, {
                    showPreview: !e.showPreview,
                    hasNewPromotion: !1
                });
            case "promotion.hidePreview":
                if (!e.showPreview) break;
                return r.__assign({}, e, {
                    showPreview: !1,
                    hasNewPromotion: !1
                });
            case "promotion.openPromotionList":
                if (e.showPromotionList) break;
                return r.__assign({}, e, {
                    showPromotionList: !0,
                    focusedOnPromotionList: t.id
                });
            case "promotion.closePromotionList":
                if (!e.showPromotionList) break;
                return r.__assign({}, e, {
                    showPromotionList: !1,
                    focusedOnPromotionList: void 0
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            showPreview: !1,
            showPromotionList: !1,
            hasNewPromotion: !1
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "lobby.selectGameMode":
                return r.__assign({}, e, {
                    gameMode: t.gameMode
                });
            case "lobby.resetLobby":
                return o
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            gameMode: void 0
        };
    t.reducer = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = s), t.type) {
            case "tuning-shop.fetchInventory":
                var i = t.checkedat,
                    n = t.items;
                return r.__assign({}, e, {
                    checkedat: i,
                    items: n
                });
            case "tuning-shop.fetchProducts":
                return r.__assign({}, e, {
                    products: t.products
                });
            case "tuning-shop.selectItemTab":
                return r.__assign({}, e, {
                    selectedTab: t.selectedTab
                });
            case "tuning-shop.changeFilter":
                return r.__assign({}, e, {
                    filterState: t.filterState
                });
            case "tuning-shop.resetFilter":
                return r.__assign({}, e, {
                    filterState: a
                });
            case "tuning-shop.updateCheckedat":
                return r.__assign({}, e, {
                    checkedat: t.checkedat
                });
            case "tuning-shop.updateItem":
                var c = t.item,
                    n = _.filter(e.items, function(e) {
                        return e.id !== c.id
                    }).concat([c]);
                return r.__assign({}, e, {
                    items: n
                });
            case "tuning-shop.selectProduct":
                return r.__assign({}, e, {
                    selectedProducts: r.__assign({}, e.selectedProducts, (l = {}, l[t.itemType] = {
                        productCode: t.productCode,
                        action: void 0
                    }, l))
                });
            case "tuning-shop.deselectProduct":
                return r.__assign({}, e, {
                    selectedProducts: r.__assign({}, e.selectedProducts, (u = {}, u[t.itemType] = {
                        productCode: void 0,
                        action: t.action
                    }, u))
                });
            case "tuning-shop.purchaseProduct":
                return r.__assign({}, e, {
                    purchased: t.purchased
                });
            case "tuning-shop.resetPurchased":
                return r.__assign({}, e, {
                    purchased: void 0
                });
            case "tuning-shop.resetSelected":
                return r.__assign({}, e, {
                    selectedProducts: o
                });
            case "tuning-shop.updateExterior":
                return r.__assign({}, e, {
                    updateExteriorIdx: e.updateExteriorIdx + 1,
                    updateExteriorRefresh: t.isRefresh
                });
            case "tuning-shop.hideWrapping":
                return r.__assign({}, e, {
                    hideWrapping: t.hide
                });
            case "tuning-shop.afterPurchase":
                var d = t.inventory,
                    i = d.checkedat,
                    n = d.items;
                return r.__assign({}, e, {
                    checkedat: i,
                    items: n,
                    selectedProducts: r.__assign({}, e.selectedProducts, (p = {}, p[t.deselectItemType] = {
                        action: "apply"
                    }, p)),
                    purchased: void 0,
                    selectedTab: 0
                });
            case "tuning-shop.failOnUseItem":
                return r.__assign({}, e, {
                    selectedProducts: r.__assign({}, e.selectedProducts, (h = {}, h[t.deselectItemType] = {
                        action: "delete"
                    }, h)),
                    purchased: void 0
                });
            case "tuning-shop.setPriorityCodes":
                return r.__assign({}, e, {
                    priorityCodes: t.codes
                })
        }
        return e;
        var l, u, p, h
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            VEHICLECOLOR: {},
            WHEELCOLOR: {},
            WRAP: {}
        },
        a = {
            filterType: "ALL",
            sortField: "order",
            sortOrder: 1
        },
        s = {
            selectedTab: 0,
            filterState: a,
            selectedProducts: o,
            updateExteriorIdx: 0,
            updateExteriorRefresh: !1,
            priorityCodes: void 0
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "quick-match.selectGameMode":
                return r.__assign({}, e, {
                    gameMode: t.gameMode
                });
            case "quick-match.resetQuickMatch":
                return o;
            case "quick-match.showChangePursuitTechPopup":
                return _.assign({}, e, {
                    changePursuitTechPopup: {
                        items: [t.item1, t.item2]
                    }
                });
            case "quick-match.hideChangePursuitTechPopup":
                return _.assign({}, e, {
                    changePursuitTechPopup: void 0
                });
            case "quick-match.enableAutoMatchmaking":
                return _.assign({}, e, {
                    isAutoMatchmaking: !0
                });
            case "quick-match.updateAutoUseItem":
                return _.assign({}, e, {
                    isAutoUseItemOn: t.isAutoUseItemOn
                });
            case "quick-match.resetAutoMatchmaking":
                return _.assign({}, e, {
                    isAutoMatchmaking: !1
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            gameMode: void 0,
            isAutoUseItemOn: !0,
            isAutoMatchmaking: !1,
            changePursuitTechPopup: void 0
        };
    t.reducer = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "ranked-event.finishEvent":
                var i = t.gameMode;
                return e.eventQueue[i].length ? r.__assign({}, e, {
                    eventQueue: r.__assign({}, e.eventQueue, (a = {}, a[i] = _.tail(e.eventQueue[i]), a))
                }) : e;
            case "ranked-event.pushEvents":
                var i = t.gameMode,
                    n = t.events;
                return r.__assign({}, e, {
                    eventQueue: r.__assign({}, e.eventQueue, (s = {}, s[i] = e.eventQueue[i].concat(n), s))
                })
        }
        return e;
        var a, s
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            eventQueue: {
                SPEED1ON1: [],
                SPEEDINDIVIDUAL: []
            }
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = s), t.type) {
            case "worldChat.addChatMessage":
                for (var i = t.message, n = t.isPassed, c = i.timestamp; void 0 !== e.messages[c];) ++c;
                for (; e.rawMessages.length > e.messageCountLimit;) e.rawMessages.shift();
                var d = e.whisperNotice;
                if (!d && i.source === a.ChatSourceType.Whisper) {
                    var l = null;
                    for (var u in e.tabStates)
                        if (e.tabStates[u].isActivated) {
                            l = e.tabStates[u];
                            break
                        } l && l.whisperNoticeEnable && (d = !0)
                }
                var p = e.recentWhisper;
                return i.owned || i.source !== a.ChatSourceType.Whisper || (p = {
                    sourceType: a.ChatSourceType.Whisper,
                    parameters: {
                        playerId: i.playerId,
                        playerName: i.playerName
                    }
                }), n ? _.assign({}, e, {
                    rawMessages: e.rawMessages.concat(i),
                    messages: e.messages.concat([i]),
                    whisperNotice: d,
                    recentWhisper: p
                }) : _.assign({}, e, {
                    rawMessages: e.rawMessages.concat([i]),
                    whisperNotice: d,
                    recentWhisper: p
                });
            case "worldChat.refreshChatMessages":
                var h = t.filterManager;
                return _.assign({}, e, {
                    messages: h.applyFilter(e.rawMessages)
                });
            case "worldChat.clearChatMessages":
                return _.assign({}, s, {
                    displayType: e.displayType
                });
            case "worldChat.setMessageCountLimit":
                return _.assign({}, e, {
                    messageCountLimit: t.count
                });
            case "worldChat.openMainChatWindow":
                if (e.displayType !== a.ChatDisplayType.MainChatWindow) return _.assign({}, e, {
                    displayType: a.ChatDisplayType.MainChatWindow
                });
                break;
            case "worldChat.closeMainChatWindow":
                if (e.displayType === a.ChatDisplayType.MainChatWindow) return _.assign({}, e, {
                    displayType: a.ChatDisplayType.MiniChatBar
                });
                break;
            case "worldChat.openSimpleChatWindow":
                if (e.displayType !== a.ChatDisplayType.SimpleChatView) return _.assign({}, e, {
                    displayType: a.ChatDisplayType.SimpleChatView
                });
                break;
            case "worldChat.closeSimpleChatWindow":
                if (e.displayType === a.ChatDisplayType.SimpleChatView) return _.assign({}, e, {
                    displayType: a.ChatDisplayType.MiniChatBar
                });
                break;
            case "worldChat.addTabs":
                var f = t.tabs,
                    v = _.cloneDeep(e.tabStates);
                return f.forEach(function(t) {
                    e.tabStates.hasOwnProperty(t.id) && o.warn("worldChat.addTab: tab " + t.id + " is already exist.                     Will be replaced with new state"), v[t.id] = t
                }), _.assign({}, e, {
                    tabStates: v
                });
            case "worldChat.removeTabs":
                var m = t.ids,
                    g = _.cloneDeep(e.tabStates),
                    y = e.activatedTab;
                return m.forEach(function(t) {
                    !1 === e.tabStates.hasOwnProperty(t) ? o.error("worldChat.removeTabs: tab " + m + " is not exist.") : (delete g[t], y === t && (y = void 0))
                }), _.assign({}, e, {
                    tabStates: g,
                    activatedTab: y
                });
            case "worldChat.activeTab":
                var S = t.id;
                if (!1 === e.tabStates.hasOwnProperty(S)) {
                    o.error("worldChat.activeTab: tab " + S + " is not exist.");
                    break
                }
                if (e.tabStates[S].isActivated) {
                    o.info("worldChat.activeTab: tab " + S + " already selected.");
                    break
                }
                var E = _.cloneDeep(e.tabStates);
                for (var T in E) E[T].isActivated = !1;
                E[S].isActivated = !0;
                var C = e.activatedTab;
                !0 === t.record && (C = S);
                var d = e.whisperNotice,
                    l = E[S];
                return d && !l.whisperNoticeEnable && (d = !1), _.assign({}, e, {
                    tabStates: E,
                    activatedTab: C,
                    whisperNotice: d
                });
            case "worldChat.enableTab":
                var S = t.id;
                if (!1 === e.tabStates.hasOwnProperty(S)) {
                    o.error("worldChat.enableTab: tab " + S + " is not exist.");
                    break
                }
                if (e.tabStates[S].isEnabled !== t.enable) {
                    var E = _.cloneDeep(e.tabStates);
                    return E[S].isEnabled = t.enable, _.assign({}, e, {
                        tabStates: E
                    })
                }
                break;
            case "worldChat.lockTab":
                var S = t.id;
                if (!1 === e.tabStates.hasOwnProperty(S)) {
                    o.error("worldChat.lockTab: tab " + S + " is not exist.");
                    break
                }
                if (!1 === e.tabStates[S].isLocked) {
                    var E = _.cloneDeep(e.tabStates);
                    E[S].isLocked = !0;
                    var C = e.activatedTab === S ? void 0 : e.activatedTab;
                    return _.assign({}, e, {
                        tabStates: E,
                        activatedTab: C
                    })
                }
                break;
            case "worldChat.unlockTab":
                var S = t.id;
                if (!1 === e.tabStates.hasOwnProperty(S)) {
                    o.error("worldChat.lockTab: tab " + S + " is not exist.");
                    break
                }
                if (!0 === e.tabStates[S].isLocked) {
                    var E = _.cloneDeep(e.tabStates);
                    return E[S].isLocked = !1, _.assign({}, e, {
                        tabStates: E
                    })
                }
                break;
            case "worldChat.activeNextTab":
                var b = Object.keys(e.tabStates);
                if (b.length > 1) {
                    for (var P = null, I = 0; I < b.length; ++I) {
                        var S = b[I];
                        if (e.tabStates[S].isActivated) {
                            P = I;
                            break
                        }
                    }
                    var M = null;
                    if (null === P) M = 0;
                    else
                        for (M = P + 1; M !== P; ++M)
                            if (M >= b.length) M = -1;
                            else {
                                var S = b[M],
                                    A = e.tabStates[S];
                                if (A && !A.isActivated && !A.isLocked) break
                            } if (null !== M) {
                        var S = b[M],
                            E = _.cloneDeep(e.tabStates);
                        for (var T in E) E[T].isActivated = !1;
                        E[S].isActivated = !0;
                        var d = e.whisperNotice,
                            l = E[S];
                        return d && !l.whisperNoticeEnable && (d = !1), _.assign({}, e, {
                            tabStates: E,
                            activatedTab: S,
                            whisperNotice: d
                        })
                    }
                }
                break;
            case "worldChat.toggleFilterMenu":
                var N = t.show;
                return void 0 === N && (N = !e.filterVisible), _.assign({}, e, {
                    filterVisible: N
                });
            case "worldChat.enableFilterMenuItem":
                var R = t.name,
                    L = t.enable,
                    O = e.filterViewsState.slice(0);
                return _.forEach(O, function(e) {
                    e.filterName === R && (e.enable = L)
                }), _.assign({}, e, {
                    filterViewsState: O
                });
            case "worldChat.toggleFilterMenuItem":
                var x = t.name,
                    w = t.selected,
                    O = e.filterViewsState.slice(0);
                _.forEach(O, function(e) {
                    e.filterName === x && (e.selected = w)
                });
                var B = e.tabStates;
                for (var u in B)
                    if (B[u].isActivated) {
                        B[u].lastFiltersState[x] = w;
                        break
                    } return _.assign({}, e, {
                    filterViewsState: O,
                    tabStates: B
                });
            case "worldChat.addFilterMenuItem":
                var D = t.name,
                    F = t.nameID,
                    k = t.enable,
                    U = t.selected,
                    H = !1;
                if (_.forEach(e.filterViewsState, function(e) {
                        e.filterName === D && (H = !0)
                    }), !H) {
                    var V = e.filterViewsState.slice(0);
                    return V.push({
                        filterName: D,
                        nameStringID: F,
                        enable: k,
                        selected: U
                    }), _.assign({}, e, {
                        filterViewsState: V
                    })
                }
                break;
            case "worldChat.openBroadcastWindow":
                if (!e.broadcastVisible) return _.assign({}, e, {
                    broadcastVisible: !0
                });
                break;
            case "worldChat.closeBroadcastWindow":
                if (e.broadcastVisible) return _.assign({}, e, {
                    broadcastVisible: !1
                });
                break;
            case "worldChat.broadcastUnfinishedInput":
                return _.assign({}, e, {
                    broadcastInput: t.input
                });
            case "worldChat.changeChannel":
                var G = t.channel,
                    $ = e.tabStates.channel;
                if ($ && $.channel !== G) {
                    var E = _.cloneDeep(e.tabStates);
                    return E.channel.channel = G, _.assign({}, e, {
                        tabStates: E
                    })
                }
                break;
            case "worldChat.changeSource":
                var j = t.inputOpts;
                return _.assign({}, e, {
                    inputState: j
                });
            case "worldChat.updateChatList":
                return _.assign({}, e, {
                    updateTag: e.updateTag + 1
                });
            case "worldChat.scrollMessageList":
                var K = t.scrollState;
                if (e.scrollState !== K) return _.assign({}, e, {
                    scrollState: K
                });
                break;
            case "worldChat.enableHiding":
                if (e.hidingEnabled !== t.enable) return r.__assign({}, e, {
                    hidingEnabled: t.enable
                });
                break;
            case "worldChat.removeClanChatMessage":
                var W = [],
                    z = [];
                return e.messages.forEach(function(e) {
                    e.source !== a.ChatSourceType.Clan && W.push(e)
                }), e.rawMessages.forEach(function(e) {
                    e.source !== a.ChatSourceType.Clan && z.push(e)
                }), _.assign({}, e, {
                    rawMessages: z,
                    messages: W
                });
            case "worldChat.updateBroadcastTicketCount":
                return _.assign({}, e, {
                    broadcastTicketCount: t.ticketCount
                });
            case "worldChat.inputBoxFocusStatusChange":
                if (t.isFocus !== e.isInputBoxFocusing) return _.assign({}, e, {
                    isInputBoxFocusing: t.isFocus
                });
                break;
            case "worldChat.setMinibarDefaultTab":
                if (t.tabId !== e.minibarTabID) return _.assign({}, e, {
                    minibarTabID: t.tabId
                });
                break;
            case "worldChat.setVisibleOfMinibar":
                if (t.visible === e.hideMinibar) return _.assign({}, e, {
                    hideMinibar: !t.visible
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(7),
        a = i(38),
        s = {
            messages: [],
            rawMessages: [],
            displayType: a.ChatDisplayType.MiniChatBar,
            updateTag: 0,
            tabStates: {},
            activatedTab: void 0,
            minibarTabID: void 0,
            scrollState: a.ListScrollState.None,
            inputState: {
                source: a.ChatSourceType.Channel
            },
            filterViewsState: [],
            filterVisible: !1,
            broadcastVisible: !1,
            broadcastInput: "",
            whisperNotice: !1,
            messageCountLimit: 200,
            hidingEnabled: !1,
            recentWhisper: void 0,
            broadcastTicketCount: 0,
            isInputBoxFocusing: !1,
            hideMinibar: !1
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "clan.changeClanCount":
                var i = t.clanCount;
                if (i !== e.clanCount) return _.assign({}, e, {
                    clanCount: i
                });
                break;
            case "clan.changeClanBaseInformation":
                return _.assign({}, e, {
                    baseInfo: t.info
                });
            case "clan.changeSearchOptions":
                var n = t.searchOpts;
                if (n && n !== e.searchOpts) return _.assign({}, e, {
                    searchOpts: n
                });
                break;
            case "clan.refreshSearchResult":
                var a = t.clanList,
                    s = e.appliedClan || null;
                if (a !== e.clanList) return _.assign({}, e, {
                    clanList: a,
                    clanInfo: s
                });
                break;
            case "clan.selectAClan":
                var c = t.clanInfo;
                if (c !== e.clanInfo) return _.assign({}, e, {
                    clanInfo: c
                });
                break;
            case "clan.changeAppliedClan":
                var s = t.appliedClan;
                if (s && !e.appliedClan || !s && e.appliedClan) return _.assign({}, e, {
                    appliedClan: s
                });
                break;
            case "clan.changeMyClanInformation":
                var d = t.myClanInfo;
                if (d !== e.myClanInfo) return _.assign({}, e, {
                    myClanInfo: d
                });
                break;
            case "clan.refreshClanMember":
                var l = t.member;
                if (l) {
                    if (e.members[l.pid] !== l) {
                        var u = _.cloneDeep(e.members);
                        return u[l.pid] = l, _.assign({}, e, {
                            members: u
                        })
                    }
                }
                break;
            case "clan.refreshClanMembers":
                var p, h = {};
                t.members.forEach(function(e) {
                    h[e.pid] = e, e.role === r.Clan.Role.CAPTAIN && (p = e.pid)
                });
                var d = _.cloneDeep(e.myClanInfo);
                return d.memberCount = _.size(h), d.masterPid = p, _.assign({}, e, {
                    members: h
                }, {
                    myClanInfo: d
                });
            case "clan.removeClanMembers":
                var f = t.memberIDs,
                    v = _.cloneDeep(e.myClanInfo);
                if (f.length > 0) {
                    var m = _.cloneDeep(e.members);
                    return f.forEach(function(e) {
                        m[e] && (delete m[e], v.memberCount--)
                    }), _.assign({}, e, {
                        members: m
                    }, {
                        myClanInfo: v
                    })
                }
                break;
            case "clan.addApplicants":
                var g = t.applicants;
                if (g.length > 0) {
                    var y = _.cloneDeep(e.applicants);
                    return g.forEach(function(e) {
                        y[e.pid] = e
                    }), _.assign({}, e, {
                        applicants: y
                    })
                }
                break;
            case "clan.removeApplicant":
                var S = t.applicantID;
                if (e.applicants[S]) {
                    var E = _.cloneDeep(e.applicants);
                    return delete E[S], _.assign({}, e, {
                        applicants: E
                    })
                }
                break;
            case "clan.refreshApplicants":
                var T = {};
                return t.applicants.forEach(function(e) {
                    T[e.pid] = e
                }), _.assign({}, e, {
                    applicants: T
                });
            case "clan.changeNotice":
                var d = _.cloneDeep(e.myClanInfo);
                if (d.notice = t.notice, d !== e.myClanInfo) return _.assign({}, e, {
                    myClanInfo: d
                });
                break;
            case "clan.changeIntroduction":
                var d = _.cloneDeep(e.myClanInfo);
                if (d.introduction !== t.introduction) return d.introduction = t.introduction, _.assign({}, e, {
                    myClanInfo: d
                });
                break;
            case "clan.setRecruiting":
                var d = _.cloneDeep(e.myClanInfo);
                if (d.recruiting !== t.recruiting) return d.recruiting = t.recruiting, !d.recruiting && (d.censorship = !1), _.assign({}, e, {
                    myClanInfo: d
                });
                break;
            case "clan.setCensorship":
                var d = _.cloneDeep(e.myClanInfo);
                if (d.censorship !== t.censorship) return d.censorship = t.censorship, _.assign({}, e, {
                    myClanInfo: d
                });
                break;
            case "clan.changeEmblem":
                var d = _.cloneDeep(e.myClanInfo);
                if (d.emblem = t.emblem, d !== e.myClanInfo) return _.assign({}, e, {
                    myClanInfo: d
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(15),
        o = {
            baseInfo: void 0,
            clanCount: 0,
            appliedClan: void 0,
            clanInfo: void 0,
            clanList: [],
            searchOpts: {
                enableRecruit: !1,
                disableScreen: !1,
                keyWord: ""
            },
            myClanInfo: void 0,
            members: {},
            applicants: {}
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "video-guide.setData":
                return r.__assign({}, e, {
                    guideData: t.data
                });
            case "video-guide.show":
                if (!e.show) return r.__assign({}, e, {
                    show: !0,
                    selected: t.code || a(e.guideData.raw).code
                });
            case "video-guide.hide":
                if (e.show) return r.__assign({}, e, {
                    show: !1
                });
            case "video-guide.update":
                return r.__assign({}, e, {
                    selected: t.code
                });
            case "video-guide.clearMenu":
                return r.__assign({}, e, {
                    selected: void 0
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            show: !1,
            guideData: {
                raw: [],
                tree: []
            },
            selected: void 0
        },
        a = function(e) {
            return _.find(e, function(e) {
                return 0 === e.items.length
            })
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = r), t.type) {
            case "auction.updateBannersUrl":
                return _.assign({}, e, {
                    bannersUrl: t.bannersUrl
                });
            case "auction.updateBiddings":
                var i = _.filter(t.biddings, function(t) {
                    return !!e.autionItems[t.auctionItemId]
                });
                return _.assign({}, e, {
                    biddings: i
                });
            case "auction.addBiddings":
                var i = _.filter(t.biddings, function(t) {
                    return !!e.autionItems[t.auctionItemId]
                });
                if (i.length > 0) return i = _.concat(i, e.biddings), i.length > t.maxCount && (i = _.take(i, t.maxCount)), _.assign({}, e, {
                    biddings: i
                });
                break;
            case "auction.updateAllAuctionItems":
                return _.assign({}, e, {
                    autionItems: t.allAuctionItems
                });
            case "auction.updateAuctionItems":
                var n = _.cloneDeep(e.autionItems);
                return t.auctionItems.forEach(function(t) {
                    n[t.id] = t;
                    var i = e.autionItems[t.id];
                    i && i.myLastBidding && !t.myLastBidding && (n[t.id].myLastBidding = i.myLastBidding)
                }), _.assign({}, e, {
                    autionItems: n
                });
            case "auction.changeAuctionFavorite":
                var o = _.cloneDeep(e.autionItems);
                return o[t.id].isFavorite = t.isFavorite, _.assign({}, e, {
                    autionItems: o
                });
            case "auction.updateAuctionCategory":
                return _.assign({}, e, {
                    category: t.category
                });
            case "auction.updateAuctionSearchOption":
                return _.assign({}, e, {
                    searchOption: t.searchOption
                });
            case "auction.updateAuctionFavoriteFilter":
                return _.assign({}, e, {
                    isFavoriteValidate: t.isFavoriteValidate
                });
            case "auction.updateAuctionHouseStatusFilter":
                return _.assign({}, e, {
                    auctionHouseStatusFilter: t.auctionHouseStatusFilter
                });
            case "auction.updateAuctionSort":
                return _.assign({}, e, {
                    auctionHouseSortMode: t.auctionHouseSortMode
                });
            case "auction.updateMyStatusFilter":
                return _.assign({}, e, {
                    myStatusFilter: t.myStatusFilter
                });
            case "auction.updateMyStatusSort":
                return _.assign({}, e, {
                    myStatusSortMode: t.myStatusSortMode
                });
            case "auction.UpdateNotificationListDisplayStatus":
                if (e.isNotificationListShown !== t.isShown) return _.assign({}, e, {
                    isNotificationListShown: t.isShown
                });
                break;
            case "auction.updateIsOpenDetailPopUp":
                return _.assign({}, e, {
                    isOpenDetailPopUp: t.isOpenDetailPopUp
                });
            case "auction.updateHistoryBiddings":
                if (!e.autionItems[t.auctionItemID] || _.isEqual(e.autionItems[t.auctionItemID].historyBiddings, t.historyBiddings)) {
                    var a = e.autionItems[t.auctionItemID];
                    return _.assign({}, e, {
                        selectedItem: a
                    })
                }
                var o = _.cloneDeep(e.autionItems);
                o[t.auctionItemID].historyBiddings = t.historyBiddings;
                var s = o[t.auctionItemID];
                return _.assign({}, e, {
                    autionItems: o,
                    selectedItem: s
                });
            case "auction.updateMyBiddings":
                var c = _.cloneDeep(e.autionItems);
                return t.myBiddings.forEach(function(e) {
                    c[e.auctionItemId] && (c[e.auctionItemId].myLastBidding = e)
                }), _.assign({}, e, {
                    autionItems: c
                });
            case "auction.updateIsPlayBiddingHistoryAnim":
                if (e.isPlayBiddingHistoryAnim !== t.isPlayBiddingHistoryAnim) return _.assign({}, e, {
                    isPlayBiddingHistoryAnim: t.isPlayBiddingHistoryAnim
                });
                break;
            case "auction.updatePopUpMsg":
                return _.assign({}, e, {
                    popUpMsg: t.popUpMsg
                });
            case "auction.updateIsScrollToTop":
                return _.assign({}, e, {
                    isScrollToTop: t.isScrollToTop
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = (i(67), {
        bannersUrl: [],
        autionItems: void 0,
        biddings: [],
        category: "All",
        searchOption: "",
        isFavoriteValidate: !1,
        auctionHouseStatusFilter: "",
        auctionHouseSortMode: {
            mode: "",
            isDesc: !0
        },
        myStatusFilter: "",
        myStatusSortMode: {
            mode: "",
            isDesc: !0
        },
        isNotificationListShown: !1,
        selectedItem: void 0,
        isPlayBiddingHistoryAnim: !1,
        isOpenDetailPopUp: !1,
        popUpMsg: void 0,
        isScrollToTop: !1
    });
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = s), t.type) {
            case a + "changeState":
                var i = t.targetState;
                if (i !== e.uiState) return _.assign({}, e, {
                    uiState: i
                });
                break;
            case a + "resizeSlots":
                var n = t.slotCount;
                if (n !== e.mySlotsCount) return _.assign({}, e, {
                    mySlotsCount: n
                });
                break;
            case a + "refreshMyNumberPlateInfo":
                return _.assign({}, e, {
                    myNumberPlateInfo: t.info
                });
            case a + "addNumberPlate":
                var o = t.numberPlate,
                    c = _.cloneDeep(e.myNumberPlates);
                return c[o.plateNumber] = o, _.assign({}, e, {
                    myNumberPlates: c
                });
            case a + "removeNumberPlate":
                var d = t.plateNumber;
                if (e.myNumberPlates[d]) {
                    var c = _.cloneDeep(e.myNumberPlates);
                    return delete c[d], _.assign({}, e, {
                        myNumberPlates: c
                    })
                }
                break;
            case a + "removeNumberPlates":
                var l = t.plateNumbers;
                if (l.length > 0) {
                    var u = _.cloneDeep(e.myNumberPlates);
                    return l.forEach(function(e) {
                        u[e] && delete u[e]
                    }), _.assign({}, e, {
                        myNumberPlates: u
                    })
                }
                break;
            case a + "selectNumberPlateForExchange":
                var p = t.plateNumber;
                if (!_.find(e.exchangeList, function(e) {
                        return e === p
                    })) {
                    var h = _.cloneDeep(e.exchangeList);
                    return h.push(p), _.assign({}, e, {
                        exchangeList: h
                    })
                }
                break;
            case a + "unselectNumberPlateForExchange":
                var f = t.plateNumber,
                    h = _.cloneDeep(e.exchangeList).filter(function(e) {
                        return e !== f
                    });
                if (!_.isEqual(h, e.exchangeList)) return _.assign({}, e, {
                    exchangeList: h
                });
                break;
            case a + "previewNumberPlate":
                var v = t.plateNumber || e.myNumberPlateInfo.selected[0].plateNumber;
                if (v !== e.myPreviewPlateNumber) return _.assign({}, e, {
                    myPreviewPlateNumber: v
                });
                break;
            case a + "installANumberPlateInSlot":
                var v = t.plateNumber;
                if (v !== e.myInstalledPlateNumber) return _.assign({}, e, {
                    myInstalledPlateNumber: v
                });
                break;
            case a + "selectANumberPlateFromSearchResults":
                var v = t.plateNumber;
                if (v !== e.plateNumberSelectedInSearch) return _.assign({}, e, {
                    plateNumberSelectedInSearch: v
                });
                break;
            case a + "selectANumberPlateFromExchangeResults":
                var v = t.plateNumber;
                if (v !== e.plateNumberSelectedInExchange) return _.assign({}, e, {
                    plateNumberSelectedInExchange: v
                });
                break;
            case a + "selectANumberPlateFromLotteryResults":
                var v = t.plateNumber;
                if (v !== e.plateNumberSelectedInLottery) return _.assign({}, e, {
                    plateNumberSelectedInLottery: v
                });
                break;
            case a + "selectANumberPlateFromFirstRandomResults":
                var v = t.plateNumber;
                if (v !== e.plateNumberSelectedInFirstRandom) return _.assign({}, e, {
                    plateNumberSelectedInFirstRandom: v
                });
                break;
            case a + "refreshMyNumberPlates":
                return _.assign({}, e, {
                    myNumberPlates: r(t.numberPlates)
                });
            case a + "refreshRecycleList":
                return _.assign({}, e, {
                    recycleList: r(t.numberPlates)
                });
            case a + "refreshExchangeResultList":
                return _.assign({}, e, {
                    exchangeResults: t.numberPlates
                });
            case a + "refreshLotteryResultList":
                return _.assign({}, e, {
                    lotteryResults: t.numberPlates
                });
            case a + "refreshFirstRandomResultList":
                return _.assign({}, e, {
                    firstRandomResults: r(t.numberPlates)
                });
            case a + "refreshSearchList":
                return _.assign({}, e, {
                    searchResults: r(t.numberPlates)
                });
            case a + "decidePurchaseNumberPlate":
                return _.assign({}, e, {
                    decidePurchaseItem: t.numberPlate,
                    confirmPurchaseItem: void 0
                });
            case a + "confirmPurchaseNumberPlate":
                return _.assign({}, e, {
                    decidePurchaseItem: void 0,
                    confirmPurchaseItem: t.numberPlate
                });
            case a + "clearPurchaseNumberPlate":
                return _.assign({}, e, {
                    decidePurchaseItem: void 0,
                    confirmPurchaseItem: void 0
                });
            case a + "successPurchaseNumberPlate":
                var m = t.numberPlate,
                    g = t.pid,
                    y = _.cloneDeep(e.searchResults);
                return _.each(y, function(e, t) {
                    e.plateNumber === m && (e.pid = g)
                }), _.assign({}, e, {
                    searchResults: y
                });
            case a + "updateMyNumberPlatePage":
                var S = t.page;
                return _.assign({}, e, {
                    myNumberPlatePage: S
                });
            case a + "updatePlateInSearch":
                var E = t.plate,
                    y = _.cloneDeep(e.searchResults);
                return _.each(y, function(e, t) {
                    e.plateNumber === E.plateNumber && (e.pid = E.pid)
                }), _.assign({}, e, {
                    searchResults: y
                });
            case a + "updateExchangePage":
                var T = t.page;
                return _.assign({}, e, {
                    exchangePage: T
                });
            case a + "clearExchangeList":
                return _.assign({}, e, {
                    exchangeList: []
                });
            case a + "refreshLotteryCode":
                var C = t.lotteryCode;
                return _.assign({}, e, {
                    lotteryCode: C
                });
            case a + "refreshDefaultNumberPlate":
                var b = t.data;
                return _.assign({}, e, {
                    defaultNumberPlate: b
                })
        }
        return e
    }

    function r(e) {
        var t = {};
        return e.forEach(function(e) {
            t[e.plateNumber] = e
        }), t
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(59),
        a = "numberPlate.",
        s = {
            uiState: o.UIState.None,
            defaultNumberPlate: void 0,
            myNumberPlateInfo: void 0,
            myNumberPlates: {},
            myPreviewPlateNumber: void 0,
            myInstalledPlateNumber: void 0,
            mySlotsCount: 0,
            myNumberPlatePage: 0,
            searchResults: {},
            plateNumberSelectedInSearch: void 0,
            decidePurchaseItem: void 0,
            confirmPurchaseItem: void 0,
            firstRandomResults: void 0,
            plateNumberSelectedInFirstRandom: void 0,
            exchangePage: 0,
            exchangeList: [],
            exchangeResults: [],
            plateNumberSelectedInExchange: void 0,
            lotteryResults: [],
            plateNumberSelectedInLottery: void 0,
            lotteryCode: -1,
            recycleList: void 0
        };
    t.default = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(215),
        r = i(878),
        o = i(879),
        a = i(880);
    t.default = n.combineReducers({
        modal: r.modal,
        timetrialPopup: o.timetrialPopup,
        flags: a.flags
    })
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        return _.includes(e.shown, t) ? e : a.__assign({}, e, {
            shown: e.shown.concat([t])
        })
    }

    function r(e, t) {
        return _.includes(e.shown, t) ? a.__assign({}, e, {
            shown: _.without(e.shown, t)
        }) : e
    }

    function o(e, t) {
        switch (void 0 === e && (e = {
                shown: []
            }), t.type) {
            case "view.modal.show":
                return t.show ? n(e, "default") : r(e, "default");
            case "popup.open":
                return n(e, "popup");
            case "popup.confirm":
            case "popup.cancel":
            case "popup.close":
                return r(e, "popup");
            case "configuration.show":
                return t.isShow ? n(e, "configuration") : r(e, "configuration");
            case "promotion.openPromotionList":
                return n(e, "promotion");
            case "promotion.closePromotionList":
                return r(e, "promotion");
            case "video-guide.show":
                return n(e, "video-guide");
            case "video-guide.hide":
                return r(e, "video-guide");
            case "parts-combine.showCraftPopup":
            case "parts-combine.showUpgradePopup":
                return n(e, "parts-combine");
            case "parts-combine.hide":
                return r(e, "parts-combine");
            case "parts-inventory.show":
                return n(e, "parts-inventory");
            case "parts-inventory.hide":
            case "parts-inventory.reset":
                return r(e, "parts-inventory");
            case "parts-management.showAttachmentPopup":
                return n(e, "parts-attachment");
            case "parts-management.hideAttachmentPopup":
            case "parts-management.resetAttachmentPopup":
                return r(e, "parts-attachment");
            case "parts-management.showDetachmentPopup":
                return n(e, "parts-detachment");
            case "parts-management.hideDetachmentPopup":
            case "parts-management.resetDetachmentPopup":
                return r(e, "parts-detachment");
            case "parts-material-production.show":
                return n(e, "parts-production");
            case "parts-material-production.hide":
                return r(e, "parts-production")
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = i(0);
    t.modal = o
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "view.timetrial-popup.openTrackRank":
                return r.__assign({}, e, {
                    trackRank: {
                        trackCode: t.trackCode,
                        trackRecords: t.trackRecords
                    }
                });
            case "view.timetrial-popup.closeTrackRank":
                return r.__assign({}, e, {
                    trackRank: void 0
                });
            case "view.timetrial-popup.openSeasonReward":
                return r.__assign({}, e, {
                    seasonReward: {
                        open: !0
                    }
                });
            case "view.timetrial-popup.closeSeasonReward":
                return r.__assign({}, e, {
                    seasonReward: void 0
                });
            case "view.timetrial-popup.openChangeVehicle":
                return r.__assign({}, e, {
                    changeVehicle: {
                        open: !0
                    }
                });
            case "view.timetrial-popup.closeChangeVehicle":
                return r.__assign({}, e, {
                    changeVehicle: void 0
                });
            case "view.unloadScreen":
                if ("root.menu.Timetrial" === t.screenId) return {}
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.timetrialPopup = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "view.flags.matchmaking":
                return r(e, "matchmaking", t.isOn);
            case "view.flags.openworld":
                return r(e, "openworld", t.isOn);
            case "view.flags.openworldMap":
                return r(e, "openworldMap", t.isOn);
            case "view.flags.preventGnbHub":
                return r(e, "preventGnbHub", t.prevent);
            case "view.flags.appearanceEdit":
                return r(e, "appearanceEdit", t.isShow);
            case "view.unloadScreen":
                if (e.matchmaking) return o.__assign({}, e, {
                    matchmaking: !1
                })
        }
        return e
    }

    function r(e, t, i) {
        return e[t] === i ? e : o.__assign({}, e, (n = {}, n[t] = i, n));
        var n
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0);
    t.flags = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = a), t.type) {
            case "festival.fetchFestivals":
                var i = t.festivals;
                return _.forEach(i, function(e) {
                    e.rewardSteps.sort(o("point", 1)), e.miniFestivals.sort(o("startAt", 1)), _.forEach(e.miniFestivals, function(e) {
                        e.rewardSteps.sort(o("point", 1))
                    })
                }), r.__assign({}, e, {
                    data: r.__assign({}, e.data, {
                        festivals: i
                    })
                });
            case "festival.fetchFestivalPlayers":
                return r.__assign({}, e, {
                    data: r.__assign({}, e.data, {
                        festivalPlayers: t.festivalPlayers
                    })
                });
            case "festival.selectFestival":
                return r.__assign({}, e, {
                    view: r.__assign({}, e.view, {
                        festivalId: t.festivalId
                    })
                });
            case "festival.showSchedule":
                return r.__assign({}, e, {
                    view: r.__assign({}, e.view, {
                        schedulePopup: !0
                    })
                });
            case "festival.hideSchedule":
                return r.__assign({}, e, {
                    view: r.__assign({}, e.view, {
                        schedulePopup: !1
                    })
                });
            case "festival.refreshView":
                return r.__assign({}, e, {
                    viewRefresh: !e.viewRefresh
                });
            case "festival.showTooltip":
                return r.__assign({}, e, {
                    tooltip: {
                        isShow: !0,
                        target: t.target,
                        type: t.tooltipType,
                        info: t.info
                    }
                });
            case "festival.hideTooltip":
                return r.__assign({}, e, {
                    tooltip: r.__assign({}, e.tooltip, {
                        isShow: !1
                    })
                });
            case "festival.matching":
                return r.__assign({}, e, {
                    view: r.__assign({}, e.view, {
                        isMatching: t.isMatching
                    })
                });
            case "festival.showChangePursuitTechPopup":
                return r.__assign({}, e, {
                    view: r.__assign({}, e.view, {
                        changePursuitTechPopup: {
                            items: [t.item1, t.item2]
                        }
                    })
                });
            case "festival.hideChangePursuitTechPopup":
                return r.__assign({}, e, {
                    view: r.__assign({}, e.view, {
                        changePursuitTechPopup: void 0
                    })
                });
            default:
                return e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(67),
        a = {
            data: {
                festivals: [],
                festivalPlayers: []
            },
            view: {
                festivalId: void 0,
                schedulePopup: !1,
                isMatching: !1
            },
            tooltip: {
                isShow: !1
            },
            viewRefresh: !1
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {
                show: !1
            }), t.type) {
            case "core-loading.show":
                if (!e.show) return r.__assign({}, e, {
                    show: !0
                });
                break;
            case "core-loading.hide":
                if (e.show) return r.__assign({}, e, {
                    show: !1
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "steering.showSteeringPopup":
                return _.assign({}, e, {
                    steeringPopup: !0,
                    vehicleId: t.vehicleId
                });
            case "steering.hideSteeringPopup":
                return _.assign({}, e, {
                    steeringPopup: !1
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = r), t.type) {
            case "parts-material-production.show":
                return _.assign({}, e, {
                    partsMaterial: t.partsMaterial,
                    show: !0,
                    current: 1
                });
            case "parts-material-production.hide":
                return _.assign({}, e, {
                    show: !1
                });
            case "parts-material-production.increase":
                return _.assign({}, e, {
                    current: e.current + 1
                });
            case "parts-material-production.decrease":
                return _.assign({}, e, {
                    current: e.current - 1
                });
            case "parts-material-production.setCurrent":
                return _.assign({}, e, {
                    current: t.current
                });
            default:
                return e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = {
        show: !1,
        current: 1
    };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "trade.setDealerNpc":
                return _.assign({}, e, {
                    dealerNpc: t.dealerNpc
                });
            case "trade.setTradeRecord":
                return _.assign({}, e, {
                    tradeRecord: t.tradeRecord
                });
            case "trade.selectItem":
                if (!t.id) return e;
                var i = _.find(e.selectedItems, function(e) {
                    return e === t.id
                });
                return i ? _.assign({}, e, {
                    selectedItems: _.without(e.selectedItems, i)
                }) : e.selectedItems.length < r.MAX_SELECTABLE_ITEMS ? _.assign({}, e, {
                    selectedItems: e.selectedItems.concat([t.id])
                }) : e;
            case "trade.selectItems":
                return t.ids ? _.assign({}, e, {
                    selectedItems: t.ids
                }) : e;
            case "trade.toggleViewAll":
                return _.assign({}, e, {
                    viewAll: !e.viewAll
                });
            case "trade.setManufacturerFilter":
                return _.assign({}, e, {
                    manufacturerFilter: t.manufacturerFilter
                });
            case "trade.reset":
                return o;
            case "trade.clearSelected":
                return _.assign({}, e, {
                    manufacturerFilter: _.assign({}, e.manufacturerFilter, {
                        selected: 0
                    }),
                    selectedItems: o.selectedItems
                });
            case "trade.hideEffect":
                return _.assign({}, e, {
                    selectedItems: [],
                    showEffect: !1
                });
            case "trade.showEffect":
                return _.assign({}, e, {
                    tradeVehicleResult: t.tradeVehicleResult,
                    showEffect: !0
                });
            case "trade.setCooldown":
                var n = t.timestamp > 0 ? t.timestamp : 0;
                return _.assign({}, e, {
                    cooldown: _.assign({}, e.cooldown, (s = {}, s[t.dealerNpcCode] = n, s))
                });
            case "trade.cooldown":
                var a = _.mapValues(e.cooldown, function(e) {
                    return e >= 1e3 ? e - 1e3 : 0
                });
                return _.isEqual(a, e.cooldown) ? e : _.assign({}, e, {
                    cooldown: a
                });
            case "trade.setVehicleAvailables":
                return _.assign({}, e, {
                    vehicleAvailables: t.vehicleAvailables
                });
            default:
                return e
        }
        var s
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(265),
        o = {
            dealerNpc: 1,
            selectedItems: [],
            viewAll: !1,
            manufacturerFilter: {
                codes: [],
                selected: 0
            },
            showEffect: !1,
            cooldown: {},
            vehicleAvailables: void 0
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = o), t.type) {
            case "quest.update":
                return r.__assign({}, e, {
                    quest: t.quest
                });
            case "quest.togglePreview":
                return r.__assign({}, e, {
                    showPreview: !e.showPreview,
                    hasNotification: !1
                });
            case "quest.setShowPreview":
                return e.showPreview === t.showPreview ? e : r.__assign({}, e, {
                    showPreview: t.showPreview,
                    hasNotification: !1
                });
            case "quest.updateProgress":
                var i = _.assign({}, e.quest);
                i.questProgress = i.questProgress.slice(), i.qp = t.qp;
                return t.questProgress.forEach(function(e) {
                    var t = _.find(i.questProgress, function(t) {
                        return t.code === e.code
                    });
                    t && (t.value = e.value, t.completed = e.completed)
                }), r.__assign({}, e, {
                    quest: i
                });
            case "quest.updateQP":
                var n = _.assign({}, e.quest);
                return n.qp = t.qp, r.__assign({}, e, {
                    quest: n
                });
            case "quest.turnOnNotification":
                return r.__assign({}, e, {
                    hasNotification: !0
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = {
            quest: void 0,
            showPreview: !1,
            hasNotification: !1
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "timetrial.showTrackInfo":
                return r.__assign({}, e, {
                    showTrackInfo: !0,
                    selectedTrack: t.trackCode
                });
            case "timetrial.hideTrackInfo":
                return r.__assign({}, e, {
                    showTrackInfo: !1,
                    selectedTrack: void 0
                });
            case "timetrial.updateTimetrialPlayerInfo":
                return r.__assign({}, e, {
                    playerInfo: t.info
                });
            case "timetrial.updateTimetrialSeasonInfo":
                return r.__assign({}, e, {
                    seasonInfo: t.seasonInfo
                });
            case "timetrial.updateTimetrialPlatinumMedalInfo":
                return r.__assign({}, e, {
                    platinumTrackCodes: t.platinumTrackCodes
                });
            case "timetrial.selectVehicle":
                return r.__assign({}, e, {
                    selectedVehicle: t.vehicle
                });
            case "timetrial.selectGhost":
                return r.__assign({}, e, {
                    selectedGhost: t.ghostRecord
                });
            case "timetrial.fetchGhostRecords":
                return r.__assign({}, e, {
                    ghostRecords: t.ghostRecords
                });
            case "timetrial.updateCreatePlayer":
                return r.__assign({}, e, {
                    playerInfo: t.response.newPlayer,
                    prevSeasonInfo: t.response
                });
            case "timetrial.updateMedalLaptimes":
                return r.__assign({}, e, {
                    medalLaptimes: t.medalLaptimes
                });
            case "timetrial.updateMatchParam":
                return r.__assign({}, e, {
                    matchParam: r.__assign({}, e.matchParam, t.matchParam)
                });
            case "timetrial.updateMatchResult":
                var i = t.matchResult,
                    n = e.playerInfo.trackRecords || {},
                    o = n[e.selectedTrack];
                return r.__assign({}, e, {
                    matchResult: r.__assign({}, t.matchResult, {
                        prevBestLaptime: o ? o.bestLaptime : void 0
                    }),
                    playerInfo: r.__assign({}, e.playerInfo, {
                        trackRecords: r.__assign({}, e.playerInfo.trackRecords, (a = {}, a[e.selectedTrack] = {
                            trackCode: e.selectedTrack,
                            medalStep: o ? _.min([(o.medalStep || 0) + (i.gainMedalStep || 0), 3]) : i.gainMedalStep,
                            bestLaptime: o ? _.min([i.laptime, o.bestLaptime]) : i.laptime
                        }, a))
                    }),
                    platinumTrackCodes: i.gainPlatinum ? _.uniq(e.platinumTrackCodes.concat([e.selectedTrack])) : e.platinumTrackCodes
                });
            case "timetrial.updateMatchId":
                return r.__assign({}, e, {
                    matchParam: r.__assign({}, e.matchParam, {
                        matchId: t.matchId
                    })
                });
            case "timetrial.clearResult":
                if (!e.matchResult) break;
                return r.__assign({}, e, {
                    matchResult: void 0
                });
            case "timetrial.clearMatch":
                return r.__assign({}, e, {
                    matchParam: void 0,
                    matchResult: void 0
                });
            case "timetrial.clearPrevSeasonInfo":
                return r.__assign({}, e, {
                    prevSeasonInfo: void 0
                })
        }
        return e;
        var a
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = a), t.type) {
            case "openworld-campaign.setCampaign":
                var i = t.campaign;
                return r.__assign({}, e, {
                    currentCampaignCode: i.code,
                    currentTaskProgress: i.tasks,
                    status: i.status
                });
            case "openworld-campaign.startCampaign":
                return r.__assign({}, e, {
                    status: o.Openworld.CampaignStatus.InProgress
                });
            case "openworld-campaign.updateTaskProgress":
                var n = t.taskProgress,
                    s = n.code,
                    c = n.value;
                if (e.currentTaskProgress[s] === c) break;
                return r.__assign({}, e, {
                    currentTaskProgress: r.__assign({}, e.currentTaskProgress, (l = {}, l[s] = c, l))
                });
            case "openworld-campaign.addTaskProgress":
                var d = t.taskProgress,
                    s = d.code,
                    c = d.value;
                if (!c) break;
                return r.__assign({}, e, {
                    currentTaskProgress: r.__assign({}, e.currentTaskProgress, (u = {}, u[s] = (e.currentTaskProgress[s] || 0) + c, u))
                })
        }
        return e;
        var l, u
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(15),
        a = {
            currentCampaignCode: 0,
            currentTaskProgress: {},
            status: o.Openworld.CampaignStatus.NotStarted
        };
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = {}), t.type) {
            case "openworld-mission.set":
                if (e.status) return e;
                var i = t.mission,
                    n = i.missionId,
                    o = i.gameMode,
                    a = i.isBlocked;
                return {
                    missionId: n, gameMode: o, status: 0, spotRecords: e.spotRecords, limitedMission: e.limitedMission, unlockedMissions: e.unlockedMissions, isBlocked: a
                };
            case "openworld-mission.block":
                return 0 !== e.status ? e : r.__assign({}, e, {
                    isBlocked: t.isBlocked
                });
            case "openworld-mission.clear":
                return -1 !== [1, 2].indexOf(e.status) ? e : {
                    spotRecords: e.spotRecords,
                    limitedMission: e.limitedMission,
                    unlockedMissions: e.unlockedMissions
                };
            case "openworld-mission.accept":
                if (-1 !== [1, 2].indexOf(e.status)) return e;
                var s = t.mission,
                    n = s.missionId,
                    o = s.gameMode,
                    c = s.host;
                return r.__assign({}, e, {
                    missionId: n,
                    gameMode: o,
                    status: 1,
                    isBlocked: !1,
                    host: c
                });
            case "openworld-mission.start":
                if (1 !== e.status) return e;
                var d = t.startParam.checkpointCount;
                return r.__assign({}, e, {
                    checkpointCount: d,
                    status: 2
                });
            case "openworld-mission.finish":
                return 2 !== e.status ? e : r.__assign({}, e, {
                    result: t.result,
                    status: 3
                });
            case "openworld-mission.reset":
                return {
                    spotRecords: e.spotRecords, limitedMission: e.limitedMission, unlockedMissions: e.unlockedMissions
                };
            case "openworld-mission.fetchSpotAndMission":
                return r.__assign({}, e, {
                    spotRecords: t.spotRecords,
                    unlockedMissions: t.unlockedMissions
                });
            case "openworld-mission.updateSpotRecord":
                var l = t.record;
                return r.__assign({}, e, {
                    spotRecords: r.__assign({}, e.spotRecords, (p = {}, p[l.code] = l, p))
                });
            case "openworld-mission.initLimitedMission":
                return r.__assign({}, e, {
                    limitedMission: t.limitedMission
                });
            case "openworld-mission.updateLimitedMission":
                var u = t.info;
                return r.__assign({}, e, {
                    limitedMission: r.__assign({}, e.limitedMission, {
                        progress: r.__assign({}, e.limitedMission.progress, (h = {}, h[u.code] = u, h))
                    })
                });
            case "openworld-mission.addUnlockedMissions":
                return r.__assign({}, e, {
                    unlockedMissions: _.union(e.unlockedMissions, t.codes)
                })
        }
        return e;
        var p, h
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0);
    t.default = n
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        switch (void 0 === e && (e = a), t.type) {
            case "tutorial.updateTutorialStatus":
                if (e.status === t.status) break;
                return r.__assign({}, e, {
                    status: t.status
                })
        }
        return e
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(110),
        a = {
            status: o.TutorialStatus.FINISHED
        };
    t.default = n
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(14),
        r = i(132),
        o = i(3),
        a = i(34),
        s = function() {
            function e() {}
            return e.prototype.renderWithProvider = function(e, t) {
                this.renderInternal(n.createElement(o.Provider, {
                    store: o.store
                }, e), t)
            }, e.prototype.renderWithoutProvider = function(e, t) {
                this.renderInternal(e, t)
            }, e.prototype.renderInternal = function(e, t) {
                try {
                    this.container && this.container !== t && this.unmount(), this.container = t, r.render(e, t)
                } catch (e) {
                    var i = a.getInjector().get("exceptionHandleService");
                    i.catchReactError(e)
                }
            }, e.prototype.unmount = function() {
                this.container && (r.unmountComponentAtNode(this.container), this.container = void 0)
            }, e
        }();
    t.ReactRenderer = s
}, , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(6),
        a = i(7),
        s = i(150),
        c = i(4),
        d = i(10),
        l = i(3),
        u = i(9),
        p = i(151),
        h = i(131),
        f = i(285),
        v = i(181),
        m = i(134),
        g = i(39),
        y = function(e) {
            function t(t, i, n, r, o, a, s, c, d, l, u, p, h, f) {
                var v = e.call(this, t, i, n, r, o, a, s, c, d) || this;
                return v.externalService = t, v.popupService = i, v.staticdataLoaderService = n, v.gameModeService = r, v.uistateNotifyService = o, v.stateService = a, v.dimService = s, v.exceptionHandleService = c, v.recordService = d, v.$window = l, v.pushService = u, v.playerSnippetService = p, v.worldChatService = h, v.vehicleDataService = f, v.cleanUps = [], v._onMessage = v.onMessage.bind(v), v
            }
            return n.__extends(t, e), t.prototype.init = function() {
                var e = this;
                this.pushService.on("msg", this._onMessage), this.cleanUps.push(this.pushService.subscribeResource(/\/v2\/ranked2\/matchend/, function(t, i) {
                    i.uri.indexOf("reward") > -1 ? (a.info(">> ranked2 reward", t, i), l.store.dispatch(h.receiveReward(i.body)), l.store.dispatch(s.reserveMatchReward(i.body)), e.resolveReward()) : i.uri.indexOf("tier") > -1 ? (a.info(">> ranked2 tier", t, i), l.store.dispatch(h.setRankedMatchStatus(i.body))) : (a.info(">> ranked2 matchend", t, i), l.store.dispatch(h.endMatch(i.body)))
                })), this.cleanUps.push(this.pushService.subscribeResource(/\/v2\/ranked2\/matchmaking\/error/, function(t, i) {
                    e.emit("season.expired")
                }))
            }, t.prototype.destroy = function() {
                for (var e = 0, t = this.cleanUps; e < t.length; e++) {
                    (0, t[e])()
                }
                this.cleanUps = [], this.pushService.removeListener("msg", this._onMessage)
            }, t.prototype.createMatch = function(t) {
                var i = this;
                e.prototype.createMatch.call(this, t), this.resetMatchState(), l.store.dispatch(f.setLastTrackCode(t.trackCode));
                var n = t.players.map(function(e) {
                    return _.assign({}, e, {
                        state: "connecting"
                    })
                });
                t.ais && t.ais.length > 0 && t.ais.forEach(function(e) {
                    var t = i.getAiPlayer(e);
                    i.playerSnippetService.setAiSnippet(t), n.push(t)
                });
                var a = _.assign({
                    id: t.matchId,
                    state: "created",
                    featureType: "ranked",
                    players: n
                }, _.pick(t, ["gameMode", "trackCode", "useDediSvr"]));
                l.store.dispatch(p.createMatch(a)), this.serverTimeout = o.delay(1e3 * r.Constants.ServerResolveTimeout).then(function() {
                    i.rejectServerTimeout()
                })
            }, t.prototype.getAiPlayer = function(e) {
                var t = this.staticdataLoaderService.aiDb.aiData[e];
                return {
                    id: e + "",
                    team: 0,
                    state: "connecting",
                    vehicle: {
                        code: t.vehicleCode,
                        grade: t.vehicleGrade || 1,
                        igr: !1,
                        ovr: m.VehicleDataService.getIStatusOvr(t.ovr),
                        status: t.ovr,
                        paint: this.vehicleDataService.getDefaultTuningData(t.vehicleCode),
                        parts: v.default.EmptyParts
                    },
                    ai: t,
                    plate: l.store.getState().numberPlate.defaultNumberPlate
                }
            }, t.prototype.resetMatchState = function() {
                this.deferredRewarded = c.default.defer(), this.deferredFinished = c.default.defer(), this.deferredRewarded.promise.catch(function(e) {
                    return a.debug(e)
                }), this.deferredFinished.promise.catch(function(e) {
                    return a.debug(e)
                }), this.removeHandler(), this.initGameHandler();
                var e = l.store.getState().player,
                    t = e.sp,
                    i = e.exp,
                    n = e.level;
                l.store.dispatch(h.clearState()), l.store.dispatch(h.setPrevPlayerStatus({
                    sp: t,
                    exp: i,
                    level: n
                })), this._isMatchAbandoned = !1
            }, t.prototype.clearMatchState = function() {
                this.records = [], this.recordService.distanceList = {}, this.recordService.initRecord(), this.removeHandler(), this.deferredRewarded && this.deferredRewarded.reject(new Error("clearMatchState")), this.deferredFinished && this.deferredFinished.reject(new Error("clearMatchState")), this.cancelServerTimeout(), l.store.dispatch(p.leaveMatch())
            }, t.prototype.onMessage = function(e) {
                if (-1 !== e.cmd.indexOf("match2")) switch (a.info(">> push message on Match :", e.cmd, JSON.stringify(e)), e.cmd) {
                    case "match2.created":
                        this.createMatch(e.opts), this.emitMatchEvent("match.created", e.opts);
                        break;
                    case "match2.dedisvr.created":
                        this.onCreatedServer(e.opts), this.emitMatchEvent("server.created", e.opts);
                        break;
                    case "match2.entries.changed":
                        this.onEntryChanged(e.opts);
                        break;
                    case "match2.dedisvr.assignfailed":
                        this.emitMatchEvent("connect.error", e.opts);
                        break;
                    case "match2.end.expired":
                        this.expiredMatch()
                }
            }, t.prototype.onPlayerLeft = function(e) {
                var t = this;
                this.playerSnippetService.getSnippetAsync(e).then(function(e) {
                    t.worldChatService.printRoomSystemMsg(e, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_EXIT")
                })
            }, t.prototype.initGameHandler = function() {
                var t = this;
                e.prototype.initGameHandler.call(this), this.addGameHandler(u.default.beAddRecord, function(e, i, n, r) {
                    void 0 === n && (n = 0), void 0 === r && (r = 0), t.addRecord({
                        id: e,
                        time: i,
                        mileage: n,
                        driftpoint: r,
                        ratio: 1,
                        completionRate: 1
                    })
                }), this.addGameOnceHandler(u.default.beFinishGame, function(e, i, n) {
                    t.finishMatch(e, n), t.emitMatchEvent("match.finish", e)
                }), this.addGameOnceHandler(u.default.beSpeed1vs1FinishGameByDistGap, function() {
                    l.store.dispatch(p.updateDistanceCheckEnd())
                }), this.deferredFinished.promise.then(function(e) {
                    e || t.deferredRewarded.promise.isResolved() || (a.info("Ranked2MatchService rewardTimeout init"), t.rewardTimeout = o.delay(1e3 * r.Constants.RewardResolveTimeout).then(function() {
                        t.rejectMatchEnd("Not received push message of match-result. The match will be end")
                    }))
                })
            }, t.prototype.rejectMatchEnd = function(e) {
                var t = c.default.getUUID();
                this.exceptionHandleService.catchScreenError(new Error(e), t), this.clearMatchState(), this.emitMatchEvent("match.reward.timeout", e)
            }, t.prototype.dummyMatchEnd = function(e) {
                var t = _.find(this.match.players, function(e) {
                        return e.id === l.store.getState().player.id
                    }),
                    i = {
                        pid: t.id,
                        sid: "",
                        rank: 0,
                        retire: !0,
                        team: t.team,
                        vehicle: {
                            code: t.vehicle.code,
                            grade: t.vehicle.grade,
                            parts: {
                                engine: 0,
                                transmission: 0,
                                nitroTank: 0,
                                bumper: 0,
                                frame: 0
                            },
                            status: t.vehicle.status
                        },
                        forceLeave: e,
                        abuseStatus: r.Reward.AbusePlayerStatus.NON_ABUSE_PLAYER
                    };
                return {
                    trackCode: this.match.trackCode,
                    gameMode: this.match.gameMode,
                    players: [i]
                }
            }, t.prototype.abandonMatch = function() {
                this._isMatchAbandoned = !0;
                var e = l.store.getState().player.id;
                d.request("DELETE", "match2/players/" + e), this.emitMatchEvent("match.abandon", !1);
                var t = _.find(this.match.players, function(e) {
                        return e.id === l.store.getState().player.id
                    }),
                    i = this.recordService.distanceList[t.id],
                    n = {
                        id: t.id,
                        time: 0,
                        mileage: 0,
                        ratio: i,
                        driftpoint: 0,
                        completionRate: 0
                    };
                this.records.push(n), l.store.dispatch(p.addRecord(n)), l.store.dispatch(h.abandonMatch(this.dummyMatchEnd(!0))), this.deferredFinished.resolve(!0), this.resolveReward(), this.externalService.beAbandonRace()
            }, t.prototype.expiredMatch = function() {
                l.store.dispatch(h.expiredMatch(this.dummyMatchEnd(!1))), this.deferredFinished.resolve(!0), this.resolveReward()
            }, t.prototype.cleanupOnConnectionError = function() {
                var e = l.store.getState().player.id;
                return d.request("DELETE", "match2/players/" + e), "SPEED1ON1" === l.store.getState().match.match.gameMode ? "root.menu.RankedMatch1On1" : "root.menu.RankedMatch6Players"
            }, t.prototype.resolveReward = function() {
                this.rewardTimeout && (this.rewardTimeout.cancel(), this.rewardTimeout = void 0), this.deferredRewarded.resolve()
            }, t.prototype.cheatFinishGame = function(e) {
                void 0 === e && (e = 200);
                var t = l.store.getState().player.id;
                a.info("roo2-match.cheatFinishGame"), this.addRecord({
                    id: t,
                    time: e,
                    mileage: 0,
                    ratio: 1,
                    driftpoint: 0
                })
            }, t.prototype.cheatPassGame = function() {
                var e = this;
                this.deferredFinished.promise.then(function() {
                    var e = l.store.getState().match.match.id,
                        t = l.store.getState().match,
                        i = t.match;
                    d.request("POST", "match2/" + e + "/@end", {
                        result: i.players.map(function(e, t) {
                            return {
                                playerid: e.id,
                                rank: t + 1,
                                laptime: 200 + t,
                                completionrate: 1,
                                ai: !!Number(e.id)
                            }
                        })
                    })
                }), o.delay(3500).then(function() {
                    return e.$window.beAllPlayerLoaded()
                }).delay(3e3).then(function() {
                    var t = 5;
                    return c.default.interval(function() {
                        e.$window.beHUDStartCountdown(t--)
                    }, 1e3, 5)
                }).delay(1e3).then(function() {
                    e.$window.beHUDStartGame(), e.externalService.cheatHudStartGame()
                }).delay(5e3).then(this.cheatFinishGame.bind(this)).delay(500).then(function() {
                    return e.$window.beFinishGame(!1)
                })
            }, t
        }(g.MatchAbstract);
    y.$inject = ["externalService", "popupService", "staticdataLoaderService", "gameModeService", "uistateNotifyService", "stateService", "dimService", "exceptionHandleService", "recordService", "$window", "pushService", "playerSnippetService", "worldChatService", "vehicleDataService"], t.Ranked2MatchService = y, t.default = y, angular.module("edge.components").factory("ranked2MatchService", c.default.generateService(y))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(150),
        o = i(131),
        a = i(4),
        s = i(3),
        c = i(213),
        d = i(10),
        l = i(151),
        u = i(39),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.logPrefix = "festival", t
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this._isMatchAbandoned = !1, this.featureType = "festival", this.pushService.on("msg", this._onMessage), this.initMatchEndPushListener()
            }, t.prototype.destroy = function() {
                this.pushService.removeListener("msg", this._onMessage), log.info("<<< FestivalMatchService push handler removed"), this.cleanUp.forEach(function(e) {
                    return e()
                }), this.cleanUp = []
            }, t.prototype.mergeAiPlayers = function(e) {}, t.prototype.setLobbyId = function(e) {
                this.lobbyId = e
            }, t.prototype.initMatchEndPushListener = function() {
                var e = this;
                this.cleanUp.push(this.pushService.subscribeResource(/\/v2\/festivals\/(.*)\/matchend$/, function(t, i) {
                    log.info(">> festival matchend", t, i, e._isMatchAbandoned), s.store.dispatch(o.endMatch(i.body, e.calculateTeamBattleScore(i.body)))
                })), this.cleanUp.push(this.pushService.subscribeResource(/\/v2\/festivals\/(.*)\/matchend\/(.*)\/reward/, function(t, i) {
                    log.info(">> festival reward", t, i, e._isMatchAbandoned), s.store.dispatch(o.receiveReward(i.body)), s.store.dispatch(r.reserveMatchReward(i.body)), e.resolveReward()
                })), this.cleanUp.push(this.pushService.subscribeResource(/\/festivals\/minifestival\/point\/increased/, function(e, t) {
                    log.info(">> festival match point increase", e, t), s.store.dispatch(o.receiveFestivalPoint(t.body))
                }))
            }, t.prototype.requestDeleteFeature = function() {
                var e = s.store.getState().player.id;
                d.request("DELETE", "festivals/players/" + e, {
                    lobbyId: this.lobbyId
                })
            }, t.prototype.cleanupOnConnectionError = function() {
                var e = s.store.getState().player.id;
                return d.request("DELETE", "match2/players/" + e), d.request("DELETE", "festivals/player/" + e, {
                    lobbyId: this.lobbyId
                }), "root.menu.ConditionLimitedMatch"
            }, t.prototype.clearMatchState = function() {
                this.isSuperPeer = !1, this.records = [], this.foxhuntingWinner = void 0, this.foxhuntingWinType = u.FoxhuntingWinType.FinishTrack, this.recordService.distanceList = {}, this.recordService.initRecord(), this.removeHandler(), this.deferredRewarded && this.deferredRewarded.reject(new Error("clearMatchState")), this.deferredFinished && this.deferredFinished.reject(new Error("clearMatchState")), this.cancelServerTimeout(), s.store.dispatch(l.leaveMatch())
            }, t.prototype.onPlayerLeft = function(e) {
                var t = this;
                this.playerSnippetService.getSnippetAsync(e).then(function(e) {
                    t.worldChatService.printRoomSystemMsg(e, "FRIENDLYMATCH_WAITINGROOM_SYSTEMMESSAGE_EXIT")
                })
            }, t
        }(c.default);
    t.FestivalMatchService = p, angular.module("edge.components").factory("festivalMatchService", a.default.generateService(p))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(10),
        o = i(3),
        a = i(68),
        s = function() {
            function e(e, t, i, n, r) {
                this.sessionService = e, this.graphicConfigService = t, this.soundConfigService = i, this.inputKeyConfigService = n, this.inGameConfigService = r
            }
            return e.prototype.getConfigFromServer = function() {
                return this.sessionService.getAccount().then(function(e) {
                    return r.request("GET", "playerconfig/" + e.id)
                })
            }, e.prototype.addInfoConfig = function() {
                var e = {};
                o.store.dispatch(a.addItem({
                    id: "info",
                    applied: e,
                    default: e
                }))
            }, e.prototype.init = function() {
                var e = this;
                return this.graphicConfigService.init(), this.soundConfigService.init(), this.getConfigFromServer().then(function(t) {
                    return e.inputKeyConfigService.init(t.inputKey), e.inGameConfigService.init(t.gameSetting), e.addInfoConfig(), t
                })
            }, e
        }();
    s.$inject = ["sessionService", "graphicConfigService", "soundConfigService", "inputKeyConfigService", "inGameConfigService"], t.ConfigInitService = s, angular.module("edge.components").factory("configInitService", n.default.generateService(s))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(3),
        o = i(68),
        a = function() {
            function e(e) {
                this.externalService = e
            }
            return e.prototype.getConfig = function() {
                return this.externalService.beGetConfiguration("sound")
            }, e.prototype.setConfig = function(e) {
                this.externalService.beSetConfiguration("sound", e), r.store.dispatch(o.update("sound", e))
            }, e.prototype.getDefaultConfig = function() {
                return this.externalService.beGetDefaultConfiguration("sound")
            }, e.prototype.init = function() {
                var e = {
                    id: "sound",
                    applied: this.getConfig(),
                    default: this.getDefaultConfig()
                };
                r.store.dispatch(o.addItem(e))
            }, e
        }();
    a.$inject = ["externalService"], t.SoundConfigService = a, angular.module("edge.components").factory("soundConfigService", n.default.generateService(a))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(3),
        a = i(68),
        s = i(10),
        c = function() {
            function e(e, t, i, n) {
                var r = this;
                this.$transitions = e, this.externalService = t, this.sessionService = i, this.featureSetService = n, e.onExit({
                    exiting: "root.menu.Openworld"
                }, function() {
                    return r.renew()
                })
            }
            return e.prototype.setConfig = function(e) {
                return o.store.dispatch(a.update("ingame", e)), this.externalService.beSetConfiguration("ingame", e), this.sessionService.getAccount().then(function(t) {
                    s.request("PUT", "playerconfig/" + t.id + "/gamesetting", {
                        gameSetting: e
                    })
                })
            }, e.prototype.getDefaultConfig = function() {
                return this.externalService.beGetDefaultConfiguration("ingame")
            }, e.prototype.init = function(e) {
                var t = this.getDefaultConfig();
                this.getAddedNewConfigs(e, t).length > 0 && (e = n.__assign({}, t, e)), this.externalService.beSetConfiguration("ingame", e);
                var i = {
                    id: "ingame",
                    applied: e,
                    default: t
                };
                return o.store.dispatch(a.addItem(i)), i
            }, e.prototype.getAddedNewConfigs = function(e, t) {
                var i = _.keys(e),
                    n = _.keys(t);
                return _.difference(n, i)
            }, e.prototype.renew = function() {
                var e = this.externalService.beGetConfiguration("ingame");
                this.setConfig(e)
            }, e.prototype.toggleCoreChat = function() {
                var e = o.store.getState().configuration.configs.ingame.applied,
                    t = n.__assign({}, e, {
                        chatOn: !e.chatOn
                    });
                o.store.dispatch(a.update("ingame", t)), this.externalService.beSetConfiguration("ingame", t)
            }, e
        }();
    c.$inject = ["$transitions", "externalService", "sessionService", "featureSetService"], t.InGameConfigService = c, angular.module("edge.components").factory("inGameConfigService", r.default.generateService(c))
}, , , , , , , , , , , , , , , , , , , , , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n;
    ! function(e) {
        e[e.First = 0] = "First", e[e.Second = 1] = "Second"
    }(n = t.PlayerIndex || (t.PlayerIndex = {}));
    var r = function() {
        function e(t) {
            this.freeDrive = e.generate("GoFreeDrive"), this.garage = e.generate("GoGarage"), this.upgrade = e.generate("GoUpgrade"), this.revealStart = e.generate("GoReveal"), this.revealEnd = e.generate("GoRevealEnd"), this.playerNameInput = e.generate("RacerNameInputScreen", !0), this.vehicleSelect = e.generate("CarSelectionScreen", !0), this.production = e.generate("GoProduction"), this.rankedMatchMain = e.generate("GoRankedMatch"), this.waitingRoom = e.generate("GoWaitingRoom"), this.quickMatch = e.generate("GoQuickFriendlyMatch"), this.tutorial = e.generate("DrivingTutorial"), this.tuningShop = e.generate("GoTuningShop"), this.festivalLobby = e.generate("GoFestivalLobby"), this.festivalVehicles = e.generate("GoFestivalVehicles"), this.numberPlate = e.generate("GoNumberPlate"), this.delegate = t
        }
        return e.generate = function(e, t) {
            return function(i) {
                t && console.assert(i === n.First || i === n.Second), this.delegate.beSetCameraState(e, i)
            }
        }, e
    }();
    t.CameraState = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(4),
        o = i(10),
        a = function() {
            function e(e, t, i, r, o, a, s) {
                var c = this;
                this.$filter = e, this.bootstrapService = t, this.pushService = i, this.playerSnippetService = r, this.notifierService = o, this.gameModeService = a, this.staticdata = s, n.trace("historyservice initialized"), this.pushService.subscribeResource(/\/([\d]*)\/@invite$/, function(t, i) {
                    var n = ((new Date).valueOf(), _.toSafeInteger(t[1])),
                        a = i.body,
                        s = a.password,
                        d = a.gameMode;
                    r.getSnippetAsync(i.body.invitePid).then(function(t) {
                        var i = e("translate"),
                            r = e("template")({
                                name: t.name,
                                mode: i(c.gameModeService.getRoomCoreModeLocaleString(d))
                            }, "SYSTEMTRAY_INVITEDGAME_DESC");
                        o.addFirst("SYSTEMTRAY_INVITEDGAME_TITLE", r, "root.menu.MultiplayRoom", {
                            roomId: n,
                            password: s
                        })
                    })
                }), this.pushService.subscribeResource(/room2\.team\.invited/, function(t, i) {
                    var n = ((new Date).valueOf(), i.body.roomId),
                        a = i.body,
                        s = a.password,
                        d = a.gameMode;
                    r.getSnippetAsync(i.body.invitePid).then(function(t) {
                        var i = e("translate"),
                            r = e("template")({
                                name: t.name,
                                mode: i(c.gameModeService.getGameModeLocaleString(d))
                            }, "SYSTEMTRAY_INVITEDGAME_DESC");
                        o.addFirst("SYSTEMTRAY_INVITEDGAME_TITLE", r, "root.menu.MultiplayTeamRoom", {
                            roomId: n,
                            password: s
                        })
                    })
                })
            }
            return e.prototype.getLaptimes = function(e, t, i) {
                var n = i.filter(function(e) {
                        return !e.ai
                    }).map(function(e) {
                        return e.id
                    }),
                    r = {
                        pids: n
                    };
                return o.request("GET", "statistics/gameMode/" + e + "/tracks/" + t + "/laptimes", r)
            }, e.prototype.getDriftPoints = function(e, t) {
                var i = t.map(function(e) {
                        return e.id
                    }),
                    n = {
                        pids: i
                    };
                return o.request("GET", "statistics/tracks/" + e + "/driftpoints", n)
            }, e.prototype.getFoxhuntingWinLoseRecord = function(e, t) {
                var i = t.map(function(e) {
                        return e.id
                    }),
                    n = {
                        pids: i
                    };
                return o.request("GET", "statistics/tracks/" + e + "/winloses", n)
            }, e.prototype.generateAiRecords = function(e, t) {
                var i = this.staticdata.trackData.getTrack(t),
                    n = i.aiLaptime;
                return n ? _.map(e, function(e) {
                    return {
                        pid: e,
                        laptime: n + _.random(-5e3, 5e3, !1)
                    }
                }) : []
            }, e.prototype.getTrackRecord = function(e, t, i) {
                var o = this;
                switch (e) {
                    case "DRIFTINDIVIDUAL":
                        return this.getDriftPoints(t, i).then(function(e) {
                            return e = _.sortBy(e, function(e) {
                                return -e.driftPoint
                            }), e.map(function(e) {
                                return {
                                    pid: e.pid,
                                    value: o.$filter("template")({
                                        dp: r.default.numberWithCommas(e.driftPoint)
                                    }, "FRIENDLYMATCH_RESULT_DP")
                                }
                            })
                        });
                    case "FOXHUNTINGINDIVIDUAL":
                        return this.getFoxhuntingWinLoseRecord(t, i).then(function(e) {
                            return n.info("FOXHUNTINGINDIVIDUAL " + JSON.stringify(e)), e = _.sortBy(e, function(e) {
                                return -e.win / (e.win + e.lose || 1)
                            }), e.map(function(e) {
                                var t = (e.win / (e.win + e.lose || 1) * 100).toFixed(0);
                                return {
                                    pid: e.pid,
                                    value: o.$filter("template")({
                                        number: t
                                    }, "GAMEROOM_RANKING_WINRATE_PERCENTAGE")
                                }
                            })
                        });
                    default:
                        return this.getLaptimes(e, t, i).then(function(e) {
                            var n = i.filter(function(e) {
                                    return e.ai
                                }).map(function(e) {
                                    return e.id
                                }),
                                a = o.generateAiRecords(n, t);
                            return _.sortBy(_.concat(e, a), "laptime").map(function(e) {
                                return {
                                    pid: e.pid,
                                    value: r.default.formatLapTime(e.laptime)
                                }
                            })
                        })
                }
            }, e
        }();
    a.$inject = ["$filter", "bootstrapService", "pushService", "playerSnippetService", "notifierService", "gameModeService", "staticdataLoaderService"], t.HistoryService = a, angular.module("edge.components").factory("historyService", r.default.generateService(a))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(6),
        o = i(4),
        a = i(544),
        s = i(548),
        c = i(289),
        d = {
            start: c.StateChangeDelayTime + 2,
            end: 10
        },
        l = function() {
            function e(e, t, i, n, r) {
                this.externalService = e, this.coreImageLoaderService = t, this.imageAtlasService = i, this.preloadImage = n, this.face = r, this.loadingStages = {}, this.stages = {}, this.destroyingStages = {}, this.viewCache = {}
            }
            return e.prototype.pop = function(e) {
                var t = this.stages[e];
                return t && (delete this.stages[e], delete this.loadingStages[e]), t
            }, e.prototype.loadView = function(e, t) {
                var i = this;
                if (this.loadingStages[e]) return this.loadingStages[e];
                Object.keys(this.destroyingStages).length && this.flushDestroyingStages();
                var n = this.fetchView(e),
                    o = this.loadAtlasMetadata(e),
                    a = r.all([n, o]).then(function(n) {
                        var o = i.prepareImages(e, n[0]),
                            a = i.build(e, t, n[0]);
                        return r.all([a, o])
                    });
                return this.loadingStages[e] = a
            }, e.prototype.fetchView = function(e) {
                var t = this,
                    i = o.default.defer();
                return this.viewCache[e] ? (setTimeout(function() {
                    var n = JSON.parse(t.viewCache[e]);
                    (new s.DataConverter).convert(e, n), i.resolve({
                        data: n
                    })
                }), i.promise) : ($.ajax({
                    url: "views/" + e + ".json",
                    dataType: "json"
                }).then(function(n, r, o) {
                    t.viewCache[e] = o.responseText, (new s.DataConverter).convert(e, n), i.resolve({
                        data: n
                    })
                }), i.promise)
            }, e.prototype.loadAtlasMetadata = function(e) {
                return this.imageAtlasService.load(e)
            }, e.prototype.build = function(e, t, i) {
                var r = i.data,
                    o = this.face.create(e, r, _.assign({}, a.GlobalCustomComponents, t.customComponents), t.willBeDelayLoaded);
                n.debug("Number of FaceJS object (" + e + "): " + o.getCurrentId());
                var s;
                t.stageBinder && (s = new t.stageBinder, s.onStageBuild(o)), this.stages[e] = {
                    stage: o,
                    binder: s
                }
            }, e.prototype.destroy = function(e) {
                var t = e.screenName;
                n.debug("$destroy from " + t + "(" + e.getCurrentId() + ")"), e.destroy(), this.coreImageLoaderService.unload(t)
            }, e.prototype.cancel = function(e) {
                var t = this,
                    i = this.pop(e);
                i ? this.destroy(i.stage) : this.loadingStages[e] ? this.loadingStages[e].then(function() {
                    i = t.pop(e), i ? t.destroy(i.stage) : (n.error("prebuildService.cancel(): could not cancel the stage:", e, "; It leaks memory."), delete t.loadingStages[e])
                }) : n.error("prebuildService.cancel(): loadView was not called for stage:", e)
            }, e.prototype.flushDestroyingStages = function() {
                for (var e = this, t = [], i = 0, n = Object.keys(this.destroyingStages); i < n.length; i++) {
                    var r = n[i],
                        o = this.destroyingStages[r],
                        a = o.stage,
                        s = o.timer;
                    clearTimeout(s), t.push(a)
                }
                this.destroyingStages = {}, setTimeout(function() {
                    return t.forEach(function(t) {
                        return e.destroy(t)
                    })
                })
            }, e.prototype.onDestroyTimer = function(e) {
                var t = e.screenName;
                if (!this.destroyingStages[t]) return void n.error("destroying done already??");
                delete this.destroyingStages[t], this.destroy(e)
            }, e.prototype.requestDestroy = function(e) {
                var t = this,
                    i = e.screenName;
                if (this.destroyingStages[i]) {
                    n.warn("destroying again??");
                    var r = this.destroyingStages[i],
                        o = r.stage,
                        a = r.timer;
                    clearTimeout(a), this.onDestroyTimer(o)
                }
                var s = 1e3 * _.random(d.start, d.end);
                this.destroyingStages[i] = {
                    stage: e,
                    timer: setTimeout(function() {
                        return t.onDestroyTimer(e)
                    }, s)
                }
            }, e.prototype.prepareImages = function(e, t) {
                var i = this,
                    n = function(t) {
                        return t.hPixels >= 1920 && t.vPixels >= 1080 && !i.imageAtlasService.find(e, t.path)
                    },
                    r = this.externalService.isEdgeBrowser() && this.externalService.hasFeature("experimental.coreImageTexture"),
                    o = t.data,
                    a = o.library.items || [],
                    s = _.filter(a, function(e) {
                        return "bitmap" === e.itemType
                    }),
                    c = _.filter(s, function(e) {
                        return n(e)
                    });
                if (r) {
                    var d = this.coreImageLoaderService.preload(e, _.map(c, "path")),
                        l = _.difference(s, c);
                    return this.coreImageLoaderService.load(e, _.map(l, "path")), d
                }
                return this.preloadImage.load(e, _.map(c, "path"))
            }, e
        }();
    l.$inject = ["externalService", "coreImageLoaderService", "imageAtlasService", "preloadImage", "face"], t.default = l, angular.module("edge.components").factory("prebuildService", o.default.generateService(l))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(49),
        o = i(107),
        a = i(19),
        s = c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.drawEffects = function() {
                e.prototype.drawEffects.call(this);
                var t = this.cssProxies[0];
                t.removeProperty("-webkit-filter");
                var i = this.getStyleValue() || c.DEFAULT_BLUR_AMOUNT;
                t.setProperty("-edge-background-blur", i), "debug" === o.Features.debugLevel && (this.htmlElement.removeAttribute("edge-filters"), this.htmlElement.setAttribute("edge-bgblur", i))
            }, t.prototype.getStyleValue = function() {
                return _.map(this.filters, function(e) {
                    return "blurFilter" !== e.name ? "" : e.blurX + "px " + e.blurY + "px"
                }).join("")
            }, t
        }(r.default);
    s.DEFAULT_BLUR_AMOUNT = "30px", s = c = n.__decorate([a.component("BackgroundBlur")], s), t.default = s;
    var c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(49),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.hasSize = !0
            }, t.prototype.postCreate = function() {
                e.prototype.postCreate.call(this);
                var t = this.$(".comp-Shape");
                t && (this.width = t.width, this.height = t.height), this.removeAllChildren()
            }, t
        }(r.MovieClip);
    a = n.__decorate([o.component("HitArea")], a), t.HitArea = a, t.default = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(135),
        o = i(128),
        a = i(8),
        s = i(2),
        c = i(288),
        d = i(19),
        l = u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._itemType = "text", t._items = [], t._selectedIndex = 0, t._onClick = function(e) {
                    if (t._selectedIndex !== e) {
                        var i = t._selectedIndex;
                        t.selectedIndex = e, t.emit(a.EventEx.CHANGE, e, i)
                    }
                }, t._isDropUp = !1, t
            }
            return n.__extends(t, e), t.evalText = function(e) {
                return void 0 === e || null === e ? "" : e.hasOwnProperty("text") ? e.text : e
            }, Object.defineProperty(t.prototype, "itemType", {
                get: function() {
                    return this._itemType
                },
                set: function(e) {
                    this._itemType = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "items", {
                get: function() {
                    return this._items
                },
                set: function(e) {
                    this._items = e, this.invalidateData()
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "itemNames", {
                get: function() {
                    return _.map(this.items, u.evalText)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "selectedIndex", {
                get: function() {
                    return this._selectedIndex
                },
                set: function(e) {
                    this._selectedIndex !== e && void 0 !== this._items[e] && (this._selectedIndex = e, this.invalidateData())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "selectedItem", {
                get: function() {
                    return this.items[this.selectedIndex]
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "selectedName", {
                get: function() {
                    return u.evalText(this.selectedItem)
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.selectFirst = function(e) {
                this.selectedIndex = _.findIndex(this.items, e)
            }, Object.defineProperty(t.prototype, "onClick", {
                get: function() {
                    return this._onClick
                },
                set: function(e) {
                    this._onClick = e
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "isDropUp", {
                get: function() {
                    return this._isDropUp
                },
                set: function(e) {
                    this._isDropUp = e
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.postCreate = function() {
                var t = this;
                e.prototype.postCreate.call(this);
                var i = this.$(".comp-DropdownArea");
                i && (i.mouseEnabled = !1);
                var n = i || this.$("> .comp-HitArea") || this;
                n === this && (this.hasSize = !0);
                var r = $(n.htmlElement);
                this.addListener(s.MouseEventEx.CLICK, function() {
                    c.render(!0, {
                        items: t.itemNames,
                        itemType: t.itemType,
                        element: r,
                        selectedIndex: t.selectedIndex,
                        onClick: t.onClick,
                        onClose: function() {
                            return t.selected = !1
                        },
                        style: {
                            isDropUp: t.isDropUp
                        }
                    }), t.selected = !0
                })
            }, t.prototype.drawData = function() {
                e.prototype.drawData.call(this);
                var t = this.$("textField") || this.$("buttonName");
                t && r.bindText(t, this.selectedName)
            }, t
        }(o.Button);
    l = u = n.__decorate([d.component("DropdownButton")], l), t.DropdownButton = l, t.default = l;
    var u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(19),
        o = i(49),
        a = i(208),
        s = i(2),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.handleFocusIn = this._handleFocusIn.bind(this), this.handleFocusOut = this._handleFocusOut.bind(this), this.handleMouseOver = this._handleMouseOver.bind(this), this.handleMouseOut = this._handleMouseOut.bind(this)
            }, t.prototype.postCreate = function() {
                e.prototype.postCreate.call(this), this.textInput = this.$("> .id-textFieldContainer"), this.textInput.addEventListener(a.FocusEventEx.FOCUS_IN, this.handleFocusIn), this.textInput.textField.addEventListener(a.FocusEventEx.FOCUS_OUT, this.handleFocusOut), this.textInput.addEventListener(s.MouseEventEx.MOUSE_OVER, this.handleMouseOver), this.textInput.addEventListener(s.MouseEventEx.MOUSE_OUT, this.handleMouseOut)
            }, t.prototype._handleFocusIn = function() {
                this.textInput.enabled && this.gotoAndPlay("focused")
            }, t.prototype._handleFocusOut = function() {
                this.textInput.enabled && this.gotoAndPlay("default")
            }, t.prototype._handleMouseOver = function() {
                this.textInput.enabled && !this.textInput.focused && this.gotoAndPlay("over")
            }, t.prototype._handleMouseOut = function() {
                this.textInput.enabled && !this.textInput.focused && this.gotoAndPlay("default")
            }, t
        }(o.default);
    c = n.__decorate([r.component("TextInputView")], c), t.TextInputView = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(49),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t
        }(r.MovieClip);
    a = n.__decorate([o.component("NoneEvents")], a), t.NoneEvents = a, t.default = a
}, , , , , , , , , , , , , , , , , , , , , , , , function(e, t) {}, , , , function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(4),
        o = i(10),
        a = function() {
            function e() {
                this.logConfig = {}, this.clientSessionUuid = r.default.getUUID()
            }
            return e.prototype.getAccount = function() {
                var e = this;
                return this.account ? n.resolve(this.account) : o.request("GET", "accounts").then(function(t) {
                    if (!t || 0 === t.length) throw new Error("Get account.current");
                    var i = t[0];
                    return e.account = i, i
                })
            }, e
        }();
    t.SessionService = a, t.default = a, angular.module("edge.components").factory("sessionService", r.default.generateService(a))
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        var i = t.filterFn,
            n = t.id,
            r = t.filterOpts;
        n = n || "", o.bindHtml(e, i(n, r))
    }

    function r(e, t) {
        var i = t.filterFn,
            n = t.id,
            r = t.filterOpts;
        n = n || "", o.bindHtml(e, i(r, n))
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(135);
    t.translate = n, t.template = r
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        var i = null !== t && "object" == typeof t ? t : {
                src: t,
                fallback: void 0
            },
            n = i.src,
            a = i.fallback;
        if (e instanceof r.ExternalImage) return e.src = n, void e.setFallbackImg(a);
        var s = e.getChildAt(0);
        if (s && (s.visible = !1, n)) {
            var c = $(e.htmlElement).find("img.eg-external");
            if (c.length) {
                if (c.attr("src") === n) return
            } else c = $("<img>", {
                class: "eg-external",
                style: "position: absolute; width: " + s.width + "px; height: " + s.height + "px"
            }).appendTo(e.htmlElement);
            c.attr("src", n), o.default(c, a)
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(546),
        o = i(257);
    t.externalImage = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(566),
        o = i(81),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.isFunction = function(e) {
                return "function" == typeof e
            }, t.prototype.applyCondition = function(e) {
                var t = this.isFunction(e) ? e() : e;
                if (t)
                    if (this.item) o.shallowEqual(t, this.item.props) || (this.updateInstance(this.item.face, this.item.binder, t), this.item.props = t);
                    else {
                        var i = this.createInstance(t);
                        this.item = {
                            face: i.face,
                            binder: i.binder,
                            props: t
                        }
                    }
                else this.item && (this.destroyInstance(this.item.face, this.item.binder), this.item = void 0)
            }, t
        }(r.StructuralBinder);
    t.ConditionBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = function(e, t) {
            return n.__assign({}, e, (i = {}, i[t] = !0, i));
            var i
        };
    t.FreedriveStates = [66, 65, 30, 29, 57, 5, 6, 7, 46, 52].reduce(r, {}), t.OpenworldStates = [86].reduce(r, {}), t.RaceStates = [35, 36, 37, 38, 44, 47, 70, 73, 82].reduce(r, {})
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "view.unloadScreen",
            screenId: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.unloadScreen = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(252),
        o = i(567),
        a = function() {
            function e() {}
            return e.prototype.cleanupRemovedChildren = function(e) {
                if (e) {
                    for (var t = e.numChildren, i = [], n = 0; n < t; ++n) {
                        var r = e.getChildAt(n);
                        !r || r.htmlElement.parentNode && "#document-fragment" !== r.htmlElement.parentNode.nodeName || r.cloned && i.push(r)
                    }
                    i.forEach(function(t) {
                        e.removeChild(t), t.destroy()
                    })
                }
            }, e.prototype.rebind = function(e, t) {
                var i = o.rebindFace(t.get(0), e),
                    n = t.parent().get(0)._face;
                n instanceof r.MaskLayerContainer && (n = n.parent), n.addChild(i), e.exist && i.reboot(), this.cleanupRemovedChildren(i.parent)
            }, e
        }();
    t.RebindFaceService = a, angular.module("edge.components").factory("rebindFaceService", n.default.generateService(a))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = i(7),
        o = i(158),
        a = i(114),
        s = i(161),
        c = i(6),
        d = i(63),
        l = i(4),
        u = i(12),
        p = i(82),
        h = i(10),
        f = i(3),
        v = i(134),
        m = function() {
            function e(e, t) {
                var i = this;
                this.pushService = e, this.vehicleDataService = t, this.getTradableVehicles = function() {
                    return i.filterTradableVehicles(u.getOwnVehicles())
                }, this._refiner = function(e) {
                    return n.map(e, t.refineGarageVehicle.bind(t))
                }, this.pushService.subscribeResource(/\/asset\/vehicles\/(add|update|steering)/, this.onVehicleAddOrUpdate.bind(this)), this.pushService.subscribeResource(/\/asset\/vehicles\/del/, this.onVehicleRemove.bind(this)), this.pushService.subscribeResource(/\/asset\/vehicles\/update\/remainingcount/, this.onUpdateRemainingCount.bind(this))
            }
            return e.prototype.onVehicleAddOrUpdate = function(e, t) {
                if (t.body) {
                    var i = this.createVehicleInstance(t.body),
                        n = e[1];
                    f.store.dispatch("add" === n ? d.add(i) : d.update(i))
                }
            }, e.prototype.onVehicleRemove = function(e, t) {
                t.body && f.store.dispatch(d.remove(t.body.id))
            }, e.prototype.onUpdateRemainingCount = function(e, t) {
                if (t.body) {
                    var i = this.createVehicleInstance(t.body);
                    f.store.dispatch(d.update(i))
                }
            }, e.prototype.fetch = function() {
                var e = this;
                return u.getOwnVehicles().length ? c.resolve() : this.fetching ? this.fetching : (this.initVehicleData(), this.fetching = this.fetchVehicles().then(function(t) {
                    if (e.fetching = void 0, n.isEmpty(t)) return c.resolve();
                    e.fetchIgrVehicles()
                }))
            }, e.prototype.initVehicleData = function() {
                f.store.dispatch(s.fetch(this.vehicleDataService.getVehiclesData()))
            }, e.prototype.fetchVehicles = function() {
                var e = this;
                return h.request("GET", "vehicles").then(function(t) {
                    return f.store.dispatch(d.fetch(e._refiner(t))), t
                })
            }, e.prototype.fetchIgrVehicles = function() {
                var e = this;
                return h.request("GET", "igrvehicles").then(function(t) {
                    var i = t && t.vehicles || [],
                        n = t && t.startAt || void 0,
                        r = t && t.endAt || void 0;
                    f.store.dispatch(d.fetchIgr({
                        vehicles: e._refiner(i),
                        startAt: n,
                        endAt: r
                    }))
                })
            }, Object.defineProperty(e.prototype, "producibleVehicles", {
                get: function() {
                    var e = this;
                    return this._productableVehicles || (this._productableVehicles = n.map(this.vehicleDataService.getVehiclesData(), function(t) {
                        return e.vehicleDataService.createRefinedVehicle(t.code)
                    })), this._productableVehicles
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.createVehicle = function(e) {
                var t = this;
                return h.request("POST", "blueprints/" + e + "/@produce").then(function(e) {
                    var i = t.createVehicleInstance(e);
                    return f.store.dispatch(d.add(i)), i
                })
            }, e.prototype.addVehicles = function(e, t, i) {
                void 0 === t && (t = 1);
                var r = f.store.getState().player.id;
                return c.all(e.map(function(e) {
                    var o = {
                        pid: r,
                        code: e,
                        grade: t
                    };
                    return n.isSafeInteger(i) && 0 < i && (o.remainingCount = i), h.request("POST", "vehicles", o)
                }))
            }, e.prototype.removeVehicle = function(e) {
                return h.request("DELETE", "vehicles/" + e)
            }, e.prototype.hasEmptyVehicleSlot = function() {
                return this.getEmptyVehicleSlotCount() > 0
            }, e.prototype.getEmptyVehicleSlotCount = function() {
                return f.store.getState().player.unlock.maxGarageCount - u.getOwnTrialVehicles().length
            }, e.prototype.toggleFavorite = function(e) {
                return h.request("PUT", "vehicle/" + e + "/favorite")
            }, e.prototype.upgrade = function(e, t, i) {
                return h.request("POST", "vehicles/" + e.id + "/@upgrade", {
                    mid: t.id,
                    color: i ? 1 : 2
                })
            }, e.prototype.previewUpgradedOvr = function(e, t) {
                var i = e.grade,
                    n = t.grade;
                console.assert(n <= i), console.assert(i !== p.MaxGrade || 0 === n);
                var r = this.vehicleDataService.getGradeBonus(e.code, e.grade + (0 === t.grade ? 0 : 1)),
                    o = v.VehicleDataService.sumStatus([e.status, r]);
                return v.VehicleDataService.getIStatusOvr(o)
            }, e.prototype.createVehicleInstance = function(e) {
                return this.vehicleDataService.refineGarageVehicle(e)
            }, e.prototype.install = function(e, t, i) {
                var n = this,
                    o = u.getVehicleInfo(e);
                return h.request("POST", "vehicles/" + e + "/parts/" + t + "/@install", {
                    partCode: i
                }).then(function(s) {
                    r.debug("VehicleService.install", e, t, i, s);
                    var c = n.createVehicleInstance(s);
                    f.store.dispatch(a.attach(o, c)), f.store.dispatch(d.update(c))
                })
            }, e.prototype.upgradeParts = function(e, t) {
                var i = this,
                    n = u.getVehicleInfo(e);
                return h.request("POST", "vehicles/" + e + "/parts/" + t + "/@upgrade").then(function(a) {
                    r.debug("VehicleService.upgrade", e, t, a);
                    var s = i.createVehicleInstance(a.vehicle);
                    f.store.dispatch(o.upgradeComplete(n, s, a.isSuccess)), f.store.dispatch(d.update(s))
                })
            }, e.prototype.uninstall = function(e, t) {
                var i = this,
                    n = u.getVehicleInfo(e);
                return h.request("POST", "vehicles/" + e + "/parts/" + t + "/@uninstall").then(function(e) {
                    var t = i.createVehicleInstance(e);
                    f.store.dispatch(a.detach(n, t)), f.store.dispatch(d.update(t))
                })
            }, e.prototype.isTuned = function(e, t) {
                var i = this.vehicleDataService.getDefaultTuningData(e);
                return t.colorCode !== i.colorCode || t.wheelCode !== i.wheelCode || 0 !== t.wrapCode
            }, e.prototype.filterTunedVehicles = function(e) {
                var t = this;
                return n.filter(e, function(e) {
                    return !t.isTuned(e.code, e.paint)
                })
            }, e.prototype.filterTradableVehicles = function(e) {
                var t = this;
                if (!e || 0 === e.length) return [];
                var i = u.getRecentVehicle();
                return n.filter(e, function(e) {
                    return !t.isNotTradable(e, i)
                })
            }, e.prototype.isNotTradable = function(e, t) {
                return !f.store.getState().trade.vehicleAvailables[e.clazz][e.grade] || 0 === e.grade || e.igr || e.favorite || t && e.id === t.id
            }, e
        }();
    m.$inject = ["pushService", "vehicleDataService"], t.VehicleService = m, t.default = m, angular.module("edge.components").factory("vehicleService", l.default.generateService(m))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(4),
        o = i(10),
        a = function() {
            function e(e, t) {
                this.staticdata = e, this.pushService = t, this.blueprints = {}, this.pushService.subscribeResource(/\/blueprints\/(.*)/, this.updateAmount.bind(this))
            }
            return Object.defineProperty(e.prototype, "staticBlueprints", {
                get: function() {
                    return this.staticdata.blueprintData
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.fetch = function() {
                var e = this;
                return Object.keys(this.blueprints).length ? n.resolve() : o.request("GET", "blueprints").then(function(t) {
                    for (var i = 0, n = t; i < n.length; i++) {
                        var r = n[i];
                        e.blueprints[r.code] = r.count
                    }
                })
            }, e.prototype.getBlueprintCount = function(e) {
                return this.blueprints[e] || 0
            }, e.prototype.getStaticBlueprint = function(e) {
                return this.staticdata.blueprintData[e]
            }, e.prototype.cheatBlueprints = function(e, t) {
                return o.request("POST", "devonly/blueprints", {
                    codes: e,
                    count: t
                })
            }, e.prototype.updateAmount = function(e, t) {
                var i = Number(e[1]);
                this.blueprints[i] = Number(t.body.count)
            }, e.prototype.getBlueprintTooltipInfo = function(e) {
                if (e) {
                    var t = this.getStaticBlueprint(e);
                    return {
                        code: e,
                        current: this.getBlueprintCount(e),
                        total: t.blueprintAmount
                    }
                }
            }, e
        }();
    a.$inject = ["staticdataLoaderService", "pushService"], t.BlueprintService = a, t.default = a, angular.module("edge.components").factory("blueprintService", r.default.generateService(a))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = i(6),
        a = i(7),
        s = i(568),
        c = i(10),
        d = i(4),
        l = i(3),
        u = i(88),
        p = i(134),
        h = i(67),
        f = function(e) {
            function t(t, i, n, r, o, a) {
                var s = e.call(this) || this;
                return s.pushService = t, s.staticdataLoaderService = i, s.$filter = n, s.notifierService = r, s.vehicleService = o, s.vehicleDataService = a, s.resourceSubscribed = !1, s.maxOfferCount = 50, s.searchVehicles = [], s.searchManufacturers = [], s
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "searchValue", {
                get: function() {
                    return this.searchStatusValue
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.getSearchVehicles = function() {
                return this.searchVehicles
            }, t.prototype.getSearchManufacturers = function() {
                return this.searchManufacturers
            }, t.prototype.fetch = function() {
                return this.subscribeResources(), this.searchStatusValue = this.staticdataLoaderService.searchStatusValue, this.initPromise = this.initPromise || o.all([this.getOfferList(), this.getFavoriteList(), this.setSearchVehicles(), this.setSearchManufacturers()])
            }, t.prototype.getVehicleOfferByCode = function(e) {
                var t = this,
                    i = {
                        code: e,
                        offset: 0,
                        limit: 10
                    };
                return c.request("GET", "market2/summaries", i, !0).then(function(e) {
                    return e.map(function(e) {
                        return t.createVehicleSummary(e)
                    })
                })
            }, t.prototype.getVehicleOffer = function(e, t) {
                var i = this,
                    n = {
                        code: e,
                        grade: t
                    };
                return c.request("GET", "market2/summaries/detail", n).then(function(e) {
                    return e.map(function(e) {
                        return i.createVehicleSummary(e)
                    })
                })
            }, t.prototype.purchaseVehicle = function(e, t, i) {
                var n = this;
                return c.request("POST", "market2/orders", {
                    code: e,
                    grade: t,
                    price: i
                }).then(function(e) {
                    return n.createVehicleOffer(e)
                })
            }, t.prototype.registerVehicleOffer = function(e, t, i, n) {
                var r = this;
                return c.request("POST", "market2/offers", {
                    vid: e,
                    code: t,
                    grade: i,
                    price: n
                }).then(function(e) {
                    return r.createVehicleOffer(e)
                })
            }, t.prototype.reofferVehicle = function(e, t) {
                var i = this;
                return c.request("PUT", "market2/offers/" + e.id + "/price", {
                    price: t
                }).then(function(e) {
                    var t = i.createVehicleOffer(e);
                    return l.store.dispatch(s.modifyMyOffer(t)), t
                })
            }, t.prototype.receiptOffer = function(e) {
                var t = this;
                return c.request("PUT", "market2/offers/" + e.id + "/@done").then(function(e) {
                    return t.createVehicleOffer(e)
                })
            }, t.prototype.receiptAllOffer = function() {
                return c.request("PUT", "market2/offers/@done")
            }, t.prototype.cancelVehicleOffer = function(e) {
                return c.request("DELETE", "market2/offers/" + e.id)
            }, t.prototype.getSortedManufacturerCodes = function() {
                return _.map(this.searchManufacturers, "code")
            }, t.prototype.getMarketLimitPrice = function(e, t) {
                var i = {
                    code: e,
                    offset: 0,
                    limit: 1
                };
                return c.request("GET", "market2/baseprices", i).then(function(e) {
                    var i = e.info[t].price,
                        n = Math.round(i * e.info[t].upperrate),
                        r = Math.round(i * e.info[t].lowerrate),
                        o = d.default.getBasePriceDivider(i);
                    return n = Math.floor(n / o) * o, r = Math.ceil(r / o) * o, {
                        base: i,
                        lower: r,
                        upper: n
                    }
                })
            }, t.prototype.addFavorite = function(e, t) {
                return c.request("POST", "market2/favorites", {
                    code: e,
                    grade: t
                })
            }, t.prototype.removeFavorite = function(e, t) {
                return c.request("DELETE", "market2/favorites?code=" + e + "&grade=" + t)
            }, t.prototype.getOfferList = function() {
                var e = this,
                    t = 0;
                return c.request("GET", "market2/offers").then(function(i) {
                    var n = [];
                    i.forEach(function(i) {
                        "SELLING" !== i.status && "SOLD" !== i.status ? t++ : n.push(e.createVehicleOffer(i))
                    }), l.store.dispatch(s.fetchMyOffers(n))
                }).then(function() {
                    t > 0 && e.recoverOfferList()
                })
            }, t.prototype.getFavoriteList = function() {
                var e = this;
                return c.request("GET", "market2/favorites").then(function(t) {
                    var i = t.vehicles.map(function(t) {
                        return e.createFavoriteVehicle(t)
                    });
                    l.store.dispatch(s.fetchFavorites(i))
                })
            }, t.prototype.recoverOfferList = function() {
                c.request("POST", "market2/offers/@recover").then(function(e) {
                    e ? a.debug("offer list recover SUCCESS") : a.debug("offer list recover FAIL")
                })
            }, t.prototype.setSearchVehicles = function() {
                var e = this;
                _.forEach(this.vehicleDataService.getVehiclesData(), function(t) {
                    -1 === _.indexOf(u.ExcludeSearchVehicles, t.code) && e.searchVehicles.push({
                        code: t.code,
                        name: e.$filter("vehicleName")(t.code),
                        manufacturer: e.$filter("manufacturerName")(t.manufacturerCode),
                        manufacturerPenName: e.$filter("manufacturerPenName")(t.manufacturerCode),
                        penName: e.$filter("vehiclePenName")(t.code)
                    })
                })
            }, t.prototype.setSearchManufacturers = function() {
                var e = this;
                _.forEach(this.vehicleDataService.getManufacturers(), function(t) {
                    -1 === _.indexOf(u.ExcludeSearchManufacturers, t) && e.searchManufacturers.push({
                        code: t,
                        name: e.$filter("manufacturerName")(t),
                        penName: e.$filter("manufacturerPenName")(t)
                    })
                }), this.searchManufacturers = this.searchManufacturers.sort(h(function(e) {
                    return e.name
                }))
            }, t.prototype.getCommissionInfo = function() {
                var e = this;
                return _.map(["common", "igr", "vip"], function(t) {
                    return {
                        key: t,
                        value: e.staticdataLoaderService.commissionValue[t]
                    }
                })
            }, t.prototype.searchOfferList = function(e) {
                var t = this,
                    i = this.generateQueryParameter(e);
                return c.request("GET", "market2/vehicle/search", i, !0).then(function(e) {
                    return e.map(function(e) {
                        return t.createVehicleSummary(e)
                    })
                })
            }, t.prototype.subscribeResources = function() {
                this.resourceSubscribed || (this.resourceSubscribed = !0, this.pushService.subscribeResource(/\/market2\/offers\/@del/, this.removeOfferFromMessage.bind(this)), this.pushService.subscribeResource(/\/market2\/offers\/@create/, this.addOfferFromMessage.bind(this)), this.pushService.subscribeResource(/\/market2\/offers\/@complete/, this.removeOfferFromMessage.bind(this)), this.pushService.subscribeResource(/\/market2\/offers\/complete\/@all/, this.reSelectOfferFromMessage.bind(this)), this.pushService.subscribeResource(/\/market2\/favorites\/@add/, this.addFavoriteFromMessage.bind(this)), this.pushService.subscribeResource(/\/market2\/favorites\/@del/, this.removeFavoriteFromMessage.bind(this)), this.pushService.subscribeResource(/\/market2\/offers\/@purchase/, this.purchaseFromMessage.bind(this)))
            }, t.prototype.generateQueryParameter = function(e) {
                var t = {};
                return void 0 !== e.code && (t.code = JSON.stringify(e.code)), void 0 !== e.minPrice && (t["price.$gte"] = e.minPrice), void 0 !== e.maxPrice && e.maxPrice >= 0 && (t["price.$lte"] = e.maxPrice), void 0 !== e.clazz && (t.clazz = JSON.stringify(e.clazz)), void 0 !== e.minGrade && (t["grade.$gte"] = e.minGrade), void 0 !== e.maxGrade && (t["grade.$lte"] = e.maxGrade), void 0 !== e.minOvr && (t["ovr.$gte"] = e.minOvr), void 0 !== e.maxOvr && (t["ovr.$lte"] = e.maxOvr), void 0 !== e.minSpeed && (t["topspeed.$gte"] = e.minSpeed), void 0 !== e.maxSpeed && (t["topspeed.$lte"] = e.maxSpeed), void 0 !== e.minAcceleration && (t["acceleration.$gte"] = e.minAcceleration), void 0 !== e.maxAcceleration && (t["acceleration.$lte"] = e.maxAcceleration), void 0 !== e.minNitro && (t["nitrocapacity.$gte"] = e.minNitro), void 0 !== e.maxNitro && (t["nitrocapacity.$lte"] = e.maxNitro), void 0 !== e.minStrength && (t["strength.$gte"] = e.minStrength), void 0 !== e.maxStrength && (t["strength.$lte"] = e.maxStrength), void 0 !== e.minDurability && (t["durability.$gte"] = e.minDurability), void 0 !== e.maxDurability && (t["durability.$lte"] = e.maxDurability), void 0 !== e.manufacturerCode && (t.manufacturerCode = JSON.stringify(e.manufacturerCode)), t
            }, t.prototype.createVehicleOffer = function(e) {
                return n.__assign({
                    offer: e,
                    vehicle: this.vehicleDataService.getVehicleData(e.code)
                }, this.calcOvr(e.code, e.grade))
            }, t.prototype.createVehicleSummary = function(e) {
                return n.__assign({
                    summary: e,
                    vehicle: this.vehicleDataService.getVehicleData(e.code)
                }, this.calcOvr(e.code, e.grade))
            }, t.prototype.createFavoriteVehicle = function(e) {
                return n.__assign({
                    favorite: e,
                    vehicle: this.vehicleDataService.getVehicleData(e.code)
                }, this.calcOvr(e.code, e.grade))
            }, t.prototype.calcOvr = function(e, t) {
                var i = this.vehicleDataService.getGradeBonusAttr(e, t);
                return {
                    calStatus: i,
                    calOvr: p.VehicleDataService.getIStatusOvr(i)
                }
            }, t.prototype.addOfferFromMessage = function(e, t) {
                if (t.body) {
                    var i = this.createVehicleOffer(t.body);
                    l.store.dispatch(s.addMyOffer(i))
                }
            }, t.prototype.removeOfferFromMessage = function(e, t) {
                t.body && l.store.dispatch(s.removeMyOffer({
                    id: t.body.id
                }))
            }, t.prototype.reSelectOfferFromMessage = function(e, t) {
                t.body && this.getOfferList()
            }, t.prototype.purchaseFromMessage = function(e, t) {
                if (t.body) {
                    var i = this.$filter("translate")("SYSTEMTRAY_TRADEMARKETSELL_TITLE"),
                        n = this.$filter("template")({
                            vehicle: this.$filter("vehicleName")(t.body.code),
                            price: d.default.toMoney(t.body.price)
                        }, "SYSTEMTRAY_TRADEMARKETSELL_DESC");
                    this.notifierService.addLast(i, n, "root.menu.VehicleSellList"), this.getOfferList()
                }
            }, t.prototype.addFavoriteFromMessage = function(e, t) {
                if (t.body && t.body.code && t.body.grade) {
                    var i = this.createFavoriteVehicle({
                        code: t.body.code,
                        grade: t.body.grade
                    });
                    l.store.dispatch(s.addFavorite(i))
                }
            }, t.prototype.removeFavoriteFromMessage = function(e, t) {
                t.body && t.body.code && t.body.grade && l.store.dispatch(s.removeFavorite({
                    code: t.body.code,
                    grade: t.body.grade
                }))
            }, t.prototype.sortingMyOffers = function(e) {
                return e.sort(h(function(e) {
                    return "SOLD" === e.offer.status
                }, -1).thenBy(function(e) {
                    return e.offer.chgdt
                }, -1)), e
            }, t.prototype.getFavoritePoint = function(e, t) {
                return e.favorite ? 3 : e.id === t ? 2 : 1
            }, t.prototype.getClazzPoint = function(e) {
                return "SS" === e ? 5 : "S" === e ? 4 : "A" === e ? 3 : "B" === e ? 2 : 1
            }, t.prototype.sortingVehicleInfo = function(e, t, i, n) {
                var r = this,
                    o = !0 === i ? -1 : 1;
                return "favorite" === t ? e.sort(h(function(e, t) {
                    return r.getFavoritePoint(e, n) - r.getFavoritePoint(t, n)
                }, o).thenBy(function(e, t) {
                    return r.getClazzPoint(e.clazz) - r.getClazzPoint(t.clazz)
                }, -1).thenBy("grade", -1).thenBy("createdat", -1)) : "clazz" === t ? e.sort(h(function(e, t) {
                    return r.getClazzPoint(e.clazz) - r.getClazzPoint(t.clazz)
                }, o).thenBy("grade", -1).thenBy("createdat", -1)) : "name" === t ? e.sort(h(function(e) {
                    return r.translateName(e.code)
                }, o).thenBy(function(e, t) {
                    return r.getClazzPoint(e.clazz) - r.getClazzPoint(t.clazz)
                }, -1).thenBy("grade", -1).thenBy("createdat", -1)) : "grade" === t ? e.sort(h("grade", o).thenBy(function(e, t) {
                    return r.getClazzPoint(e.clazz) - r.getClazzPoint(t.clazz)
                }, -1).thenBy("createdat", -1)) : "ovr" === t ? e.sort(h("ovr", o).thenBy(function(e, t) {
                    return r.getClazzPoint(e.clazz) - r.getClazzPoint(t.clazz)
                }, -1).thenBy("grade", -1).thenBy("createdat", -1)) : "tunning" === t && e.sort(h(function(e, t) {
                    return r.tunningComparator(e, t)
                }, o)), e
            }, t.prototype.sortingSummariesInfo = function(e, t, i) {
                var n = this,
                    r = !0 === i ? -1 : 1;
                return "price" === t ? e.sort(h(function(e) {
                    return e.summary.price
                }, r).thenBy(function(e) {
                    return e.calOvr
                }, -1).thenBy(function(e) {
                    return n.translateName(e.summary.code)
                }, 1)) : "clazz" === t ? e.sort(h(function(e) {
                    return n.getClazzPoint(e.vehicle.clazz)
                }, r).thenBy(function(e) {
                    return e.summary.grade
                }, -1).thenBy(function(e) {
                    return n.translateName(e.summary.code)
                }, 1)) : "name" === t ? e.sort(h(function(e) {
                    return n.translateName(e.summary.code)
                }, r).thenBy(function(e) {
                    return n.getClazzPoint(e.vehicle.clazz)
                }, -1).thenBy(function(e) {
                    return e.summary.grade
                }, -1)) : "grade" === t ? e.sort(h(function(e) {
                    return e.summary.grade
                }, r).thenBy(function(e) {
                    return n.getClazzPoint(e.vehicle.clazz)
                }, -1)) : "ovr" === t && e.sort(h(function(e) {
                    return e.calOvr
                }, r).thenBy(function(e) {
                    return n.getClazzPoint(e.vehicle.clazz)
                }, -1).thenBy(function(e) {
                    return e.summary.grade
                }, -1)), e
            }, t.prototype.sortingFavorite = function(e, t, i) {
                var n = this,
                    r = !0 === i ? -1 : 1;
                return "clazz" === t ? e.sort(h(function(e) {
                    return n.getClazzPoint(e.vehicle.clazz)
                }, r).thenBy(function(e) {
                    return e.favorite.grade
                }, -1)) : "name" === t ? e.sort(h(function(e) {
                    return n.translateName(e.favorite.code)
                }, r).thenBy(function(e) {
                    return n.getClazzPoint(e.vehicle.clazz)
                }, -1).thenBy(function(e) {
                    return e.favorite.grade
                }, -1)) : "grade" === t ? e.sort(h(function(e) {
                    return e.favorite.grade
                }, r).thenBy(function(e) {
                    return n.getClazzPoint(e.vehicle.clazz)
                }, -1)) : "ovr" === t && e.sort(h(function(e) {
                    return e.calOvr
                }, r).thenBy(function(e) {
                    return n.getClazzPoint(e.vehicle.clazz)
                }, -1).thenBy(function(e) {
                    return e.favorite.grade
                }, -1)), e
            }, t.prototype.translateName = function(e) {
                return this.$filter("translate")(this.$filter("l10nstring")(e, "vehicle", "FULL"))
            }, t.prototype.tunningComparator = function(e, t) {
                return (this.vehicleService.isTuned(e.code, e.paint) ? 1 : 0) - (this.vehicleService.isTuned(t.code, t.paint) ? 1 : 0)
            }, t
        }(r.EventEmitter);
    f.$inject = ["pushService", "staticdataLoaderService", "$filter", "notifierService", "vehicleService", "vehicleDataService"], t.default = f, angular.module("edge.components").factory("marketService", d.default.generateService(f))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(7),
        a = i(22),
        s = i(35),
        c = i(10),
        d = i(4),
        l = i(297),
        u = i(3),
        p = function(e) {
            function t(t, i, n, r, o, a) {
                var s = e.call(this) || this;
                return s.$rootScope = t, s.$filter = i, s.pushService = n, s.playerSnippetService = r, s.notifierService = o, s.presenceService = a, s.fetched = !1, s.maxFriendsCount = 100, s.requestingInvite = !1, s.pushService.subscribeResource(/^\/friends\/(.*)$/, function(e, t) {
                    return s.onFriendChanged(e, t)
                }), s.pushService.subscribeResource(/^\/invites\/(.*)$/, function(e, t) {
                    return s.onInviteChanged(e, t)
                }), s
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "friends", {
                get: function() {
                    return u.store.getState().contacts.friends
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "sentInvites", {
                get: function() {
                    return u.store.getState().contacts.sentInvites
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "recvInvites", {
                get: function() {
                    return u.store.getState().contacts.recvInvites
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.getFriend = function(e) {
                return a.find(u.store.getState().contacts.friends, function(t) {
                    return t.pid === e
                })
            }, t.prototype.fetch = function() {
                var e = this;
                return this.fetched ? r.resolve() : this.fetching ? this.fetching : this.fetching = r.all([this.fetchFriends(), this.fetchFriendInvites()]).then(function() {
                    e.fetched = !0, e.fetching = void 0
                })
            }, t.prototype.inviteFriend = function(e) {
                var t = this;
                return this.requestingInvite ? r.reject(new Error("wait for prev request")) : e ? this.getFriend.length + this.sentInvites.length >= this.maxFriendsCount ? r.reject(new Error("exceeds limit")) : a.find(this.friends, function(t) {
                    return t.snippet.name === e
                }) ? r.reject(new Error("already registered")) : a.find(this.sentInvites.concat(this.recvInvites), function(t) {
                    return t.snippet.name === e
                }) ? r.reject(new Error("already invited")) : (this.requestingInvite = !0, c.request("POST", "invites", {
                    name: e
                }).then(function() {
                    t.requestingInvite = !1
                }).catch(function(e) {
                    throw t.requestingInvite = !1, o.error("inviteFriend", e), e
                })) : r.reject(new Error("missing name"))
            }, t.prototype.deleteFriend = function(e) {
                var t = a.find(this.friends, function(t) {
                    return t.fpid === e
                });
                return t ? c.request("DELETE", "friends/" + t.id) : r.reject(new Error("friend not exist"))
            }, t.prototype.cancelInvite = function(e) {
                var t = a.find(this.sentInvites, function(t) {
                    return t.fpid === e
                });
                return t ? c.request("DELETE", "invites/" + t.id) : r.reject(new Error("invite not exist"))
            }, t.prototype.rejectInvite = function(e) {
                var t = a.find(this.recvInvites, function(t) {
                    return t.fpid === e
                });
                return t ? c.request("DELETE", "invites/" + t.id) : r.reject(new Error("invite not exist"))
            }, t.prototype.acceptInvite = function(e) {
                var t = a.find(this.recvInvites, function(t) {
                    return t.fpid === e
                });
                return t ? c.request("PUT", "invites/" + t.id + "/@accept").catch(function(e) {
                    throw o.error("acceptInvite", e), e
                }) : r.reject(new Error("invite not exist"))
            }, t.prototype.fetchFriends = function() {
                var e = this;
                return c.request("GET", "friends").then(function(t) {
                    var i = t.map(function(t) {
                        var i = e.presenceService.getPresenceInfo(t.fpid);
                        return e.playerSnippetService.getSnippetAsync(t.fpid).then(function(e) {
                            return n.__assign({}, t, {
                                snippet: e,
                                presence: i
                            })
                        })
                    });
                    return r.all(i).then(function(e) {
                        u.store.dispatch(l.replaceFriends(e)), o.trace("fetched /friends")
                    })
                })
            }, t.prototype.fetchFriendInvites = function() {
                var e = this;
                return c.request("GET", "invites").then(function(t) {
                    var i = t.map(function(t) {
                        return e.playerSnippetService.getSnippetAsync(t.fpid).then(function(e) {
                            return n.__assign({}, t, {
                                snippet: e,
                                newly: !0
                            })
                        })
                    });
                    return r.all(i).then(function(e) {
                        var t = a.filter(e, function(e) {
                                return "sent" === e.state
                            }),
                            i = a.filter(e, function(e) {
                                return "sent" !== e.state
                            });
                        u.store.dispatch(l.replaceInvites(t, i)), o.trace("fetched /invites")
                    })
                })
            }, t.prototype.onFriendChanged = function(e, t) {
                var i = this;
                o.trace(">> /friends/:", e, t);
                var r = e[1];
                if (u.store.dispatch(l.deleteFriend(r)), t.body) {
                    var a = n.__assign({}, t.body);
                    this.playerSnippetService.getSnippetAsync(a.fpid).then(function(e) {
                        var t = i.presenceService.getPresenceInfo(a.fpid);
                        u.store.dispatch(l.addFriend(n.__assign({}, a, {
                            snippet: e,
                            presence: t,
                            newly: !0
                        })))
                    })
                }
            }, t.prototype.onInviteChanged = function(e, t) {
                var i = this;
                o.trace(">> /invites/:", e, t);
                var r = e[1];
                if (this.notifyIfAcceptedFriendRequest(r), u.store.dispatch(l.deleteInvite(r)), t.body) {
                    var a = n.__assign({}, t.body);
                    this.playerSnippetService.getSnippetAsync(a.fpid).then(function(e) {
                        if (a = n.__assign({}, a, {
                                snippet: e,
                                newly: !0
                            }), u.store.dispatch(l.addInvite(a)), "sent" !== a.state) {
                            var t = i.$filter("template")({
                                name: e.name
                            }, "SYSTEMTRAY_ADDFRIEND_DESC");
                            i.notifierService.addLast("SYSTEMTRAY_ADDFRIEND_TITLE", t, "root.messenger"), i.emit("invite.received", a)
                        }
                        i.$rootScope.$apply()
                    })
                }
            }, t.prototype.notifyIfAcceptedFriendRequest = function(e) {
                var t = a.filter(this.sentInvites, function(t) {
                    return t.id === e
                });
                if (t.length > 0) {
                    var i = a.find(this.friends, function(e) {
                        return e.snippet.pid === t[0].snippet.pid
                    });
                    if (i) {
                        var n = this.$filter("template")({
                            name: i.snippet.name
                        }, "SYSTEMTRAY_FRIENDACCEPT_DESC");
                        this.notifierService.addLast("SYSTEMTRAY_FRIENDACCEPT_TITLE", n, "root.messenger")
                    }
                }
            }, t
        }(s.EventEmitter);
    p.$inject = ["$rootScope", "$filter", "pushService", "playerSnippetService", "notifierService", "presenceService"], t.default = p, angular.module("edge.components").factory("contactsService", d.default.generateService(p))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(22),
        o = i(7),
        a = i(4),
        s = function() {
            function e(e, t, i, r) {
                var o = this;
                this.externalService = e, this.popupService = t, this.stateService = i, this.$transitions = r, this.mouseProhibited = {}, this.keyboardProhibited = {}, this.inputOverrideStates = {
                    keyboard: [],
                    mouse: []
                };
                var s = ["main"],
                    c = ["root.menu.Openworld"];
                e.isDevelopment() || (s = s.concat(a.default.hudStateList)), c = c.concat(a.default.hudStateList);
                var d = function(e, t) {
                    return n.__assign({}, e, (i = {}, i[t] = !0, i));
                    var i
                };
                this.mouseProhibited = s.reduce(d, {}), this.keyboardProhibited = c.reduce(d, {}), this.enableByState(), this.$transitions.onSuccess({}, function(e) {
                    o.enableByState(e.$to().name)
                }), t.on("draw", function() {
                    return o.overrideMouse("popup") || o.overrideKeyboard("popup")
                }), t.on("close", function() {
                    return o.clearMouseOverride("popup") || o.clearKeyboardOverride("popup")
                })
            }
            return e.prototype.enableByState = function(e) {
                var t = this.inputOverrideStates,
                    i = t.keyboard,
                    n = t.mouse;
                o.debug("input.service enableByState", e, "override states:", i, n), i.length || this.enableKeyboardByState(e), n.length || this.enableMouseByState(e)
            }, e.prototype.enableKeyboardByState = function(e) {
                e = e || this.stateService.getCurrentName();
                var t = !this.keyboardProhibited[e];
                this.externalService.beSetKeyboardEnabled(t), o.debug("input.service enableKeyboardByState", t)
            }, e.prototype.enableMouseByState = function(e) {
                e = e || this.stateService.getCurrentName();
                var t = !this.mouseProhibited[e];
                this.externalService.beSetMouseEnabled(t), o.debug("input.service enableMouseByState", t)
            }, e.prototype.overrideKeyboard = function(e) {
                var t = this.inputOverrideStates.keyboard;
                if (r.includes(t, e)) return o.warn("input.service keyboard override tag", e, "is already requested before");
                this.inputOverrideStates.keyboard = t.concat([e]), this.externalService.beSetKeyboardEnabled(!0), o.debug("input.service overrideKeyboard")
            }, e.prototype.overrideMouse = function(e) {
                var t = this.inputOverrideStates.mouse;
                if (r.includes(t, e)) return o.warn("input.service mouse override tag", e, "is already requested before");
                this.inputOverrideStates.mouse = t.concat([e]), this.externalService.beSetMouseEnabled(!0), o.debug("input.service overrideMouse")
            }, e.prototype.clearKeyboardOverride = function(e) {
                this.inputOverrideStates.keyboard = r.without(this.inputOverrideStates.keyboard, e), this.inputOverrideStates.keyboard.length || this.enableKeyboardByState()
            }, e.prototype.clearMouseOverride = function(e) {
                this.inputOverrideStates.mouse = r.without(this.inputOverrideStates.mouse, e), this.inputOverrideStates.mouse.length || this.enableMouseByState()
            }, e.prototype.overrideAll = function(e) {
                this.overrideKeyboard(e), this.overrideMouse(e)
            }, e.prototype.clearOverrideAll = function(e) {
                this.clearKeyboardOverride(e), this.clearMouseOverride(e)
            }, e
        }();
    s.$inject = ["externalService", "popupService", "stateService", "$transitions"], t.InputService = s, angular.module("edge.components").factory("inputService", a.default.generateService(s)).run(["inputService", angular.noop])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = function() {
            function e(e, t) {
                this.$rootScope = e, this.staticdataLoaderService = t
            }
            return e.prototype.getDriverInfo = function(e) {
                return this.staticdataLoaderService.driverData[e]
            }, e
        }();
    r.$inject = ["$rootScope", "staticdataLoaderService"], t.default = r, angular.module("edge.components").factory("driverService", n.default.generateService(r))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(1071),
        o = i(37),
        a = i(255),
        s = function() {
            function e(t) {
                var i = this;
                this.staticData = t, this.get = e.prototype.getAudio, this.staticData.fetch().then(function() {
                    i.initData(i.staticData.soundFxData), i.attachDefaultFxSound()
                })
            }
            return e.prototype.initData = function(e) {
                var t = this;
                this.audios || (this.audios = {}, _.each(e, function(e, i) {
                    t.audios[i] = new r.Audio(e)
                }))
            }, e.prototype.attachDefaultFxSound = function() {
                var e = this.get(o.FxAudioCode.InputSmall);
                e && window.addEventListener(a.ButtonEvent.FX_SOUND_CLICK, function() {
                    e.play()
                })
            }, e.prototype.getAudio = function(e) {
                return this.audios[e]
            }, e
        }();
    s.$inject = ["staticdataLoaderService"], t.AudioService = s, t.default = s, angular.module("edge.components").factory("audioService", n.default.generateService(s))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = {
            snr: "audio/snr; codecs=xas1",
            mp3: "audio/mpeg"
        },
        a = function(e) {
            function t(t) {
                var i = e.call(this) || this;
                return i.name = t, i.hasSources = !1, i.canPlay = !1, i
            }
            return n.__extends(t, e), t.prototype.prepareAudio = function() {
                this.audio = document.createElement("audio"), this.audio.play && this.audio.pause || (this.audio.play = function() {}, this.audio.pause = function() {}), this.audio.addEventListener("ended", this._onEnded = this.onEnded.bind(this)), this.audio.addEventListener("canplay", this._onCanplay = this.onCanplay.bind(this)), this.audio.volume = 1
            }, t.prototype.attachSources = function() {
                var e = this;
                _.each(o, function(t, i) {
                    var n = document.createElement("source");
                    n.setAttribute("src", "audio/" + e.name + "." + i), n.setAttribute("type", t), e.audio.appendChild(n)
                }), this.hasSources = !0;
                try {
                    this.audio.edgeAudioType = HTMLAudioElement.EDGE_AUDIOTYPE_FX
                } catch (e) {}
            }, t.prototype.removeAudio = function() {
                this.audio && (this.audio.removeEventListener("ended", this._onEnded), this.audio.removeEventListener("canplay", this._onCanplay), this.audio.remove(), this.audio = void 0), this.hasSources = !1, this.canPlay = !1
            }, t.prototype.onEnded = function() {
                this.emit("ended")
            }, t.prototype.onCanplay = function() {
                this.canPlay = !0, this.emit("canplay")
            }, t.prototype.play = function() {
                var e = this;
                if (this.audio || this.prepareAudio(), this.hasSources || this.attachSources(), !this.canPlay) return void this.once("canplay", function() {
                    return e.play()
                });
                this.audio.currentTime = 0, this.audio.play()
            }, t.prototype.pause = function() {
                this.audio && this.audio.pause()
            }, t.prototype.stop = function() {
                this.audio && (this.pause(), this.removeAudio())
            }, t
        }(r.EventEmitter);
    t.Audio = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(6),
        o = i(4),
        a = i(12),
        s = i(10),
        c = function() {
            function e() {
                this.cache_ = {}
            }
            return e.prototype.set = function(e, t, i) {
                e && 0 !== t && (this.cache_[e] = this.cache_[e] || {}, this.cache_[e][t || 1] = i)
            }, e.prototype.get = function(e, t) {
                return e && 0 !== t ? (this.cache_[e] || {})[t || 1] || 0 : 0
            }, e.prototype.isEmpty = function(e, t) {
                return !e || 0 !== t && !(this.cache_[e] || {})[t || 1]
            }, e
        }();
    t.VehiclePriceData = c;
    var d = function() {
        function e(e) {
            this.vehicleService = e, this.vehiclePriceData = new c, this.lastCachedAt = 0, this.lastServerReqAt = 0
        }
        return e.prototype.isExpiredCache = function() {
            return +new Date >= this.lastCachedAt + e.CACHE_VALID_TIME
        }, e.prototype.getLatestPriceData = function(e) {
            var t = this;
            return new r(function(i, n) {
                if (!(t.isExpiredCache() || e && e.some(function(e) {
                        return t.vehiclePriceData.isEmpty(e.code, e.grade)
                    }))) return i(t.vehiclePriceData);
                var r = _(a.getOwnVehicles()).concat(e).value();
                t.cache(r).then(function() {
                    return i(t.vehiclePriceData)
                })
            })
        }, e.prototype.getBasePrice = function(e, t) {
            return void 0 === t && (t = 1), this.vehiclePriceData.get(e, t)
        }, e.prototype.cache = function(t) {
            var i = this;
            this.lastServerReqAt = +new Date;
            var o = _.uniq(_.map(t, function(e) {
                    return 0 !== e.grade && e.code + "@" + (e.grade || 1)
                }).filter(function(e) {
                    return !!e
                })),
                a = _.map(_.chunk(o, 50), function(e) {
                    return s.request("GET", "market2/vehiclevalues", {
                        codes: e
                    })
                });
            return r.all(a).then(function(t) {
                var n = new c,
                    r = 0;
                _.each(t, function(e) {
                    e.forEach(function(e) {
                        if (e) {
                            var t = e.code,
                                i = e.price,
                                o = e.grade,
                                a = e.changeDt;
                            n.set(t, o, i), r < a && (r = a)
                        }
                    })
                }), i.lastCachedAt = r + e.CACHE_VALID_TIME, i.vehiclePriceData = n
            }).catch(function(e) {
                n.error("vehiclePriceDataService.cache", o, e)
            })
        }, e
    }();
    d.$inject = ["vehicleService"], d.CACHE_VALID_TIME = 72e5, t.VehiclePriceDataService = d, angular.module("edge.components").factory("vehiclePriceDataService", o.default.generateService(d))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = i(211),
        o = i(7),
        a = i(4),
        s = i(371),
        c = i(9),
        d = function() {
            function e(e, t, i) {
                this.$q = e, this.imageAtlasService = t, this.externalService = i, this.refCounts = {}, this.waitings = {}, i.on(c.default.beImageLoaded, this.onImageLoaded.bind(this))
            }
            return e.prototype.onImageLoaded = function(e) {
                o.trace("coreImageLoader.onImageLoaded", e);
                for (var t = 0, i = e; t < i.length; t++) {
                    var n = i[t],
                        r = n.split("/")[1],
                        a = this.waitings[r];
                    if (a) {
                        var s = a.paths.indexOf(n);
                        s < 0 || (a.paths.splice(s, 1), a.paths.length || (a.deferred.resolve(), delete this.waitings[r]))
                    }
                }
            }, e.prototype.load = function(e, t) {
                if (this.refCounts[e] > 0) return ++this.refCounts[e];
                this.refCounts[e] = 1, s.default.register(e, t);
                var i = this.toAtlas(e, t);
                o.trace("coreImageLoader.load bePreloadImage()", e, t, i), this.externalService.bePreloadImage(i)
            }, e.prototype.preload = function(e, t) {
                if (t.length < 1) return this.$q.when();
                s.default.register(e, t);
                var i = t.map(function(t) {
                        return r.join("images", e, t)
                    }),
                    n = this.$q.defer();
                return this.waitings[e] = {
                    deferred: n,
                    paths: i
                }, o.trace("coreImageLoader.preload", e, i), this.externalService.bePreloadImage(i), n.promise
            }, e.prototype.unload = function(e) {
                if (this.refCounts[e] && !(--this.refCounts[e] > 0)) {
                    var t = s.default.unregister(e);
                    if (t && t.length) {
                        var i = this.toAtlas(e, t);
                        o.trace("coreImageLoader.unload beUnloadImage()", e, t, i), this.externalService.beUnloadImage(i)
                    }
                }
            }, e.prototype.toAtlas = function(e, t) {
                var i = this,
                    o = t.map(function(t) {
                        var n = i.imageAtlasService.find(e, t);
                        return n && n.sprite || t
                    });
                return n.uniq(o).map(function(t) {
                    return r.join("images", e, t)
                })
            }, e
        }();
    d.$inject = ["$q", "imageAtlasService", "externalService"], t.default = d, angular.module("edge.components").factory("coreImageLoaderService", a.default.generateService(d))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = i(7),
        o = i(4),
        a = i(372),
        s = function() {
            function e(e, t, i) {
                this.$q = e, this.$http = t, this.externalService = i
            }
            return e.prototype.load = function(e) {
                var t = this;
                return a.ImageAtlasLibrary.hasDataFor(e) ? this.$q.when() : this.externalService.isEdgeBrowser() ? this.$http.get("images/" + e + "/_atlas.json").then(function(i) {
                    var r = i.data;
                    t.externalService.isEdgeBrowser() && n.each(r.tiles, function(e) {
                        return e.sprite = e.sprite.replace(/\.png$/, ".dds")
                    }), a.ImageAtlasLibrary.register(e, r)
                }, function(t) {
                    r.info("atlas for", e, "was not found.", t), a.ImageAtlasLibrary.register(e)
                }) : this.$q.when()
            }, e.prototype.find = function(e, t) {
                return a.ImageAtlasLibrary.findTile(e, t)
            }, e
        }();
    s.$inject = ["$q", "$http", "externalService"], t.default = s, angular.module("edge.components").factory("imageAtlasService", o.default.generateService(s))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(4),
        o = i(107),
        a = i(3),
        s = i(10),
        c = function() {
            function e(e, t, i, n, r, a, s, c) {
                var d = this;
                this.$window = e, this.$rootScope = t, this.pushService = i, this.playerService = n, this.navService = r, this.vehicleService = a, this.promotionService = s, this.notifierService = c, t.debugLevel = o.Features.debugLevel, "debug" === t.debugLevel && this.registerAll(), t.$watch("debugLevel", function(e) {
                    if ("debug" === e) return d.registerAll();
                    d.unregisterAll()
                })
            }
            return e.prototype.registerAll = function() {
                n.debug("registerAll"), this.$window.debug = {
                    resource: this.resource.bind(this),
                    deleteResource: this.deleteResource.bind(this),
                    accountBanned: this.accountBanned.bind(this),
                    notice: this.notice.bind(this),
                    setFatigue: this.setFatigue.bind(this)
                }, this.$window.services = {
                    pushService: this.pushService,
                    playerService: this.playerService,
                    navService: this.navService,
                    vehicleService: this.vehicleService,
                    promotionService: this.promotionService,
                    notifierService: this.notifierService
                }, this.$window.store = a.store, this.$window.request = s.request
            }, e.prototype.unregisterAll = function() {
                n.debug("unregisterAll"), this.$window.debug = null, this.$window.services = null, this.$window.store = null, this.$window.request = null
            }, e.prototype.resource = function(e, t) {
                var i = {
                    cmd: "resources",
                    opts: [{
                        uri: e,
                        body: t
                    }]
                };
                this.pushService.socket.onevent({
                    data: ["msg", i]
                })
            }, e.prototype.deleteResource = function(e) {
                var t = {
                    cmd: "resources",
                    opts: [{
                        uri: e,
                        delete: !0
                    }]
                };
                this.pushService.socket.onevent({
                    data: ["msg", t]
                })
            }, e.prototype.accountBanned = function(e) {
                var t = +new Date,
                    i = {
                        cmd: "account.banned",
                        opts: {
                            reason: e,
                            expireat: t
                        }
                    };
                this.pushService.socket.onevent({
                    data: ["msg", i]
                })
            }, e.prototype.notice = function(e) {
                var t = {
                    cmd: "notice",
                    opts: e
                };
                this.pushService.socket.onevent({
                    data: ["msg", t]
                })
            }, e.prototype.setFatigue = function(e) {
                var t = {
                    cmd: "tencent.fatigue.changed",
                    opts: e
                };
                this.pushService.socket.onevent({
                    data: ["msg", t]
                })
            }, e
        }();
    c.$inject = ["$window", "$rootScope", "pushService", "playerService", "navService", "vehicleService", "promotionService", "notifierService"], t.DebugService = c, angular.module("edge.components").factory("debugService", r.default.generateService(c))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(297),
        o = i(6),
        a = i(10),
        s = i(4),
        c = i(3),
        d = function() {
            function e(e) {
                this.pushService = e, this.presenceInfos = {}
            }
            return e.prototype.init = function() {
                var e = o.resolve();
                return this._init ? e : (this._init = !0, this.pushService.on("msg", this.onMessage.bind(this)), e)
            }, e.prototype.onMessage = function(e) {
                var t = e.cmd,
                    i = e.opts;
                if ("change_presence" === t)
                    for (var o = 0, a = i.info; o < a.length; o++) {
                        var s = a[o],
                            d = this.getPresenceInfo(s.pid);
                        d.state = s.state, d.time = i.time, n.debug("presence.service::onMessage()", d), c.store.dispatch(r.updatePresence(s.pid, d))
                    }
            }, e.prototype.getPresenceInfo = function(e) {
                var t = this.presenceInfos[e];
                return t || (t = this.presenceInfos[e] = {
                    state: "logout"
                }), t
            }, e.prototype.setPresenceInfo = function(e) {
                var t = this;
                if (_.isEmpty(c.store.getState().player)) return o.resolve();
                var i = c.store.getState().player.id;
                return this.getPresenceInfo(i).state === e ? o.resolve() : this.updatePresenceInfo(i, e).then(function() {
                    return t.refreshKeepalive(i, e)
                }).catch(function(e) {
                    return n.error("setPresenceInfo() failure.", e)
                })
            }, e.prototype.setPresenceInfoOnScene = function(t) {
                var i;
                i = e.BusyStateScenes.indexOf(t) >= 0 ? "busy" : e.MATCHREWARD_STATE_SCENES.indexOf(t) >= 0 ? "match.reward" : "idle", n.debug("setPresenceInfoOnScene() state:" + i + ", scene:" + t), this.setPresenceInfo(i)
            }, e.prototype.updatePresenceInfo = function(e, t) {
                var i = this;
                return a.request("PUT", "presences/" + e + "/state", {
                    state: t
                }).then(function(e) {
                    for (var t = 0, n = e.info; t < n.length; t++) {
                        var r = n[t],
                            o = i.getPresenceInfo(r.pid);
                        o.state = r.state, o.time = e.time
                    }
                })
            }, e.prototype.refreshKeepalive = function(t, i) {
                var r = this;
                this.keepaliveTimer && clearInterval(this.keepaliveTimer), this.keepaliveTimer = setInterval(function() {
                    return r.updatePresenceInfo(t, i).catch(function(e) {
                        return n.debug(e)
                    })
                }, e.KeepaliveInterval)
            }, e
        }();
    d.$inject = ["pushService"], d.MATCHREWARD_STATE_SCENES = ["root.MatchResult", "root.MultiplayReward", "root.MultiplayRewardTeamBattle"], d.BusyStateScenes = s.default.loadingStateList.concat(s.default.hudStateList), d.KeepaliveInterval = 18e5, t.default = d, angular.module("edge.components").factory("presenceService", s.default.generateService(d))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = function() {
            function e(e) {
                this.staticdataLoaderService = e, this.playerLevelUp = this.staticdataLoaderService.playerLevelUp, this.rewardLevelUp = this.staticdataLoaderService.rewardLevelUp, this.channelReward = this.staticdataLoaderService.channelReward
            }
            return e.prototype.getRequiredPlayerExp4NextLevel = function(e) {
                return e = e || 1, e = e >= 1 ? e : 1, this.playerLevelUp[e] ? this.playerLevelUp[e].requiredPlayerExp : 0
            }, e.prototype.getMaxExpByLevel = function(e) {
                return this.playerLevelUp[e] ? this.playerLevelUp[e].totalPlayerExp : 0
            }, e.prototype.getLevelReward = function(e) {
                return this.rewardLevelUp[e]
            }, e.prototype.getLicenseChannelRewardRate = function(e) {
                return this.channelReward[e]
            }, e
        }();
    r.$inject = ["staticdataLoaderService"], t.RewardService = r, t.default = r, angular.module("edge.components").factory("rewardService", n.default.generateService(r))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        p = !0;
        try {
            a.render(o.createElement(h, {
                model: e || f
            }), document.getElementById("edge-ui-tooltip"))
        } catch (e) {
            var t = u.getInjector().get("exceptionHandleService");
            t.catchReactError(e)
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(0),
        o = i(14),
        a = i(132),
        s = i(21),
        c = i(1079),
        d = i(13),
        l = i(4),
        u = i(34),
        p = !0,
        h = function(e) {
            function t(t) {
                var i = e.call(this, t) || this;
                return i.state = {
                    left: 0,
                    top: 0
                }, i
            }
            return r.__extends(t, e), t.prototype.calcOffset = function() {
                var e = this.props.model;
                if (e.type === s.TooltipType.None) return {
                    left: 0,
                    top: 0
                };
                var t = e.position.side,
                    i = e.position.element,
                    n = $(a.findDOMNode(this));
                n.css({
                    "min-width": e.option.width || 0
                });
                var r = l.default.calcGlobalOffset(i),
                    o = r.top,
                    c = r.left,
                    d = r.width,
                    u = r.height;
                c += e.option.marginLeft, o += e.option.marginTop;
                var p = n.width(),
                    h = n.height();
                return "left" === t ? (c -= p, e.option.up && (o -= h - u)) : "top" === t ? o -= h : "right" === t ? (c += d, e.option.up && (o -= h - u)) : "bottom" === t ? o += u : "horizontal" === t ? 0 < this.getOverflowSize("width", c + d, p, e.option.scaleRatio) ? (c -= p, c -= 2 * e.option.marginLeft) : c += d : "topleft" === t ? (o -= h, c -= p - d) : "bottomleft" === t ? (o += u, c -= p - d) : "topright" === t ? (o -= h, c += d) : "vertical" === t && (0 < this.getOverflowSize("height", o + u, h, e.option.scaleRatio) ? (o -= h, o += e.option.paddingBottom) : o += u), this.getAlignedInnerBody(p, h, o, c, e.option.scaleRatio)
            }, t.prototype.getOverflowSize = function(e, t, i, n) {
                var r = "width" === e ? 1920 : 1080,
                    o = "width" === e ? window.innerWidth : window.innerHeight,
                    a = o / n;
                return t + i - ((r - a) / 2 + a)
            }, t.prototype.getAlignedInnerBody = function(e, t, i, n, r) {
                n < 0 && (n = 0), i < 0 && (i = 0);
                var o = this.getOverflowSize("width", n, e, r);
                0 < o && (n -= o);
                var a = this.getOverflowSize("height", i, t, r);
                return 0 < a && (i -= a), {
                    top: i,
                    left: n
                }
            }, t.prototype.onChildUpdate = function() {
                p && (p = !1, this.setState(this.calcOffset()))
            }, t.prototype.childComponents = function(e) {
                var t = this.onChildUpdate.bind(this),
                    i = {
                        key: e.type,
                        onupdate: t,
                        type: e.type,
                        info: e.info,
                        style: e.style,
                        className: e.className,
                        option: e.option,
                        position: e.position
                    };
                switch (e.type) {
                    case d.TooltipType.MenuDetail:
                        return o.createElement(c.MenuDetailTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.ExpDetail:
                        return o.createElement(c.ExpDetailTooltip, r.__assign({}, i));
                    case d.TooltipType.PartsSlot:
                        return o.createElement(c.PartsSlotTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.PartsMaterialSlot:
                        return o.createElement(c.PartsMaterialSlotTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.PartsTabContainer:
                        return o.createElement(c.PartsTabTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.ItemCard:
                        return o.createElement(c.ItemCardTooltip, r.__assign({}, i));
                    case d.TooltipType.MatchRewardUncountableBonus:
                        return o.createElement(c.MatchRewardTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.MileageReset:
                        return o.createElement(c.MileageResetTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.DealerNpc:
                        return o.createElement(c.DealerNpcTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.BasicDetail:
                        return o.createElement(c.BasicDetailTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.BasicTitled:
                        return o.createElement(c.BasicTitledTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.Promotion:
                        return o.createElement(c.PromotionTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.PromotionDurationTime:
                        return o.createElement(c.PromotionDurationTimeTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.PromotionRewardBoost:
                        return o.createElement(c.PromotionRewardBoostTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.MarketOvrParts:
                        return o.createElement(c.MarketOvrPartsTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.SeasonRewardDetail:
                        return o.createElement(c.SeasonRewardDetailTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.MarketOvr:
                        return o.createElement(c.MarketOvrTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.MarketSearchGuide:
                        return o.createElement(c.MarketSearchGuideTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.InboxPackage:
                        return o.createElement(c.InboxPackageTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.Basic:
                        return o.createElement(c.BasicTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.VehicleStatus:
                        return o.createElement(c.VehicleStatusTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.LicenseTab:
                        return o.createElement(c.LicenseTabTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.ShopProduct:
                        return o.createElement(c.ShopProductTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.Blueprint:
                        return o.createElement(c.BlueprintTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.Vehicle:
                        return o.createElement(c.VehicleTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.LevelupReward:
                        return o.createElement(c.LevelupRewardTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.Tuning:
                        return o.createElement(c.TuningTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.WorldChatHelp:
                        return o.createElement(c.WorldChatHelpTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.ClanCreation:
                        return o.createElement(c.ClanCreationTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.NumberPlateSlot:
                        return o.createElement(c.NumberPlateSlotTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.PursuitTech:
                        return o.createElement(c.PursuitTechTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.QuestItem:
                        return o.createElement(c.QuestItemTooltip, r.__assign({
                            key: e.type
                        }, i));
                    case d.TooltipType.CampaignReward:
                        return o.createElement(c.CampaignRewardTooltip, r.__assign({
                            key: e.type
                        }, i));
                    default:
                        return o.createElement("div", {
                            key: "undefined-tooltip"
                        }, e.type, " is not defined")
                }
            }, t.prototype.render = function() {
                if (!this.props.model) return o.createElement("div", null);
                var e = this.props.model,
                    t = e.type !== s.TooltipType.None,
                    i = {
                        top: this.state.top,
                        left: this.state.left,
                        opacity: t && 1 || 0,
                        visibility: t && "visible" || "hidden"
                    };
                return o.createElement("div", {
                    className: "tooltip-container",
                    "data-type": s.TooltipType[e.type],
                    style: i
                }, this.childComponents(e))
            }, t
        }(o.Component),
        f = {
            type: s.TooltipType.None
        };
    t.render = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(1080);
    t.BasicTooltip = n.default, t.ItemCardTooltip = i(1081).default;
    var r = i(1082);
    t.PartsTabTooltip = r.default, t.ExpDetailTooltip = i(1083).default;
    var o = i(1084);
    t.MenuDetailTooltip = o.default;
    var a = i(1085);
    t.PartsSlotTooltip = a.default;
    var s = i(1086);
    t.PartsMaterialSlotTooltip = s.default;
    var c = i(1087);
    t.MatchRewardTooltip = c.default;
    var d = i(1088);
    t.BasicDetailTooltip = d.default;
    var l = i(1089);
    t.BasicTitledTooltip = l.default;
    var u = i(1090);
    t.PromotionTooltip = u.default;
    var p = i(1091);
    t.MarketOvrPartsTooltip = p.default;
    var h = i(1092);
    t.MarketOvrTooltip = h.default;
    var f = i(1093);
    t.MarketSearchGuideTooltip = f.default;
    var v = i(1094);
    t.SeasonRewardDetailTooltip = v.default;
    var m = i(1095);
    t.InboxPackageTooltip = m.default;
    var g = i(1096);
    t.VehicleStatusTooltip = g.default;
    var y = i(1097);
    t.VehicleTooltip = y.VehicleTooltip;
    var S = i(1098);
    t.BlueprintTooltip = S.BlueprintTooltip;
    var _ = i(1099);
    t.PromotionDurationTimeTooltip = _.PromotionDurationTimeTooltip;
    var E = i(1100);
    t.PromotionRewardBoostTooltip = E.PromotionRewardBoostTooltip;
    var T = i(1101);
    t.LicenseTabTooltip = T.LicenseTabTooltip;
    var C = i(1102);
    t.ShopProductTooltip = C.default;
    var b = i(1103);
    t.LevelupRewardTooltip = b.LevelupRewardTooltip;
    var P = i(1104);
    t.TuningTooltip = P.TuningTooltip;
    var I = i(13);
    t.TooltipType = I.TooltipType;
    var M = i(1105);
    t.WorldChatHelpTooltip = M.default;
    var A = i(1106);
    t.ClanCreationTooltip = A.default;
    var N = i(1107);
    t.MileageResetTooltip = N.default;
    var R = i(1108);
    t.NumberPlateSlotTooltip = R.NumberPlateSlotTooltip;
    var L = i(1109);
    t.DealerNpcTooltip = L.default;
    var O = i(1110);
    t.PursuitTechTooltip = O.PursuitTechTooltip;
    var x = i(1111);
    t.QuestItemTooltip = x.QuestItemTooltip;
    var w = i(1112);
    t.CampaignRewardTooltip = w.CampaignRewardTooltip
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.Basic
            }, t.prototype.render = function() {
                var e = this.props.style,
                    t = {
                        __html: this.props.type === o.TooltipType.Basic && this.props.info || ""
                    },
                    i = ("tooltip Basic " + this.props.position.side + " " + this.props.className).trim();
                return r.createElement("div", {
                    className: i,
                    style: e
                }, r.createElement("div", {
                    dangerouslySetInnerHTML: t
                }))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(52),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.ItemCard
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.ItemCard && this.props.info || {},
                    t = {
                        __html: e.p6
                    },
                    i = e.p7 && _.map(e.p7, function(e, t) {
                        return r.createElement("li", {
                            key: t
                        }, e)
                    }),
                    n = e.p8 && _.map(e.p8, function(e, t) {
                        return r.createElement("li", {
                            key: t
                        }, r.createElement("div", null, e.key), r.createElement("div", null, e.val))
                    });
                return r.createElement("div", {
                    className: a("tooltip ItemCard", e.clazz)
                }, r.createElement("h2", {
                    className: a("p1", {
                        hide: !e.p1
                    })
                }, e.p1), r.createElement("ul", {
                    className: "up"
                }, r.createElement("li", {
                    className: a("first p2", {
                        hide: !e.p2
                    })
                }, e.p2), r.createElement("li", {
                    className: a("second p3", {
                        hide: !e.p3
                    })
                }, e.p3)), r.createElement("div", {
                    className: "top-bar"
                }), r.createElement("ul", {
                    className: "under"
                }, r.createElement("li", {
                    className: a("first p4", {
                        hide: !e.p4
                    })
                }, e.p4), r.createElement("li", {
                    className: a("second p5", {
                        hide: !e.p5
                    })
                }, e.p5)), r.createElement("p", {
                    className: a("p6", {
                        hide: !e.p6
                    }),
                    dangerouslySetInnerHTML: t
                }), r.createElement("ul", {
                    className: a("sub", {
                        hide: !e.p7
                    })
                }, i), r.createElement("ul", {
                    className: a("sub", {
                        hide: !e.p8
                    })
                }, n), r.createElement("div", {
                    className: "bottom-bar"
                }), r.createElement("ul", {
                    className: "bottom"
                }, r.createElement("li", {
                    className: a("first p9", {
                        hide: !e.p9
                    })
                }, e.p9), r.createElement("li", {
                    className: a("second p10", {
                        hide: !e.p10
                    })
                }, e.p10)))
            }, t
        }(r.Component);
    t.default = s, o.mixin(s)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(52),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.PartsTabContainer
            }, t.prototype.render = function() {
                var e, t = this.props.type === o.TooltipType.PartsTabContainer && this.props.info || {},
                    i = function(e) {
                        return _.map(e, function(e) {
                            return r.createElement("div", null, e)
                        })
                    },
                    n = t.description && i(t.description),
                    s = t.attrText && i(t.attrText);
                e = t.code > 1e4 ? r.createElement("div", {
                    className: "combination-container"
                }, r.createElement("div", {
                    className: "title"
                }, t.combinationTitle), r.createElement("div", {
                    className: "combination"
                }, i(t.combination))) : r.createElement("div", {
                    className: "combination-container hide"
                });
                var c = {};
                return this.props.option && this.props.option.width && (c.width = this.props.option.width), r.createElement("div", {
                    className: "tooltip PartsTabContainer",
                    style: c
                }, r.createElement("div", {
                    className: "title"
                }, r.createElement("span", {
                    className: "name"
                }, t.name), r.createElement("span", {
                    className: a("statusText", t.statusClass)
                }, t.statusText)), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: "partSpecification"
                }, r.createElement("div", {
                    className: "description"
                }, n), r.createElement("div", {
                    className: "attrText"
                }, s), e, r.createElement("div", {
                    className: "amount"
                }, t.amount)))
            }, t
        }(r.Component);
    t.default = s, o.mixin(s)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.ExpDetail
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.ExpDetail && this.props.info || {},
                    t = {};
                if (!_.isUndefined(e.expPercent)) {
                    var i = e.expPercent > 100 ? 100 : e.expPercent;
                    t.width = i + "%"
                }
                return r.createElement("div", {
                    className: "tooltip ExpDetail"
                }, r.createElement("div", {
                    className: "current-info"
                }, r.createElement("div", {
                    className: "lv-static global-font"
                }, "Lv.", r.createElement("span", {
                    className: "lv-value"
                }, e.level)), r.createElement("div", {
                    className: "exp"
                }, r.createElement("span", {
                    className: "exp-highlight"
                }, e.exp), " / ", e.expMax, " ", e.expLabel), r.createElement("span", {
                    className: "progressbar"
                }, r.createElement("span", {
                    className: "value",
                    style: t
                }), r.createElement("span", {
                    className: "text"
                }, t.width))))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.MenuDetail
            }, t.prototype.render = function() {
                var e = "";
                return this.props.type === o.TooltipType.MenuDetail && (e = this.props.info.reasonId), r.createElement("div", {
                    className: "tooltip MenuDetail"
                }, r.createElement("div", null, e))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.PartsSlot
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.PartsSlot && this.props.info || {},
                    t = {};
                this.props.option && this.props.option.width && (t.width = this.props.option.width);
                var i = {
                        __html: e.level || ""
                    },
                    n = {
                        __html: e.description || ""
                    },
                    a = {
                        __html: e.detailValue || ""
                    };
                return r.createElement("div", {
                    className: "tooltip PartsSlot",
                    style: t
                }, r.createElement("div", {
                    className: "line1"
                }, r.createElement("div", {
                    className: "status"
                }, e.status), r.createElement("div", {
                    className: "level",
                    dangerouslySetInnerHTML: i
                })), r.createElement("div", {
                    className: "line2"
                }, r.createElement("div", {
                    className: "value"
                }, e.value), r.createElement("div", {
                    className: "name"
                }, e.name)), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: "detailTitle"
                }, e.detailTitle), r.createElement("div", {
                    className: "detailValue",
                    dangerouslySetInnerHTML: a
                }), r.createElement("div", {
                    className: "description",
                    dangerouslySetInnerHTML: n
                }))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.PartsMaterialSlot
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.PartsMaterialSlot && this.props.info || {},
                    t = {};
                return this.props.option && this.props.option.width && (t.width = this.props.option.width), r.createElement("div", {
                    className: "tooltip PartsMaterialSlot",
                    style: t
                }, r.createElement("div", {
                    className: "name"
                }, e.name), r.createElement("div", {
                    className: "description"
                }, e.description), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: "countTitle"
                }, e.countTitle), r.createElement("div", {
                    className: "count"
                }, e.count))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.MatchRewardUncountableBonus
            }, t.prototype.render = function() {
                var e = [];
                this.props.type === o.TooltipType.MatchRewardUncountableBonus && (e = this.props.info);
                var t = _.map(e, function(e, t) {
                    var i = "REWARD_BONUS_PREFIX_1" !== e.text ? {
                        color: "#15cf57"
                    } : {};
                    return r.createElement("div", {
                        className: "bonusList " + ("SP_PERCENT" === e.type ? "pc" : ""),
                        key: t
                    }, r.createElement("span", {
                        className: "text",
                        style: i
                    }, e.text), r.createElement("span", {
                        className: "value"
                    }, e.value))
                });
                return r.createElement("div", {
                    className: "tooltip MatchRewardUncountableBonus"
                }, t)
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.BasicDetail
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.BasicDetail && this.props.info || {},
                    t = {},
                    i = e.subText && function(e) {
                        return _.map(e, function(e, t) {
                            return r.createElement("div", {
                                key: t,
                                dangerouslySetInnerHTML: {
                                    __html: e
                                }
                            })
                        })
                    }(e.subText),
                    n = [],
                    a = 0;
                _.forEach(e.mainText, function(e, t) {
                    t > 0 && n.push(r.createElement("div", {
                        key: a++,
                        className: "bar"
                    })), e.title && n.push(r.createElement("div", {
                        className: "title",
                        key: a++,
                        dangerouslySetInnerHTML: {
                            __html: e.title
                        }
                    })), e.description && n.push(r.createElement("div", {
                        key: a++,
                        dangerouslySetInnerHTML: {
                            __html: e.description
                        }
                    }))
                });
                var s = ("tooltip BasicDetail " + this.props.position.side + " " + this.props.className).trim();
                return e.subText && e.subText.length > 0 ? r.createElement("div", {
                    className: s,
                    style: t
                }, r.createElement("div", {
                    className: "mainText"
                }, n), r.createElement("br", null), r.createElement("div", {
                    className: "subText"
                }, i)) : r.createElement("div", {
                    className: s,
                    style: t
                }, r.createElement("div", {
                    className: "mainText"
                }, n))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.BasicTitled
            }, t.prototype.render = function() {
                var e = this.props.style,
                    t = "string" == typeof this.props.info,
                    i = t ? "" : this.props.info.title,
                    n = t ? this.props.info : this.props.info.description,
                    o = ("tooltip BasicTitled " + this.props.position.side + " " + this.props.className).trim();
                return r.createElement("ul", {
                    className: o,
                    style: e
                }, r.createElement("li", {
                    className: "dt",
                    dangerouslySetInnerHTML: {
                        __html: i
                    }
                }), r.createElement("li", {
                    className: "dd",
                    dangerouslySetInnerHTML: {
                        __html: n
                    }
                }))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(187),
        s = i(5),
        c = i(4),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.render = function() {
                var e = this.props.info,
                    t = {
                        __html: e.desc || ""
                    };
                return r.createElement("div", null, r.createElement("span", {
                    className: "title"
                }, e.title), r.createElement("span", {
                    className: "desc",
                    dangerouslySetInnerHTML: t
                }), r.createElement("div", {
                    className: "top-bar"
                }), r.createElement("span", {
                    className: "condition"
                }, a.default.translate("PROMOTION_PREVIEW_OBJECT")), r.createElement("ul", {
                    className: "condition-list"
                }, r.createElement("li", null, "- " + e.condition.target, " ", r.createElement("span", {
                    style: {
                        color: e.condition.enabled ? "#15cf57" : "#ff9915"
                    }
                }, a.default.translate(e.condition.enabled ? "PROMOTION_TOOLTIP_CONDITION_POSSIBLEUSER" : "PROMOTION_TOOLTIP_CONDITION_IMPOSSIBLEUSER"))), r.createElement("li", null, "- " + e.condition.date), r.createElement("li", null, r.createElement("span", {
                    style: {
                        color: "#3BACE6"
                    }
                }, e.condition.mode ? "- " + e.condition.mode : void 0))), r.createElement("span", {
                    className: "reward"
                }, a.default.translate("PROMOTION_PREVIEW_REWARD")), r.createElement("ul", {
                    className: "reward-list"
                }, e.rewards.map(function(e, t) {
                    return r.createElement("li", {
                        key: t
                    }, " ", "- " + c.default.stripHtml(e), " ")
                })), r.createElement("div", {
                    className: "bottom-bar"
                }), r.createElement("span", {
                    className: "du-date"
                }, s(e.startat).format("LL") + " ~ " + s(e.endat).format("LL")))
            }, t
        }(r.Component),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.render = function() {
                var e = this.props.info,
                    t = {
                        __html: e.desc || ""
                    };
                return r.createElement("div", null, r.createElement("span", {
                    className: "title"
                }, e.title), r.createElement("span", {
                    className: "desc",
                    dangerouslySetInnerHTML: t
                }), r.createElement("div", {
                    className: "top-bar"
                }), r.createElement("span", {
                    className: "condition"
                }, a.default.translate("PROMOTION_PREVIEW_OBJECT")), r.createElement("ul", {
                    className: "condition-list"
                }, r.createElement("li", null, "- " + e.condition.target, " ", r.createElement("span", {
                    style: {
                        color: e.condition.enabled ? "#15cf57" : "#ff9915"
                    }
                }, a.default.translate(e.condition.enabled ? "PROMOTION_TOOLTIP_CONDITION_POSSIBLEUSER" : "PROMOTION_TOOLTIP_CONDITION_IMPOSSIBLEUSER"))), r.createElement("li", null, "- " + e.condition.date), r.createElement("li", null, r.createElement("span", {
                    style: {
                        color: "#3BACE6"
                    }
                }, e.condition.mode ? "- " + e.condition.mode : void 0)), r.createElement("li", null, " - ", e.condition.count, " ", r.createElement("span", {
                    style: {
                        color: "#15cf57"
                    }
                }, e.condition.value))), r.createElement("span", {
                    className: "reward"
                }, a.default.translate("PROMOTION_PREVIEW_REWARD")), r.createElement("ul", {
                    className: "reward-list"
                }, e.rewards.map(function(e, t) {
                    return r.createElement("li", {
                        key: t
                    }, " ", "- " + c.default.stripHtml(e), " ")
                })), r.createElement("div", {
                    className: "bottom-bar"
                }), r.createElement("span", {
                    className: "du-date"
                }, s(e.startat).format("LL") + " ~ " + s(e.endat).format("LL")))
            }, t
        }(r.Component),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.render = function() {
                var e = this.props.info,
                    t = {
                        __html: e.desc || ""
                    };
                return r.createElement("div", null, r.createElement("span", {
                    className: "title"
                }, e.title), r.createElement("span", {
                    className: "desc",
                    dangerouslySetInnerHTML: t
                }), r.createElement("div", {
                    className: "top-bar"
                }), r.createElement("span", {
                    className: "du-date"
                }, s(e.startat).format("LL") + " ~ " + s(e.endat).format("LL")))
            }, t
        }(r.Component),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.Promotion
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.Promotion && this.props.info || {},
                    t = {};
                return this.props.option && this.props.option.width && (t.width = this.props.option.width), r.createElement("div", {
                    className: "tooltip Promotion",
                    style: t
                }, "DUMMY" === e.promotionType ? r.createElement(u, n.__assign({}, this.props)) : "MATCHCOUNT" === e.promotionType ? r.createElement(l, n.__assign({}, this.props)) : r.createElement(d, n.__assign({}, this.props)))
            }, t
        }(r.Component);
    t.default = p, o.mixin(p)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.MarketOvrParts
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.MarketOvrParts && this.props.info || {},
                    t = {};
                this.props.option && this.props.option.width && (t.width = this.props.option.width);
                var i = [],
                    n = [];
                return _.forEach(e.partsStatus, function(t, r) {
                    0 === t ? (i.push(""), n.push("")) : (i.push(Number(e.status[r]) - Number(t) + ""), n.push("+" + t))
                }), r.createElement("div", {
                    className: "tooltip MarketOvrParts",
                    style: t
                }, r.createElement("div", {
                    className: "title"
                }, r.createElement("div", {
                    className: "col1"
                }), r.createElement("div", {
                    className: "col2"
                }, e.title[0]), r.createElement("div", {
                    className: "col3"
                }, e.title[1])), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: "status"
                }, r.createElement("div", {
                    className: "status1 odd"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[0]), r.createElement("div", {
                    className: "col22"
                }), r.createElement("div", {
                    className: "col23"
                }), r.createElement("div", {
                    className: "col31"
                }, r.createElement("span", {
                    className: "white"
                }, e.status[0]))), r.createElement("div", {
                    className: "status2 even"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[1]), r.createElement("div", {
                    className: "col22"
                }, i[1]), r.createElement("div", {
                    className: "col23"
                }, n[1]), r.createElement("div", {
                    className: "col31"
                }, e.status[1])), r.createElement("div", {
                    className: "status3 odd"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[2]), r.createElement("div", {
                    className: "col22"
                }, i[2]), r.createElement("div", {
                    className: "col23"
                }, n[2]), r.createElement("div", {
                    className: "col31"
                }, e.status[2])), r.createElement("div", {
                    className: "status4 even"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[3]), r.createElement("div", {
                    className: "col22"
                }, i[3]), r.createElement("div", {
                    className: "col23"
                }, n[3]), r.createElement("div", {
                    className: "col31"
                }, e.status[3])), r.createElement("div", {
                    className: "status5 odd"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[4]), r.createElement("div", {
                    className: "col22"
                }, i[4]), r.createElement("div", {
                    className: "col23"
                }, n[4]), r.createElement("div", {
                    className: "col31"
                }, e.status[4])), r.createElement("div", {
                    className: "status6 even"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[5]), r.createElement("div", {
                    className: "col22"
                }, i[5]), r.createElement("div", {
                    className: "col23"
                }, n[5]), r.createElement("div", {
                    className: "col31"
                }, e.status[5]))))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.MarketOvr
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.MarketOvr && this.props.info || {},
                    t = {};
                return this.props.option && this.props.option.width && (t.width = this.props.option.width), r.createElement("div", {
                    className: "tooltip MarketOvr",
                    style: t
                }, r.createElement("div", {
                    className: "title"
                }, e.title), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: "status"
                }, r.createElement("div", {
                    className: "status1 odd"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[0]), r.createElement("div", {
                    className: "col2"
                }, r.createElement("span", {
                    className: "white"
                }, e.status[0]))), r.createElement("div", {
                    className: "status2 even"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[1]), r.createElement("div", {
                    className: "col2"
                }, e.status[1])), r.createElement("div", {
                    className: "status3 odd"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[2]), r.createElement("div", {
                    className: "col2"
                }, e.status[2])), r.createElement("div", {
                    className: "status4 even"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[3]), r.createElement("div", {
                    className: "col2"
                }, e.status[3])), r.createElement("div", {
                    className: "status5 odd"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[4]), r.createElement("div", {
                    className: "col2"
                }, e.status[4])), r.createElement("div", {
                    className: "status6 even"
                }, r.createElement("div", {
                    className: "col1"
                }, e.statusTitle[5]), r.createElement("div", {
                    className: "col2"
                }, e.status[5]))))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.MarketSearchGuide
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.MarketSearchGuide && this.props.info || {},
                    t = {};
                return this.props.option && this.props.option.width && (t.width = this.props.option.width), r.createElement("div", {
                    className: "tooltip MarketSearchGuide",
                    style: t
                }, r.createElement("div", {
                    className: "description",
                    dangerouslySetInnerHTML: {
                        __html: e.description
                    }
                }))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.SeasonRewardDetail
            }, t.prototype.render = function() {
                var e = this.props.info;
                return r.createElement("div", {
                    className: "tooltip SeasonRewardDetail"
                }, r.createElement("div", {
                    className: "title"
                }, e.best.title), r.createElement("div", {
                    className: "desc",
                    dangerouslySetInnerHTML: {
                        __html: e.best.desc
                    }
                }), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: "title"
                }, e.high.title), r.createElement("div", {
                    className: "desc",
                    dangerouslySetInnerHTML: {
                        __html: e.high.desc
                    }
                }), r.createElement("br", null), r.createElement("div", {
                    className: "guide",
                    dangerouslySetInnerHTML: {
                        __html: e.guide
                    }
                }))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(187),
        s = i(52),
        c = i(4),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.InboxPackage
            }, t.prototype.render = function() {
                var e = this.props.info;
                return r.createElement("div", {
                    className: s("tooltip InboxPackage")
                }, r.createElement("h2", {
                    className: s("p1", {
                        hide: !e.title
                    })
                }, c.default.stripHtml(e.title)), r.createElement("ul", {
                    className: "up"
                }, r.createElement("li", {
                    className: s("first p2", {
                        hide: !e.type
                    })
                }, a.default.translate("INBOX_ITEM_TOOLTIP_SENDER"), ": ", e.type), r.createElement("li", {
                    className: s("second p3", {
                        hide: !e.date
                    })
                }, a.default.translate("INBOX_ITEM_TOOLTIP_RECeIVEDDATE"), ": ", e.date)), r.createElement("div", {
                    className: "top-bar"
                }), r.createElement("p", {
                    className: s("p6", {
                        hide: !e.desc
                    }),
                    dangerouslySetInnerHTML: {
                        __html: e.desc
                    }
                }), r.createElement("ul", {
                    className: s("sub", {
                        hide: !e.items
                    })
                }, e.items.map(function(e, t) {
                    return r.createElement("li", {
                        key: t,
                        dangerouslySetInnerHTML: {
                            __html: c.default.stripHtml(e)
                        }
                    })
                })), r.createElement("div", {
                    className: "bottom-bar"
                }), r.createElement("ul", {
                    className: "bottom"
                }, r.createElement("li", {
                    className: s("second p10", {
                        hide: !e.count
                    })
                }, a.default.translate("INVENTORY_ITEM_TOOLTIP_QUANTITY", {
                    count: e.count
                })), r.createElement("li", {
                    className: s("second p11", {
                        hide: !e.expiration
                    }),
                    dangerouslySetInnerHTML: {
                        __html: e.expiration
                    }
                })))
            }, t
        }(r.Component);
    t.default = d, o.mixin(d)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(50),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return a.TooltipType.VehicleStatus
            }, t.prototype.render = function() {
                var e = this.props.info.$filter,
                    t = [];
                this.props.info.title && (t.push(r.createElement("div", {
                    className: "title"
                }, this.props.info.title)), t.push(r.createElement("div", {
                    className: "bar"
                })));
                var i = [];
                this.props.info.remainingCount && (i.push(r.createElement("hr", null)), i.push(r.createElement("div", {
                    className: "trialVehicle"
                }, r.createElement("div", {
                    className: "title"
                }, e("translate")("EXPVEHICLE_REMAININGCOUNT")), r.createElement("div", {
                    className: "count"
                }, this.props.info.remainingCount))));
                var n = _.map(this.props.info.status, function(e, t) {
                        var i = e[0],
                            n = e[1],
                            o = "status" + (t + 1) + " " + ((t + 1) % 2 ? "odd" : "even"),
                            a = {
                                width: n / 2e3 * 100 + "%"
                            };
                        return r.createElement("li", {
                            key: t,
                            className: o
                        }, r.createElement("div", {
                            className: "gauge",
                            style: a
                        }), r.createElement("div", {
                            className: "label"
                        }, i), r.createElement("div", {
                            className: "value"
                        }, n))
                    }),
                    o = ("tooltip VehicleStatus " + this.props.position.side + " " + this.props.className).trim();
                return r.createElement("div", {
                    className: o,
                    style: this.props.style
                }, t, r.createElement("ul", null, n), i)
            }, t
        }(r.Component);
    t.default = s, o.mixin(s)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(52),
        a = i(21),
        s = i(571),
        c = i(4),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return a.TooltipType.Vehicle
            }, t.prototype.render = function() {
                var e = this.props.info;
                return r.createElement("div", {
                    className: "tooltip Vehicle",
                    id: "vehicle_tooltip"
                }, r.createElement("div", {
                    className: "top-info"
                }, r.createElement("div", {
                    className: "vehicle"
                }, e.vehicleName), r.createElement("div", {
                    className: "manufacturer"
                }, e.manufacturer), r.createElement("div", {
                    className: "ovr"
                }, e.ovr)), r.createElement("div", {
                    className: "top-bar"
                }), r.createElement("div", {
                    className: "status"
                }, _.map(e.status, function(e, t) {
                    return r.createElement("div", {
                        className: "track",
                        key: t
                    }, r.createElement("span", {
                        className: "progress-bar",
                        style: {
                            width: e / 2e3 * 100 + "%"
                        }
                    }), r.createElement("span", {
                        className: "status-label"
                    }, s.default.translate("STATUS_" + t.toUpperCase())), r.createElement("span", {
                        className: "status-value"
                    }, e))
                })), r.createElement("div", {
                    className: o("bottom-bar", {
                        hide: !_.isUndefined(e.remainingCount)
                    })
                }), r.createElement("div", {
                    className: o("price", {
                        hide: !_.isUndefined(e.remainingCount)
                    })
                }, e.price ? c.default.toMoney(e.price) : s.default.translate("VECHICLE_TOOLTIP_PROCESSINGINFO"), r.createElement("span", null, e.price ? "SP" : "")))
            }, t
        }(r.Component);
    t.VehicleTooltip = d, a.mixin(d)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(571),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.Blueprint
            }, t.prototype.render = function() {
                var e = this.props.info;
                return r.createElement("div", {
                    className: "tooltip Blueprint",
                    id: "blueprint_tooltip"
                }, r.createElement("title", null, e.title), r.createElement("div", {
                    className: "top-bar"
                }), r.createElement("p", {
                    dangerouslySetInnerHTML: {
                        __html: e.desc
                    }
                }), r.createElement("div", {
                    className: "bottom-bar"
                }), r.createElement("div", {
                    className: "current-collection-status"
                }, r.createElement("label", null, a.default.translate("ITEMCARD_BLUEPRINT_COLLECTIONSTATUS")), r.createElement("div", {
                    className: "track"
                }, r.createElement("span", {
                    className: "progress-bar",
                    style: {
                        width: e.current / e.total * 100 + "%"
                    }
                }), r.createElement("span", {
                    className: "possession-text"
                }, e.current + " / " + e.total))))
            }, t
        }(r.Component);
    t.BlueprintTooltip = s, o.mixin(s)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(52),
        s = i(4),
        c = function(e) {
            function t(t) {
                return e.call(this, t) || this
            }
            return n.__extends(t, e), t.prototype.render = function() {
                var e = this.props,
                    t = e.condnRewardsStrs,
                    i = e.status,
                    n = _.map(t.rewards, function(e, t) {
                        return r.createElement("li", {
                            key: t
                        }, s.default.stripHtml(e))
                    });
                return r.createElement("li", {
                    className: a({
                        condnReward: !0,
                        complete: "COMPLETE" === i,
                        participate: "PARTICIPATE" === i
                    })
                }, r.createElement("div", {
                    className: "img"
                }), r.createElement("div", {
                    className: "condition"
                }, r.createElement("span", null, t.condition)), r.createElement("ul", {
                    className: "rewards"
                }, n))
            }, t
        }(r.Component);
    t.CondnRewards = c;
    var d = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.type = function() {
            return o.TooltipType.PromotionDurationTime
        }, t.prototype.render = function() {
            var e = this.props.type === o.TooltipType.PromotionDurationTime && this.props.info || {},
                t = {
                    __html: e.title || ""
                },
                i = _.map(e.condnRewardsStrs, function(t, i) {
                    var n = "PromotionDtTooltip_" + i,
                        o = e.participatingIndex == i ? "PARTICIPATE" : e.participatingIndex > i ? "COMPLETE" : "";
                    return r.createElement(c, {
                        key: n,
                        condnRewardsStrs: t,
                        status: o
                    })
                });
            return r.createElement("div", {
                className: "tooltip PromotionDurationTime"
            }, r.createElement("span", {
                className: "title",
                dangerouslySetInnerHTML: t
            }), r.createElement("div", {
                className: "top-bar"
            }), r.createElement("ul", null, i))
        }, t
    }(r.Component);
    t.PromotionDurationTimeTooltip = d, o.mixin(d)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.PromotionRewardBoost
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.PromotionRewardBoost && this.props.info || {},
                    t = {
                        __html: e.title || ""
                    };
                return r.createElement("div", {
                    className: "tooltip PromotionRewardBoost"
                }, r.createElement("div", {
                    className: "title",
                    dangerouslySetInnerHTML: t
                }), r.createElement("div", {
                    className: "boost_type"
                }, e.type), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: "desc"
                }, e.desc), r.createElement("div", {
                    className: "value"
                }, e.value))
            }, t
        }(r.Component);
    t.PromotionRewardBoostTooltip = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.LicenseTab
            }, t.prototype.render = function() {
                var e = this.props.info,
                    t = e.title,
                    i = e.conditionLabel,
                    n = e.conditions;
                return r.createElement("div", {
                    className: "tooltip LicenseTab"
                }, r.createElement("section", {
                    className: "title"
                }, t), r.createElement("section", {
                    className: "bar"
                }), r.createElement("section", {
                    className: "condition-label"
                }, i), r.createElement("section", {
                    className: "conditions"
                }, _.map(n, function(e, t) {
                    return r.createElement("p", {
                        key: t
                    }, e)
                })))
            }, t
        }(r.Component);
    t.LicenseTabTooltip = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(52),
        s = i(4),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.ShopProduct
            }, t.prototype.render = function() {
                var e = this.props.info;
                return r.createElement("div", {
                    className: a("tooltip ShopProduct")
                }, r.createElement("h2", {
                    className: a("p1", {
                        hide: !e.title
                    })
                }, s.default.stripHtml(e.title)), r.createElement("div", {
                    className: "top-bar"
                }), r.createElement("ul", {
                    className: "under"
                }, r.createElement("li", {
                    className: a("first p4", {
                        hide: !e.desc
                    }),
                    dangerouslySetInnerHTML: {
                        __html: e.desc
                    }
                })), r.createElement("ul", {
                    className: a("sub", {
                        hide: !e.rewards
                    })
                }, e.rewards.map(function(e, t) {
                    return r.createElement("li", {
                        key: t,
                        dangerouslySetInnerHTML: {
                            __html: s.default.stripHtml(e)
                        }
                    })
                })), r.createElement("div", {
                    className: a("bottom-bar", {
                        hide: !e.dateInfo
                    })
                }), r.createElement("ul", {
                    className: "bottom"
                }, r.createElement("li", {
                    className: a("second p10", {
                        hide: !e.dateInfo
                    })
                }, e.dateInfo)))
            }, t
        }(r.Component);
    t.default = c, o.mixin(c)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(52),
        s = i(4),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.LevelupReward
            }, t.prototype.render = function() {
                var e = this.props.info;
                return r.createElement("div", {
                    className: a("tooltip LevelupReward")
                }, r.createElement("h2", {
                    className: a("p1", {
                        hide: !e.title
                    })
                }, s.default.stripHtml(e.title)), r.createElement("div", {
                    className: "bar"
                }), r.createElement("ul", {
                    className: "reward-desc"
                }, r.createElement("li", {
                    dangerouslySetInnerHTML: {
                        __html: s.default.stripHtml(e.desc)
                    }
                })), r.createElement("ul", {
                    className: a("reward-item", {
                        hide: !e.rewards
                    })
                }, e.rewards.map(function(e, t) {
                    return r.createElement("li", {
                        key: t,
                        dangerouslySetInnerHTML: {
                            __html: s.default.stripHtml(e)
                        }
                    })
                })))
            }, t
        }(r.Component);
    t.LevelupRewardTooltip = c, o.mixin(c)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(52),
        s = i(4),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.Tuning
            }, t.prototype.render = function() {
                var e = this.props.info,
                    t = s.default.getPriceIconLabel(e.priceType),
                    i = "images/html/tuning-shop/" + t + "-icon.png";
                return r.createElement("div", {
                    className: a("tooltip Tuning")
                }, r.createElement("h2", {
                    className: a("p1", {
                        hide: !e.title
                    })
                }, s.default.stripHtml(e.title)), r.createElement("ul", {
                    className: a("restrict", {
                        hide: !e.restrict
                    })
                }, s.default.stripHtml(e.restrict)), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: a("price", {
                        hide: !e.price
                    })
                }, r.createElement("div", {
                    className: "tuning_price_desc"
                }, e.priceDesc), r.createElement("div", {
                    className: "tuning_price_value"
                }, r.createElement("img", {
                    className: "tuning_price_type",
                    src: i
                }), s.default.toMoney(0 | e.price))), r.createElement("div", {
                    className: a("bar", {
                        hide: !e.price
                    })
                }), r.createElement("ul", {
                    className: a("amount", {
                        hide: !e.amount
                    })
                }, e.amount), r.createElement("ul", {
                    className: a("desc")
                }, e.desc))
            }, t
        }(r.Component);
    t.TuningTooltip = c, o.mixin(c)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(52),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.WorldChatHelp
            }, t.prototype.render = function() {
                var e = this.props.info;
                return r.createElement("div", {
                    className: a("tooltip WorldChatHelp")
                }, r.createElement("title", null, this.props.info.commandTitle), r.createElement("ul", null, e.commandDescriptions.map(function(e) {
                    return r.createElement("li", {
                        key: e.commandkey
                    }, r.createElement("span", {
                        className: "conmmand-key"
                    }, e.commandkey), r.createElement("span", null, " "), r.createElement("span", {
                        className: "description",
                        dangerouslySetInnerHTML: {
                            __html: e.description
                        }
                    }))
                })), r.createElement("div", {
                    className: "bar"
                }), r.createElement("title", null, this.props.info.shortcutTitle), r.createElement("div", {
                    className: "description",
                    dangerouslySetInnerHTML: {
                        __html: this.props.info.shortcutDescription
                    }
                }))
            }, t
        }(r.Component);
    t.default = s, o.mixin(s)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(52),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.ClanCreation
            }, t.prototype.render = function() {
                this.props.info;
                return r.createElement("div", {
                    className: a("tooltip ClanCreation")
                }, r.createElement("ul", null, this.props.info.clanCreationConditions.map(function(e) {
                    return r.createElement("li", {
                        key: e
                    }, " ", r.createElement("span", {
                        dangerouslySetInnerHTML: {
                            __html: e
                        }
                    }))
                })))
            }, t
        }(r.Component);
    t.default = s, o.mixin(s)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.MileageReset
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.MileageReset && this.props.info || {},
                    t = {},
                    i = e.subText && function(e) {
                        return _.map(e, function(e, t) {
                            return r.createElement("div", {
                                key: t,
                                dangerouslySetInnerHTML: {
                                    __html: e
                                }
                            })
                        })
                    }(e.subText),
                    n = [],
                    a = 0;
                _.forEach(e.mainText, function(e, t) {
                    e.title && n.push(r.createElement("div", {
                        className: "title",
                        key: a++,
                        dangerouslySetInnerHTML: {
                            __html: e.title
                        }
                    })), e.description && n.push(r.createElement("div", {
                        key: a++,
                        dangerouslySetInnerHTML: {
                            __html: e.description
                        }
                    }))
                });
                var s = ("tooltip BasicDetail " + this.props.position.side + " " + this.props.className).trim();
                return e.subText && e.subText.length > 0 ? r.createElement("div", {
                    className: s,
                    style: t
                }, r.createElement("div", {
                    className: "mainText"
                }, n), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: "subText"
                }, i)) : r.createElement("div", {
                    className: s,
                    style: t
                }, r.createElement("div", {
                    className: "mainText"
                }, n))
            }, t
        }(r.Component);
    t.default = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";

    function n(e) {
        switch (e) {
            case "achieved":
                return "images/html/number-plate/check.png";
            case "current":
            default:
                return "images/html/number-plate/arrow.png"
        }
    }

    function r(e, t, i, r) {
        var o = n(r);
        return a.createElement("li", {
            key: e
        }, a.createElement("img", {
            className: r,
            src: o
        }), a.createElement("div", {
            className: r
        }, t), a.createElement("div", {
            className: r
        }, i))
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(0),
        a = i(14),
        s = i(21),
        c = i(52),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return o.__extends(t, e), t.prototype.type = function() {
                return s.TooltipType.NumberPlateSlot
            }, t.prototype.render = function() {
                var e = this.props.info;
                return a.createElement("div", {
                    className: c("tooltip NumberPlateSlot")
                }, a.createElement("div", {
                    className: "title"
                }, e.title), a.createElement("div", {
                    className: "HorizontalLine"
                }), a.createElement("ul", null, e.levelContent.map(function(e, t) {
                    return r("levelSlot" + t, e.desc, e.slotDesc, e.achieveStatus)
                })), a.createElement("div", {
                    className: "HorizontalLine"
                }), a.createElement("ul", null, e.vipContent.map(function(e, t) {
                    return r("vipSlot" + t, e.desc, e.slotDesc, e.achieveStatus)
                })))
            }, t
        }(a.Component);
    t.NumberPlateSlotTooltip = d, s.mixin(d)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(187),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.DealerNpc
            }, t.prototype.render = function() {
                var e = this.props.type === o.TooltipType.DealerNpc && this.props.info || {},
                    t = {},
                    i = e.subText && function(e) {
                        return _.map(e, function(e, t) {
                            return r.createElement("div", {
                                key: t,
                                dangerouslySetInnerHTML: {
                                    __html: e
                                }
                            })
                        })
                    }(e.subText),
                    n = [],
                    s = 0;
                _.forEach(e.mainText, function(e, t) {
                    e.title && n.push(r.createElement("div", {
                        className: "title",
                        key: s++,
                        dangerouslySetInnerHTML: {
                            __html: e.title
                        }
                    })), e.description && n.push(r.createElement("div", {
                        key: s++,
                        dangerouslySetInnerHTML: {
                            __html: e.description
                        }
                    }))
                });
                var c = ("tooltip BasicDetail " + this.props.position.side + " " + this.props.className).trim();
                if (e.subText && e.subText.length > 0) {
                    var d = _.isEqual(e.subText, [a.default.translate("TRADE_DEALERNPC_COOLDOWNMSG_1")]) ? "" : r.createElement("img", {
                        src: "images/html/trade/cooldown-time-icon.png"
                    });
                    return r.createElement("div", {
                        className: c,
                        style: t
                    }, r.createElement("div", {
                        className: "mainText"
                    }, n), r.createElement("div", {
                        className: "bar"
                    }), r.createElement("div", {
                        className: "subText"
                    }, d, r.createElement("span", null, i)))
                }
                return r.createElement("div", {
                    className: c,
                    style: t
                }, r.createElement("div", {
                    className: "mainText"
                }, n))
            }, t
        }(r.Component);
    t.default = s, o.mixin(s)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.PursuitTech
            }, t.prototype.render = function() {
                var e = this.props.info;
                return r.createElement("div", {
                    className: "tooltip PursuitTech"
                }, r.createElement("div", {
                    className: "title",
                    dangerouslySetInnerHTML: {
                        __html: e.title
                    }
                }), r.createElement("div", {
                    className: "desc",
                    dangerouslySetInnerHTML: {
                        __html: e.desc
                    }
                }), r.createElement("div", {
                    className: "bar"
                }), r.createElement("div", {
                    className: "amount"
                }, e.amount), r.createElement("div", {
                    className: "cool-time"
                }, e.coolTime))
            }, t
        }(r.Component);
    t.PursuitTechTooltip = a, o.mixin(a)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(187),
        s = i(4),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.QuestItem
            }, t.prototype.render = function() {
                var e = this.props.style,
                    t = ("tooltip QuestItem " + this.props.position.side + " " + this.props.className).trim(),
                    i = this.props.info;
                return r.createElement("div", {
                    className: t,
                    style: e
                }, r.createElement("div", {
                    className: "condition"
                }, r.createElement("span", null, a.default.translate("QUEST_TOOLTIP_CONDITION")), r.createElement("ul", null, r.createElement("li", null, "- ", a.default.translate("QUEST_" + i.code + "_NAME", {
                    current: s.default.toMoney(i.value),
                    target: s.default.toMoney(i.goal)
                })))), r.createElement("div", {
                    className: "reward"
                }, r.createElement("span", null, a.default.translate("QUEST_TOOLTIP_REWARD")), r.createElement("ul", null, i.rewardSp > 0 && r.createElement("li", null, "- ", a.default.translate("QUEST_TOOLTIP_REWARD_SP", {
                    SP: s.default.toMoney(i.rewardSp)
                })), r.createElement("li", null, "- ", a.default.translate("QUEST_TOOLTIP_REWARD_QP", {
                    point: i.rewardQp
                })))), i.isComplete && r.createElement("div", {
                    className: "completed"
                }, r.createElement("div", {
                    className: "bar"
                }), r.createElement("span", null, a.default.translate("QUEST_TOOLTIP_REWARD_PAID"))))
            }, t
        }(r.Component);
    t.QuestItemTooltip = c, o.mixin(c)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(21),
        a = i(187),
        s = i(4),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.type = function() {
                return o.TooltipType.CampaignReward
            }, t.prototype.render = function() {
                var e = this.props.style,
                    t = ("tooltip CampaignReward " + this.props.position.side + " " + this.props.className).trim(),
                    i = this.props.info,
                    n = i.code;
                return r.createElement("div", {
                    className: t,
                    style: e
                }, r.createElement("span", {
                    className: "title"
                }, a.default.translate("OPENWORLD_CAMPAIGN_PROGRESS_HIGHLIGHT_TOOLTOP_TITLE", {
                    campaignno: n
                })), r.createElement("div", {
                    className: "bar"
                }), r.createElement("span", {
                    className: "desc"
                }, a.default.translate("OPENWORLD_CAMPAIGN_PROGRESS_HIGHLIGHT_TOOLTOP_DESC")), r.createElement("span", {
                    className: "reward"
                }, a.default.translate("OPENWORLD_CAMPAIGN_PROGRESS_HIGHLIGHT_TOOLTOP_REWARDTITLE")), r.createElement("ul", {
                    className: "reward-list"
                }, i.rewards.map(function(e, t) {
                    return r.createElement("li", {
                        key: t
                    }, " ", "- " + s.default.stripHtml(e), " ")
                })))
            }, t
        }(r.Component);
    t.CampaignRewardTooltip = c, o.mixin(c)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = i(6),
        o = i(4),
        a = i(3),
        s = i(160),
        c = i(53),
        d = i(136),
        l = function() {
            function e(e, t, i, n, r, o, c, d) {
                var l = this;
                this.$rootScope = e, this.$filter = t, this.$state = i, this.$transitions = n, this.staticdata = r, this.externalService = o, this.configLoader = c, this.featureSetService = d, this.hideNavStates = [29, 91, 90], this.preventGnbHubStates = [29, 91, 27], n.onSuccess({}, function(e) {
                    l.updateStoreByUiState(e.to())
                }), e.$on("$translateChangeEnd", function() {
                    a.store.dispatch(s.changeLocalization(l.$filter("translate")))
                }), this.updateStoreByUiState(i.current)
            }
            return e.prototype.updateStoreByUiState = function(e) {
                var t = e,
                    i = t.name,
                    r = t.state;
                a.store.dispatch(s.navigated(i));
                var o = !n.includes(this.hideNavStates, r);
                a.store.dispatch(o ? c.showNav() : c.hideNav()), a.store.dispatch(c.hideGnbHub()), a.store.dispatch(d.preventGnbHub(n.includes(this.preventGnbHubStates, r)))
            }, e.prototype.fetch = function() {
                var e = this;
                return 0 === a.store.getState().navigation.mainNavs.length ? r.resolve(this.configLoader.getConfig()).then(function(t) {
                    return e.locale = t.locale
                }).then(function() {
                    return e.createNavigation()
                }) : r.resolve()
            }, e.prototype.insertCheatMenu = function() {
                var e = this.staticdata.navigationData,
                    t = e.navs,
                    i = e.mainNavs,
                    n = e.stateMap,
                    r = 65535,
                    o = "root.menu.settings";
                t[r] = {
                    id: r,
                    state: o,
                    stringCode: "NAV_ETC_SETTINGS",
                    children: []
                }, i.push(r), n[o] = r
            }, e.prototype.createNavigation = function() {
                var e = this,
                    t = this.$filter("translate");
                this.externalService.isDevelopment() && this.insertCheatMenu();
                var i = {},
                    r = this.staticdata.navigationData,
                    o = r.mainNavs,
                    c = {};
                n.each(r.navs, function(t) {
                    t.clientFeatureName && !e.featureSetService.isEnabled(t.clientFeatureName) && (c[t.id] = !0)
                }), n.remove(o, function(e) {
                    return c[e]
                });
                var d = n.omitBy(r.stateMap, function(e, t) {
                    return c[e]
                });
                n.each(r.navs, function(e) {
                    var r = e;
                    c[r.id] || (r.locked = !1, r.selected = !1, r.text = t(e.stringCode), n.remove(r.children, function(e) {
                        return c[e]
                    }), i[r.id] = r)
                }), a.store.dispatch(s.init({
                    mainNavs: o,
                    navs: i,
                    stateMap: d,
                    uiState: this.$state.current.name,
                    subState: {
                        open: !1,
                        close: !1
                    },
                    wasSub2NavDisplayed: !1,
                    shouldNav2Display: !1,
                    shouldNav2Disappear: !1
                }))
            }, e.prototype.isTabLocked = function(e) {
                var t = a.store.getState().navigation,
                    i = t.stateMap[e];
                return i && t.navs[i] && t.navs[i].locked
            }, e
        }();
    l.$inject = ["$rootScope", "$filter", "$state", "$transitions", "staticdataLoaderService", "externalService", "configLoader", "featureSetService"], t.NavService = l, angular.module("edge.components").factory("navService", o.default.generateService(l))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return function(t, i) {
            var n = Reflect.getMetadata(s, t, s) || [],
                r = [e];
            n.push({
                propertyKey: i,
                filenames: r
            }), Reflect.defineMetadata(s, n, t, s)
        }
    }

    function r(e, t) {
        return function(i, n) {
            var r = Reflect.getMetadata(s, i, s) || [],
                o = _.isArray(e) ? e : [e];
            r.push({
                propertyKey: n,
                filenames: o,
                ctor: t
            }), Reflect.defineMetadata(s, r, i, s)
        }
    }

    function o(e) {
        var t = Reflect.getMetadata(s, e, s);
        return t || a.resolve(), a.all(t.map(function(t) {
            return a.all(t.filenames.map(function(e) {
                return $.ajax({
                    url: "staticdata/" + e + ".json",
                    dataType: "json"
                })
            })).then(function(i) {
                var n;
                if (t.ctor) {
                    n = new(Function.prototype.bind.apply(t.ctor, [null].concat(i)))
                } else n = i[0];
                e[t.propertyKey] = n
            })
        }))
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var a = i(6);
    i(296);
    var s = "staticdataName";
    t.staticdata = n, t.staticdataCustom = r, t.loadStaticdata = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(34),
        r = function() {
            function e(e) {
                this.data = e, this.tracks = [], this.tracks = _.sortBy(e, function(e) {
                    return e.code
                }), n.getInjector().get("externalService").isDevelopment() || (this.tracks = this.tracks.filter(function(e) {
                    return !e.modeTest
                }))
            }
            return e.prototype.getTracks = function() {
                return this.tracks
            }, e.prototype.getTracksWithRandom = function() {
                return [e.randomTrack].concat(this.tracks)
            }, e.prototype.getTrack = function(e, t) {
                return t ? this.getRandomTrack() : this.data[e]
            }, e.prototype.getRandomTrack = function() {
                return e.randomTrack
            }, e.prototype.getDefaultLevel = function(e) {
                return this.data[e].defaultLevel || e
            }, e
        }();
    r.randomTrack = {
        code: 100,
        nameCode: "TRACK_NAME_RANDOM",
        difficulty: 1,
        difficultyCode: "TRACK_DIFFICULTY_RANDOM",
        level: "random",
        lapCount: 1,
        defaultLevel: 0,
        room: {
            SPEEDINDIVIDUAL: !0,
            ITEMINDIVIDUAL: !0,
            SPEEDTEAM: !0,
            ITEMTEAM: !0,
            DRIFTINDIVIDUAL: !0,
            FOXHUNTINGINDIVIDUAL: !0,
            PURSUITINDIVIDUAL: !0,
            TIMETRIAL: !1
        },
        rank: {
            SPEEDINDIVIDUAL: !0
        },
        modeTest: !1
    }, t.TrackDataManager = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(38),
        r = i(29),
        o = function() {
            function e(e) {
                var t = this;
                this._tabs = {}, this._configs = null, this._contextMenu = {}, this._filters = {}, this._sources = {}, this._commandsDescriptions = [];
                var i = e.commandData,
                    o = e.filterData,
                    a = e.sourceData,
                    s = e.tabData,
                    c = e.configData,
                    d = e.contextMenuData;
                this._configs = c;
                var l = {};
                _.each(o, function(e) {
                    var t = {
                        id: e.id,
                        nameID: e.nameID,
                        source: n.ChatSourceType[e.source],
                        visible: e.visible
                    };
                    l[t.id] = t
                }), this._filters = l;
                var u = {};
                _.each(a, function(e) {
                    var t = {
                        id: n.ChatSourceType[e.id],
                        nameID: e.nameID,
                        visible: e.visible
                    };
                    u[t.id] = t
                }), this._sources = u;
                var p = this._commands = {};
                _.each(i, function(e) {
                    var i = {
                        id: e.id,
                        cmd: e.cmd,
                        auxcmds: [],
                        handler: e.handler,
                        executeKeys: [r.KeyboardMap.getKeyCode(e.executeKey)],
                        descriptionID: e.descriptionID
                    };
                    _.each(e.auxcmd, function(e) {
                        return i.auxcmds.push(e)
                    }), p[i.id] = i, i.descriptionID && t._commandsDescriptions.push({
                        cmd: e.cmd,
                        description: e.descriptionID
                    })
                }), _.each(s, function(e) {
                    var i = {
                            id: e.id,
                            nameID: e.nameID,
                            defaultSource: n.ChatSourceType[e.defaultSource],
                            hint: e.hint,
                            enablefilters: [],
                            selectedfilters: [],
                            commands: [],
                            mainWindowEnable: e.enable.mainWindow,
                            simpleWindowEnable: e.enable.simpleWindow,
                            whisperNoticeEnable: e.enable.whisperNotice
                        },
                        r = String(e.filter.enablelist).split(",");
                    _.forEach(r, function(e) {
                        l[e] && i.enablefilters.push(l[e])
                    });
                    var o = String(e.filter.selectedlist).split(",");
                    _.forEach(o, function(e) {
                        l[e] && i.selectedfilters.push(l[e])
                    }), e.commands && e.commands.length > 0 && e.commands.forEach(function(e) {
                        p[e] && i.commands.push(p[e])
                    }), t._tabs[i.id] = i
                }), _.each(d, function(e) {
                    if ("on" === e.switch) {
                        var i = {
                            id: e.id,
                            nameID: e.nameID,
                            handler: e.handler,
                            groupId: e.groupId,
                            selectHandler: e.selectHandler
                        };
                        t._contextMenu[i.id] = i
                    }
                })
            }
            return Object.defineProperty(e.prototype, "tabs", {
                get: function() {
                    return this._tabs
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.getConfig = function(e) {
                return this._configs[e]
            }, Object.defineProperty(e.prototype, "contextMenu", {
                get: function() {
                    return this._contextMenu
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "filters", {
                get: function() {
                    return this._filters
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.getSourceConfig = function(e) {
                return this._sources[e]
            }, Object.defineProperty(e.prototype, "commandsDescriptions", {
                get: function() {
                    return this._commandsDescriptions
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "commands", {
                get: function() {
                    return this._commands
                },
                enumerable: !0,
                configurable: !0
            }), e
        }();
    t.WorldChatDataManager = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e(e) {
            this._configs = null, this._authorities = {}, this._emblemCategoryies = {}, this._emblems = {};
            var t = e.authorityData,
                i = e.emblemCategoryData,
                n = e.emblemData;
            this._configs = e.configs;
            var r = {};
            _.each(t, function(e) {
                var t = {
                    position: e.id,
                    editNotification: e.editNotification,
                    editIntroduction: e.editIntroduction,
                    approveJoin: e.approveJoin,
                    changeEmblem: e.changeEmblem,
                    expel: e.expel,
                    changePosition: e.changePosition,
                    recruitAndscreening: e.recruitAndscreening,
                    dissolve: e.dissolve,
                    isMaster: e.isMaster,
                    title: e.title,
                    manageable: e.manageable
                };
                r[t.position] = t
            }), this._authorities = r;
            var o = {};
            _.each(i, function(e) {
                var t = {
                    type: e.type,
                    nameId: e.nameId
                };
                o[t.type] = t
            }), this._emblemCategoryies = o;
            var a = {};
            _.each(n, function(e) {
                var t = {
                    id: e.id,
                    type: e.type
                };
                a[t.id] = t
            }), this._emblems = a
        }
        return e.prototype.getConfig = function(e) {
            return this._configs[e]
        }, Object.defineProperty(e.prototype, "authorities", {
            get: function() {
                return this._authorities
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "emblemCategories", {
            get: function() {
                return this._emblemCategoryies
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "emblems", {
            get: function() {
                return this._emblems
            },
            enumerable: !0,
            configurable: !0
        }), e
    }();
    t.ClanDataManager = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e(e) {
            this._configs = null, this._categorySettings = {}, this._waitingPeriods = [], this._auctionItemPopUpSettings = {};
            var t = e.categorySettingData,
                i = e.waitingPeriodData,
                n = e.auctionItemPopUpSettingData;
            this._configs = e.configs;
            var r = {};
            _.each(t, function(e) {
                r[e.key] = e
            }), this._categorySettings = r;
            var o = [];
            _.each(i, function(e) {
                o.push(e)
            }), this._waitingPeriods = o;
            var a = {};
            _.each(n, function(e) {
                a[e.itemType] = e
            }), this._auctionItemPopUpSettings = a
        }
        return e.prototype.getConfig = function(e) {
            return this._configs[e]
        }, Object.defineProperty(e.prototype, "categorySettings", {
            get: function() {
                return this._categorySettings
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "waitingPeriods", {
            get: function() {
                return this._waitingPeriods
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "auctionItemPopUpSettings", {
            get: function() {
                return this._auctionItemPopUpSettings
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.productInCategory = function(e, t) {
            return _.includes(this.categorySettings[t].itemType, e)
        }, e.prototype.getCategoryGlobalKey = function(e) {
            return e ? this.categorySettings[e].globalKey : ""
        }, e
    }();
    t.AuctionDataManager = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e(e) {
            this._numberPlateData = e, this._levelSlots = _.sortBy(_.filter(this._numberPlateData.numberPlateSlotData, {
                unlocktype: "playerlevel"
            }), "unlockvalue"), this._vipSlots = _.sortBy(_.filter(this._numberPlateData.numberPlateSlotData, {
                unlocktype: "vipgrade"
            }), "unlockvalue")
        }
        return Object.defineProperty(e.prototype, "numberPlateData", {
            get: function() {
                return this._numberPlateData
            },
            enumerable: !0,
            configurable: !0
        }), e.prototype.levelSlots = function(e) {
            for (var t = 0, i = 0, n = this._levelSlots; i < n.length; i++) {
                var r = n[i];
                if (e < r.unlockvalue) break;
                t = r.slotnum
            }
            return t
        }, e.prototype.vipSlots = function(e) {
            for (var t = 0, i = 0, n = this._vipSlots; i < n.length; i++) {
                var r = n[i];
                if (e < r.unlockvalue) break;
                t = r.slotnum
            }
            return t
        }, e
    }();
    t.NumberPlateDataManager = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = function() {
            function e() {
                this.numText = "0-9", this.engText = "a-zA-Z", this.numReg = new RegExp("[" + this.engText + "]+", "g"), this.engReg = new RegExp("[" + this.engText + "]+", "g"), this.korText = "가-힣ᄀ-ᇿ㄰-㆏ꥠ-꥿ힰ-퟿", this.korReg = new RegExp("[" + this.korText + "]+", "g"), this.cjkText = "　-〿぀-ゟ゠-ヿ＀-ﾟ一-龯㐀-䶿", this.cjkReg = new RegExp("[" + this.cjkText + "]+", "g"), this.allAcceptLanguageReg = new RegExp("[" + this.numText + this.korText + this.engText + this.cjkText + "]+", "g")
            }
            return e.prototype.isAcceptLanguage = function(e) {
                return this.isOnlyReg(this.allAcceptLanguageReg, e)
            }, e.prototype.isOnlyReg = function(e, t) {
                for (var i, n = []; i = e.exec(t);) n.push(i[0]);
                return n.join("").length === t.length
            }, e.prototype.isBetweenLength = function(e, t, i) {
                var n = e.length;
                return n >= t && n <= i
            }, e
        }();
    r.$inject = [], t.BanWordService = r, angular.module("edge.components").factory("banwordService", n.default.generateService(r))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(174),
        a = i(4),
        s = i(287),
        c = i(10),
        d = function() {
            function e(e, t, i, n, r, o) {
                var a = this;
                this.$window = e, this.$filter = t, this.sessionService = i, this.externalService = n, this.stateService = r, this.popupService = o, this.errorHistory = [], this.historySize = 4, this.$window.addEventListener("unhandledrejection", function(e) {
                    e.preventDefault();
                    var t = e.detail && e.detail.reason ? e.detail.reason : new Error("unknown rejection"),
                        i = "Unhandled Rejection. " + t.message,
                        n = t.stack;
                    a.post("ScreenError", i, n)
                }), this.$window.onerror = function(e, t, i, n, r) {
                    a.catchScreenError(r)
                }
            }
            return e.prototype.getRequestErrorCode = function(e) {
                var t = (e.response || {}).code;
                return "" + (t || "empty code")
            }, e.prototype.catchRequestError = function(e, t, i, o) {
                var a = this;
                if (_.some(s.IgnoreApi, function(e) {
                        return i.indexOf(e) > -1
                    })) return r.resolve();
                if (403 === e.status) this.popupService.draw("ConfirmPopup", {
                    title: "ALARM_SERVERLOST_TITLE",
                    description: this.$filter("template")({
                        expiredAt: e.expireat
                    }, "BANNED_MESSAGE"),
                    confirm: function() {
                        return a.externalService.beShutdown(3)
                    }
                });
                else if (429 === e.status) {
                    var d = e.getResponseHeader("Retry-After") || 0;
                    this.popupService.draw("ConfirmPopup", {
                        title: "SYSTEM_FUNTIONLIMIT_TITLE",
                        description: this.$filter("translate")("SYSTEM_FUNTIONLIMIT_DESC") + " (" + d + ")"
                    })
                }
                var l = _.pick(c.qualifyError(e), ["code", "islandName", "levelName", "errorName"]),
                    u = n.__assign({
                        response: e.responseJSON,
                        status: e.status,
                        method: t,
                        url: i
                    }, l),
                    p = 0 === u.status ? "status0" : "";
                return this.post("RequestError", this.getRequestErrorCode(u), "", o, p, u)
            }, e.prototype.catchScreenError = function(e, t) {
                var i = _.isString(e) ? e : e && e.message || "",
                    n = e && e.stack || "no stack";
                return this.post("ScreenError", i, n, t)
            }, e.prototype.catchReduxError = function(e, t) {
                var i = "Redux dispatch Failed. " + e.message,
                    n = e.stack || "no stack";
                return this.post("ReduxError", i, n, t)
            }, e.prototype.catchReactError = function(e, t) {
                var i = "React render Failed. " + e.message,
                    n = e.stack || "no stack";
                return this.post("ReactError", i, n, t)
            }, e.prototype.post = function(e, t, i, r, c, d) {
                if (void 0 === d && (d = {}), this.externalService.isEdgeBrowser() && this.externalService.beGetCoreVersion() && !(s.IgnoreStateForSentry.indexOf(this.stateService.getCurrentName()) > -1)) {
                    if (this.sessionService.logConfig.reportError) {
                        var l = r || a.default.getUUID(),
                            u = {
                                type: e,
                                message: t
                            };
                        if (!this.isDuplicate(u)) {
                            this.collect(u);
                            var p = new Error(t);
                            p.name = e, p.stack = i;
                            var h = n.__assign({
                                uuid: l,
                                coreLevel: this.externalService.beGetCurrentLevel() || "",
                                uiState: this.stateService.getCurrentName(),
                                keyword: c
                            }, d);
                            o.captureException(p, {
                                extra: n.__assign({}, d, u, h),
                                tags: h
                            })
                        }
                    }
                }
            }, e.prototype.collect = function(e) {
                this.errorHistory.length >= this.historySize && (this.errorHistory = []), this.errorHistory.push(e)
            }, e.prototype.isDuplicate = function(e) {
                return !!_.find(this.errorHistory, {
                    type: e.type,
                    message: e.message
                })
            }, e
        }();
    d.$inject = ["$window", "$filter", "sessionService", "externalService", "stateService", "popupService"], t.ExceptionHandleService = d, angular.module("edge.components").factory("exceptionHandleService", a.default.generateService(d))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(7),
        a = i(4),
        s = i(10),
        c = i(255),
        d = i(3),
        l = function() {
            function e(e, t, i, n, r) {
                var o = this;
                this.$rootScope = e, this.$transitions = t, this.sessionService = i, this.localStorageService = n, this.serverTimeService = r, this.isSampling = !1, this.actions = [], this.entertime = new Date, this.logs = [], this.blacklistStates = ["root.MatchResult"].concat(a.default.loadingStateList), this.$transitions.onSuccess({}, function(e) {
                    var t = e.$to().name || window.location.hash.substring(1).split("?")[0]; - 1 === o.blacklistStates.indexOf(t) && o.currentState !== t && o.onScreenChange(t)
                }), window.addEventListener(c.ButtonEvent.UET_CLICK, function(e) {
                    o.addEvent(e.detail)
                })
            }
            return e.prototype.syncLoginTime = function() {
                this.logintime = this.serverTimeService.time
            }, e.prototype.initState = function() {
                return this.currentState = "start", this.sceneidx = 0, this.localStorageService.set("uet.currentState", this.currentState), this.localStorageService.set("uet.sceneidx", this.sceneidx), r.resolve()
            }, e.prototype.recoverState = function() {
                return this.currentState = this.localStorageService.get("uet.currentState") || "start", this.sceneidx = this.localStorageService.get("uet.sceneidx") || 0, r.resolve()
            }, e.prototype.addEvent = function(e) {
                if (this.isSampling && e && !(this.actions.length > 5)) {
                    var t = e.split("/").pop().trim();
                    this.actions.push(t)
                }
            }, e.prototype.onScreenChange = function(e) {
                this.isSampling && (this.logs.push({
                    type: "usereventtracking",
                    page: this.currentState,
                    nextpage: e,
                    actions: this.actions,
                    seq: this.sceneidx,
                    logintime: this.logintime.getTime(),
                    entertime: this.serverTimeService.time.getTime(),
                    leavetime: 0,
                    prevlogintime: 0
                }), this.currentState = e, this.actions = [], this.sceneidx++, this.localStorageService.set("uet.currentState", this.currentState), this.localStorageService.set("uet.sceneidx", this.sceneidx), this.postLogs())
            }, e.prototype.postLogs = function() {
                var e = this,
                    t = d.store.getState().player;
                if (_.isEmpty(t)) return void o.warn("no player selected");
                var i = this.logs;
                this.logs = [], this.sessionService.getAccount().then(function(n) {
                    return r.map(i, function(i) {
                        return e.post(i, t, n)
                    }, {
                        concurrency: 2
                    })
                })
            }, e.prototype.post = function(e, t, i) {
                if (!_.isEmpty(t)) {
                    var r = this.sessionService.config.logApiServer,
                        o = n.__assign({}, e, {
                            aid: i.id,
                            pid: t.id,
                            level: t.level,
                            prevlogintime: i && i.lastplayed && i.lastplayed.time ? new Date(i.lastplayed.time.toString()).getTime() : 0
                        });
                    return s.requestHttp("POST", r + "/v2/usereventtrackinglogs", o)
                }
            }, e
        }();
    l.$inject = ["$rootScope", "$transitions", "sessionService", "localStorageService", "serverTimeService"], t.default = l, angular.module("edge.components").factory("userEventTrackingService", a.default.generateService(l)).run(["userEventTrackingService", function(e) {}])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = i(7),
        a = i(4),
        s = i(9),
        c = i(502),
        d = function(e) {
            function t(t) {
                var i = e.call(this) || this;
                return i.externalService = t, i.record = {}, i.distanceList = {}, i._lapCounts = {}, i.externalService.on(s.default.beCollectGameRecord, function(e) {
                    o.info("CORE>>", "beCollectGameRecord", JSON.stringify(e));
                    var t = i.convertRecord(e);
                    t.lapcount || (i.commitTotalRecord(t), i.emit("totalRecord", t))
                }), i.externalService.on(s.default.beHUDSetCurrentLap, function(e, t) {
                    i.lapCounts[t] = Math.max(0, e - 1)
                }), i.externalService.on(s.default.beHUDSetTotalLaps, function(e) {
                    i._totalLap = e
                }), i
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "lapCounts", {
                get: function() {
                    return this._lapCounts
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "totalLap", {
                get: function() {
                    return this._totalLap
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.initRecord = function() {
                this._lapCounts = {}, this._totalLap = void 0, this.record = {}
            }, t.prototype.getAllRecords = function() {
                return this.record
            }, t.prototype.getRecord = function(e) {
                return this.record[e]
            }, t.prototype.cheatRecord = function(e, t, i) {
                this.record[e] = i ? _.fill(new Array(t), -1) : t
            }, t.prototype.getRecordLength = function(e) {
                return c.isRecordTypeArray(e) ? this.record[e].length : -1
            }, t.prototype.setRecord = function(e, t) {
                if (!c.isRecordTypeArray(e) && this.record[e] !== t) {
                    var i = _.isNumber(t) ? t - this.record[e] : t;
                    this.record[e] = t, this.emit("changed", e, i)
                }
            }, t.prototype.pushRecord = function(e, t) {
                c.isRecordTypeArray(e) && ((this.record[e] || (this.record[e] = [])).push(t), this.emit("changed", e, t))
            }, t.prototype.commitTotalRecord = function(e) {
                this.record = _.assign(this.record, e)
            }, t.prototype.convertRecord = function(e) {
                return _.assign(e, {
                    mileage: Math.round(e.mileage || 0),
                    playerid: e.pid
                })
            }, t
        }(r.EventEmitter);
    d.$inject = ["externalService"], t.RecordService = d, t.default = d, angular.module("edge.components").factory("recordService", a.default.generateService(d))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = i(4),
        o = function() {
            function e(e) {
                this.staticdataLoaderService = e, this.tips = this.staticdataLoaderService.loadingTip
            }
            return e.prototype.getTips = function() {
                return this.tips
            }, e.prototype.getTipsByMode = function(e) {
                return n.filter(this.tips, function(t) {
                    return t.mode === e.toLowerCase()
                })
            }, e
        }();
    o.$inject = ["staticdataLoaderService"], t.default = o, angular.module("edge.components").factory("loadingTipService", r.default.generateService(o))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(9),
        o = i(10),
        a = function() {
            function e(e) {
                this.externalService = e, this.init()
            }
            return e.prototype.fetch = function() {}, e.prototype.init = function() {
                var e = this;
                this.externalService.on(r.default.beSecurityLog, function(t) {
                    e.sendSecurityLog(t)
                }), this.externalService.on(r.default.beSendSingleGameInfo, function(t) {
                    e.sendSingleGameInfo(t)
                })
            }, e.prototype.sendSecurityLog = function(e) {
                return o.request("POST", "security/abuse/core/log", e)
            }, e.prototype.sendSingleGameInfo = function(e) {
                return o.request("POST", "security/abuse/single/game/info", e)
            }, e
        }();
    a.$inject = ["externalService"], t.default = a, angular.module("edge.components").factory("securityLogService", n.default.generateService(a))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(15),
        r = i(4),
        o = i(295),
        a = i(3),
        s = i(10),
        c = function() {
            function e(e, t, i, n, r, o) {
                this.$timeout = e, this.$errorHistory = t, this.stateService = i, this.externalService = n, this.$transitions = r, this.sessionService = o
            }
            return e.prototype.onChangeStart = function() {
                var e = this;
                this.clearTimer(), this.stateChangeTimer = setTimeout(function() {
                    e.post(e.$errorHistory.get(), "unsuccess")
                }, 1e4)
            }, e.prototype.onChangeSuccess = function() {
                this.clearTimer()
            }, e.prototype.onChangeError = function(e) {
                if (!o.isTolerable(e.error())) {
                    var t = this.getFilteredErrors();
                    this.post(t, "change")
                }
            }, e.prototype.clearTimer = function() {
                clearTimeout(this.stateChangeTimer)
            }, e.prototype.getFilteredErrors = function() {
                var e = this.$errorHistory.get();
                return e = this.filterOldError(e), e = this.filterTrivialTypeError(e)
            }, e.prototype.filterTrivialTypeError = function(e) {
                var t = ["Invariant Violation"];
                return _.filter(e, function(e) {
                    return !_.includes(t, e.type)
                })
            }, e.prototype.filterOldError = function(e) {
                var t = n.Constants.StateStalllimitTime,
                    i = new Date;
                return i.setSeconds(i.getSeconds() - (t + 10)), _.filter(e, function(e) {
                    return +e.occuredAt >= +i
                })
            }, e.prototype.post = function(e, t) {
                return s.request("POST", "errorlogs/statestall", {
                    pid: a.store.getState().player ? a.store.getState().player.id : "anonymous",
                    state: this.stateService.getCurrentName(),
                    level: this.externalService.beGetCurrentLevel(),
                    stallType: t,
                    error: e,
                    cl: this.externalService.beGetCoreVersion,
                    matchId: (a.store.getState().match.match || {}).id,
                    roomId: (a.store.getState().room.room || {}).id,
                    clientSessionUuid: this.sessionService.clientSessionUuid
                })
            }, e
        }();
    c.$inject = ["$timeout", "$errorHistory", "stateService", "externalService", "$transitions", "sessionService"], t.StateStallService = c, angular.module("edge.components").factory("stateStallService", r.default.generateService(c))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(22),
        o = i(300),
        a = i(5),
        s = i(3),
        c = i(4),
        d = i(10),
        l = i(173),
        u = ["GIFT", "PROMOTION"],
        p = function() {
            function e(e, t, i, n, r, o) {
                var a = this;
                this.$filter = e, this.pushService = t, this.notifierService = i, this.stateService = n, this.serverTimeService = r, this.playerService = o, this.pushService.subscribeResource(/^\/inboxes\/(.*)\/packages\/(.*)\/create/, function(e, t) {
                    return a.onCreatePackage(e, t)
                }), this.pushService.subscribeResource(/^\/inboxes\/(.*)\/packages\/(.*)/, function(e, t) {
                    return a.onDeletePackage(e, t)
                }), this.pushService.subscribeResource(/^\/shop\/(.*)\/nexongift\/create/, function(e, t) {
                    return a.onGiftAlram(e, t)
                })
            }
            return e.prototype.onGiftAlram = function(e, t) {
                this.showSystemTrayAlram(t.body), this.needFetch(), this.fetch()
            }, e.prototype.fetch = function() {
                var e = s.store.getState().player.id;
                return this.fetched ? n.resolve() : this.fetched = d.request("GET", "inboxes/" + e + "/packages").then(function(e) {
                    o.setPackage(e)
                })
            }, e.prototype.onCreatePackage = function(e, t) {
                var i = this;
                if (t.body) {
                    var n = t.body;
                    ! function(e) {
                        return ("PURCHASED" === e.type || "GIFT" === e.type) && e.opts && (e.opts.bunch && "NXCASH" === e.opts.bunch.currency || "root.menu.VehicleTuningShop" === i.stateService.getCurrentName() && "TUNING_SHOP" === e.opts.sellingShop)
                    }(n) ? o.addPackage(n): this.usePackage([n.id]).catch(function(e) {
                        o.addPackage(n)
                    }), this.showSystemTrayAlram(n)
                }
            }, e.prototype.showSystemTrayAlram = function(e) {
                if (!(u.indexOf(e.type) < 0 || e.opts && e.opts.notifyInvisible)) {
                    var t = c.default.stripHtml(e.title),
                        i = this.$filter("translate")(function(e) {
                            switch (e) {
                                case "GIFT":
                                    return "INBOX_POPUP_RECEIVEDGIFT_TEXT1";
                                case "PROMOTION":
                                    return "INBOX_EVENT_NOTIFICATION"
                            }
                        }(e.type));
                    this.notifierService.addLast(t, i, "root.menu.Inbox"), this.playerService.dispatchNewItemIndicate("inbox")
                }
            }, e.prototype.onDeletePackage = function(e, t) {
                if (t.body && t.delete) {
                    var i = t.body;
                    o.deletePackages([i])
                }
            }, e.prototype.usePackage = function(e) {
                var t = s.store.getState().player.id;
                return d.request("POST", "inboxes/" + t + "/packages/@use", {
                    ids: e
                }).then(function(e) {
                    var t = r.map(e, "id");
                    return o.deletePackages(t), t
                })
            }, e.prototype.cheatAddPackage = function(e) {
                var t = s.store.getState().player.id;
                return d.request("POST", "inboxes/" + t + "/packages", e)
            }, e.prototype.needFetch = function() {
                this.fetched = void 0
            }, e.prototype.getItemImgPath = function(e) {
                return r.isEmpty(e.imgpath) ? r.isEmpty(e.rewards) ? void 0 : this.$filter("itemCardImg")(e.rewards[0].type, e.rewards[0].code) : this.$filter("cdn")(e.imgpath)
            }, e.prototype.getItemFallbackImgPath = function(e) {
                return r.isEmpty(e.rewards) ? void 0 : this.$filter("itemCardImg")(e.rewards[0].type, e.rewards[0].code)
            }, e.prototype.getRewardableItemName = function(e) {
                var t = this;
                return e && Array.isArray(e.rewards) ? e.rewards.map(function(e) {
                    var i = t.$filter("rewardName")(e.type, e.code, e.count, e.opts);
                    return -1 === l.NumericalItem.indexOf(e.type) && e.count > 1 && (i += " " + t.$filter("template")({
                        number: e.count
                    }, "BUNDLE_ITEM_COUNT")), c.default.stripHtml(i)
                }) : []
            }, e.prototype.isUnconfirmedCashItem = function(e) {
                return ("PURCHASED" === e.type || "GIFT" === e.type) && e.bunch && "NXCASH" === e.bunch.currency && e.unconfirmed && !0 === e.unconfirmed && e.orderNo
            }, e.isExpirableItem = function(e) {
                return !!e && +e != +new Date("9999-12-31")
            }, e.prototype.isExpired = function(t) {
                return !!(e.isExpirableItem(t) && +a(t) < +this.serverTimeService.time)
            }, e.prototype.removeExpiredItem = function(e) {
                var t = s.store.getState().player;
                return d.request("DELETE", "inboxes/" + t.id + "/packages?expired=true&ids[]=" + e.ids.join("&ids[]=")).catch(function(e) {
                    throw e
                }).finally(function() {
                    o.deletePackages(e.ids)
                })
            }, e
        }();
    p.$inject = ["$filter", "pushService", "notifierService", "stateService", "serverTimeService", "playerService"], t.default = p, angular.module("edge.components").factory("inboxService", c.default.generateService(p))
}, function(e, t, i) {
    "use strict";

    function n(e, t, i) {
        var n = ["shared-common-buttons", "shared-common-tooltips", "shared-item-card", "shared-icons", "shared-vehicle-card", "shared-parts", "shared-chat", "shared-number-plate", "shared-thumbnail"];
        return r.debug("Face components loading...", n), t.all(n.map(function(t) {
            return i.get("views/" + t + ".json").then(function(i) {
                return (new s.DataConverter).convert(t, i.data), o.SharedLibrary.create(t, i.data.library, a.GlobalCustomComponents), e.loadAtlasMetadata(t).then(function() {
                    return e.prepareImages(t, i)
                })
            })
        }))
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(7),
        o = i(254),
        a = i(544),
        s = i(548);
    n.$inject = ["prebuildService", "$q", "$http"], angular.module("edge.components").factory("sharedComponentLoaded", n)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(6),
        o = i(364),
        a = function() {
            function e() {
                this.background = $("\n    <svg class='edge-dim-background'>\n      <path d='M 0,0 L 1920,0 1920,1080 0,1080 z' />\n    </svg>\n  ")
            }
            return e.prototype.setBackground = function() {
                return this.background.parent().length ? r.resolve() : (this.background.appendTo("#edge-ui"), r.delay(1))
            }, e.prototype.clearBackground = function() {
                this.background.removeClass("fadeIn").remove()
            }, e.prototype.dim = function() {
                var e = this;
                return this.background.hasClass("fadeIn") ? r.resolve() : this.setBackground().then(function() {
                    return new r(function(t) {
                        o.TweenMaxTo(e.background, .2, {
                            className: "+=fadeIn",
                            onComplete: function() {
                                return t()
                            }
                        })
                    })
                })
            }, e.prototype.blur = function(e) {
                var t = this;
                return void 0 === e && (e = 0), this.background.hasClass("fadeIn") ? r.delay(e).then(function() {
                    return new r(function(e) {
                        o.TweenMaxTo(t.background, .2, {
                            className: "-=fadeIn",
                            onComplete: function() {
                                t.clearBackground(), e()
                            }
                        })
                    })
                }) : r.resolve()
            }, e
        }();
    t.DimService = a, t.default = a, angular.module("edge.components").factory("dimService", n.default.service(a))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(9),
        o = i(7),
        a = i(6),
        s = function() {
            function e(e, t) {
                this.externalService = e, this.staticdataLoaderService = t, this.bgmState = 0
            }
            return e.prototype.init = function() {
                this.meta || this.prepareBgm()
            }, e.prototype.prepareBgm = function() {
                var e = this;
                this.meta = [], this.core = [], _.each(this.staticdataLoaderService.soundBgmData, function(t) {
                    var i = t.name,
                        n = t.weight,
                        r = t.intro,
                        o = t.gameMode,
                        a = t.purpose,
                        s = {
                            name: i + ".snr",
                            weight: n,
                            intro: r,
                            gameMode: o
                        };
                    "core" === a ? e.core.push(s) : e.meta.push(s)
                }), this.meta = _.uniq(this.meta.concat(this.core.filter(function(e) {
                    return !e.gameMode
                })))
            }, e.prototype.createPlayList = function(e, t) {
                for (var i = [], n = 0, r = e; n < r.length; n++) {
                    var o = r[n];
                    ! function(e) {
                        i = i.concat(_.times(e.weight, function() {
                            return e.name
                        }))
                    }(o)
                }
                var a;
                if (t) {
                    var s = _.find(e, {
                        intro: !0
                    });
                    if (s) {
                        a = s.name;
                        var c = _.findIndex(i, function(e) {
                            return e === a
                        });
                        _.remove(i, function(e, t) {
                            return t === c
                        })
                    }
                }
                for (var d, l = 0; l < 10; l++) {
                    if ("break" === function(e) {
                            d = _.shuffle(i), a && (d = [a].concat(d));
                            var t = d.length;
                            if (_.every(d, function(e, i) {
                                    return e !== (i + 1 === t ? d[0] : d[i + 1])
                                })) return "break"
                        }()) break
                }
                return d
            }, e.prototype.playMeta = function(e) {
                if (void 0 === e && (e = !1), o.debug("bgmService> play meta bgm", this.bgmState), 2 !== this.bgmState) {
                    this.bgmState = 2;
                    var t = this.createPlayList(this.meta, e);
                    this.externalService.beBGMPlayList(t)
                }
            }, e.prototype.playCore = function(e) {
                if (o.debug("bgmService> play core bgm", this.bgmState), 1 !== this.bgmState) {
                    this.bgmState = 1;
                    var t = e ? this.core.filter(function(t) {
                        return t.gameMode === e
                    }) : this.core;
                    t.length <= 0 && (t = this.core.filter(function(e) {
                        return !e.gameMode
                    }));
                    var i = this.createPlayList(t, !1);
                    this.externalService.beBGMPlayList(i)
                }
            }, e.prototype.stop = function(e) {
                o.debug("bgmService> stop", this.bgmState), this.bgmState = 0;
                var t = void 0 !== e ? e : 2e3;
                return this.externalService.beBGMStop(t), a.delay(t)
            }, e.prototype.pause = function() {
                o.debug("bgmService> pause"), this.externalService.beBGMSetPause(!0)
            }, e.prototype.resume = function() {
                o.debug("bgmService> resume"), this.externalService.beBGMSetPause(!1)
            }, e.prototype.setRaceLoadingListener = function() {
                var e = this;
                return new a(function(t) {
                    var i = function(n) {
                        n >= 80 && (e.stop(3e3), setTimeout(t, 3e3), e.externalService.off(r.default.bePushLoadingProgress, i))
                    };
                    e.externalService.on(r.default.bePushLoadingProgress, i)
                })
            }, e
        }();
    s.$inject = ["externalService", "staticdataLoaderService"], t.BgmService = s, angular.module("edge.components").factory("bgmService", n.default.generateService(s))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = function() {
            function e(e, t) {
                this.$transitions = e, this.externalService = t, e.onSuccess({}, function(e) {
                    var i = e.$to();
                    void 0 !== i.state && t.beSetUiState(i.state)
                })
            }
            return e.prototype.setSubState = function(e) {
                for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
                (n = this.externalService).beSetUiSubState.apply(n, [e].concat(t));
                var n
            }, e
        }();
    r.$inject = ["$transitions", "externalService"], t.UIStateNotifyService = r, angular.module("edge.components").factory("uistateNotifyService", n.default.generateService(r)).run(["uistateNotifyService", function() {}])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(301);
    t.Publisher = n.Publisher;
    var r = i(1133);
    t.Tencent = r.Tencent;
    var o = i(1134);
    t.Nexon = o.Nexon
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(175),
        a = i(301),
        s = i(3),
        c = i(6),
        d = i(10),
        l = i(4),
        u = function(e) {
            function t(t, i, n, r, o) {
                var a = e.call(this) || this;
                return a.pushService = t, a.antibotService = i, a.announcementService = n, a.externalService = r, a.popupService = o, a.fatigueRate = 0, a.cookieInit = !1, a
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.pushService.on("msg", this.onMessage.bind(this))
            }, t.prototype.onMessage = function(e) {
                switch (e.cmd) {
                    case "tencent.fatigue.changed":
                        this.onFatigueChanged(e.opts.rate, e.opts.text);
                        break;
                    case "tencent.punishkick":
                        this.antibotService.punishKickChannel();
                        break;
                    case "tencent.punish.message":
                        this.popupService.drawConfirm("ALARM_SERVER_TENCENT_SECURITY_TITLE", e.opts.msg);
                        break;
                    case "tencent.fatigue.openuri":
                        var t = e.opts.uri,
                            i = this.externalService.beGetSSOShopUri(t);
                        this.externalService.beOpenNewBrowserWindowWithURL(i);
                        break;
                    case "tencent.fatigue.confirm":
                        this.popupService.drawConfirm(e.opts.title, e.opts.msg)
                }
            }, t.prototype.initIngameWebViewCookies = function(e) {
                if (!this.cookieInit) {
                    var t = "datamore.qq.com",
                        i = s.store.getState().player.id;
                    this.externalService.beSetTrustedCookie("nfsol_uin", e.qqid, t), this.externalService.beSetTrustedCookie("nfsol_roleid", i, t), this.externalService.beSetTrustedCookie("nfsol_worldid", e.zoneid, t), this.externalService.beSetTrustedCookie("nfsol_loginkey", e.token, t), this.cookieInit = !0
                }
            }, t.prototype.isNoReward = function() {
                return 1 === this.fatigueRate
            }, t.prototype.getFatigueRate = function() {
                return this.fatigueRate
            }, t.prototype.onFatigueChanged = function(e, t) {
                var i = this;
                r.debug("onFatigueChanged", e, t), l.default.isEmptyString(t) || (this.fatigueRate = e, .5 === e ? (this.intervalTimer && clearInterval(this.intervalTimer), this.intervalTimer = setInterval(function() {
                    i.announcementService.draw(o.AnnouncementType.FATIGUE, t, 30)
                }, 18e5)) : 1 === e && (this.intervalTimer && clearInterval(this.intervalTimer), this.intervalTimer = setInterval(function() {
                    i.announcementService.draw(o.AnnouncementType.FATIGUE, t, 30)
                }, 9e5)), this.announcementService.draw(o.AnnouncementType.FATIGUE, t, 30))
            }, t.prototype.getLeaderboardUri = function() {
                return "https://datamore.qq.com/m/DataMore/act/nfsolnew/page/paihangbang.html"
            }, t.prototype.getPlayerInfoUri = function() {
                return "https://datamore.qq.com/m/DataMore/act/nfsolnew/page/userinfo.html"
            }, t.prototype.getChargeUrl = function() {
                var t = this;
                return this.cashChargeUrl ? c.resolve(this.externalService.beGetSSOShopUri(this.cashChargeUrl)) : d.request("GET", "tc/chargeurl").then(function(e) {
                    return t.cashChargeUrl = e.url, r.debug(">> get chargeUrl", e, ", update cashCharge url as", t.cashChargeUrl), t.externalService.beGetSSOShopUri(t.cashChargeUrl)
                }).catch(function() {
                    return e.prototype.getChargeUrl.call(t)
                })
            }, t
        }(a.Publisher);
    t.Tencent = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(301),
        o = i(3),
        a = i(573),
        s = i(175),
        c = i(5),
        d = i(7),
        l = i(10),
        u = function(e) {
            function t(t, i, n, r, o) {
                var a = e.call(this) || this;
                return a.externalService = t, a.announcementService = i, a.pushService = n, a.popupService = r, a.serverTimeService = o, a.cookieInit = !1, a
            }
            return n.__extends(t, e), t.prototype.init = function() {
                this.pushService.on("msg", this.onMessage.bind(this)), this.showAbsorbedMessage()
            }, t.prototype.onMessage = function(e) {
                switch (e.cmd) {
                    case "guss.shutdown":
                        var t = e.opts,
                            i = t.type,
                            n = t.time;
                        d.debug(">> shutdown time :: ", n), this.checkShutdown(i, n)
                }
            }, t.prototype.checkShutdown = function(e, t) {
                var i = this,
                    n = function() {
                        return c(i.serverTimeService.time)
                    },
                    r = function() {
                        return c(t, "YYMMDDHHmm")
                    },
                    o = [30, 10, 5, 1],
                    a = c.duration(r().diff(n())).asMinutes(),
                    s = o.filter(function(e) {
                        return e < a
                    }),
                    d = function(e, t) {
                        if (s.length > 0) {
                            var o = e.shift(),
                                a = r().subtract(o, "minutes");
                            setTimeout(function() {
                                i.showShutdownNotice(t, o), d(e, t)
                            }, a.diff(n()))
                        }
                    };
                d(s, e)
            }, t.prototype.showShutdownNotice = function(e, t) {
                var i = function() {
                        switch (t) {
                            case 30:
                            case 10:
                            case 5:
                                return "청소년보호법에 의하여 만 16세 미만 플레이어분들의 게임 이용이 앞으로 " + t + "분 후에 제한 됩니다. 안전하게 게임을 종료해주시기 바랍니다.";
                            case 1:
                                return "청소년보호법에 의하여 만 16세 미만 플레이어분들의 게임 이용이 곧 제한 됩니다. 안전하게 게임을 종료해주시기 바랍니다."
                        }
                    },
                    n = function() {
                        switch (t) {
                            case 30:
                            case 10:
                            case 5:
                                return "‘자녀사랑 시간 지키미’ 설정 시간에 따라 게임 이용이 앞으로 " + t + "분 후 제한될 예정입니다. 안전하게 게임을 종료해주시기 바랍니다.";
                            case 1:
                                return "‘자녀사랑 시간 지키미’ 설정 시간에 따라 게임 이용이 곧 제한될 예정입니다. 안전하게 게임을 종료해주시기 바랍니다."
                        }
                    },
                    r = "forced" === e ? i : n;
                this.announcementService.draw(s.AnnouncementType.NOTICE, r(), 30)
            }, t.prototype.getDisconnectReason = function(e) {
                var t = [{
                        code: "login-1",
                        text: "PC방 프리미엄 적용 대상이 아닙니다. PC방 관리자분께 문의바랍니다."
                    }, {
                        code: "login-2",
                        text: "IP당 허용 접속자 수가 초과 되었습니다. 이용중인 PC방 담당자에게 문의해 주시기 바랍니다."
                    }, {
                        code: "login-5",
                        text: "ID당 허용 접속자 수가 초과 되었습니다. 이용중인 PC방 담당자에게 문의해 주시기 바랍니다."
                    }, {
                        code: "login-27",
                        text: "접속이 차단된 PC입니다. 넥슨 PC방 고객센터로 문의바랍니다."
                    }, {
                        code: "login-28",
                        text: "접속이 차단된 PC입니다. 넥슨 PC방 고객센터로 문의바랍니다."
                    }, {
                        code: "login-61",
                        text: "PC방 사용자가 급증하여 프리미엄 적용이 일시적으로 실패하였습니다. PC방인 경우 다시 접속해 주세요."
                    }, {
                        code: "terminate-2",
                        text: "IP당 허용 접속자 수가 초과 되었습니다. 이용중인 PC방 담당자에게 문의해 주시기 바랍니다."
                    }, {
                        code: "terminate-17",
                        text: "넥슨 PC방 정량제 시간이 만료되어 게임이 종료 됩니다. 이용중인 PC방 담당자에게 문의해 주시기 바랍니다."
                    }, {
                        code: "shutdown-1",
                        text: "나이 정보를 확인 중 오류가 발생하였습니다. 잠시 후 다시 로그인하여 주십시오."
                    }, {
                        code: "shutdown-2",
                        text: "실명인증을 받지 않은 회원이거나 넥슨닷컴 회원이 아닙니다."
                    }, {
                        code: "shutdown-3",
                        text: "오늘의 플레이 시간이 종료 되었습니다.\n청소년보호법 제 23조 3에 따라 밤 12시부터 오전 6시까지 본 게임을 이용하실 수 없습니다."
                    }, {
                        code: "shutdown-4",
                        text: "‘자녀사랑 시간 지키미’ 설정 시간에 따라 오늘의 플레이 시간이 종료 되었습니다."
                    }, {
                        code: "shutdown-99",
                        text: "게임 이용이 차단됩니다."
                    }],
                    i = _.find(t, function(t) {
                        return t.code === e
                    });
                return i && i.text
            }, t.prototype.showAbsorbedMessage = function() {
                var e = this,
                    t = 0;
                setInterval(function() {
                    ++t;
                    var i = "게임 이용 시간이 " + t + "시간 경과되었습니다. 과도한 게임 이용은 정상적인 일상생활에 지장을 줄 수 있습니다.";
                    e.announcementService.draw(s.AnnouncementType.NOTICE, i, 30)
                }, 36e5)
            }, t.prototype.initIngameWebViewCookies = function(e) {
                if (!this.cookieInit) {
                    var t = o.store.getState().player.id,
                        i = "roleid=" + t + "&loginkey=" + e.token;
                    this.externalService.beSetTrustedCookie("EGCIG", i, "needforspeed-edge.nexon.com"), this.cookieInit = !0
                }
            }, t.prototype.hasBanWord = function(e) {
                return e = e.toLowerCase(), _.some(a.BanWords.caseInsensitive, function(t) {
                    return e.indexOf(t) > -1
                })
            }, t.prototype.matchBanWords = function(e) {
                return e = e.toLowerCase(), _.filter(a.BanWords.caseInsensitive, function(t) {
                    return e.indexOf(t) > -1
                })
            }, t.prototype.getLeaderboardUri = function() {
                return "https://needforspeed-edge.nexon.com/wgame/gc?t=leaderboard"
            }, t.prototype.getPlayerInfoUri = function() {
                return "https://needforspeed-edge.nexon.com/wgame/gc?t=player"
            }, t.prototype.notifyLoginStatus = function(e) {
                this.externalService.beNexonStageLogStatus(e)
            }, t.prototype.notifyLoginErrorStatus = function(e) {
                void 0 === this.lastLoginError && this.externalService.beNexonErrorLogStatus(this.lastLoginError = e)
            }, t.prototype.openChargeWindow = function(e, t, i, n) {
                this.externalService.beOpenNewBrowserWindowWithURL(e), this.popupService.draw("ConfirmPopup", {
                    title: "SHOP_POPUP_CASHCHARGE_REFRESH_TITLE",
                    description: "SHOP_POPUP_CASHCHARGE_REFRESH_DESC",
                    confirm: n
                })
            }, t.prototype.cancelChargeWindow = function() {}, t.prototype.getChargeUrl = function() {
                var t = this,
                    i = o.store.getState().player.id;
                return l.request("GET", "nexon/cash/" + i + "/chargeurl").then(function(e) {
                    return e.url
                }).catch(function() {
                    return e.prototype.getChargeUrl.call(t)
                })
            }, t
        }(r.Publisher);
    t.Nexon = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(132),
        a = i(585),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.componentWillMount = function() {
                $(o.findDOMNode(this))
            }, t.prototype.componentDidMount = function() {
                this.focusButton()
            }, t.prototype.focusButton = function() {
                var e = document.getElementsByClassName(this.props.className + "-btn"),
                    t = e.item(0);
                t && t.focus()
            }, t.prototype.onButtonClick = function(e, t, i) {
                t && t(e), i && !0 !== i || a.hide()
            }, t.prototype.render = function() {
                var e = this,
                    t = this.props.orderOpts.map(function(t) {
                        return r.createElement("button", {
                            className: e.props.className + "-btn",
                            style: t.style,
                            key: t.orderName,
                            name: t.orderName,
                            onClick: e.onButtonClick.bind(e, t.data, t.callback, t.hideContextAfterClick)
                        }, r.createElement("div", {
                            className: e.props.className + "-btn-text"
                        }, t.orderName))
                    });
                return this.props.style.top + this.props.style.height > document.body.clientHeight && (this.props.style.top -= this.props.style.height + 20), r.createElement("div", {
                    className: this.props.className,
                    id: "id-" + this.props.className,
                    style: this.props.style
                }, t)
            }, t
        }(r.Component);
    t.ContextMenu = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(3),
        r = i(40),
        o = function() {
            function e() {
                this.messageFilters = {}
            }
            return e.prototype.registerFilter = function(e, t, i) {
                void 0 === i && (i = !1), this.messageFilters[e] && !i || (this.messageFilters[e] = {
                    filter: t.filter,
                    enable: t.enable,
                    selected: t.selected
                })
            }, e.prototype.unRegisterFilter = function(e) {
                delete this.messageFilters[e]
            }, e.prototype.enableFilter = function(e, t) {
                this.messageFilters[e] && (this.messageFilters[e].enable = t)
            }, e.prototype.registerFilters = function(e) {
                var t = this;
                _.forEach(e, function(e) {
                    t.registerFilter(e.key, e.filterState, e.override)
                })
            }, e.prototype.unRegisterFilters = function(e) {
                var t = this;
                _.forEach(e, function(e) {
                    delete t.messageFilters[e]
                })
            }, e.prototype.toggleFilterMenuItem = function(e, t) {
                this.messageFilters[e] && (this.messageFilters[e].selected = t)
            }, e.prototype.resetAllFilters = function(e) {
                _.forEach(this.messageFilters, function(t, i) {
                    t.enable = !1;
                    var o = !1;
                    e.forEach(function(e) {
                        e === i && (o = !0)
                    }), t.selected = o, n.store.dispatch(r.enableFilterMenuItem(i, !1)), n.store.dispatch(r.toggleFilterMenuItem(i, o))
                })
            }, e.prototype.isPassed = function(e) {
                var t = !1;
                return _.forEach(this.messageFilters, function(i) {
                    t = !i.selected && i.filter.isSuitable(e) || t
                }), !t
            }, e.prototype.applyFilter = function(e) {
                var t = this,
                    i = [];
                return _.forEach(e, function(e) {
                    t.isPassed(e) && i.push(e)
                }), i
            }, e
        }();
    t.ChatFilterManager = o, t.default = o
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            isSuitable: function(t) {
                return !(!t.source || t.source !== e)
            }
        }
    }

    function r(e) {
        return {
            isSuitable: function(t) {
                var i = !1;
                return e.forEach(function(e) {
                    i = e.id === t.playerId || "" === e.id && e.name == t.playerName || i
                }), i
            }
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.makeSourceFilter = n, t.blocklistFilter = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(34),
        r = function() {
            function e() {
                this.systemMsgList = {}, this.init()
            }
            return e.prototype.init = function() {
                this.systemMsgList[1] = "CHATTING_CHANNEL_UNAVAILABLE", this.systemMsgList[2] = "CHATTING_CHANNEL_DISABLE", this.systemMsgList[3] = "CHATTING_CLAN_UNAVAILABLE", this.systemMsgList[4] = "CHATTING_MATCH_DISABLE", this.systemMsgList[5] = "CHATTING_ROOM_DISABLE", this.systemMsgList[6] = "CHATTING_LOBBY_DISABLE", this.systemMsgList[7] = "CHATTING_WHISPER_UNAVAILABLE", this.systemMsgList[8] = "CHATTING_MESSAGE_NOT_VALIDATION", this.systemMsgList[9] = "CHATTING_BAN_NOTIFICATION", this.systemMsgList[15] = "CHATTING_BANNED_PLAYER", this.systemMsgList[100] = "CHATTING_CHANNEL_IGNORE", this.systemMsgList[101] = "CHATTING_CHANNEL_UNIGNORE", this.systemMsgList[102] = "CHATTING_CHANNEL_CHANGED", this.systemMsgList[103] = "CHATTING_FRIEND_REQUESTED", this.systemMsgList[104] = "CHATTING_CLAN_COMMAND_MEMBER", this.systemMsgList[201] = "CHATTING_FRIEND_REQUESTED", this.systemMsgList[200] = "CHATTING_FRIEND_REGISTEREDFRIEND", this.systemMsgList[202] = "CHATTING_CLAN_COMMAND_NOCLAN", this.systemMsgList[203] = "CHATTING_CLAN_COMMAND_FALSETARGET", this.systemMsgList[204] = "CHATTING_IGNORE_HIMSELF"
            }, e.prototype.getSystemMsgByCode = function(e, t) {
                var i = n.getInjector().get("$filter");
                return t ? i("template")(t, this.systemMsgList[e]) : i("translate")(this.systemMsgList[e])
            }, e
        }();
    t.default = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(38),
        r = function() {
            function e() {
                this.allowedSources = [], this.history = [], this.sourceList = null, this.listSize = 0, this.maximumRecord = Number.MAX_VALUE
            }
            return Object.defineProperty(e.prototype, "maximum", {
                set: function(e) {
                    this.maximumRecord = e >= 0 ? e : 0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "allow", {
                set: function(e) {
                    this.allowedSources = [], e && (this.allowedSources = e)
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.resetSourceList = function() {
                var e = this;
                this.sourceList = null;
                var t = [];
                if (this.allowedSources.length > 0 && this.history.forEach(function(i) {
                        for (var n = 0; n < e.allowedSources.length; ++n)
                            if (e.allowedSources[n] == i.sourceType) {
                                t.push(i);
                                break
                            }
                    }), 0 != t.length) {
                    _.isEqual(t[0], t[t.length - 1]) && t.shift(), this.listSize = t.length, t.push({});
                    var i = null,
                        n = null;
                    t.forEach(function(e) {
                        var t = {
                            source: e,
                            prev: null,
                            next: null
                        };
                        i || (i = t), n && (n.next = t, t.prev = n), n = t
                    }), i.prev = n, n.next = i, this.sourceList = n
                }
            }, e.prototype.add = function(e) {
                null != e && (0 != this.history.length && 0 != _.isEqual(e, _.last(this.history)) || this.history.push(e), this.history.length > this.maximumRecord && this.history.shift(), this.resetSourceList())
            }, e.prototype.getRecord = function(e, t) {
                switch (this.listSize) {
                    case 0:
                        return null;
                    case 1:
                        return _.isEqual(this.sourceList.source, t) ? null : this.sourceList.source;
                    default:
                        for (var i = 0; i < this.listSize; ++i)
                            if (this.sourceList = e ? this.sourceList.prev : this.sourceList.next, this.sourceList.source.sourceType && !_.isEqual(this.sourceList.source, t)) return this.sourceList.source;
                        return null
                }
            }, e.prototype.previous = function(e) {
                return this.getRecord(!0, e)
            }, e.prototype.next = function(e) {
                return this.getRecord(!1, e)
            }, e.prototype.lastWhisper = function() {
                for (var e = this.history.length - 1; e >= 0; --e) {
                    var t = this.history[e];
                    if (t.sourceType == n.ChatSourceType.Whisper) return t
                }
            }, e
        }();
    t.default = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n;
    ! function(e) {
        e[e.TimeLimit = 1] = "TimeLimit", e[e.TriesInTimeLimit = 2] = "TriesInTimeLimit"
    }(n || (n = {}));
    var r = function() {
        function e() {
            this.events = {}
        }
        return e.prototype.registerTriesInTimeLimitEvent = function(e, t, i, r, o) {
            this.hasEvent(e) || (this.events[e] = {
                type: n.TriesInTimeLimit,
                limitTestSuccessCallback: o,
                limitTestOverCallback: r,
                name: e,
                timestamps: [],
                triesLimit: t,
                timeLimit: i
            })
        }, e.prototype.registerTimeLimitEvent = function(e, t, i, r) {
            this.hasEvent(e) || (this.events[e] = {
                type: n.TimeLimit,
                limitTestSuccessCallback: r,
                limitTestOverCallback: i,
                name: e,
                timerId: null,
                timeLimit: t
            })
        }, e.prototype.limit = function(e) {
            var t = this.events[e];
            if (t && t.type) switch (t.type) {
                case n.TimeLimit:
                    this.onTimeLimit(t);
                    break;
                case n.TriesInTimeLimit:
                    this.onTriesInTimeLimit(t)
            }
        }, e.prototype.hasEvent = function(e) {
            var t = this.events[e];
            return null !== t && void 0 !== t
        }, e.prototype.onTriesInTimeLimit = function(e) {
            var t = Date.now();
            if (e.timestamps.push(t), e.timestamps.length > e.triesLimit) {
                return void(t - e.timestamps[0] > e.timeLimit ? e.timestamps.pop() : (e.timestamps = [], e.limitTestSuccessCallback && e.limitTestSuccessCallback()))
            }
        }, e.prototype.onTimeLimit = function(e) {
            var t = this;
            if (e.timerId && e.startTimestamp) {
                var i = Date.now(),
                    n = i - e.startTimestamp;
                return void(n > e.timeLimit ? this.resetTimeLimit(e) : e.limitTestSuccessCallback && e.limitTestSuccessCallback(n))
            }
            e.startTimestamp = Date.now(), e.timerId = setTimeout(function() {
                e.limitTestOverCallback && e.limitTestOverCallback(), t.resetTimeLimit(e)
            }, e.timeLimit, null)
        }, e.prototype.resetTimeLimit = function(e) {
            e.timerId = null, e.startTimestamp = void 0
        }, e
    }();
    t.EventLimitHelper = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(64),
        r = i(4),
        o = i(1142),
        a = i(29),
        s = function() {
            function e() {
                this._configs = {}
            }
            return e.prototype.register = function(e) {
                var t = this._configs[e.id];
                if (t) log.warn("WorldChatCommandService: already register " + e.id);
                else {
                    t = {
                        cmds: [e.cmd].concat(e.auxcmds),
                        handler: null,
                        keyCodes: e.executeKeys
                    };
                    var i = o[e.handler];
                    if (i) {
                        t.handler = function() {
                            return function(e) {
                                return (new i).run(e)
                            }
                        }(), this._configs[e.id] = t
                    } else log.error("WorldChatCommandService: " + e.handler + " not found!")
                }
            }, e.prototype.deregisterAll = function() {
                delete this._configs, this._configs = {}
            }, e.prototype.execute = function(e, t) {
                if (null == e) return [e];
                if (t === a.KeyboardMap.getKeyCode("SPACE")) {
                    if (" " !== e.charAt(e.length - 1)) return [e]
                }
                var i = e.trim();
                if (0 === i.length) return [e];
                var r = i.split(" "),
                    o = r[0].toLowerCase(),
                    s = null;
                for (var c in this._configs) {
                    var d = this._configs[c];
                    if (d.cmds.indexOf(o) >= 0 && d.keyCodes.indexOf(t) >= 0) {
                        s = d.handler;
                        break
                    }
                }
                if (s) {
                    r.shift();
                    var l = s(r);
                    return l.result === n.CmdResult.Success ? l.data ? l.data : [] : [e]
                }
                return [e]
            }, e
        }();
    t.default = s, angular.module("edge.components").factory("worldChatCommandService", r.default.generateService(s))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(1143);
    t.JoinChannel = n.JoinChannel;
    var r = i(1144);
    t.IgnorePlayer = r.IgnorePlayer;
    var o = i(1145);
    t.ChannelChat = o.ChannelChat;
    var a = i(1146);
    t.WhisperChat = a.WhisperChat;
    var s = i(1147);
    t.ClanChat = s.ClanChat;
    var c = i(1148);
    t.RaceChat = c.RaceChat;
    var d = i(1149);
    t.Broadcast = d.Broadcast;
    var l = i(1150);
    t.ClanMember = l.ClanMember;
    var u = i(1151);
    t.RecentWhisper = u.RecentWhisper;
    var p = i(1152);
    t.FakeClanMember = p.FakeClanMember;
    var h = i(1153);
    t.InvitePlayer = h.InvitePlayer;
    var f = i(1154);
    t.HelpList = f.HelpList
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                return e.length < 1 || e[0].length <= 0 ? {
                    result: r.CmdResult.Failed,
                    error: "Missing channel code!"
                } : (this.getInjectorByName("worldChatService").joinChannel(e[0]), {
                    result: r.CmdResult.Success
                })
            }, t
        }(r.BaseCmd);
    t.JoinChannel = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                return e.length < 1 || e[0].length <= 0 ? {
                    result: r.CmdResult.Failed,
                    error: "Missing Player ID!"
                } : (this.getInjectorByName("worldChatService").onSlashCommandBlockWithPlayerName(e[0]), {
                    result: r.CmdResult.Success
                })
            }, t
        }(r.BaseCmd);
    t.IgnorePlayer = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = i(38),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                return this.getInjectorByName("worldChatService").setCurrentSource(o.ChatSourceType.Channel), {
                    result: r.CmdResult.Success
                }
            }, t
        }(r.BaseCmd);
    t.ChannelChat = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                if (e.length < 1 || e[0].length <= 0) return {
                    result: r.CmdResult.Failed,
                    error: "Missing Player ID!"
                };
                var t = this.getInjectorByName("worldChatService"),
                    i = e[0];
                return t.onSlashCommandWhisperByName(i), {
                    result: r.CmdResult.Success
                }
            }, t
        }(r.BaseCmd);
    t.WhisperChat = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = i(38),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                return this.getInjectorByName("worldChatService").setCurrentSource(o.ChatSourceType.Clan), {
                    result: r.CmdResult.Success
                }
            }, t
        }(r.BaseCmd);
    t.ClanChat = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = i(38),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                return this.getInjectorByName("worldChatService").setCurrentSource(o.ChatSourceType.Race) ? {
                    result: r.CmdResult.Success
                } : {
                    result: r.CmdResult.Failed,
                    error: "Switch to race chat failed!"
                }
            }, t
        }(r.BaseCmd);
    t.RaceChat = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                return this.getInjectorByName("worldChatService").onSlashCommandBroadCast(), {
                    result: r.CmdResult.Success
                }
            }, t
        }(r.BaseCmd);
    t.Broadcast = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                return this.getInjectorByName("clanService").enableClan ? (this.getInjectorByName("worldChatService").onSlashCommandShowClanMemebers(), {
                    result: r.CmdResult.Success
                }) : {
                    result: r.CmdResult.Failed
                }
            }, t
        }(r.BaseCmd);
    t.ClanMember = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = i(38),
        a = i(3),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                var t = this.getInjectorByName("worldChatService"),
                    i = a.store.getState().worldChat.recentWhisper;
                return i && t.setCurrentSource(o.ChatSourceType.Whisper, i.parameters), {
                    result: r.CmdResult.Success
                }
            }, t
        }(r.BaseCmd);
    t.RecentWhisper = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                return this.getInjectorByName("clanService").enableClan ? (this.getInjectorByName("worldChatService").onSlashCommandShowClanMemebers(!0), {
                    result: r.CmdResult.Success
                }) : {
                    result: r.CmdResult.Failed
                }
            }, t
        }(r.BaseCmd);
    t.FakeClanMember = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                return e.length < 1 || e[0].length <= 0 ? {
                    result: r.CmdResult.Failed,
                    error: "Missing Player Name!"
                } : (this.getInjectorByName("worldChatService").onSlashCommandInvitePlayer(e[0]), {
                    result: r.CmdResult.Success
                })
            }, t
        }(r.BaseCmd);
    t.InvitePlayer = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(64),
        o = i(3),
        a = i(34),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.run = function(e) {
                var t = o.store.getState().worldChat,
                    i = t.tabStates,
                    n = null;
                for (var s in i) {
                    var c = i[s];
                    if (c && c.isActivated) {
                        n = c;
                        break
                    }
                }
                if (!n) return {
                    result: r.CmdResult.Failed,
                    error: "No Active tab!"
                };
                var d = a.getInjector().get("$filter"),
                    l = d("translate"),
                    u = [];
                return n.commands.forEach(function(e) {
                    if (e.descriptionID && e.descriptionID.length > 0) {
                        var t = e.cmd,
                            i = l(e.descriptionID + "_2");
                        u.push(t + " " + i)
                    }
                }), this.getInjectorByName("worldChatService").onSlashCommandHelp(u), {
                    result: r.CmdResult.Success
                }
            }, t
        }(r.BaseCmd);
    t.HelpList = s
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return O.request("GET", "numberplate/" + e + "/selectlists")
    }

    function r(e, t, i) {
        return O.request("POST", "numberplate/players/" + t + "/platenumbers/" + i + "/@select", {
            selectType: e
        })
    }

    function o(e) {
        return O.request("GET", "numberplate/players/" + e + "/slots")
    }

    function a(e) {
        return O.request("GET", "numberplate/search?keyword=" + e)
    }

    function s(e, t) {
        return O.request("POST", "numberplate/players/" + e + "/platenumbers/" + t + "/@purchase")
    }

    function c(e, t) {
        return O.request("POST", "numberplate/players/" + t + "/@lottery", {
            ticketCode: e
        })
    }

    function d(e, t) {
        return O.request("POST", "numberplate/players/" + t + "/@exchange", {
            plateNumbers: e
        })
    }

    function l(e, t) {
        return O.request("DELETE", "numberplate/players/" + e + "/platenumbers/" + t)
    }

    function u(e, t) {
        return O.request("POST", "numberplate/players/" + t + "/@expandslot", {
            size: e
        })
    }

    function p(e) {
        return O.request("GET", "numberplate/playerinfo/" + e)
    }

    function h(e, t, i) {
        return O.request("PUT", "numberplate/playerinfo/" + i, {
            prefix: e,
            selected: t
        })
    }

    function f(e) {
        return O.request("GET", "numberplate/" + e + "/items")
    }

    function v() {
        return O.request("GET", "numberplate/templatecodes")
    }

    function m(e) {
        var t = e.map(function(e) {
            return "pids[]=" + e
        }).join("&");
        return O.request("GET", "numberplate/selectednumberplates?" + t)
    }

    function g() {
        return O.request("GET", "numberplate/defaultnumberplate")
    }

    function y(e, t, i, n, r) {
        return O.request("GET", "admin/numberplate/search?pid=" + e + "&templatecode=" + t + "&platenumber=" + i + "&offset=" + n + "&limit=" + r)
    }

    function S(e) {
        return O.request("POST", "admin/numberplate", {
            numberPlates: e
        })
    }

    function _(e) {
        return O.request("PUT", "admin/numberplate", {
            numberPlates: e
        })
    }

    function E(e) {
        return O.request("POST", "admin/numberplate/@remove", {
            numberPlates: e
        })
    }

    function T(e) {
        return O.request("POST", "admin/numberplate/@import", {
            file: e
        })
    }

    function C(e) {
        return O.request("POST", "admin/numberplate/defaultprefix", {
            prefix: e
        })
    }

    function b() {
        return O.request("GET", "admin/numberplate/templatecodes")
    }

    function P() {
        return O.request("POST", "admin/numberplate/templatecode/@import")
    }

    function I(e) {
        return O.request("POST", "admin/numberplate/templatecode", {
            templateCodes: e
        })
    }

    function M(e, t) {
        return O.request("PUT", "admin/numberplate/templatecodes/" + t, {
            templateCode: e
        })
    }

    function A(e) {
        return O.request("DELETE", "admin/numberplate/templatecodes/" + e)
    }

    function N(e) {
        return O.request("PUT", "numberplate/currenttime", {
            currentTime: e
        })
    }

    function R() {
        return O.request("GET", "numberplate/currenttime")
    }

    function L(e) {
        return O.request("PUT", "numberplate/probability", {
            probability: e
        })
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var O = i(10);
    t.get_number_plate_select_list = n, t.number_plate_select_ret = r, t.get_number_plate_slots = o, t.search_number_plate = a, t.purchase_number_plate = s, t.lottery_number_plate = c, t.exchange_number_plate = d, t.destroy_number_plate = l, t.expand_number_plate_slot = u, t.get_number_plate_player_info = p, t.modify_number_plate_player_info = h, t.get_number_plate_items = f, t.get_number_plate_item_template_code = v, t.get_player_selected_number_plate = m, t.get_default_number_plate = g, t.admin_search_number_plate = y, t.admin_create_number_plate = S, t.admin_modify_number_plate = _, t.admin_remove_number_plate = E, t.admin_import_number_plate = T, t.admin_set_number_plate_default_prefix = C, t.admin_get_template_codes = b, t.admin_import_template_code = P, t.admin_create_template_code = I, t.admin_modify_template_code = M, t.admin_remove_template_code = A, t.admin_dev_set_current_time = N, t.admin_dev_get_current_time = R, t.admin_dev_set_probability = L
}, function(e, t, i) {
    "use strict";

    function n() {
        return y.request("GET", "auctionhouse/extrainfo")
    }

    function r() {
        return y.request("GET", "auctionhouse/auctions")
    }

    function o(e) {
        return y.request("GET", "auctionhouse/auctions/" + e + "/biddings")
    }

    function a(e) {
        return y.request("GET", "auctionhouse/players/" + e + "/biddings")
    }

    function s(e, t) {
        return y.request("POST", "auctionhouse/players/" + e + "/auctions/" + t + "/mileage")
    }

    function c(e) {
        return y.request("POST", "auctionhouse/players/" + e + "/mileage")
    }

    function d(e, t, i) {
        return y.request("POST", "auctionhouse/auctions/" + t + "/players/" + e + "/@bid", {
            price: i
        })
    }

    function l(e, t) {
        return y.request("PUT", "auctionhouse/auctions/" + t + "/players/" + e + "/@receive")
    }

    function u(e, t) {
        return y.request("PUT", "auctionhouse/players/" + e + "/auctions/" + t)
    }

    function p(e, t) {
        return y.request("DELETE", "auctionhouse/players/" + e + "/auctions/" + t)
    }

    function h() {
        return y.request("POST", "auctionhouse/pushevent/@subscribe")
    }

    function f() {
        return y.request("POST", "auctionhouse/pushevent/@unsubscribe")
    }

    function v(e) {
        return y.request("GET", "auctionhouse/players/" + e + "/notification")
    }

    function m(e) {
        return y.request("POST", "auctionhouse/players/" + e + "/notification/@clear")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var g = i(4),
        y = i(10),
        S = i(3),
        E = i(1157),
        T = i(93),
        C = function() {
            function e(e, t, i, n, r, o) {
                this.$filter = e, this.staticdataLoaderService = t, this.pushService = i, this.playerSnippetService = n, this.featureSetService = r, this.notifierService = o, this.biddingsCache = [], this.maximumBiddings = 1, this.unsubscribeCallback = void 0, this.unsubscribeTrigger = !1, this.unsubscribeTimeout = 1e3, this.updateDuration = 1, this._init = !1, this.cleanUp = [];
                var a = Number(t.auctionDataManager.getConfig("Auction_Notification_Update_Time")),
                    s = Number(t.auctionDataManager.getConfig("Auction_Notification_Max_Count"));
                isNaN(a) || (this.updateDuration = 1e3 * a), isNaN(s) || (this.maximumBiddings = s)
            }
            return e.prototype.destroy = function() {
                this.cleanUp.forEach(function(e) {
                    return e()
                }), this.cleanUp = []
            }, e.prototype.init = function() {
                this._init || (this._enableAuction = this.featureSetService.isEnabled("AUCTION"), this._enableAuction && (this.GetNotification(this.SubscribeNotifications.bind(this)), this._init = !0))
            }, e.prototype.SubscribeNotifications = function() {
                this.SubscribeRejectBidding(), this.SubscribeAuctionItemFinish()
            }, e.prototype.NotifyRejectBidding = function(e) {
                var t = this.$filter("translate")("SYSTEMMESSAGE_AUCTION_FAILURE_TITLE"),
                    i = this.$filter("template")({
                        product: e
                    }, "SYSTEMMESSAGE_AUCTION_FAILURE");
                this.notifierService.addLast(t, i, "root.menu.TradePlayerAuction")
            }, e.prototype.NotifyAuctionItemFinish = function(e) {
                var t = this.$filter("translate")("SYSTEMMESSAGE_AUCTION_SUCCESS_TITLE"),
                    i = this.$filter("template")({
                        product: e
                    }, "SYSTEMMESSAGE_AUCTION_SUCCESS");
                this.notifierService.addLast(t, i, "root.menu.TradePlayerAuction")
            }, e.prototype.fetchAdvertisements = function() {
                var e = this;
                n().then(function(t) {
                    var i = [];
                    t.banners.forEach(function(t) {
                        i.push(e.$filter("cdn_auction_banner")(t))
                    }), T.updateBannersUrl(i)
                }).catch(function(t) {
                    e.onErrorCatched(t)
                })
            }, e.prototype.fetchAuctionItems = function(e, t) {
                var i = this;
                e && e.length > 0 ? E.get_auction_items_by_ids(e).then(function(e) {
                    var i = e,
                        n = S.store.getState().auction.autionItems,
                        r = [];
                    i.forEach(function(e) {
                        var t = n[e.id],
                            i = !!t && t.isFavorite,
                            o = _.assign({
                                isFavorite: i
                            }, e);
                        o.startTime = new Date(e.startTime.toString()), o.closingTime = new Date(e.closingTime.toString()), o.finishTime = new Date(e.finishTime.toString()), r.push(o)
                    }), T.updateAuctionItems(r), t && t()
                }).catch(function(e) {
                    i.onErrorCatched(e)
                }) : r().then(function(e) {
                    var i = e.items,
                        n = {};
                    i.forEach(function(t) {
                        var i = _.indexOf(e.favoriteIds, t.id) >= 0,
                            r = _.assign({
                                isFavorite: i
                            }, t);
                        r.startTime = new Date(t.startTime.toString()), r.closingTime = new Date(t.closingTime.toString()), r.finishTime = new Date(t.finishTime.toString()), n[r.id] = r
                    }), T.updateAllAuctionItems(n), t && t()
                }).catch(function(e) {
                    i.onErrorCatched(e)
                })
            }, e.prototype.fetchBiddingsWithAuctionItemID = function(e, t) {
                var i = this;
                o(e).then(function(n) {
                    var r = [],
                        o = [];
                    n.forEach(function(e) {
                        r.push(e), o.push(e.pid)
                    }), o.length > 0 ? i.playerSnippetService.fetchSnippets(o).then(function() {
                        _.forEach(r, function(e) {
                            var t = i.playerSnippetService.getSnippet(e.pid);
                            e.playerName = t.name
                        }), T.updateHistoryBiddings(e, r), t && t()
                    }) : (T.updateHistoryBiddings(e, r), t && t())
                }).catch(function(e) {
                    i.onErrorCatched(e)
                })
            }, e.prototype.fetchBiddingsWithPlayerID = function(e, t) {
                var i = this;
                e = e || S.store.getState().player.id, a(e).then(function(e) {
                    var i = [];
                    e.forEach(function(e) {
                        i.push(e)
                    }), T.updateMyBiddings(i), t && t()
                }).catch(function(e) {
                    i.onErrorCatched(e)
                })
            }, e.prototype.SetAuctionItemFavorite = function(e, t) {
                var i = this,
                    n = S.store.getState().player.id;
                (t ? u(n, e) : p(n, e)).then(function() {
                    T.changeAuctionFavorite(e, t)
                }).catch(function(e) {
                    i.onErrorCatched(e)
                })
            }, e.prototype.CollectMileageFromRejectedBidding = function(e, t) {
                var i = this,
                    n = S.store.getState().player.id;
                (_.isEmpty(e) ? c(n) : s(n, e)).then(function(e) {
                    t && t(e)
                }).catch(function(e) {
                    i.onErrorCatched(e)
                })
            }, e.prototype.BidForItemWithPrice = function(e, t, i, n) {
                var r = this;
                d(S.store.getState().player.id, e, t).then(function(t) {
                    var n = t,
                        r = [];
                    r.push(n), r[0].myLastBidding = r[0].bidding, r[0].startTime = new Date(r[0].startTime.toString()), r[0].closingTime = new Date(r[0].closingTime.toString()), r[0].finishTime = new Date(r[0].finishTime.toString());
                    var o = S.store.getState().auction.autionItems,
                        a = o[e],
                        s = !!a && a.isFavorite;
                    r[0].isFavorite = s, T.updateAuctionItems(r), i && i(n)
                }).catch(function(e) {
                    r.onErrorCatched(e), n && n(e)
                })
            }, e.prototype.ReceiveAuctionItem = function(e, t, i) {
                var n = this;
                l(S.store.getState().player.id, e).then(function() {
                    t && t()
                }).catch(function(e) {
                    n.onErrorCatched(e), i && i()
                })
            }, e.prototype.GetNotification = function(e) {
                var t = this;
                v(S.store.getState().player.id).then(function(i) {
                    _.forEach(i.finishedItems, function(e, i) {
                        t.NotifyAuctionItemFinish(e.itemName)
                    }), _.forEach(i.rejectedItems, function(e, i) {
                        t.NotifyRejectBidding(e.itemName)
                    }), t.ClearNotification(), e && e()
                }).catch(function(e) {
                    t.onErrorCatched(e)
                })
            }, e.prototype.ClearNotification = function() {
                var e = this;
                m(S.store.getState().player.id).then(function() {}).catch(function(t) {
                    e.onErrorCatched(t)
                })
            }, e.prototype.SubscribeAuctionNotice = function() {
                var e = this;
                if (this.unsubscribeCallback) return void(this.unsubscribeTrigger = !1);
                this.biddingsCache = [], this.unsubscribeCallback = this.pushService.subscribeResource(/auctionhouse\.bidding\.info/, function(t, i) {
                    var n = i.body.message,
                        r = [];
                    n.forEach(function(t) {
                        e.biddingsCache.push(_.assign({}, t)), r.push(t.pid)
                    }), r.length > 0 && e.playerSnippetService.fetchSnippets(r).then(function() {
                        _.forEach(e.biddingsCache, function(t) {
                            var i = e.playerSnippetService.getSnippet(t.pid);
                            t.playerName = i.name
                        }), e.updateBiddingNotice()
                    })
                }), h()
            }, e.prototype.UnsubscribeAuctionNotice = function() {
                var e = this;
                this.unsubscribeTrigger = !0, setTimeout(function() {
                    e.unsubscribeTrigger && (e.unsubscribeCallback && (e.unsubscribeCallback(), e.unsubscribeCallback = null), f().then(function() {}).catch(function(t) {
                        e.onErrorCatched(t)
                    }), e.unsubscribeTrigger = !1)
                }, this.unsubscribeTimeout)
            }, e.prototype.SubscribeRejectBidding = function() {
                var e = this;
                this.cleanUp.push(this.pushService.subscribeResource(/auctionhouse\.bidding\.rejected/, function(t, i) {
                    var n = i.body.message;
                    e.NotifyRejectBidding(n.itemName), e.ClearNotification()
                }))
            }, e.prototype.SubscribeAuctionItemFinish = function() {
                var e = this;
                this.cleanUp.push(this.pushService.subscribeResource(/auctionhouse\.auction\.finished/, function(t, i) {
                    var n = i.body.message;
                    e.NotifyAuctionItemFinish(n.itemName), e.ClearNotification()
                }))
            }, e.prototype.onErrorCatched = function(e) {}, e.prototype.updateBiddingNotice = function() {
                0 !== this.biddingsCache.length && (T.addBiddings(this.biddingsCache, this.maximumBiddings), this.biddingsCache = [])
            }, e
        }();
    C.$inject = ["$filter", "staticdataLoaderService", "pushService", "playerSnippetService", "featureSetService", "notifierService"], t.default = C, angular.module("edge.components").factory("auctionService", g.default.generateService(C))
}, function(e, t, i) {
    "use strict";

    function n() {
        return w.request("GET", "auctionhouse/extrainfo")
    }

    function r() {
        return w.request("GET", "auctionhouse/auctions")
    }

    function o(e) {
        var t = e.map(function(e) {
            return "ids[]=" + e
        }).join("&");
        return w.request("GET", "auctionhouse/auctions/ids?" + t)
    }

    function a(e) {
        return w.request("GET", "auctionhouse/auctions/" + e + "/biddings")
    }

    function s(e) {
        return w.request("GET", "auctionhouse/players/" + e + "/biddings")
    }

    function c(e, t) {
        return w.request("POST", "auctionhouse/players/" + e + "/auctions/" + t + "/mileage")
    }

    function d(e) {
        return w.request("POST", "auctionhouse/players/" + e + "/mileage")
    }

    function l(e, t, i) {
        return w.request("POST", "auctionhouse/auctions/" + i + "/players/" + t + "/@bid", {
            price: e
        })
    }

    function u(e, t) {
        return w.request("PUT", "auctionhouse/auctions/" + t + "/players/" + e + "/@receive")
    }

    function p(e) {
        return w.request("GET", "auctionhouse/players/" + e + "/auctions")
    }

    function h(e, t) {
        return w.request("PUT", "auctionhouse/players/" + e + "/auctions/" + t)
    }

    function f(e, t) {
        return w.request("DELETE", "auctionhouse/players/" + e + "/auctions/" + t)
    }

    function v() {
        return w.request("POST", "auctionhouse/pushevent/@subscribe")
    }

    function m() {
        return w.request("POST", "auctionhouse/pushevent/@unsubscribe")
    }

    function g(e) {
        return w.request("GET", "auctionhouse/players/" + e + "/notification")
    }

    function y(e) {
        return w.request("POST", "auctionhouse/players/" + e + "/notification/@clear")
    }

    function S() {
        return w.request("GET", "admin/auctionhouse/banners")
    }

    function _(e) {
        return w.request("GET", "admin/auctionhouse/banners/" + e)
    }

    function E(e, t) {
        return w.request("POST", "admin/auctionhouse/banners", {
            cdn: e,
            order: t
        })
    }

    function T(e, t, i) {
        return w.request("PUT", "admin/auctionhouse/banners/" + i, {
            cdn: e,
            order: t
        })
    }

    function C(e) {
        return w.request("DELETE", "admin/auctionhouse/banners/" + e)
    }

    function b() {
        return w.request("GET", "admin/auctionhouse/waitingperiod")
    }

    function P(e) {
        return w.request("GET", "admin/auctionhouse/waitingperiod/" + e)
    }

    function I(e, t, i, n, r, o) {
        return w.request("POST", "admin/auctionhouse/waitingperiod", {
            remainingDay: e,
            remainingHour: t,
            remainingMinute: i,
            waitingDay: n,
            waitingHour: r,
            waitingMinute: o
        })
    }

    function M(e, t, i, n, r, o, a) {
        return w.request("PUT", "admin/auctionhouse/waitingperiod/" + a, {
            remainingDay: e,
            remainingHour: t,
            remainingMinute: i,
            waitingDay: n,
            waitingHour: r,
            waitingMinute: o
        })
    }

    function A(e) {
        return w.request("DELETE", "admin/auctionhouse/waitingperiod/" + e)
    }

    function N(e, t, i, n, r, o, a) {
        return w.request("GET", "admin/auctionhouse/auctions?itemtype=" + e + "&itemcode=" + t + "&starttime=" + i + "&finishtime=" + n + "&price=" + r + "&offset=" + o + "&limit=" + a)
    }

    function R(e) {
        return w.request("GET", "admin/auctionhouse/auctions/" + e)
    }

    function L(e, t, i, n, r, o, a, s, c, d, l, u, p) {
        return w.request("POST", "admin/auctionhouse/auctions", {
            category: e,
            itemType: t,
            itemCode: i,
            instanceCode: n,
            itemCount: r,
            itemName: o,
            itemDesc: a,
            itemIntroduction: s,
            itemImage: c,
            startPrice: d,
            immediatePrice: l,
            startTime: u,
            finishTime: p
        })
    }

    function O(e, t, i, n, r, o, a, s, c, d, l, u, p, h) {
        return w.request("PUT", "admin/auctionhouse/auctions/" + h, {
            category: e,
            itemType: t,
            itemCode: i,
            instanceCode: n,
            itemCount: r,
            itemName: o,
            itemDesc: a,
            itemIntroduction: s,
            itemImage: c,
            startPrice: d,
            immediatePrice: l,
            startTime: u,
            finishTime: p
        })
    }

    function x(e) {
        return w.request("DELETE", "admin/auctionhouse/auctions/" + e)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var w = i(10);
    t.get_auctionhouse_info = n, t.get_all_auction_items_and_favorites = r, t.get_auction_items_by_ids = o, t.get_auction_biddings = a, t.get_player_biddings = s, t.collect_mileage = c, t.collect_all_mileage = d, t.bid = l, t.receive_auction_item = u, t.get_favorites = p, t.add_to_favorites = h, t.delete_from_favorites = f, t.subscribe_push_event = v, t.unsubscribe_push_event = m, t.get_player_notification = g, t.clear_player_notification = y, t.admin_get_all_bannners_info = S, t.admin_get_bannner_by_bannerid = _, t.admin_create_bannner = E, t.admin_modify_bannner = T, t.admin_delete_bannner = C, t.admin_get_all_waiting_period_info = b, t.admin_get_waiting_period_by_id = P, t.admin_create_waiting_period_info = I, t.admin_modify_waiting_period_info = M, t.admin_delete_waiting_period_info = A, t.admin_get_all_auction_items = N, t.admin_get_auction_item_by_id = R, t.admin_create_auction_item = L, t.admin_modify_auction_item = O, t.admin_delete_auction_item = x
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = function() {
            function e(e, t) {
                this.$compile = e, this.prebuildService = t, this.contexts = {}, this.links = {}, this.loading = {}, this.result = {}
            }
            return e.prototype.setContext = function(e, t) {
                this.contexts[e] = t
            }, e.prototype.setLink = function(e, t, i, n) {
                this.links[e] = {
                    scope: t,
                    element: i,
                    fromState: n
                }
            }, e.prototype.clear = function(e) {
                this.loading[e] && delete this.loading[e], this.result[e] && delete this.result[e]
            }, e.prototype.cancel = function(e) {
                this.contexts[e] ? (delete this.contexts[e], delete this.links[e]) : (this.prebuildService.cancel(e), this.clear(e))
            }, e.prototype.purgeIfNotLoaded = function(e) {
                (this.contexts[e] || this.loading[e] && !this.result[e]) && this.cancel(e)
            }, e.prototype.loadView = function(e) {
                var t = this;
                if (this.loading[e]) return this.loading[e];
                var i = (Date.now(), this.contexts[e]),
                    n = this.links[e],
                    r = n.scope,
                    o = n.element,
                    a = n.fromState;
                return delete this.contexts[e], delete this.links[e], this.loading[e] = this.prebuildService.loadView(e, i).then(function() {
                    var i = t.result[e] = t.prebuildService.pop(e),
                        n = i.stage;
                    n.reboot(), r.scene = n, i.binder ? (o.replaceWith(n.htmlElement), i.binder.onStageInitialize(a)) : o.replaceWith(t.$compile(n.htmlElement)(r)), r.$broadcast("handleSceneInitialize", n);
                    var s = r.$on("$destroy", function() {
                        s(), delete r.scene, n.detach(), t.prebuildService.requestDestroy(n), t.clear(e)
                    })
                })
            }, e
        }();
    r.$inject = ["$compile", "prebuildService"], t.LazyLoadService = r, angular.module("edge.components").factory("lazyLoadService", n.default.generateService(r))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(4),
        o = i(10),
        a = i(12),
        s = i(1160),
        c = function() {
            function e(e, t) {
                this.externalService = e, this.staticdataLoaderService = t, this.isDebug = !1, this.debugSteeringItems = Array()
            }
            return Object.defineProperty(e.prototype, "debugSteering", {
                get: function() {
                    return this.isDebug
                },
                set: function(e) {
                    this.isDebug = e
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.bind = function(e) {
                var t = this;
                this.isDebug && this.showDebug(), e.$on("$destroy", function() {
                    t.hideDebug()
                })
            }, e.prototype.showDebug = function() {
                var e = this,
                    t = this.staticdataLoaderService,
                    i = t.steeringAttributeData,
                    r = t.steeringCategoryData,
                    o = _.groupBy(i, "category"),
                    a = $('<div id="steering-debug" style="top: 100px; position:absolute; left:120px">'),
                    c = $("<table>");
                $('<tr>\n        <td><button id="steering-edit">edit</button></td>\n        <td><button id="steering-test">test</button></td>\n       </tr>').appendTo(c), c.appendTo(a), a.appendTo("#edge-ui");
                var d = function(t, i) {
                        var n = o[t];
                        _.each(n, function(t) {
                            var n = t.name;
                            $("#" + i).append('<tr>\n            <td style="background:white;">' + n + '</td>\n            <td><input id="steering-item-' + t.code + '" style="width:50px" value="1"></td>\n            <td><button id="steering-item-' + t.code + '-apply-add")>applyAdd</button></td>\n            <td><button id="steering-item-' + t.code + '-apply-scala")>applyScala</button></td>\n          </tr>'), $("#steering-item-" + t.code + "-apply-add").on("click", function() {
                                var i = $("#steering-item-" + t.code).val();
                                e.applySteeringTuningItem(t.code, s.SteeringModificationType.Addition, Number(i))
                            }), $("#steering-item-" + t.code + "-apply-scala").on("click", function() {
                                var i = $("#steering-item-" + t.code).val();
                                e.applySteeringTuningItem(t.code, s.SteeringModificationType.Scalar, Number(i))
                            })
                        })
                    },
                    l = function(e) {
                        $("#steering-items").empty(), $("#steering-items").append("<table id =steering-table-category-" + e + "><tr><td>category: " + e + "</td></tr></table>"), d(e, "steering-table-category-" + e)
                    },
                    u = $("<tr></tr>");
                _.each(r, function(e) {
                    u.append('<td><button id="steering-category-' + e.code + '">' + e.code + "</button></td>")
                }), u.appendTo(c), $('<tr id="steering-items"></tr>').appendTo(c), _.each(r, function(e) {
                    $("#steering-category-" + e.code).on("click", function() {
                        return l(e.code)
                    })
                }), $("#steering-edit").on("click", function() {
                    e.externalService.beSetKeyboardEnabled(!0)
                }), $("#steering-test").on("click", function() {
                    e.externalService.beSetKeyboardEnabled(!1)
                }), n.debug("steering>> show debug items")
            }, e.prototype.hideDebug = function() {
                $("#steering-debug").remove(), n.debug("steering>> hide debug items")
            }, e.prototype.updateSteering = function(e, t) {
                var i = _.map(e, function(e) {
                    return {
                        code: e.category,
                        val: e.current
                    }
                });
                return o.request("PUT", "vehicles/" + t + "/steering", {
                    steering: i
                })
            }, e.prototype.applySteeringTuningItem = function(e, t, i) {
                var r = {
                    attr: e,
                    type: t,
                    value: i
                };
                n.debug("steering>> applySteeringTuningItem item:", r), this.externalService.beSetSteeringTuning([r])
            }, e.prototype.applySteeringCategoryItems = function(e) {
                n.debug("steering>> applySteeringTuningItems items:", e), this.externalService.beSetSteeringTuning(this.populateSteeringAttribute(e))
            }, e.prototype.setVehicleSteeringTuning = function(e) {
                var t = this.getUserSteeringValue(e);
                if (_.isUndefined(t)) {
                    var i = _.findIndex(this.getPresetList(), function(e) {
                        return "default" === e.presettype
                    });
                    t = this.getSteeringCategoryItems(i)
                }
                this.applySteeringCategoryItems(t)
            }, e.prototype.getSteeringAssignParams = function(e) {
                var t = !e.isExclusive && this.getUserSteeringValue(e.id);
                if (t) return this.populateSteeringAttribute(t).map(function(e) {
                    return {
                        attr: e.attr,
                        modType: e.type,
                        val: e.value
                    }
                })
            }, e.prototype.populateSteeringAttribute = function(e) {
                var t = this.staticdataLoaderService.steeringAttributeData,
                    i = [],
                    n = _.groupBy(t, "category");
                return _.each(e, function(e) {
                    var t = _.map(n[e.category], function(t) {
                        return {
                            attr: t.code,
                            type: "Scale" === t.modType ? s.SteeringModificationType.Scalar : s.SteeringModificationType.Addition,
                            value: t.step[e.current]
                        }
                    });
                    i.push.apply(i, t)
                }), i
            }, e.prototype.getPresetList = function() {
                return this.staticdataLoaderService.steeringPresetData
            }, e.prototype.getSteeringCategoryItems = function(e) {
                var t = this.staticdataLoaderService,
                    i = t.steeringCategoryData,
                    n = t.steeringPresetData;
                e++;
                var r = _.find(n, function(t) {
                        return t.code === e
                    }),
                    o = r.category;
                return _.map(i, function(e) {
                    return {
                        min: 0,
                        max: e.maxStep,
                        inputStyle: e.type,
                        current: Number(o[e.code]),
                        category: e.code
                    }
                })
            }, e.prototype.getSteeringCategoryItemsByMaster = function(e) {
                var t = this.staticdataLoaderService,
                    i = t.steeringHandlingStyleData,
                    n = t.steeringCategoryData,
                    r = _.find(i, function(t) {
                        return t.step === e
                    }).category;
                return _.map(n, function(e) {
                    return {
                        min: 0,
                        max: e.maxStep,
                        inputStyle: e.type,
                        current: Number(r[e.code]),
                        category: e.code
                    }
                })
            }, e.prototype.getUserSteeringValue = function(e) {
                var t = e ? a.getVehicleInfo(e) : a.getRecentVehicle(),
                    i = t.steering,
                    n = this.staticdataLoaderService.steeringCategoryData;
                if (i && i.length === n.length) return _.map(i, function(e) {
                    var t = n[e.code];
                    return {
                        min: 0,
                        max: t.maxStep,
                        current: e.val,
                        inputStyle: t.type,
                        category: e.code
                    }
                })
            }, e.prototype.getMasterSteering = function(e) {
                var t = e,
                    i = _.sumBy(t, function(e) {
                        return e.current / e.max
                    }),
                    n = this.staticdataLoaderService.steeringHandlingStyleData.length,
                    r = _.minBy(this.staticdataLoaderService.steeringHandlingStyleData, "step").step,
                    o = _.maxBy(this.staticdataLoaderService.steeringHandlingStyleData, "step").step,
                    a = i / t.length * n;
                return {
                    min: r,
                    max: o,
                    current: Math.min(Math.floor(a), 100),
                    inputStyle: "slide"
                }
            }, e.prototype.getLevelForUnlockDetail = function() {
                var e = _.first(this.staticdataLoaderService.steeringCategoryData);
                return e ? e.unlockLv : 1
            }, e
        }();
    c.$inject = ["externalService", "staticdataLoaderService"], t.SteeringService = c, angular.module("edge.components").factory("steeringService", r.default.service(c))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.Scalar = 0] = "Scalar", e[e.Addition = 1] = "Addition", e[e.Override = 2] = "Override"
    }(t.SteeringModificationType || (t.SteeringModificationType = {}))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return v.request("POST", "room2/team", {
            gameMode: e
        })
    }

    function r(e, t) {
        return v.request("PUT", "room2/team/" + t + "/@invite", {
            pid: e
        })
    }

    function o(e, t, i) {
        return v.request("POST", "room2/team/" + t + "/players/" + i, {
            password: e
        })
    }

    function a(e, t, i) {
        return v.request("PUT", "room2/team/" + t + "/players/" + i + "/@host", {
            hostId: e
        })
    }

    function s(e, t, i) {
        return v.request("PUT", "room2/team/" + e + "/players/" + t + "/vehicle/" + i)
    }

    function c(e, t) {
        return v.request("DELETE", "room2/team/" + e + "/players/" + t)
    }

    function d(e, t) {
        return v.request("DELETE", "room2/team/" + e + "/players/" + t + "/@kick")
    }

    function l(e, t, i) {
        return v.request("PUT", "room2/team/" + t + "/players/" + i + "/status", {
            status: e
        })
    }

    function u(e) {
        return v.request("POST", "room2/team/" + e + "/@matchmaking")
    }

    function p(e) {
        return v.request("POST", "room2/team/" + e + "/@cancelmatchmaking")
    }

    function h(e, t) {
        return v.request("POST", "room2/team/players/" + t + "/@matchmaking", {
            gameMode: e
        })
    }

    function f(e) {
        return v.request("POST", "room2/team/players/" + e + "/@cancelmatchmaking")
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var v = i(10);
    t.create_team = n, t.invite_friend = r, t.join_team = o, t.change_team_host = a, t.change_vehicle = s, t.leave_team = c, t.kick_player = d, t.set_ready_state = l, t.begin_quick_team_matchmaking = u, t.cancel_quick_team_matchmaking = p, t.begin_single_team_match = h, t.cancel_single_team_match = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(6),
        o = i(10),
        a = i(4),
        s = i(3),
        c = i(190),
        d = i(5),
        l = function() {
            function e(e, t, i, n, r, o, a, d) {
                this.serverTimeService = e, this.popupService = t, this.notifierService = i, this.staticdata = n, this.$filter = r, this.pushService = o, this.stateService = a, this.featureSetService = d, this.cachedTemplate = this.$filter("template"), this.pushService.subscribeResource(/\/quests\/progress/, this.questProgressUpdated.bind(this)), this.pushService.subscribeResource(/\/quests\/change\/qp/, this.qpUpdated.bind(this)), this._questDataByCode = _.keyBy(this.staticdata.quest.quests, "code"), this.notifierService.on("questPreview.open", function() {
                    s.store.dispatch(c.openPreview())
                })
            }
            return Object.defineProperty(e.prototype, "questDataByCode", {
                get: function() {
                    return this._questDataByCode
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.fetch = function() {
                return this.featureSetService.isEnabled("QUESTSYSTEM") ? this.fetched ? this.fetched : this.fetched = this.fetchPlayerQuestData() : r.resolve()
            }, e.prototype.fetchPlayerQuestData = function() {
                var e = this;
                return o.request("GET", "quests").then(function(t) {
                    var i = s.store.getState().quest,
                        n = _.isEmpty(i.quest) || t.qpResetTime !== i.quest.qpResetTime,
                        r = _.isEmpty(i.quest) || t.questResetTime !== i.quest.questResetTime;
                    if (n || r) {
                        if (_.isEmpty(i.quest) || r) {
                            var o = t.questProgress.filter(function(t) {
                                return t.value < e.questDataByCode[t.code].goal
                            }).length;
                            if (o > 0) {
                                var a = e.cachedTemplate({
                                    n: o
                                }, "SYSTEMTRAY_QUESTNOTICE_DESC");
                                e.notifierService.addLast("SYSTEMTRAY_QUESTNOTICE_TITLE", a, "root.questPreview"), s.store.dispatch(c.turnOnNotification())
                            }
                        }
                        var d = i.quest && i.quest.questProgress || [],
                            l = d.filter(function(e) {
                                return e.completed
                            }).length;
                        if (t.questProgress.filter(function(e) {
                                return e.completed
                            }).length > l && s.store.dispatch(c.turnOnNotification()), s.store.dispatch(c.updateQuest(t)), e.installRefreshTimer(), n && e.updateRemainingDurationInterval) {
                            e.popupService.closePopup();
                            var u = e.$filter("translate")("QUEST_POPUP_QPRESET_DESC");
                            e.popupService.drawConfirm("QUEST_POPUP_QPRESET_TITLE", '<span class="highlight">' + u + "</span>"), clearInterval(e.updateRemainingDurationInterval), e.updateRemainingDurationInterval = void 0
                        }
                    }
                }).catch(function(e) {
                    return n.error(e.message)
                })
            }, e.prototype.installRefreshTimer = function() {
                var e = this,
                    t = s.store.getState().quest,
                    i = this.serverTimeService.getRemainingDuration(t.quest.qpResetTime).asMilliseconds(),
                    n = this.serverTimeService.getRemainingDuration(t.quest.questResetTime).asMilliseconds(),
                    r = Math.max(Math.min(i, n), 250);
                setTimeout(function() {
                    return e.fetchPlayerQuestData()
                }, r), i < a.MaxSetTimeoutDelay && this.installQPResetNotifyTimer(i, i - d.duration(24, "hours").asMilliseconds()), this.questResetNotifyTimer && clearTimeout(this.questResetNotifyTimer), this.questResetNotifyTimer = setTimeout(function() {
                    var t = e.$filter("translate")("SYSTEMTRAY_QUESTRESET_BEFORE1HOUR_DESC");
                    e.notifierService.addLast("SYSTEMTRAY_QUESTRESET_BEFORE1HOUR_TITLE", t, "root.questPreview"), s.store.dispatch(c.turnOnNotification())
                }, Math.max(n - d.duration(1, "hours").asMilliseconds(), 0))
            }, e.prototype.installQPResetNotifyTimer = function(e, t) {
                var i = this;
                this.qpResetNotifyTimer && clearTimeout(this.qpResetNotifyTimer), this.qpResetNotifyTimer = setTimeout(function() {
                    var t = i.$filter("translate")("SYSTEMTRAY_QPRESET_BEFORE1HOUR_DESC");
                    i.notifierService.addLast("SYSTEMTRAY_QPRESET_BEFORE1HOUR_TITLE", t, "root.questPreview"), s.store.dispatch(c.turnOnNotification()), e > d.duration(1, "hours").asMilliseconds() && i.installQPResetNotifyTimer(e, e - d.duration(1, "hours").asMilliseconds())
                }, Math.max(t, 0))
            }, e.prototype.questProgressUpdated = function(e, t) {
                var i = this;
                n.info(">> questProgressUpdated qp: " + t.body.qp + " progress: " + JSON.stringify(t.body.questProgress));
                var r = s.store.getState().quest.quest.questProgress;
                _.forEach(t.body.questProgress, function(e) {
                    if (e.completed) {
                        var t = _.find(r, function(t) {
                            return t.code === e.code
                        });
                        if (t && !t.completed) {
                            var n = i.cachedTemplate({
                                    current: a.default.toMoney(e.value),
                                    target: a.default.toMoney(e.value)
                                }, "QUEST_" + t.code + "_NAME"),
                                o = i.cachedTemplate({
                                    questname: n
                                }, "SYSTEMTRAY_QUESTCOMPLETED_DESC");
                            i.notifierService.addLast("SYSTEMTRAY_QUESTCOMPLETED_TITLE", o, "root.questPreview"), s.store.dispatch(c.turnOnNotification())
                        }
                    }
                });
                s.store.dispatch(c.updateQuestProgress(t.body.qp, t.body.questProgress))
            }, e.prototype.qpUpdated = function(e, t) {
                n.info(">> qpUpdated qp: " + t.body.qp), s.store.dispatch(c.updateQP(t.body.qp))
            }, e.prototype.exchangeQuestReward = function(e, t, i) {
                var n = this,
                    r = function() {
                        var e = s.store.getState().quest,
                            t = n.serverTimeService.getRemainingDuration(e.quest.qpResetTime),
                            i = a.default.numberWithCommas(e.quest.qp);
                        return t.asDays() >= 1 ? n.cachedTemplate({
                            point: i,
                            day: t.days()
                        }, "QUEST_POPUP_TRADE_DESC2_DAY") : t.asHours() >= 1 ? n.cachedTemplate({
                            point: i,
                            hour: t.hours(),
                            minute: t.minutes()
                        }, "QUEST_POPUP_TRADE_DESC2_HOUR") : t.asMinutes() >= 1 ? n.cachedTemplate({
                            point: i,
                            minute: t.minutes()
                        }, "QUEST_POPUP_TRADE_DESC2_MINUTE") : n.cachedTemplate({
                            point: i,
                            second: t.seconds()
                        }, "QUEST_POPUP_TRADE_DESC2_SECOND")
                    },
                    d = function() {
                        return '<span class="highlight">' + n.cachedTemplate({
                            point: a.default.numberWithCommas(t)
                        }, "QUEST_POPUP_TRADE_DESC1") + "</span><br>" + r()
                    };
                this.popupService.draw("ConfirmCancelPopup", {
                    title: this.$filter("translate")("QUEST_POPUP_TRADE_TITLE"),
                    description: d(),
                    confirm: function() {
                        o.request("POST", "quests/qpitem/" + e + "/@exchange", {
                            qpCount: t
                        }).then(function() {
                            n.popupService.draw("ItemIconConfirmPopup", {
                                title: "QUEST_POPUP_TRADEFINISHED_TITLE",
                                desc: {
                                    top: n.$filter("translate")("QUEST_POPUP_TRADEFINISHED_DESC1"),
                                    bottom: n.$filter("translate")("QUEST_POPUP_TRADEFINISHED_DESC2")
                                },
                                itemCardProps: {
                                    info: {
                                        code: i,
                                        img: n.$filter("itemCardImg")("ITEM", i),
                                        type: "ITEM",
                                        count: 1
                                    },
                                    mouseDisabled: !0
                                },
                                buttons: [{
                                    type: "confirm",
                                    name: "QUEST_BUTTON_CONFIRM",
                                    onClick: function() {
                                        return n.popupService.closePopup()
                                    }
                                }, {
                                    type: "cancel",
                                    name: "QUEST_BUTTON_MOVEINVENTORY",
                                    onClick: function() {
                                        return n.popupService.closePopup().then(function() {
                                            return n.stateService.go("root.menu.Inventory")
                                        })
                                    }
                                }],
                                isInvertTwoButton: !0
                            });
                            var e = n.$filter("translate")("ITEM_" + i + "_NAME"),
                                t = n.cachedTemplate({
                                    itemname: e
                                }, "SYSTEMTRAY_QPTRADE_DESC");
                            n.notifierService.addLast("SYSTEMTRAY_QPTRADE_TITLE", t, "root.menu.Inventory"), s.store.dispatch(c.turnOnNotification())
                        })
                    },
                    cleanup: function() {
                        n.updateRemainingDurationInterval && (clearInterval(n.updateRemainingDurationInterval), n.updateRemainingDurationInterval = void 0)
                    }
                }), this.updateRemainingDurationInterval = setInterval(function() {
                    n.popupService.updateMessage({
                        description: d()
                    })
                }, 1e3)
            }, e
        }();
    l.$inject = ["serverTimeService", "popupService", "notifierService", "staticdataLoaderService", "$filter", "pushService", "stateService", "featureSetService"], t.default = l, angular.module("edge.components").factory("questService", a.default.generateService(l))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(35),
        o = i(6),
        a = i(5),
        s = i(4),
        c = i(9),
        d = i(3),
        l = i(10),
        u = i(12),
        p = i(138),
        h = function(e) {
            function t(t, i, n, r, o, a, s, c, l, u, p, h) {
                var f = e.call(this) || this;
                return f.externalService = t, f.staticdata = i, f.tuningShopService = n, f.numberPlateService = r, f.vehicleDataService = o, f.hudService = a, f.recordService = s, f.popupService = c, f.steeringService = l, f.stateService = u, f.pushService = p, f.bgmService = h, f.exclusiveVehicleCodes = [], f.removeFinishListener = _.noop, f.retryCount = 1, f.onGameRecord = function() {
                    d.store.getState().timetrial.matchParam && f.recordDefer && f.recordDefer.resolve(f.recordService.getAllRecords())
                }, f.cheatRecord = {
                    isBreakRecord: !0,
                    gainMedalStep: 0,
                    gainPlatinum: !1,
                    rank: 2
                }, f
            }
            return n.__extends(t, e), t.prototype.init = function() {
                var e = this;
                this.recordService.on("totalRecord", this.onGameRecord), this.pushService.on("msg", function(t) {
                    "match2.start.timetrial.play" === t.cmd && e.assignParamDefer.resolve(t.opts)
                })
            }, t.prototype.fetch = function() {
                var e = this;
                return o.all([this.fetchTimetrialPlayerInfo(), this.fetchTimetrialSeasonInfo()]).then(function() {
                    return o.all([e.fetchPlatinumMedal(), e.fetchMedalLaptimes()])
                })
            }, t.prototype.fetchMedalLaptimes = function() {
                var e = d.store.getState().timetrial,
                    t = e.medalLaptimes,
                    i = e.playerInfo;
                return t && t.seasonId === i.seasonId ? o.resolve() : l.request("GET", "timetrial/seasons/current/medal").then(function(e) {
                    return d.store.dispatch(p.updateMedalLaptimes(e))
                })
            }, t.prototype.fetchTimetrialPlayerInfo = function() {
                var e = this,
                    t = d.store.getState().player.id;
                return l.request("GET", "timetrial/seasons/current/players/" + t).then(function(i) {
                    if (_.isUndefined(i)) return e.createTimetrialPlayer(t);
                    d.store.dispatch(p.updateTimetrialPlayerInfo(i))
                })
            }, t.prototype.getMedalCount = function(e) {
                return e || (e = d.store.getState().timetrial.playerInfo), e ? _.reduce(e.trackRecords, function(e, t) {
                    return e + t.medalStep
                }, 0) : 0
            }, t.prototype.fetchPlatinumMedal = function() {
                var e = d.store.getState().player.id;
                return l.request("GET", "timetrial/seasons/current/players/platinum/" + e).then(function(e) {
                    return d.store.dispatch(p.updateTimetrialPlatinumMedalInfo(e))
                })
            }, t.prototype.createTimetrialPlayer = function(e) {
                return l.request("POST", "timetrial/seasons/current/players/" + e).then(function(e) {
                    return d.store.dispatch(p.updateCreatePlayer(e))
                })
            }, t.prototype.fetchTimetrialSeasonInfo = function() {
                return l.request("GET", "timetrial/seasons").then(function(e) {
                    return d.store.dispatch(p.updateTimetrialSeasonInfo(e))
                })
            }, t.prototype.fetchGhostRecords = function(e) {
                return l.request("GET", "timetrial/seasons/current/trackcode/" + e + "/records/").then(function(e) {
                    return d.store.dispatch(p.fetchGhostRecords(e)), e
                })
            }, t.prototype.requestTrackData = function(e) {
                return l.request("GET", "timetrial/seasons/current/trackcode/" + e + "/details")
            }, t.prototype.fetchTrackRecords = function(e) {
                return l.request("GET", "timetrial/seasons/current/trackcode/" + e + "/toprankdetails").then(function(e) {
                    return {
                        myRecord: e.playerInfo,
                        topRecords: e.topRankInfo
                    }
                })
            }, t.prototype.postRecord = function() {
                var e = this;
                return this.recordDefer = s.default.defer(), this.recordDefer.promise.then(function(t) {
                    if (e.recordDefer = void 0, !e.externalService.isEdgeBrowser()) return d.store.dispatch(p.updateMatchResult(n.__assign({}, e.cheatRecord, {
                        laptime: t.laptime
                    }))), o.resolve(e.cheatRecord);
                    var i = d.store.getState().player.id,
                        r = d.store.getState().timetrial,
                        a = r.selectedTrack,
                        s = r.selectedVehicle,
                        c = r.matchParam.matchId,
                        u = function(n) {
                            return l.requestCipher("POST", "timetrial/" + i + "/trackcode/" + a + "/complete", {
                                matchId: c,
                                count: e.retryCount,
                                vehicle: {
                                    code: s.code,
                                    ovr: s.ovr,
                                    grade: s.grade
                                },
                                result: t
                            }).catch(function(e) {
                                if (log.error("timetrialService.postRecord, retry count:", n, ", error:", e), n) return u(n - 1);
                                throw e
                            })
                        };
                    return u(2)
                })
            }, t.prototype.seasonRemainDays = function() {
                var e = d.store.getState().timetrial.seasonInfo.nextSeason,
                    t = a().startOf("day"),
                    i = a(e.startAt).startOf("day").add(1, "day");
                return a.duration(i.valueOf() - t.valueOf()).asDays()
            }, t.prototype.medalRewardsByTrack = function(e) {
                var t = this.staticdata.trackData.getTrack(e).difficulty;
                return this.staticdata.timetrial.medalRewardData[t]
            }, t.prototype.seasonLabelParam = function() {
                var e = d.store.getState().timetrial.seasonInfo,
                    t = e.currSeason,
                    i = e.nextSeason,
                    n = a(t.startAt),
                    r = a(i.startAt);
                return {
                    year: n.year(),
                    num: t.seasonNo,
                    m1: n.month() + 1,
                    d1: n.date(),
                    m2: r.month() + 1,
                    d2: r.date()
                }
            }, t.prototype.setFinishHandler = function() {
                var e = this;
                this.removeFinishListener = this.externalService.on(c.default.beFinishTimeTrial, function(t) {
                    e.onFinish(t)
                })
            }, t.prototype.onFinish = function(e) {
                var t = this;
                e && this.recordService.setRecord("laptime", e), this.hudService.outro(), this.emit("finish", e), this.postRecord().then(function(i) {
                    t.externalService.isEdgeBrowser() && (d.store.dispatch(p.updateMatchResult(n.__assign({}, i, {
                        laptime: e
                    }))), i.isBreakRecord && i.gid && t.externalService.beUploadTimeTrialGhost(i.gid))
                }).catch(function(e) {
                    t.popupService.drawConfirm("TIMETRIAL_FINISH_ERROR_TITLE", "TIMETRIAL_FINISH_ERROR_DESC", function() {
                        return t.exit()
                    })
                })
            }, t.prototype.getTracks = function() {
                return this.tracks || (this.tracks = _(this.staticdata.trackData.getTracks()).filter(function(e) {
                    return e.room.TIMETRIAL
                }).sortBy("difficulty").value())
            }, t.prototype.startTimetrial = function(e) {
                var t = this;
                this.assignParamDefer.promise.then(function(i) {
                    var n = e.ghostRecord,
                        r = e.isQuickRetry;
                    t.recordService.initRecord();
                    var o = n && n.gid;
                    t.externalService.beStartTimetrial(i, o, r), r || 1 !== t.retryCount || d.store.dispatch(p.updateMatchParam(i))
                })
            }, t.prototype.exit = function() {
                var e = this;
                return this.removeFinishListener(), this.recordDefer = void 0, d.store.dispatch(p.clearMatch()), this.retryCount = 1, o.delay(500).then(function() {
                    e.stateService.go("root.menu.Timetrial").then(function() {
                        e.bgmService.stop(2e3).then(function() {
                            return e.bgmService.playMeta()
                        })
                    })
                })
            }, t.prototype.quickExit = function() {
                var e = this;
                this.exit().then(function() {
                    return e.externalService.beAbandonRace()
                })
            }, t.prototype.retry = function(e) {
                return void 0 === e && (e = "retry"), "retry" === e && this.retryCount++, this.removeFinishListener(), d.store.dispatch(p.clearResult()), this.stateService.go("root.TimetrialLoading", {
                    mode: e
                })
            }, t.prototype.quickRetry = function() {
                var e = this;
                this.retry("quickRetry").then(function() {
                    return e.externalService.beAbandonRace()
                }).then(function() {
                    return e.notifyRetryToServer({
                        completionrate: e.recordService.getRecord("completionrate"),
                        mileage: e.recordService.getRecord("mileage")
                    })
                })
            }, t.prototype.abandonRace = function() {
                this.removeFinishListener(), this.externalService.beAbandonRace(), d.store.dispatch(p.clearMatch())
            }, t.prototype.initExclusiveVehicles = function() {
                var e = this;
                return this.exclusiveVehicleCodes.length ? o.resolve() : l.request("GET", "timetrial/exclusivevehicles").then(function(t) {
                    return e.exclusiveVehicleCodes = t
                })
            }, t.prototype.exclusiveVehicles = function() {
                var e = this;
                return this.exclusiveVehicleCodes.map(function(t) {
                    return n.__assign({}, e.vehicleDataService.createRefinedVehicle(t), {
                        id: "exclusive_" + t,
                        isExclusive: !0
                    })
                })
            }, t.prototype.calcMedalCount = function(e, t) {
                for (var i = d.store.getState().timetrial.medalLaptimes, n = 3; n > 0; --n)
                    if (t <= i[e][n]) return n;
                return 0
            }, t.prototype.notifyStartToServer = function() {
                var e = d.store.getState().player.id,
                    t = d.store.getState().timetrial,
                    i = t.selectedGhost,
                    r = t.selectedVehicle,
                    o = t.selectedTrack;
                if (!o) throw new Error("empty track");
                var a = i ? {
                    gid: i.gid,
                    ghostType: i.type,
                    laptime: i.bestLaptime
                } : {};
                return this.assignParamDefer = s.default.defer(), this.assignParamDefer.promise.catch(function(e) {
                    return log.debug(e)
                }), l.request("POST", "timetrial/" + e + "/trackcode/" + o + "/match/@start", {
                    startInfo: n.__assign({
                        vehicle: {
                            vid: r.id,
                            code: r.code,
                            ovr: r.ovr,
                            grade: r.grade
                        }
                    }, a)
                })
            }, t.prototype.notifyRetryToServer = function(e) {
                var t = d.store.getState().player.id,
                    i = d.store.getState().timetrial,
                    n = i.matchParam.matchId,
                    r = i.selectedTrack;
                if (!r) throw new Error("empty track");
                return l.request("POST", "timetrial/" + t + "/trackcode/" + r + "/match/@restart", {
                    matchId: n,
                    count: this.retryCount,
                    restartInfo: e
                })
            }, t.prototype.cheatStartGame = function() {
                var e = window;
                return o.delay(3500).then(function() {
                    return e.beAllPlayerLoaded()
                }).delay(3e3).then(function() {
                    var t = 5;
                    return s.default.interval(function() {
                        e.beHUDStartCountdown(t--)
                    }, 1e3, 5)
                }).delay(1e3).then(e.beHUDStartGame)
            }, t.prototype.cheatSeason = function(e, t) {
                return l.request("PUT", "timetrial/season", {
                    seasonId: e,
                    startAt: t
                })
            }, t.prototype.cheatTrackRecord = function(e, t) {
                var i = d.store.getState().player.id;
                return l.request("PUT", "timetrial/" + i + "/trackcode/" + e + "/forceupdate", {
                    laptime: t,
                    vehicle: u.getRecentVehicle()
                })
            }, t.prototype.cheatDeleteTrackRecord = function(e) {
                var t = d.store.getState().timetrial.seasonInfo.currSeason;
                return l.request("DELETE", "timetrial/season/" + t.id + "/trackcode/" + e + "/record")
            }, t
        }(r.EventEmitter);
    h.$inject = ["externalService", "staticdataLoaderService", "tuningShopService", "numberPlateService", "vehicleDataService", "hudService", "recordService", "popupService", "steeringService", "stateService", "pushService", "bgmService"], t.TimetrialService = h, angular.module("edge.components").factory("timetrialService", s.default.service(h))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(4),
        a = i(10),
        s = i(9),
        c = i(3),
        d = i(224),
        l = i(593),
        u = i(110),
        p = i(34),
        h = i(228),
        f = i(35),
        v = function(e) {
            function t(t, i, n, a, s, c) {
                var d = e.call(this) || this;
                return d.campaignService = t, d.missionService = i, d.externalService = n, d.snippetService = a, d.popupService = s, d.pushService = c, d.channelId = -1, d.channelCount = 1, d.connecting = !1, d.cooldown = !1, d._status = 1, d.initialized = !1, d.updateCoreNameTags = function(e) {
                    d.snippetService.fetchSnippets(e).then(function() {
                        return r.all(e.map(function(e) {
                            return d.snippetService.getSnippetAsync(e)
                        }))
                    }).then(function(e) {
                        var t = e.map(function(e) {
                            return {
                                pid: e.pid,
                                name: e.name,
                                level: e.level,
                                clanName: e.clanName || "",
                                isManager: e.isManager || !1
                            }
                        });
                        d.externalService.beOnUpdateNameTagInfo(t)
                    })
                }, d.deferredRequestSnippet = o.default.queuedDispatcher(d.updateCoreNameTags), d.setCoreEventHandlers(), d.pushService.subscribeResource(/openworld\.update\.playerSnippet/, d.updatePlayerSnippet.bind(d)), d
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "status", {
                set: function(e) {
                    this._status !== e && (0 === e ? this.externalService.beSetOpenworldBusyStatus(!1) : 0 === this._status && this.externalService.beSetOpenworldBusyStatus(!0), this._status = e)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "worldChatService", {
                get: function() {
                    return p.getInjector().get("worldChatService")
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.init = function() {
                var e = this;
                if (this.initialized) return r.resolve();
                this.initialized = !0;
                var t = this.worldChatService;
                return t.init(), this.findChannelId(c.store.getState().player.id).then(function(i) {
                    i && (e.channelId = i, t.setRaceStateForOpenworld(i))
                }).catch(_.noop)
            }, t.prototype.parseConnectionError = function(e) {
                switch (e) {
                    case "SecureReason_MissingContent":
                    case "SecureReason_MismatchingContent":
                        return {
                            desc: "OPENWORLD_ERROR_SHUTDOWN_DATA", shutdown: !0
                        };
                    case "SecureReason_VersionMismatched":
                        return {
                            desc: "OPENWORLD_ERROR_SHUTDOWN_VERSION", shutdown: !0
                        };
                    case "SecureReason_ServerFull":
                        return {
                            desc: "OPENWORLD_ERROR_MIGRATION_FULL"
                        };
                    case "SecureReason_KickedOut":
                    case "SecureReason_GenericError":
                    case "SecureReason_NotVerified":
                    case "SecureReason_TimedOut":
                    case "SecureReason_ConnectFailed":
                    case "SecureReason_NoReply":
                    case "SecureReason_AcceptFailed":
                    case "SecureReason_ClientLoadingTimedOut":
                    default:
                        return {
                            desc: "OPENWORLD_ERROR_MIGRATION"
                        }
                }
            }, t.prototype.onConnectionError = function(e) {
                var t = this;
                c.store.dispatch(d.hide()), log.error("openworld beConnectionError", e);
                var i = this.parseConnectionError(e),
                    n = i.desc;
                if (i.shutdown) return this.shutdown(n);
                this.popupService.drawConfirm("OPENWORLD_ERROR_TITLE", n, function() {
                    t.reserveWithRetry().then(function(e) {
                        return t.changeCoreConnection(e)
                    }).catch(function(e) {
                        return t.onReserveFail(e)
                    })
                })
            }, t.prototype.setCoreEventHandlers = function() {
                var e = this;
                this.externalService.on(s.CoreEvent.beConnectionError, function(t) {
                    (e.connecting || 2 === e.externalService.currentLevel()) && e.onConnectionError(t)
                }), this.externalService.on(s.CoreEvent.beRequestNameTagInfo, function(t) {
                    e.deferredRequestSnippet(t)
                }), this.externalService.on(s.CoreEvent.beLevelBootedUp, function(t) {
                    /hp2/i.test(t) ? e.connecting = !1 : e.clearChannelId()
                })
            }, t.prototype.connect = function() {
                return this.connectImpl()
            }, t.prototype.connectRecent = function() {
                return this.connectImpl(this.channelId)
            }, t.prototype.getId = function() {
                return this.channelId
            }, t.prototype.clearChannelId = function() {
                this.channelId = -1
            }, t.prototype.getChannelCount = function() {
                return this.channelCount
            }, t.prototype.reserve = function(e, t) {
                var i = this,
                    o = c.store.getState().player.isManager;
                return a.request("POST", "openworld/channel/@reserve", {
                    channelId: e,
                    force: t,
                    isManager: o
                }).then(function(e) {
                    return i.externalService.isEdgeBrowser() || (i.channelId && a.request("POST", "openworld/channel/@leave", {
                        channelId: i.channelId
                    }), a.request("POST", "openworld/channel/@join", {
                        channelId: e.channelId
                    })), i.channelId = e.channelId, r.all([e, i.campaignService.hasTutorial(), i.missionService.init()])
                }).then(function(e) {
                    var t = e[0],
                        i = e[1];
                    return n.__assign({}, t, {
                        tutorial: i
                    })
                })
            }, t.prototype.reserveWithRetry = function(e) {
                var t = this;
                void 0 === e && (e = -1);
                var i = function(n) {
                    return t.reserve(e, !1).catch(function(e) {
                        if (log.error("openworldService.reserve, retry count:", n, ", error:", e), n) return i(n - 1);
                        throw e
                    })
                };
                return i(2)
            }, t.prototype.shutdown = function(e) {
                var t = this,
                    i = function() {
                        return t.externalService.beShutdown()
                    };
                this.popupService.draw("ConfirmPopup", {
                    title: "OPENWORLD_ERROR_TITLE",
                    description: e,
                    confirm: i,
                    close: i
                })
            }, t.prototype.onReserveFail = function(e) {
                c.store.dispatch(d.hide()), log.error("openworld reserve fail", e), this.shutdown("OPENWORLD_ERROR_SHUTDOWN_CHANNEL")
            }, t.prototype.connectImpl = function(e) {
                var t = this;
                return this.connecting = !0, this.reserveWithRetry(e).then(function(e) {
                    e.tutorial && c.store.dispatch(l.updateTutorialStatus(u.TutorialStatus.INPROGRESS)), e.tutorialStart = h.isFirstAttempt(), t.externalService.beConnectOpenworld(e)
                }).then(function() {
                    return t.externalService.levelLoaded
                }).catch(function(e) {
                    return t.onReserveFail(e)
                }).finally(function() {
                    t.connecting = !1
                })
            }, t.prototype.findChannelId = function(e) {
                return a.request("GET", "openworld/channel/players/" + e).then(function(e) {
                    return e.channelId
                })
            }, t.prototype.fetchChannelCount = function() {
                var e = this;
                return a.request("GET", "openworld/channel/count").then(function(t) {
                    return e.channelCount = t.count
                })
            }, t.prototype.tryReserve = function(e) {
                var t = this;
                return this.reserve(e, !0).then(function(e) {
                    return function() {
                        return t.externalService.beConnectOpenworld(e)
                    }
                })
            }, t.prototype.changeCoreConnection = function(e) {
                var t = this,
                    i = p.getInjector().get("stateService"),
                    n = p.getInjector().get("$state");
                return c.store.dispatch(d.show()), r.delay(500).then(function() {
                    return t.externalService.beConnectOpenworld(e)
                }).then(function() {
                    return t.externalService.levelLoaded
                }).then(function() {
                    var e = n.get("root.menu.Openworld");
                    return i.go("root.menu.Openworld", {}, {
                        reload: e
                    })
                }).then(function() {
                    return c.store.dispatch(d.hide())
                })
            }, t.prototype.changeChannel = function(e) {
                var t = this;
                return this.reserve(e, !0).then(function(e) {
                    return t.changeCoreConnection(e)
                })
            }, t.prototype.updatePlayerSnippet = function(e, t) {
                log.info(">> openworld update player snippet", e, t);
                var i = t.body;
                i.pid ? this.deferredRequestSnippet(i.pid) : log.debug("snippet updated, but pid didn't received")
            }, t
        }(f.EventEmitter);
    v.$inject = ["openworldCampaignService", "openworldMissionService", "externalService", "playerSnippetService", "popupService", "pushService"], t.OpenworldService = v, angular.module("edge.components").factory("openworldService", o.default.service(v))
}, function(e, t, i) {
    "use strict";

    function n(e, t, i) {
        var n = !1;
        return "less" === i && (n = e < t), "less_equal" === i && (n = e <= t), "greater" === i && (n = e > t), "greater_equal" === i && (n = e >= t), "equal" === i && (n = e === t), "not_equal" === i && (n = e !== t), (_.isUndefined(e) || _.isNull(e)) && (n = !1), n
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(15),
        o = i(6),
        a = i(1166),
        s = i(3),
        c = i(10),
        d = i(81),
        l = i(4),
        u = i(594),
        p = i(118),
        h = i(110),
        f = i(228),
        v = function() {
            function e(e, t, i) {
                var n = this;
                this.recordService = e, this.staticdata = t, this.missionService = i, this.updatedTaskProgress = {}, this.checkRecordTask = function(e, t) {
                    var i = n.campaignData.tasks.filter(function(t) {
                        return u.TaskToRecordMap[t.type] === e
                    });
                    i.length && i.forEach(function(e) {
                        m.test(e, t, n.recordService.getAllRecords())
                    })
                }, this.checkMissionTask = function(e) {
                    var t = n.campaignData.tasks.filter(function(e) {
                        return "match_win" === e.type
                    });
                    t.length && t.forEach(function(t) {
                        m.testMission(t, e)
                    })
                }, m.campaignService = this
            }
            return e.prototype.init = function() {
                this.recordService.on("changed", this.checkRecordTask), this.missionService.on("mission.finish", this.checkMissionTask)
            }, e.prototype.destroy = function() {
                this.recordService.removeListener("changed", this.checkRecordTask), this.missionService.removeListener("mission.finish", this.checkMissionTask)
            }, e.prototype.hasTutorial = function() {
                var e = this;
                return this.campaignData ? o.resolve(this.campaignData.code <= h.TUTORIAL_GUIDE_END_CAMPAIGN) : this.fetchCampaign().then(function() {
                    return e.campaignData.code <= h.TUTORIAL_GUIDE_END_CAMPAIGN
                })
            }, e.prototype.setupCampaignData = function(e) {
                var t = this;
                this.campaignData = this.getCampaign(e), this.distanceTask = this.uiOpenWorldmap = this.uiOpenChangeVehicle = void 0, this.campaignData.tasks.forEach(function(e) {
                    "gameplay_distance" === e.type ? t.distanceTask = e : "ui_open_worldmap" === e.type ? t.uiOpenWorldmap = e : "ui_open_vehiclechange" === e.type && (t.uiOpenChangeVehicle = e)
                })
            }, e.prototype.fetchCampaign = function() {
                var e = this,
                    t = s.store.getState().player.id;
                return c.request("GET", "openworld/campaign/" + t).then(function(t) {
                    e.updatedTaskProgress = {};
                    var i = s.store.getState().campaign;
                    e.setupCampaignData(t.code), s.store.dispatch(a.setCampaign(t)), e.onCampaignUpdated(i)
                })
            }, e.prototype.onCampaignUpdated = function(e) {
                var t = s.store.getState().campaign;
                if (t.status !== r.Openworld.CampaignStatus.Completed) {
                    var i = this.unfinishedMatchTasks(t);
                    if (e.currentCampaignCode !== t.currentCampaignCode) return this.missionService.highlightMissions(this.selectMissionsByTasks(i)), void this.recordService.initRecord();
                    this.unfinishedMatchTasks(e).length !== i.length && this.missionService.highlightMissions(this.selectMissionsByTasks(i))
                }
            }, e.prototype.selectMissionsByTasks = function(e) {
                var t = this.missionService.getMissions().mission,
                    i = {
                        missioncode: function(e, t) {
                            return function(t) {
                                return t.code === e
                            }
                        },
                        gamemode: function(e, t) {
                            return function(t) {
                                return t.gamemode === e
                            }
                        },
                        difficulty: function(e, t) {
                            return function(i) {
                                return n(p.Difficulty[e], i.difficulty, t)
                            }
                        }
                    };
                return e.map(function(e) {
                    for (var n = _(t), r = 0, o = e.conditions; r < o.length; r++) {
                        var a = o[r],
                            s = i[a.type];
                        s && (n = n.filter(s(a.value, a.valuation)))
                    }
                    return n.map(function(e) {
                        return e.code
                    }).value()
                }).reduce(function(e, t) {
                    return _.uniq(e.concat(t))
                }, [])
            }, e.prototype.unfinishedMatchTasks = function(e) {
                var t = this.getCampaign(e.currentCampaignCode).tasks;
                return _.filter(t, function(t) {
                    var i = e.currentTaskProgress[t.code];
                    return "match_win" === t.type && (!i || i < t.goal)
                })
            }, e.prototype.startCampaign = function() {
                var e = s.store.getState(),
                    t = e.player.id,
                    i = e.campaign,
                    n = i.status,
                    d = i.currentCampaignCode;
                return n !== r.Openworld.CampaignStatus.NotStarted ? o.resolve() : c.request("POST", "openworld/campaign/" + t + "/@start", {
                    campaignCode: d
                }).then(function(e) {
                    s.store.dispatch(a.startCampaign(e.campaignCode))
                })
            }, e.prototype.completeCampaign = function() {
                var e = this,
                    t = s.store.getState(),
                    i = t.player.id,
                    n = t.campaign.currentCampaignCode;
                return c.request("POST", "openworld/campaign/" + i + "/@complete", {
                    campaignCode: n
                }).then(function(t) {
                    var i = _.get(t, "unlockRewards.missionCodes", []);
                    return i.length && e.missionService.onUnlock(i), e.fetchCampaign().then(function() {
                        return t
                    })
                })
            }, e.prototype.updateCampaignImpl = function(e, t, i) {
                var n = this;
                return c.request("POST", "openworld/campaign/task/" + e + "/@update", {
                    campaignCode: t,
                    tasks: i
                }).then(function() {
                    n.updatedTaskProgress = i
                })
            }, e.prototype.updateCampaign = function(e) {
                var t = this,
                    i = s.store.getState(),
                    n = i.player.id,
                    a = i.campaign,
                    c = a.status,
                    l = a.currentCampaignCode,
                    u = a.currentTaskProgress;
                return e = e || u, d.shallowEqual(e, this.updatedTaskProgress) ? o.resolve() : f.isFirstAttempt() ? this.startCampaign().then(function() {
                    return t.updateCampaignImpl(n, l, e)
                }) : c !== r.Openworld.CampaignStatus.InProgress ? o.resolve() : this.updateCampaignImpl(n, l, e)
            }, e.prototype.getCampaigns = function() {
                return this.staticdata.campaign.campaigns
            }, e.prototype.getCampaign = function(e) {
                return _.find(this.staticdata.campaign.campaigns, {
                    code: e
                })
            }, e.prototype.getNextAdvertCampaign = function(e) {
                return _.find(this.getCampaigns(), function(t) {
                    return t.advert && e <= t.code
                })
            }, e.prototype.getTasks = function() {
                return this.staticdata.campaign.tasks
            }, e.prototype.getCurrentTaskList = function() {
                var e = this,
                    t = this.campaignData.tasks;
                return t.map(function(i, n) {
                    var r = i.code,
                        o = i.goal,
                        a = void 0 === o ? 0 : o,
                        s = e.getTaskProgressByCode(i.code) || 0;
                    return {
                        code: r,
                        index: t.length - 1 - n,
                        goal: a,
                        progress: s
                    }
                })
            }, e.prototype.updateTask = function(e) {
                this.checkRecordTask("", e.value), s.store.dispatch(a.updateTaskProgress(e))
            }, e.prototype.checkDistance = function(e) {
                this.distanceTask && m.test(this.distanceTask, e)
            }, e.prototype.onOpenWorldmap = function() {
                this.uiOpenWorldmap && (m.test(this.uiOpenWorldmap, void 0), this.uiOpenWorldmap = void 0)
            }, e.prototype.onOpenChangeVehicle = function() {
                this.uiOpenChangeVehicle && (m.test(this.uiOpenChangeVehicle, void 0), this.uiOpenChangeVehicle = void 0)
            }, e.prototype.getAchivementTasks = function() {
                var e = s.store.getState().campaign,
                    t = this.getCampaign(e.currentCampaignCode).tasks;
                return _.filter(t, function(t) {
                    var i = e.currentTaskProgress[t.code];
                    return i && i >= t.goal
                })
            }, e.prototype.getTaskProgressByCode = function(e) {
                return s.store.getState().campaign.currentTaskProgress[e] || 0
            }, e.prototype.isCampaignAchivement = function() {
                var e = s.store.getState().campaign,
                    t = this.getCampaign(e.currentCampaignCode).tasks;
                return this.getAchivementTasks().length === t.length
            }, e.prototype.shouldStore = function(e, t, i, n) {
                if (t === i) return !1;
                if (t < n && i >= n) return !0;
                var r = _.find(this.getTasks(), {
                    code: e
                });
                return u.AlwaysSaveTaskTypes[r.type]
            }, e.prototype.cheatResetWholeCampaigns = function() {
                var e = s.store.getState().player.id;
                return c.request("DELETE", "openworld/campaign/" + e)
            }, e
        }();
    v.$inject = ["recordService", "staticdataLoaderService", "openworldMissionService"], t.OpenworldCampaignService = v;
    var m = function() {
        function e() {}
        return e.test = function(e, t, i) {
            var n = this;
            e.conditions.every(function(e) {
                return n.validateCondition(e, i)
            }) && this.dispatchTaskProgress(e, t, i)
        }, e.testMission = function(e, t) {
            var i = this;
            e.conditions.every(function(e) {
                return i.validateMissionCondition(e, t)
            }) && this.dispatchTaskProgress(e)
        }, e.getValue = function(e, t) {
            switch (e.type) {
                case "gameplay_drifttime":
                    return (t.duration || 0) / 1e3;
                case "gameplay_distance":
                    return _.isNumber(t) ? Math.abs(t) : 0;
                case "gameplay_jumpdistance":
                    return t.range || 0;
                case "gameplay_topspeed":
                case "gameplay_useturbo":
                case "gameplay_chargeturbo":
                case "gameplay_useshortturbo":
                case "sp_earn":
                case "match_win":
                case "ui_open_worldmap":
                case "ui_open_vehiclechange":
                default:
                    return 1
            }
        }, e.dispatchTaskProgress = function(e, t, i) {
            var n = s.store.getState().campaign,
                r = n.currentTaskProgress[e.code] || 0,
                o = this.getValue(e, t);
            o + r >= e.goal && (o = e.goal - r), o && (s.store.dispatch(a.addTaskProgress({
                code: e.code,
                value: o
            })), r < e.goal && o + r >= e.goal && this.campaignService.onCampaignUpdated(n))
        }, e.validateCondition = function(e, t) {
            switch (e.type) {
                case "topspeed":
                    return n(t.speed, e.value, e.valuation);
                default:
                    return !0
            }
        }, e.validateMissionCondition = function(e, t) {
            switch (e.type) {
                case "missioncode":
                    return n(t.missionId, e.value, e.valuation);
                case "gamemode":
                    var i = p.GameMode[e.value.toUpperCase()];
                    return n(t.gameMode, i, e.valuation);
                case "difficulty":
                    var r = p.Difficulty[e.value];
                    return n(t.missionData.difficulty, r, e.valuation);
                case "rank":
                    return n(t.rank, e.value, e.valuation);
                case "medal":
                    return n(t.medal, p.Medal[e.value], e.valuation);
                default:
                    return !0
            }
        }, e
    }();
    angular.module("edge.components").factory("openworldCampaignService", l.default.service(v))
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "openworld-campaign.setCampaign",
            campaign: e
        }
    }

    function r(e) {
        return {
            type: "openworld-campaign.startCampaign",
            code: e
        }
    }

    function o(e) {
        return {
            type: "openworld-campaign.updateTaskProgress",
            taskProgress: e
        }
    }

    function a(e) {
        return {
            type: "openworld-campaign.addTaskProgress",
            taskProgress: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.setCampaign = n, t.startCampaign = r, t.updateTaskProgress = o, t.addTaskProgress = a
}, function(e, t, i) {
    "use strict";

    function n(e) {
        e.filter("ordinal", function() {
            return function(e) {
                if (isNaN(e) || null === e) return e;
                var t = ["th", "st", "nd", "rd"];
                return e + (t[e % 10] || t[0])
            }
        }), e.filter("ordinalSuffix", function() {
            return function(e) {
                if (isNaN(e) || null === e) return e;
                var t = ["th", "st", "nd", "rd"];
                return t[e % 10] || t[0]
            }
        })
    }
    e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        e.filter("split", function() {
            return function(e, t) {
                return e.split(t)
            }
        }), e.filter("at", function() {
            return function(e, t) {
                return e[t]
            }
        }), e.filter("substr", function() {
            return function(e, t, i) {
                return e.substr(t, i)
            }
        })
    }
    e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        e.filter("l10nstring", function() {
            return function(e, t, i) {
                function n(e, t) {
                    return e ? (e = e.toString(), e.length < t ? n("0" + e, t) : e) : e
                }
                var r, o = 6;
                switch (t.toUpperCase()) {
                    case "VEHICLE":
                        r = "VEHICLE_NAME_" + i + "_";
                        break;
                    case "BLUEPRINT":
                        r = "VEHICLE_BLUEPRINT_";
                        break;
                    case "PARTS":
                    case "PART":
                        r = "PARTS_ITEM_NAME_", o = 4;
                        break;
                    case "MANUFACTURER":
                        r = "VEHICLE_MANUFACTURER_NAME_"
                }
                return r + n(e, o)
            }
        })
    }
    e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        function t(e) {
            return (e.config || {}).cdn || "images/cdn/"
        }

        function i(e) {
            return function(i) {
                return i && "" !== i ? t(e) + i : null
            }
        }

        function n(e, i) {
            return ["sessionService", function(n) {
                "ngInject";
                return function(r) {
                    return r ? "" + t(n) + e + "/" + r + "." + (i || "png") : null
                }
            }]
        }
        i.$inject = ["sessionService"], e.filter("cdn", i), e.filter("cdn_beautyshot", n("garage-beautyshots")), e.filter("cdn_loadingTip", n("loading-tip")), e.filter("cdn_driver_thumbnail", n("driver-thumbnail")), e.filter("cdn_track", n("tracks")), e.filter("cdn_track_map", n("track-maps")), e.filter("cdn_driver", n("driver")), e.filter("cdn_card", n("cards")), e.filter("cdn_card_item", n("cards/item")), e.filter("cdn_card_spexp", n("cards/spexp")), e.filter("cdn_parts", n("parts")), e.filter("cdn_material", n("material")), e.filter("cdn_avatar", n("avatar")), e.filter("cdn_sponsor_benefit", n("sponsor")), e.filter("cdn_manufactures", n("emblems")), e.filter("cdn_license_test_icon", n("license-test-icon")), e.filter("cdn_shop_banner", n("shop-banner")), e.filter("cdn_shop_product", n("shop/product")), e.filter("cdn_unlock", n("unlock")), e.filter("cdn_wrap", n("wrap")), e.filter("cdn_marketing", n("marketing")), e.filter("cdn_video_guide", n("video-guide")), e.filter("cdn_video_guide_cn", n("video-guide/cn")), e.filter("cdn_video_guide_kr", n("video-guide/kr")), e.filter("cdn_video_guide_view", n("video-guide-view")), e.filter("cdn_video_guide_view_cn", n("video-guide-view/cn")), e.filter("cdn_video_guide_view_kr", n("video-guide-view/kr")), e.filter("cdn_clan_emblem", n("clan-emblem")), e.filter("cdn_auction_banner", n("auction/banner")), e.filter("cdn_auction_popup_banner", n("auction/popup-banner")), e.filter("cdn_number_plate", n("number-plate")), e.filter("cdn_track_map_large", n("track-maps-large"))
    }
    e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        function t() {
            return function(e) {
                return e && "" !== e ? "./images/" + e : null
            }
        }
        e.filter("img", t), e.filter("itemCardImg", ["$filter", function(e) {
            return function(t, i) {
                return "VEHICLE" === t ? e("cdn_beautyshot")(i) : "SP_PLUS" === t ? e("cdn_card_spexp")(1 === i ? "10013" : i) : "SP_PERCENT" === t ? e("cdn_card_spexp")(1 === i ? "10013" : i) : "EXP_PLUS" === t ? e("cdn_card_spexp")(1 === i ? "10014" : i) : "EXP_PERCENT" === t ? e("cdn_card_spexp")(1 === i ? "10014" : i) : "GEM_PLUS" === t ? e("cdn_card_spexp")(1 === i ? "10020" : i) : "MILEAGE_PLUS" === t ? e("cdn_card_spexp")(1 === i ? "90000" : i) : "BLUEPRINT" === t ? e("cdn_beautyshot")(i) : "ITEM" === t ? e("cdn_card_item")(i) : "NUMBER_PLATE" === t ? e("cdn_card_item")(i) : "PARTS" === t ? e("cdn_parts")(i) : "MATERIAL" === t ? e("cdn_material")(i) : "UNLOCK" === t ? e("cdn_unlock")(i) : "TUNING" === t ? e("cdn_wrap")(i) : "BROADCAST" === t ? e("cdn_card_item")(1 === i ? "80000" : i) : "VEHICLE_CUSTOM" === t ? (i = Number(_.trimStart(String(i).slice(1, 3), "0")), e("cdn_beautyshot")(i)) : "TRIAL_VEHICLE" === t ? (i = Number(_.trimStart(String(i).slice(2, 5), "0")), e("cdn_beautyshot")(i)) : void 0
            }
        }])
    }
    e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        e.filter("vehicleName", ["$filter", function(e) {
            return function(t, i) {
                return i = i || "FULL", e("translate")(e("l10nstring")(t, "vehicle", i))
            }
        }]), e.filter("vehicleShortName", ["$filter", function(e) {
            return function(t, i) {
                return i = i || "SHORT", e("translate")(e("l10nstring")(t, "vehicle", i))
            }
        }]), e.filter("vehiclePenName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("VEHICLE_" + t + "_PENNAME")
            }
        }]), e.filter("vehicleRewardName", ["$filter", function(e) {
            return function(t, i) {
                void 0 === i && (i = 1);
                var n = e("vehicleShortName")(t);
                return e("template")({
                    vehiclename: n,
                    vehiclegrade: i || 1
                }, "VEHICLE_CARD_NAME_GRADE")
            }
        }]), e.filter("manufacturerName", ["$filter", function(e) {
            return function(t) {
                return e("translate")(e("l10nstring")(t, "manufacturer"))
            }
        }]), e.filter("manufacturerPenName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("MANUFACTURER_" + t + "_PENNAME")
            }
        }]), e.filter("coreGameModeName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("COREGAMEMODE_NAME_" + t.toUpperCase())
            }
        }]), e.filter("peerTypeName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("PEERTYPE_NAME_" + t.toUpperCase())
            }
        }]), e.filter("levelName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("LEVEL_NAME_" + t.toUpperCase())
            }
        }]), e.filter("partName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("PARTS_" + t + "_NAME")
            }
        }]), e.filter("partType", ["$filter", function(e) {
            return function(t) {
                return e("translate")("COMMON_PARTS_TYPE_" + Math.floor(t / 100))
            }
        }]), e.filter("partTypeCode", ["$filter", function(e) {
            return function(t) {
                return e("translate")("COMMON_PARTS_TYPE_" + t)
            }
        }]), e.filter("blurprintName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("VEHICLE_BLUEPRINT_" + r.padStart("" + t, 6, "0"))
            }
        }]), e.filter("partStatus", ["$filter", function(e) {
            return function(t) {
                return e("translate")("STATUS_" + t.toUpperCase())
            }
        }]), e.filter("trackName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("TRACK_NAME_" + r.padStart("" + t, 2, "0"))
            }
        }]), e.filter("itemName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("ITEM_" + t + "_NAME")
            }
        }]), e.filter("tuningItemName", ["$filter", function(e) {
            return function(t) {
                return e("translate")("TUNING_" + t + "_NAME")
            }
        }]), e.filter("tuningItemDesc", ["$filter", function(e) {
            return function(t) {
                return e("translate")("TUNING_" + t + "_DESC")
            }
        }]), e.filter("rewardName", ["$filter", function(e) {
            return function(t, i, n, a) {
                return o.indexOf(t) > -1 ? e("currency")(n, "", 0) + " " + e("translate")(t + "_1_NAME") : "SP_PERCENT" === t ? n + "%" + e("translate")("SP_PLUS_1_NAME") : "EXP_PERCENT" === t ? n + "%" + e("translate")("EXP_PERCENT_1_NAME") : "VEHICLE" === t ? e("vehicleRewardName")(i, r.get(a, "VEHICLE.grade") || 1) : "BLUEPRINT" === t ? e("blurprintName")(i) : "ITEM" === t ? e("itemName")(i) : "PARTS" === t ? e("partName")(i) : "TUNING" === t ? e("tuningItemName")(i) : "VEHICLE_CUSTOM" === t ? (i = Number(r.trimStart(String(i).slice(1, 3), "0")), e("vehicleShortName")(i)) : "TRIAL_VEHICLE" === t ? (i = Number(r.trimStart(String(i).slice(2, 5), "0")), e("vehicleShortName")(i)) : e("translate")(t + "_" + i + "_NAME")
            }
        }])
    }
    var r = i(22),
        o = ["SP_PLUS", "EXP_PLUS", "MILEAGE_PLUS"];
    e.exports = n
}, function(e, t, i) {
    "use strict";

    function n(e) {
        var t = {};
        e.filter("template", ["$filter", "exceptionHandleService", function(e, i) {
            return function(n, o) {
                if (!t[o]) {
                    if (!o) return "missing code";
                    t[o] = _.template(e("translate")(o))
                }
                var a;
                try {
                    a = t[o](n)
                } catch (e) {
                    a = "[" + o + "] " + e.message, r.error("template $filter error:", a), i.catchScreenError(e)
                }
                return a
            }
        }])
    }
    var r = i(7);
    e.exports = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(1175), i(1177), i(1228), i(1256), i(1261), i(1262), i(1267), i(1276), i(1280), i(1288), i(1290), i(1296), i(1300), i(1341), i(1355), i(1359), i(1366), i(1368), i(1380), i(1387), i(1389), i(1396), i(1399), i(1415), i(1423), i(1430), i(1431), i(1435), i(1449), i(1459), i(1466), i(1481), i(1483), i(1500), i(1518), i(1533), i(1545), i(1562), i(1564), i(1568), i(1578), i(1597), i(1627)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1176);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        e.state("preview", new n.StateDefinition("/preview", 0).global({
            stages: {
                preview: r.PreviewStageBinder
            }
        }))
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {}, t
        }(r.StageBinder);
    t.PreviewStageBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(1178),
        o = i(11),
        a = i(1183),
        s = i(1191),
        c = i(1192),
        d = i(230),
        l = i(598),
        u = i(288),
        p = i(3),
        h = i(1193),
        f = i(599),
        v = i(113),
        m = i(1207),
        g = i(1221),
        y = i(1223),
        S = i(1224);
    i(1225), i(1226), angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new o.StateDefinition("/menu", 0).cashCharge({
            stages: {
                "web-cash-charge": {
                    stageBinder: S.WebCashChargeBinder,
                    customComponents: {
                        IFrameView: d.IFrameView
                    }
                }
            }
        }).global({
            controller: "GlobalPanel",
            stages: {
                "gnb-hub": g.GnbHubBinder,
                "global-panel": {
                    stageBinder: m.GlobalPanelBinder,
                    customComponents: {
                        AutoSizeButton: c.AutoSizeButton
                    }
                },
                "world-chat-popup": {
                    stageBinder: h.MainChatWindowBinder,
                    customComponents: {
                        IFrameView: d.IFrameView
                    }
                },
                configuration: {
                    stageBinder: a.ConfigurationBinder,
                    customComponents: {
                        RangeInput: s.RangeInput
                    },
                    lazy: !0
                },
                "steering-tuning-popup": {
                    stageBinder: y.SteeringTuningPopup,
                    customComponents: {
                        RangeInput: s.RangeInput
                    },
                    lazy: !0
                },
                "promotion-list": {
                    stageBinder: r.PromotionListBinder,
                    customComponents: {
                        IFrameView: d.IFrameView
                    }
                }
            }
        }).messenger({
            controller: "MessengerController",
            template: l.tmpl
        }).videoGuide({
            controller: "VideoGuideController",
            stages: {
                "video-guide": {
                    stageBinder: f.VideoGuideBinder
                }
            }
        }).setResolve({
            _playerService: ["playerService", "contactsService", "presenceService", "playerSnippetService", "navService", "ranked2Service", "vehicleService", "promotionService", "historyService", "worldChatService", "clanService", "auctionService", "partsService", "numberPlateService", "blueprintService", "questService", "timetrialService", function(e, t, i, r, o, a, s, c, d, l, u, p, h, f, v, m, g) {
                return n.all([o.fetch(), e.fetch(), a.fetchSeasonInfo().catch(function(e) {
                    log.info("failed to fetch season info(" + e.code + ")")
                })]).then(function() {
                    return n.map([f.init(), i.init().then(function() {
                        t.fetch()
                    }), g.init(), r.init(), c.init(), s.fetch(), h.init(), m.fetch()], _.identity, {
                        concurrency: 3
                    })
                }).then(function() {
                    l.init(), u.fetch(), p.init(), v.fetch()
                })
            }]
        });
        e.state("root.menu", t)
    }]).controller("GlobalPanelController", ["$rootScope", "$scope", "$timeout", function(e, t, i) {
        t.setVisible = function(e) {
            var i = t.scene;
            return i && (i.visible = e), t
        }, t.restart = function() {
            var e = t.scene;
            return e && e.gotoAndPlay(1), t
        }, u.render(!0)
    }]).controller("VideoGuideController", ["staticdataLoaderService", "publisherService", function(e, t) {
        var i = e.videoGuideData,
            n = i;
        p.store.dispatch(v.setData(n))
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(5),
        o = i(1),
        a = i(8),
        s = i(2),
        c = i(1179),
        d = i(4),
        l = i(1180),
        u = "promotionlist-backdrop",
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.webViewReady = !1, t.proceedings = 0, t.expecteds = 0, t
            }
            return n.__extends(t, e), t.prototype.onDetach = function() {
                this.deregister(), $(this.getFace(".id-promotionList").htmlElement).perfectScrollbar("destroy")
            }, t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-promotionTitle .id-textField", "PROMOTION_LIST_TITLE"), this.hasSize(".id-promotionListContainer", !0), this.getFace(".id-close").on(s.MouseEventEx.CLICK, function() {
                    $("#" + u).length || $("<div>").attr("id", u).css({
                        position: "absolute",
                        width: "1920px",
                        height: "1080px",
                        left: 0,
                        top: 0
                    }).insertAfter(e.getFace(".id-promotionListContainer .id-promotionList").htmlElement), e.promotionService.closePromotionList()
                }), this.prepareTabButtons(), this.preparePromotionList();
                var t = this.getFace(".id-promotionList").htmlElement;
                this.wheelHandler = _.throttle(function(i) {
                    var n = e.getFace(".id-promotionList .id-promotionItem"),
                        r = n ? n.height : 0,
                        o = Math.max(-1, Math.min(1, i.wheelDelta || -i.detail));
                    t.scrollTop = (Math.floor(t.scrollTop / r) - o) * r
                }, 200, {
                    trailing: !1
                }), t.addEventListener("wheel", this.wheelHandler, {
                    passive: !0
                })
            }, t.prototype.prepareTabButtons = function() {
                this.hasSize(".id-tabButtonContainer", !0), this.tabButtons = this.addChildBinder(".id-tabButton", o.CollectionBinder, {
                    instanceBinder: c.TabButtonBinder
                })
            }, t.prototype.preparePromotionList = function() {
                this.hasSize(".id-promotionList", !0), this.promotionItems = this.addChildBinder(".id-promotionItem", o.CollectionBinder, {
                    instanceBinder: l.PromotionListItemBinder
                })
            }, t.prototype.bindTabButtons = function(e) {
                var t = this,
                    i = this.$filter("template"),
                    n = [{
                        label: this.$filter("translate")("PROMOTION_LIST_WEB"),
                        selected: 1 === e,
                        onClick: function() {
                            return t.showWebEvent()
                        }
                    }, {
                        label: i({
                            value: this.proceedings
                        }, "PROMOTION_LIST_PROCEEDING"),
                        selected: 2 === e,
                        onClick: function() {
                            return t.renderPromotion(2)
                        }
                    }, {
                        label: i({
                            value: this.expecteds
                        }, "PROMOTION_LIST_EXPECTED"),
                        selected: 3 === e,
                        onClick: function() {
                            return t.renderPromotion(3)
                        }
                    }];
                this.tabButtons.applyCollection(n)
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.deregister = this.$transitions.onStart({}, function() {
                    return e.closePromotionList()
                })
            }, t.prototype.showWebEvent = function(e) {
                var t = this;
                if (!this.webViewReady) {
                    var i = this.getFace(".id-promotionListContainer");
                    this.gotoAndPlay(i, "preloader"), this.webViewReady = !0, this.publisherService.initIngameWebViewCookies();
                    var n = this.convertFace(".id-webPromotion"),
                        r = e && d.default.isUrl(e.info.webpageAddr);
                    n.src = r ? e.info.webpageAddr : this.promotionService.getDailyQuestPromotionUrl(), n.once(a.EventEx.LOAD, function() {
                        return t.gotoAndPlay(i, "intro")
                    })
                }
                this.inputService.overrideKeyboard("promotion"), this.visible(".id-webPromotion", !0), this.visible(".id-promotionList", !1), this.bindTabButtons(1)
            }, t.prototype.clearPromotion = function() {
                this.inputService.clearKeyboardOverride("promotion"), this.bindTabButtons(0), this.promotionItems.applyCollection([])
            }, t.prototype.renderPromotion = function(e, t) {
                if (this.inputService.overrideKeyboard("promotion"), this.visible(".id-webPromotion", !1), this.visible(".id-promotionList", !0), !t) {
                    var i = this.getPromotionByKind(e);
                    this.setPromotionItems(i)
                }
                this.bindTabButtons(e)
            }, t.prototype.setPromotionItems = function(e) {
                var t = this.getFace(".id-promotionList").htmlElement;
                this.promotionItems.applyCollection(e);
                var i = this.getFace(".id-promotionList .id-promotionItem"),
                    n = i ? i.height : 0;
                e.length > 6 ? ($(t).perfectScrollbar({
                    suppressScrollX: !0,
                    wheelSpeed: 0
                }), setTimeout(function() {
                    $(t).perfectScrollbar("update");
                    var i = _.findIndex(e, {
                        isFocused: !0
                    });
                    void 0 !== i && i >= 0 && (t.scrollTop = n * Math.floor(i / 2))
                }, 1e3)) : $(t).perfectScrollbar("destroy")
            }, t.prototype.getPromotionByKind = function(e, t, i) {
                var n = r(this.serverTimeService.time),
                    o = i ? i.promotions : this.reduxProps.promotions || [],
                    a = _.filter(o, function(e) {
                        return "WEBEVENT" !== e.info.type && e.info.show.isShown && n.isSameOrAfter(e.info.show.startAt)
                    }),
                    s = _.filter(a, function(t) {
                        var i = r(t.info.condition.startAt);
                        return 2 === e ? i <= n : i > n
                    });
                return this.proceedings = 2 === e ? s.length : a.length - s.length, this.expecteds = a.length - this.proceedings, _.map(s, function(e) {
                    return {
                        promotion: e,
                        isFocused: e.info.id === t
                    }
                })
            }, t.prototype.update = function(e) {
                this.reduxProps.showPromotionList !== e.showPromotionList && (e.showPromotionList ? this.openPromotionList(e) : this.closePromotionList()), this.bindTabButtons(0)
            }, t.prototype.openPromotionList = function(e) {
                var t = this,
                    i = this.getFace(".id-promotionListContainer");
                i.visible = !0;
                var n = _.find(e.promotions, function(t) {
                        return t.info.id === e.focusedOnPromotionList
                    }),
                    o = !n || "WEBEVENT" === n.info.type,
                    s = !n || r(n.info.condition.startAt) < r(this.serverTimeService.time) ? 2 : 3,
                    c = this.getPromotionByKind(s, e.focusedOnPromotionList, e);
                o || (this.setPromotionItems(c), this.gotoAndPlay(".id-promotionListContainer", "default", !0)), this.stage.once(a.EventEx.STOP, function() {
                    i.visible = !0, o ? t.showWebEvent(n) : t.renderPromotion(s, !0)
                }), this.stage.gotoAndPlay("intro")
            }, t.prototype.closePromotionList = function() {
                var e = this;
                "intro" === this.stage.currentLabel && (this.webViewReady = !1, this.stage.gotoAndPlay("outro"), this.stage.once(a.EventEx.STOP, function() {
                    $("#" + u).remove(), e.convertFace(".id-webPromotion").src = "", e.clearPromotion()
                }))
            }, t.prototype.mapStateToProps = function(e) {
                return e.promotion
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("promotionService")], p.prototype, "promotionService", void 0), n.__decorate([o.autowired("inputService")], p.prototype, "inputService", void 0), n.__decorate([o.autowired("publisherService")], p.prototype, "publisherService", void 0), n.__decorate([o.autowired("$transitions")], p.prototype, "$transitions", void 0), n.__decorate([o.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([o.autowired("serverTimeService")], p.prototype, "serverTimeService", void 0), t.PromotionListBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                this.hasSize(this.face, !0), this.face.setCustomStyle({
                    position: "relative",
                    display: "inline-block"
                }), this.on(this.face, o.MouseEventEx.CLICK, e.onClick)
            }, t.prototype.update = function(e) {
                this.bindText(this.face, e.label), this.face.selected = e.selected
            }, t
        }(r.Binder);
    t.TabButtonBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(5),
        o = i(1),
        a = i(13),
        s = i(2),
        c = i(8),
        d = i(1181),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(this.face, !0), this.rewardList = this.addChildBinder(".id-rewardList", d.PromotionRewardListBinder, []), this.getFace(".id-bannerImageButton").on(s.MouseEventEx.MOUSE_OVER, function(t) {
                    return e.onBannerMouseOver(t)
                }), this.getFace(".id-bannerImageButton").on(s.MouseEventEx.MOUSE_OUT, function() {
                    return e.onBannerMouseOut()
                }), this.hasSize(".id-titleContainer", !0), this.hasSize(".id-enterWeb", !0), this.getFace(".id-enterWeb").on(s.MouseEventEx.CLICK, function() {
                    return e.promotionService.openLink(e.props.promotion)
                }), this.hasSize(".LoopingBody", !0), this.visible(".id-focusEffect", !1)
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.promotion.info;
                this.gotoAndStop(".id-titleContainer", this.promotionService.isComplete(e.promotion) ? "complete" : "progress"), this.bindHtml(".id-titleLabel", this.getTitleLabel(e.promotion)), this.bindHtml(".id-descLabel", i.desc), this.translate(".id-dateLabel", r(i.condition.startAt).format("MMM Do") + " ~ " + r(i.condition.endAt).format("MMM Do")), this.drawExternalImage(".id-bannerImageButton .id-bannerImage", this.$filter("cdn")(i.imageCdn)), this.visible(".id-enterWeb", void 0 !== i.webpageAddr), e.isFocused && (this.visible(".id-focusEffect", !0), this.getFace(".id-focusEffect").once(c.EventEx.STOP, function() {
                    t.visible(".id-focusEffect", !1)
                }), this.gotoAndPlay(".id-focusEffect", "in"));
                var n = this.getDisplayableRewardItems();
                this.rewardList.setProps(n)
            }, t.prototype.onBannerMouseOver = function(e) {
                this.tooltipService.show(this.getFace(".id-bannerImage"), "right", a.TooltipType.Promotion, this.props.promotion)
            }, t.prototype.onBannerMouseOut = function() {
                this.tooltipService.hide()
            }, t.prototype.getDisplayableRewardItems = function() {
                var e = [],
                    t = this.props.promotion.info;
                switch (t.type) {
                    case "DT":
                        _.map(t.condition.dt, function(t) {
                            _.map(t.rewards, function(t) {
                                return e.push(t)
                            })
                        });
                        break;
                    case "LOGIN":
                        _.forEach(t.condition.login.rewards, function(t) {
                            return e.push(t)
                        });
                        break;
                    case "MATCHREWARD":
                        var i = t.condition.matchReward.bonus;
                        i.sp && e.push({
                            type: "SP_PERCENT",
                            code: 10013,
                            count: i.sp
                        }), i.exp && e.push({
                            type: "EXP_PERCENT",
                            code: 10014,
                            count: i.exp
                        });
                        break;
                    case "MATCHCOUNT":
                        _.forEach(t.condition.matchCount.rewards, function(t) {
                            return e.push(t)
                        })
                }
                return _.compact(_.map(e, function(e, t) {
                    if (!(4 <= t)) return e
                }))
            }, t.prototype.getTitleLabel = function(e) {
                var t = ["#9ea1a2", "#9ea1a2", "#666666", "#15cf57"],
                    i = this.$filter("translate"),
                    n = this.promotionService.getStatus(e),
                    r = i("PROMOTION_TYPE_DUMMY");
                switch (e.info.type) {
                    case "DT":
                        r = i("PROMOTION_TYPE_KEEPCONNECTION");
                        break;
                    case "LOGIN":
                        r = i("PROMOTION_TYPE_CONNECTIONREWARD");
                        break;
                    case "MATCHREWARD":
                        r = i("PROMOTION_TYPE_CONNECTIONBOOST");
                        break;
                    case "MATCHCOUNT":
                        r = i("PROMOTION_TYPE_MATCHCOUNT")
                }
                return '<span style="color:' + t[n] + '">' + r + " " + e.info.title + "</span>"
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("tooltipService")], l.prototype, "tooltipService", void 0), n.__decorate([o.autowired("promotionService")], l.prototype, "promotionService", void 0), n.__decorate([o.autowired("$filter")], l.prototype, "$filter", void 0), t.PromotionListItemBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1182),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(this.face, !0), this.rewardListBinder = this.addChildBinder(".id-rewardItem", r.CollectionBinder, {
                    instanceBinder: o.PromotionRewardListItemBinder
                })
            }, t.prototype.update = function(e) {
                var t = _.values(e);
                this.rewardListBinder.applyCollection(t), t.length > 4 ? $(this.face.htmlElement).perfectScrollbar({
                    suppressScrollY: !0
                }) : $(this.face.htmlElement).perfectScrollbar("destroy")
            }, t.prototype.onDetach = function() {
                $(this.face.htmlElement).perfectScrollbar("destroy")
            }, t
        }(r.Binder);
    t.PromotionRewardListBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(13),
        a = i(2),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(this.face, !0), this.face.on(a.MouseEventEx.MOUSE_OVER, function(t) {
                    return e.onMouseOver(t)
                }), this.face.on(a.MouseEventEx.MOUSE_OUT, function() {
                    return e.onMouseOut()
                })
            }, t.prototype.update = function(e) {
                var t = e.code,
                    i = e.type,
                    n = e.count;
                this.drawExternalImage(".id-itemImage", this.$filter("itemCardImg")(i, t)), "ITEM" === i && this.bindText(".id-itemNum", n)
            }, t.prototype.onMouseOver = function(e) {
                var t = this,
                    i = this.getProps();
                this.shownTooltip = i;
                var n = {
                    marginLeft: 4
                };
                if ("ITEM" === i.type) {
                    var r = function(i) {
                        return t.tooltipService.show(e, "horizontal", o.TooltipType.ItemCard, i, n)
                    };
                    this.inventoryService.extendItemDetails(i).then(function(e) {
                        t.shownTooltip === i && r(e)
                    })
                } else if ("SP_PERCENT" === i.type || "EXP_PERCENT" === i.type) this.tooltipService.show(e, "horizontal", o.TooltipType.PromotionRewardBoost, i, n);
                else {
                    var a = this.$filter("rewardName")(i.type, i.code, i.count, i.opts),
                        s = this.$filter("translate")(i.type + "_" + i.code + "_DESC");
                    this.tooltipService.show(e, "horizontal", o.TooltipType.ItemCard, {
                        name: a,
                        desc: s,
                        count: 1
                    }, n)
                }
            }, t.prototype.onMouseOut = function() {
                this.shownTooltip = null, this.tooltipService.hide()
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("inventoryService")], s.prototype, "inventoryService", void 0), n.__decorate([r.autowired("tooltipService")], s.prototype, "tooltipService", void 0), n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), t.PromotionRewardListItemBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(68),
        o = i(167),
        a = i(1),
        s = i(28),
        c = i(191),
        d = i(1184),
        l = i(1187),
        u = i(1188),
        p = i(1189),
        h = i(2),
        f = i(1190),
        v = {
            graphic: "graphic",
            inputkey: "inputkey",
            sound: "sound",
            ingame: "game",
            info: "info"
        },
        m = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.on(h.MouseEventEx.CLICK, function() {
                    return e.dispatch(r.activateItem(e.props.id))
                });
                var t = this.props.id;
                this.translate(".id-textField", "GAMEOPTION_" + t.toUpperCase()), this.face.hasSize = !0, this.face.setCustomStyle({
                    display: "inline-block",
                    position: "relative"
                }), this.apply(".id-menuIconContainer", s.gotoAndStop, v[t])
            }, t.prototype.update = function(e) {
                this.apply(this.face, s.param, {
                    selected: e.isActive
                })
            }, t
        }(a.Binder),
        g = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.panels = {}, t
            }
            return n.__extends(t, e), t.prototype.showConfiguration = function(e) {
                var t = this;
                this.uistateNotifyService.setSubState(7, e), e ? (this.setVisible(e), this.stage.gotoAndPlay("in"), this.inputService.overrideKeyboard("config")) : (this.stage.gotoAndPlay("out"), this.stage.once("stop", function() {
                    return t.setVisible(e)
                }), this.inputService.clearKeyboardOverride("config"), this.dispatch(r.activateItem("graphic")))
            }, t.prototype.setVisible = function(e) {
                this.stage.visible = e
            }, t.prototype.onFaceReady = function() {
                this.setVisible(!1), this.bindButtons(), this.translate(".id-header .id-title", "GAMEOPTION_TITLE"), this.getFace(".ContentsContainer > .ScrollBounds").visible = !1, this.container.hasSize = !0, o.initialize(this.container.htmlElement, {
                    suppressScrollX: !0
                }), this.panels.graphic = this.addChildBinder(".id-graphicConfiguration", d.GraphicConfigBinder), this.panels.inputkey = this.addChildBinder(".id-inputkeyConfiguration", p.InputKeyConfigBinder), this.panels.sound = this.addChildBinder(".id-soundConfiguration", f.SoundConfigBinder), this.panels.ingame = this.addChildBinder(".id-gameConfiguration", l.InGameConfigBinder), this.panels.info = this.addChildBinder(".id-infoConfiguration", u.InfoConfigBinder), this.menuButtons = this.addChildBinder(this.getFace(".id-menuButton"), a.CollectionBinder, {
                    instanceBinder: m,
                    keyProperty: "id"
                })
            }, t.prototype.bindButtons = function() {
                var e = this,
                    t = this.mapFaces(".id-initialize", ".id-close", ".id-apply"),
                    i = t[0],
                    n = t[1],
                    r = t[2];
                this.translate(i, "GAMEOPTION_RESET"), this.translate(n, "GAMEOPTION_CONFIRM"), this.translate(r, "GAMEOPTION_APPLY"), i.on(h.MouseEventEx.CLICK, function() {
                    return e.initialize()
                }), n.on(h.MouseEventEx.CLICK, function() {
                    return e.close()
                }), r.on(h.MouseEventEx.CLICK, function() {
                    return e.applyConfig()
                })
            }, t.prototype.initialize = function() {
                var e = this.reduxProps.activeId;
                this.dispatch(r.initialize(e))
            }, t.prototype.discard = function(e) {
                var t = this.reduxProps.activeId;
                e = e || t, this.dispatch(r.discardStaging(e))
            }, t.prototype.applyConfig = function() {
                var e = this.reduxProps.activeId,
                    t = this.panels[e];
                t && t.applyConfig()
            }, t.prototype.close = function() {
                var e = this,
                    t = this.reduxProps,
                    i = t.configs,
                    n = t.activeId,
                    o = i[n],
                    a = !_.isEqual(o.staging, o.applied),
                    s = this.panels[n];
                if (a) return void this.popupService.draw("ConfirmCancelPopup", {
                    title: "GAMEOPTION_CLOSE_POPUP_TEXT",
                    description: "GAMEOPTION_CLOSE_POPUP_TEXT2",
                    confirm: function() {
                        s.applyConfig(), e.dispatch(r.show(!1))
                    },
                    cancel: function() {
                        e.discard(), e.dispatch(r.show(!1))
                    }
                });
                this.dispatch(r.show(!1))
            }, t.prototype.onDetach = function() {
                if (this.stage.visible) {
                    var e = this.reduxProps,
                        t = e.configs,
                        i = e.activeId,
                        n = t[i];
                    !_.isEqual(n.staging, n.applied) && this.discard(), this.dispatch(r.show(!1)), this.showConfiguration(!1)
                }
                o.destroy(this.container.htmlElement)
            }, t.prototype.onActivePanelChange = function(e) {
                var t = this,
                    i = this.reduxProps,
                    n = i.configs,
                    r = i.activeId,
                    a = n[r];
                if (!_.isEqual(a.staging, a.applied)) {
                    var c = r,
                        d = this.panels[c];
                    this.popupService.draw("ConfirmCancelPopup", {
                        title: "GAMEOPTION_CHANGETAB_POPUP_TEXT",
                        description: "GAMEOPTION_CHANGETAB_POPUP_DESC",
                        confirm: function() {
                            d.applyConfig()
                        },
                        cancel: function() {
                            t.discard(c)
                        }
                    })
                }
                this.apply(".id-verticalLine", s.classNames, e.activeId), setTimeout(function() {
                    return o.update(t.container.htmlElement)
                }, 1e3)
            }, t.prototype.onActiveConfigItemChange = function(e) {
                var t = this.mapFaces(".id-initialize", ".id-apply"),
                    i = t[0],
                    n = t[1];
                i.enabled = !_.isEqual(e.default, e.staging), n.enabled = !_.isEqual(e.staging, e.applied)
            }, t.prototype.mapStateToProps = function(e) {
                return e.configuration
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                void 0 !== t.isShow && t.isShow !== e.isShow && this.showConfiguration(e.isShow), t.activeId && t.activeId !== e.activeId && this.onActivePanelChange(e);
                var i = e.configs[e.activeId];
                this.activeItem && this.activeItem === i || this.onActiveConfigItemChange(i), this.activeItem = i, this.menuButtons.applyCollection(_.map(c.ConfigOrder, function(t) {
                    return e.configs[t]
                })), _.each(this.panels, function(i, n) {
                    t.configs && t.configs[n] === e.configs[n] || i.setProps(e.configs[n])
                })
            }, t
        }(a.StageBinder);
    n.__decorate([a.autowired("externalService")], g.prototype, "externalService", void 0), n.__decorate([a.autowired("popupService")], g.prototype, "popupService", void 0), n.__decorate([a.autowired("inputService")], g.prototype, "inputService", void 0), n.__decorate([a.autowired("uistateNotifyService")], g.prototype, "uistateNotifyService", void 0), n.__decorate([a.select(".ContentsContainer")], g.prototype, "container", void 0), t.ConfigurationBinder = g
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(192),
        a = i(191),
        s = i(2),
        c = i(8),
        d = i(68),
        l = i(1185),
        u = i(1186),
        p = i(28),
        h = i(4),
        f = i(303),
        v = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.bindFrame = function() {
                    t.bindText(t.frameNum, t.frameRange.value + "FPS")
                }, t.changeFrame = function() {
                    t.dispatch(d.updateStaging("graphic", {
                        frameLimit: t.frameRange.value
                    }))
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-frameLimit .id-title", "GAMEOPTION_GRAPHIC_FRAMERATE"), this.translate(".id-frameSetting .id-title", "GAMEOPTION_GRAPHIC_FRAMELIMIT"), this.frameLimit.items = this.service.getFrameLimits(), this.frameLimit.on(c.EventEx.CHANGE, function() {
                    e.setFrameLimit(e.frameLimit.selectedIndex)
                }), this.frameRange.min = 30, this.frameRange.max = 300, this.frameRange.on(c.EventEx.CHANGE, this.bindFrame), this.frameRange.on(f.DragEvent.DRAG_END, this.changeFrame)
            }, t.prototype.setFrameLimit = function(e) {
                var t = this.frameLimit.items[e].mode;
                this.dispatch(d.updateStaging("graphic", {
                    frameLimitMode: t
                }))
            }, t.prototype.shouldUpdate = function(e) {
                return this.props.frameLimitMode !== e.frameLimitMode || this.props.frameLimit !== e.frameLimit
            }, t.prototype.update = function(e) {
                var t = e.frameLimitMode,
                    i = e.frameLimit;
                this.frameLimit.selectedIndex = _.findIndex(this.frameLimit.items, {
                    mode: t
                });
                var n = 2 === t;
                this.visible(".id-frameSetting", n), n && (this.frameRange.value = i, this.bindFrame())
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("graphicConfigService")], v.prototype, "service", void 0), n.__decorate([r.select(".id-frameLimit .id-dropdown")], v.prototype, "frameLimit", void 0), n.__decorate([r.select(".id-frameSetting .id-frameRange")], v.prototype, "frameRange", void 0), n.__decorate([r.select(".id-frameSetting .id-frameNum")], v.prototype, "frameNum", void 0);
    var m = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.bindTexts(), this.bindCheckboxes(), this.frameLimit = this.addChildBinder(this.face, v), this.simpleSetting = this.addChildBinder(this.getFace(".id-simpleSetting"), l.SimpleSettingBinder), this.detailedSetting = this.addChildBinder(this.getFace(".id-detailedSettings"), u.DetailedSettingBinder), this.initDropdowns(), this.gotoAndPlay(this.face, "in")
        }, t.prototype.initDropdowns = function() {
            var e = this;
            this.displayMode = this.convertFace(".id-displayMode .id-dropdown"), this.displayMode.items = this.service.getDisplayModes(), this.displayMode.on(c.EventEx.CHANGE, function() {
                e.setDisplayMode(e.displayMode.selectedIndex)
            }), this.resolution = this.convertFace(".id-resolution .id-dropdown"), this.resolution.items = this.service.getResolutions(), this.resolution.on(c.EventEx.CHANGE, function() {
                e.setResolution(e.resolution.selectedIndex)
            })
        }, t.prototype.bindDropdownButtons = function(e) {
            var t = e.staging,
                i = t.fullscreen,
                n = t.width,
                r = t.height;
            this.displayMode.selectedIndex = _.findIndex(this.displayMode.items, {
                mode: i
            }), this.resolution.selectedIndex = _.findIndex(this.resolution.items, {
                width: n,
                height: r
            }), this.resolution.enabled = 2 !== i
        }, t.prototype.setDisplayMode = function(e) {
            var t = this.props,
                i = t.id,
                n = t.staging,
                r = this.displayMode.items[e].mode;
            r !== n.fullscreen && this.dispatch(d.updateStaging(i, {
                fullscreen: r
            }))
        }, t.prototype.setResolution = function(e) {
            var t = this.resolution.items[e],
                i = t.width,
                n = t.height,
                r = this.props,
                o = r.id,
                a = r.staging;
            i === a.width && n === a.height || this.dispatch(d.updateStaging(o, {
                width: i,
                height: n
            }))
        }, t.prototype.changeMode = function(e) {
            var t = this.props,
                i = t.id;
            e !== t.staging.graphic && this.dispatch(d.updateStaging(i, n.__assign({}, this.service.getGraphicPreset(e), {
                graphic: e
            })))
        }, t.prototype.isAuto = function(e) {
            return e.staging.graphic === a.GraphicMode.Auto
        }, t.prototype.toggleAuto = function() {
            var e = this.isAuto(this.props) ? Math.min(this.props.applied.maxGraphic, a.GraphicMode.Medium) : a.GraphicMode.Auto;
            this.changeMode(e)
        }, t.prototype.handleChange = function(e) {
            var t = this,
                i = e.applied,
                n = e.staging,
                r = this.isAuto(e);
            this.apply("> .id-autoCheck", p.param, {
                selected: r
            });
            var o = {
                onChange: function(e) {
                    return t.changeMode(e)
                },
                graphic: n.graphic,
                maxGraphic: i.maxGraphic,
                isAuto: r
            };
            this.frameLimit.setProps(n), this.simpleSetting.setProps(o), this.detailedSetting.setProps(n), this.bindDropdownButtons(e), this.bindSettingsOpacity(r)
        }, t.prototype.bindTexts = function() {
            this.translate(".id-displayTitle", "GAMEOPTION_DISPLAY"), this.translate(".id-displayMode .id-title", "GAMEOPTION_GRAPHIC_SCREENMODE"), this.translate(".id-resolution .id-title", "GAMEOPTION_GRAPHIC_RESOLUTION"), this.translate(".id-graphicTitle", "GAMEOPTION_GRAPHIC"), this.translate(".id-simpleSetting .id-title", "GAMEOPTION_GRAPHIC_GRAPHICSETTING_SIMPLE"), this.translate(".id-autoCheck .id-checkboxName", "GAMEOPTION_GRAPHIC_GRAPHICSETTING_AUTO")
        }, t.prototype.bindSettingsOpacity = function(e) {
            this.getFace(".id-simpleSetting").alpha = e ? .3 : 1
        }, t.prototype.bindCheckboxes = function() {
            var e = this;
            this.getFace("> .id-autoCheck").on(s.MouseEventEx.CLICK, function() {
                return e.toggleAuto()
            })
        }, t.prototype.applyConfig = function() {
            var e = this,
                t = this.props,
                i = t.applied,
                n = t.staging;
            this.service.setConfig(n), this.confirm().catch(function(t) {
                return e.service.setConfig(i)
            })
        }, t.prototype.confirm = function() {
            var e, t = this,
                i = Date.now(),
                n = 15,
                r = function() {
                    return t.$filter("template")({
                        rollbackseconds: n
                    }, "GAMEOPTION_AFTERAPPLY_POPUP_TIMER")
                },
                o = h.default.defer();
            this.popupService.draw("ConfirmCancelPopup", {
                title: "GAMEOPTION_AFTERAPPLY_POPUP_TEXT",
                description: r(),
                confirmString: "COMMON_POPUP_EXIT_BUTTON_CONFIRM",
                confirm: function() {
                    clearTimeout(e), o.resolve()
                },
                cancel: function() {
                    clearTimeout(e), o.reject(new Error("cancel"))
                }
            });
            var a = function() {
                    t.popupService.closePopup(), o.reject(new Error("timeup"))
                },
                s = function() {
                    var o = 15 - Math.floor((Date.now() - i) / 1e3);
                    if (o < n && (n = o, t.popupService.updateMessage({
                            description: r()
                        })), n <= 0) return a();
                    e = setTimeout(s, 33)
                };
            return s(), o.promise
        }, t.prototype.update = function(e) {
            this.handleChange(e);
            var t = this.face.visible;
            this.face.visible = e.isActive, e.isActive && !t && this.gotoAndPlay(this.face, "in")
        }, t
    }(o.ConfigPanelBinder);
    n.__decorate([r.autowired("graphicConfigService")], m.prototype, "service", void 0), n.__decorate([r.autowired("popupService")], m.prototype, "popupService", void 0), n.__decorate([r.autowired("$filter")], m.prototype, "$filter", void 0), t.GraphicConfigBinder = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(191),
        a = i(2),
        s = i(28),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.nameToMode = function(e) {
                switch (e) {
                    case "low":
                        return o.GraphicMode.Low;
                    case "normal":
                        return o.GraphicMode.Medium;
                    case "high":
                        return o.GraphicMode.High;
                    case "veryHigh":
                        return o.GraphicMode.Ultra
                }
                return o.GraphicMode.Medium
            }, t.prototype.langId = function(e) {
                return "GAMEOPTION_GRAPHIC_SIMPLE_" + o.GraphicMode[e].toUpperCase()
            }, t.prototype.bindButtons = function(e) {
                var t = this,
                    i = e.onChange,
                    n = this.face.$$("> .comp-Button");
                this.buttons = {}, n.forEach(function(e) {
                    var n = t.nameToMode(e.name),
                        r = t.langId(n);
                    t.translate(e.textField, r), e.on(a.MouseEventEx.CLICK, function() {
                        return i(n)
                    }), t.buttons[n] = e
                })
            }, t.prototype.update = function(e) {
                var t = this;
                this.buttons || this.bindButtons(e), _.each(this.buttons, function(i, n) {
                    var r = parseInt(n);
                    t.apply(i, s.param, {
                        selected: e.graphic === r,
                        enabled: !e.isAuto && r <= e.maxGraphic
                    })
                })
            }, t
        }(r.Binder);
    t.SimpleSettingBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(191),
        a = i(8),
        s = i(68),
        c = i(81),
        d = [{
            key: "reflectQuality",
            type: o.GraphicFeatureQuality,
            title: "GAMEOPTION_GRAPHIC_REFLECTION"
        }, {
            key: "shadowQuality",
            type: o.GraphicFeatureQuality,
            title: "GAMEOPTION_GRAPHIC_SHADOW"
        }, {
            key: "textureQuality",
            type: o.GraphicFeatureQuality,
            title: "GAMEOPTION_GRAPHIC_TEXTURE"
        }, {
            key: "meshQuality",
            type: o.GraphicFeatureQuality,
            title: "GAMEOPTION_GRAPHIC_MESH"
        }, {
            key: "terrainQuality",
            type: o.GraphicFeatureQuality,
            title: "GAMEOPTION_GRAPHIC_TERRAIN"
        }, {
            key: "effectQuality",
            type: o.GraphicFeatureQuality,
            title: "GAMEOPTION_GRAPHIC_EFFECT"
        }, {
            key: "undergrowthQuality",
            type: o.GraphicFeatureQuality,
            title: "GAMEOPTION_GRAPHIC_UNDERGROWTH"
        }, {
            key: "ambientOcclusion",
            type: o.AmbientOcclusion,
            title: "GAMEOPTION_GRAPHIC_AMBIENT"
        }, {
            key: "antialiasing",
            type: o.AntiAliasing,
            title: "GAMEOPTION_GRAPHIC_ANTIALIASING"
        }, {
            key: "anisotropicFilter",
            type: o.AnisotropicFilter,
            title: "GAMEOPTION_GRAPHIC_ANISOTROPIC"
        }, {
            key: "transparentFogging",
            isBoolean: !0,
            title: "GAMEOPTION_GRAPHIC_FOGGING"
        }, {
            key: "motionBlur",
            isBoolean: !0,
            title: "GAMEOPTION_GRAPHIC_MOTIONBLUR"
        }],
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(this.face, !0), this.itemBinders = d.map(function(t, i) {
                    return e.addChildBinder(".id-settingItem" + (i + 1), u, t)
                })
            }, t.prototype.shouldUpdate = function(e) {
                return !c.shallowEqual(this.props, e)
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.graphic === o.GraphicMode.Auto;
                d.forEach(function(n, r) {
                    t.itemBinders[r].setProps({
                        isAuto: i,
                        value: e[n.key]
                    })
                })
            }, t
        }(r.Binder);
    t.DetailedSettingBinder = l;
    var u = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            var t = this;
            this.hasSize(this.face, !0), this.face.setCustomStyle({
                position: "relative"
            });
            var i = e.key,
                n = e.title,
                r = e.type,
                o = e.isBoolean;
            this.translate(".id-title", n), this.key = i;
            var c = this.fromInjector("$filter")("translate"),
                d = o ? [{
                    value: !0,
                    text: c("GAMEOPTION_GRAPHIC_ON")
                }, {
                    value: !1,
                    text: c("GAMEOPTION_GRAPHIC_OFF")
                }] : _.keys(r).filter(function(e) {
                    return !/^\d$/.test(e)
                }).map(function(e) {
                    return {
                        value: r[e],
                        text: c("GAMEOPTION_GRAPHIC_" + e)
                    }
                });
            this.dropdown.items = d, this.dropdown.on(a.EventEx.CHANGE, function() {
                var e = t.dropdown.selectedItem.value;
                if (e !== t.props.value) {
                    t.dispatch(s.updateStaging("graphic", (n = {}, n[i] = e, n)));
                    var n
                }
            })
        }, t.prototype.shouldUpdate = function(e) {
            return !c.shallowEqual(this.props, e)
        }, t.prototype.update = function(e) {
            this.dropdown.selectedIndex = _.findIndex(this.dropdown.items, {
                value: e.value
            }), this.dropdown.enabled = !e.isAuto
        }, t
    }(r.Binder);
    n.__decorate([r.select(".id-dropdown")], u.prototype, "dropdown", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(192),
        a = i(2),
        s = i(68),
        c = i(13),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-displayTitle", "GAMEOPTION_INGAME_DISPLAY"), this.translate(".id-title1", "GAMEOPTION_INGAME_DIRECTIONSWAYSYSTEM"), this.translate(".id-title2", "GAMEOPTION_INGAME_BECHATTING"), this.translate(".id-title3", "GAMEOPTION_INGAME_OPERATION_KEYS_GUIDE"), this.translate(".id-title4", "GAMEOPTION_INGAME_ACTION_FEEDBACK"), this.translate(".id-title5", "GAMEOPTION_INGAME_ROOM_MIRROR"), this.translate(".id-autoAssistTitle", "GAMEOPTION_INGAME_CONTROL"), this.translate(".id-titleABS", "GAMEOPTION_INGAME_ABS"), this.translate(".id-titleESC", "GAMEOPTION_INGAME_ESC"), this.translate(".id-titleHCS", "GAMEOPTION_INGAME_HCS"), this.hasSize(".id-autoAssistTitle", !0), this.hasSize(".id-autoAssistTitle .id-tooltipButton", !0), this.chatCheckbox = this.convertFace(".id-chatOn"), this.chatLable = this.convertFace(".id-title2"), this.chatCheckbox && (this.translate(this.chatCheckbox, "GAMEOPTION_INGAME_CHATTINGDISPLAY"), this.getFace(this.chatCheckbox).on(a.MouseEventEx.CLICK, function() {
                    e.chatCheckbox.selected = !e.chatCheckbox.selected;
                    var t = e.props.id;
                    e.dispatch(s.updateStaging(t, {
                        chatOn: e.chatCheckbox.selected
                    }))
                })), this.flevronCheckbox = this.convertFace(".id-indicatorOn"), this.flevronCheckbox && (this.translate(this.flevronCheckbox, "GAMEOPTION_INGAME_FLEVRONDISPLAY"), this.getFace(this.flevronCheckbox).on(a.MouseEventEx.CLICK, function() {
                    e.flevronCheckbox.selected = !e.flevronCheckbox.selected;
                    var t = e.props.id;
                    e.dispatch(s.updateStaging(t, {
                        flevron: e.flevronCheckbox.selected
                    }))
                })), this.keyGuideCheckbox = this.convertFace(".id-guideOn"), this.keyGuideCheckbox && (this.translate(this.keyGuideCheckbox, "GAMEOPTION_INGAME_OPERATION_KEYS_GUIDE_DISPLAY"), this.getFace(this.keyGuideCheckbox).on(a.MouseEventEx.CLICK, function() {
                    e.keyGuideCheckbox.selected = !e.keyGuideCheckbox.selected;
                    var t = e.props.id;
                    e.dispatch(s.updateStaging(t, {
                        keyGuideOn: e.keyGuideCheckbox.selected
                    }))
                })), this.actionFeedbackCheckbox = this.convertFace(".id-actionFeedbackOn"), this.actionFeedbackCheckbox && (this.translate(this.actionFeedbackCheckbox, "GAMEOPTION_INGAME_ACTION_FEEDBACK_DETAIL"), this.getFace(this.actionFeedbackCheckbox).on(a.MouseEventEx.CLICK, function() {
                    e.actionFeedbackCheckbox.selected = !e.actionFeedbackCheckbox.selected;
                    var t = e.props.id;
                    e.dispatch(s.updateStaging(t, {
                        actionFeedbackOn: e.actionFeedbackCheckbox.selected
                    }))
                })), this.roomMirrorCheckbox = this.convertFace(".id-roomMirrorOn"), this.roomMirrorCheckbox && (this.translate(this.roomMirrorCheckbox, "GAMEOPTION_INGAME_ROOM_MIRROR_DETAIL"), this.getFace(this.roomMirrorCheckbox).on(a.MouseEventEx.CLICK, function() {
                    e.roomMirrorCheckbox.selected = !e.roomMirrorCheckbox.selected;
                    var t = e.props.id;
                    e.dispatch(s.updateStaging(t, {
                        roomMirrorOff: !e.roomMirrorCheckbox.selected
                    }))
                })), this.indicatorABS = this.convertFace(".id-indicatorABS"), this.indicatorABS && (this.translate(this.indicatorABS, "GAMEOPTION_INGAME_ABS_DETAIL"), this.getFace(this.indicatorABS).on(a.MouseEventEx.CLICK, function() {
                    e.indicatorABS.selected = !e.indicatorABS.selected;
                    var t = e.props.id;
                    e.dispatch(s.updateStaging(t, {
                        useAbs: e.indicatorABS.selected
                    }))
                })), this.indicatorESC = this.convertFace(".id-indicatorESC"), this.indicatorESC && (this.translate(this.indicatorESC, "GAMEOPTION_INGAME_ESC_DETAIL"), this.getFace(this.indicatorESC).on(a.MouseEventEx.CLICK, function() {
                    e.indicatorESC.selected = !e.indicatorESC.selected;
                    var t = e.props,
                        i = t.id;
                    t.staging;
                    e.dispatch(s.updateStaging(i, {
                        useEsc: e.indicatorESC.selected
                    }))
                })), this.indicatorHCS = this.convertFace(".id-indicatorHCS"), this.indicatorHCS && (this.translate(this.indicatorHCS, "GAMEOPTION_INGAME_HCS_DETAIL"), this.getFace(this.indicatorHCS).on(a.MouseEventEx.CLICK, function() {
                    e.indicatorHCS.selected = !e.indicatorHCS.selected;
                    var t = e.props,
                        i = t.id;
                    t.staging;
                    e.dispatch(s.updateStaging(i, {
                        useHcs: e.indicatorHCS.selected
                    }))
                })), this.on(".id-autoAssistTitle .id-tooltipButton", a.MouseEventEx.MOUSE_OVER, function(t) {
                    var i = e.$filter("translate")("GAMEOPTION_INGAME_CONTROL_TOOLTIP");
                    e.tooltipService.show(t, "right", c.TooltipType.Basic, i, {}, {
                        marginLeft: 5,
                        width: 465
                    })
                }), this.on(".id-autoAssistTitle .id-tooltipButton", a.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.handleChange = function(e) {
                var t = e.staging;
                this.flevronCheckbox && (this.flevronCheckbox.selected = t.flevron), this.chatCheckbox && (this.chatCheckbox.selected = t.chatOn), this.keyGuideCheckbox && (this.keyGuideCheckbox.selected = t.keyGuideOn), this.actionFeedbackCheckbox && (this.actionFeedbackCheckbox.selected = t.actionFeedbackOn), this.roomMirrorCheckbox && (this.roomMirrorCheckbox.selected = !t.roomMirrorOff), this.indicatorABS && (this.indicatorABS.selected = t.useAbs), this.indicatorESC && (this.indicatorESC.selected = t.useEsc), this.indicatorHCS && (this.indicatorHCS.selected = t.useHcs), this.visible(this.chatLable, !0)
            }, t.prototype.applyConfig = function() {
                var e = this.props.staging;
                this.service.setConfig(e)
            }, t.prototype.update = function(e) {
                this.handleChange(e);
                var t = this.face.visible;
                this.visible(this.face, e.isActive), e.isActive && !t && this.gotoAndPlay(this.face, "in")
            }, t
        }(o.ConfigPanelBinder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("inGameConfigService")], d.prototype, "service", void 0), n.__decorate([r.autowired("tooltipService")], d.prototype, "tooltipService", void 0), n.__decorate([r.autowired("featureSetService")], d.prototype, "featureSetService", void 0), t.InGameConfigBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(192),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.bindLicense = _.once(function() {
                    var e = t.$templateCache.get("templates/3rdpartylicenses.html");
                    e += t.$templateCache.get("templates/vehiclelicenses.html"), e += t.$templateCache.get("templates/musiclicenses.html"), t.container.html('<div class="TextContainer">' + e + "</div>")
                }), t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-licenseLabel", "GAMEOPTION_INFO_OPENSOURCE"), this.container = $(this.getFace(".id-licenseContainer").htmlElement)
            }, t.prototype.update = function(e) {
                var t = this.face.visible;
                this.face.visible = e.isActive, e.isActive && !t && (this.bindLicense(), this.gotoAndPlay(this.face, "in"))
            }, t
        }(o.ConfigPanelBinder);
    n.__decorate([r.autowired("$templateCache")], a.prototype, "$templateCache", void 0), t.InfoConfigBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(22),
        o = i(1),
        a = i(192),
        s = i(2),
        c = i(68),
        d = i(286),
        l = i(29),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.mappingKey = {
                    throttle: {
                        id: ".id-mappingKeyboard1",
                        lang: "GAMEOPTION_INPUTKEY_ACC"
                    },
                    brake: {
                        id: ".id-mappingKeyboard2",
                        lang: "GAMEOPTION_INPUTKEY_BRAKE"
                    },
                    secondBrake: {
                        id: ".id-mappingKeyboard3",
                        lang: "GAMEOPTION_INPUTKEY_SECOND_BRAKE",
                        hideTitle: !0
                    },
                    steeringLeft: {
                        id: ".id-mappingKeyboard4",
                        lang: "GAMEOPTION_INPUTKEY_STRLEFT"
                    },
                    steeringRight: {
                        id: ".id-mappingKeyboard5",
                        lang: "GAMEOPTION_INPUTKEY_STRRIGHT"
                    },
                    nitro: {
                        id: ".id-mappingKeyboard6",
                        lang: "GAMEOPTION_INPUTKEY_NITRO"
                    },
                    handBrake: {
                        id: ".id-mappingKeyboard7",
                        lang: "GAMEOPTION_INPUTKEY_DRIFT"
                    },
                    useItem: {
                        id: ".id-mappingKeyboard8",
                        lang: "GAMEOPTION_INPUTKEY_ITEM"
                    },
                    useItem2: {
                        id: ".id-mappingKeyboard9",
                        lang: "GAMEOPTION_INPUTKEY_ITEM2"
                    },
                    reset: {
                        id: ".id-mappingKeyboard10",
                        lang: "GAMEOPTION_INPUTKEY_RESET"
                    },
                    horn: {
                        id: ".id-mappingKeyboard11",
                        lang: "GAMEOPTION_INPUTKEY_HORN"
                    },
                    rearView: {
                        id: ".id-mappingKeyboard12",
                        lang: "GAMEOPTION_INPUTKEY_CAMBACK"
                    },
                    leftView: {
                        id: ".id-mappingKeyboard13",
                        lang: "GAMEOPTION_INPUTKEY_CAMLEFT"
                    },
                    rightView: {
                        id: ".id-mappingKeyboard14",
                        lang: "GAMEOPTION_INPUTKEY_CAMRIGHT"
                    },
                    toggleCamera: {
                        id: ".id-mappingKeyboard15",
                        lang: "GAMEOPTION_INPUTKEY_CAMTURN"
                    },
                    toggleMinimap: {
                        id: ".id-mappingKeyboard16",
                        lang: "GAMEOPTION_INPUTKEY_MINIMAP"
                    }
                }, t.mappingPad = {
                    throttle: {
                        id: ".id-mappingGamepad1",
                        lang: "GAMEOPTION_INPUTKEY_ACC"
                    },
                    brake: {
                        id: ".id-mappingGamepad2",
                        lang: "GAMEOPTION_INPUTKEY_BRAKE"
                    },
                    steeringLeft: {
                        id: ".id-mappingGamepad3",
                        lang: "GAMEOPTION_INPUTKEY_PAD_STEERING"
                    },
                    nitro: {
                        id: ".id-mappingGamepad4",
                        lang: "GAMEOPTION_INPUTKEY_NITRO"
                    },
                    useItem: {
                        id: ".id-mappingGamepad5",
                        lang: "GAMEOPTION_INPUTKEY_ITEM"
                    },
                    useItem2: {
                        id: ".id-mappingGamepad6",
                        lang: "GAMEOPTION_INPUTKEY_ITEM2"
                    },
                    handBrake: {
                        id: ".id-mappingGamepad7",
                        lang: "GAMEOPTION_INPUTKEY_DRIFT"
                    },
                    reset: {
                        id: ".id-mappingGamepad8",
                        lang: "GAMEOPTION_INPUTKEY_RESET"
                    },
                    horn: {
                        id: ".id-mappingGamepad9",
                        lang: "GAMEOPTION_INPUTKEY_HORN"
                    },
                    rearView: {
                        id: ".id-mappingGamepad10",
                        lang: "GAMEOPTION_INPUTKEY_PAD_CAMERA"
                    },
                    toggleCamera: {
                        id: ".id-mappingGamepad11",
                        lang: "GAMEOPTION_INPUTKEY_CAMTURN"
                    },
                    toggleMinimap: {
                        id: ".id-mappingGamepad12",
                        lang: "GAMEOPTION_INPUTKEY_MINIMAP"
                    }
                }, t.staticMappingPad = ["throttle", "brake", "steeringLeft", "rearView", "toggleMinimap"], t.isProhibitedKeys = function() {
                    var e, t = ["ESCAPE", "F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8", "F9", "F10", "F11", "F12", "PrnScn", "NUM_LOCK", "SCROLL_LOCK", "CAPS_LOCK", "INSERT", "DELETE", "HOME", "END", "PAGE_UP", "PAGE_DOWN", "ENTER", "BACK_SPACE", "OS_KEY", "CONTEXT_MENU", "SLEEP", "HANJA", "WIN_OEM_FINISH", "WIN_OEM_JUMP", 0, 229, "M", "P"];
                    return function(i) {
                        return e || (e = t.reduce(function(e, t) {
                            return e[r.isString(t) ? l.KeyboardMap.getKeyCode(t) : t] = !0, e
                        }, {})), e[i]
                    }
                }(), t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.bindTexts(), this.bindHandlers(), this.currentMappingKey = null, this.currentMappingPad = null
            }, t.prototype.bindTexts = function() {
                var e = this;
                this.translate(".id-tabKeyboard .comp-TextField", "GAMEOPTION_INPUTKEY_KEYBOARD"), this.translate(".id-tabGamepad .comp-TextField", "GAMEOPTION_INPUTKEY_GAMEPAD"), r.each(this.mappingKey, function(t, i) {
                    e.translate(".id-typeContainer " + t.id + " .id-keyTitle .id-textField", t.lang), e.visible(".id-typeContainer " + t.id + " .id-keyTitle .id-textField", "secondBrake" !== i)
                }), r.each(this.mappingPad, function(t, i) {
                    e.translate(".id-typeContainer " + t.id + " .id-keyTitle .id-textField", t.lang)
                })
            }, t.prototype.bindHandlers = function() {
                var e = this;
                this.getFace(".id-tabKeyboard").on(s.MouseEventEx.CLICK, function() {
                    return e.bindToggleContainer("keyboard")
                }), this.getFace(".id-tabGamepad").on(s.MouseEventEx.CLICK, function() {
                    return e.bindToggleContainer("gamepad")
                }), r.each(this.mappingKey, function(t, i) {
                    var n = e.getFace(t.id);
                    n.on(s.MouseEventEx.CLICK, function() {
                        return e.activeKeySetting(i, n)
                    }), n.htmlElement.setAttribute("tabindex", "0");
                    var r = e;
                    n.htmlElement.onblur = function(e) {
                        r.cancelInput(n)
                    }
                }), r.each(this.mappingPad, function(t, i) {
                    if (e.staticMappingPad.indexOf(i) >= 0) {
                        e.getFace(t.id).enabled = !1
                    } else {
                        var n = e.getFace(t.id);
                        n.on(s.MouseEventEx.CLICK, function() {
                            return e.activePadSetting(i, n)
                        }), n.htmlElement.setAttribute("tabindex", "0");
                        var r = e;
                        n.htmlElement.onblur = function(e) {
                            null === e.relatedTarget && r.cancelPadInput(n)
                        }
                    }
                })
            }, t.prototype.onDetach = function() {
                var e = this;
                this.cancelKeyCodeCapture(), r.each(this.mappingKey, function(t) {
                    e.getFace(t.id).htmlElement.onblur = void 0
                }), r.each(this.mappingPad, function(t) {
                    e.getFace(t.id).htmlElement.onblur = void 0
                })
            }, t.prototype.activeKeySetting = function(e, t) {
                var i = this;
                if (this.currentMappingKey === e) {
                    var n = this.getFace(this.getKeyboardId(this.currentMappingKey));
                    return void this.cancelInput(n)
                }
                this.currentMappingKey = e, t.selected = !0;
                var o = function(t) {
                    var n = i.getFace(i.getKeyboardId(e)),
                        o = i.props,
                        a = o.staging,
                        s = o.id,
                        d = a[e] || [],
                        u = d[0],
                        p = t;
                    if (i.isProhibitedKeys(p)) return void i.popupService.draw("ConfirmPopup", {
                        title: {
                            text: "GAMEOPTION_KEY_UNAVAILABLE_POPUP_TITLE"
                        },
                        description: "GAMEOPTION_KEY_UNAVAILABLE_POPUP_DESC",
                        confirmString: "GAMEOPTION_KEY_UNAVAILABLE_POPUP_CONFIRM",
                        confirm: function() {
                            i.cancelInput(n)
                        }
                    });
                    var h = {};
                    h[e] = [p, d[1]];
                    var f = r.findKey(a, function(e) {
                        return e[0] === p
                    });
                    void 0 !== f ? i.popupService.draw("ConfirmCancelPopup", {
                        title: {
                            text: "GAMEOPTION_KEY_DUPLICATE_POPUP_TITLE"
                        },
                        description: i.$filter("template")({
                            keytochange: l.KeyboardMap.getKeyName(p),
                            usingthekey: i.$filter("translate")(i.mappingKey[f].lang)
                        }, "GAMEOPTION_KEY_DUPLICATE_POPUP_DESC"),
                        confirmString: "GAMEOPTION_KEY_DUPLICATE_POPUP_YES",
                        cancelString: "GAMEOPTION_KEY_DUPLICATE_POPUP_NO",
                        confirm: function() {
                            h[f] = [u, a[f][1]], i.dispatch(c.updateStaging(s, h)), i.cancelInput(n)
                        }
                    }) : (i.dispatch(c.updateStaging(s, h)), i.cancelInput(n))
                };
                this.captureKeyCode(o)
            }, t.prototype.cancelKeyCodeCapture = function() {
                this.externalService.beDisableIME(!1), $(window).off("keydown.inputkey")
            }, t.prototype.captureKeyCode = function(e) {
                this.cancelKeyCodeCapture(), this.externalService.beDisableIME(!0), $(window).one("keydown.inputkey", function(t) {
                    return e(t.keyCode)
                })
            }, t.prototype.activePadSetting = function(e, t) {
                var i = this;
                if (null === this.currentMappingPad) this.currentMappingPad = e, t.selected = !0;
                else {
                    var n = this.getPadId(this.currentMappingPad),
                        r = this.getPadId(e);
                    if (this.currentMappingPad === e) {
                        var o = this.getFace(n);
                        return void this.cancelPadInput(o)
                    }
                    var a = this.getFace(".id-typeContainer " + n + " .id-keyValue .id-prevKey").currentLabel,
                        s = this.getFace(".id-typeContainer " + r + " .id-keyValue .id-prevKey").currentLabel,
                        d = this.getFace(".id-typeContainer " + n + " .id-keyValue"),
                        u = this.getFace(".id-typeContainer " + r + " .id-keyValue"),
                        p = this.getFace(".id-typeContainer " + n + " .id-keyValue .id-changeKey"),
                        h = this.getFace(".id-typeContainer " + r + " .id-keyValue .id-changeKey");
                    this.gotoAndStop(p, s), this.gotoAndStop(h, a), this.gotoAndPlay(d, "changing"), this.gotoAndPlay(u, "changing"), u.once("stop", function() {
                        var t = i.props,
                            r = t.staging,
                            o = t.id,
                            d = {};
                        d[i.currentMappingPad] = [r[i.currentMappingPad][0], l.KeyboardMap.getPadKeyCode(s)], d[e] = [r[e][0], l.KeyboardMap.getPadKeyCode(a)], i.dispatch(c.updateStaging(o, d));
                        var u = i.getFace(n);
                        i.cancelPadInput(u)
                    })
                }
            }, t.prototype.cancelInput = function(e) {
                this.cancelKeyCodeCapture(), this.currentMappingKey = null, null !== e && (e.selected = !1)
            }, t.prototype.cancelPadInput = function(e) {
                e.selected = !1, this.currentMappingPad = null
            }, t.prototype.applyKeyField = function(e, t) {
                if (!this.mappingKey[e]) return void log.debug("inputKey [" + e + "] was not supported yet");
                var i = ".id-typeContainer " + this.mappingKey[e].id + " .id-keyValue .id-textField",
                    n = this.getFace(i),
                    r = this.translateKeyCode(t);
                r !== n.text && this.translate(n, r)
            }, t.prototype.bindInputKeys = function(e) {
                var t = this,
                    i = e.staging;
                r.each(i, function(e, i) {
                    return t.applyKeyField(i, e[0])
                })
            }, t.prototype.applyPadField = function(e, t) {
                if (void 0 !== this.mappingPad[e]) {
                    var i = ".id-typeContainer " + this.mappingPad[e].id + " .id-keyValue .id-prevKey",
                        n = ".id-typeContainer " + this.mappingPad[e].id + " .id-keyValue",
                        r = d.InputKeyConfigService.checkFixedPadKeys(e, t);
                    this.gotoAndStop(i, r), this.gotoAndStop(n, 1)
                }
            }, t.prototype.bindInputPads = function(e) {
                var t = this,
                    i = e.staging;
                r.each(i, function(e, i) {
                    return t.applyPadField(i, e[1])
                })
            }, t.prototype.getKeyboardId = function(e) {
                return this.mappingKey[e].id
            }, t.prototype.getPadId = function(e) {
                return this.mappingPad[e].id
            }, t.prototype.translateKeyCode = function(e) {
                return l.KeyboardMap.getKeyName(e)
            }, t.prototype.applyConfig = function() {
                var e = this.props.staging;
                this.service.setConfig(e)
            }, t.prototype.bindToggleContainer = function(e) {
                var t = this;
                ["Keyboard", "Gamepad"].forEach(function(i) {
                    var n = e === i.toLowerCase(),
                        r = ".id-tab" + i;
                    t.getFace(r).selected = n, t.classNames(r, n ? "selected" : "")
                }), this.gotoAndPlayIgnoreReboot(".id-typeContainer", e)
            }, t.prototype.handleChange = function(e) {
                this.bindInputKeys(e), this.bindInputPads(e)
            }, t.prototype.update = function(e) {
                var t = this;
                this.handleChange(e);
                var i = this.face.visible;
                this.face.visible = e.isActive, e.isActive && !i && (this.gotoAndPlay(this.face, "in"), this.face.once("stop", function() {
                    return t.bindToggleContainer("keyboard")
                }))
            }, t
        }(a.ConfigPanelBinder);
    n.__decorate([o.autowired("inputKeyConfigService")], u.prototype, "service", void 0), n.__decorate([o.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([o.autowired("popupService")], u.prototype, "popupService", void 0), n.__decorate([o.autowired("$filter")], u.prototype, "$filter", void 0), t.InputKeyConfigBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(192),
        a = i(2),
        s = i(8),
        c = i(303),
        d = i(68),
        l = i(28),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.bindHandlers()
            }, t.prototype.bindTexts = function(e) {
                this.translate(".id-soundOutputTitle", "GAMEOPTION_SOUND_SOUNDOUTPUT"), this.translate(".id-title .id-textField", "GAMEOPTION_SOUND_OUTPUTTYPE"), this.translate(".id-inactivatedSoundOn .id-checkboxName .id-textField", "GAMEOPTION_SOUND_SOUNDINBACKGROUND"), this.translate(".id-volumeTitle", "GAMEOPTION_SOUND_VOLUME"), this.translate(".id-volumeSetting1 .id-title .id-textField", "GAMEOPTION_SOUND_MASTERVOLUME"), this.translate(".id-volumeSetting2 .id-title .id-textField", "GAMEOPTION_SOUND_BGM"), this.translate(".id-volumeSetting3 .id-title .id-textField", "GAMEOPTION_SOUND_ENVIRONMENT"), this.translate(".id-volumeSetting4 .id-title .id-textField", "GAMEOPTION_SOUND_UI");
                var t = e.staging;
                this.bindText(".id-volumeSetting1 .id-volumeNum .id-textField", t.masterVolume), this.bindText(".id-volumeSetting2 .id-volumeNum .id-textField", t.musicVolume), this.bindText(".id-volumeSetting3 .id-volumeNum .id-textField", t.effectVolume), this.bindText(".id-volumeSetting4 .id-volumeNum .id-textField", t.uiVolume)
            }, t.prototype.bindRangeInputs = function(e) {
                var t = e.staging;
                this.getFace(".id-volumeSetting1 .id-volumeRange").value = t.masterVolume, this.getFace(".id-volumeSetting2 .id-volumeRange").value = t.musicVolume, this.getFace(".id-volumeSetting3 .id-volumeRange").value = t.effectVolume, this.getFace(".id-volumeSetting4 .id-volumeRange").value = t.uiVolume
            }, t.prototype.bindHandlers = function() {
                var e = this;
                this.getFace("> .id-inactivatedSoundOn").on(a.MouseEventEx.CLICK, function() {
                    return e.toggleInactiveSoundOn()
                });
                var t = this.getFace(".id-volumeSetting1 .id-volumeRange");
                t.on(s.EventEx.CHANGE, function() {
                    return e.bindVolumes("masterVolume", t)
                }), t.on(c.DragEvent.DRAG_END, function() {
                    return e.changedVolume("masterVolume", t)
                });
                var i = this.getFace(".id-volumeSetting2 .id-volumeRange");
                i.on(s.EventEx.CHANGE, function() {
                    return e.bindVolumes("musicVolume", i)
                }), i.on(c.DragEvent.DRAG_END, function() {
                    return e.changedVolume("musicVolume", i)
                });
                var n = this.getFace(".id-volumeSetting3 .id-volumeRange");
                n.on(s.EventEx.CHANGE, function() {
                    return e.bindVolumes("effectVolume", n)
                }), n.on(c.DragEvent.DRAG_END, function() {
                    return e.changedVolume("effectVolume", n)
                });
                var r = this.getFace(".id-volumeSetting4 .id-volumeRange");
                r.on(s.EventEx.CHANGE, function() {
                    return e.bindVolumes("uiVolume", r)
                }), r.on(c.DragEvent.DRAG_END, function() {
                    return e.changedVolume("uiVolume", r)
                })
            }, t.prototype.isInactiveSoundOn = function(e) {
                return e.staging.disableBackground
            }, t.prototype.toggleInactiveSoundOn = function() {
                var e = this.props;
                this.dispatch(d.updateStaging(e.id, {
                    disableBackground: !this.isInactiveSoundOn(e)
                }))
            }, t.prototype.bindVolumes = function(e, t) {
                var i = t.value;
                switch (e) {
                    case "masterVolume":
                        this.bindText(".id-volumeSetting1 .id-volumeNum", i);
                        break;
                    case "musicVolume":
                        this.bindText(".id-volumeSetting2 .id-volumeNum", i);
                        break;
                    case "effectVolume":
                        this.bindText(".id-volumeSetting3 .id-volumeNum", i);
                        break;
                    case "uiVolume":
                        this.bindText(".id-volumeSetting4 .id-volumeNum", i)
                }
            }, t.prototype.changedVolume = function(e, t) {
                var i = t.value,
                    n = {};
                n[e] = i;
                var r = this.props.id;
                this.dispatch(d.updateStaging(r, n))
            }, t.prototype.handleChange = function(e) {
                var t = this.isInactiveSoundOn(e);
                this.apply("> .id-inactivatedSoundOn", l.param, {
                    selected: t
                }), this.bindTexts(e), this.bindRangeInputs(e)
            }, t.prototype.applyConfig = function() {
                var e = this.props.staging;
                this.service.setConfig(e)
            }, t.prototype.update = function(e) {
                this.handleChange(e);
                var t = this.face.visible;
                this.face.visible = e.isActive, e.isActive && !t && this.gotoAndPlay(this.face, "in")
            }, t
        }(o.ConfigPanelBinder);
    n.__decorate([r.autowired("soundConfigService")], u.prototype, "service", void 0), t.SoundConfigBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(547),
        a = i(210),
        s = i(8),
        c = i(303),
        d = i(19),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._min = 0, t._max = 100, t._step = 1, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "min", {
                get: function() {
                    return this._min
                },
                set: function(e) {
                    this._min !== e && (this._min = e)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "max", {
                get: function() {
                    return this._max
                },
                set: function(e) {
                    this._max !== e && (this._max = e)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "step", {
                get: function() {
                    return this._step
                },
                set: function(e) {
                    this._step !== e && (this._step = e)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "value", {
                get: function() {
                    var e = (this._max - this._min) * this._ratio + this._min;
                    return Math.round(e / this._step) * this._step
                },
                set: function(e) {
                    e = Math.max(this._min, e), e = Math.min(this._max, e), this.value !== e && (this.ratio = (e - this._min) / (this._max - this._min))
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "ratio", {
                get: function() {
                    return this._ratio
                },
                set: function(e) {
                    var t = this._ratio;
                    a.ObjectUtil.getPropertyDescriptor(o.Progress.prototype, "ratio").set.call(this, e), this._ratio !== t && this.invalidateData()
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.postCreate = function() {
                var t = this;
                e.prototype.postCreate.call(this);
                var i = this.thumb = this.$(".id-thumb, .Thumb");
                if (!i) return r.error("RangeInput.postCreate: could'n find [Thumb] in a asset");
                this.cloned || (this.limit = i.x), $(i.htmlElement).on("mousedown", function(e) {
                    var i = new s.EventEx(s.EventEx.ACTIVATE, {
                        currentTarget: t
                    });
                    t.emit(s.EventEx.ACTIVATE, i), i.isDefaultPrevented() || t.startDrag(e.pageX + (t.limit - t.thumb.x))
                }), this.invalidateData()
            }, t.prototype.cloneProperties = function(t) {
                e.prototype.cloneProperties.call(this, t);
                var i = t;
                this.limit = i.limit
            }, t.prototype.startDrag = function(e) {
                var t = this,
                    i = e,
                    n = this.limit / (this._max - this._min) * this._step,
                    r = function(r) {
                        if (!(Math.abs(r.pageX - i) <= n)) {
                            i = r.pageX;
                            var o = Math.max(0, t.limit + (r.pageX - e));
                            o = Math.min(t.limit, o);
                            var a = t.ratio;
                            t.ratio = o / t.limit, a !== t.ratio && t.emit(s.EventEx.CHANGE)
                        }
                    },
                    o = function(e) {
                        t.emit(c.DragEvent.DRAG_END), $(document).off("mousemove", r).off("mouseup", o)
                    };
                $(document).on("mousemove", r).on("mouseup", o)
            }, t.prototype.drawData = function() {
                e.prototype.drawData.call(this), this.thumb && (this.thumb.x = this.limit * this.ratio)
            }, t.prototype.assignMask = function() {
                var e = this.progressMask = this.$(".id-mask, .Mask");
                e && (e.regX = 0)
            }, t
        }(o.Progress);
    l = n.__decorate([d.component("RangeInput")], l), t.RangeInput = l, t.default = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(128),
        o = i(19),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.preInitialize = function() {
                if (e.prototype.preInitialize.call(this), !this.cloned) {
                    if (!this.textField) throw new Error("Couldn't find TextField for AutoSizeButton");
                    this.baseTextWidth = this.textField.width, this.lastTextWidth = this.baseTextWidth
                }
            }, t.prototype.cloneProperties = function(t) {
                e.prototype.cloneProperties.call(this, t);
                var i = t;
                this.baseTextWidth = i.baseTextWidth, this.lastTextWidth = i.lastTextWidth
            }, t.prototype.drawData = function() {
                e.prototype.drawData.call(this);
                var t = this.testWidth();
                if (this.lastTextWidth !== t) {
                    this.textField.width = t;
                    var i = this.data.width - this.baseTextWidth,
                        n = (t + i) / (this.baseTextWidth + i);
                    this.adjustSize(n, t - this.baseTextWidth), this.lastTextWidth = t
                }
            }, t.prototype.adjustSize = function(e, t) {
                for (var i = 0, n = this.children; i < n.length; i++) {
                    var r = n[i];
                    $(r.htmlElement).has(this.textField.htmlElement).length || (r.xOffset = r.regX * r.baseScaleX * (e - 1), r.scaleXMultiplier = e)
                }
                this.widthOffset = t
            }, t.prototype.testWidth = function() {
                var e = $(this.textField.htmlElement).clone().css({
                        width: "auto",
                        top: "100%"
                    }).appendTo("#edge-ui").text(this.label || ""),
                    t = 0;
                this.label && /^[\u4E00-\u9FFF\u3400-\u4DFF]+$/.test(this.label) && (t = 3 * this.label.length);
                var i = e.width() + t;
                return e.remove(), i
            }, t
        }(r.Button);
    a = n.__decorate([o.component("AutoSizeButton")], a), t.AutoSizeButton = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(38),
        o = i(1),
        a = i(1194),
        s = i(1195),
        c = i(1196),
        d = i(304),
        l = i(1198),
        u = i(586);
    i(1199);
    var p = i(8),
        h = i(38),
        f = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.mainWindow = null, t.headerMC = null, t.menuContainerMC = null, t.contentsContainerMC = null, t.chatInputContainer = null, t.dragger = null, t
            }
            return n.__extends(t, e), t.prototype.showMainWindow = function() {
                this.mainWindow && !this.stage.visible && (this.applyChatWindowPosition(), this.mainWindow.gotoAndPlay("in"), this.menuContainerBinder.onVisibleTabs()), this.chatInputBinder.IsActive = !0, this.contentsContainerBinder.onShow(), this.stage.visible = !0
            }, t.prototype.hideMainWindow = function() {
                this.stage.visible = !1, this.mainWindow && this.mainWindow.gotoAndPlay("out"), this.chatInputBinder.IsActive = !1, this.contentsContainerBinder.onHide()
            }, t.prototype.onFaceReady = function() {
                var e = this;
                this.mainWindow = this.getFace(".id-worldChatPopup"), this.mainWindow.on(p.EventEx.STOP, function(t) {
                    e.onMainMenuAnimationStop(t.currentTarget.currentLabel)
                }), this.stage.visible = !1, this.headerMC = this.getFace(".id-header"), this.menuContainerMC = this.getFace(".id-menuContainer"), this.contentsContainerMC = this.getFace(".id-contentsContainer"), this.chatHeaderBinder = this.addChildBinder(this.headerMC, a.ChatHeaderBinder), this.menuContainerBinder = this.addChildBinder(this.getFace(".id-menuButton"), s.MenuContainerBinder, {
                    instanceBinder: s.TabMenuButtonBinder,
                    keyProperty: "id"
                }), this.contentsContainerBinder = this.addChildBinder(this.contentsContainerMC, c.ContentsContainerBinder), this.chatInputContainer = this.getFace(".id-contentsContainer .id-chatInputContainer"), this.chatInputBinder = this.addChildBinder(this.chatInputContainer, d.ChatInputBinder), this.chatInputBinder.setSourceHasPlaceholder([h.ChatSourceType.Whisper]), this.chatInputBinder.IsActive = !1, this.chatInputBinder.fastInput = !0, this.addManagedListener(this.mainWindow, "finishIn", function(t) {
                    e.chatInputBinder.setFocus()
                }), this.dragger = new l.default(this.headerMC.htmlElement, this.mainWindow.htmlElement, {
                    left: 0,
                    top: 0,
                    right: 1260,
                    bottom: 715
                }, this)
            }, t.prototype.onMainMenuAnimationStop = function(e) {
                switch (e) {
                    case "finishIn":
                        this.dragger.enableDrag();
                        break;
                    case "out":
                        this.dragger.disableDrag()
                }
            }, t.prototype.resetChatWindowPosition = function() {
                var e = this.getFace(".id-header > svg"),
                    t = this.getFace(".id-menuContainer > svg"),
                    i = (document.body.offsetWidth - e.width) / 2,
                    n = (document.body.offsetHeight - (e.height + t.height)) / 2;
                return u.ChatCacheManager.localStoreChatWindowPosition(i, n), {
                    x: i,
                    y: n
                }
            }, t.prototype.applyChatWindowPosition = function() {
                var e = u.ChatCacheManager.getLocalChatWindowPosition();
                e || (e = this.resetChatWindowPosition()), this.dragger && (this.dragger.position = e)
            }, t.prototype.onAddedToScene = function() {
                this.chatInputBinder.IsActive = !1
            }, t.prototype.onMouseDrop = function(e, t) {
                u.ChatCacheManager.localStoreChatWindowPosition(e, t);
                var i = new CustomEvent("chat-window-position", {
                        detail: {
                            x: e,
                            y: t
                        }
                    }),
                    n = document.getElementsByClassName("chat-window-position-listener");
                _.forEach(n, function(e) {
                    e.dispatchEvent(i)
                }), this.mainWindow.x = e, this.mainWindow.y = t
            }, t.prototype.update = function(e) {
                var t = this,
                    i = this.reduxProps;
                if (i.displayType !== e.displayType && (e.displayType === r.ChatDisplayType.MainChatWindow ? this.showMainWindow() : i.displayType === r.ChatDisplayType.MainChatWindow && this.hideMainWindow()), i.tabs !== e.tabs && (this.reduxProps.tabs = e.tabs, this.menuContainerBinder.onTabStateChange(e.tabs), e.displayType !== r.ChatDisplayType.SimpleChatView && _.forEach(e.tabs, function(e, i) {
                        e.isActivated && t.worldChatService.onTabActived(e)
                    })), i.whisperNotice !== e.whisperNotice && this.menuContainerBinder.enableWhisperNotice(e.whisperNotice), this.externalService.isEdgeBrowser() && i.graphicConfig !== e.graphicConfig) {
                    var n = e.graphicConfig,
                        o = n.width,
                        a = n.height,
                        s = e.graphicConfig,
                        c = s.fullscreen,
                        d = s.clientWidth,
                        l = s.clientHeight;
                    2 === c && (o = d, a = l);
                    var u = o / a * 1080,
                        p = (1920 - u) / 2;
                    this.dragger.limitArea = {
                        left: p,
                        top: 0,
                        right: 1260 - p,
                        bottom: 715
                    }
                }
                i.graphicConfig && i.graphicConfig !== e.graphicConfig && (this.resetChatWindowPosition(), this.applyChatWindowPosition())
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.worldChat,
                    i = t.tabStates,
                    n = e.configuration.configs.graphic || {
                        applied: {}
                    };
                return {
                    displayType: t.displayType,
                    tabs: i,
                    graphicConfig: n.applied,
                    whisperNotice: t.whisperNotice
                }
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("worldChatService")], f.prototype, "worldChatService", void 0), n.__decorate([o.autowired("externalService")], f.prototype, "externalService", void 0), t.MainChatWindowBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(40),
        s = i(13),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.getFace(".id-closeButton").on(o.MouseEventEx.CLICK, function() {
                    e.dispatch(a.closeMainChatWindow())
                });
                var t = this.getFace(".id-title .id-tooltip");
                t.on(o.MouseEventEx.MOUSE_OVER, function(t) {
                    return e.onHelpOver(t)
                }), t.on(o.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                });
                var i = this.getFace(".id-title");
                this.translate(i, "CHATTING_EXPANDEDWINDOW_TITLE")
            }, t.prototype.onHelpOver = function(e) {
                var t = this.worldChatService.helpTooltipData.data,
                    i = this.worldChatService.helpTooltipData.marginLeft,
                    n = this.worldChatService.helpTooltipData.paddingBottom;
                this.tooltipService.show(e, "vertical", s.TooltipType.WorldChatHelp, t, {
                    marginLeft: i,
                    paddingBottom: n
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), n.__decorate([r.autowired("worldChatService")], c.prototype, "worldChatService", void 0), t.ChatHeaderBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(38),
        s = i(3),
        c = i(40),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.lockIcon = null, t.notice = null, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.lockIcon = this.getFace(".id-lock"), this.notice = this.getFace(".id-whisperNotice"), this.face.on(o.MouseEventEx.CLICK, function() {
                    e.props.isActivated || e.dispatch(c.activeTab(e.props.id))
                })
            }, t.prototype.update = function(e) {
                this.face.selected = e.isActivated, this.face.enabled = !e.isLocked, this.lockIcon.visible = e.isLocked;
                var t = this.$filter("translate")(e.nameID);
                if (this.getFace(".id-textField").htmlText = t, e.isActivated) {
                    var i = this.getFace(".id-menuIconSelected"),
                        n = e.id;
                    !1 === i.hasLabel(n) && (n = "all"), _.delay(function() {
                        return i.gotoAndStop(n)
                    }, 34)
                }
            }, t.prototype.playNoticeAnimation = function() {
                this.notice && this.notice.gotoAndPlay("loopAnimation")
            }, t.prototype.stopNoticeAnimation = function() {
                this.notice && this.notice.gotoAndStop(0)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), t.TabMenuButtonBinder = d;
    var l = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.whisperTab = null, t
        }
        return n.__extends(t, e), Object.defineProperty(t.prototype, "hasTabMenus", {
            get: function() {
                return this.binders.length > 0
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.onVisibleTabs = function() {
            var e = s.store.getState(),
                t = e.worldChat.tabStates;
            for (var i in t) {
                var n = t[i];
                n && s.store.dispatch(c.enableTab(n.id, n.mainWindowEnable))
            }
            var r = e.worldChat.activatedTab;
            if (!r) {
                var o = this.binders;
                if (o.length > 0) {
                    r = o[0].getProps().id
                }
            }
            r && s.store.dispatch(c.activeTab(r))
        }, t.prototype.onTabStateChange = function(e) {
            var t = Object.keys(e);
            t.length > 0 && this.applyCollection(_.map(t, function(t) {
                return e[t]
            }))
        }, t.prototype.enableWhisperNotice = function(e) {
            var t = this;
            if (!this.whisperTab) {
                this.binders.forEach(function(e) {
                    e.getProps().defaultSource === a.ChatSourceType.Whisper && (t.whisperTab = e)
                })
            }
            this.whisperTab && (e ? this.whisperTab.playNoticeAnimation() : this.whisperTab.stopNoticeAnimation())
        }, t
    }(r.CollectionBinder);
    t.MenuContainerBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(38),
        o = i(1),
        a = i(2),
        s = i(8),
        c = i(1197),
        d = i(40),
        l = i(3),
        u = i(29),
        p = i(4),
        h = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.chatInputMC = null, t.filterButton = null, t.broadcastButton = null, t.chatListArea = null, t.newMessageButton = null, t.listTopShadow = null, t.listBottomShadow = null, t.filterMenu = null, t.filterMenuBinder = null, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.chatInputMC = this.getFace(".id-chatInputContainer"), this.chatListArea = this.getFace(".id-chatListArea"), this.newMessageButton = this.getFace(".id-newMessage"), this.newMessageButton.on(a.MouseEventEx.CLICK, function() {
                    e.onNewMessageButtonClick()
                });
                var t = this.getFace(".id-newMessage .Button-normal");
                this.newMessageButton.on(s.EventEx.STOP, function(e) {
                    var i = e.currentTarget.currentLabel;
                    "out" !== i && "up" !== i || t && t.gotoAndPlay("loopAnimation")
                }), this.listTopShadow = this.getFace(".id-listShadowTop"), this.listBottomShadow = this.getFace(".id-listShadowBottom"), this.filterButton = this.getFace(".id-filterButton"), this.filterButton.on(a.MouseEventEx.CLICK, function() {
                    return e.onFilterButtonClick()
                }), this.hasSize(this.filterButton.$(".id-buttonNameTooltip .id-tooltip .id-textField"), !1), this.hasSize(this.filterButton.$(".id-buttonNameTooltip .id-tooltip .id-background"), !0), this.filterButton.on(a.MouseEventEx.MOUSE_OVER, function() {
                    return e.onToolTipShow(e.filterButton, "CHATTING_TOOLTIP_FILTER")
                }), this.broadcastButton = this.getFace(".id-speakerButton"), this.broadcastButton.on(a.MouseEventEx.CLICK, function() {
                    return e.onBroadcastButtonClick()
                }), this.hasSize(this.broadcastButton.$(".id-buttonNameTooltip .id-tooltip .id-textField"), !1), this.hasSize(this.broadcastButton.$(".id-buttonNameTooltip .id-tooltip .id-background"), !0), this.broadcastButton.on(a.MouseEventEx.MOUSE_OVER, function() {
                    return e.onToolTipShow(e.broadcastButton, "CHATTING_TOOLTIP_BROADCAST")
                }), this.filterMenu = this.getFace(".id-filterMenu"), this.filterMenuBinder = this.addChildBinder(this.filterMenu, c.FilterMenuBinder), this._escEventLister = {
                    onEvent: this.onPressESC.bind(this)
                }
            }, t.prototype.onAddedToScene = function() {
                "tencent" !== this.publisherService.publisher && "nexon" !== this.publisherService.publisher || (this.broadcastButton.visible = !1)
            }, t.prototype.onToolTipShow = function(e, t) {
                var i = l.store.getState().configuration.configs.graphic.applied,
                    n = i.height,
                    r = i.fullscreen,
                    o = i.clientHeight;
                2 === r && (n = o);
                var a = n / 1080,
                    s = e.$(".id-buttonNameTooltip"),
                    c = e.$(".id-buttonNameTopTooltip"),
                    d = p.default.getGlobalYPosition(s);
                c.visible = (d + s.height) * a > n, s.visible = !c.visible;
                var u = s.visible ? s : c;
                u.gotoAndPlay("in"), p.default.resizeTooltipByText(u, this.$filter("translate")(t))
            }, t.prototype.onShow = function() {
                var e = this.getFace(".id-chatListArea > svg"),
                    t = e.htmlElement.style;
                this.worldChatRenderer.install(this.chatListArea.htmlElement, t.width, t.height, !0)
            }, t.prototype.onHide = function() {
                this.worldChatRenderer.uninstall(), this.filterMenu && this.filterButton.selected && this.filterMenu.gotoAndPlay("out"), l.store.dispatch(d.toggleFilterMenu(!1)), this.filterButton.selected = !1
            }, t.prototype.onFilterButtonClick = function() {
                l.store.dispatch(d.toggleFilterMenu())
            }, t.prototype.onBroadcastButtonClick = function() {
                l.store.dispatch(d.openBroadcastWindow())
            }, t.prototype.showFilterMenu = function() {
                this.filterMenu && !this.filterButton.selected && (this.filterMenu.gotoAndPlay(this.clanService.enableClan ? "clanIn" : "withOutClanIn"), this.filterButton.selected = !0)
            }, t.prototype.hideFilterMenu = function() {
                this.filterMenu && this.filterButton.selected && (this.filterMenu.gotoAndPlay(this.clanService.enableClan ? "clanOut" : "withOutClanOut"), this.filterButton.selected = !1)
            }, t.prototype.onPressESC = function(e) {
                return !this.filterButton.selected || (this.hideFilterMenu(), !1)
            }, t.prototype.onNewMessageButtonClick = function() {
                this.newMessageButton.visible = !1, l.store.dispatch(d.updateChatList())
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                if (this.filterMenuBinder.setProps(e.filterViewsState), e.filterVisible ? (this.showFilterMenu(), this.globalKeyService.pushListener(u.KeyboardMap.getKeyCode("ESCAPE"), this._escEventLister)) : (this.hideFilterMenu(), this.globalKeyService.popListener(u.KeyboardMap.getKeyCode("ESCAPE"), this._escEventLister)), t.scrollbarState !== e.scrollbarState) switch (e.scrollbarState) {
                    case r.ListScrollState.None:
                        this.listTopShadow.visible = !1, this.listBottomShadow.visible = !1, this.newMessageButton.visible = !1;
                        break;
                    case r.ListScrollState.Top:
                        this.listTopShadow.visible = !1, this.listBottomShadow.visible = !0;
                        break;
                    case r.ListScrollState.Middle:
                        this.listTopShadow.visible = !0, this.listBottomShadow.visible = !0;
                        break;
                    case r.ListScrollState.Bottom:
                        this.listTopShadow.visible = !0, this.listBottomShadow.visible = !1, this.newMessageButton.visible = !1
                }
                if (t.messages !== e.messages) switch (e.scrollbarState) {
                    case r.ListScrollState.Top:
                    case r.ListScrollState.Middle:
                        this.newMessageButton.visible = !0;
                        break;
                    default:
                        this.newMessageButton.visible = !1
                }
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.worldChat,
                    i = t.messages,
                    n = t.filterViewsState,
                    r = t.filterVisible,
                    o = t.scrollState;
                e.configuration.configs.graphic;
                return {
                    messages: i,
                    filterVisible: r,
                    filterViewsState: n,
                    scrollbarState: o
                }
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([o.autowired("worldChatRenderer")], h.prototype, "worldChatRenderer", void 0), n.__decorate([o.autowired("globalKeyService")], h.prototype, "globalKeyService", void 0), n.__decorate([o.autowired("clanService")], h.prototype, "clanService", void 0), n.__decorate([o.autowired("publisherService")], h.prototype, "publisherService", void 0), t.ContentsContainerBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(8),
        a = i(2),
        s = i(40),
        c = i(3),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.filterButtons = {}, t
            }
            return n.__extends(t, e), t.prototype.onToggleFilter = function(e) {
                this.filterButtons[e] && this.worldChatService.toggleFilterMenuItem(e, !this.filterButtons[e].selected)
            }, t.prototype.onFaceReady = function() {
                this.setupCloseButton()
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.clanService.enableClan ? ["channel", "whisper", "clan", "race"] : ["channel", "whisper", "race"],
                    i = this.clanService.enableClan ? 1 : 2;
                t.forEach(function(t, n) {
                    e.filterButtons[t] = e.getFace(".id-checkButton" + (n + i))
                }), _.forEach(this.filterButtons, function(t, i) {
                    t && t.on(a.MouseEventEx.CLICK, function() {
                        return e.onToggleFilter(i)
                    })
                })
            }, t.prototype.setupCloseButton = function() {
                var e = this.face.htmlElement,
                    t = this.getFace(".comp-MaskLayerContainer").htmlElement,
                    i = document.createElement("div");
                i.className = "chatFilterClose chat-window-position-listener";
                var n = document.createElement("button");
                n.onclick = function(e) {
                    c.store.dispatch(s.toggleFilterMenu(!1))
                }, n.style.width = document.body.offsetWidth + "px", n.style.height = document.body.offsetHeight + "px", i.appendChild(n), e.insertBefore(i, t), i.hidden = !0;
                var r = function() {
                    var t = $(e).offset();
                    i.style.top = -t.top + "px", i.style.left = -t.left + "px"
                };
                this.face.on(o.EventEx.STOP, function(e) {
                    switch (e.currentTarget.currentLabel) {
                        case "clanIn":
                        case "withOutClanIn":
                            i.hidden = !1, r(), i.addEventListener("chat-window-position", function(e) {
                                return r()
                            });
                            break;
                        case "clanOut":
                        case "withOutClanOut":
                            i.hidden = !0, i.removeEventListener("chat-window-position")
                    }
                })
            }, t.prototype.update = function(e) {
                var t = this;
                _.forEach(e, function(e) {
                    var i = t.filterButtons[e.filterName];
                    i && (t.translate(i, e.nameStringID), i.selected = e.selected, i.enabled = e.enable)
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("worldChatService")], d.prototype, "worldChatService", void 0), n.__decorate([r.autowired("clanService")], d.prototype, "clanService", void 0), t.FilterMenuBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = function() {
        function e(e, t, i, n) {
            this.dragObj = e, this.moveObj = t, this.limit = i, this.delegate = n, this.mouseDownHandler = null, this.mouseUpHandler = null, this.mouseMoveHandler = null, this.mouseDownHandler = this.onMouseDown.bind(this), this.mouseUpHandler = this.onMouseUp.bind(this), this.mouseMoveHandler = this.onMouseMove.bind(this)
        }
        return e.prototype.updatePosition = function(e, t) {
            $(this.moveObj).css("-webkit-transform", "matrix(1, 0, 0, 1, " + e + ", " + t + ")")
        }, e.prototype.onMouseDown = function(e) {
            window.addEventListener("mousemove", this.mouseMoveHandler, !0), this.left = e.clientX, this.top = e.clientY
        }, e.prototype.onMouseMove = function(e) {
            var t = $(this.moveObj).css("-webkit-transform").match(/-?[\d\.]+/g),
                i = parseInt(t[4], 10),
                n = parseInt(t[5], 10),
                r = Math.min(Math.max(e.clientX - this.left + i, this.limit.left), this.limit.right),
                o = Math.min(Math.max(e.clientY - this.top + n, this.limit.top), this.limit.bottom);
            this.updatePosition(r, o), this.left += r - i, this.top += o - n
        }, e.prototype.onMouseUp = function(e) {
            if (window.removeEventListener("mousemove", this.mouseMoveHandler, !0), this.delegate) {
                var t = $(this.moveObj).css("-webkit-transform").match(/-?[\d\.]+/g),
                    i = parseInt(t[4], 10),
                    n = parseInt(t[5], 10);
                this.delegate.onMouseDrop(i, n)
            }
        }, e.prototype.enableDrag = function() {
            this.dragObj.addEventListener("mousedown", this.mouseDownHandler, !1), window.addEventListener("mouseup", this.mouseUpHandler, !1)
        }, e.prototype.disableDrag = function() {
            this.dragObj.removeEventListener("mousedown", this.mouseDownHandler, !1), window.removeEventListener("mouseup", this.mouseUpHandler, !1)
        }, Object.defineProperty(e.prototype, "position", {
            get: function() {
                return {
                    x: this.left,
                    y: this.top
                }
            },
            set: function(e) {
                this.updatePosition(e.x, e.y)
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(e.prototype, "limitArea", {
            set: function(e) {
                this.limit = e
            },
            enumerable: !0,
            configurable: !0
        }), e
    }();
    t.default = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(3),
        a = i(1200),
        s = i(3),
        c = i(40),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._uninstall = void 0, t
            }
            return n.__extends(t, e), t.prototype.install = function(e, t, i, n) {
                var o = this;
                this.uninstall();
                var d = document.createElement("chat-message");
                e.appendChild(d), this.renderWithProvider(r.createElement(a.default, {
                    injections: this.injections,
                    width: t,
                    height: i,
                    channelNameVisible: n
                }), d), this._uninstall = function() {
                    o.unmount(), e.removeChild(d)
                }, setTimeout(function() {
                    s.store.dispatch(c.updateChatList())
                }, 34)
            }, t.prototype.uninstall = function() {
                this._uninstall && (this._uninstall(), this._uninstall = void 0)
            }, t
        }(o.ReactRenderer);
    d.$inject = ["$filter", "staticdataLoaderService", "worldChatService"], t.default = d, o.service("worldChatRenderer", d)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(3),
        a = i(1201),
        s = i(1202),
        c = i(38),
        d = i(3),
        l = i(40),
        u = i(39),
        p = "message-scrollbar-hide",
        h = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.scrollState = c.ListScrollState.None, t.containerClass = p, t._messageContainer = null, t._messageList = null, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "haveMessages", {
                get: function() {
                    return this.props.messages && this.props.messages.length > 0
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "messageContainer", {
                get: function() {
                    return this._messageContainer || (this._messageContainer = document.getElementById("chat-message-container")), this._messageContainer
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "messageList", {
                get: function() {
                    return this._messageList || (this._messageList = document.getElementById(this.props.channelNameVisible ? "chat-message-list" : "simple-chat-message-list")), this._messageList
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.forceScrollToBottom = function() {
                var e = this.messageContainer,
                    t = this.messageList;
                e.scrollTop = e.scrollHeight - e.offsetHeight, e.clientHeight >= t.clientHeight ? this.scrollState = c.ListScrollState.None : this.scrollState = c.ListScrollState.Bottom
            }, t.prototype.detectScrollState = function() {
                var e = this.messageContainer,
                    t = this.messageList;
                return !e.scrollHeight || e.scrollHeight - (e.scrollTop + e.offsetHeight) < 2 ? c.ListScrollState.Bottom : e.clientHeight >= t.clientHeight ? c.ListScrollState.None : e.scrollTop <= 2 ? c.ListScrollState.Top : c.ListScrollState.Middle
            }, t.prototype.onContainerScroll = function() {
                var e = this.scrollState;
                this.scrollState = this.detectScrollState(), e !== this.scrollState && d.store.dispatch(l.scrollMessageList(this.scrollState))
            }, t.prototype.updateScrollbar = function() {
                var e = this.messageContainer,
                    t = this.messageList;
                e.clientHeight >= t.clientHeight ? (this.messageList.style.position = "absolute", this.messageList.style.bottom = "1px") : (this.messageList.style.position = "relative", this.scrollState === c.ListScrollState.Bottom && (e.scrollTop = e.scrollHeight - e.offsetHeight))
            }, t.prototype.ensureStatics = function() {
                if (!this.whisperTo) {
                    var e = this.props.injections.$filter,
                        t = e("translate");
                    this.whisperTo = t("CHATTING_WHISPERING_TO").split("${player}").map(function(e) {
                        return e.trim()
                    }), this.gmPrefix = t("CHATTING_PREFIX_GM")
                }
            }, t.prototype.componentDidMount = function() {
                this.scrollState = c.ListScrollState.None, this.updateScrollbar()
            }, t.prototype.componentDidUpdate = function(e) {
                var t = this,
                    i = this.detectScrollState();
                this.scrollState === c.ListScrollState.None && i !== c.ListScrollState.None && (this.scrollState = c.ListScrollState.Bottom, d.store.dispatch(l.scrollMessageList(this.scrollState))), e.updateTag === this.props.updateTag && e.activedTab === this.props.activedTab || (this.forceScrollToBottom(), setTimeout(function() {
                    d.store.dispatch(l.scrollMessageList(t.scrollState))
                }, 34)), this.updateScrollbar()
            }, t.prototype.shouldComponentUpdate = function(e) {
                return e !== this.props
            }, t.prototype.getSourceLocalName = function(e) {
                var t = this.props.injections,
                    i = t.staticdataLoaderService,
                    n = t.$filter,
                    r = n("translate"),
                    o = i.worldChatData,
                    a = o.getSourceConfig(e);
                if (a) {
                    return " [" + r(a.nameID) + "]"
                }
                return ""
            }, t.prototype.assembleChatMessage = function() {
                var e = this,
                    t = this.props.injections,
                    i = t.worldChatService,
                    o = t.$filter,
                    d = i.displayChatContextMenu.bind(i),
                    l = o("translate");
                return this.props.messages.map(function(t, i) {
                    if (_.includes([c.ChatSourceType.System, c.ChatSourceType.MultiRace], t.source)) {
                        var o = {
                            sourceName: e.props.channelNameVisible ? e.getSourceLocalName(t.source) : "",
                            text: l(t.text),
                            callback: d,
                            styleClass: t.source === c.ChatSourceType.MultiRace ? "MultiRace" : ""
                        };
                        return r.createElement(s.default, n.__assign({
                            key: i
                        }, o))
                    }
                    var o = {
                        source: t.source,
                        sourceName: e.props.channelNameVisible ? e.getSourceLocalName(t.source) : "",
                        sender: {
                            name: t.playerName,
                            id: t.playerId
                        },
                        whisperTo: [],
                        text: t.text,
                        team: t.team || u.Team.Individual,
                        isManager: t.isManager,
                        gmPrefix: e.gmPrefix,
                        callback: d
                    };
                    return t.source === c.ChatSourceType.Whisper && t.owned && (o.whisperTo = e.whisperTo), r.createElement(a.default, n.__assign({
                        key: i
                    }, o))
                })
            }, t.prototype.assembleHelpMessage = function() {
                var e = this;
                return (0, this.props.injections.$filter)("translate")("CHATTING_COMMAND_HELP_DEFAULT").split("<br>").map(function(t, i) {
                    var o = {
                        sourceName: e.props.channelNameVisible ? e.getSourceLocalName(c.ChatSourceType.System) : "",
                        text: t,
                        callback: null
                    };
                    return r.createElement(s.default, n.__assign({
                        key: i
                    }, o))
                })
            }, t.prototype.onMouseEnter = function() {
                "message-scrollbar-shown" !== this.containerClass && (this.containerClass = "message-scrollbar-shown", this.forceUpdate())
            }, t.prototype.onMouseLeave = function() {
                this.containerClass !== p && (this.containerClass = p, this.forceUpdate())
            }, t.prototype.render = function() {
                var e = this;
                this.ensureStatics();
                var t = {
                        width: this.props.width,
                        height: this.props.height
                    },
                    i = this.haveMessages ? this.assembleChatMessage() : this.assembleHelpMessage(),
                    n = this.props.channelNameVisible ? "chat-message-list" : "simple-chat-message-list",
                    o = function(t) {
                        return e.onContainerScroll()
                    },
                    a = function(t) {
                        return e.onMouseEnter()
                    },
                    s = function(t) {
                        return e.onMouseLeave()
                    },
                    c = !0 === this.props.forceDisplayScrollbar ? "message-scrollbar-shown" : this.containerClass;
                return r.createElement("div", {
                    id: "chat-message-container",
                    className: c,
                    style: t,
                    onScroll: o,
                    onMouseEnter: a,
                    onMouseLeave: s
                }, r.createElement("ul", {
                    id: n
                }, i))
            }, t
        }(r.Component);
    t.ChatMessageList = h;
    var f = function(e) {
        var t, i = e.worldChat.tabStates;
        for (var n in i) {
            if (i[n].isActivated) {
                t = n;
                break
            }
        }
        return {
            messages: e.worldChat.messages,
            updateTag: e.worldChat.updateTag,
            activedTab: t,
            forceDisplayScrollbar: !0 === e.worldChat.isInputBoxFocusing && !0 === e.worldChat.isInRace
        }
    };
    t.default = o.connect(f)(h)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(52),
        a = i(4),
        s = i(38),
        c = i(39),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.showDropdownMenu = function(e, t) {
                if (this.props.callback) {
                    var i = a.default.calcGlobalOffset($(e.target)),
                        n = i.top,
                        r = i.left,
                        o = i.width,
                        s = i.height,
                        c = Math.round(n + s),
                        d = Math.round(r + o + 5);
                    this.props.callback(t.id, t.name, c, d)
                }
            }, t.prototype.shouldComponentUpdate = function(e) {
                return e !== this.props
            }, t.prototype.nameBg = function() {
                var e = this.props,
                    t = e.source,
                    i = e.team,
                    n = e.isManager;
                if (t === s.ChatSourceType.Race) return n ? "manager" : i === c.Team.A ? "teamA" : i === c.Team.B ? "teamB" : "individual"
            }, t.prototype.namePrefix = function() {
                var e = this.props,
                    t = e.source,
                    i = e.isManager,
                    n = e.gmPrefix;
                if (t === s.ChatSourceType.Race) return i && r.createElement("span", null, n)
            }, t.prototype.source = function() {
                var e = this.props.sourceName;
                if (e) return r.createElement("span", {
                    className: "source"
                }, e)
            }, t.prototype.name = function() {
                var e, t, i = this,
                    n = this.props,
                    a = n.sender,
                    s = n.whisperTo,
                    c = (n.isManager, n.gmPrefix, function(e) {
                        return i.showDropdownMenu(e, a)
                    });
                s.length && (e = s[0] && r.createElement("span", {
                    className: "to1"
                }, s[0]), t = s[1] && r.createElement("span", {
                    className: "to2"
                }, s[1]));
                var d = this.nameBg(),
                    l = this.namePrefix();
                return r.createElement("span", {
                    className: o("name", d)
                }, e, r.createElement("span", null, l, "[", r.createElement("a", {
                    className: "name-links",
                    onClick: c
                }, a.name), "]"), t)
            }, t.prototype.text = function() {
                return r.createElement("span", {
                    className: "text"
                }, this.props.text)
            }, t.prototype.render = function() {
                var e = s.ChatSourceType[this.props.source];
                return r.createElement("li", {
                    className: "Instant-chat-message"
                }, r.createElement("div", {
                    className: o("instant-content", e)
                }, this.source(), this.name(), this.text()))
            }, t
        }(r.Component);
    t.default = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(52),
        a = i(1203),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.shouldComponentUpdate = function(e) {
                return e !== this.props
            }, t.prototype.source = function() {
                var e = this.props.sourceName;
                if (e) return r.createElement("span", {
                    className: "source"
                }, e)
            }, t.prototype.render = function() {
                var e = this,
                    t = this.props,
                    i = t.text,
                    s = t.styleClass,
                    c = /(<br>)/g,
                    d = i.split(c).map(function(t, i) {
                        var o = {
                            text: t,
                            callback: e.props.callback
                        };
                        return t.match(c) ? r.createElement("br", {
                            key: i
                        }) : r.createElement(a.default, n.__assign({
                            key: i
                        }, o))
                    });
                return r.createElement("li", {
                    className: "System-chat-message"
                }, r.createElement("div", {
                    className: o("system-content", s)
                }, this.source(), r.createElement("span", {
                    className: "text"
                }, d)))
            }, t
        }(r.Component);
    t.default = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(132),
        a = i(4),
        s = /(<Player>)/,
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.showDropdownMenu = function(e, t) {
                if (this.props.callback) {
                    var i = $(o.findDOMNode(e.target)),
                        n = a.default.calcGlobalOffset(i),
                        r = n.top,
                        s = n.left,
                        c = n.width,
                        d = n.height;
                    this.props.callback(t.id, t.name, r + d / 2, s + c)
                }
            }, t.prototype.render = function() {
                for (var e = this, t = this.props.text.split(s), i = [], n = 0, o = !1, a = 0, c = 0, d = t; c < d.length; c++) {
                    var l = d[c];
                    ! function(t) {
                        if (s.test(t)) return o = !o, "continue";
                        if (o) {
                            var c = JSON.parse(t),
                                d = function(t) {
                                    return e.showDropdownMenu(t, c)
                                };
                            0 < n && i.push(r.createElement("span", {
                                key: a++
                            }, " ")), i.push(r.createElement("a", {
                                key: a++,
                                className: "name-links",
                                onClick: d
                            }, c.name)), n += 1
                        } else i.push(r.createElement("span", {
                            key: a++
                        }, t))
                    }(l)
                }
                return r.createElement("span", null, i)
            }, t
        }(r.Component);
    t.default = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1205),
        a = i(305),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.prevProps = {}, t.setGuideInfo = function(e) {
                    if (t.props.show) {
                        var i = "nexon" !== t.publisherService.publisher ? "CN" : "KR";
                        if (t.translate(".id-title", "VIDEOGUIDE_" + i + "_" + e.code + "_NAME"), t.translate(".id-description", "VIDEOGUIDE_" + i + "_" + e.code + "_DESC"), "video" === e.type) $(t.image).hide(), $(t.player.video).show(), t.player.changeResource("video/videoguide/" + e.code, !0);
                        else if ("image" === e.type) {
                            t.player.pause(), $(t.player.video).hide(), $(t.image).show();
                            var n = t.$filter("cdn_video_guide_view_" + i.toLowerCase())(e.code);
                            t.image.src = n
                        }
                    }
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.guideTileList = this.addChildBinder(".id-videoCardList", o.GuideTileListBinder), this.guideTileList.face.on("selected", this.setGuideInfo), this.videoContainer = this.getFace(".id-video"), this.videoContainer.hasSize = !0
            }, t.prototype.shouldUpdate = function(e) {
                var t = _.find(e.guideData.raw, {
                    code: e.selected
                });
                return t && !(1 === t.level && t.items.length > 0) || this.props.show && !e.show
            }, t.prototype.update = function(e) {
                var t = _.find(e.guideData.raw, {
                    code: e.selected
                });
                this.handleGuideResource(e.show, t);
                var i = [],
                    n = 0;
                if (3 === t.level) {
                    i = _.find(e.guideData.raw, function(e) {
                        return e.code === t.parent
                    }).items, n = _.findIndex(i, function(e) {
                        return e.code === t.code
                    })
                } else i = 0 === t.items.length ? [t] : t.items;
                e.show && this.guideTileList.setProps({
                    tileGuides: i,
                    selectIndex: n
                }), this.prevProps = e
            }, t.prototype.handleGuideResource = function(e, t) {
                !this.prevProps.show && e ? (this.player = new a.Video(void 0, void 0, {
                    spot: this.getFace(".id-video").htmlElement
                }), this.player.setLoop(!0), this.image = new Image, this.getFace(".id-video").htmlElement.appendChild(this.image)) : this.prevProps.show && !e && (this.player.destroy(), this.getFace(".id-video").htmlElement.removeChild(this.image), this.image.src = "", this.image = null)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("publisherService")], s.prototype, "publisherService", void 0), n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), t.GuideViewBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(113),
        a = i(2),
        s = i(1206),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.guides = [], t.pageIndex = 0, t.pageSize = 0, t.isPaging = !1, t.currentList = [], t.nextList = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.pagingContainer = this.getFace(".id-cardList"), this.pagingContainer.hasSize = !0, _.times(s.TileListSize, function(t) {
                    var i = e.getFace(".id-current" + (t + 1)),
                        n = e.getFace(".id-next" + (t + 1));
                    e.currentList.push(i), e.nextList.push(n), e.addManagedListener(i, a.MouseEventEx.CLICK, e.onClick.bind(e, t))
                }), this.prevButton = this.getFace(".id-pagingLeft"), this.nextButton = this.getFace(".id-pagingRight"), this.setupPagingFlow(), this.setupIndicator()
            }, t.prototype.setupIndicator = function() {
                var e = this;
                this.indicatorContainer = this.getFace(".id-pageIndicatorContainer"), this.indicatorContainer.hasSize = !0;
                var t = this.indicatorContainer.$(".id-indicatorContainer");
                this.indicatorsBinder = this.addChildBinder(this.indicatorContainer.$(".id-indicator"), r.CollectionBinder, {
                    instanceBinder: d
                }), t.on("select", function(t) {
                    if (t !== e.pageIndex) {
                        var i = e.pageIndex < t ? "next" : "previous";
                        e.movePage(t, i)
                    }
                })
            }, t.prototype.setupPagingFlow = function() {
                var e = this;
                this.addManagedListener(this.prevButton, a.MouseEventEx.CLICK, function() {
                    e.movePage(e.pageIndex - 1, "previous")
                }), this.addManagedListener(this.nextButton, a.MouseEventEx.CLICK, function() {
                    e.movePage(e.pageIndex + 1, "next")
                }), this.addManagedListener(this.pagingContainer, "reset", function(t) {
                    e.gotoAndPlay(e.pagingContainer, "default"), e.isPaging = !1, e.disposePageButton(), e.bindPageIndicator()
                }), this.wheelHandler = _.throttle(function(t) {
                    if (!e.isPaging) {
                        var i = Math.max(-1, Math.min(1, t.wheelDelta || -t.detail));
                        1 === i && 0 !== e.pageIndex ? e.movePage(e.pageIndex - 1, "previous") : -1 === i && e.pageIndex !== e.chunkedGuide.length - 1 && e.movePage(e.pageIndex + 1, "next")
                    }
                }, s.WheelEventDelayMs, {
                    trailing: !1
                }), this.pagingContainer.htmlElement.addEventListener("mousewheel", this.wheelHandler, {
                    passive: !0
                })
            }, t.prototype.onAddedToScene = function() {
                this.localePrefix = "nexon" !== this.publisherService.publisher ? "CN" : "KR"
            }, t.prototype.update = function(e) {
                this.guides = e.tileGuides, this.initGuideList(), this.pageIndex = Math.floor(e.selectIndex / s.TileListSize), this.selectedIndex = e.selectIndex % s.TileListSize, this.selectedGuide = this.chunkedGuide[this.pageIndex][this.selectedIndex], this.bindCurrentList(this.pageIndex), this.disposePageButton(), this.bindPageIndicator(), this.setSelectGuide(e)
            }, t.prototype.setSelectGuide = function(e) {
                var t = this;
                this.currentList.forEach(function(e, i) {
                    e.selected = i === t.selectedIndex
                }), this.face.emit("selected", this.selectedGuide)
            }, t.prototype.initGuideList = function() {
                this.chunkedGuide = _.chunk(this.guides, s.TileListSize), this.pageSize = this.chunkedGuide.length, this.isPaging = !1
            }, t.prototype.bindPageIndicator = function() {
                var e = this;
                this.indicatorsBinder.applyCollection(this.chunkedGuide.map(function(t, i) {
                    return {
                        index: i,
                        selected: i === e.pageIndex
                    }
                }))
            }, t.prototype.bindCurrentList = function(e) {
                var t = this,
                    i = this.chunkedGuide[e] || [];
                this.currentList.forEach(function(e, n) {
                    var r = i[n];
                    if (e.selected = !1, e.enabled = !!r, r) {
                        var o = t.$filter("cdn_video_guide_" + t.localePrefix.toLowerCase())(r.code);
                        t.translate(e.$(".id-title"), "VIDEOGUIDE_" + t.localePrefix + "_" + r.code + "_NAME"), t.drawExternalImage(e.$(".id-externalImage"), o)
                    }
                })
            }, t.prototype.bindNextList = function(e) {
                var t = this,
                    i = this.chunkedGuide[e];
                i && this.nextList.forEach(function(e, n) {
                    var r = i[n];
                    if (e.enabled = !!r, r) {
                        var o = t.$filter("cdn_video_guide_" + t.localePrefix.toLowerCase())(r.code);
                        t.translate(e.$(".id-title"), "VIDEOGUIDE_" + t.localePrefix + "_" + r.code + "_NAME"), t.drawExternalImage(e.$(".id-externalImage"), o)
                    }
                })
            }, t.prototype.onClick = function(e) {
                if (!this.currentList[e].selected) {
                    var t = this.chunkedGuide[this.pageIndex][e];
                    this.dispatch(o.update(t.code))
                }
            }, t.prototype.movePage = function(e, t) {
                var i = this;
                this.isPaging || e < 0 || this.pageSize <= e || this.pageIndex !== e && (this.isPaging = !0, this.pageIndex = e, this.prevButton.enabled = this.nextButton.enabled = !1, this.bindNextList(e), this.gotoAndPlay(this.pagingContainer, t), this.gotoAndPlay(this.indicatorContainer, t), setTimeout(function() {
                    i.bindCurrentList(i.pageIndex), i.currentList.forEach(function(e, t) {
                        var n = i.chunkedGuide[i.pageIndex][t];
                        e.selected = n && n.code === i.selectedGuide.code
                    })
                }, 100))
            }, t.prototype.disposePageButton = function() {
                this.prevButton.enabled = 0 !== this.pageIndex, this.nextButton.enabled = this.pageIndex !== this.chunkedGuide.length - 1
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("publisherService")], c.prototype, "publisherService", void 0), n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), t.GuideTileListBinder = c;
    var d = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.hasSize = !0, this.on(this.face, a.MouseEventEx.CLICK, function() {
                e.props.selected || e.face.parent.emit("select", e.props.index)
            })
        }, t.prototype.update = function(e) {
            this.face.selected = e.selected
        }, t
    }(r.Binder);
    t.Indicator = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.TileListSize = 4, t.WheelEventDelayMs = 600
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(53),
        a = i(1208),
        s = i(1215),
        c = i(1219),
        d = i(29),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.modalCount = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.addChildBinder(".TopPanelContainer", a.TopPanelBinder), this.addChildBinder(".id-GlobalNav .id-MainNavbar", s.MainNavigationBinder), this.addChildBinder(".TopPanelContainer .id-notificationContainer", c.NotificationContainerBinder)
            }, t.prototype.onDetach = function() {
                this.dispatch(o.resetTopPanel()), this.globalKeyService.popListener(d.KeyboardMap.getKeyCode("ESCAPE"), this.escListener), this.globalKeyService.popListener("start_button", this.escListener)
            }, t.prototype.onAddedToScene = function(e) {
                this.escListener = {
                    onEvent: this.onEscKey.bind(this)
                }, this.globalKeyService.pushListener(d.KeyboardMap.getKeyCode("ESCAPE"), this.escListener), this.globalKeyService.pushListener("start_button", this.escListener)
            }, t.prototype.onEscKey = function() {
                this.stateService.isTransitionStarted || 87 === this.stateService.getCurrentCode() || this.dispatch(o.toggleMenuByEsc())
            }, t.prototype.updateModals = function(e) {
                var t = _.without(e.modals, "popup").length;
                this.modalCount !== t && (t ? this.stage.freezeAnimation() : this.stage.thawAnimation(), this.modalCount = t)
            }, t.prototype.updateNavigation = function(e) {
                e.navigation ? (this.visible(this.nav, !0), this.gotoAndStop(this.topBg, "default")) : (this.visible(this.nav, !1), e.openworld && this.gotoAndStop(this.topBg, "ow"))
            }, t.prototype.updateTopBg = function(e) {
                this.gotoAndStop(this.topBg, e.openworld ? "ow" : "default")
            }, t.prototype.update = function(e) {
                this.reduxProps.modals !== e.modals && this.updateModals(e), this.reduxProps.navigation !== e.navigation ? this.updateNavigation(e) : this.reduxProps.openworld !== e.openworld && this.updateTopBg(e)
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.view;
                return {
                    modals: t.modal.shown,
                    openworld: t.flags.openworld,
                    navigation: !e.globalPanel.navHidingTags.length
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("globalKeyService")], l.prototype, "globalKeyService", void 0), n.__decorate([r.autowired("stateService")], l.prototype, "stateService", void 0), n.__decorate([r.select(".id-GlobalNav")], l.prototype, "nav", void 0), n.__decorate([r.select(".id-topPanelBg")], l.prototype, "topBg", void 0), t.GlobalPanelBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(16),
        a = i(2),
        s = i(69),
        c = i(226),
        d = i(190),
        l = i(1209),
        u = i(1210),
        p = i(602),
        h = i(4),
        f = i(1211),
        v = i(1212),
        m = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.cleanUps = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.classNames(".id-systemTrayContainer", "rightsideReviseCoordinateOfScreenRatio"), this.addChildBinder(".PlayerInfoContainer", p.PlayerInfoBinder), this.addChildBinder(".SystemTrayHistory", l.SystemTrayHistoryBinder), this.addChildBinder(".PromotionPreview", u.PromotionPreviewBinder), this.addChildBinder(".id-miniChat", f.MiniChatBinder), this.addChildBinder(".QuestSystemPreview", v.QuestPreviewBinder), this.initTrayButtons(), this.targetBackdrop = this.getFace(".id-eventListBtn"), this.cleanUps.push(this.$transitions.onStart({}, function() {
                    e.removeBackdrop(e.targetBackdrop)
                }))
            }, t.prototype.initTrayButtons = function() {
                this.trayButtons = {
                    promotion: this.convertFace(".id-eventListBtn"),
                    messenger: this.convertFace(".id-MessengerBtn"),
                    notifier: this.convertFace(".id-messageListBtn"),
                    quest: this.convertFace(".id-questSystemListBtn")
                }, this.initTrayButtonHandler("promotion"), this.initTrayButtonHandler("messenger"), this.initTrayButtonHandler("notifier"), this.initTrayButtonHandler("quest")
            }, t.prototype.initTrayButtonHandler = function(e) {
                var t = this,
                    i = this.trayButtons[e];
                this.on(i, a.MouseEventEx.MOUSE_OVER, function() {
                    var i = t.reduxProps;
                    t.onTrayButtonOver(e, i.notifier)
                }), this.on(i, a.MouseEventEx.MOUSE_OUT, function() {
                    return t.onTrayButtonOut(e)
                }), this.hasSize(i.$(".id-buttonNameTooltip .id-tooltip .id-textField"), !1), this.hasSize(i.$(".id-buttonNameTooltip .id-tooltip .id-background"), !0), i.on(a.MouseEventEx.CLICK, _.debounce(function() {
                    return t.onTrayButtonClick(e)
                }, 200, {
                    leading: !0
                }))
            }, t.prototype.onAddedToScene = function() {
                this.featureSetService.isEnabled("QUESTSYSTEM") || this.visible(".id-questSystemListBtn", !1)
            }, t.prototype.onDestroy = function() {
                this.cleanUps.forEach(function(e) {
                    return e()
                })
            }, t.prototype.isChanged = function(e) {
                for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
                for (var n = this.reduxProps, r = 0, o = t; r < o.length; r++) {
                    var a = o[r];
                    if (e[a] !== n[a]) return !0;
                    if (this.isSystemTrayChanged(e, a)) return !0
                }
                return !1
            }, t.prototype.isSystemTrayChanged = function(e, t) {
                var i = e.systemTrayState,
                    n = this.getProps().systemTrayState || {};
                return i[t] !== n[t]
            }, t.prototype.update = function(e) {
                var t = 0 === e.globalPanel.hidingTags.length;
                this.face.visible = t, this.isChanged(e, "messenger", "contacts") && this.updateMessenger(e), this.isChanged(e, "notifier") && this.updateNotifier(e), this.isChanged(e, "promotion") && this.updatePromotion(e), this.isChanged(e, "miniChat") && this.updateMiniChat(e), this.isChanged(e, "quest") && this.updateQuest(e)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    notifier: e.notifier,
                    messenger: e.messenger,
                    contacts: e.contacts,
                    globalPanel: e.globalPanel,
                    promotion: e.promotion,
                    systemTrayState: e.globalPanel.systemTrayState,
                    quest: e.quest
                }
            }, t.prototype.addBackdrop = function(e, t, i) {
                void 0 === i && (i = !0);
                var n = "backdrop-" + Date.now(),
                    r = $("<div>").attr("id", n).addClass("Backdrop").css({
                        position: "absolute",
                        width: "1920px",
                        height: "1080px",
                        left: 0,
                        top: 0
                    }).click(t);
                i ? r.insertBefore(e.htmlElement) : r.insertAfter(e.htmlElement), $(e.htmlElement).attr("backdrop", n)
            }, t.prototype.removeBackdrop = function(e) {
                var t = $(e.htmlElement).attr("backdrop");
                t && $("#" + t).remove(), $(e.htmlElement).removeAttr("backdrop")
            }, t.prototype.updateMessenger = function(e) {
                var t = e.messenger,
                    i = e.contacts,
                    n = e.systemTrayState;
                this.trayButtons.messenger.customState = this.getMessengerBtnCustomState(t, i, n.messenger), this.trayButtons.messenger.selected = t.selected
            }, t.prototype.getMessengerBtnCustomState = function(e, t, i) {
                return i ? !e.selected && t.recvInvites && _.filter(t.recvInvites, {
                    newly: !0
                }).length > 0 ? "notification" : "" : "deactivate"
            }, t.prototype.updateNotifier = function(e) {
                var t = this,
                    i = e.notifier,
                    n = e.systemTrayState;
                this.trayButtons.notifier.selected = i.historyVisible;
                var r = this.getNotifierBtnCustomState(i, n.notifier);
                this.trayButtons.notifier.customState = r;
                var o = this.getProps().notifier || {};
                if (i.historyVisible !== o.historyVisible)
                    if (i.historyVisible) {
                        var a = function() {
                            t.dispatch(s.toggleHistory())
                        };
                        this.addBackdrop(this.targetBackdrop, a, !1)
                    } else this.removeBackdrop(this.targetBackdrop)
            }, t.prototype.getNotifierBtnCustomState = function(e, t) {
                return this.hasHistoryItem(e) && t ? e.isNewArrival ? "notification" : "" : "deactivate"
            }, t.prototype.hasHistoryItem = function(e) {
                var t = e.histories;
                return !!t && t.length > 0
            }, t.prototype.updatePromotion = function(e) {
                var t = e.promotion,
                    i = e.systemTrayState;
                this.trayButtons.promotion.selected = t.showPreview, this.trayButtons.promotion.customState = this.getPromotionBtnState(t, i.promotion)
            }, t.prototype.getPromotionBtnState = function(e, t) {
                return t ? e.hasNewPromotion ? "notification" : "" : "deactivate"
            }, t.prototype.updateMiniChat = function(e) {
                var t = e.globalPanel.systemTrayState.miniChat;
                this.visible(".id-miniChat", t)
            }, t.prototype.updateQuest = function(e) {
                var t = e.quest,
                    i = e.systemTrayState;
                this.trayButtons.quest.selected = t.showPreview, this.trayButtons.quest.customState = this.getQuestBtnState(t, i.quest)
            }, t.prototype.getQuestBtnState = function(e, t) {
                return t ? e.hasNotification ? "notification" : "" : "deactivate"
            }, t.prototype.onTrayButtonClick = function(e) {
                var t = this;
                if (this.getProps().systemTrayState[e]) {
                    var i = this.face.$(".id-messageListBtn .id-buttonNameTooltip");
                    switch (i && (i.visible = !1), e) {
                        case "messenger":
                            this.$rootScope.$apply(function() {
                                t.$rootScope.toggleMessenger()
                            });
                            break;
                        case "notifier":
                            if ("deactivate" === this.trayButtons.notifier.customState) return;
                            this.dispatch(s.toggleHistory());
                            break;
                        case "promotion":
                            this.dispatch(c.togglePreview());
                            break;
                        case "quest":
                            this.dispatch(d.togglePreview())
                    }
                }
            }, t.prototype.onTrayButtonOut = function(e) {
                var t = this.trayButtons[e].$(".id-buttonNameTooltip");
                t && t.gotoAndPlay("out")
            }, t.prototype.onTrayButtonOver = function(e, t) {
                var i = this.trayButtons[e].$(".id-buttonNameTooltip"),
                    n = "SYSTEMTRAY_TOOLTIP_" + e.toUpperCase();
                if (this.reduxProps.systemTrayState[e]) {
                    if ("notifier" === e) {
                        if (!t || t.historyVisible || t.displayed) return void(i.visible = !1);
                        var r = this.hasHistoryItem(t);
                        n = this.$filter("translate")(r ? "SYSTEMTRAY_TOOLTIP_MESSAGELIST" : "SYSTEMTRAY_TOOLTIP_NOMESSAGE")
                    }
                } else n = "SYSTEMTRAY_TOOLTIP_DONTUSE";
                i && (i.visible = !0, i.gotoAndPlay("in")), h.default.resizeTooltipByText(i, this.$filter("translate")(n))
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("$rootScope")], m.prototype, "$rootScope", void 0), n.__decorate([o.autowired("$transitions")], m.prototype, "$transitions", void 0), n.__decorate([o.autowired("$filter")], m.prototype, "$filter", void 0), n.__decorate([o.autowired("featureSetService")], m.prototype, "featureSetService", void 0), t.TopPanelBinder = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(5),
        o = i(1),
        a = i(69),
        s = i(2),
        c = i(3),
        d = i(600),
        l = i(601),
        u = "systemTrayHistory-backdrop",
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.list = this.addChildBinder(this.getFace(".id-systemTrayList"), h), this.hasSize(this.getFace(".id-shadow"), !0), this.hasSize(this.face, !1), this.visible(this.face, !1), this.getFace(".id-allDeleteItem .id-allDelete").on(s.MouseEventEx.CLICK, function() {
                    return e.onClickDeleteAll()
                }), this.translate(".id-allDeleteItem .id-allDelete .id-buttonName", "SYSTEMTRAY_MESSAGEALLDEL_BUTTON"), this.translate(".id-allDeleteItem .id-descLabel", "SYSTEMTRAY_MESSAGE_DESC"), this.list.face.hasSize = !0, this.updateDisable = !1
            }, t.prototype.onAddedToScene = function() {
                this.hasSize(this.getFace(".id-shadow"), !0)
            }, t.prototype.getListHeight = function(e) {
                var t = this.getFace(".id-systemTrayList .id-systemTrayItem"),
                    i = t ? t.height : 0;
                return Math.min(e.length, 7) * i
            }, t.prototype.getDeleteAllHeight = function() {
                var e = this.getFace(".id-allDeleteItem");
                return e ? e.height : 0
            }, t.prototype.update = function(e) {
                var t = this;
                if (!this.updateDisable) {
                    this.visible(this.face, e.visible), this.list.setProps(e.items);
                    var i = this.getListHeight(e.items);
                    this.list.face.height = i;
                    this.getFace(".SystemTrayListHitArea").height = i + this.getDeleteAllHeight();
                    var n = this.getFace(".id-shadow"),
                        r = (i + this.getDeleteAllHeight() + 16) / n.height;
                    n.regY = 0, n.scaleYMultiplier = r, e.visible ? $("#" + u).length || $("<div>").attr("id", u).css({
                        position: "absolute",
                        width: "1920px",
                        height: "1080px",
                        left: 0,
                        top: 0
                    }).click(function() {
                        $("#" + u).remove(), t.dispatch(a.toggleHistory())
                    }).insertBefore(this.face.htmlElement) : $("#" + u).remove()
                }
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    items: e.notifier.histories,
                    visible: e.notifier.historyVisible || !1
                }
            }, t.prototype.resumeUpdate = function() {
                this.updateDisable = !1, this.update(this.mapStateToProps(c.store.getState()))
            }, t.prototype.onClickDeleteAll = function() {
                var e = this;
                Date.now();
                this.updateDisable = !0;
                var t = function() {
                        c.store.dispatch(a.deleteAllHistory()), e.reduxProps.visible && c.store.dispatch(a.toggleHistory()), e.resumeUpdate()
                    },
                    i = function() {
                        e.resumeUpdate()
                    };
                this.popupService.draw("ConfirmCancelPopup", {
                    title: "SYSTEMTRAY_POPUP_MESSAGEALLDEL_TITLE",
                    description: "SYSTEMTRAY_POPUP_MESSAGEALLDEL_DESC",
                    confirm: t,
                    cancel: i
                })
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("popupService")], p.prototype, "popupService", void 0), n.__decorate([o.autowired("$filter")], p.prototype, "$filter", void 0), t.SystemTrayHistoryBinder = p;
    var h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.itemListBinder = this.addChildBinder(this.getFace(".id-systemTrayItem"), o.CollectionBinder, {
                    instanceBinder: f
                })
            }, t.prototype.update = function(e) {
                var t = _.map(e, function(e, t) {
                    return n.__assign({}, e, {
                        index: t
                    })
                });
                this.itemListBinder.applyCollection(t), t.length > 7 ? (this.face.htmlElement.scrollTop = 0, $(this.face.htmlElement).perfectScrollbar({
                    suppressScrollX: !0
                })) : $(this.face.htmlElement).perfectScrollbar("destroy")
            }, t.prototype.onDetach = function() {
                $(this.face.htmlElement).perfectScrollbar("destroy")
            }, t
        }(o.Binder),
        f = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.hasSize(".id-titleContainer", !0), this.getFace(".id-shortcutButton").on(s.MouseEventEx.CLICK, function() {
                    return e.onClickClose()
                })
            }, t.prototype.update = function(e) {
                var t = e.title,
                    i = e.body,
                    n = e.date,
                    r = e.transition,
                    o = e.isNew,
                    a = d.messageMap[r];
                this.translate(".id-titleContainer .id-titleLabel", t), this.hasSize(".id-titleContainer .id-titleLabel", !1), this.bindHtml(".id-descLabel", i), this.visible(".id-titleContainer .id-newIcon", !0 === o), this.translate(".id-time", this.getInterval(n)), this.translate(".id-shortcutButton .id-textField", a.buttonName), this.gotoAndStop(".id-background", e.index % 2 ? "even" : "odd")
            }, t.prototype.getInterval = function(e) {
                var t = r(Date.now()),
                    i = r(+e),
                    n = t.diff(i, "days"),
                    o = t.diff(i, "hours"),
                    a = t.diff(i, "minutes");
                return 0 < n ? this.$filter("template")({
                    date: n
                }, "SYSTEMTRAY_TIME_DAY") : 0 < o ? this.$filter("template")({
                    hour: o
                }, "SYSTEMTRAY_TIME_HOUR") : 0 < a ? this.$filter("template")({
                    minute: a
                }, "SYSTEMTRAY_TIME_MIN") : "SYSTEMTRAY_TIME_UNDERMIN"
            }, t
        }(l.NotificationItem)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(16),
        a = i(5),
        s = i(2),
        c = i(13),
        d = i(225),
        l = i(225),
        u = i(167),
        p = "promotionpreview-backdrop",
        h = [{
            title: "#e6e6e6",
            desc: "#9ea1a2",
            label: "PROMOTION_STATUS_ING"
        }, {
            title: "#e6e6e6",
            desc: "#9ea1a2",
            label: "PROMOTION_STATUS_SOON"
        }, {
            title: "#9ea1a2",
            desc: "#666666",
            label: "PROMOTION_STATUS_END"
        }, {
            title: "#15cf57",
            desc: "#9ea1a2",
            label: "PROMOTION_STATUS_COMPLETE"
        }],
        f = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.list = this.addChildBinder(this.getFace(".id-promotionPreviewList"), v), this.hasSize(this.getFace(".id-shadow"), !0), this.hasSize(this.face, !1), this.visible(this.face, !1), this.on(".id-translateToPage", s.MouseEventEx.CLICK, function() {
                    return e.onTranslateToPage()
                }), this.translate(".id-translateToPage .id-buttonName .id-textField", "PROMOTION_MOVE_PROMOTIONPAGE"), this.hasSize(".id-promotionPreviewTitle", !0), this.hasSize(".id-promotionPreviewTitle .id-dateContainer", !0), this.hasSize(".id-promotionPreviewTitle .id-countLabel", !1), this.translate(".id-promotionPreviewTitle .id-dateContainer .id-titleLabel", "PROMOTION_PREVIEW_ING"), this.list.face.hasSize = !0
            }, t.prototype.getListHeight = function(e) {
                var t = this.getFace(".id-promotionPreviewList .id-promotionPreviewItem"),
                    i = t ? t.height : 0;
                return Math.min(e.length, l.MAX_PREVIEW_COLUMN) * i
            }, t.prototype.getTitleHeight = function() {
                var e = this.getFace(".id-promotionPreviewTitle");
                return e ? e.height : 0
            }, t.prototype.update = function(e) {
                var t = this;
                this.visible(this.face, e.visible);
                var i = this.promotionService.filterPreviewPromotions(e.items);
                this.list.setProps(e), this.translate(".id-promotionPreviewTitle .id-dateContainer .id-dateLabel", a(this.serverTimeService.time).format("YYYY.MM.DD")), this.translate(".id-promotionPreviewTitle .id-countLabel", (i.length || 0).toString());
                var n = this.getListHeight(i);
                this.list.face.height = n, this.getFace(".PromotionPreviewListHitArea").height = n;
                var r = this.getFace(".id-shadow"),
                    o = (n + this.getTitleHeight() + 16) / r.height;
                r.regY = 0, r.scaleYMultiplier = o, e.visible ? $("#" + p).length || $("<div>").attr("id", p).css({
                    position: "absolute",
                    width: "1920px",
                    height: "1080px",
                    left: 0,
                    top: 0
                }).click(function() {
                    $("#" + p).remove(), t.promotionService.hidePreview()
                }).insertBefore(this.face.parent.htmlElement) : $("#" + p).remove()
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    items: e.promotion.promotions,
                    visible: e.promotion.showPreview || !1
                }
            }, t.prototype.onTranslateToPage = function() {
                $("#" + p).insertAfter(this.face.htmlElement), this.promotionService.hidePreview(), this.promotionService.openPromotionList()
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("promotionService")], f.prototype, "promotionService", void 0), n.__decorate([o.autowired("serverTimeService")], f.prototype, "serverTimeService", void 0), t.PromotionPreviewBinder = f;
    var v = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.itemListBinder = this.addChildBinder(this.getFace(".id-promotionPreviewItem"), r.CollectionBinder, {
                instanceBinder: m,
                keyProperty: "index"
            })
        }, t.prototype.update = function(e) {
            var t = this;
            if (!e.visible) return u.destroy(this.face.htmlElement), this.itemListBinder.applyCollection([]);
            var i = this.promotionService.filterPreviewPromotions(e.items).map(function(e) {
                return {
                    promotion: e,
                    state: t.promotionService.getStatus(e)
                }
            }).sort(function(e, t) {
                return e.state - t.state
            }).map(function(e, t) {
                return n.__assign({}, e, {
                    index: t
                })
            });
            this.itemListBinder.applyCollection(i), i.length > l.MAX_PREVIEW_COLUMN ? (u.initialize(this.face.htmlElement, {
                suppressScrollX: !0
            }), setTimeout(function() {
                return t.updateScrollbar()
            }, 100)) : u.destroy(this.face.htmlElement)
        }, t.prototype.onDetach = function() {
            u.destroy(this.face.htmlElement), this.promotionService.hidePreview()
        }, t.prototype.updateScrollbar = function() {
            this.face.htmlElement.scrollTop = 0, u.update(this.face.htmlElement)
        }, t
    }(r.Binder);
    n.__decorate([o.autowired("promotionService")], v.prototype, "promotionService", void 0);
    var m = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.hasSize = !0, this.face.on(s.MouseEventEx.CLICK, function() {
                return e.onClickClose()
            }), this.face.on(s.MouseEventEx.MOUSE_OVER, function(t) {
                return e.onMouseOver(t)
            }), this.face.on(s.MouseEventEx.MOUSE_OUT, function() {
                return e.onMouseOut()
            })
        }, t.prototype.update = function(e) {
            this.gotoAndStop(".id-background", e.index % 2 ? "even" : "odd"), this.bindHtml(".id-titleLabel", this.getTitleLabel(e)), this.bindHtml(".id-conditionLabel", this.getConditionLabel(e)), e.state === d.PromotionStatus.Completed ? (this.visible(".id-completeIcon", !0), this.visible(".id-stateLabel", !1)) : (this.visible(".id-completeIcon", !1), this.visible(".id-stateLabel", !0), this.translate(".id-stateLabel", h[e.state].label))
        }, t.prototype.onClickClose = function() {
            $("#" + p).insertAfter(this.face.htmlElement), this.tooltipService.hide(), this.promotionService.hidePreview(), this.promotionService.openPromotionList(this.props.promotion.info.id)
        }, t.prototype.onMouseOver = function(e) {
            this.tooltipService.show(e, "left", c.TooltipType.Promotion, this.props.promotion)
        }, t.prototype.onMouseOut = function() {
            this.tooltipService.hide()
        }, t.prototype.getTitleLabel = function(e) {
            var t = e.promotion,
                i = this.$filter("translate"),
                n = i("PROMOTION_TYPE_DUMMY");
            switch (t.info.type) {
                case "DT":
                    n = i("PROMOTION_TYPE_KEEPCONNECTION");
                    break;
                case "LOGIN":
                    n = i("PROMOTION_TYPE_CONNECTIONREWARD");
                    break;
                case "MATCHREWARD":
                    n = i("PROMOTION_TYPE_CONNECTIONBOOST");
                    break;
                case "MATCHCOUNT":
                    n = i("PROMOTION_TYPE_MATCHCOUNT")
            }
            return this.promotionService.getColorFormatString(h[e.state].title, n + " " + t.info.title)
        }, t.prototype.getConditionLabel = function(e) {
            var t = e.promotion,
                i = t.info.condition,
                n = this.$filter("template"),
                r = a(t.info.condition.startAt).format("MMM Do") + " ~ " + a(t.info.condition.endAt).format("MMM Do");
            switch (t.info.type) {
                case "DT":
                    var o = this.promotionService.participatingStep(t),
                        s = i.dt[o];
                    r = n({
                        durtime: n({
                            value: Math.floor(s.durTime / 60)
                        }, "PROMOTION_TOOLTIP_OBJECT_TIME")
                    }, "PROMOTION_CONDITION_KEEPCONNECTION");
                    break;
                case "LOGIN":
                    r = n({
                        starttime: i.startTimeStr,
                        endtime: 0 === i.endTime ? "24:00" : i.endTimeStr
                    }, "PROMOTION_CONDITION_CONNECTIONREWARD");
                    break;
                case "MATCHREWARD":
                    r = n({
                        starttime: i.startTimeStr,
                        endtime: 0 === i.endTime ? "24:00" : i.endTimeStr
                    }, "PROMOTION_CONDITION_CONNECTIONBOOST");
                    break;
                case "MATCHCOUNT":
                    r = n({
                        starttime: i.startTimeStr,
                        endtime: 0 === i.endTime ? "24:00" : i.endTimeStr,
                        count: i.matchCount.count,
                        current: this.promotionService.getMatchCountRecord(t),
                        target: i.matchCount.count
                    }, "PROMOTION_CONDITION_MATCHCOUNT")
            }
            return this.promotionService.getColorFormatString(h[e.state].desc, r)
        }, t
    }(r.Binder);
    n.__decorate([o.autowired("$filter")], m.prototype, "$filter", void 0), n.__decorate([o.autowired("tooltipService")], m.prototype, "tooltipService", void 0), n.__decorate([o.autowired("promotionService")], m.prototype, "promotionService", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(8),
        s = i(3),
        c = i(40),
        d = i(38),
        l = "CHATTING_WHISPERING_TO",
        u = function() {
            function e(e) {
                this.tintHead = document.createElement("span"), this.tintText = document.createElement("span"), this.sourceText = document.createElement("span"), this.nameText = document.createElement("span"), this.chatText = document.createElement("span"), this.tintHead.className = "mini-chat-tip-header", this.tintText.className = "mini-chat-tip-text", e.appendChild(this.tintHead), e.appendChild(this.tintText), e.appendChild(this.sourceText), e.appendChild(this.nameText), e.appendChild(this.chatText), this.rootElement = e
            }
            return e.prototype.updateTintText = function(e, t) {
                this.tintHead.textContent = e, this.tintText.textContent = t
            }, e.prototype.updateChatText = function(e, t, i, n, r) {
                var o = d.ChatSourceType[e];
                if (this.sourceText.className = "source-color-" + o + " mini-chat-content", this.sourceText.textContent = "[" + t + "]", this.nameText.className = "name-color-" + o + " mini-chat-content message-insert", this.nameText.textContent = r ? " " + r : i && i.length > 0 ? "[" + i + "] " : "", this.chatText.className = "text-color-" + o + " mini-chat-text", this.chatText.textContent = n, this.rootWidth || 0 === this.rootElement.clientWidth || (this.rootWidth = this.rootElement.clientWidth), this.rootWidth) {
                    var a = this.sourceText.clientWidth,
                        s = this.nameText.clientWidth,
                        c = 0 !== a ? a : 10 * this.sourceText.textContent.length;
                    c += 0 !== s ? s : 10 * this.nameText.textContent.length;
                    var l = this.rootWidth - c - 10;
                    this.chatText.style.width = l + "px"
                }
            }, e.prototype.enableChatText = function(e) {
                this.tintHead.hidden = e, this.tintText.hidden = e, this.sourceText.hidden = !e, this.nameText.hidden = !e, this.chatText.hidden = !e
            }, e
        }(),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.timer = null, t.lastMessage = null, t.isUnreadWhisperMsg = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = this.staticdata.worldChatData;
                this.tickRate = parseInt(t.getConfig("MINI_CHAT_TICKRATE"), 10);
                var i = this.$filter("translate");
                this.tint = i(t.getConfig("MINI_CHAT_TINT")), this.tips = [], t.getConfig("MINI_CHAT_TIPS").split(",").forEach(function(t) {
                    e.tips.push(i(t))
                }), this.tipHead = this.tips[0], this.tips.shift(), this.face.hasSize = !0, this.chatButton = this.face, this.chatButton.on(o.MouseEventEx.CLICK, function() {
                    return e.onChatButtonClick()
                }), this.messageRoot = this.getFace(".id-message");
                var n = this.getFace(".id-message .id-current .id-textField");
                n.htmlText = "", this.currentMsg = new u(n.htmlElement), this.currentMsg.enableChatText(!1);
                var r = this.getFace(".id-message .id-next .id-textField");
                r.htmlText = "", this.nextMsg = new u(r.htmlElement), this.nextMsg.enableChatText(!1), this.whisperNotice = this.getFace(".id-whisperNotice"), this.whisperNotice.visible = !1
            }, t.prototype.onAddedToScene = function() {
                this.active = void 0
            }, t.prototype.onChatButtonClick = function() {
                this.active && s.store.dispatch(c.openMainChatWindow())
            }, Object.defineProperty(t.prototype, "active", {
                get: function() {
                    return !this.chatButton.selected
                },
                set: function(e) {
                    if (this.active !== e)
                        if (e) {
                            this.chatButton.selected = !1, this.isUnreadWhisperMsg = !1, this.whisperNotice.visible = !1, this.lastMessage = this.reduxProps.lastMessage, this.timer = setInterval(this.onTimer.bind(this), this.tickRate), this.currentMsg.updateTintText("", this.tint);
                            var t = s.store.getState().worldChat,
                                i = t.minibarTabID;
                            i && s.store.dispatch(c.activeTab(i, !0))
                        } else {
                            this.timer && (clearInterval(this.timer), this.timer = void 0), this.chatButton.selected = !0;
                            var n = _.random(this.tips.length - 1);
                            this.currentMsg.updateTintText(this.tipHead + "  ", this.tips[n]), this.currentMsg.enableChatText(!1)
                        }
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onTimer = function() {
                var e = this;
                if (this.active && (!this.whisperNotice.visible && this.isUnreadWhisperMsg && (this.whisperNotice.gotoAndPlay("loopAnimation"), this.whisperNotice.visible = !0), this.reduxProps.lastMessage && this.lastMessage !== this.reduxProps.lastMessage)) {
                    var t = this.reduxProps.lastMessage,
                        i = void 0;
                    if (t.source === d.ChatSourceType.Whisper && t.owned) {
                        i = this.$filter("template")({
                            player: "[" + t.playerName + "]"
                        }, l)
                    }
                    var n = d.ChatSourceType[t.source],
                        r = this.$filter("translate");
                    this.nextMsg.updateChatText(t.source, r("CHATTING_CHANNELNAME_" + n.toUpperCase()), t.playerName, t.text, i), this.nextMsg.enableChatText(!0), this.messageRoot.gotoAndPlay("swap"), this.messageRoot.once(a.EventEx.STOP, function(t) {
                        e.onSwapAnimationStop(t.currentTarget.currentLabel)
                    }), this.lastMessage = this.reduxProps.lastMessage
                }
            }, t.prototype.onSwapAnimationStop = function(e) {
                if (this.lastMessage) {
                    var t, i = this.lastMessage;
                    if (i.source === d.ChatSourceType.Whisper && i.owned) {
                        t = this.$filter("template")({
                            player: "[" + i.playerName + "]"
                        }, l)
                    }
                    var n = d.ChatSourceType[i.source],
                        r = this.$filter("translate");
                    this.currentMsg.updateChatText(i.source, r("CHATTING_CHANNELNAME_" + n.toUpperCase()), i.playerName, i.text, t), this.currentMsg.enableChatText(!0), this.messageRoot.gotoAndStop("swap")
                }
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                e.displayType !== t.displayType && (this.active = e.displayType === d.ChatDisplayType.MiniChatBar), this.active && e.lastMessage && e.lastMessage !== this.lastMessage && e.lastMessage.source === d.ChatSourceType.Whisper && (this.isUnreadWhisperMsg = !0), e.isVisible !== t.isVisible && (this.face.visible = e.isVisible)
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.worldChat,
                    i = t.messages,
                    n = t.displayType,
                    r = t.hideMinibar;
                return {
                    displayType: n,
                    lastMessage: _.findLast(i, function(e) {
                        return e.source !== d.ChatSourceType.System
                    }),
                    isVisible: !r
                }
            }, t.prototype.onDetach = function() {
                this.timer && clearInterval(this.timer)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], p.prototype, "staticdata", void 0), n.__decorate([r.autowired("worldChatService")], p.prototype, "worldChatService", void 0), t.MiniChatBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(16),
        a = i(5),
        s = i(190),
        c = i(2),
        d = i(13),
        l = i(1213),
        u = i(4),
        p = i(1214),
        h = "questpreview-backdrop",
        f = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.cachedTemplate = this.$filter("template"), this.questPreview = this.face, this.contentMask = this.getFace(".comp-MaskLayerContainer"), this.classNames(".comp-Bitmap", "prevent-click"), this.classNames(".RewardContainer", "prevent-click"), this.questList = this.addChildBinder(this.getFace(".ListContainer"), l.QuestPreviewListBinder), this.rewardList = this.addChildBinder(this.getFace(".RewardContainer"), p.QuestRewardItemListBinder);
                var t = this.getFace(".TitleContainer");
                t.$(".id-textField").hasSize = !1, this.translate(t, "QUEST_TITLE"), this.bindUserInfo();
                var i = this.getFace(".CompleteListInfo");
                this.translate(i, "QUEST_COMPLETEDQUEST"), this.translate(".id-cumulativePointInfo .TitleLabel", "QUEST_QP_VALIDITYPERIOD1"), this.classNames(".LightSweepEffect", "prevent-click"), this.face.$$(".id-exchangeButton .comp-Button").forEach(function(t) {
                    e.translate(t, "QUEST_BUTTON_MOVE_QPTRADE"), t.on(c.MouseEventEx.CLICK, function() {
                        e.questPreview.once("stop", function() {
                            e.classNames(e.contentMask, {
                                "prevent-click": !1
                            }), e.classNames(".RewardContainer", {
                                "prevent-click": !1
                            })
                        }), e.gotoAndPlay(e.questPreview, "in"), e.classNames(e.contentMask, {
                            "prevent-click": !0
                        }), e.classNames(".ListContainer", {
                            "prevent-click": !0
                        })
                    })
                });
                var n = this.convertFace(".LightGrayButton");
                n.on(c.MouseEventEx.CLICK, function() {
                    e.questPreview.once("stop", function() {
                        e.classNames(e.contentMask, {
                            "prevent-click": !1
                        }), e.classNames(".ListContainer", {
                            "prevent-click": !1
                        })
                    }), e.gotoAndPlay(e.questPreview, "out"), e.classNames(e.contentMask, {
                        "prevent-click": !0
                    }), e.classNames(".RewardContainer", {
                        "prevent-click": !0
                    })
                }), this.translate(n, "QUEST_BUTTON_MOVEQUESTLIST");
                var r = this.$filter("translate")("QUEST_QP_RESETTIME_DAYS");
                this.dayStrings = r.split(","), this.cheapestRewardQP = _.minBy(this.staticdata.quest.rewards, function(e) {
                    return e.qp
                }).qp
            }, t.prototype.onDetach = function() {
                this.updateRemainingTimeInterval && clearInterval(this.updateRemainingTimeInterval), this.dispatch(s.hidePreview())
            }, t.prototype.update = function(e) {
                var t = this;
                this.visible(this.face, e.visible), _.isEmpty(e.quest) || (this.questList.setProps(e), this.rewardList.setProps(e), e.visible ? (this.updateRemainingTimeInterval || (this.updateQuestResetTime(), this.updateRemainingTimeInterval = setInterval(function() {
                    return t.updateQuestResetTime()
                }, 1e3)), this.installBackdrop(), this.updateQPText(e.quest), this.gotoAndPlay(".id-exchangeButton", e.quest.qp >= this.cheapestRewardQP ? "active" : "normal", !0)) : (this.updateRemainingTimeInterval && (clearInterval(this.updateRemainingTimeInterval), this.updateRemainingTimeInterval = void 0), this.removeBackdrop()))
            }, t.prototype.installBackdrop = function() {
                var e = this;
                $("#" + h).length || $("<div>").attr("id", h).css({
                    position: "absolute",
                    width: "1920px",
                    height: "1080px",
                    left: 0,
                    top: 0
                }).click(function() {
                    $("#" + h).remove(), e.dispatch(s.hidePreview())
                }).insertBefore(this.face.parent.htmlElement)
            }, t.prototype.removeBackdrop = function() {
                $("#" + h).remove()
            }, t.prototype.bindUserInfo = function() {
                var e = this,
                    t = this.getFace(".id-pcIcon");
                this.getFace(".id-vipIcon").visible = !1;
                var i = this.staticdata.pcBenefitData.questQp;
                if (!i) return void(t.visible = !1);
                var n = function() {
                    return e.gotoAndStop(t, e.publisherService.isIgr ? "normal" : "disabled")
                };
                n(), this.addManagedListener(this.publisherService, "igr", n), this.on(t, c.MouseEventEx.MOUSE_OVER, function() {
                    var t = e.cachedTemplate({
                        percent: i
                    }, "QUEST_IGR_" + (e.publisherService.isIgr ? "ON" : "OFF") + "_TOOLTIP");
                    e.tooltipService.show(event, "left", d.TooltipType.Basic, t, {}, {}, "quest-igrvip-tooltip")
                }), this.on(t, c.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                })
            }, t.prototype.updateQPText = function(e) {
                var t = a(e.qpResetTime),
                    i = a(e.qpResetTime).subtract(1, "months"),
                    n = "QUEST_QP_RESETTIME3";
                "MONTHLY" !== e.qpResetType && (i = a(e.qpResetTime).subtract(1, "WEEKLY" === e.qpResetType ? "weeks" : "days"), n = t.minutes() ? "QUEST_QP_RESETTIME" : "QUEST_QP_RESETTIME2"), t = t.subtract(1, "days"), this.template(".DateLabel", "QUEST_QP_VALIDITYPERIOD2", {
                    month1: i.month() + 1,
                    day1: i.date(),
                    month2: t.month() + 1,
                    day2: t.date()
                }), this.template(".DescriptionLabel", n, {
                    day: this.dayStrings[t.day()],
                    hour: t.hour(),
                    minute: t.minute()
                }), this.template(".CumulativePointLabel", "QUEST_QP_CURRENTSTATUS", {
                    point: u.default.toMoney(e.qp)
                })
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.quest;
                return {
                    visible: t.showPreview,
                    quest: t.quest
                }
            }, t.prototype.onTranslateToPage = function() {
                $("#" + h).insertAfter(this.face.htmlElement)
            }, t.prototype.updateQuestResetTime = function() {
                var e, t = this.reduxProps,
                    i = this.serverTimeService.getRemainingDuration(t.quest.questResetTime);
                e = i.asDays() >= 1 ? this.cachedTemplate({
                    days: i.days()
                }, "QUEST_REMAININGTIME_DAYS") : i.asHours() >= 1 ? this.cachedTemplate({
                    hours: i.hours(),
                    minutes: i.minutes()
                }, "QUEST_REMAININGTIME_HOURS") : i.asMinutes() >= 1 ? this.cachedTemplate({
                    minutes: i.minutes()
                }, "QUEST_REMAININGTIME_MINUTES") : this.cachedTemplate({
                    seconds: Math.max(i.seconds(), 0)
                }, "QUEST_REMAININGTIME_SECONDS"), this.gotoAndStop(".RemainingTime", i.asHours() >= 1 ? "more" : "less"), this.bindText(".TimeNum", e)
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("serverTimeService")], f.prototype, "serverTimeService", void 0), n.__decorate([o.autowired("publisherService")], f.prototype, "publisherService", void 0), n.__decorate([o.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([o.autowired("tooltipService")], f.prototype, "tooltipService", void 0), n.__decorate([o.autowired("staticdataLoaderService")], f.prototype, "staticdata", void 0), t.QuestPreviewBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(50),
        s = i(190),
        c = i(3),
        d = i(4),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0;
                var e = this.getFace(".id-questPreviewItem").height;
                this.itemListBinder = this.addChildBinder(this.getFace(".id-questPreviewItem"), r.CollectionBinder, {
                    instanceBinder: u,
                    keyProperty: "index"
                });
                var t = this.getFace(".CompleteListInfo");
                this.questNum = t.$(".id-questNum"), this.translate(".NoneDescription", "QUEST_EMPTYQUEST"), this.listContainer = this.convertFace(".QuestPreviewList"), this.listContainer.height = 7 * e, this.listContainer.hasSize = !0
            }, t.prototype.update = function(e) {
                var t = this;
                if (!e.visible) return $(this.listContainer.htmlElement).perfectScrollbar("destroy"), this.itemListBinder.applyCollection([]);
                var i = _.filter(e.quest.questProgress, function(e) {
                        return e.value >= t.questService.questDataByCode[e.code].goal
                    }).length,
                    n = e.quest.questProgress.length,
                    r = this.$filter("template")({
                        complete: i,
                        all: n
                    }, "QUEST_QUESTSTATUS");
                this.bindHtml(this.questNum, r);
                var o = _.sortBy(e.quest.questProgress.map(function(e, i) {
                    var n = t.questService.questDataByCode[e.code],
                        r = Math.floor(e.value);
                    return {
                        index: i,
                        quest: {
                            code: e.code,
                            name: t.$filter("template")({
                                current: d.default.toMoney(r),
                                target: d.default.toMoney(n.goal)
                            }, "QUEST_" + e.code + "_NAME"),
                            value: r,
                            goal: n.goal,
                            rewardSp: n.rewardSp,
                            rewardQp: n.rewardQp,
                            screenMovement: n.screenMovement,
                            isComplete: e.completed
                        }
                    }
                }), function(e) {
                    return !e.quest.isComplete
                });
                this.itemListBinder.applyCollection(o), o.length > 7 && ($(this.listContainer.htmlElement).perfectScrollbar({
                    suppressScrollX: !0
                }), setTimeout(function() {
                    return $(t.listContainer.htmlElement).perfectScrollbar("update")
                }, 100)), this.gotoAndStop(".QuestPreviewList", o && o.length > 0 ? "default" : "none")
            }, t.prototype.onDetach = function() {}, t
        }(r.Binder);
    n.__decorate([r.autowired("staticdataLoaderService")], l.prototype, "staticdata", void 0), n.__decorate([r.autowired("questService")], l.prototype, "questService", void 0), n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), t.QuestPreviewListBinder = l;
    var u = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.hasSize = !0, this.translate(".id-move .id-buttonName", "QUEST_BUTTON_MOVE"), this.on(".id-move", o.MouseEventEx.CLICK, function() {
                var t = e.props;
                if (t && t.quest) {
                    var i = t.quest.screenMovement,
                        n = {};
                    i.paramKey && i.paramValue && (n[i.paramKey] = i.paramValue);
                    var r = _.find(c.store.getState().navigation.navs, function(e) {
                            return e.state === i.state
                        }),
                        o = e.$filter("translate")(r.stringCode);
                    e.popupService.draw("ConfirmCancelPopup", {
                        title: e.$filter("template")({
                            feature: o
                        }, "QUEST_MOVE_POPUP_TITLE"),
                        description: e.$filter("template")({
                            feature: o
                        }, "QUEST_MOVE_POPUP_DESC"),
                        confirm: function() {
                            e.dispatch(s.hidePreview()), e.stateService.go(t.quest.screenMovement.state, n)
                        }
                    })
                }
            }), this.on(this.face, o.MouseEventEx.MOUSE_OVER, this.onMouseOver.bind(this)), this.on(this.face, o.MouseEventEx.MOUSE_OUT, this.onMouseOut.bind(this))
        }, t.prototype.update = function(e) {
            this.visible(".rewardStaticItem", e.quest.rewardSp > 0), this.gotoAndStop(".ListBackground", e.index % 2 == 0 ? "even" : "odd");
            var t = e.quest.value.toString();
            e.quest.value > 0 && (t = '<span class="highlight">' + t + "</span>"), this.bindHtml(".TitleLabel", "" + e.quest.name), this.translate(".PointIcon .comp-TextField", _.padStart(e.quest.rewardQp.toString(), 2, "0") + " P"), this.gotoAndStop(".TitleContainer", e.quest.isComplete ? "complete" : "normal")
        }, t.prototype.onMouseOver = function(e) {
            var t = this.props;
            t && t.quest && this.tooltipService.show(e, "left", a.TooltipType.QuestItem, {
                code: t.quest.code,
                value: t.quest.value,
                goal: t.quest.goal,
                isComplete: t.quest.isComplete,
                rewardSp: t.quest.rewardSp,
                rewardQp: t.quest.rewardQp
            }, {}, {}, "quest-item-tooltip")
        }, t.prototype.onMouseOut = function() {
            this.tooltipService.hide()
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], u.prototype, "tooltipService", void 0), n.__decorate([r.autowired("stateService")], u.prototype, "stateService", void 0), n.__decorate([r.autowired("popupService")], u.prototype, "popupService", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(50),
        s = i(27),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.translate(".TitleContainer .id-titleLabel", "QUEST_TRADE_TITLE"), this.translate(".TitleContainer .id-descriptionLabel", "QUEST_TRADE_DESC"), this.itemListBinder = this.addChildBinder(".id-item", r.CollectionBinder, {
                    instanceBinder: d,
                    keyProperty: "code"
                })
            }, t.prototype.update = function(e) {
                var t = this;
                this.itemListBinder.applyCollection(this.staticdata.quest.rewards.map(function(i) {
                    return {
                        code: i.itemCode,
                        info: {
                            code: i.itemCode,
                            type: "ITEM",
                            count: 1,
                            rewardCode: i.code,
                            price: i.qp,
                            qp: e.quest.qp,
                            available: e.quest.qp >= i.qp,
                            qpResetTime: e.quest.qpResetTime
                        },
                        onMouseOver: function(e, i) {
                            t.tooltipService.show(e, "left", a.TooltipType.ItemCard, i, {
                                marginLeft: 2,
                                marginTop: 6
                            })
                        },
                        onMouseOut: function() {
                            return t.tooltipService.hide()
                        },
                        actionButtonEnabled: !1
                    }
                }))
            }, t.prototype.onDetach = function() {}, t
        }(r.Binder);
    n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], c.prototype, "staticdata", void 0), t.QuestRewardItemListBinder = c;
    var d = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var t = this;
            this.face.hasSize = !0, this.cachedTemplate = this.$filter("template"), this.exchangeButton = this.convertFace(".id-exchange"), this.on(this.exchangeButton, o.MouseEventEx.CLICK, function() {
                t.props;
                t.questService.exchangeQuestReward(t.props.info.rewardCode, t.props.info.price, t.props.info.code)
            }), e.prototype.onFaceReady.call(this)
        }, t.prototype.update = function(t) {
            e.prototype.update.call(this, t), this.template(this.exchangeButton, "QUEST_TRADE_QPUNIT", {
                point: t.info.price
            }), this.exchangeButton.enabled = t.info.available
        }, t
    }(s.ItemCardBinder);
    n.__decorate([r.autowired("questService")], d.prototype, "questService", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(231),
        a = i(1216),
        s = i(1218),
        c = i(160),
        d = i(289),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.face.mouseEnabled = !1, this.mainButtons = this.addChildBinder(".LightGrayButton", r.CollectionBinder, {
                    instanceBinder: u,
                    keyProperty: "id"
                }), this.sub1Navs = this.addChildBinder(".id-Sub1NavBarBtns", r.CollectionBinder, {
                    instanceBinder: a.Sub1NavBinder,
                    keyProperty: "id"
                }), this.previewBinder = this.addChildBinder(".PreviewNavBar", s.PreviewNavBinder), this.subNavbar = this.getFace(".id-SubNavbar"), this.sub1NavbarBackground = this.getFace(".id-subBackground1"), this.sub2NavbarBackground = this.convertFace(".id-subBackground2"), this.sub2NavbarBackgroundAnimationDeregister = this.$rootScope.$on("onEndStateChangeDelay", function() {
                    e.sub2NavbarBackgroundAnimation && e.sub2NavbarBackground.gotoAndPlay(e.sub2NavbarBackgroundAnimation)
                })
            }, t.prototype.updatePreview = function(e) {
                this.prevProps && this.prevProps.preview !== e.preview && (e.preview ? (this.setSubNavVisible(!1), this.previewBinder.showPreview({
                    nav: e.preview,
                    navs: e.navs,
                    prevPreview: this.prevProps.preview
                })) : (_.filter(e.navs, function(e) {
                    return e.selected
                })[0].children.length > 0 && this.setSubNavVisible(!0), this.previewBinder.hidePreview()))
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.navigation,
                    n = e.hideNav,
                    r = i.navs,
                    o = i.mainNavs,
                    a = i.previewNavs,
                    s = i.subState,
                    c = i.shouldNav2Display,
                    l = i.wasSub2NavDisplayed,
                    u = i.shouldNav2Disappear;
                this.updatePreview(i), s.close ? this.setSubNavVisible(!1) : s.open && this.setSubNavVisible(!0);
                var p = o.map(function(e) {
                        return {
                            id: e,
                            nav: (a || r)[e],
                            navs: r,
                            hideNav: n
                        }
                    }),
                    h = p.filter(function(e) {
                        return e.nav.children.length > 0
                    }),
                    f = _.find(i.navs, function(e) {
                        return e.selected && !e.parent
                    }),
                    v = this.prevProps ? _.find(this.prevProps.navs, function(e) {
                        return e.selected && !e.parent
                    }) : void 0;
                (a || v !== f || this.reduxProps.hideNav !== n) && this.mainButtons.applyCollection(p), this.sub1Navs.applyCollection(h), _.find(i.navs, function(e) {
                    return e.selected && e.parent
                }) ? c ? (l || (this.sub2NavbarBackgroundAnimation = "intro"), setTimeout(function() {
                    var e = t.sub2NavbarBackground.getLabelPosition("intro"),
                        i = t.sub2NavbarBackground.getLabelPosition("outro");
                    if ("intro" === t.sub2NavbarBackground.currentLabel || "intro" === t.sub2NavbarBackgroundAnimation) {
                        var n = t.sub2NavbarBackground.timeline.time();
                        n < e ? t.gotoAndPlay(t.sub2NavbarBackground, "intro") : n !== i && t.gotoAndStop(t.sub2NavbarBackground, i - 1), t.sub2NavbarBackgroundAnimation = void 0
                    }
                }, 1e3 * d.StateChangeDelayTime), this.classNames(this.face, "sub2-open")) : (l && u ? this.sub2NavbarBackgroundAnimation = "outro" : (this.sub2NavbarBackground.gotoAndStop(0), this.sub2NavbarBackgroundAnimation = void 0), this.classNames(this.face, "")) : (this.sub2NavbarBackground.gotoAndStop(0), this.sub2NavbarBackgroundAnimation = void 0), this.prevProps = i
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    navigation: e.navigation,
                    hideNav: !!e.globalPanel.navHidingTags.length
                }
            }, t.prototype.setSubNavVisible = function(e) {
                this.visible(this.subNavbar, e), this.visible(this.sub1NavbarBackground, e)
            }, t.prototype.onDetach = function() {
                this.sub2NavbarBackgroundAnimationDeregister()
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$rootScope")], l.prototype, "$rootScope", void 0), t.MainNavigationBinder = l;
    var u = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onClick = function(t) {
            var i = this.props;
            i.nav.children.length < 2 ? e.prototype.onClick.call(this, t) : this.dispatch(c.showPreview(i.nav))
        }, t
    }(o.MenuButton)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(62),
        a = i(231),
        s = i(1217),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.prevProps = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.face.height = 0, this.sub1Buttons = this.addChildBinder(".id-Sub1MenuBtn", o.CollectionBinder, {
                    instanceBinder: a.MenuButton,
                    keyProperty: "id"
                }), this.sub2Navs = this.addChildBinder(".id-Sub2Navbar", o.CollectionBinder, {
                    instanceBinder: s.Sub2NavBinder,
                    keyProperty: "id"
                }), this.update(this.props)
            }, t.prototype.update = function(t) {
                var i = this.props,
                    n = i.navs,
                    r = i.nav,
                    o = r.children.map(function(e) {
                        return {
                            id: e,
                            nav: n[e],
                            navs: n
                        }
                    });
                n = t.navs, r = t.nav;
                var a = r.children.map(function(e) {
                    return {
                        id: e,
                        nav: n[e],
                        navs: n
                    }
                });
                if (o !== a) {
                    var s = a.filter(function(e) {
                        return e.nav.selected
                    });
                    this.sub1Buttons.applyCollection(a), this.sub2Navs.applyCollection(s);
                    (this.prevProps.nav && this.prevProps.nav.selected) !== t.nav.selected && (this.face.visible = t.nav.selected), this.prevProps = t, e.prototype.update.call(this, t)
                }
            }, t
        }(r.Binder);
    t.Sub1NavBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(62),
        a = i(8),
        s = i(231),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.onSub2BackgroundStop = function() {
                    return t.visible(t.face, !0)
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.face.height = 0, this.visible(this.face, !1), this.visible(".Sub2NavBarButtons svg", !1), this.sub2Buttons = this.addChildBinder(".id-Sub2MenuBtn", o.CollectionBinder, {
                    instanceBinder: s.MenuButton,
                    keyProperty: "id"
                }), this.sub2NavbarBackground = this.face.parent.parent.parent.parent.$(".id-subBackground2"), this.sub2NavbarBackground.on(a.EventEx.STOP, this.onSub2BackgroundStop)
            }, t.prototype.update = function(e) {
                var t = this.props,
                    i = t.navs,
                    n = t.nav,
                    r = n.children.map(function(e) {
                        return {
                            id: e,
                            nav: i[e],
                            navs: i
                        }
                    });
                i = e.navs, n = e.nav;
                var o = n.children.map(function(e) {
                    return {
                        id: e,
                        nav: i[e],
                        navs: i
                    }
                });
                r !== o && this.sub2Buttons.applyCollection(o)
            }, t.prototype.onDetach = function() {
                this.sub2NavbarBackground.off(a.EventEx.STOP, this.onSub2BackgroundStop)
            }, t
        }(r.Binder);
    t.Sub2NavBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(231),
        s = i(8),
        c = i(2),
        d = i(160),
        l = i(3),
        u = {},
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this,
                    i = this.getFace(".PreviewMenuButtons");
                i.setCustomStyle({
                    "text-align": "center"
                }), i.hasSize = !0, this.buttons = this.addChildBinder(".id-previewButton", o.CollectionBinder, {
                    instanceBinder: h
                }), this.face.on(c.MouseEventEx.CLICK, function() {
                    return t.dispatch(d.closePreview(!0))
                }), e.prototype.onFaceReady.call(this)
            }, t.prototype.onAddedToScene = function() {
                var e = l.store.getState().navigation,
                    t = e.mainNavs,
                    i = e.navs,
                    n = 1;
                _.each(t, function(e) {
                    i[e].children.length > 1 && _.each(i[e].children, function(e) {
                        u[e] = n++
                    })
                })
            }, t.prototype.showPreview = function(e) {
                e.prevPreview ? this.gotoAndPlay(this.face, "another-preview") : this.gotoAndPlay(this.face, "in");
                var t = e.navs,
                    i = e.nav;
                this.buttons.applyCollection(i.children.map(function(e) {
                    return {
                        navs: t,
                        nav: t[e]
                    }
                }))
            }, t.prototype.hidePreview = function() {
                var e = this;
                return new r(function(t) {
                    e.gotoAndPlay(e.face, "out"), e.face.once(s.EventEx.STOP, t)
                })
            }, t
        }(o.Binder);
    t.PreviewNavBinder = p;
    var h = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.update = function(e) {
            var t = this;
            if (this.prevProps.nav !== e.nav) {
                this.enableButton(this.face, !1);
                this.face.selected = e.nav.selected, this.translate(".id-mainTitle", e.nav.stringCode), this.translate(".id-subTitle", e.nav.stringCodeDesc), this.face.htmlElement.setAttribute("data-string", e.nav.stringCode), this.gotoAndStop(this.getFace(".id-shotContainer"), u[e.nav.id]), setTimeout(function() {
                    return t.checkNewItemIndicator(e.nav.stringCode)
                }, 1), this.prevProps = e, this.enableButton(this.face, !e.nav.locked)
            }
        }, t.prototype.onClick = function(t) {
            t.originalEvent.stopPropagation(), e.prototype.onClick.call(this, t)
        }, t
    }(a.MenuButton)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(37),
        a = i(1220),
        s = i(69),
        c = i(69),
        d = i(8),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.playing = !1, t.sleep = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(this.face, !0), this.visible(".BasicNotification", !1), this.actionNotificationBinder = this.addChildBinder(".ActionNotification", a.ActionNotificationBinder)
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                t.pauseTags !== e.pauseTags && (e.pauseTags.length ? this.pause() : this.resume(t, e)), t.displayed !== e.displayed && (e.displayed ? this.show(e.displayed) : this.hide()), this.playing && this.sleep && 0 === (t.notifiers || []).length && e.notifiers.length && this.wake()
            }, t.prototype.pause = function() {
                if (this.playing) return this.playing = !1, this.resumeTimer ? (clearTimeout(this.resumeTimer), void(this.resumeTimer = void 0)) : this.destroyTimer ? (clearTimeout(this.destroyTimer), this.destroyTimer = void 0, void this.dispatch(c.hide())) : void(this.nextTimer && (clearTimeout(this.nextTimer), this.nextTimer = void 0))
            }, t.prototype.resume = function(e, t) {
                var i = this;
                if (!this.playing) {
                    this.playing = !0;
                    var n = _.includes(e.pauseTags, s.ScreenTag) ? 2250 : 1e3;
                    this.resumeTimer = setTimeout(function() {
                        i.resumeTimer = void 0, i.display(t)
                    }, n)
                }
            }, t.prototype.show = function(e) {
                var t = this;
                this.audioService.get(o.FxAudioCode.Tutorial_Bubble).play(), this.actionNotificationBinder.setProps(e), this.visible(this.face, !0), this.gotoAndPlay(this.face, "in", !0), this.destroyTimer = setTimeout(function() {
                    t.destroyTimer = void 0, t.dispatch(c.hide())
                }, 5e3)
            }, t.prototype.hide = function() {
                var e = this;
                this.gotoAndPlay(this.face, "out", !0), this.face.once(d.EventEx.STOP, function() {
                    e.visible(e.face, !1)
                }), this.playing && (this.nextTimer = setTimeout(function() {
                    e.nextTimer = void 0, e.display(e.reduxProps)
                }, 500))
            }, t.prototype.display = function(e) {
                e.notifiers.length ? this.dispatch(c.display()) : this.sleep = !0
            }, t.prototype.wake = function() {
                this.sleep = !1, this.dispatch(c.display())
            }, t.prototype.mapStateToProps = function(e) {
                return e.notifier
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("audioService")], l.prototype, "audioService", void 0), t.NotificationContainerBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(601),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this;
                this.hasSize(this.face, !0), this.hasSize(".AlarmBackground", !0), this.hasSize(".AlarmBackgroundOver", !0), this.hasSize(".HitArea", !0), this.hasSize(".LoopEffect", !0), this.face.visible = !0, this.face.on(r.MouseEventEx.CLICK, function() {
                    return e.onClickClose()
                })
            }, t.prototype.update = function(e) {
                var t = e.title,
                    i = e.body,
                    n = t || "",
                    r = i || "";
                this.translate(".id-title", n), this.hasSize(".id-title", !1), this.hasSize(".id-content", !1);
                var o = this.getFace(".id-content");
                this.bindHtml(".id-content", r.replace("<br>", " "));
                var a = this.$filter("translate")(n).replace(/(<([^>]+)>)/g, ""),
                    s = r.replace(/(<([^>]+)>)/g, ""),
                    c = a.length > s.length ? a : s,
                    d = this.testWidth(o, c) + 120,
                    l = +(d / 256).toFixed(2);
                this.face.width = d, this.face.xOffset = -(256 * l - 256), this.adjustScale(this.getFace(".HitArea"), l), this.adjustScale(this.getFace(".LoopEffect"), l), this.adjustScale(this.getFace(".AlarmBackground"), l), this.adjustScale(this.getFace(".AlarmBackgroundOver"), l), this.visible(".LoopEffect", "SYSTEMTRAY_INVITEDGAME_TITLE" === n)
            }, t.prototype.adjustScale = function(e, t) {
                e.xOffset = e.regX * e.baseScaleX * (t - 1), e.scaleXMultiplier = t
            }, t.prototype.testWidth = function(e, t) {
                var i = $(e.htmlElement).clone().css({
                        width: "auto",
                        top: "100%"
                    }).appendTo("#edge-ui").text(t || ""),
                    n = i.width();
                return i.remove(), n
            }, t
        }(o.NotificationItem);
    t.ActionNotificationBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(2),
        s = i(1222),
        c = i(574),
        d = i(13),
        l = i(68),
        u = i(113),
        p = i(307),
        h = i(53),
        f = i(602),
        v = i(110),
        m = i(603),
        g = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.dt = this.addChildBinder(".id-dtEvent", s.PromotionDtBinder), this.banner = this.addChildBinder(".id-promotionBanner", m.PromotionBannerBinder), this.bindMainButtons(), this.bindSubButtons()
            }, t.prototype.bindMainButtons = function() {
                for (var e = this, t = [{
                        title: "NAV_GARAGE_VEHICLELIST",
                        desc: "GNB_HUB_GARAGE_DESC",
                        state: "root.menu.Vehicles"
                    }, {
                        title: "NAV_MYITEM_INVENTORY",
                        desc: "GNB_HUB_INVENTORY_DESC",
                        state: "root.menu.Inventory"
                    }, {
                        title: "NAV_SHOP_TITLE",
                        desc: "GNB_HUB_SHOP_DESC",
                        state: "root.menu.Shop"
                    }, {
                        title: "NAV_TRADEMARKET_VEHICLE",
                        desc: "GNB_HUB_TRADE_DESC",
                        state: "root.menu.VehiclePurchase"
                    }], i = this, n = 0, r = t.length; n < r; ++n) ! function(n, r) {
                    var o = t[n],
                        s = i.getFace(".id-mainButton" + (n + 1));
                    i.translate(s.$(".id-title"), o.title), i.translate(s.$(".id-description"), o.desc), i.on(s, a.MouseEventEx.CLICK, function() {
                        return e.stateService.go(o.state)
                    }), i.gotoAndStop(s.$(".id-mainBackImage"), "menu" + (n + 1))
                }(n);
                this.translate(this.handlingButton.$(".id-title"), "HANDLINGTUNING_TITLE_BUTTON"), this.gotoAndStop(this.handlingButton.$(".id-backImage"), "handling"), this.onClickSafe(this.handlingButton, function() {
                    return e.lazyLoader.loadView("steering-tuning-popup").then(function() {
                        e.dispatch(p.showSteeringPopup(e.reduxProps.vid))
                    })
                })
            }, t.prototype.bindWrappingButton = function() {
                var e = this;
                if (!this.featureSet.isEnabled("WRAPPING")) {
                    return void this.wrappingButton.parent.removeChild(this.wrappingButton)
                }
                this.translate(this.wrappingButton.$(".id-title"), "GNB_WRAPPING_BUTTON_TITLE"), this.translate(this.wrappingButton.$(".id-description"), "GNB_WRAPPING_BUTTON_DESC"), this.gotoAndStop(this.wrappingButton.$(".id-backImage"), "wrapping"), this.onClickSafe(this.wrappingButton, function() {
                    return e.externalService.beEnterWrappingMode(), e.dispatch(h.toggleMenuByEsc()), r.delay(1e3)
                })
            }, t.prototype.bindSubButtons = function() {
                var e = this;
                this.fromInjector("configLoader").getConfig().then(function(t) {
                    var i = "cn" === t.locale ? "cn" : "kr";
                    e.on(".id-shut", a.MouseEventEx.CLICK, function() {
                        var t = function() {
                                e.inGameConfigService.renew(), setTimeout(function() {
                                    return e.externalService.beShutdown(1)
                                })
                            },
                            i = e.promotionService.getPreClosingPromotionUrl();
                        i ? e.popupService.draw("WebPageConfirmCancelPopup", {
                            title: "PROMOTION_BANNER_TITLE",
                            description: "COMMON_POPUP_EXIT_TITLE",
                            link: i,
                            confirm: t
                        }) : e.popupService.draw("ConfirmCancelPopup", {
                            title: "COMMON_POPUP_EXIT_TITLE",
                            description: "COMMON_POPUP_EXIT_DESC",
                            confirmText: "COMMON_POPUP_EXIT_BUTTON_CONFIRM",
                            confirm: t
                        })
                    }), e.gotoAndStop(".id-edit .id-IconMC", "edit_" + i), e.onClickSafe(".id-edit", function() {
                        return e.lazyLoader.loadView("configuration").then(function() {
                            e.dispatch(l.show(!0))
                        })
                    }), e.gotoAndStop(".id-pad .id-IconMC", "pad_" + i), e.onClickSafe(".id-pad", function() {
                        return e.lazyLoader.loadView("configuration").then(function() {
                            e.dispatch(l.activateItem("inputkey")), e.dispatch(l.show(!0))
                        })
                    }), e.gotoAndStop(".id-pc .id-IconMC", "pc_" + i), e.on(".id-subMenu .id-pc", a.MouseEventEx.MOUSE_OVER, function(t) {
                        e.tooltipService.show(t, "top", d.TooltipType.BasicDetail, f.getPcBefitTooltipInfo(e.$filter("template"), e.staticdata.pcBenefitData), {
                            marginTop: -4
                        }, void 0, "freedrive-igr-tooltip")
                    }), e.on(".id-subMenu .id-pc", a.MouseEventEx.MOUSE_OUT, function() {
                        return e.tooltipService.hide()
                    }), e.addManagedListener(e.publisherService, "igr", function() {
                        e.updatePcIcon(), e.dt.onIgrChange()
                    }), e.gotoAndStop(".id-level .id-IconMC", "level_" + i), e.on(".id-level", a.MouseEventEx.CLICK, function() {
                        var t = e.storeState.player.level + 1,
                            i = e.rewardService.getLevelReward(t);
                        e.popupService.draw("NewLevelupRewardPreviewConfirmPopup", {
                            level: t,
                            rewards: i,
                            preview: !0,
                            background: "dark"
                        })
                    }), e.gotoAndStop(".id-question .id-IconMC", "question_" + i), e.on(".id-question", a.MouseEventEx.CLICK, function() {
                        return e.dispatch(u.show())
                    })
                })
            }, t.prototype.bindEventButtons = function() {
                var e = this;
                this.fromInjector("configLoader").getConfig().then(function(t) {
                    var i = "cn" === t.locale ? "cn" : "kr",
                        n = e.promotionService.getPromotionByCode(c.ReservedPromotionCode.Rookie),
                        r = e.promotionService.getPromotionByCode(c.ReservedPromotionCode.Active),
                        o = [];
                    n && o.push({
                        key: "point_" + i,
                        promotion: n
                    }), r && o.push({
                        key: "item_" + i,
                        promotion: r
                    });
                    for (var s = 1; s <= 2; ++s) ! function(t) {
                        var i = o[t - 1];
                        i ? (e.gotoAndStop(".id-event" + t + " .id-IconMC", i.key), e.on(".id-event" + t, a.MouseEventEx.CLICK, function() {
                            e.promotionService.openPromotionList(i.promotion.info.id)
                        })) : e.visible(".id-event" + t, !1)
                    }(s)
                })
            }, t.prototype.onStageInitialize = function(t) {
                this.mayOpenDailyQuest = "root.startScreen" === t, e.prototype.onStageInitialize.call(this, t)
            }, t.prototype.onAddedToScene = function() {
                this.updatePcIcon(), this.bindEventButtons(), this.bindWrappingButton();
                var e = this.storeState.tutorial.status;
                this.mayOpenDailyQuest && e === v.TutorialStatus.FINISHED && this.promotionService.openAttendancePromotionPage()
            }, t.prototype.onDetach = function() {
                this.tooltipService.hide(), this.inputService.clearKeyboardOverride("gnb")
            }, t.prototype.updatePcIcon = function() {
                this.gotoAndStop(".id-pc .id-iconContainer", this.publisherService.isIgr ? "active" : "default")
            }, t.prototype.showHub = function() {
                this.gotoAndPlay(this.stage, "in", !0), this.banner.onShowGnbHub(), this.dt.onShowGnbHub(), this.tooltipService.hide(), this.visible(this.wrappingButton, this.storeState.view.flags.openworld), this.inputService.overrideKeyboard("gnb")
            }, t.prototype.hideHub = function() {
                this.gotoAndPlay(this.stage, "out", !0), this.banner.onHideGnbHub(), this.dt.onHideGnbHub(), this.tooltipService.hide(), this.inputService.clearKeyboardOverride("gnb")
            }, t.prototype.update = function(e) {
                if (!this.reduxProps.show && e.show ? this.showHub() : this.reduxProps.show && !e.show && this.hideHub(), this.reduxProps.level !== e.level) {
                    this.rewardService.getLevelReward(e.level + 1) || this.enableButton(".id-level", !1)
                }
                if (this.reduxProps.vid !== e.vid) {
                    var t = this.storeState.vehicle.vehicles[e.vid],
                        i = this.$filter("vehicleName");
                    this.bindText(this.handlingButton.$(".id-description"), i(t.code))
                }
                this.reduxProps.promotion !== e.promotion && (this.banner.setProps(e.promotion), this.dt.setProps(e.promotion))
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    show: e.globalPanel.showGnbHub,
                    level: e.player.level || 0,
                    vid: (e.player.recent || {}).vid,
                    promotion: e.promotion
                }
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$filter")], g.prototype, "$filter", void 0), n.__decorate([o.autowired("externalService")], g.prototype, "externalService", void 0), n.__decorate([o.autowired("promotionService")], g.prototype, "promotionService", void 0), n.__decorate([o.autowired("popupService")], g.prototype, "popupService", void 0), n.__decorate([o.autowired("inGameConfigService")], g.prototype, "inGameConfigService", void 0), n.__decorate([o.autowired("lazyLoadService")], g.prototype, "lazyLoader", void 0), n.__decorate([o.autowired("tooltipService")], g.prototype, "tooltipService", void 0), n.__decorate([o.autowired("staticdataLoaderService")], g.prototype, "staticdata", void 0), n.__decorate([o.autowired("publisherService")], g.prototype, "publisherService", void 0), n.__decorate([o.autowired("rewardService")], g.prototype, "rewardService", void 0), n.__decorate([o.autowired("stateService")], g.prototype, "stateService", void 0), n.__decorate([o.autowired("inputService")], g.prototype, "inputService", void 0), n.__decorate([o.autowired("featureSetService")], g.prototype, "featureSet", void 0), n.__decorate([o.select(".id-handlingTuningButton")], g.prototype, "handlingButton", void 0), n.__decorate([o.select(".id-wrappingButton")], g.prototype, "wrappingButton", void 0), t.GnbHubBinder = g
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(5),
        o = i(1),
        a = i(13),
        s = i(2),
        c = i(603),
        d = function(e) {
            function t() {
                var i = null !== e && e.apply(this, arguments) || this;
                return i.onShowGnbHub = t.prototype.runProgress, i.onHideGnbHub = t.prototype.stopProgress, i
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-title", "DT_ACCUMULATE_TIME"), this.hasSize(".id-htmlItemSimple", !0), this.face.hasSize = !0, this.on(this.face, s.MouseEventEx.MOUSE_OVER, function(t) {
                    return e.gaugeMouseOver(t)
                }), this.on(this.face, s.MouseEventEx.MOUSE_OUT, function() {
                    return e.gaugeMouseOut()
                });
                var t = this.getFace(".id-pageNumContainer");
                t.setCustomStyle({
                    "text-align": "center"
                }), this.hasSize(t, !0), this.pageNumbers = this.addChildBinder(".id-pageNum", o.CollectionBinder, {
                    instanceBinder: c.PageNumber
                }), this.progress = this.convertFace(".id-progressBar"), this.progress.ratio = 0
            }, t.prototype.shouldUpdate = function(e) {
                return this.props.promotions !== e.promotions
            }, t.prototype.update = function(e) {
                this.syncUiPromotions()
            }, t.prototype.onDetach = function() {
                clearInterval(this.dtTimer), clearTimeout(this.incompleteTimer)
            }, t.prototype.gaugeMouseOver = function(e) {
                this.selected && (this.isTooltipDisplayed = !0, this.tooltipService.show(e, "top", a.TooltipType.PromotionDurationTime, this.selected, {
                    marginTop: -10,
                    marginLeft: -10
                }))
            }, t.prototype.gaugeMouseOut = function() {
                this.selected && this.hideTooltip()
            }, t.prototype.selectPromotion = function(e) {
                this.selected = e, e && (this.visible(".id-pc", e.info.condition.targetUser.igr), this.currentStep = this.promotionService.participatingStep(e), this.updateRewardThumbnail(), this.updatePromotionTargetTime(), this.updateDtProgress())
            }, t.prototype.getDurationString = function(e) {
                var t = Math.floor(e / 60),
                    i = e % 60;
                return (t ? this.$filter("template")({
                    value: t
                }, "PROMOTION_DESC_MINUTE") : "") + " " + (i ? this.$filter("template")({
                    value: i
                }, "PROMOTION_DESC_SEC") : "")
            }, t.prototype.renderProgress = function(e, t) {
                if (t) {
                    var i = Math.min(e / t, 1),
                        n = Math.max(Math.floor(t - e), 1);
                    this.progress.killCustomTweens(), this.progress.addCustomFromToTween(n, {
                        flash: {
                            ratio: i
                        }
                    }, {
                        ease: Power0.easeInOut,
                        flash: {
                            ratio: i
                        }
                    })
                }
            }, t.prototype.updateDtProgress = function() {
                if (this.selected && this.selected.record) {
                    var e = this.selected,
                        t = e.record,
                        i = e.info.condition,
                        n = r(this.serverTimeService.time).diff(t.dt.updatedAt, "seconds") + t.dt.record || 0,
                        o = i.dt[this.currentStep].durTime;
                    this.bindText(".id-circleText", this.getDurationString(Math.min(n, o)));
                    var a = this.currentStep ? i.dt[this.currentStep - 1].durTime : 0;
                    this.renderProgress(n - a, o - a)
                }
            }, t.prototype.updateRewardThumbnail = function() {
                var e = this.selected.info.condition.dt[this.currentStep].rewards[0];
                this.drawExternalImage(".id-htmlItemSimple", this.$filter("itemCardImg")(e.type, e.code))
            }, t.prototype.updatePromotionTargetTime = function() {
                if (this.selected) {
                    var e = Math.floor(this.selected.info.condition.dt[this.currentStep].durTime / 60),
                        t = this.$filter("template")({
                            value: e
                        }, "PROMOTION_TOOLTIP_OBJECT_TIME");
                    this.bindText(".id-circleText", t)
                }
            }, t.prototype.checkUnableToComplete = function(e) {
                var t, i = this,
                    n = 36e5,
                    o = this.serverTimeService.time;
                _.forEach(e, function(e) {
                    if (e.record) {
                        var a = e.info.condition.dt[i.promotionService.participatingStep(e)].durTime - e.record.dt.record,
                            s = r(e.record.dt.updatedAt).add(a, "seconds"),
                            c = s.diff(e.info.condition.endAt),
                            d = r(o).startOf("day").add(0 !== e.info.condition.endTime ? e.info.condition.endTime : 1440, "minutes"),
                            l = s.diff(d),
                            u = Math.max(c, l);
                        if (u > 0) {
                            var p = s.subtract(u).diff(o);
                            p > 0 && p < n && (t = e, n = p)
                        }
                    }
                }), t && (this.incompleteTimer && clearTimeout(this.incompleteTimer), this.incompleteTimer = setTimeout(function() {
                    i.syncUiPromotions()
                }, n + 1e3))
            }, t.prototype.updatePageNumbers = function(e) {
                var t = this,
                    i = function(i) {
                        t.selectPromotion(e[i]), t.isTooltipDisplayed && t.gaugeMouseOver({
                            currentTarget: t.face
                        }), t.updatePageNumbers(e)
                    };
                this.pageNumbers.applyCollection(e.map(function(e, n) {
                    return {
                        onClick: i,
                        index: n,
                        selected: e === t.selected
                    }
                }))
            }, t.prototype.syncUiPromotions = function() {
                var e = this.promotionService.getPromotionWithFilterForDt().slice(0, 8),
                    t = !!e.length;
                if (this.visible(this.face, t), !t) return this.stopProgress();
                this.checkUnableToComplete(e), _.includes(e, this.selected) || this.selectPromotion(e[0]), this.selected || this.selectPromotion(e[0]), this.updatePageNumbers(e), this.isTooltipDisplayed && this.gaugeMouseOver({
                    currentTarget: this.face
                }), this.storeState.globalPanel.showGnbHub && this.runProgress()
            }, t.prototype.hideTooltip = function() {
                this.isTooltipDisplayed && (this.isTooltipDisplayed = !1, this.tooltipService.hide())
            }, t.prototype.runProgress = function() {
                var e = this;
                this.stopProgress(), this.dtTimer = setInterval(function() {
                    return e.updateDtProgress()
                }, 1e3)
            }, t.prototype.stopProgress = function() {
                this.dtTimer && (clearInterval(this.dtTimer), this.progress.killCustomTweens(), this.dtTimer = void 0)
            }, t.prototype.onIgrChange = function() {
                this.syncUiPromotions()
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([o.autowired("promotionService")], d.prototype, "promotionService", void 0), n.__decorate([o.autowired("tooltipService")], d.prototype, "tooltipService", void 0), n.__decorate([o.autowired("serverTimeService")], d.prototype, "serverTimeService", void 0), t.PromotionDtBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(307),
        a = i(2),
        s = i(13),
        c = i(8),
        d = i(3),
        l = i(604),
        u = i(72),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.init = _.once(function() {
                    t.translateAll(".id-titleContainer", "HANDLINGTUNING_MAIN_CATEGORY_" + t.props.info.category + "_TITLE"), t.hasSizeAll(".id-titleContainer", !0), t.hasSizeAll(".id-titleContainer .id-textField", !1), t.hasSizeAll(".id-titleContainer .id-tooltipButton", !0), "slide" === t.style ? (t.gotoAndPlay(".id-listItemMC", "rangeInput"), t.translate(".id-rangeInputGrayContainer .id-lowTitle", "HANDLINGTUNING_MAIN_CATEGORY_" + t.props.info.category + "_LEFT_TITLE"), t.translate(".id-rangeInputGrayContainer .id-highTitle", "HANDLINGTUNING_MAIN_CATEGORY_" + t.props.info.category + "_RIGHT_TITLE"), t.bindText(".id-rangeInputGrayContainer .id-lowNum", t.props.info.min), t.bindText(".id-rangeInputGrayContainer .id-highNum", t.props.info.max)) : "toggle" === t.style && (t.gotoAndPlay(".id-listItemMC", "radioButton"), t.translate(".id-radioButtonContainer .id-radioButton0 .id-textFieldContainer", "HANDLINGTUNING_MAIN_CATEGORY_" + t.props.info.category + "_LEFT_TITLE"), t.translate(".id-radioButtonContainer .id-radioButton1 .id-textFieldContainer", "HANDLINGTUNING_MAIN_CATEGORY_" + t.props.info.category + "_RIGHT_TITLE")), t.gotoAndStop(".id-background", t.props.info.category % 2 == 0 ? "even" : "odd"), t.onChange = t.props.info.listener
                }), t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(this.face, !0), this.rangeInput = this.convertFace(".id-rangeInputGrayContainer .id-RangeInput"), this.radioGroup = new u.ButtonGroup("RadioGroup"), _.each(this.face.$$(".id-radioButtonContainer .RadioButton"), function(t, i) {
                    t.toggle = !0, e.radioGroup.addButton(t)
                }), this.onAll(".id-titleContainer .id-tooltipButton", a.MouseEventEx.MOUSE_OVER, function(t) {
                    var i = e.$filter("translate")("HANDLINGTUNING_MAIN_CATEGORY_" + e.props.info.category + "_DESC");
                    e.tooltipService.show(t, "topright", s.TooltipType.Basic, i)
                }), this.onAll(".id-titleContainer .id-tooltipButton", a.MouseEventEx.MOUSE_OUT, function(t) {
                    e.tooltipService.hide()
                }), this.rangeInput.on(c.EventEx.CHANGE, function() {
                    if (e.bindText(".id-rangeInputGrayContainer .id-currentNum", e.rangeInput.value), e.ignoreListener) return void(e.ignoreListener = !1);
                    e.onChange && e.onChange({
                        category: e.props.info.category,
                        value: e.value()
                    })
                }), this.radioGroup.on(c.EventEx.CHANGE, function() {
                    if (e.ignoreListener) return void(e.ignoreListener = !1);
                    e.onChange && e.onChange({
                        category: e.props.info.category,
                        value: e.value()
                    })
                })
            }, t.prototype.update = function(e) {
                this.style = this.props.info.inputStyle, this.ignoreListener = e.info.ignoreListener, this.init(), "slide" === this.style ? (this.rangeInput.min = this.props.info.min, this.rangeInput.max = this.props.info.max, this.rangeInput.value = this.props.info.current, this.bindText(".id-rangeInputGrayContainer .id-currentNum", this.rangeInput.value)) : "toggle" === this.style && this.radioGroup.setSelectedButtonByIndex(this.props.info.current)
            }, t.prototype.value = function() {
                return "slide" === this.style ? this.rangeInput.value : "toggle" === this.style ? this.radioGroup.selectedIndex : 0
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("tooltipService")], p.prototype, "tooltipService", void 0), n.__decorate([r.autowired("$filter")], p.prototype, "$filter", void 0), t.ChangeableInputBinder = p;
    var h = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.visible(this.face, !1), this.translate(".id-title", "HANDLINGTUNING_MAIN_TITLE"), this.translate(".id-description", "HANDLINGTUNING_MAIN_TITLE_DESC"), this.translate(".id-restrictGuidanceContainer .id-description", "HANDLINGTUNING_MAIN_TITLE_LOCK_DESC"), this.confirmButton = this.convertFace(".id-confirmButton"), this.cancelButton = this.convertFace(".id-cancelButton"), this.translate(this.confirmButton, "HANDLINGTUNING_MAIN_CONFIRM"), this.translate(this.cancelButton, "HANDLINGTUNING_MAIN_CANCEL"), this.confirmButton.on(a.MouseEventEx.CLICK, this.onConfirm.bind(this)), this.cancelButton.on(a.MouseEventEx.CLICK, this.onCancel.bind(this)), this.hasSize(".id-steeringStyleRangeInputContainer .id-titleContainer", !0), this.hasSize(".id-steeringStyleRangeInputContainer .id-titleContainer .id-textField", !1), this.hasSize(".id-steeringStyleRangeInputContainer .id-titleContainer .id-tooltipButton", !0), this.categoryList = this.addChildBinder(".id-itemListContainer .id-itemList", l.ScrollListBinder, {
                itemBinderClass: p,
                sortTabBinder: null,
                itemCountPerPage: 4
            }), this.applySteeringStyle(), this.presetList = this.steeringService.getPresetList(), this.presetButton = this.convertFace(".id-filterDropDownButton"), this.translate(".id-filterDropDownButton .id-buttonName", "HANDLINGTUNING_MAIN_PRESET_NAME_5");
            var t = _.map(this.presetList, function(t) {
                var i = t.code;
                return e.$filter("translate")("HANDLINGTUNING_MAIN_PRESET_NAME_" + i)
            });
            (i = this.presetButton.items).push.apply(i, t), this.presetButton.on(c.EventEx.CHANGE, function() {
                var t = e.presetButton.selectedIndex;
                t !== e.selectedPreset && (e.bindSteeringValueByPreset(t), e.selectedPreset = t)
            }), this.customIndex = _.findIndex(this.presetList, function(e) {
                return "custom" === e.presettype
            }), this.defaultIndex = _.findIndex(this.presetList, function(e) {
                return "default" === e.presettype
            }), this.masterRange.on(c.EventEx.CHANGE, function() {
                e.masterLocked || e.bindSteeringValueByMaster()
            });
            var i
        }, t.prototype.mapStateToProps = function(e) {
            return e.steering
        }, t.prototype.enableButtons = function(e) {
            this.confirmButton.enabled = e, this.cancelButton.enabled = e
        }, t.prototype.update = function(e) {
            var t = this;
            if (!e.steeringPopup) return void(this.face.visible && (this.gotoAndPlay(this.face, "out", !0), this.face.once("stop", function() {
                t.setIndex(t.customIndex), t.visible(t.face, !1)
            })));
            this.applyDetailedStyle(), this.visible(this.face, !0), this.enableButtons(!0), this.gotoAndPlay(this.face, "in", !1), this.face.once("stop", function() {
                t.categoryList.scrollToTop()
            }), this.userSettings = this.steeringService.getUserSteeringValue(e.vehicleId);
            var i = !!this.userSettings,
                n = i ? this.customIndex : this.defaultIndex;
            this.setIndex(n), this.bindSteeringValueByPreset(n)
        }, t.prototype.onConfirm = function() {
            var e = this,
                t = _.map(this.categoryItems, function(t) {
                    return n.__assign({}, t, {
                        current: e.categoryItems[t.category].current
                    })
                });
            this.enableButtons(!1), this.steeringService.updateSteering(t, this.reduxProps.vehicleId).then(function() {
                e.dispatch(o.hideSteeringPopup()), e.steeringService.applySteeringCategoryItems(t)
            }).catch(function(t) {
                e.dispatch(o.hideSteeringPopup()), e.popupService.draw("ConfirmPopup", {
                    title: "STEERING_SERVER_RESPONSE_ERROR",
                    description: "STEERING_SERVER_RESPONSE_ERROR_DESC"
                })
            })
        }, t.prototype.onCancel = function() {
            var e = this;
            this.enableButtons(!1);
            var t = function() {
                e.popupService.draw("ConfirmCancelPopup", {
                    title: "HANDLINGTUNING_POPUP_EXIT_TITLE",
                    description: "HANDLINGTUNING_POPUP_EXIT_DESC",
                    confirmString: "HANDLINGTUNING_POPUP_EXIT_CONFIRM",
                    cancelString: "HANDLINGTUNING_POPUP_EXIT_CANCEL",
                    confirm: function() {
                        e.dispatch(o.hideSteeringPopup())
                    },
                    cancel: function() {
                        e.enableButtons(!0)
                    }
                })
            };
            if (this.userSettings) {
                _.some(this.categoryItems, function(t) {
                    var i = e.userSettings[t.category];
                    return _.isUndefined(i) || t.current !== i.current
                }) ? t() : this.dispatch(o.hideSteeringPopup())
            } else this.presetButton.selectedIndex === this.defaultIndex ? this.dispatch(o.hideSteeringPopup()) : t()
        }, t.prototype.onChange = function(e) {
            this.categoryItems[e.category].current = e.value;
            var t = this.presetButton.selectedIndex;
            if (this.updateMaster(), t !== this.customIndex) {
                this.steeringService.getSteeringCategoryItems(t)[e.category].current !== e.value && this.setIndex(this.customIndex)
            }
        }, t.prototype.setIndex = function(e) {
            this.presetButton.selectedIndex = e, this.selectedPreset = e
        }, t.prototype.applySteeringStyle = function() {
            var e = this,
                t = this.getFace(".id-steeringStyleRangeInputContainer .id-tooltipButton");
            t.on(a.MouseEventEx.MOUSE_OVER, function(t) {
                var i = e.$filter("translate")("HANDLINGTUNING_MAIN_HANDLINGSTYLE_DESC");
                e.tooltipService.show(event, "topright", s.TooltipType.Basic, i)
            }), t.on(a.MouseEventEx.MOUSE_OUT, function() {
                return e.tooltipService.hide()
            }), this.masterRange = this.convertFace(".id-steeringStyleRangeInputContainer .id-RangeInput"), this.masterRange.on(c.EventEx.ACTIVATE, function(t) {
                e.masterLocked && (t.preventDefault(), e.popupService.draw("ConfirmCancelPopup", {
                    title: "HANDLINGTUNING_POPUP_RESET_TITLE",
                    description: e.$filter("translate")("HANDLINGTUNING_POPUP_RESET_DESC"),
                    confirmString: "HANDLINGTUNING_POPUP_RESET_CONFIRM",
                    cancelString: "HANDLINGTUNING_POPUP_RESET_CANCEL",
                    confirm: function() {
                        e.masterLocked = !1
                    }
                }))
            }), this.translate(".id-steeringStyleRangeInputContainer .LowTitle", "HANDLINGTUNING_MAIN_HANDLINGSTYLE_LEFT_TITLE"), this.translate(".id-steeringStyleRangeInputContainer .id-highTitle", "HANDLINGTUNING_MAIN_HANDLINGSTYLE_RIGHT_TITLE"), this.translate(".id-steeringStyleRangeInputContainer .id-titleContainer", "HANDLINGTUNING_MAIN_HANDLINGSTYLE_TITLE")
        }, t.prototype.applyDetailedStyle = function() {
            var e = d.store.getState().player,
                t = this.steeringService.getLevelForUnlockDetail();
            this.visible(".id-restrictGuidanceContainer", e.level < t), this.template(".id-restrictGuidanceContainer .id-title", "HANDLINGTUNING_MAIN_TITLE_LOCK_TITLE", {
                unlocklevel: t
            })
        }, t.prototype.bindSteeringValueByPreset = function(e) {
            this.masterLocked = !0, this.categoryItems = e === this.customIndex ? _.cloneDeep(this.userSettings) : this.steeringService.getSteeringCategoryItems(e), this.updateMaster();
            var t = this.onChange.bind(this),
                i = this.categoryItems.map(function(e) {
                    return n.__assign({}, e, {
                        listener: t
                    })
                });
            this.categoryList.setProps({
                items: i
            })
        }, t.prototype.bindSteeringValueByMaster = function() {
            this.setIndex(this.customIndex);
            var e = this.masterRange.value;
            this.categoryItems = this.steeringService.getSteeringCategoryItemsByMaster(e);
            var t = this.categoryItems.map(function(e) {
                return n.__assign({}, e, {
                    ignoreListener: !0
                })
            });
            this.categoryList.setProps({
                items: t
            }), this.bindText(".id-steeringStyleRangeInputContainer .id-currentNum", e)
        }, t.prototype.updateMaster = function() {
            var e = this.steeringService.getMasterSteering(this.categoryItems);
            this.masterRange.min = e.min, this.masterRange.max = e.max, this.masterRange.value = e.current, this.bindText(".id-steeringStyleRangeInputContainer .LowNum", e.min), this.bindText(".id-steeringStyleRangeInputContainer .id-highNum", e.max), this.bindText(".id-steeringStyleRangeInputContainer .id-currentNum", e.current), this.translate(".id-steeringStyleRangeInputContainer .id-titleContainer", "HANDLINGTUNING_MAIN_HANDLINGSTYLE_TITLE")
        }, t.prototype.onDetach = function() {
            this.dispatch(o.hideSteeringPopup())
        }, t
    }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], h.prototype, "tooltipService", void 0), n.__decorate([r.autowired("steeringService")], h.prototype, "steeringService", void 0), n.__decorate([r.autowired("popupService")], h.prototype, "popupService", void 0), t.SteeringTuningPopup = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(227),
        a = i(2),
        s = i(8),
        c = i(3),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.getFace(".id-closeButton").on(a.MouseEventEx.CLICK, function() {
                    return e.onClose()
                }), this.webview = this.convertFace(".id-popup")
            }, t.prototype.onAddedToScene = function() {
                this.showChargePopup = c.store.getState().shop.showChargePopup
            }, t.prototype.mapStateToProps = function(e) {
                return e.shop
            }, t.prototype.onClose = function() {
                this.webview.removeAllListeners(s.EventEx.LOAD), this.dispatch(o.showChargePopup(!1))
            }, t.prototype.update = function(e) {
                var t = this;
                this.showChargePopup !== e.showChargePopup && (this.showChargePopup = e.showChargePopup, this.showChargePopup ? (this.face.once("stop", function() {
                    $(t.webview.htmlElement).attr("scrolling", "no"), t.publisherService.getChargeUrl().then(function(e) {
                        return t.webview.src = e
                    }), t.webview.once(s.EventEx.LOAD, function() {
                        return t.gotoAndPlay(t.face, "intro")
                    })
                }), this.gotoAndPlay(this.face, "preloader")) : (this.face.once("stop", function() {
                    t.webview.src = "about:blank"
                }), this.gotoAndPlay(this.face, "out"), this.shopService.fetchCash()))
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("shopService")], d.prototype, "shopService", void 0), n.__decorate([r.autowired("publisherService")], d.prototype, "publisherService", void 0), t.WebCashChargeBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(37),
        r = i(44),
        o = i(598),
        a = i(3),
        s = i(302),
        c = i(297),
        d = i(501),
        l = i(537),
        u = i(385);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.messenger-test", {
            url: "/messenger-test",
            views: {
                "edge-ui-messenger@": {
                    template: o.tmpl,
                    controller: "MessengerController"
                }
            },
            resolve: {
                _playerService: ["playerService", "contactService", function(e, t) {
                    return e.fetch().then(function() {
                        return t.fetch()
                    })
                }]
            }
        })
    }]).controller("MessengerController", ["$rootScope", "$scope", "$window", "$filter", "$timeout", "$element", "playerSnippetService", "contactsService", "ranked2Service", "audioService", "popupService", "marketService", "stateService", "notifierService", "externalService", "inputService", "graphicConfigService", "openworldService", function(e, t, i, o, p, h, f, v, m, g, y, S, E, T, C, b, P, I) {
        var M = function(e) {
                e.perfectScrollbar("update")
            },
            A = function(e) {
                p(e, 0), p(e, 200), p(e, 1e3)
            },
            N = function() {
                A(function() {
                    return M(h.find(".tab-content"))
                })
            },
            R = function() {
                A(function() {
                    h.find(".list-container").height(h.find(".invite-panel").outerHeight() - (h.find(".invite-panel .form").outerHeight() + h.find(".invite-panel .error").outerHeight() + 1)), M(h.find(".list-container"))
                })
            },
            L = function() {
                N(), R()
            };
        t.notiClass = "", t.receviedPlayerName = "", e.toggleMessenger = function(e) {
            void 0 === e && (e = d.Tab.Friend), t.messengerVisible() ? (_.forEach(v.friends, function(e) {
                e.newly && (e.newly = !1)
            }), _.forEach(v.recvInvites, function(e) {
                e.newly && (e.newly = !1)
            }), a.store.dispatch(c.replaceInvites(v.sentInvites, v.recvInvites))) : (t.friendRequest.name = "", t.friendRequest.error = "", v.fetch().then(function() {
                t.friends = v.friends
            }), L()), a.store.dispatch(s.toggle())
        }, t.showNewFriendIcon = function(e) {
            return e.newly ? "new" : ""
        }, t.showNewRequestIcon = function(e) {
            return e.newly ? "new" : ""
        }, t.onCloseClick = function() {
            e.toggleMessenger()
        }, t.messengerVisible = function() {
            return a.store.getState().messenger.selected
        }, t.getFriends = function() {
            return v.friends
        }, t.getSentInvites = function() {
            return v.sentInvites
        }, t.getRecvInvites = function() {
            return v.recvInvites
        }, t.friendRequest = {
            name: "",
            error: ""
        }, t.onSendRequestClick = function() {
            v.inviteFriend(t.friendRequest.name).then(function() {
                t.friendRequest.name = "", t.friendRequest.error = ""
            }).catch(function(e) {
                var i = angular.element(document.querySelector("#messenger div.invite-panel .error"));
                i.removeClass("message-alarm"), setTimeout(function() {
                    return i.addClass("message-alarm")
                }, 34), r.isAddFriendPopupError(e) ? (t.friendRequest.error = "", r.showAddFriendErrorPopup(e, o("translate"), y)) : (t.friendRequest.error = o("translate")(r.getAddFriendErrorDesc(e)), R())
            })
        }, t.isNewReq = function() {
            return v.recvInvites.some(function(e) {
                return e.newly
            })
        }, t.isNewFriend = function() {
            return v.friends.some(function(e) {
                return e.newly
            })
        }, t.onAcceptRequestClick = function(e) {
            v.acceptInvite(e.snippet.pid).catch(function(e) {
                r.showAddFriendErrorPopup(e, o("translate"), y)
            })
        }, t.onRejectRequestClick = function(e) {
            v.rejectInvite(e.snippet.pid)
        }, t.onDeleteRequestClick = function(e) {
            v.cancelInvite(e.snippet.pid)
        }, t.getFriendSortOrder = function(e) {
            var t = e.snippet.name[0],
                i = t.match(/[0-9]/) ? "0" : t.match(/[A-Z]/) ? "1" : t.match(/[a-z]/) ? "2" : "3";
            return ("logout" === e.presence.state ? "1" : "0") + (e.newly ? "0" : "1") + i + e.snippet.name
        }, t.getMedalTier = function(e) {
            return m.getMedalTier(e.snippet.pid)
        }, t.getMedalImage = function(e) {
            var t = m.getMedalTier(e.snippet.pid);
            return t ? "images/html/messenger/medal/" + t.code + ".png" : ""
        }, t.getThumbnailClass = function(e) {
            switch (e.presence.state) {
                case "idle":
                    return "img-thumbnail-idle";
                case "match.reward":
                case "busy":
                    return "img-thumbnail-busy";
                default:
                    return "img-thumbnail-logout"
            }
        }, t.friendsOpened = !0, t.toggleFriends = function() {
            t.friendsOpened = !t.friendsOpened, L()
        };
        var O = function() {
                $("#channel-backdrop").remove(), $(".player-items .channel").hide()
            },
            x = function(e) {
                y.drawConfirm("ALARM_SERVERLOST_TITLE", e)
            };
        t.changeChannel = function(e) {
            event.stopPropagation(), O(), I.findChannelId(e.snippet.pid).then(function(e) {
                return e === I.getId() ? x("MESSENGER_FOLLOW_ERROR_SAMECHANNEL") : I.changeChannel(e).catch(function(e) {
                    var t = "MESSENGER_FOLLOW_ERROR_COMMON";
                    e.code === u.toCode(u.ErrorCode.CannotReserveChannelId) && (t = "MESSENGER_FOLLOW_ERROR_FULL"), x(t)
                })
            }).catch(function(e) {
                return x("MESSENGER_FOLLOW_ERROR_NOTCONNECT")
            })
        }, t.isIdle = function(e) {
            return "idle" === e.presence.state
        }, t.showChannel = function(e, i) {
            if (t.isIdle(i)) {
                var n = e.currentTarget;
                $("#channel-backdrop").length ? O() : ($(n).find(".player-content .channel").show(), $("<div>").attr("id", "channel-backdrop").css({
                    position: "absolute",
                    width: "320px",
                    height: "653px",
                    left: 0,
                    top: 0
                }).click(function() {
                    O()
                }).insertBefore(n))
            }
        }, t.onUnfriend = function(e) {
            event.stopPropagation(), y.draw("ConfirmCancelPopup", {
                title: {
                    text: "MESSENGER_FRIEND_DELETION_TITLE"
                },
                description: o("template")({
                    playerlevel: e.snippet.level,
                    playername: e.snippet.name
                }, "MESSENGER_FRIEND_DELETION_DESC"),
                confirmString: "MESSENGER_ADDFRIEND_CONFIRM_YES",
                cancelString: "MESSENGER_ADDFRIEND_CONFIRM_NO",
                confirm: function() {
                    v.deleteFriend(e.snippet.pid)
                }
            })
        };
        var w = function(e) {
            t.invite = e, g.get(n.FxAudioCode.Alarm_Message).play()
        };
        v.on("invite.received", w);
        var B = function(i) {
            t.messengerVisible() || e.toggleMessenger(i)
        };
        T.on("messenger.open", B), t.$on("$destroy", function() {
            e.toggleMessenger = null, v.removeListener("invite.received", w), T.removeListener("messenger.open", B), h.find(".tab-content").perfectScrollbar("destroy"), h.find(".list-container").perfectScrollbar("destroy")
        }), t.translateLimit = function() {
            var e = P.translateX;
            return {
                top: 0,
                left: -e,
                right: l.screenDataWidth + e - 692,
                bottom: l.screenDataHeight - 742
            }
        }, t.isBounce = !0
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(3),
        a = i(1227),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.render = function() {
                this.renderWithProvider(r.createElement(a.default, {
                    injections: this.injections
                }), document.querySelector("#edge-ui-video-guide .id-menuContainer"))
            }, t
        }(o.ReactRenderer);
    s.$inject = ["$filter", "staticdataLoaderService", "publisherService"], t.default = s, o.service("videoGuideMenuRenderer", s)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(132),
        a = i(3),
        s = i(113),
        c = function(e) {
            function t(t) {
                var i = e.call(this, t) || this;
                i.state = {
                    lv1: t.guideData.tree[0].code,
                    lv2: void 0
                };
                var n = t.injections.publisherService;
                return i.localePrefix = "nexon" !== n.publisher ? "CN" : "KR", i
            }
            return n.__extends(t, e), t.prototype.onSelect = function(e, t, i) {
                this.state[t] !== e.code && a.store.dispatch(s.update(e.code))
            }, t.prototype.componentDidMount = function() {
                this.container = $(o.findDOMNode(this).parentNode), this.container.perfectScrollbar({
                    suppressScrollX: !0
                })
            }, t.prototype.componentWillUnmount = function() {
                this.container.perfectScrollbar("destroy")
            }, t.prototype.componentDidUpdate = function() {
                this.container.perfectScrollbar("update")
            }, t.prototype.componentWillReceiveProps = function(e) {
                this.setState({
                    lv1: e.lv1 || e.guideData.tree[0].code,
                    lv2: e.lv2
                })
            }, t.prototype.render = function() {
                var e = this,
                    t = this.props.injections.$filter;
                return r.createElement("ul", {
                    className: "video-guide-menu"
                }, this.props.guideData.tree.map(function(i) {
                    var n = i.code === e.state.lv1,
                        o = t("translate")("VIDEOGUIDE_" + e.localePrefix + "_" + i.code + "_NAME");
                    return r.createElement("li", {
                        className: "lv1 " + (n ? "selected" : ""),
                        key: i.code
                    }, r.createElement("div", {
                        className: "name",
                        onClick: e.onSelect.bind(e, i, "lv1")
                    }, o), r.createElement("ul", null, i.items.map(function(i) {
                        var n = i.code === e.state.lv2,
                            o = t("translate")("VIDEOGUIDE_" + e.localePrefix + "_" + i.code + "_NAME");
                        return r.createElement("li", {
                            className: "lv2 " + (n ? "selected" : ""),
                            key: i.code
                        }, r.createElement("div", {
                            className: "name",
                            onClick: e.onSelect.bind(e, i, "lv2")
                        }, o))
                    })))
                }))
            }, t
        }(r.Component);
    t.VideoGuideMenu = c;
    var d = function(e) {
        var t = e.videoGuide,
            i = {
                lv1: void 0,
                lv2: void 0
            },
            r = function(e) {
                var n = _.find(t.guideData.raw, function(t) {
                    return t.code === e
                });
                i["lv" + n.level] = n.code, n.parent && r(n.parent)
            };
        return t.selected && r(t.selected), n.__assign({
            guideData: t.guideData
        }, _.omit(i, "lv3"))
    };
    t.default = a.connect(d)(c)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(1229), i(1234), i(1236), i(1237), i(1239), i(1243), i(1247), i(1254), i(1255), angular.module("edge.app").controller("HUDCommonController", ["$scope", "hudService", function(e, t) {
        t.bind(e)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(76),
        o = i(139),
        a = i(95),
        s = i(119),
        c = i(11);
    i(607);
    var d = i(85),
        l = i(96),
        u = i(97),
        p = i(77),
        h = i(608),
        f = i(309),
        v = i(78),
        m = i(79),
        g = i(121),
        y = i(98),
        S = i(99),
        _ = i(71),
        E = i(100),
        T = i(101),
        C = i(102);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new c.StateDefinition("/game/hud/item", 35).container({
            controller: "HUDCommon",
            stages: {
                "hud-mini-map": {
                    stageBinder: v.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-critical-effect": u.HudCriticalEffectBinder,
                "hud-dashboard": _.HudDashboardBinder,
                "hud-time-rank": o.HudTimeRankBinder,
                "hud-ranking": g.HudRankingBinder,
                "hud-message-bar": y.HudMessageBarBinder,
                "hud-gamemode-guide": d.HudGameModeGuideBinder,
                "hud-start-counting": m.HudStartCountingBinder,
                "hud-finish-effect": S.HudFinishEffectBinder,
                "hud-room-mirror": {
                    stageBinder: C.HudRoomMirrorBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-start-effect": p.HudStartEffectBinder,
                "hud-item-slot": h.HudItemSlotBinder,
                "hud-item-indicator": {
                    stageBinder: f.HudItemIndicatorBinder,
                    customComponents: {
                        PieMask: r.default
                    }
                },
                "hud-action-feedback": E.HudActionFeedbackBinder,
                "hud-drift-booster-indicator": T.HudDriftBoosterIndicatorBinder,
                "hud-wrong-way-signal": s.HudWrongWaySignalBinder,
                "hud-game-play-chat": l.GamePlayChatBinder,
                "hud-esc-menu": a.HudEscMenuBinder
            }
        });
        e.state("root.hudItem", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = i(144),
        c = i(39),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.mapStateToProps = function(e) {
                return e.match
            }, t.prototype.update = function(e) {
                var t = this;
                e.match.players.forEach(function(e) {
                    "left" !== e.state && "disconnected" !== e.state || t.markerMap && t.markerMap[e.id] && t.markerMap[e.id].gotoAndStop("disconnect")
                })
            }, t.prototype.onAddedToScene = function(e) {
                var t = this;
                this.container = this.getFace("CONTAINER").$("LEFTTOP").$("distanceMap"), this.focusId = this.hudService.isObserver ? e.match.players[0].id : this.storeState.player.id, this.markers = _.range(8).map(function(e) {
                    return t.container.$("marker" + e)
                }), this.markers.forEach(function(e) {
                    return e.visible = !1
                }), this.addManagedListener(this.externalService, a.default.beHUDSetDistanceRatio, function(e) {
                    Array.isArray(e) && (t.markerMap || t.buildMarkerMap(e), e.forEach(function(e) {
                        var i = t.markerMap[e.id];
                        i && (i.x = s.NumberUtil.fix(309 * e.ratio))
                    }))
                }), this.addManagedListener(this.externalService, a.default.beHUDObserverSelectPlayer, function(e) {
                    var i = t.markerMap && t.markerMap[e];
                    i && t.focusMarker(i, e)
                })
            }, t.prototype.focusMarker = function(e, t) {
                e.gotoAndStop("player");
                var i = e.parent;
                i.removeChild(e), i.addChild(e);
                var n = this.focusId,
                    r = this.markerMap[n];
                if (this.focusId = t, n !== t && r) {
                    var o = this.getPlayer(n);
                    o && "left" !== o.state && "disconnected" !== o.state ? o.team === c.Team.Individual ? r.gotoAndStop("other") : r.gotoAndStop(c.getTeamString(o.team)) : r.gotoAndStop("disconnect")
                }
            }, t.prototype.getPlayer = function(e) {
                if (this.reduxProps && this.reduxProps.match) return _.find(this.reduxProps.match.players, {
                    id: e
                })
            }, t.prototype.buildMarkerMap = function(e) {
                var t = this;
                this.markerMap = {};
                var i;
                if (e.forEach(function(e, n) {
                        var r = t.markers[n];
                        if (r)
                            if (t.recordService.distanceList[e.id] = e.ratio, r.visible = !0, t.markerMap[e.id] = r, t.focusId === e.id) r.gotoAndStop("player"), i = r;
                            else {
                                var o = t.getPlayer(e.id);
                                o && "left" !== o.state && "disconnected" !== o.state ? o.team === c.Team.Individual ? r.gotoAndStop("other") : r.gotoAndStop(c.getTeamString(o.team)) : r.gotoAndStop("disconnect")
                            }
                    }), i) {
                    var n = i.parent;
                    n.removeChild(i), n.addChild(i)
                }
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("recordService")], d.prototype, "recordService", void 0), n.__decorate([r.autowired("hudService")], d.prototype, "hudService", void 0), t.HudDistanceMapBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(37),
        a = i(1),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".id-ITEMINDICATOR .id-HELI_INDICATOR"),
                    i = t.$(".id-HELI_TARGET");
                i.halt(), this.visible(i, !1), this.addManagedListener(this.externalService, r.default.beHUDInitHeliIndicator, function() {
                    i.scaleX = 1.18, i.scaleY = 1.18, i.visible = !0, i.reboot(), e.gotoAndPlay(i, "INIT"), t.perspective = 800, i.rotationX = 60, t.width = 1920, t.height = 1080, t.regX = 960, t.regY = 540, e.audioService.get(o.FxAudioCode.Lockon_AttackHeli).play()
                });
                var n = i.$(".GaugeCircleMask");
                this.addManagedListener(this.externalService, r.default.beHUDSetHeliIndicatorPosition, function(e, r, o) {
                    t.setCustomStyle({
                        webkitPerspectiveOrigin: e + "px " + r + "px"
                    }), i.killCustomTweens(), i.addCustomToTween(.1, {
                        flash: {
                            x: e,
                            y: r
                        }
                    }), n.ratio = o
                }), this.addManagedListener(this.externalService, r.default.beHUDFireHeliIndicator, function() {
                    e.gotoAndPlay(i, "FIRE"), e.once(i, "fireEnd", function() {
                        i.halt(), e.visible(i, !1)
                    })
                })
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("externalService")], s.prototype, "externalService", void 0), n.__decorate([a.autowired("audioService")], s.prototype, "audioService", void 0), t.HudHeliIndicatorBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(1),
        a = function() {
            function e(e, t) {
                this.container = e, this.target = t, this.target.halt(), this.target.visible = !1, this.haltOnEnd = this._haltOnEnd.bind(this)
            }
            return e.prototype.initialize = function() {
                this.container.setCustomStyle({
                    webkitPerspective: "300px"
                }), this.target.halt(), this.target.visible = !1, this.target.removeListener("fireEnd", this.haltOnEnd), this.target.removeListener("cancelEnd", this.haltOnEnd)
            }, e.prototype.toggleTarget = function(e) {
                !this.target.visible && e && (this.target.reboot(), this.target.gotoAndPlay("INIT")), this.target.visible = e, e || this.target.halt()
            }, e.prototype.updateTarget = function(e, t, i) {
                this.container.setCustomStyle({
                    webkitPerspectiveOrigin: e + "px " + t + "px"
                }), this.target.killCustomTweens(), this.target.addCustomToTween(.1, {
                    flash: {
                        x: e,
                        y: t
                    }
                }), this.target.$(".GaugeCircleMask").ratio = i
            }, e.prototype.fire = function() {
                this.target.once("fireEnd", this.haltOnEnd), this.target.gotoAndPlay("FIRE")
            }, e.prototype.cancel = function() {
                this.target.once("cancelEnd", this.haltOnEnd), this.target.gotoAndPlay("CANCEL")
            }, e.prototype._haltOnEnd = function() {
                this.target.halt(), this.target.visible = !1
            }, e
        }(),
        s = function(e) {
            function t(t, i) {
                var n = e.call(this, t, i) || this;
                return n.area = n.container.$("EMP_AREA"), n.area.visible = !1, n
            }
            return n.__extends(t, e), t.prototype.initialize = function() {
                e.prototype.initialize.call(this), this.area.visible = !0, this.area.gotoAndPlay("INIT")
            }, t.prototype.updateArea = function(e, t) {
                this.area.addCustomToTween(.1, {
                    flash: {
                        x: e,
                        y: t
                    }
                })
            }, t.prototype.fire = function() {
                e.prototype.fire.call(this), this.area.gotoAndPlay("FIRE")
            }, t.prototype.cancel = function() {
                e.prototype.cancel.call(this), this.area.gotoAndPlay("CANCEL")
            }, t.prototype._haltOnEnd = function() {
                e.prototype._haltOnEnd.call(this), this.area.visible = !1
            }, t
        }(a),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this.getFace(".id-ITEMINDICATOR .id-EMP_INDICATOR"),
                    t = new s(e, e.$(".id-EMP_TARGET")),
                    i = new a(e, e.$(".id-EMP_TARGET_SELF"));
                this.addManagedListener(this.externalService, r.default.beHUDInitEMPIndicator, function() {
                    t.initialize()
                }), this.addManagedListener(this.externalService, r.default.beHUDSetEMPIndicatorAreaPosition, function(e, i) {
                    t.updateArea(e, i)
                }), this.addManagedListener(this.externalService, r.default.beHUDToggleEMPIndicatorTarget, function(e) {
                    t.toggleTarget(e)
                }), this.addManagedListener(this.externalService, r.default.beHUDSetEMPIndicatorTargetPosition, function(e, i, n) {
                    t.updateTarget(e, i, n)
                }), this.addManagedListener(this.externalService, r.default.beHUDCancelEMPIndicator, function() {
                    t.cancel()
                }), this.addManagedListener(this.externalService, r.default.beHUDFireEMPIndicator, function() {
                    t.fire()
                }), this.addManagedListener(this.externalService, r.default.beHUDInitTargetedEMPIndicator, function() {
                    i.initialize()
                }), this.addManagedListener(this.externalService, r.default.beHUDToggleTargetedEMPIndicatorTarget, function(e) {
                    i.toggleTarget(e)
                }), this.addManagedListener(this.externalService, r.default.beHUDSetTargetedEMPIndicatorPosition, function(e, t, n) {
                    i.updateTarget(e, t, n)
                }), this.addManagedListener(this.externalService, r.default.beHUDCancelTargetedEMPIndicator, function() {
                    i.cancel()
                }), this.addManagedListener(this.externalService, r.default.beHUDFireTargetedEMPIndicator, function() {
                    i.fire()
                })
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("externalService")], c.prototype, "externalService", void 0), t.HudEmpIndicatorBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(37),
        a = i(1),
        s = i(7),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".id-ITEMINDICATOR .id-IONCANNON_INDICATOR"),
                    i = t.$(".id-IONCANNON_TARGET"),
                    n = t.$(".id-IONCANNON_COUNT");
                i.halt(), this.visible(i, !1), this.visible(n, !1), this.addManagedListener(this.externalService, r.default.beHUDInitIonCannonIndicator, function() {
                    s.info("CoreEvent: beHUDInitIonCannonIndicator"), i.scaleX = 1.18, i.scaleY = 1.18, i.visible = !0, i.reboot(), e.gotoAndPlay(i, "INIT"), t.perspective = 800, i.rotationX = 60, t.width = 1920, t.height = 1080, t.regX = 960, t.regY = 540, n.visible = !0, e.gotoAndPlay(n, 2), e.audioService.get(o.FxAudioCode.Lockon_IonCannon).play()
                }), this.addManagedListener(this.externalService, r.default.beHUDSetIonCannonIndicatorPosition, function(e, r, o) {
                    t.setCustomStyle({
                        webkitPerspectiveOrigin: e + "px " + r + "px"
                    }), i.killCustomTweens(), i.addCustomToTween(.1, {
                        flash: {
                            x: e,
                            y: r
                        }
                    }), n.killCustomTweens(), n.addCustomToTween(.1, {
                        flash: {
                            x: e,
                            y: r
                        }
                    })
                }), this.addManagedListener(this.externalService, r.default.beHUDFireIonCannonIndicator, function() {
                    s.info("CoreEvent: beHUDFireIonCannonIndicator"), e.gotoAndPlay(i, "FIRE"), e.once(i, "fireEnd", function() {
                        s.info("FaceEvent: fireEnd"), i.halt(), e.visible(i, !1), e.visible(n, !1)
                    })
                })
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([a.autowired("audioService")], c.prototype, "audioService", void 0), t.HudIonCannonIndicatorBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(76),
        o = i(139),
        a = i(122),
        s = i(95),
        c = i(119),
        d = i(11),
        l = i(85),
        u = i(96),
        p = i(97),
        h = i(77),
        f = i(78),
        v = i(79),
        m = i(123),
        g = i(121),
        y = i(98),
        S = i(99),
        _ = i(71),
        E = i(100),
        T = i(101),
        C = i(102);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new d.StateDefinition("/game/hud/speed", 36).container({
            controller: "HUDCommon",
            stages: {
                "hud-mini-map": {
                    stageBinder: f.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-critical-effect": p.HudCriticalEffectBinder,
                "hud-dashboard": _.HudDashboardBinder,
                "hud-time-rank": o.HudTimeRankBinder,
                "hud-ranking": g.HudRankingBinder,
                "hud-message-bar": y.HudMessageBarBinder,
                "hud-gamemode-guide": l.HudGameModeGuideBinder,
                "hud-start-counting": v.HudStartCountingBinder,
                "hud-finish-effect": S.HudFinishEffectBinder,
                "hud-room-mirror": {
                    stageBinder: C.HudRoomMirrorBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-start-effect": h.HudStartEffectBinder,
                "hud-speed-turbo-slot": {
                    stageBinder: a.HudSpeedTurboSlotBinder,
                    customComponents: {
                        PieMask: r.default
                    }
                },
                "hud-speed-turbo-gauge": m.HudSpeedTurboGaugeBinder,
                "hud-action-feedback": E.HudActionFeedbackBinder,
                "hud-drift-booster-indicator": T.HudDriftBoosterIndicatorBinder,
                "hud-wrong-way-signal": c.HudWrongWaySignalBinder,
                "hud-game-play-chat": u.GamePlayChatBinder,
                "hud-esc-menu": s.HudEscMenuBinder
            }
        });
        e.state("root.hudSpeed", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(t) {
                e.prototype.onFaceReady.call(this, t), this.isManagerMode = t.isManagerMode, this.isAutoUseItemOn = t.isAutoUseItemOn, this.visible(this.face, this.isManagerMode)
            }, t.prototype.onAddedToScene = function() {
                this.isManagerMode && (this.isAutoUseItemOn ? this.turnOnAutoItemUse() : this.turnOffAutoItemUse())
            }, t.prototype.update = function(e) {
                this.isAutoUseItemOn = e.isAutoUseItemOn, this.isAutoUseItemOn ? this.turnOnAutoItemUse() : this.turnOffAutoItemUse()
            }, t.prototype.turnOnAutoItemUse = function() {
                this.gotoAndPlay(this.face, "in"), this.translate(".id-textFieldContainer", "QUICKMATCH_SPEEDINDIVIDUALAI_ITEMAUTO_OFF")
            }, t.prototype.turnOffAutoItemUse = function() {
                this.gotoAndPlay(this.face, "out"), this.translate(".id-textFieldContainer", "QUICKMATCH_SPEEDINDIVIDUALAI_ITEMAUTO_ON")
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), t.HudAutoItemUseContainerBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(76),
        o = i(139),
        a = i(122),
        s = i(609),
        c = i(610),
        d = i(611),
        l = i(95),
        u = i(119),
        p = i(11),
        h = i(85),
        f = i(96),
        v = i(97),
        m = i(77),
        g = i(78),
        y = i(79),
        S = i(123),
        _ = i(121),
        E = i(98),
        T = i(99),
        C = i(71),
        b = i(100),
        P = i(101),
        I = i(102);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new p.StateDefinition("/game/hud/speedTeam", 37).container({
            controller: "HUDCommon",
            stages: {
                "hud-mini-map": {
                    stageBinder: g.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-critical-effect": v.HudCriticalEffectBinder,
                "hud-dashboard": C.HudDashboardBinder,
                "hud-time-rank": o.HudTimeRankBinder,
                "hud-ranking": _.HudRankingBinder,
                "hud-message-bar": E.HudMessageBarBinder,
                "hud-gamemode-guide": h.HudGameModeGuideBinder,
                "hud-start-counting": y.HudStartCountingBinder,
                "hud-finish-effect": T.HudFinishEffectBinder,
                "hud-room-mirror": {
                    stageBinder: I.HudRoomMirrorBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-start-effect": m.HudStartEffectBinder,
                "hud-speed-turbo-slot": {
                    stageBinder: a.HudSpeedTurboSlotBinder,
                    customComponents: {
                        PieMask: r.default
                    }
                },
                "hud-speed-turbo-gauge": S.HudSpeedTurboGaugeBinder,
                "hud-drift-booster-indicator": P.HudDriftBoosterIndicatorBinder,
                "hud-team-fever-effect": s.HudTeamFeverEffectBinder,
                "hud-team-fever-gauge": c.HudTeamFeverGaugeBinder,
                "hud-team-score": d.HudTeamScoreBinder,
                "hud-action-feedback": b.HudActionFeedbackBinder,
                "hud-wrong-way-signal": u.HudWrongWaySignalBinder,
                "hud-game-play-chat": f.GamePlayChatBinder,
                "hud-esc-menu": l.HudEscMenuBinder
            }
        });
        e.state("root.hudSpeedTeam", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(76),
        o = i(139),
        a = i(122),
        s = i(95),
        c = i(119),
        d = i(11),
        l = i(85),
        u = i(96),
        p = i(97),
        h = i(77),
        f = i(78),
        v = i(79),
        m = i(123),
        g = i(121),
        y = i(98),
        S = i(99),
        _ = i(71),
        E = i(1238),
        T = i(100),
        C = i(101),
        b = i(102);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new d.StateDefinition("/game/hud/speed1On1", 70).container({
            controller: "HUDCommon",
            stages: {
                "hud-1on1-ranked-match-indicator": E.Hud1On1RankedMatchIndicatorBinder,
                "hud-mini-map": {
                    stageBinder: f.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-critical-effect": p.HudCriticalEffectBinder,
                "hud-dashboard": _.HudDashboardBinder,
                "hud-time-rank": o.HudTimeRankBinder,
                "hud-ranking": g.HudRankingBinder,
                "hud-message-bar": y.HudMessageBarBinder,
                "hud-gamemode-guide": l.HudGameModeGuideBinder,
                "hud-start-counting": v.HudStartCountingBinder,
                "hud-finish-effect": S.HudFinishEffectBinder,
                "hud-room-mirror": {
                    stageBinder: b.HudRoomMirrorBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-start-effect": h.HudStartEffectBinder,
                "hud-speed-turbo-slot": {
                    stageBinder: a.HudSpeedTurboSlotBinder,
                    customComponents: {
                        PieMask: r.default
                    }
                },
                "hud-speed-turbo-gauge": m.HudSpeedTurboGaugeBinder,
                "hud-action-feedback": T.HudActionFeedbackBinder,
                "hud-drift-booster-indicator": C.HudDriftBoosterIndicatorBinder,
                "hud-wrong-way-signal": c.HudWrongWaySignalBinder,
                "hud-game-play-chat": u.GamePlayChatBinder,
                "hud-esc-menu": s.HudEscMenuBinder
            }
        });
        e.state("root.hudSpeed1On1", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(9),
        a = i(46),
        s = i(3),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.checkerEnabeld = !1, t.retireAlertEnabled = !1, t.focusDistanceEnabled = !1, t.warningDistanceEnabled = !1, t.checkDistance = function(e) {
                    if (e) {
                        var i = _.orderBy(e, ["mileage", "ratio"], ["desc", "desc"]),
                            n = i[0],
                            r = i[1],
                            o = 100 * n.ratio;
                        !t.checkerEnabeld && o > 60 && t.enableChecker(), t.checkerEnabeld ? t.setAfterChecker(n, r) : t.setBeforeChecker(n, r)
                    }
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.distanceIndicator = this.getFace(".id-distanceIndicator"), this.beforeValue = this.getFace(".id-runningRateNum"), this.afterValue = this.getFace(".id-progressNum"), this.progressBarFill = this.getFace(".id-statusIndicatorProgressBar .id-filled"), this.retireAlert = this.getFace(".id-retireAlert"), this.progressBar = this.addChildBinder(".id-statusIndicatorProgressBar", a.ProgressBinder, {
                    duration: 1,
                    outDuration: .5
                }), this.retireVignetting = this.getFace(".id-retireVignetting"), this.distanceIndicator.setCustomStyle({
                    top: "-40px"
                });
                var e = this.getFace(".CONTAINER > .id-background");
                e && (e.alpha = 1), this.myPid = s.store.getState().player.id
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.hudService.supportRoomMirror ? "mirrorOn" : "mirrorOff";
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay(".CONTAINER", t)
                });
                var i = this.staticdataLoaderService.rankedMatchStaticData;
                this.finishRatio = _.find(i, {
                    type: "checkFinishDistGapRatio"
                }).value, this.endDistance = _.find(i, {
                    type: "distGapLimitToFinish"
                }).value;
                var n = this.$filter("template")({
                    distance: this.endDistance
                }, "1ON1_RACE_DISTANCE_M");
                this.addManagedListener(this.externalService, o.default.beHUDSetDistanceRatio, this.checkDistance), this.template(".id-runningRateDescription", "1ON1_RACE_FINISHRATE_GUIDE", {
                    finishrate: this.finishRatio + "%",
                    enddistance: n
                }), this.translate(".id-runningRateTitle", "1ON1_RACE_FINISHRATE"), this.translate(".id-retireAlert .id-textContainer .id-textField", "1ON1_RACE_FINISHRATE_WARNING"), this.template(".id-progressDescription", "1ON1_RACE_DISTANCE_GUIDE", {
                    enddistance: n
                }), this.translate(".id-progressTitle", "1ON1_RACE_DISTANCE"), this.translate(".id-activationName", "1ON1_RACE_DISTANCEBAR"), this.translate(".id-normalName", "1ON1_RACE_DISTANCEBAR"), this.templateAll(".id-endDistance", "1ON1_RACE_DISTANCE_M", {
                    distance: this.endDistance
                }), this.gotoAndPlay(this.distanceIndicator, "runningRate")
            }, t.prototype.enableChecker = function() {
                this.gotoAndPlay(this.retireVignetting, "out"), this.gotoAndPlay(this.distanceIndicator, "progress"), this.checkerEnabeld = !0, this.distanceIndicator.alpha = .5
            }, t.prototype.setBeforeChecker = function(e, t) {
                this.bindText(this.beforeValue, Math.floor(100 * e.ratio));
                var i = e.mileage - t.mileage;
                t.id === this.myPid && i > 0 && !this.retireAlertEnabled && i >= this.endDistance ? (this.gotoAndPlay(this.retireAlert, "in"), this.gotoAndPlay(this.retireVignetting, "in"), this.distanceIndicator.alpha = 1, this.retireAlertEnabled = !0) : this.retireAlertEnabled && i < this.endDistance && (this.gotoAndPlay(this.retireAlert, "out"), this.gotoAndPlay(this.retireVignetting, "out"), this.distanceIndicator.alpha = .5, this.retireAlertEnabled = !1)
            }, t.prototype.setAfterChecker = function(e, t) {
                var i = e.mileage - t.mileage,
                    n = i / this.endDistance * 100,
                    r = t.id === this.myPid && i > 0;
                this.progressBar.value = n, this.bindText(this.afterValue, i);
                var o = .5 * this.endDistance;
                this.distanceIndicator.alpha = i >= o ? 1 : .5;
                var a = .75 * this.endDistance;
                !this.warningDistanceEnabled && i >= a ? (this.gotoAndPlay(this.progressBarFill, "defaultToAlert"), r && this.gotoAndPlay(this.retireVignetting, "in"), this.warningDistanceEnabled = !0) : this.warningDistanceEnabled && i < a && (this.gotoAndPlay(this.progressBarFill, "alertToDefault"), this.gotoAndPlay(this.retireVignetting, "out"), this.warningDistanceEnabled = !1)
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], c.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("hudService")], c.prototype, "hudService", void 0), n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), t.Hud1On1RankedMatchIndicatorBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(76),
        o = i(1240),
        a = i(1241),
        s = i(122),
        c = i(95),
        d = i(119),
        l = i(11),
        u = i(612),
        p = i(85),
        h = i(1242),
        f = i(96),
        v = i(97),
        m = i(77),
        g = i(78),
        y = i(79),
        S = i(123),
        _ = i(98),
        E = i(99),
        T = i(71),
        C = i(100),
        b = i(101),
        P = i(102);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new l.StateDefinition("/game/hud/drift", 38).container({
            controller: "HUDCommon",
            stages: {
                "hud-mini-map": {
                    stageBinder: g.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-critical-effect": v.HudCriticalEffectBinder,
                "hud-dashboard": T.HudDashboardBinder,
                "hud-time-rank": o.HudDriftModeTimeRankBinder,
                "hud-driftmode-time": a.HudDriftModeRemainTimeBinder,
                "hud-message-bar": _.HudMessageBarBinder,
                "hud-gamemode-guide": p.HudGameModeGuideBinder,
                "hud-start-counting": y.HudStartCountingBinder,
                "hud-finish-effect": E.HudFinishEffectBinder,
                "hud-room-mirror": {
                    stageBinder: P.HudRoomMirrorBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-start-effect": m.HudStartEffectBinder,
                "hud-speed-turbo-slot": {
                    stageBinder: s.HudSpeedTurboSlotBinder,
                    customComponents: {
                        PieMask: r.default
                    }
                },
                "hud-speed-turbo-gauge": S.HudSpeedTurboGaugeBinder,
                "hud-action-feedback": C.HudActionFeedbackBinder,
                "hud-drift-booster-indicator": b.HudDriftBoosterIndicatorBinder,
                "hud-driftmode-info": u.HudDriftModeInfo,
                "hud-driftmode-change-ranking": h.HudDriftModeChangeRankingBinder,
                "hud-wrong-way-signal": d.HudWrongWaySignalBinder,
                "hud-game-play-chat": f.GamePlayChatBinder,
                "hud-esc-menu": c.HudEscMenuBinder
            }
        });
        e.state("root.hudDrift", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(605),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this;
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay("CONTAINER_DRIFT", "intro")
                }), this.addChildBinder("CONTAINER_DRIFT", o.HudLeaderboardBinder), this.visible("CONTAINER", !1), this.visible("CONTAINER_foxhunting", !1)
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("externalService")], a.prototype, "externalService", void 0), n.__decorate([r.autowired("hudService")], a.prototype, "hudService", void 0), t.HudDriftModeTimeRankBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(28),
        a = i(9),
        s = i(4),
        c = i(37),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this;
                this.apply(this.stage, o.classNames, "leftsideReviseCoordinateOfScreenRatio"), this.hudService.once("intro", function() {
                    return e.gotoAndPlay("CONTAINER", "intro")
                });
                var t = this.convertFace(".id-remainTime");
                t.stop();
                var i = this.getFace(".id-remainTime .id-textField"),
                    n = this.getFace(".id-remainTimeNum"),
                    r = _.once(function() {
                        e.gotoAndPlay(".id-LEFTTOP", "count"), e.gotoAndPlay(t, "count"), e.audioService.getAudio(c.FxAudioCode.EndCountdown).play()
                    }),
                    d = !1;
                this.addManagedListener(this.externalService, a.default.beHUDSetTimeElapsed, function(o) {
                    if (_.isNumber(o) && !d)
                        if (e.bindText(i, s.default.formatLapTime(o)), o <= 1e4) {
                            r();
                            var a = Math.floor(o / 1e3);
                            e.lastCountdownSecond !== a && (e.lastCountdownSecond = a, e.bindText(n, e.lastCountdownSecond), e.gotoAndPlay(t, "count"))
                        } else o <= 0 && (e.audioService.getAudio(c.FxAudioCode.EndCountdown).stop(), d = !0, e.face.visible = !1)
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("hudService")], d.prototype, "hudService", void 0), n.__decorate([r.autowired("audioService")], d.prototype, "audioService", void 0), t.HudDriftModeRemainTimeBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(17),
        o = i(9),
        a = i(1),
        s = i(612),
        c = i(310),
        d = i(3),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.isAnimating = !1, t.finalRank = -1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.container = this.getFace(".CONTAINER"), this.upRankLabelText = this.getFace(".id-rankingUp .id-playerInfo .id-rankLabel"), this.downRankLabelText = this.getFace(".id-rankingDown .id-playerInfo .id-rankLabel"), this.downRankNameText = this.getFace(".id-rankingDown .id-playerInfo .id-playerName"), this.getFace(".id-rankingUp .id-playerInfo").hasSize = !0, this.getFace(".id-rankingDown .id-playerInfo").hasSize = !0, this.upRankLabelText.hasSize = !1, this.getFace(".id-rankingUp .id-playerInfo .id-playerName").hasSize = !1, this.downRankLabelText.hasSize = !1, this.downRankNameText.hasSize = !1;
                var t = d.store.getState().player;
                this.playerId = t.id;
                var i = t.name;
                this.addManagedListener(this.externalService, o.default.beHUDSetLeaderboard, function(t, i, n) {
                    t < e.finalRank && e.changeRank(t, i), e.finalRank = t
                }), this.addManagedListener(this.externalService, o.default.beHudDPResetReason, function(t) {
                    t === s.DPResetReason.DPRESET_TIMEOUT && e.dispatch(c.setDriftRankChange(e.finalRank))
                }), this.bindText(".id-rankingUp .id-playerInfo .id-playerName", i), this.gotoAndStop(".id-rankingUp .id-playerInfo .id-arrow", "up"), this.gotoAndStop(".id-rankingDown .id-playerInfo .id-arrow", "down"), this.translate(".id-textEffect .id-notification .id-textField", "BEPLAY_CHANGERANK")
            }, t.prototype.changeRank = function(e, t) {
                if (!this.externalService.isEdgeBrowser()) return this.changeContext = {
                    newRank: e,
                    playerName: "도전자"
                }, void this.playAnimation();
                var i = t[e],
                    n = this.playerSnippetService.getSnippet(i),
                    r = n.name;
                this.changeContext = {
                    newRank: e,
                    playerName: r
                }, this.playAnimation()
            }, t.prototype.playAnimation = function() {
                var e = this;
                if (!this.isAnimating && void 0 !== this.changeContext) {
                    this.isAnimating = !0;
                    var t = this.changeContext;
                    this.changeContext = void 0, this.bindText(this.upRankLabelText, t.newRank), this.bindText(this.downRankLabelText, t.newRank + 1), this.bindText(this.downRankNameText, t.playerName), this.container.once("stop", function() {
                        e.isAnimating = !1, e.playAnimation()
                    }), this.gotoAndPlay(this.container, "startAnimation")
                }
            }, t
        }(r.StageBinder);
    n.__decorate([a.autowired("externalService")], l.prototype, "externalService", void 0), n.__decorate([a.autowired("playerSnippetService")], l.prototype, "playerSnippetService", void 0), t.HudDriftModeChangeRankingBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(76),
        o = i(122),
        a = i(95),
        s = i(119),
        c = i(11),
        d = i(85),
        l = i(1244),
        u = i(97),
        p = i(77),
        h = i(1245),
        f = i(79),
        v = i(123),
        m = i(98),
        g = i(99),
        y = i(71),
        S = i(1246),
        _ = i(96),
        E = i(100),
        T = i(101),
        C = i(102);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new c.StateDefinition("/game/hud/foxhunting", 47).container({
            controller: "HUDCommon",
            stages: {
                "hud-mini-map": {
                    stageBinder: h.HudFoxhuntingMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-critical-effect": u.HudCriticalEffectBinder,
                "hud-dashboard": y.HudDashboardBinder,
                "hud-time-rank": S.HudFoxhuntingLapIndicatorBinder,
                "hud-foxhunting-indicator": l.HudFoxhuntingIndicatorBinder,
                "hud-message-bar": m.HudMessageBarBinder,
                "hud-gamemode-guide": d.HudGameModeGuideBinder,
                "hud-start-counting": f.HudStartCountingBinder,
                "hud-finish-effect": g.HudFinishEffectBinder,
                "hud-room-mirror": {
                    stageBinder: C.HudRoomMirrorBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-start-effect": p.HudStartEffectBinder,
                "hud-speed-turbo-slot": {
                    stageBinder: o.HudSpeedTurboSlotBinder,
                    customComponents: {
                        PieMask: r.default
                    }
                },
                "hud-speed-turbo-gauge": v.HudSpeedTurboGaugeBinder,
                "hud-action-feedback": E.HudActionFeedbackBinder,
                "hud-drift-booster-indicator": T.HudDriftBoosterIndicatorBinder,
                "hud-wrong-way-signal": s.HudWrongWaySignalBinder,
                "hud-game-play-chat": _.GamePlayChatBinder,
                "hud-esc-menu": a.HudEscMenuBinder
            }
        });
        e.state("root.hudFoxHunting", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = i(115),
        c = i(3),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.container = this.convertFace(".id-indicatorContainer"), this.beforeMinLapWinningString = this.$filter("translate")("FOXHUNTING_BEFORE3LAPS_WINNING"), this.beforeMinLapWinningDesc = this.$filter("template")({
                    lap: s.GameModeService.FoxhuntingMinimumLap
                }, "FOXHUNTING_BEFORE3LAPS_WINNING_DESC"), this.beforeMinLapLosingString = this.$filter("translate")("FOXHUNTING_BEFORE3LAPS_LOSING"), this.beforeMinLapLosingDesc = this.$filter("template")({
                    lap: s.GameModeService.FoxhuntingMinimumLap
                }, "FOXHUNTING_BEFORE3LAPS_LOSING_DESC"), this.afterMinLapWinningDesc1 = this.$filter("translate")("FOXHUNTINGINDIVIDUAL_RACE_WINNING_CLOSING_1"), this.afterMinLapWinningDesc2 = this.$filter("translate")("FOXHUNTINGINDIVIDUAL_RACE_WINNING_CLOSING_2"), this.afterMinLapLosingDesc = this.$filter("translate")("FOXHUNTINGINDIVIDUAL_RACE_LOSING_CLOSING"), this.otherPlayerLeftString = this.$filter("translate")("FOXHUNTINGINDIVIDUAL_RACE_OPPOSITEPLAYERLEAVEING"), this.otherPlayerLeftDesc = this.$filter("translate")("FOXHUNTINGINDIVIDUAL_RACE_OPPOSITEPLAYERLEAVEING_DESC")
            }, t.prototype.mapStateToProps = function(e) {
                return e.match
            }, t.prototype.update = function(e) {
                var t = _.some(e.match.players, function(e) {
                    return e.id !== c.store.getState().player.id && ("disconnected" === e.state || "left" === e.state)
                });
                !this.isOtherPlayerLeft && t && (this.isOtherPlayerLeft = t, this.gotoAndPlay(".id-distanceIndicator", "winningAlone"), this.bindHtml(".id-infoText", this.otherPlayerLeftString), this.bindText(".id-tipText", this.otherPlayerLeftDesc))
            }, t.prototype.updateIndicator = function(e, t, i) {
                if (this.introPlayed || (this.gotoAndPlay(this.container, "intro"), this.introPlayed = !0), !this.isOtherPlayerLeft) {
                    var n = 1 === e;
                    if (this.minimumLapReached || 0 === t)
                        if (this.gotoAndPlay(".id-distanceIndicator", n ? "winning" : "losing", !0), n) {
                            var r = this.$filter("template")({
                                distance: i
                            }, "FOXHUNTING_DISTANCE_FORWARD");
                            this.bindHtml(".id-infoText", r), this.bindText(".id-tipText", i <= 30 ? this.afterMinLapWinningDesc1 : this.afterMinLapWinningDesc2)
                        } else {
                            var r = this.$filter("template")({
                                distance: i
                            }, "FOXHUNTING_DISTANCE_BACKWARD");
                            this.bindHtml(".id-infoText", r), this.bindText(".id-tipText", this.afterMinLapLosingDesc)
                        }
                    else this.gotoAndPlay(".id-distanceIndicator", n ? "winningPass" : "losingPass", !0), n ? (this.bindHtml(".id-infoText", this.beforeMinLapWinningString), this.bindText(".id-tipText", this.beforeMinLapWinningDesc)) : (this.bindHtml(".id-infoText", this.beforeMinLapLosingString), this.bindText(".id-tipText", this.beforeMinLapLosingDesc))
                }
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.hudService.supportRoomMirror ? "mirrorOn" : "mirrorOff";
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay(".CONTAINER", t)
                }), this.addManagedListener(this.externalService, a.default.beHUDSetCurrentLap, function(t, i) {
                    !e.minimumLapReached && t >= s.GameModeService.FoxhuntingMinimumLap + 1 && setTimeout(function() {
                        e.minimumLapReached = !0, e.gotoAndPlay(e.container, "enable")
                    }, 500)
                }), this.addManagedListener(this.externalService, a.default.beHUDSetFoxhuntingInfo, function(t, i, n) {
                    e.updateIndicator(t, i, n)
                }), this.addManagedListener(this.externalService, a.default.beHUDSetTeamBonusEffectEnabled, function(t) {
                    t && e.$window.beHUDShowMessage("FOXHUNTINGINDIVIDUAL_INFINITENITRO")
                })
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("$window")], d.prototype, "$window", void 0), n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("hudService")], d.prototype, "hudService", void 0), t.HudFoxhuntingIndicatorBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(1),
        a = i(17),
        s = i(3),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.mapStateToProps = function(e) {
                return e.match
            }, t.prototype.update = function(e) {
                var t = _.some(e.match.players, function(e) {
                    return e.id !== s.store.getState().player.id && ("disconnected" === e.state || "left" === e.state)
                });
                !this.isOtherPlayerLeft && t && (this.isOtherPlayerLeft = t, this.enemyArrow.visible = !1, this.trackOfFoxhunting.gotoAndPlay("winning"))
            }, t.prototype.onFaceReady = function() {
                this.trackOfFoxhunting = this.convertFace(".id-trackFoxhunting")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay(".CONTAINER_FOXHUNTING", "intro")
                }), this.getFace("CONTAINER").visible = !1, this.trackOfFoxhunting.gotoAndPlay("winning");
                var t = this.getFace(".id-playerArrow");
                this.enemyArrow = this.getFace(".id-enemyArrow"), this.isOtherPlayerLeft = !1, t.x = t.y = 0, t.rotation = 0, this.enemyArrow.x = this.enemyArrow.y = 0, this.enemyArrow.rotation = 0;
                var i = 1;
                this.addManagedListener(this.externalService, r.default.beHUDSetFoxhuntingInfo, function(t, n, r) {
                    e.isOtherPlayerLeft || (i < t ? e.trackOfFoxhunting.gotoAndPlay("losing") : i > t && e.trackOfFoxhunting.gotoAndPlay("winning"), i = t)
                }), this.addManagedListener(this.externalService, r.default.beHUDSetFoxhuntingMinimapCoord, function(i, n, r, o) {
                    i === s.store.getState().player.id ? (t.x = n, t.y = r, t.rotation = o) : (e.enemyArrow.x = n, e.enemyArrow.y = r, e.enemyArrow.rotation = o)
                })
            }, t
        }(a.StageBinder);
    n.__decorate([o.autowired("hudService")], c.prototype, "hudService", void 0), n.__decorate([o.autowired("externalService")], c.prototype, "externalService", void 0), t.HudFoxhuntingMiniMapBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(115),
        s = i(3),
        c = i(9),
        d = i(308),
        l = i(564),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.mapStateToProps = function(e) {
                return e.match
            }, t.prototype.update = function(e) {
                var t = _.some(e.match.players, function(e) {
                    return e.id !== s.store.getState().player.id && ("disconnected" === e.state || "left" === e.state)
                });
                !this.isOtherPlayerLeft && t && (this.isOtherPlayerLeft = t, this.updateInternal(1), this.enemyIndicator.gotoAndPlay("disconnect"))
            }, t.prototype.onFaceReady = function() {
                this._onChanging = !1, this._skippedRank = -1, this.playerIndicator = this.convertFace(".id-leaderboard .id-player"), this.enemyIndicator = this.convertFace(".id-leaderboard .id-enemy"), this.playerStartEffectIndicator = this.convertFace(".id-leaderboard .id-player .id-startEffect"), this.enemyStartEffectIndicator = this.convertFace(".id-leaderboard .id-enemy .id-startEffect"), this.playerStartBGEffectIndicator = this.convertFace(".id-leaderboard .id-player .id-bgEffect"), this.enemyStartBGEffectIndicator = this.convertFace(".id-leaderboard .id-enemy .id-bgEffect"), this.playerIndicator.gotoAndPlay("disable"), this.enemyIndicator.gotoAndPlay("disable"), this.bindTextAll(".startLabel", this.$filter("translate")("BEPLAY_MAIN_START") + "!"), this.translateAll(".id-unitText", "FOXHUNTINGINDIVIDUAL_RESULT_LAP"), this.apply(this.stage, l.classNames, "rightsideReviseCoordinateOfScreenRatio")
            }, t.prototype.updateInternal = function(e) {
                var t = this;
                if (this._onChanging) return void(this._skippedRank = e);
                this._onChanging = !0;
                var i = new TimelineMax({
                    paused: !0,
                    onComplete: function() {
                        t._onChanging = !1, t._skippedRank >= 0 && (t.updateInternal(t._skippedRank), t._skippedRank = -1)
                    }
                });
                if (i.timeScale(1 / 30), e !== this.priorRank) {
                    var n = e - 1;
                    i.kill(null, this.playerIndicator), i.to(this.playerIndicator, .4, {
                        flash: {
                            y: 103 * n
                        },
                        ease: Power2.easeInOut
                    }, 0), i.kill(null, this.enemyIndicator), i.to(this.enemyIndicator, .4, {
                        flash: {
                            y: 103 * (1 - n)
                        },
                        ease: Power2.easeInOut
                    }, 0), 2 === e ? (this.enemyStartBGEffectIndicator.alpha = 1, this.playerStartBGEffectIndicator.alpha = 0, this.enemyStartBGEffectIndicator.gotoAndPlay("startAnimation"), this.playerStartBGEffectIndicator.gotoAndStop(0)) : (this.playerStartBGEffectIndicator.alpha = 1, this.enemyStartBGEffectIndicator.alpha = 0, this.playerStartBGEffectIndicator.gotoAndPlay("startAnimation"), this.enemyStartBGEffectIndicator.gotoAndStop(0))
                }
                this.priorRank = e, i.resume()
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay("CONTAINER_foxhunting", "intro")
                }), this.addChildBinder(".CONTAINER_foxhunting .id-passNoticeContainer", d.HudLapPassNoticeBinder), this.visible("CONTAINER", !1), this.visible("CONTAINER_DRIFT", !1);
                var t = s.store.getState().match,
                    i = _.map(t.match.players, "id");
                this.isOtherPlayerLeft = !1, _.forEach(i, function(t) {
                    e.playerSnippetService.getSnippetAsync(t).then(function(i) {
                        t === s.store.getState().player.id ? e.bindText(".id-player .id-playerName", i.name) : e.bindText(".id-enemy .id-playerName", i.name)
                    })
                }), this.addManagedListener(this.externalService, c.default.beHUDSetTotalLaps, function(t) {
                    e.bindTextAll(".id-totalLap", t)
                });
                var n = !1,
                    r = !1;
                this.addManagedListener(this.externalService, c.default.beHUDSetCurrentLap, function(t, i) {
                    s.store.getState().player.id === i ? (e.bindText(".id-player .id-currentLap", t < 10 ? "0" + t : t), t >= a.GameModeService.FoxhuntingMinimumLap + 1 && !n && (n = !0, e.playerIndicator.gotoAndPlay("enable"), e.playerStartEffectIndicator.gotoAndPlay("startAnimation"))) : (e.bindText(".id-enemy .id-currentLap", t < 10 ? "0" + t : t), t >= a.GameModeService.FoxhuntingMinimumLap + 1 && !r && (r = !0, e.enemyIndicator.gotoAndPlay("enable"), e.enemyStartEffectIndicator.gotoAndPlay("startAnimation")))
                }), this.addManagedListener(this.externalService, c.default.beHUDSetFoxhuntingInfo, function(t, i, n) {
                    e.updateInternal(t)
                })
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([r.autowired("hudService")], u.prototype, "hudService", void 0), n.__decorate([r.autowired("playerSnippetService")], u.prototype, "playerSnippetService", void 0), t.HudFoxhuntingLapIndicatorBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(76),
        o = i(139),
        a = i(95),
        s = i(119),
        c = i(11);
    i(607);
    var d = i(85),
        l = i(96),
        u = i(97),
        p = i(77),
        h = i(309),
        f = i(78),
        v = i(79),
        m = i(121),
        g = i(98),
        y = i(99),
        S = i(71),
        _ = i(100),
        E = i(101),
        T = i(102),
        C = i(1248),
        b = i(1249),
        P = i(1250),
        I = i(1251),
        M = i(1252),
        A = i(1253);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new c.StateDefinition("/game/hud/pursuitIndividual", 73).container({
            controller: "HUDCommon",
            stages: {
                "hud-mini-map": {
                    stageBinder: f.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-critical-effect": u.HudCriticalEffectBinder,
                "hud-dashboard": S.HudDashboardBinder,
                "hud-time-rank": o.HudTimeRankBinder,
                "hud-pursuit-ai-status": P.HudPursuitAiStatusBinder,
                "hud-ranking": m.HudRankingBinder,
                "hud-message-bar": g.HudMessageBarBinder,
                "hud-gamemode-guide": d.HudGameModeGuideBinder,
                "hud-start-counting": v.HudStartCountingBinder,
                "hud-pursuit-start": C.HudPursuitStartBinder,
                "hud-pursuit-repair-info": M.HudPursuitRepairInfoBinder,
                "hud-finish-effect": y.HudFinishEffectBinder,
                "pursuit-arrested-effect": A.HudPursuitArrestBinder,
                "hud-pursuit-tech-slot": {
                    stageBinder: b.HudPursuitTechSlotBinder,
                    customComponents: {
                        PieMask: r.default
                    }
                },
                "hud-pursuit-arrest-gauge": I.HudPursuitArrestGaugeBinder,
                "hud-room-mirror": {
                    stageBinder: T.HudRoomMirrorBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-start-effect": p.HudStartEffectBinder,
                "hud-item-indicator": {
                    stageBinder: h.HudItemIndicatorBinder,
                    customComponents: {
                        PieMask: r.default
                    }
                },
                "hud-action-feedback": _.HudActionFeedbackBinder,
                "hud-drift-booster-indicator": E.HudDriftBoosterIndicatorBinder,
                "hud-wrong-way-signal": s.HudWrongWaySignalBinder,
                "hud-game-play-chat": l.GamePlayChatBinder,
                "hud-esc-menu": a.HudEscMenuBinder
            }
        });
        e.state("root.hudPursuit", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this.getFace(".id-noticeContainer .id-textField");
                this.translate(e, "BEPLAY_PURSUITMODE_TRESPASS_AI_TITLE1"), this.getFace(e).x = 0, this.getFace(".id-crewIcon").hasSize = !0, e.hasSize = !1, this.getFace(".id-warningEffectContainer").hasSize = !0
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".id-pursuitStartContainer");
                this.stage.stop(), t.stop(), this.addManagedListener(this.externalService, a.default.beHudPursuitShowNotice, function(i) {
                    1 === i && e.gotoAndPlay(t, "startAnimation")
                })
            }, t.prototype.onDetach = function() {}, t
        }(o.StageBinder);
    n.__decorate([r.autowired("hudService")], s.prototype, "hudService", void 0), n.__decorate([r.autowired("externalService")], s.prototype, "externalService", void 0), t.HudPursuitStartBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(16),
        a = i(9),
        s = i(135),
        c = i(120),
        d = {
            0: {
                instanceName: "electrostaticField",
                label: "PURSUITMODE_PURSUIT_13_NAME"
            },
            1: {
                instanceName: "emp",
                label: "PURSUITMODE_PURSUIT_2_NAME"
            },
            2: {
                instanceName: "shockRam",
                label: "PURSUITMODE_PURSUIT_5_NAME"
            },
            3: {
                instanceName: "spikestrip",
                label: "PURSUITMODE_PURSUIT_6_NAME"
            },
            6: {
                instanceName: "shockWave",
                label: "PURSUITMODE_PURSUIT_14_NAME"
            },
            8: {
                instanceName: "turbo",
                label: "PURSUITMODE_PURSUIT_8_NAME"
            },
            9: {
                instanceName: "powerTurbo",
                label: "PURSUITMODE_PURSUIT_10_NAME"
            },
            11: {
                instanceName: "shield",
                label: "PURSUITMODE_PURSUIT_12_NAME"
            },
            13: {
                instanceName: "rushTurbo",
                label: "PURSUITMODE_PURSUIT_9_NAME"
            },
            14: {
                instanceName: "infiniteNitro",
                label: "PURSUITMODE_PURSUIT_15_NAME"
            }
        },
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.coolTime = 0, t.amount = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = e.itemCode,
                    i = e.index;
                this.slot = this.getFace(".id-techSlot" + i), this.amountMC = this.slot.$("quantityLabel").$("textfield"), this.coolTimeMask = this.slot.$("coolTimeMask"), this.setItemIcon(this.slot.$("itemIcon"), t), this.setItemIcon(this.slot.$("coolTimeItemIcon"), t);
                var n = d[t];
                this.translate(this.slot.$("itemName").$("textfield"), n.label), this.slot.on("stop", this.onAnimationEnd.bind(this));
                var r = 1 === i ? "useItem" : "useItem2";
                this.actionGuideItem = this.addChildBinder(".id-actionGuide" + i, c.HudActionGuideBinder, {
                    inputKey: r
                })
            }, t.prototype.setItemIcon = function(e, t) {
                for (var i = e.numChildren, n = 0; n < i; n++) e.getChildAt(n).visible = !1;
                e.$(d[t].instanceName).visible = !0
            }, t.prototype.update = function(e) {
                this.updateInternal(e.coolTime, e.amount)
            }, t.prototype.updateInternal = function(e, t) {
                this.amount < t && (e = 0), this.setAmount(t), this.setCooltime(e)
            }, t.prototype.onAnimationEnd = function() {
                "useItem" !== this.slot.currentLabel && "repaired" !== this.slot.currentLabel || (this.actionGuideItem.hide(), this.amount > 0 ? this.slot.gotoAndPlay("coolTime") : this.slot.gotoAndPlay("disabled"))
            }, t.prototype.setCooltime = function(e) {
                var t = this;
                this.coolTimeMaskTween && (this.coolTimeMaskTween.kill(), this.coolTimeMaskTween = void 0), this.cooltimeTimer && (clearTimeout(this.cooltimeTimer), this.cooltimeTimer = void 0), e > 0 && (this.coolTimeMask.alpha = .5, this.coolTimeMask.startRadian = .5 * -Math.PI, this.coolTimeMask.ratio = 0, this.coolTimeMaskTween = this.coolTimeMask.addCustomToTween(.001 * e, {
                    flash: {
                        ratio: 1
                    }
                })), this.cooltimeTimer = setTimeout(function() {
                    t.amount > 0 ? (t.slot.gotoAndPlay("normal"), t.actionGuideItem.guide()) : t.amount <= 0 && t.slot.gotoAndPlay("disabled")
                }, e)
            }, t.prototype.setAmount = function(e) {
                this.amount > e ? (this.slot.gotoAndPlay("useItem"), this.recordService.pushRecord("itemuse", {
                    itemid: this.itemCode,
                    time: this.hudService.timeElapsed
                }), this.actionGuideItem.use()) : this.amount < e && this.slot.gotoAndPlay("repaired"), this.amount = e, s.bindText(this.amountMC, e.toString())
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("hudService")], l.prototype, "hudService", void 0), n.__decorate([o.autowired("recordService")], l.prototype, "recordService", void 0);
    var u = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.slots = [], t
        }
        return n.__extends(t, e), t.prototype.onAddedToScene = function() {
            var e = this,
                t = this.getFace(".TechSlotContainer");
            this.addManagedListener(this.externalService, a.default.beHUDAddItem, function(i, n) {
                return log.info("beHUDAddItem " + i), d[i] ? n < 0 || n >= 2 ? void log.info("beHUDAddItem: out of range itemSlotId " + n) : e.slots[n] ? void log.info("beHUDAddItem: already using itemSlotId " + n) : void(e.slots[n] = e.addChildBinder(t, l, {
                    itemCode: i,
                    index: n + 1
                })) : void log.info("beHUDAddItem: invalid itemCode " + i)
            }), this.addManagedListener(this.externalService, a.default.beAddItemHitRecord, function(t, i) {
                e.recordService.pushRecord("itemhit", {
                    itemid: 0,
                    target: t,
                    time: i
                })
            }), this.addManagedListener(this.externalService, a.default.beHUDUpdateItem, function(t, i, n) {
                log.info("beHUDUpdateItem " + t + " " + i + " " + n);
                var r = e.slots[t];
                r && r.setProps({
                    coolTime: i,
                    amount: n
                })
            })
        }, t
    }(r.StageBinder);
    n.__decorate([o.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([o.autowired("hudService")], u.prototype, "hudService", void 0), n.__decorate([o.autowired("recordService")], u.prototype, "recordService", void 0), n.__decorate([o.autowired("$filter")], u.prototype, "$filter", void 0), t.HudPursuitTechSlotBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(16),
        a = i(9),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.aiListItems = {}, t.aiCount = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-topAreaContainer .id-title", "BEPLAY_PURSUITMODE_AI_LIST_TITLE"), this.bindText(".id-topAreaContainer .id-quantity", this.aiCount.toString()), this.classNames(this.face, "leftsideReviseCoordinateOfScreenRatio")
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".id-aiStatusContainer");
                this.addManagedListener(this.externalService, a.default.beHudPursuitShowNotice, function(i) {
                    1 === i && e.gotoAndPlay(t, "in", !0)
                }), this.addManagedListener(this.externalService, a.default.beHUDUpdateChasingAiVehicle, function(t, i) {
                    if (!e.aiListItems[t]) {
                        var n = _.size(e.aiListItems) + 1,
                            r = e.convertFace(".id-ai" + n),
                            o = r.$(".id-alertContainer");
                        e.aiListItems[t] = {
                            object: r,
                            hpGaugeMask: r.$(".id-hpGaugeContainer .id-hpGaugeMask"),
                            hpAlertMask: o.$(".id-hpGaugeMask"),
                            alertObject: o.$(".id-alertMc"),
                            destroyEffect: e.convertFace(".id-destroyedEffect" + n),
                            alertEffectPlayed: !1,
                            destroyEffectPlayed: !1
                        }, e.gotoAndPlay(r, "in"), e.bindText(".id-topAreaContainer .id-quantity", (++e.aiCount).toString())
                    }
                    var a = e.aiListItems[t];
                    a.hpGaugeMask.x = 70 * -(1 - i), a.hpAlertMask.x = 70 * -(1 - i), i <= 0 && !a.destroyEffectPlayed ? (e.gotoAndPlay(a.object.$(".id-iconContainer"), "destroyed"), e.gotoAndStop(a.alertObject, 0), e.gotoAndPlay(a.destroyEffect, "startAnimation"), a.destroyEffectPlayed = !0, e.bindText(".id-topAreaContainer .id-quantity", (--e.aiCount).toString())) : i <= .2 && !a.alertEffectPlayed && (e.gotoAndPlay(a.alertObject, "alert"), a.alertEffectPlayed = !0)
                })
            }, t
        }(r.StageBinder);
    n.__decorate([o.autowired("externalService")], s.prototype, "externalService", void 0), t.HudPursuitAiStatusBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(17),
        o = i(1),
        a = i(9),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.arrestGauge = this.convertFace(".id-arrestGaugeContainer"), this.lightLeft = this.arrestGauge.$(".id-lightLeft"), this.lightRight = this.arrestGauge.$(".id-lightRight"), this.gaugeLeft = this.arrestGauge.$(".id-gaugeLeft"), this.gaugeRight = this.arrestGauge.$(".id-gaugeRight"), this.vignetteEffectContainer = this.convertFace(".id-vignetteEffectContainer"), this.vignette = this.getFace(".id-vignette"), this.translate(".id-titleLabel", "BEPLAY_PURSUITMODE_ARRESTEDGAUGE_TITLE")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.addManagedListener(this.externalService, a.default.beHUDUpdatePursuitArrestState, function(t, i) {
                    switch (t) {
                        case 0:
                            "in" === e.arrestGauge.currentLabel && (e.gotoAndPlay(e.arrestGauge, "out", !0), e.gotoAndPlay(".id-vignetteEffectContainer", "out", !0));
                            break;
                        case 2:
                            e.gotoAndPlay(e.arrestGauge, "in", !0), e.setGaugeRatio(i)
                    }
                })
            }, t.prototype.setGaugeRatio = function(e) {
                this.lightLeft.x = 178 + -171 * e, this.gaugeLeft.x = 178 + -171 * e, this.lightRight.x = 170 * e - 160, this.gaugeRight.x = 170 * e - 160, this.lightLeft.alpha = .5 + .5 * e, this.lightRight.alpha = .5 + .5 * e, e >= .8 ? (this.gotoAndPlay(".id-vignetteEffectContainer", "in", !0), this.gotoAndPlay(this.gaugeLeft.$("alertMc"), "alert", !0), this.gotoAndPlay(this.gaugeRight.$("alertMc"), "alert", !0), this.vignette.alpha = .3 + .7 * (e - .8) / (1 - .8)) : ("in" === this.vignetteEffectContainer.currentLabel && this.gotoAndPlay(".id-vignetteEffectContainer", "out", !0), this.gotoAndPlay(this.gaugeLeft.$("alertMc"), "normal", !0), this.gotoAndPlay(this.gaugeRight.$("alertMc"), "normal", !0))
            }, t
        }(r.StageBinder);
    n.__decorate([o.autowired("externalService")], s.prototype, "externalService", void 0), t.HudPursuitArrestGaugeBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(9),
        a = i(16),
        s = i(37),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-repairShopGuideContainer .id-description", "BEPLAY_PURSUITMODE_GASSTATION_GUIDE")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.addManagedListener(this.externalService, o.default.beHudPursuitShowNotice, function(t) {
                    switch (t) {
                        case 2:
                            e.gotoAndPlay(".id-repairShopGuideContainer", "startAnimation");
                            break;
                        case 3:
                            e.gotoAndPlay(".id-repairEffectConatainer", "startAnimation"), e.audioService.get(s.FxAudioCode.Pursuit_Repair).play()
                    }
                })
            }, t
        }(r.StageBinder);
    n.__decorate([a.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([a.autowired("audioService")], c.prototype, "audioService", void 0), t.HudPursuitRepairInfoBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(37),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-title", "BEPLAY_PURSUITMODE_ARRESTED_TITLE"), this.translate(".id-description", "BEPLAY_PURSUITMODE_ARRESTED_DESC")
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.hudService.supportRoomMirror ? "mirrorOn" : "mirrorOff";
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay(".CONTAINER", t)
                }), this.hudService.once("retire", function(t) {
                    t && (e.once(".id-arrestedEffectContainer", "stop", function() {
                        e.stateService.go("root.MatchResult")
                    }), e.gotoAndPlay(".id-arrestedEffectContainer", "startAnimation"), e.audioService.get(a.FxAudioCode.Pursuit_Arrest).play())
                })
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("hudService")], s.prototype, "hudService", void 0), n.__decorate([r.autowired("stateService")], s.prototype, "stateService", void 0), n.__decorate([r.autowired("audioService")], s.prototype, "audioService", void 0), n.__decorate([r.autowired("publisherService")], s.prototype, "publisherService", void 0), t.HudPursuitArrestBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(139),
        o = i(11),
        a = i(85),
        s = i(77),
        c = i(78),
        d = i(79),
        l = i(121),
        u = i(99),
        p = i(71);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new o.StateDefinition("/game/hud/speed-observer", 36).container({
            controller: "HUDCommon",
            stages: {
                "hud-mini-map": {
                    stageBinder: c.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-dashboard": p.HudDashboardBinder,
                "hud-time-rank": r.HudTimeRankBinder,
                "hud-ranking": l.HudRankingBinder,
                "hud-gamemode-guide": a.HudGameModeGuideBinder,
                "hud-start-counting": d.HudStartCountingBinder,
                "hud-start-effect": s.HudStartEffectBinder,
                "hud-finish-effect": u.HudFinishEffectBinder
            }
        });
        e.state("root.hudSpeedObserver", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(139),
        o = i(609),
        a = i(610),
        s = i(611),
        c = i(11),
        d = i(85),
        l = i(77),
        u = i(78),
        p = i(79),
        h = i(121),
        f = i(99),
        v = i(71);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new c.StateDefinition("/game/hud/speed-team-observer", 37).container({
            controller: "HUDCommon",
            stages: {
                "hud-mini-map": {
                    stageBinder: u.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-dashboard": v.HudDashboardBinder,
                "hud-time-rank": r.HudTimeRankBinder,
                "hud-ranking": h.HudRankingBinder,
                "hud-gamemode-guide": d.HudGameModeGuideBinder,
                "hud-start-counting": p.HudStartCountingBinder,
                "hud-start-effect": l.HudStartEffectBinder,
                "hud-finish-effect": f.HudFinishEffectBinder,
                "hud-team-fever-effect": o.HudTeamFeverEffectBinder,
                "hud-team-fever-gauge": a.HudTeamFeverGaugeBinder,
                "hud-team-score": s.HudTeamScoreBinder
            }
        });
        e.state("root.hudSpeedTeamObserver", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(1257),
        r = i(11),
        o = i(3);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = function() {
            return new r.StateDefinition("/loading", 34).dialog({
                controller: "LoadingScreen",
                stages: {
                    "loading-screen": n.LoadingScreenBinder
                },
                resolve: {
                    vehicle: ["vehicleService", function(e) {
                        return e.fetch()
                    }]
                }
            })
        };
        e.state("root.hudItem.loading", t()), e.state("root.hudSpeed.loading", t()), e.state("root.hudSpeedTeam.loading", t()), e.state("root.hudDrift.loading", t()), e.state("root.hudFoxHunting.loading", t()), e.state("root.hudPursuit.loading", t()), e.state("root.hudSpeedObserver.loading", t()), e.state("root.hudSpeedTeamObserver.loading", t())
    }]).controller("LoadingScreenController", ["externalService", "room2MatchService", "ranked2MatchService", "festivalMatchService", "quickMatchService", function(e, t, i, n, r) {
        var a = o.store.getState().match;
        e.isEdgeBrowser() || ("room" === a.match.featureType && t.cheatPassGame(), "quick" === a.match.featureType && r.cheatPassGame(), "ranked" === a.match.featureType && i.cheatPassGame(), "festival" === a.match.featureType && n.cheatPassGame())
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(40),
        o = i(6),
        a = i(9),
        s = i(1),
        c = i(115),
        d = i(1258),
        l = i(2),
        u = i(8),
        p = i(3),
        h = i(1259),
        f = i(151),
        v = i(103),
        m = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.matchPlayerBinder = [], t.slotCount = 6, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.addManagedListener(this.externalService, a.default.bePushLoadingProgress, function(t, i) {
                    var n = p.store.getState().match.match;
                    if (!_.isEmpty(n)) {
                        var r = i || p.store.getState().player.id,
                            o = r === p.store.getState().player.id;
                        e.dispatch(f.updatePlayerLoadingProgress((a = {}, a[r] = t, a))), o && n.players.filter(function(e) {
                            return e.ai
                        }).forEach(function(i) {
                            e.dispatch(f.updatePlayerLoadingProgress((n = {}, n[i.id] = t, n)));
                            var n
                        });
                        var a
                    }
                }), this.getFace(".id-playerContainer").hasSize = !0, this.bindText(".id-tipContainer1 .id-tipTitle", ""), this.bindText(".id-tipContainer1 .id-descriptionText", ""), this.bindText(".id-tipContainer2 .id-tipTitle", ""), this.bindText(".id-tipContainer2 .id-descriptionText", ""), this.initTooltip(), this.bgmService.setRaceLoadingListener(), this.addChildBinder(".id-sevenLineChat", v.SimpleChatWindowBinder, {
                    entrance: v.SimpleChatEntrance.Loading
                })
            }, t.prototype.initTooltip = function() {
                var e = this,
                    t = p.store.getState().match.match,
                    i = "FOXHUNTINGINDIVIDUAL" === t.gameMode;
                if (i) {
                    var n = this.staticdata.trackData,
                        r = n.getTrack(t.trackCode);
                    this.translate(".id-loadingPageFoxhuntingTooltip .id-title1", "FOXHUNTING_LOADINGTIP_HOWTOWIN"), this.bindHtml(".id-loadingPageFoxhuntingTooltip .id-description1", this.$filter("template")({
                        number: c.GameModeService.FoxhuntingMinimumLap
                    }, "FOXHUNTING_LOADINGTIP_HOWTOWIN_DESC_1")), this.bindHtml(".id-loadingPageFoxhuntingTooltip .id-description2", this.$filter("template")({
                        number: r.lapCount
                    }, "FOXHUNTING_LOADINGTIP_HOWTOWIN_DESC_2")), this.translate(".id-loadingPageFoxhuntingTooltip .id-title2", "FOXHUNTING_LOADINGTIP_MATCHTIP"), this.translate(".id-loadingPageFoxhuntingTooltip .id-description3", "FOXHUNTING_LOADINGTIP_MATCHTIP_DESC"), this.translate(".id-positionTipContainer .id-title", "FOXHUNTING_LOADINGTIP_TITLE")
                } else this.translate(".id-loadingPagePositionTooltip .id-description", "LOADING_TIP_STARTLOCATERULEGUIDE"), this.translate(".id-loadingPagePositionTooltip .id-imageTitle1", "LOADING_TIP_ROW"), this.translate(".id-loadingPagePositionTooltip .id-imageTitle2", "LOADING_TIP_PARALLEL"), this.translate(".id-positionTipContainer .id-title", "LOADING_TIP_STARTLOCATERULE");
                var o = this.getFace(".id-positionTipContainer .id-tooltip");
                o.on(l.MouseEventEx.MOUSE_OVER, function() {
                    e.gotoAndPlay(i ? ".id-loadingPageFoxhuntingTooltip" : ".id-loadingPagePositionTooltip", "in")
                }), o.on(l.MouseEventEx.MOUSE_OUT, function() {
                    e.gotoAndPlay(i ? ".id-loadingPageFoxhuntingTooltip" : ".id-loadingPagePositionTooltip", "out")
                })
            }, t.prototype.onAddedToScene = function(e) {
                var t = this,
                    i = e,
                    n = this.gameModeService.isTeamMode(i.match.gameMode);
                this.stage.gotoAndPlay("in"), this.slotCount = n ? 8 : 6, _.range(1, this.slotCount + 1).forEach(function(e) {
                    var i = n ? "Team" : "";
                    t.matchPlayerBinder.push(t.addChildBinder(".id-playerContainer .id-playerContainerItem" + e + "." + i + "PlayerContainerItem", d.MatchPlayer))
                }), this.gotoAndPlay(".id-matchTypeBackground", n ? "team" : "single"), this.gotoAndPlay(".id-playerContainer", "player" + this.slotCount), this.gotoAndPlay(".id-infoContainer", "player" + this.slotCount);
                var o = this.featureSetService.isEnabled("PARTNERSHIPMARKETING");
                this.visible(".MarketingArea", o), o && this.drawExternalImage(".MarketingArea", this.$filter("cdn_marketing")("marketing-type-01"));
                var a = this.gameModeService.getCoreModeFromGameMode(i.match.gameMode),
                    s = this.loadingTipService.getTipsByMode(a),
                    l = {
                        LOADING_MODETIP_FOXHUNTING_WINORLOSE_DESC: {
                            lap: c.GameModeService.FoxhuntingMinimumLap
                        }
                    };
                if (s && s.length > 0) {
                    var f = _.random(s.length - 1),
                        v = function() {
                            var e = f % 2 + 1,
                                i = ".id-tipContainer" + (e % 2 + 1),
                                n = s[f % s.length];
                            t.translate(i + " .id-tipTitle", n.title), t.template(i + " .id-descriptionText", n.desc, l[n.desc]), t.drawExternalImage(i + " .id-externalImage", t.$filter("cdn_loadingTip")(n.id)), t.gotoAndPlay(".GameTip", "swap" + e), ++f
                        };
                    v(), this.tipInterval = setInterval(v, 3e3)
                }
                this.trackRecordContainer = this.addChildBinder(".TrackRecordContainer", h.TrackRecordContainerBinder, {
                    trackCode: i.match.trackCode,
                    players: i.match.players,
                    gameMode: i.match.gameMode
                });
                var m = i.hostInfo,
                    g = m.host,
                    y = m.port,
                    S = m.matchId,
                    E = m.securityKey,
                    T = !_.find(i.match.players, {
                        id: this.storeState.player.id
                    });
                this.externalService.beStartGame(g, y, S, E, T);
                var C = i.match.featureType,
                    b = "ranked" === C ? this.ranked2MatchService : "quick" === C ? this.quickMatchService : "festival" === C ? this.festivalMatchService : this.room2MatchService;
                this.addManagedOnceListener(b, "all.loaded", function() {
                    t.stateService.go("^")
                }), this.stage.on(u.EventEx.STOP, function(e) {
                    "in" === e.currentTarget.currentLabel && p.store.dispatch(r.updateChatList())
                })
            }, t.prototype.onDetach = function() {
                this.tipInterval && (clearInterval(this.tipInterval), this.tipInterval = null)
            }, t.prototype.mapStateToProps = function(e) {
                return e.match
            }, t.prototype.update = function(e) {
                var t = this;
                if (!_.isEmpty(e)) {
                    var i = this.mapFaces(".id-title", ".id-trackName", ".id-trackDifficulty", ".id-trackImage", ".id-trackMap"),
                        n = i[0],
                        r = i[1],
                        a = i[2],
                        s = i[3],
                        c = i[4],
                        d = e.match;
                    this.translate(n, "GAMEROOM_MODE_" + d.gameMode);
                    var l = this.staticdata.trackData,
                        u = l.getTrack(d.trackCode);
                    this.translate(r, u.nameCode), this.translate(a, u.difficultyCode), this.drawExternalImage(s, this.$filter("cdn_track")(d.trackCode)), this.drawExternalImage(c, this.$filter("cdn_track_map")(d.trackCode)), o.all(d.players.map(function(e) {
                        return t.playerSnippetService.getSnippetAsync(e.id)
                    })).then(function(e) {
                        var i, n = p.store.getState().player.id,
                            r = _.find(d.players, {
                                id: n
                            }),
                            o = !r;
                        if (t.gameModeService.isTeamMode(d.gameMode)) {
                            i = [];
                            for (var a = d.players.slice().sort(function(e, i) {
                                    var n = t.playerSnippetService.getSnippet(e.id),
                                        r = t.playerSnippetService.getSnippet(i.id);
                                    return n.level - r.level
                                }), s = _.groupBy(a, "team"), c = 0; c < t.slotCount / 2; ++c) i.push(s[1].pop() || {}), i.push(s[2].pop() || {})
                        } else
                            for (i = d.players.slice(); i.length < t.slotCount;) {
                                var l = {};
                                i.push(l)
                            }
                        _.forEach(i, function(e, i) {
                            var n = i + 1,
                                a = e.id,
                                s = !o && r.team === e.team,
                                c = !o && r.id === e.id,
                                d = e.vehicle,
                                l = e.team,
                                u = e.plate,
                                p = {
                                    slot: n,
                                    pid: a,
                                    isMyTeam: s,
                                    vehicle: d,
                                    team: l,
                                    isMyEntry: c,
                                    matchPlayer: e,
                                    plate: u
                                },
                                h = t.matchPlayerBinder[i];
                            h && h.setProps(p)
                        }), t.trackRecordContainer.setProps({
                            trackCode: d.trackCode,
                            players: d.players,
                            gameMode: d.gameMode
                        })
                    })
                }
            }, t
        }(s.StageBinder);
    n.__decorate([s.autowired("$filter")], m.prototype, "$filter", void 0), n.__decorate([s.autowired("loadingTipService")], m.prototype, "loadingTipService", void 0), n.__decorate([s.autowired("staticdataLoaderService")], m.prototype, "staticdata", void 0), n.__decorate([s.autowired("playerSnippetService")], m.prototype, "playerSnippetService", void 0), n.__decorate([s.autowired("room2Service")], m.prototype, "room2Service", void 0), n.__decorate([s.autowired("room2MatchService")], m.prototype, "room2MatchService", void 0), n.__decorate([s.autowired("quickMatchService")], m.prototype, "quickMatchService", void 0), n.__decorate([s.autowired("ranked2MatchService")], m.prototype, "ranked2MatchService", void 0), n.__decorate([s.autowired("festivalMatchService")], m.prototype, "festivalMatchService", void 0), n.__decorate([s.autowired("stateService")], m.prototype, "stateService", void 0), n.__decorate([s.autowired("externalService")], m.prototype, "externalService", void 0), n.__decorate([s.autowired("bgmService")], m.prototype, "bgmService", void 0), n.__decorate([s.autowired("gameModeService")], m.prototype, "gameModeService", void 0), n.__decorate([s.autowired("featureSetService")], m.prototype, "featureSetService", void 0), n.__decorate([s.autowired("worldChatService")], m.prototype, "worldChatService", void 0), t.LoadingScreenBinder = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(613),
        a = i(39),
        s = i(46),
        c = i(42),
        d = {
            connecting: "in",
            loading: "in",
            finished: "finish",
            disconnected: "logout",
            left: "logout"
        },
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.getFace(".id-progressBar").hasSize = !0, this.progress = this.addChildBinder(".id-progressBar", s.ProgressBinder, {
                    duration: 3,
                    outDuration: .5
                }), this.translate(".id-logout", "GAMEROOM_LOGOUT"), e.prototype.onFaceReady.call(this), this.getFace(".id-name").layoutPosition = "relative", this.getFace(".id-name").layoutFloat = "left", this.getFace(".id-name .id-textField").layoutPosition = "relative", this.getFace(".id-name .id-textField").layoutFloat = "left", this.getFace(".id-name .id-textField").hasSize = !1;
                var t = this.getFace(".id-name .id-clanEmblem");
                t && (t.layoutPosition = "relative", t.layoutFloat = "left");
                var i = this.getFace(".id-numberPlate");
                i && (i.layoutPosition = "relative", i.layoutFloat = "left", i.hasSize = !0, this.numberPlateService.enableNumberPlate ? this.numberPlate = this.addChildBinder(i, c.NumberPlateCard) : i.visible = !1)
            }, t.prototype.update = function(t) {
                var i = t.matchPlayer ? t.matchPlayer.state : null;
                this.matchUserState !== i && (this.matchUserState = i, this.gotoAndPlay(this.face, d[i] || "empty")), e.prototype.update.call(this, t), t.vehicle && this.drawExternalImage(".id-externalImage", this.$filter("cdn_beautyshot")(t.vehicle.code)), t.team && 0 !== t.team && this.gotoAndStop(".id-playerSlotGradation", a.getTeamString(t.team)), t.matchPlayer && (this.progress.value = t.matchPlayer.loadingProgress || 0), this.numberPlate && t.plate && this.numberPlate.setProps({
                    personalNumber: t.plate.prefix,
                    uniqueNumber: t.plate.plateNumber,
                    templateCode: t.plate.templateCode
                })
            }, t
        }(o.Player);
    n.__decorate([r.autowired("numberPlateService")], l.prototype, "numberPlateService", void 0), t.MatchPlayer = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(1260),
        s = i(3),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                this.face.hasSize = !0;
                var t = e,
                    i = this.getFace(".id-rankDesc");
                i.hasSize = !0, this.translate(i, "GAMEROOM_RANKING_LAPTIME");
                var n = this.getFace(".id-playerNameDesc");
                n.hasSize = !0, this.translate(n, "GAMEROOM_PLAYER_NAME");
                var r = this.getFace(".id-lapTimeDesc");
                r.hasSize = !0;
                var s = "DRIFTINDIVIDUAL" === t.gameMode ? "GAMEROOM_PLAYER_DP" : "FOXHUNTINGINDIVIDUAL" === t.gameMode ? "GAMEROOM_RANKING_WINRATE" : "GAMEROOM_LAPTIME";
                this.translate(r, s), this.recordsContainer = this.addChildBinder(".id-recordContainer", o.CollectionBinder, {
                    instanceBinder: a.RecordContainerBinder,
                    keyProperty: "pid"
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.props,
                    i = t.trackCode,
                    n = t.players;
                r.all(n.map(function(t) {
                    return e.playerSnippetService.getSnippetAsync(t.id)
                })).then(function() {
                    return e.historyService.getTrackRecord(t.gameMode, i, n)
                }).then(function(t) {
                    return e.updateRecord(t)
                })
            }, t.prototype.updateRecord = function(e) {
                var t = this,
                    i = this.props,
                    n = i.players,
                    r = 1,
                    o = [],
                    a = s.store.getState().player;
                e.forEach(function(e) {
                    var i = t.playerSnippetService.getSnippet(e.pid),
                        s = _.find(n, function(t) {
                            return t.id === e.pid
                        });
                    o.push({
                        index: o.length + 1,
                        name: i.name,
                        value: e.value,
                        rank: r++,
                        pid: e.pid,
                        me: a.id === e.pid,
                        team: s.team,
                        disconnected: "disconnected" === s.state || "left" === s.state,
                        hasNoRecord: !1
                    })
                }), n.forEach(function(e) {
                    if (!_.some(o, function(t) {
                            return t.pid === e.id
                        })) {
                        var i = t.playerSnippetService.getSnippet(e.id);
                        o.push({
                            index: o.length + 1,
                            name: i.name,
                            value: "",
                            rank: r++,
                            pid: e.id,
                            me: a.id === e.id,
                            team: e.team,
                            disconnected: "disconnected" === e.state || "left" === e.state,
                            hasNoRecord: !0
                        })
                    }
                }), this.recordsContainer.applyCollection(o), this.records = _.cloneDeep(o)
            }, t.prototype.update = function(e) {
                var t = this;
                if (this.records && !_.isEmpty(e)) {
                    var i = !1;
                    e.players.forEach(function(e) {
                        if ("disconnected" === e.state || "left" === e.state) {
                            var n = _.find(t.records, function(t) {
                                return t.pid === e.id
                            });
                            n && (n.disconnected = !0, i = !0)
                        }
                    }), i && (this.recordsContainer.applyCollection(this.records), this.records = _.cloneDeep(this.records))
                }
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("historyService")], c.prototype, "historyService", void 0), n.__decorate([o.autowired("playerSnippetService")], c.prototype, "playerSnippetService", void 0), t.TrackRecordContainerBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(39),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.face.setCustomStyle({
                    display: "block",
                    position: "relative"
                });
                var e = this.props,
                    t = this.getFace(".id-rank .id-textField");
                t.text = e.hasNoRecord ? "-" : e.rank.toString();
                var i = this.getFace(".id-playerName .id-textField");
                i.hasSize = !0;
                var n = this.getFace(".id-playerName .id-team"),
                    r = {};
                if (e.team) {
                    n.hasSize = !0;
                    var a = o.getTeamString(e.team);
                    n.visible = !0, r.margin = "0 0 0 20px", this.gotoAndStop(n, a)
                } else n.visible = !1;
                !0 === e.me && (r.color = "yellow", t.setCustomStyle({
                    color: "yellow"
                }), this.gotoAndStop(".id-noRank", "mylist")), i.setCustomStyle(r), i.text = e.name;
                var s = this.getFace(".id-logoutLabel");
                this.translate(s, "LOADINGSCREEN_LOGOUT");
                var c = this.getFace(".id-noRecordLabel");
                this.translate(c, "FRIENDLYMATCH_RESULT_NORECORD"), this.bindHtml(".id-lapTime .id-textField", e.value), this.gotoAndStop(".id-background", e.index % 2 == 0 ? "even" : "odd"), (e.disconnected || e.hasNoRecord) && this.gotoAndStop(this.face, e.disconnected ? "logout" : "no_record")
            }, t.prototype.update = function(e) {
                _.isEmpty(e) || (e.disconnected || e.hasNoRecord) && this.gotoAndStop(this.face, e.disconnected ? "logout" : "no_record")
            }, t
        }(r.Binder);
    t.RecordContainerBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(4),
        r = i(6),
        o = i(305);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("main", {
            url: "/",
            views: n.default.makeEmptyView("Main"),
            resolve: {
                audioService: "audioService"
            }
        })
    }]).controller("MainController", ["$scope", "$stateParams", "$filter", "stateService", "externalService", "configLoader", function(e, t, i, n, a, s) {
        a.onGameStart();
        var c = function() {
            return n.go("root.startScreen", t)
        };
        a.isDevelopment() && angular.element(window).one("click keydown", c);
        var d;
        a.isEdgeBrowser() ? s.getConfig().then(function(e) {
            var t = e.publisher;
            if ("tencent" === t) {
                var n = $("<div>");
                o.videoPlayer.setBackground();
                var a = new o.Video("video/" + t);
                a.addClass("fullscreen"), d = o.videoPlayer.play(a).then(function() {
                    var e = i("translate")("STARTSCREEN_HEALTHCARE_TC");
                    o.videoPlayer.clearBackground(), n.addClass("tc-health-care").attr({
                        "ui-view": "edge-ui-container"
                    }).html(e).appendTo("#edge-ui")
                }).then(function() {
                    return r.delay(2e3)
                }).then(function() {
                    n.remove(), o.videoPlayer.setBackground();
                    var e = new o.Video("video/spearhead");
                    return e.addClass("fullscreen"), o.videoPlayer.play(e)
                }).then(c).catch(_.noop)
            } else {
                var s = [];
                switch (t) {
                    case "nexon":
                        s.push(new o.Video("video/" + t))
                }
                s.push(new o.Video("video/spearhead")), s.forEach(function(e) {
                    return e.addClass("fullscreen")
                }), o.videoPlayer.setBackground(), o.videoPlayer.play(s).then(c).catch(_.noop)
            }
        }) : c(), e.$on("$destroy", function() {
            angular.element(window).off("click keydown", c), o.videoPlayer.reset(), o.videoPlayer.clearBackground(), void 0 !== d && d.isPending() && d.cancel(), $(".tc-health-care").remove()
        })
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(63),
        r = i(12),
        o = i(1263),
        a = i(11),
        s = i(3),
        c = i(1265);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new a.StateDefinition("/friendly/quick/{gamemode}", 30, {
            gamemode: ""
        }).container({
            controller: "MultiplayQuickMatch",
            stages: {
                "multiplay-quick-match": o.MultiplayQuickMatchBinder
            },
            resolve: {
                vehicles: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                license: ["licenseService", function(e) {
                    return e.fetch()
                }],
                vehiclePrice: ["vehiclePriceDataService", function(e) {
                    e.getLatestPriceData(r.getAllVehicles()).then(function(e) {
                        return s.store.dispatch(n.updatePrices(e))
                    })
                }]
            }
        }).dialog({
            stages: {
                "multiplay-room-popup": c.QuickMatchPopupBinder
            }
        });
        e.state("root.menu.MultiplayQuickMatch", t)
    }]).controller("MultiplayQuickMatchController", ["externalService", "playerService", function(e, t) {
        t.setRecentVehicleIfNeeded(7), e.camera.quickMatch(15), e.beSelectVehicle(r.getRecentVehicle())
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(53),
        o = i(6),
        a = i(4),
        s = i(1),
        c = i(614),
        d = i(12),
        l = i(2),
        u = i(3),
        p = i(311),
        h = i(58),
        f = i(214),
        v = i(115),
        m = i(21),
        g = i(1264),
        y = i(5),
        S = i(72),
        E = i(136),
        T = i(8),
        C = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.cleanUp = [], t.matchingTime = 0, t.gameModeGroup = new S.ButtonGroup("gameModeGroup"), t.isAutoMatchmakingOn = !1, t.onMatching = function() {
                    t.clearMatchingState(), t.stateService.go(a.default.gameModeToHudState[t.currentGameMode] + ".loading")
                }, t.onQuitMatching = function() {
                    t.setMatchingTime(0), t.clearMatchingState(), t.initButtons(), t.gotoAndPlay(t.bottomBackground, "cancel"), t.uistateNotifyService.setSubState(4), t.dispatch(E.matchmaking(!1))
                }, t.handleError = function(e) {
                    if (log.debug("Matching Error:", JSON.stringify(e)), t.clearMatchingState(), e.code === h.toCode(h.ErrorCode.IgrVehicleDateExpiredWhenGetIgrVehicle)) t.popupService.drawConfirm("PCVEHICLE_UPDATE_COMMONPOPUP_TITLE", "PCVEHICLE_UPDATE_COMMONPOPUP_DESC", function() {
                        t.vehicleService.fetchIgrVehicles()
                    }), t.externalService.beSelectVehicle(t.playerService.setRecentVehicleIfNeeded(1)), t.changeVehicleBinder.setProps(d.getVehicleState());
                    else {
                        var i = t.$filter("template")({
                            errorcode: e.code
                        }, "COMMON_POPUP_ERROR_TITLE");
                        t.popupService.drawConfirm("GAMEROOM_ERROR_POPUP_TITLE", i)
                    }
                    t.initButtons()
                }, t
            }
            return n.__extends(t, e), t.prototype.clearMatchingState = function() {
                this.intervalId && clearInterval(this.intervalId), this.intervalId = void 0, this.timer && clearTimeout(this.timer), this.timer = void 0, this.deregisterOnStart && (this.deregisterOnStart(), this.deregisterOnStart = void 0), this.room2MatchmakingService.removeListener("matchmaking.success", this.onMatching), this.room2MatchmakingService.removeListener("matchmaking.fail", this.onQuitMatching)
            }, t.prototype.initButtons = function() {
                this.gameModeGroup.resetButtons(), this.enableStartButton(!0), this.enableChangeVehicleButton(!0)
            }, t.prototype.onFaceReady = function() {
                var e = this;
                this.visible(".id-withFriend", !1), this.translate(".id-title", "QUICKMATCH_SELECT_MODE"), this.translate(".id-description .id-textField", "QUICKMATCH_SELECT_MODE_DESC"), this.managerModeButton = this.convertFace(".id-modeButton3"), this.managerModeButton.visible = this.featureSet.isEnabled("MANAGER"), this.bindModeButtons(), this.addChildBinder(".id-vehicleDetailNormal", g.VehicleDetailNormal), this.bindChangeVehicleButton(), this.face.on("changeVehicle_out", function() {
                    e.showModeExclusiveComponent(e.currentGameMode), e.enableStartButton(!0)
                }), this.bindBottomBackground()
            }, t.prototype.bindModeButtons = function() {
                this.translate(".id-modeTitle1", "QUICKMATCH_SPEEDINDIVIDUAL"), this.bindModeButton(this.convertFace(".id-modeButton2"), "SPEEDINDIVIDUAL"), this.bindModeButton(this.managerModeButton, "SPEEDINDIVIDUALAI"), this.translate(".id-modeTitle0", "QUICKMATCH_SPEEDTEAM"), this.bindModeButton(this.convertFace(".id-modeButton0"), "SPEEDTEAM"), this.bindModeButton(this.convertFace(".id-modeButton1"), "SPEEDTEAM", !0)
            }, t.prototype.bindModeButton = function(e, t, i) {
                var n = this,
                    r = i ? t + "_WITHFRIEND" : t;
                if (this.classNames(e, r), this.translate(e.$(".buttonName .id-textField"), "QUICKMATCH_" + r + "_PLAY"), this.translate(e.$(".id-description .id-textField"), "QUICKMATCH_" + r + "_PLAY_DESC"), this.gotoAndStop(e.$(".id-background"), t + "QUICK" + (i ? "WITHFRIENDS" : "")), i) this.on(e, l.MouseEventEx.CLICK, function() {
                    n.enableStartButton(!1), n.gameModeGroup.selectedIndex >= 0 ? n.tryTransition().then(function(e) {
                        e && n.createTeamRoom()
                    }) : n.createTeamRoom()
                });
                else {
                    this.translate(e.$(".id-matchMakingTitle"), "QUICKMATCH_MATCHMAKING_CANCEL_DESC"), this.classNames(e.$(".LoopAnimationContainer"), "prevent-click");
                    var o = function() {
                        (n.gameModeGroup.selectedIndex < 0 || n.currentGameMode !== t) && (n.enableButton(e, !1), n.onClickStartMatchmaking(e, t))
                    };
                    this.translate(e.$(".id-cancelButton .id-buttonName"), "QUICKMATCH_MATCHMAKING_CANCEL"), this.on(e, l.MouseEventEx.CLICK, o), this.on(e.$(".id-cancelButton"), l.MouseEventEx.CLICK, function(t) {
                        n.enableStartButton(!1), n.gotoAndPlay(e, "cancel"), n.cancelMatchmaking()
                    }), this.gameModeGroup.addButton(e)
                }
            }, t.prototype.bindChangeVehicleButton = function() {
                this.translate(".id-changeVehicleButton", "QUICKMATCH_CHANGEVEHICLE"), this.changeVehicleBinder = this.addChildBinder(this.face, c.ChangeVehicleBinder)
            }, t.prototype.bindBottomBackground = function() {
                this.bottomBackground = this.convertFace(".id-bottomBackground"), this.translate(this.bottomBackground.$(".id-titleNormal"), "QUICKMATCH_CHANGEVEHICLE_DESC"), this.translate(this.bottomBackground.$(".id-description .comp-TextField"), "QUICKMATCH_MATCHMAKING_UNDER_DESC")
            }, t.prototype.bindPursuitComponents = function() {
                var e = this;
                this.pursuitTechContainer = this.convertFace(".id-pursuitTechContainer"), this.translate(this.pursuitTechContainer.$(".id-titleLabel"), "QUICKMATCHING_PURSUITMODE_PURSUIT_STATUS"), this.translate(this.pursuitTechContainer.$(".id-changePursuitTechButton"), "GAMEROOM_CHANGING_PURSUIT");
                var t = this.pursuitTechContainer.$("item1"),
                    i = this.pursuitTechContainer.$("item2");
                this.on(t, l.MouseEventEx.MOUSE_OVER, function(t) {
                    e.onOverTechButton(t, 1)
                }), this.on(t, l.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                }), this.on(i, l.MouseEventEx.MOUSE_OVER, function(t) {
                    e.onOverTechButton(t, 2)
                }), this.on(i, l.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                }), this.updatePursuitTechs()
            }, t.prototype.updatePursuitTechs = function() {
                for (var e = this.pursuitTechContainer.$("item1").$("itemIcon"), t = this.pursuitTechContainer.$("item2").$("itemIcon"), i = e.numChildren, n = 0; n < i; n++) e.getChildAt(n).visible = !1;
                for (var r = t.numChildren, n = 0; n < r; n++) t.getChildAt(n).visible = !1;
                var o = this.gameModeService.getLastPursuitTechs();
                e.$(v.PursuitTechMap[o[0]]).visible = !0, t.$(v.PursuitTechMap[o[1]]).visible = !0
            }, t.prototype.onOverTechButton = function(e, t) {
                var i = this.gameModeService.getLastPursuitTechs(),
                    n = this.gameModeService.getPursuitItemsByGroup(),
                    r = i[t - 1],
                    o = _.find(n[t], function(e) {
                        return e.code === r
                    }),
                    a = this.$filter("translate"),
                    s = this.$filter("template"),
                    c = [a("PURSUITMODE_PURSUIT_AMOUNT") + ": ", s({
                        value: o.amount
                    }, "PURSUITMODE_PURSUIT_AMOUNT_VALUE")].join(""),
                    d = [a("PURSUITMODE_PURSUIT_COOLDOWNTIME") + ": ", s({
                        value: o.cooldowntime
                    }, "PURSUITMODE_PURSUIT_COOLDOWNTIME_VALUE")].join("");
                this.tooltipService.show(e, "bottomleft", m.TooltipType.PursuitTech, {
                    title: a("PURSUITMODE_PURSUIT_" + o.code + "_NAME"),
                    desc: a("PURSUITMODE_PURSUIT_" + o.code + "_DESC"),
                    amount: c,
                    coolTime: d
                })
            }, t.prototype.enableChangeVehicleButton = function(e) {
                this.convertFace(".id-changeVehicleButton").enabled = e
            }, t.prototype.enableStartButton = function(e) {
                this.enableButtonAll(".ModeButton", e)
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.stage.gotoAndPlay("in"), this.enableStartButton(!0), this.enableChangeVehicleButton(!0), this.on(".id-changeVehicleButton", l.MouseEventEx.CLICK, function() {
                    e.openChangeVehiclePopup()
                }), this.on(".id-changePursuitTechButton", l.MouseEventEx.CLICK, function() {
                    e.openChangePursuitTechPopup()
                });
                var t = u.store.getState().quickMatch;
                t && t.isAutoMatchmaking && (this.enableButton(this.managerModeButton, !1), this.stage.once(T.EventEx.STOP, function() {
                    e.onClickStartMatchmaking(e.managerModeButton, "SPEEDINDIVIDUALAI")
                }))
            }, t.prototype.onClickStartMatchmaking = function(e, t) {
                var i = this;
                return p.checkGameModeIsManagerMode(t) ? this.dispatch(f.enableAutoMatchmaking()) : this.dispatch(f.resetAutoMatchmaking()), this.currentGameMode = t, this.enableButton(e, !1), this.enableButton(e.$(".id-cancelButton"), !0), this.gameModeGroup.selectedIndex >= 0 ? this.cancelMatchmaking().then(function() {
                    return i.startMatchmaking()
                }) : this.startMatchmaking()
            }, t.prototype.startMatchmaking = function() {
                var e = this;
                if (!(this.gameModeGroup.selectedIndex >= 0)) {
                    var t;
                    switch (this.currentGameMode) {
                        case "SPEEDINDIVIDUAL":
                            t = 0;
                            break;
                        case "SPEEDINDIVIDUALAI":
                            t = 1;
                            break;
                        default:
                            t = 2
                    }
                    this.gameModeGroup.setSelectedButtonByIndex(t);
                    var i = d.getRecentVehicle().id;
                    return this.enableChangeVehicleButton(!1), this.room2MatchmakingService.search(this.currentGameMode, i).then(function() {
                        e.hideModeExclusiveComponent(e.currentGameMode), e.setTimer(), e.room2MatchmakingService.once("matchmaking.success", e.onMatching), e.room2MatchmakingService.once("matchmaking.fail", e.onQuitMatching), e.deregisterOnStart = e.$transitions.onStart({}, function() {
                            return e.tryTransition()
                        }), e.uistateNotifyService.setSubState(3), e.dispatch(E.matchmaking(!0))
                    }).then(function() {
                        e.translate(e.bottomBackground.$(".id-titleMatchMaking .id-textFieldMC"), "QUICKMATCH_MATCHMAKING_" + e.currentGameMode + "_DESC"), e.gotoAndPlay(e.gameModeGroup.selectedButton, "matchmaking"), e.gotoAndPlay(e.bottomBackground, "matchmaking")
                    }).catch(this.handleError)
                }
            }, t.prototype.setTimer = function() {
                var e = this;
                (this.timer || this.intervalId) && this.clearMatchingState(), console.assert(!this.intervalId && !this.timer), this.setMatchingTime(0), this.intervalId = setInterval(function() {
                    return e.setMatchingTime(e.matchingTime + 1)
                }, 1e3)
            }, t.prototype.setMatchingTime = function(e) {
                var t = this;
                this.room2MatchService.checkTimeout(e, this.cancelMatchmaking.bind(this)).then(function(i) {
                    if (i) return t.clearMatchingState();
                    t.matchingTime = e;
                    var n = t.gameModeGroup.selectedButton;
                    t.bindText(n.$(".id-matchMakingTime"), y(1e3 * t.matchingTime).format("mm:ss"))
                })
            }, t.prototype.openChangeVehiclePopup = function() {
                var e = this,
                    t = function() {
                        e.changeVehicleBinder.setProps(d.getVehicleState()), e.gotoAndPlay(e.face, "changeVehicle_in"), e.hideModeExclusiveComponent(e.currentGameMode), e.externalService.beQuickFriendlyMatchChangeVehicle(!0), e.dispatch(r.hideNav()), e.enableStartButton(!1)
                    };
                this.publisherService.isNeedUpdateIgrVehicles() ? this.vehicleService.fetchIgrVehicles().finally(function() {
                    return t()
                }) : t()
            }, t.prototype.createTeamRoom = function() {
                var e = this;
                this.teamRoomService.createTeamRoom("SPEEDTEAM").then(function(t) {
                    e.stateService.go("root.menu.MultiplayTeamRoom", {
                        roomId: t.id
                    })
                }).catch(function() {
                    e.enableStartButton(!0)
                })
            }, t.prototype.openChangePursuitTechPopup = function() {
                var e = this.gameModeService.getLastPursuitTechs();
                this.dispatch(f.showChangePursuitTechPopup(e[0], e[1]))
            }, t.prototype.isDeletedMatching = function(e) {
                return e && /Resource not found/.test(e.message)
            }, t.prototype.tryTransition = function() {
                var e = this;
                return new o(function(t) {
                    e.popupService.draw("ConfirmCancelPopup", {
                        title: "COMMON_STOPMATCHING_POPUP_TITLE",
                        description: "COMMON_STOPMATCHING_POPUP_DESC",
                        confirm: function() {
                            e.cancelMatchmaking(!0).then(function() {
                                e.enableStartButton(!1), t(!0)
                            }).catch(function() {
                                return t(!1)
                            })
                        },
                        cancel: function() {
                            e.enableStartButton(!0), t(!1)
                        }
                    }), setTimeout(function() {
                        return $("#edge-ui").removeClass("prevent-click")
                    })
                })
            }, t.prototype.cancelMatchmaking = function(e) {
                var t = this;
                this.dispatch(f.resetAutoMatchmaking());
                var i = this.gameModeGroup.selectedButton;
                return i ? (this.enableButton(i.$(".id-cancelButton"), !1), this.room2MatchmakingService.cancel().then(function() {
                    return t.onQuitMatching()
                }).catch(function(i) {
                    if (t.isDeletedMatching(i) ? t.setForcedMatchingTimeout() : t.discardMatch(), e) throw i
                })) : void log.warn("there is no match making button currently working")
            }, t.prototype.setForcedMatchingTimeout = function() {
                var e = this;
                console.assert(!this.timer), this.timer = setTimeout(function() {
                    return e.discardMatch()
                }, 5e3)
            }, t.prototype.discardMatch = function() {
                this.onQuitMatching(), this.room2MatchmakingService.cancelForcefully()
            }, t.prototype.onDetach = function() {
                e.prototype.onDetach.call(this), _.forEach(this.cleanUp, function(e) {
                    return e()
                }), this.externalService.beQuickFriendlyMatchChangeVehicle(!1), this.clearMatchingState()
            }, t.prototype.switchMode = function(e, t) {
                this.hideModeExclusiveComponent(e), this.showModeExclusiveComponent(t)
            }, t.prototype.showModeExclusiveComponent = function(e) {
                switch (e) {
                    case "SPEEDTEAM":
                        this.gotoAndPlay(".id-withFriendContainer", "in", !0);
                        break;
                    case "PURSUITINDIVIDUAL":
                        this.gotoAndPlay(".id-pursuitTechContainer", "in", !0)
                }
            }, t.prototype.hideModeExclusiveComponent = function(e) {
                switch (e) {
                    case "SPEEDTEAM":
                        this.gotoAndPlay(".id-withFriendContainer", "out", !0);
                        break;
                    case "PURSUITINDIVIDUAL":
                        this.gotoAndPlay(".id-pursuitTechContainer", "out", !0)
                }
            }, t.prototype.update = function(e) {
                _.isEqual(e, this.reduxProps) || this.reduxProps.gameMode !== e.gameMode && this.switchMode(this.reduxProps.gameMode, e.gameMode)
            }, t.prototype.mapStateToProps = function(e) {
                return e.quickMatch
            }, t
        }(s.StageBinder);
    n.__decorate([s.autowired("$filter")], C.prototype, "$filter", void 0), n.__decorate([s.autowired("$transitions")], C.prototype, "$transitions", void 0), n.__decorate([s.autowired("$stateParams")], C.prototype, "$stateParams", void 0), n.__decorate([s.autowired("room2MatchService")], C.prototype, "room2MatchService", void 0), n.__decorate([s.autowired("room2MatchmakingService")], C.prototype, "room2MatchmakingService", void 0), n.__decorate([s.autowired("popupService")], C.prototype, "popupService", void 0), n.__decorate([s.autowired("externalService")], C.prototype, "externalService", void 0), n.__decorate([s.autowired("teamRoomService")], C.prototype, "teamRoomService", void 0), n.__decorate([s.autowired("stateService")], C.prototype, "stateService", void 0), n.__decorate([s.autowired("uistateNotifyService")], C.prototype, "uistateNotifyService", void 0), n.__decorate([s.autowired("vehicleService")], C.prototype, "vehicleService", void 0), n.__decorate([s.autowired("publisherService")], C.prototype, "publisherService", void 0), n.__decorate([s.autowired("playerService")], C.prototype, "playerService", void 0), n.__decorate([s.autowired("gameModeService")], C.prototype, "gameModeService", void 0), n.__decorate([s.autowired("tooltipService")], C.prototype, "tooltipService", void 0), n.__decorate([s.autowired("featureSetService")], C.prototype, "featureSet", void 0), t.MultiplayQuickMatchBinder = C
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(12),
        a = i(13),
        s = i(2),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-expVehicleTitle .id-textField", "EXPVEHICLE_GARAGE_INFORMATION"), this.on(".id-expVehicleTitle .id-tooltipIcon", s.MouseEventEx.MOUSE_OVER, this.showTooltipTrialVehicle.bind(this)), this.on(".id-expVehicleTitle .id-tooltipIcon", s.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.update = function(e) {
                var t = o.getRecentVehicle(),
                    i = t.manufacturerCode,
                    n = t.code,
                    r = t.ovr,
                    a = t.clazz,
                    s = t.grade,
                    c = t.favorite,
                    d = t.remainingCount;
                this.bindText(".id-manufacturerName", this.$filter("manufacturerName")(i)), this.bindText(".id-vehicleName", this.$filter("vehicleName")(n)), this.bindText(".id-ovr", r), this.bindText(".id-vehicleClass", a), o.isTrialVehicle(t) ? (this.visible(".id-expVehicleTitle", !0), this.visible(".id-expVehicleCount", !0), this.translate(".id-expVehicleCount .id-textField", "EXPVEHICLE_REMAININGCOUNT"), this.bindText(".id-expVehicleCount .id-currentNum", d)) : (this.visible(".id-expVehicleTitle", !1), this.visible(".id-expVehicleCount", !1)), this.gotoAndStop(".id-favoriteIcon", c ? "favorite" : "normal"), this.gotoAndStop(".id-vehicleGrade", "grade" + s)
            }, t.prototype.mapStateToProps = function(e) {
                return _.pick(e.player, "recent.vid")
            }, t.prototype.showTooltipTrialVehicle = function(e) {
                this.tooltipService.show(e, "topleft", a.TooltipType.BasicDetail, {
                    mainText: [{
                        title: "EXPVEHICLE_INFORMATION_TITLE"
                    }, {
                        description: "EXPVEHICLE_INFORMATION_DESC"
                    }],
                    subText: []
                }, {
                    marginTop: -4
                }, {}, "vehicles-trial-info-tooltip")
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.VehicleDetailNormal = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1266),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.addChildBinder(".ChangePursuitTechPopup", o.QuickMatchChangePursuitTechBinder)
            }, t
        }(r.StageBinder);
    t.QuickMatchPopupBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(312),
        o = i(214),
        a = i(6),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.confirm = function() {
                return this.gameModeService.storeLastPursuitTechs(this.items[0], this.items[1]), this.hide(), a.resolve()
            }, t.prototype.hide = function() {
                this.dispatch(o.hideChangePursuitTechPopup())
            }, t.prototype.mapStateToProps = function(e) {
                return e.quickMatch && e.quickMatch.changePursuitTechPopup || {}
            }, t
        }(r.ChangePursuitTechBinder);
    t.QuickMatchChangePursuitTechBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1268),
        o = i(1272);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/friendly/lobby/{gamemode}", 28, {
            gamemode: "",
            action: ""
        }).container({
            stages: {
                "multiplay-lobby": r.MultiplayLobbyBinder
            }
        }).dialog({
            stages: {
                "multiplay-lobby-popup": o.MultiplayLobbyPopupBinder
            }
        });
        e.state("root.menu.MultiplayLobby", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(1),
        a = i(28),
        s = i(2),
        c = i(615),
        d = i(1269),
        l = i(232),
        u = i(44),
        p = i(3),
        h = i(1270),
        f = i(1271),
        v = 180,
        m = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.roomList = [], t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "currentGameMode", {
                get: function() {
                    return p.store.getState().lobby.gameMode
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function() {
                var e = this,
                    t = _.map(this.mapFaces(".id-createButton", ".id-searchButton", ".id-quickButton", ".id-refreshButton"), function(e) {
                        return e
                    }),
                    i = t[0],
                    n = t[1],
                    r = t[2],
                    o = t[3];
                this.translate(i, "GAMEROOM_MAKING_ROOM"), this.translate(n, "GAMEROOM_ROOM_SEARCH"), this.translate(r, "GAMEROOM_QUICK_JOIN"), this.translate(o.$(".id-buttonName .comp-TextField"), "GAMEROOM_GAMELIST_REFRESH"), a.bindText(this.getFace(".id-refreshButton .id-count .comp-TextField"), v.toString()), i.on(s.MouseEventEx.CLICK, function() {
                    e.dispatch(l.showCreateRoomPopup(e.currentGameMode))
                }), n.on(s.MouseEventEx.CLICK, function() {
                    e.dispatch(l.showEnterRoomPopup())
                }), this.onClickSafe(r, function() {
                    return e.service.enterRoomQuickly(e.currentGameMode).then(function(t) {
                        return e.stateService.go("root.menu.MultiplayRoom", {
                            roomId: t.id
                        })
                    }).catch(function(t) {
                        u.showRoomErrorPopup(t, e.$filter, e.popupService), e.refreshLobbyAsync()
                    })
                }), this.onClickSafe(o, function() {
                    return e.refreshLobbyAsync().delay(1e3)
                }), this.modeTitleContainer = this.addChildBinder(".id-modeTitleContainer", h.ModeTitleContainer), this.addChildBinder(".id-gameModeButtonContainer", f.GameModeButtonContainer, "room"), this.hasSize(".id-gameModeButtonContainer", !0);
                for (var c = this.getFace(".RoomContainer"), p = 0; p < 12; p++) {
                    var m = c.$(".id-roomListItem" + (p + 1));
                    this.roomList.push(this.addChildBinder(m, d.Room))
                }
            }, t.prototype.onAddedToScene = function() {
                this.stage.gotoAndPlay("in");
                var e = this.featureSetService.isEnabled("PARTNERSHIPMARKETING");
                e && this.drawExternalImage(".MarketingArea", this.$filter("cdn_marketing")("marketing-type-02-01")), this.visible(".MarketingArea", e)
            }, t.prototype.onDetach = function() {
                this.refreshTimer && (clearInterval(this.refreshTimer), this.refreshTimer = null), this.dispatch(c.resetLobby())
            }, t.prototype.refreshLobbyAsync = function() {
                var e = this;
                return this.service.getRoomList(this.currentGameMode).then(function(t) {
                    e.installRefreshTimer();
                    for (var i = t.length, r = 0; r < 12; r++) r < i ? e.roomList[r].setProps(n.__assign({}, t[r], {
                        onError: function(t) {
                            return e.refreshLobbyAsync()
                        }
                    })) : e.roomList[r].setProps();
                    e.gotoAndPlay(".RoomContainer", "in")
                }).catch(function(e) {
                    return r.debug(e)
                })
            }, t.prototype.installRefreshTimer = function() {
                var e = this;
                this.refreshTimer && (clearInterval(this.refreshTimer), this.refreshTimer = null);
                var t = this.getFace(".id-refreshButton .id-count .comp-TextField"),
                    i = v;
                a.bindText(t, i.toString()), this.refreshTimer = setInterval(function() {
                    --i <= 0 && e.refreshLobbyAsync(), a.bindText(t, i.toString())
                }, 1e3)
            }, t.prototype.mapStateToProps = function(e) {
                return e.lobby
            }, t.prototype.update = function(e) {
                e.gameMode && (this.modeTitleContainer.setProps(e), this.refreshLobbyAsync())
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$filter")], m.prototype, "$filter", void 0), n.__decorate([o.autowired("$stateParams")], m.prototype, "$stateParams", void 0), n.__decorate([o.autowired("$rootScope")], m.prototype, "$rootScope", void 0), n.__decorate([o.autowired("room2Service")], m.prototype, "service", void 0), n.__decorate([o.autowired("stateService")], m.prototype, "stateService", void 0), n.__decorate([o.autowired("popupService")], m.prototype, "popupService", void 0), n.__decorate([o.autowired("tooltipService")], m.prototype, "tooltipService", void 0), n.__decorate([o.autowired("rewardService")], m.prototype, "rewardService", void 0), n.__decorate([o.autowired("featureSetService")], m.prototype, "featureSetService", void 0), t.MultiplayLobbyBinder = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(44),
        s = i(5),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.button = this.face, this.button.enabled = !1, this.onClickSafe(this.button, function() {
                    var t = e.staticdata.gameRoomData.roomWaitingTime;
                    return s(e.serverTimeService.time).diff(e.props.matchEndAt, "seconds") > t ? (e.popupService.draw("ConfirmPopup", {
                        title: "FRIENDLYMATCH_GAMEINVITE_LONGWAIT_TITLE",
                        description: "FRIENDLYMATCH_GAMEINVITE_LONGWAIT_DESC",
                        confirm: function() {
                            return e.props.onError()
                        }
                    }), r.resolve()) : e.service.enterRoom(e.props.roomId).then(function(t) {
                        return e.stateService.go("root.menu.MultiplayRoom", {
                            roomId: t.id
                        })
                    }).catch(function(t) {
                        a.showRoomErrorPopup(t, e.$filter, e.popupService), e.props && e.props.onError && e.props.onError()
                    })
                })
            }, t.prototype.update = function(e) {
                this.applyProps(e)
            }, t.prototype.applyProps = function(e) {
                if (_.isEmpty(e)) return void(this.button.enabled = !1);
                this.button.enabled = !0, this.translate(".id-title", e.title), this.translate(".id-total", "/" + e.maxSlotCount), this.translate(".id-current", "" + e.currentSlotCount);
                var t = this.staticdata.trackData,
                    i = t.getTrack(e.trackCode, e.isRandomTrack);
                this.translate(".id-trackName", i.nameCode), this.drawExternalImage(".id-externalImage", this.$filter("cdn_track")(i.code))
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([o.autowired("room2Service")], c.prototype, "service", void 0), n.__decorate([o.autowired("stateService")], c.prototype, "stateService", void 0), n.__decorate([o.autowired("staticdataLoaderService")], c.prototype, "staticdata", void 0), n.__decorate([o.autowired("popupService")], c.prototype, "popupService", void 0), n.__decorate([o.autowired("serverTimeService")], c.prototype, "serverTimeService", void 0), t.Room = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.modeTitleImgContainer = this.addChildBinder(".id-modeTitleImgContainer", a)
            }, t.prototype.update = function(e) {
                var t = e.gameMode;
                this.translate(".id-title", "GAMEROOM_GAMEMODE_SELECTION_" + t + "_NEW"), this.translate(".id-description", "FRIENDLYMATCH_MODESELECT_" + t + "_DESC"), this.gotoAndStop(".id-modeTitleImgContainer", t), this.gotoAndPlay(this.face, 0), this.modeTitleImgContainer.setProps(t)
            }, t
        }(r.Binder);
    t.ModeTitleContainer = o;
    var a = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.update = function(e) {
            this.gotoAndStop(this.face, e)
        }, t
    }(r.Binder)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(62),
        a = i(72),
        s = i(8),
        c = i(615),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.gameModeGroup = new a.ButtonGroup("channelGroup"), t.allGameModes = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                this.targetFeature = e, this.allGameModes = this.gameModeService.getGameModeList(this.targetFeature).map(function(e) {
                    return e.mode
                }), this.bindModeButtonsTo(), this.initModeButtons()
            }, t.prototype.onAddedToScene = function(e) {
                var t = this.$stateParams.gamemode || _.first(this.allGameModes),
                    i = this.allGameModes.indexOf(t);
                this.gameModeGroup.setSelectedButtonByIndex(i)
            }, t.prototype.bindModeButtonsTo = function() {
                var e = _.map(this.allGameModes, function(e, t) {
                    return {
                        gameMode: e,
                        order: t
                    }
                });
                this.gameModeButtons = this.addChildBinder(this.getFace(".id-gameModeButton"), o.CollectionBinder, {
                    instanceBinder: l,
                    keyProperty: "order"
                }), this.gameModeButtons.applyCollection(e)
            }, t.prototype.initModeButtons = function() {
                for (var e = this, t = (this.$filter("translate"), this), i = 0; i < this.allGameModes.length; i++) ! function(i) {
                    var n = t.gameModeButtons.binders[i].face;
                    t.hasSize(n, !0), t.translate(n.$(".id-modeName"), "GAMEROOM_GAMEMODE_SELECTION_" + t.allGameModes[i] + "_NEW"), t.translate(n.$(".id-description"), "GAMEROOM_GAMEMODE_SELECTION_" + t.allGameModes[i] + "_DESC"), t.gotoAndStop(n.$(".id-gameModeIconContainer"), t.allGameModes[i]), n.toggle = !0, n.on(s.EventEx.SELECT, function() {
                        n.selected && e.dispatch(c.selectGameMode(e.allGameModes[i]))
                    }), t.gameModeGroup.addButton(n)
                }(i)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], d.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("$stateParams")], d.prototype, "$stateParams", void 0), n.__decorate([r.autowired("gameModeService")], d.prototype, "gameModeService", void 0), t.GameModeButtonContainer = d;
    var l = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this.props,
                t = e.order,
                i = e.gameMode;
            this.hasSize(this.face, !0), this.classNames(this.face, ["mode" + t, i])
        }, t
    }(r.Binder)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1273),
        a = i(1274),
        s = i(1275),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                $(this.face.htmlElement).find("input").css({
                    "background-color": "",
                    color: "",
                    border: ""
                }), this.popups = {
                    create: this.addChildBinder(".id-createRoomPopup", o.CreateRoomBinder),
                    enter: this.addChildBinder(".id-enterRoomPopup", a.EnterRoomBinder),
                    password: this.addChildBinder(".id-roomPasswordPopup", s.RoomPasswordBinder)
                }
            }, t.prototype.mapStateToProps = function(e) {
                return e.multiplayLobby
            }, t.prototype.update = function(e) {
                var t = this.reduxProps,
                    i = this.popups,
                    n = i.create,
                    r = i.enter,
                    o = i.password;
                t.createRoomPopup !== e.createRoomPopup && n.setProps(e.createRoomPopup), t.enterRoomPopup !== e.enterRoomPopup && r.setProps(e.enterRoomPopup), t.roomPasswordPopup !== e.roomPasswordPopup && o.setProps(e.roomPasswordPopup)
            }, t
        }(r.StageBinder);
    t.MultiplayLobbyPopupBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(184),
        s = i(2),
        c = i(232),
        d = i(233),
        l = i(234),
        u = i(8),
        p = i(47),
        h = i(147),
        f = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.onConfirm = function() {
                    var e = t.getData();
                    return new r(function(i, n) {
                        if (t.publisherService.hasBanWord(e.title)) {
                            var r = new p.RequestError;
                            r.islandCode = p.IslandCodes.ROOM2, r.islandLevel = p.IslandLevel.APPLICATION, r.errorCode = h.ErrorCode.RoomTitleHasBanKeyword, n(r)
                        } else i()
                    }).then(function() {
                        return t.roomService.createRoom(e)
                    }).then(function(e) {
                        t.stateService.go("root.menu.MultiplayRoom", {
                            roomId: e.id
                        }), t.dispatch(c.hideCreateRoomPopup())
                    }).catch(function(e) {
                        if (e.islandCode === p.IslandCodes.ROOM2) switch (e.errorCode) {
                            case h.ErrorCode.RoomTitleHasBanKeyword:
                                return void t.alert("GAMEROOM_TITLE_FILTERED")
                        }
                        t.alert(e.errorCode + "," + e.message)
                    })
                }, t.onCancel = function() {
                    t.enableButton("> .id-hiddenCheck", !0), t.dispatch(c.hideCreateRoomPopup())
                }, t.onModeChange = function(e, i) {
                    t.updateMaxPlayer();
                    var n = t.modeDropdown.items,
                        r = n[i],
                        o = n[e],
                        a = t.convertFace("> .id-hiddenCheck");
                    if (o.isRefereeMode && !r.isRefereeMode) {
                        a.selected = !1, a.enabled = !1;
                        var s = t.convertFace(".id-passwordInput");
                        s.text = "", $(s.htmlElement).find("> .id-textField").prop("disabled", !0)
                    } else !o.isRefereeMode && r.isRefereeMode && (a.enabled = !0)
                }, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "alertTarget", {
                get: function() {
                    return ".id-nameDescription"
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "inputTarget", {
                get: function() {
                    return ".id-nameInput"
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.bindLabels = function() {
                var e = this;
                _.forEach([
                    ["title", "GAMEROOM_MAKING_ROOM"],
                    ["name", "GAMEROOM_ROOM_TITLE_MAKING_ONLY"],
                    ["mode", "GAMEROOM_GAMEMODE_SELECTION"],
                    ["max", "GAMEROOM_MAX_CAPACITY"],
                    ["class", "GAMEROOM_CLASS_AVAILABLE"],
                    ["passwordDescription", "GAMEROOM_NUMBER_ONLY"]
                ], function(t) {
                    var i = t[0],
                        n = t[1];
                    e.translate("> .id-" + i + "Label", n)
                }), this.translate("> .id-hiddenCheck > .id-nameLabel", "GAMEROOM_INVISIBLE_ROOM"), this.translate("> .id-confirmButton", "GAMEROOM_MAKING_ROOM")
            }, t.prototype.bindHandlers = function() {
                var e = this;
                this.on("> .id-hiddenCheck", s.MouseEventEx.CLICK, function() {
                    var t = e.convertFace("> .id-hiddenCheck");
                    t.selected = !t.selected, $(e.face.htmlElement).find(".id-passwordInput > .id-textField").prop("disabled", !t.selected)
                })
            }, t.prototype.getModeItems = function() {
                var e = this,
                    t = a.getFilter("translate"),
                    i = function(t) {
                        return e.gameModeService.getGameModeLocaleString(t)
                    },
                    n = this.gameModeService.getGameModeList("room").map(function(e) {
                        return {
                            text: t(i(e.mode)),
                            value: e.mode
                        }
                    });
                return this.featureSetService.isEnabled("ESPORTS") && (n = n.concat(["SPEEDINDIVIDUAL", "SPEEDTEAM"].map(function(e) {
                    return {
                        text: t(i(e) + "_ESPORTS"),
                        value: e,
                        isRefereeMode: !0
                    }
                }))), n
            }, t.prototype.bindDropdowns = function() {
                var e = a.getFilter("template");
                this.modeDropdown = this.convertFace("> .id-modeDropdown"), this.modeDropdown && (this.modeDropdown.items = this.getModeItems(), this.modeDropdown.on(u.EventEx.CHANGE, this.onModeChange)), this.maxDropdown = this.convertFace("> .id-maxDropdown"), this.maxDropdown && (this.maxDropdown.items = _.range(2, 9).map(function(t) {
                    return {
                        text: e({
                            count: t
                        }, "GAMEROOM_PEOPLE"),
                        value: t
                    }
                }), this.maxDropdown.selectedIndex = this.maxDropdown.items.length - 1);
                var t = this.convertFace("> .id-classDropdown");
                if (t) {
                    var i = ["ALL", "S", "A", "B", "C"],
                        n = a.getFilter("translate");
                    t.items = i.map(function(e) {
                        return {
                            text: n("ALL" === e ? "GAMEROOM_CLASS" : "GAMEROOM_CLASS_LIMITATION_" + e),
                            value: e
                        }
                    }), t.selectedIndex = 0
                }
            }, t.prototype.getData = function() {
                var e = this.convertFace(".id-nameInput");
                e.text = e.text.trim() || $(this.face.htmlElement).find(".id-nameInput > .id-textField").attr("placeholder");
                var t = e.text,
                    i = this.maxDropdown.selectedItem.value,
                    n = this.convertFace("> .id-classDropdown").selectedItem.value,
                    r = this.modeDropdown.selectedItem,
                    o = r.value,
                    a = r.isRefereeMode,
                    s = "-1";
                if (this.convertFace("> .id-hiddenCheck").selected) {
                    var c = this.convertFace(".id-passwordInput").text.trim();
                    c && (s = c)
                }
                return a && (s = String(_.random(1e3, 9999))), {
                    title: t,
                    maxPlayer: i,
                    maxVehicleClazz: n,
                    gameMode: o,
                    password: s,
                    isRefereeMode: a,
                    channel: "ALL"
                }
            }, t.prototype.updateConfirmButtonEnable = function() {
                this.convertFace(".id-confirmButton").enabled = !this.convertFace(".id-hiddenCheck").selected || this.convertFace(".id-passwordInput").text.length > 0
            }, t.prototype.updateMaxPlayer = function() {
                var e = this.gameModeService.getGameModeInfo(this.getData().gameMode),
                    t = a.getFilter("template"),
                    i = e.minPlayer,
                    n = e.maxPlayer,
                    r = "TEAM" === e.peerMode ? 2 : 1,
                    o = _.range(i, n + 1, r);
                this.maxDropdown.items = o.map(function(e) {
                    return {
                        text: t({
                            count: e
                        }, "GAMEROOM_PEOPLE"),
                        value: e
                    }
                }), this.maxDropdown.enabled = !e.isMaxPlayerFixed, this.maxDropdown.selectedIndex = o.indexOf(e.maxPlayer)
            }, t.prototype.onFaceReady = function() {
                var t = this;
                this.bindLabels(), this.bindHandlers(), this.bindDropdowns(), $(this.face.htmlElement).find(".id-nameInput > .id-textField").attr("placeholder", this.$filter("translate")("GAMEROOM_DEFAULTTITLE_" + _.sample([1, 2]))), this.convertFace(this.inputTarget).maxLength = 15;
                var i = this.convertFace(".id-passwordInput"),
                    n = $(this.face.htmlElement).find(".id-passwordInput > .id-textField"),
                    r = this.convertFace(".id-hiddenCheck");
                this.apply(i, l.NumericInput, {}), i.maxLength = 4, n.on("keydown", function(e) {
                    13 === e.keyCode && t.onConfirm(), 27 === e.keyCode && t.onCancel()
                }), n.on("keyup", function() {
                    return t.updateConfirmButtonEnable()
                }), r.on(s.MouseEventEx.CLICK, function() {
                    return t.updateConfirmButtonEnable()
                }), e.prototype.onFaceReady.call(this)
            }, t.prototype.update = function(t) {
                e.prototype.update.call(this, t), _.isEmpty(t) || (this.convertFace(".id-nameInput").text = t.title, this.convertFace("> .id-classDropdown").selectFirst(function(e) {
                    return e.value === t.maxVehicleClazz
                }), this.convertFace("> .id-hiddenCheck").selected = t.hidden, this.convertFace(".id-passwordInput").text = t.password, this.modeDropdown.selectedIndex = _.findIndex(this.modeDropdown.items, function(e) {
                    return e.value === t.mode
                }), $(this.face.htmlElement).find(".id-passwordInput > .id-textField").prop("disabled", !t.hidden), this.updateMaxPlayer(), this.updateConfirmButtonEnable())
            }, t
        }(d.InputPopupBinder);
    n.__decorate([o.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([o.autowired("stateService")], f.prototype, "stateService", void 0), n.__decorate([o.autowired("room2Service")], f.prototype, "roomService", void 0), n.__decorate([o.autowired("publisherService")], f.prototype, "publisherService", void 0), n.__decorate([o.autowired("gameModeService")], f.prototype, "gameModeService", void 0), n.__decorate([o.autowired("featureSetService")], f.prototype, "featureSetService", void 0), t.CreateRoomBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(16),
        o = i(232),
        a = i(233),
        s = i(234),
        c = i(44),
        d = i(147),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.onConfirm = function() {
                    var e = t.convertFace(t.inputTarget),
                        i = parseInt(e.text) || 0;
                    return t.roomService.enterRoom(i).then(function(e) {
                        t.dispatch(o.hideEnterRoomPopup()), t.stateService.go("root.menu.MultiplayRoom", {
                            roomId: e.id
                        })
                    }).catch(function(e) {
                        switch (e.errorCode) {
                            case d.ErrorCode.WrongRoomPasswd:
                                t.dispatch(o.showRoomPasswordPopup(i)), t.dispatch(o.hideEnterRoomPopup());
                                break;
                            case d.ErrorCode.AlreadyEnteredThisRoom:
                                t.dispatch(o.hideEnterRoomPopup()), t.stateService.go("root.menu.MultiplayRoom", {
                                    roomId: i
                                });
                                break;
                            default:
                                var n = c.getRoomErrorDescription(e, t.$filter);
                                t.alert(n || e.errorCode + "," + e.message)
                        }
                    })
                }, t.onCancel = function() {
                    t.dispatch(o.hideEnterRoomPopup())
                }, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "snoozeMessage", {
                get: function() {
                    return "GAMEROOM_UNIQUE_NUMBER_NEEDED"
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function() {
                var t = this;
                _.forEach([
                    ["titleLabel", "GAMEROOM_SEARCH_ROOM_NUMBER"],
                    ["subtitleLabel", this.snoozeMessage],
                    ["confirmButton", "GAMEROOM_ENTERING"]
                ], function(e) {
                    var i = e[0],
                        n = e[1];
                    t.translate(".id-" + i, n)
                });
                var i = this.convertFace(this.inputTarget),
                    n = $(i.htmlElement).find(".id-textField");
                i.maxLength = 6, n.on("keyup", function() {
                    t.convertFace(t.confirmButtonTarget).enabled = i.text.length > 0
                }), this.apply(this.inputTarget, s.NumericInput, {}), e.prototype.onFaceReady.call(this)
            }, t
        }(a.InputPopupBinder);
    n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([r.autowired("room2Service")], l.prototype, "roomService", void 0), n.__decorate([r.autowired("stateService")], l.prototype, "stateService", void 0), t.EnterRoomBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(16),
        o = i(232),
        a = i(233),
        s = i(234),
        c = i(44),
        d = i(147),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.onConfirm = function() {
                    var e = t.convertFace(t.inputTarget),
                        i = e.text || "-1";
                    if (i) return t.roomService.enterRoom(t.props.roomId, i).then(function(e) {
                        t.dispatch(o.hideRoomPasswordPopup()), t.stateService.go("root.menu.MultiplayRoom", {
                            roomId: e.id
                        })
                    }).catch(function(e) {
                        switch (e.errorCode) {
                            case d.ErrorCode.FailedToFindRoom:
                                t.alert("GAMEROOM_CANNOT_FOUND_ROOM");
                                break;
                            case d.ErrorCode.WrongRoomPasswd:
                                t.alert("GAMEROOM_WRONG_PASSWORD");
                                break;
                            case d.ErrorCode.NotEnoughSlot:
                            case d.ErrorCode.WrongSlotNumber:
                                t.alert("GAMEROOM_CAPACITY_EXCEEDED");
                                break;
                            case d.ErrorCode.AlreadyEnteredThisRoom:
                                t.dispatch(o.hideRoomPasswordPopup()), t.stateService.go("root.menu.MultiplayRoom", {
                                    roomId: t.props.roomId
                                });
                                break;
                            default:
                                var i = c.getRoomErrorDescription(e, t.$filter);
                                t.alert(i || e.errorCode + "," + e.message)
                        }
                    })
                }, t.onCancel = function() {
                    t.dispatch(o.hideRoomPasswordPopup())
                }, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "snoozeMessage", {
                get: function() {
                    return "GAMEROOM_PASSWORD_NEEDED"
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function() {
                var t = this;
                _.forEach([
                    ["titleLabel", "GAMEROOM_INPUT_PASSWORD"],
                    ["subtitleLabel", this.snoozeMessage]
                ], function(e) {
                    var i = e[0],
                        n = e[1];
                    t.translate(".id-" + i, n)
                });
                var i = this.convertFace(this.inputTarget),
                    n = $(i.htmlElement).find(".id-textField");
                i.maxLength = 4, n.on("keyup", function() {
                    t.convertFace(t.confirmButtonTarget).enabled = i.text.length > 0
                }), this.apply(this.inputTarget, s.NumericInput, {}), e.prototype.onFaceReady.call(this)
            }, t.prototype.update = function(t) {
                e.prototype.update.call(this, t), _.isEmpty(t) || (this.convertFace(this.inputTarget).text = t.password, this.convertFace(this.confirmButtonTarget).enabled = t.password.length > 0)
            }, t
        }(a.InputPopupBinder);
    n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([r.autowired("room2Service")], l.prototype, "roomService", void 0), n.__decorate([r.autowired("stateService")], l.prototype, "stateService", void 0), t.RoomPasswordBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(63),
        r = i(12),
        o = i(616),
        a = i(619),
        s = i(11),
        c = i(3);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new s.StateDefinition("/friendly/room/:roomId", 29, {
            roomId: ""
        }).container({
            stages: {
                "multiplay-room": o.MultiplayRoom
            },
            resolve: {
                rooms: ["$stateParams", "room2Service", function(e, t) {
                    return t.prepareRoomIfNeeded(parseInt(e.roomId, 10))
                }],
                vehiclePrice: ["vehiclePriceDataService", function(e) {
                    e.getLatestPriceData(r.getAllVehicles()).then(function(e) {
                        return c.store.dispatch(n.updatePrices(e))
                    })
                }]
            }
        }).dialog({
            stages: {
                "multiplay-room-popup": a.MultiplayRoomPopupBinder
            }
        });
        e.state("root.menu.MultiplayRoom", t)
    }]), i(616)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(1),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                if (!_.isEmpty(e)) {
                    var t = r.Room.ChannelEnum[e.type],
                        i = this.rewardService.getLicenseChannelRewardRate(t);
                    this.translate(".id-channel", "GAMEROOM_CREATE_CHANNEL_" + e.type), this.template(".id-description", "GAMEROOM_REWARD_RATE", {
                        count: Math.round(100 * i.sp)
                    }), this.gotoAndStop(".id-licenseIcon", e.type.toString().toLowerCase())
                }
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("rewardService")], a.prototype, "rewardService", void 0), t.ChannelBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(2),
        a = i(1),
        s = i(13),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-titleLabel", "GAMEROOM_ROOM_TITLE"), this.translate(".id-numberLabel", "GAMEROOM_ROOM_UNIQUE_NUMBER");
                var t = this.getFace(".id-hiddenContainer");
                t.on(o.MouseEventEx.MOUSE_OVER, function(t) {
                    var i = e.props.password;
                    if ("-1" !== i) {
                        var n = e.getFace(".id-hiddenContainer .comp-Bitmap");
                        e.tooltipService.show(n, "bottom", s.TooltipType.BasicTitled, {
                            title: e.$filter("translate")("GAMEROOM_TOOLTIP_PASSWORD"),
                            description: i
                        }, {}, {}, "passwordTooltip")
                    }
                }), t.on(o.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                })
            }, t.prototype.update = function(e) {
                var t = e.title,
                    i = e.id,
                    n = e.gameMode,
                    r = e.password;
                this.bindText(".id-titleTextField", t), this.bindText(".id-numberTextField", i), this.translate(".id-mode", "GAMEROOM_MODE_" + n), this.gotoAndStop(".id-hiddenContainer", "-1" === r ? "normal" : "hidden"), this.translate(".id-hiddenContainer .id-label", "-1" === r ? "GAMEROOM_OPEN_ROOM" : "GAMEROOM_CLOSED_ROOM")
            }, t
        }(r.Binder);
    n.__decorate([a.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([a.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.TopContainerBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(61),
        a = i(1),
        s = i(184),
        c = i(2),
        d = i(3),
        l = i(61),
        u = i(621),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.visible = !1;
                var t = this.getFace(".id-trackTileListContainer");
                this.translate(".id-confirmButton", "GAMEROOM_CHANGE_CONFIRM"), this.translate(".id-cancelButton", "GAMEROOM_CHANGE_CANCEL"), this.onClickSafe(".id-confirmButton", function() {
                    var t = d.store.getState().room.changeTrackPopup.selected;
                    if (t) {
                        var i = e.staticdata.trackData.getRandomTrack();
                        return e.roomService.setTrack(i.code === t, t).then(function() {
                            return e.dispatch(o.hideChangeTrackPopup())
                        })
                    }
                    return r.resolve(function() {
                        return e.dispatch(o.hideChangeTrackPopup())
                    })
                }), this.on(".id-cancelButton", c.MouseEventEx.CLICK, function() {
                    e.dispatch(o.hideChangeTrackPopup())
                }), this.tracksBinder = this.addChildBinder(t, u.TrackList, {
                    itemCountPerPage: 9,
                    rowSize: 3
                }), this.on(t, "selected", function(t) {
                    e.dispatch(o.setChangeTrackPopupTrack(t.code))
                })
            }, t.prototype.ensureInitted = function(e) {
                var t = this,
                    i = e.changeTrackPopupState;
                if (!i) return !1;
                var n = i.tracks,
                    r = this.convertFace(".id-filter");
                if (r && _.isEmpty(r.items)) {
                    var a = _(n).values().map("difficultyCode").uniq().without("TRACK_DIFFICULTY_RANDOM").concat(l.ALL_DIFFICULTY).sort().map(function(e) {
                        return {
                            text: s.getFilter("translate")(e),
                            difficultyCode: e
                        }
                    }).value();
                    r.items = a, r.onClick = function(e) {
                        var i = r.items[e];
                        t.dispatch(o.setChangeTrackPopupFilter(i.difficultyCode))
                    }
                }
                return !0
            }, t.prototype.update = function(e) {
                if (_.isEmpty(e.changeTrackPopupState)) return this.gotoAndPlay(this.face, "out", !0);
                if (this.ensureInitted(e)) {
                    var t = e.changeTrackPopupState,
                        i = t.tracks,
                        n = t.indices,
                        r = t.selected,
                        o = t.gameMode,
                        a = t.difficultyCode,
                        s = this.reduxProps.changeTrackPopupState;
                    this.bindHtml(".id-titleLabel", this.gameModeService.getTrackListTitleL10nString(o));
                    var c = this.convertFace(".id-filter");
                    if (c && a && (!s || a !== s.difficultyCode)) {
                        var d = _.findIndex(c.items, {
                            difficultyCode: a
                        });
                        c.selectedIndex !== d && (c.selectedIndex = d)
                    }
                    if (n && (!s || n !== s.indices)) {
                        var l = _.map(n, function(e) {
                            return i[e]
                        });
                        this.tracksBinder.setProps({
                            tracks: l,
                            selected: r
                        }), this.enableButton(".id-confirmButton", n.length > 0)
                    }
                    return this.face.visible = !0, this.gotoAndPlay(this.face, "in", !0)
                }
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    changeTrackPopupState: e.room.changeTrackPopup
                }
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("staticdataLoaderService")], p.prototype, "staticdata", void 0), n.__decorate([a.autowired("room2Service")], p.prototype, "roomService", void 0), n.__decorate([a.autowired("gameModeService")], p.prototype, "gameModeService", void 0), t.ChangeTrackBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(624);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/multiplay/reward", 40).container({
            stages: {
                "match-reward": r.MultiplayRewardBinder
            }
        });
        e.state("root.MultiplayReward", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(6),
        a = i(131),
        s = i(3),
        c = i(1),
        d = i(2),
        l = i(27),
        u = i(37),
        p = i(235),
        h = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.igrGainIndex = -1, t.specialCardIndex = -1, t.gain = [], t.lost = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.featureType = s.store.getState().match.match.featureType, this.translate(".id-TipTextField .id-textField", "FRIENDLYMATCH_REWARD_SELECTREWARD"), this.cardBoxes = this.face.$$(".RewardCardContainer"), this.itemCardBinders = []
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.on(this.face, "showRewardArea", function() {
                    e.showRewardArea()
                })
            }, t.prototype.hasReward = function(e) {
                return !(e.isMatchAbandoned || e.isRetired || e.isMatchExpired || p.isObserver(e))
            }, t.prototype.update = function(e) {
                var t = this;
                this.hasReward(e) || this.translate(".id-TipTextField .id-textField", "FRIENDLYMATCH_REWARD_NOREWARD");
                for (var i = 0, n = this.cardBoxes; i < n.length; i++) {
                    var r = n[i];
                    this.hasReward(e) ? (r.$(".id-CardNormal").mouseEnabled = !1, r.$(".id-CardPc").mouseEnabled = !1) : this.gotoAndStop(r, "disable")
                }
                if ("picking" === e.pickState && this.gain.length > 0 && (this.selectedSlot = _.isUndefined(this.selectedSlot) || -1 === this.selectedSlot ? _.random(3) : this.selectedSlot, this.gotoAndPlay(this.cardBoxes[this.selectedSlot], "over"), this.pickCard()), "autopick" === e.pickState) {
                    var a = _.clone(this.gain);
                    o.map(a, function(e) {
                        return t.selectedSlot = "IGR" !== e.provider || -1 === t.specialCardIndex ? _.sample(t.candidateSlots) : t.specialCardIndex, t.gotoAndPlay(t.cardBoxes[t.selectedSlot], "over"), t.pickCard()
                    }, {
                        concurrency: 1
                    })
                }
                this.prevPickState = e.pickState
            }, t.prototype.allocateCandidateSlots = function() {
                var e = this.publisherService.isIgr && -1 !== this.specialCardIndex ? 3 : 4;
                this.candidateSlots = _.range(0, e)
            }, t.prototype.disableObjCard = function(e, t) {
                e.removeAllListeners(), t ? e.$(".id-CardPc").removeAllListeners() : e.$(".id-CardNormal").removeAllListeners()
            }, t.prototype.disableAllCards = function() {
                var e = this;
                this.cardBoxes.forEach(function(t, i) {
                    i === e.specialCardIndex ? e.disableObjCard(t, !0) : e.disableObjCard(t, !1)
                })
            }, t.prototype.disableCard = function(e) {
                this.cardBoxes[e].removeAllListeners(), this.specialCardIndex === e ? this.cardBoxes[e].$(".id-CardPc").removeAllListeners() : this.cardBoxes[e].$(".id-CardNormal").removeAllListeners()
            }, t.prototype.disableCandidateCards = function() {
                this.candidateSlots.forEach(this.disableCard.bind(this))
            }, t.prototype.showRewardArea = function() {
                var e, t = this,
                    i = this.getDefaultLabel();
                this.antibotService.isKicking || "ranked" !== this.featureType && "festival" !== this.featureType || (i = "rankMatch", e = this.getDefaultLabel());
                var n = this.getWarningLabels(this.props);
                n ? ("rankMatch" === i ? e = "addictionPrevention" : i = "addictionPrevention", this.translate(".id-title", n.title), this.translate(".id-description", n.desc), s.store.dispatch(a.updatePickState("picked"))) : this.props.isMatchAbandoned || this.props.isRetired || this.initRewardCards(), this.gotoAndPlay(this.face, i), e && this.face.once("stop", function() {
                    "rankMatch" === t.face.currentLabel && t.gotoAndPlay(t.face, e)
                })
            }, t.prototype.getDefaultLabel = function() {
                return "friendlyMatch"
            }, t.prototype.getWarningLabels = function(e) {
                if (this.publisherService.isNoReward()) return {
                    title: "FRIENDLYMATCH_REWARD_FATIUGE",
                    desc: "FREINDLYMATCH_REWARD_FATIGUE_GUIDE"
                };
                switch (this.getAbuseStatus()) {
                    case r.Reward.AbusePlayerStatus.MODE_CONDITION_VIOLATION:
                        return {
                            title: "REWARD_SCREEN_ABUSING_HANGON_TITLE", desc: "REWARD_SCREEN_ABUSING_HANGON_DESC"
                        };
                    case r.Reward.AbusePlayerStatus.EXCEED_MATCH_COUNT:
                        return {
                            title: "REWARDSCREEN_LIMIT_PLAYCOUNT_TITLE", desc: "REWARDSCREEN_LIMIT_PLAYCOUNT_DESC"
                        }
                }
                return this.props.isMatchExpired ? {
                    title: "REWARD_SCREEN_OVERTIME_TITLE",
                    desc: "REWARD_SCREEN_OVERTIME_DESC"
                } : this.antibotService.isKicking ? {
                    title: "REWARD_SCREEN_ANTIBOT_TITLE",
                    desc: "REWARD_SCREEN_ANTIBOT_DESC"
                } : void 0
            }, t.prototype.getAbuseStatus = function() {
                var e = this.props,
                    t = _.find(e.matchResult.players, function(e) {
                        return e.pid === s.store.getState().player.id
                    });
                return t ? t.abuseStatus : _.get(this.props.matchResult, "game.abuseStatus", r.Reward.AbusePlayerStatus.NON_ABUSE_PLAYER)
            }, t.prototype.initRewardCards = function() {
                var e = this;
                this.gain = this.props.reward.card.items.gain.slice(), this.lost = this.props.reward.card.items.lost.slice(), this.gain.forEach(function(t, i) {
                    "IGR" === t.provider && (e.igrGainIndex = i)
                }), this.publisherService.isIgr && -1 !== this.igrGainIndex && (this.specialCardIndex = this.cardBoxes.length - 1), this.cardBoxes.forEach(function(t, i) {
                    var n;
                    if (e.publisherService.isIgr && e.specialCardIndex === i) {
                        var r = t.$(".id-RewardCard");
                        e.gotoAndStop(r, "pc"), n = ".id-CardPc"
                    } else n = ".id-CardNormal";
                    var o = [n, ".id-itemCard"].join(" "),
                        c = t.$(o),
                        u = t.$(n);
                    e.itemCardBinders.push(e.addChildBinder(c, l.ItemCardBinder)), u.on(d.MouseEventEx.CLICK, function(t) {
                        e.selectedSlot = i, e.publisherService.isIgr && -1 !== e.igrGainIndex ? i === e.specialCardIndex ? s.store.dispatch(a.updatePickState("picking", e.gain[e.igrGainIndex])) : s.store.dispatch(a.updatePickState("picking", e.gain[1 - e.igrGainIndex])) : s.store.dispatch(a.updatePickState("picking", e.gain[0]))
                    }), u.on(d.MouseEventEx.MOUSE_OVER, function(i) {
                        e.gotoAndPlay(t, "over"), e.gotoAndPlay(u, "over")
                    }), u.on(d.MouseEventEx.MOUSE_OUT, function() {
                        e.gotoAndPlay(t, "out"), e.gotoAndPlay(u, "out")
                    })
                }), this.allocateCandidateSlots()
            }, t.prototype.pickCard = function() {
                var e = this;
                return this.bindItemCard(), this.disableCard(this.selectedSlot), this.openCard(this.selectedSlot, !0), this.audioService.get(u.FxAudioCode.Card_Flip_Single).play(), this.candidateSlots = _.pull(this.candidateSlots, this.selectedSlot), -1 !== this.specialCardIndex && -1 !== this.igrGainIndex ? this.selectedSlot === this.specialCardIndex ? (_.pullAt(this.gain, this.igrGainIndex), this.igrGainIndex = -1) : (_.pullAt(this.gain, 1 - this.igrGainIndex), this.igrGainIndex = 0, this.disableCandidateCards()) : (this.gain.shift(), this.disableCandidateCards()), this.selectedSlot = -1, this.gain.length > 0 ? o.resolve() : (this.disableAllCards(), o.delay(1e3).then(function() {
                    e.openCandidateCards()
                }).delay(300).then(function() {
                    0 === e.gain.length && s.store.dispatch(a.updatePickState("picked"))
                }))
            }, t.prototype.bindItemCard = function() {
                var e = this.selectedSlot === this.specialCardIndex && -1 !== this.igrGainIndex ? this.igrGainIndex : 0,
                    t = this.itemCardBinders[this.selectedSlot];
                t && t.setProps({
                    info: {
                        type: this.gain[e].type,
                        code: this.gain[e].code,
                        count: this.gain[e].count,
                        gain: !0
                    },
                    mouseDisabled: !0
                })
            }, t.prototype.openCard = function(e, t) {
                var i = this.cardBoxes[e],
                    n = i.$(e === this.specialCardIndex ? ".id-CardPc" : ".id-CardNormal");
                this.gotoAndPlay(n, "click"), this.gotoAndPlay(n.$(".id-selectedEffect"), t ? "selected" : "default")
            }, t.prototype.openCandidateCards = function() {
                var e = this;
                this.candidateSlots.forEach(function(t, i) {
                    e.itemCardBinders[t].setProps({
                        info: {
                            type: e.lost[i].type,
                            code: e.lost[i].code,
                            count: e.lost[i].count
                        },
                        mouseDisabled: !0
                    }), e.openCard(t, !1), e.cardBoxes[t].$(".id-CardNormal").htmlElement.classList.add("blur")
                }), this.getFace(".id-TipTextField").visible = !1, this.audioService.get(u.FxAudioCode.Card_Flip_Multiple).play()
            }, t
        }(c.Binder);
    n.__decorate([c.autowired("publisherService")], h.prototype, "publisherService", void 0), n.__decorate([c.autowired("audioService")], h.prototype, "audioService", void 0), n.__decorate([c.autowired("antibotService")], h.prototype, "antibotService", void 0), t.MultiplayRewardCardBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1),
        a = i(235),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-vehicleInfo .id-title", "FRIENDLYMATCH_REWARD_VEHICLEINFO")
            }, t.prototype.update = function(e) {
                var t = e.matchResult,
                    i = this.staticdata.trackData,
                    n = i.getTrack(t.trackCode),
                    r = e.teamBattleResult;
                this.bindTrackInfo(n), this.bindVehicleInfo(e), this.bindResultInfo(e, r)
            }, t.prototype.bindTrackInfo = function(e) {
                this.translate(".id-trackInfo .id-trackName", e.nameCode), this.translate(".id-trackInfo .id-trackLevel", e.difficultyCode), this.drawExternalImage(".id-trackInfo .id-trackExternalImage", this.$filter("cdn_track")(e.code)), this.drawExternalImage(".id-trackInfo .id-trackMapExternalImage", this.$filter("cdn_track_map")(e.code))
            }, t.prototype.bindVehicleInfo = function(e) {
                if (a.isObserver(e)) return this.visible(".id-vehicleInfo", !1);
                var t = _.find(e.matchResult.players, {
                        pid: this.storeState.player.id
                    }),
                    i = t.vehicle,
                    n = this.vehicleDataService.getVehicleData(i.code),
                    o = r.default.calculateOVR(i.status);
                this.bindText(".id-vehicleNameTextField", this.$filter("vehicleName")(i.code)), this.bindText(".OVRNum .comp-TextField", o + ""), this.bindText(".id-vehicleClass .id-textField", n.clazz), this.bindText(".id-manufacturer .id-textField", this.$filter("manufacturerName")(n.manufacturerCode)), this.gotoAndStop(".id-vehicleGrade", "grade" + i.grade)
            }, t.prototype.bindResultInfo = function(e, t) {
                if (a.isObserver(e)) return this.translate(".id-raceResult", "MATCHREWARD_OBSERVER");
                var i = e.matchResult,
                    n = i.players,
                    r = i.gameMode,
                    o = _.find(n, {
                        pid: this.storeState.player.id
                    });
                if (this.translate(".id-raceInfo", this.gameModeService.getRoomCoreModeLocaleString(r)), e.isMatchAbandoned) this.translate(".id-raceResult", "INGAME_ESCMENU_RETIRETITLE");
                else if (this.gameModeService.isTeamMode(r)) this.translate(".id-raceResult", t.isLocalPlayerWinner ? "SPEEDTEAMMATCH_MATCHREWARD_WIN" : "SPEEDTEAMMATCH_MATCHREWARD_LOSE");
                else if ("FOXHUNTINGINDIVIDUAL" === r) this.translate(".id-raceResult", 1 === o.rank ? "INDIVIDUALMATCH_MATCHREWARD_WIN" : "INDIVIDUALMATCH_MATCHREWARD_LOSE");
                else if (o.retire) this.translate(".id-raceResult", "BEPLAY_MAIN_RETIRE");
                else {
                    var s = this.$filter("template")({
                        value: o.rank
                    }, "RANKEDMATCH_REWARD_EVENT_RESULT_RANKING");
                    this.bindText(".id-raceResult", this.$filter("translate")("GAMEROOM_INDIVIDUAL_GAME") + " " + s)
                }
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([o.autowired("vehicleDataService")], s.prototype, "vehicleDataService", void 0), n.__decorate([o.autowired("staticdataLoaderService")], s.prototype, "staticdata", void 0), n.__decorate([o.autowired("gameModeService")], s.prototype, "gameModeService", void 0), t.MultiplayRewardInfoBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(6),
        a = i(131),
        s = i(1),
        c = i(2),
        d = i(61),
        l = i(4),
        u = i(235),
        p = i(311),
        h = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.lockedButton = {}, t.primaryLabel = "", t.altLabel = "OPENWORLD_GOTOOPENWORLD", t.altAction = function() {
                    return t.clearService().then(function() {
                        return t.exitScreen("root.menu.Openworld")
                    })
                }, t.onPrimary = function() {
                    return t.chatBinder && (t.chatBinder.setProps({}), t.chatBinder.face.visible = !1), t.enableButtons(!1), t.primaryAction().catch(function() {
                        return t.enableButtons(!0)
                    })
                }, t.onAlternative = function() {
                    return t.chatBinder && (t.chatBinder.setProps({}), t.chatBinder.face.visible = !1), t.enableButtons(!1), t.altAction().catch(function() {
                        return t.enableButtons(!0)
                    })
                }, t
            }
            return n.__extends(t, e), t.prototype.clearService = function() {
                return o.resolve()
            }, t.prototype.enableButtons = function(e) {
                for (var t = 0, i = ["gray", "green", "blue"]; t < i.length; t++) {
                    var n = i[t],
                        r = this.convertFace(".id-" + n + "Button");
                    r && !this.lockedButton[".id-" + n + "Button"] && (r.enabled = e)
                }
            }, t.prototype.onKicked = function() {
                this.primaryAction !== this.altAction && (this.lockedButton[".id-blueButton"] = !0)
            }, t.prototype.onFaceReady = function() {
                var e = this.antibotService.isKicking;
                this.storeState.reward.isMatchAbandoned || this.storeState.reward.isMatchExpired;
                this.defer = l.default.defer(), e && (this.primaryLabel = this.altLabel, this.primaryAction = this.altAction), this.translate(".id-outLabel", "FRIENDLYMATCH_REWARD_EXITING"), this.translate(".id-blueButton", this.primaryLabel), this.on(".id-blueButton", c.MouseEventEx.CLICK, this.onPrimary), this.translate(".id-greenButton", this.altLabel), this.on(".id-greenButton", c.MouseEventEx.CLICK, this.onAlternative), this.enableButtons(!0), this.gotoAndPlay(this.face, e ? "blueIn" : "greenBlueIn")
            }, t.prototype.onAddedToScene = function() {
                this.installTimer()
            }, t.prototype.installTimer = function() {
                var e = this,
                    t = this.storeState.match.match.gameMode,
                    i = p.checkGameModeIsManagerMode(t) ? r.Constants.MatchRewardWaitTimeForManagerMode : r.Constants.MatchRewardWaitTime;
                this.exitTimer = setInterval(function() {
                    if (i <= 0) return e.onPrimary();
                    e.template(".id-inLabel", "FRIENDLYMATCH_REWARD_COUNTDOWN", {
                        rewardcountdown: --i
                    })
                }, 1e3)
            }, t.prototype.exitScreen = function(e, t) {
                var i = this,
                    n = this.antibotService.isKicking,
                    r = this.storeState.reward;
                return !("unpicked" === r.pickState || this.publisherService.isIgr && "picking" === r.pickState) || this.publisherService.isNoReward() || r.isMatchAbandoned || r.isMatchExpired || u.isObserver(r) || this.dispatch(a.updatePickState("autopick")), this.externalService.beExitMultiplayReward(), n && this.antibotService.endPunishKickChannel(), clearInterval(this.exitTimer), this.defer.promise.then(function() {
                    var n = i.face;
                    return i.gotoAndPlay(n, n.currentLabel.replace("In", "Out")), i.worldChatService.sendleaveMatch(), i.stateService.go(e, t)
                })
            }, t.prototype.isInvalidMatch = function() {
                return this.storeState.reward.isMatchAbandoned || this.storeState.reward.isMatchExpired
            }, t.prototype.couldExit = function() {
                this.defer.resolve()
            }, t.prototype.setChatBinder = function(e) {
                this.chatBinder = e
            }, t
        }(s.Binder);
    n.__decorate([s.autowired("stateService")], h.prototype, "stateService", void 0), n.__decorate([s.autowired("publisherService")], h.prototype, "publisherService", void 0), n.__decorate([s.autowired("antibotService")], h.prototype, "antibotService", void 0), n.__decorate([s.autowired("externalService")], h.prototype, "externalService", void 0), n.__decorate([s.autowired("worldChatService")], h.prototype, "worldChatService", void 0);
    var f = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.primaryLabel = "1ON1_REWARD_MAIN", t
        }
        return n.__extends(t, e), t.prototype.clearService = function() {
            return this.ranked2Service.exit()
        }, t.prototype.onFaceReady = function() {
            var t = this;
            this.primaryAction = function() {
                return t.clearService().then(function() {
                    return t.exitScreen(t.ranked2Service.getMainStateName())
                })
            }, e.prototype.onFaceReady.call(this)
        }, t
    }(h);
    n.__decorate([s.autowired("ranked2Service")], f.prototype, "ranked2Service", void 0);
    var v = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.primaryLabel = "FRIENDLYMATCH_REWARD_WAITINGROOM", t
        }
        return n.__extends(t, e), t.prototype.clearService = function() {
            return this.room2Service.exitRoom()
        }, t.prototype.onFaceReady = function() {
            var t = this;
            if (this.isInvalidMatch()) {
                this.primaryLabel = "FRIENDLYMATCH_REWARD_EXIT";
                var i = this.storeState.match.match.gameMode;
                this.primaryAction = function() {
                    return t.clearService().then(function() {
                        return t.exitScreen("root.menu.MultiplayLobby", {
                            gamemode: i
                        })
                    })
                }
            } else {
                var n = this.storeState.room.room.id;
                this.primaryAction = function() {
                    return t.exitScreen("root.menu.MultiplayRoom", {
                        roomId: n
                    }).then(function() {
                        return t.room2Service.reEnterRoom()
                    })
                }
            }
            e.prototype.onFaceReady.call(this)
        }, t
    }(h);
    n.__decorate([s.autowired("room2Service")], v.prototype, "room2Service", void 0);
    var m = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.primaryLabel = "FRIENDLYMATCH_REWARD_MATCHMAKING", t
        }
        return n.__extends(t, e), t.prototype.clearService = function() {
            return this.room2MatchmakingService.end()
        }, t.prototype.gotoQuickMatch = function() {
            var e = this,
                t = this.storeState.match.match.gameMode;
            return function() {
                return e.clearService().then(function() {
                    return e.exitScreen("root.menu.MultiplayQuickMatch", {
                        gamemode: t
                    })
                })
            }
        }, t.prototype.onFaceReady = function() {
            this.primaryAction || (this.primaryAction = this.gotoQuickMatch()), e.prototype.onFaceReady.call(this)
        }, t
    }(h);
    n.__decorate([s.autowired("room2MatchmakingService")], m.prototype, "room2MatchmakingService", void 0);
    var g = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.clearService = function() {
            return this.teamRoomService.leaveTeam(), e.prototype.clearService.call(this)
        }, t.prototype.onFaceReady = function() {
            var t = this;
            if (this.isInvalidMatch()) this.primaryAction = this.gotoQuickMatch();
            else {
                this.primaryLabel = "FRIENDLYMATCH_REWARD_WAITINGROOM";
                var i = this.storeState.room.teamId;
                this.primaryAction = function() {
                    return t.room2MatchmakingService.end().then(function() {
                        return t.exitScreen("root.menu.MultiplayTeamRoom", {
                            roomId: i
                        })
                    }).then(function() {
                        return t.teamRoomService.setReady(!1)
                    })
                }
            }
            e.prototype.onFaceReady.call(this)
        }, t
    }(m);
    n.__decorate([s.autowired("teamRoomService")], g.prototype, "teamRoomService", void 0);
    var y = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.primaryLabel = "MINIFESTIVAL_MATCH_REWARD_EXIT", t
        }
        return n.__extends(t, e), t.prototype.clearService = function() {
            return this.festivalService.exitLobby()
        }, t.prototype.onFaceReady = function() {
            var t = this;
            this.primaryAction = function() {
                return t.clearService().then(function() {
                    return t.exitScreen("root.menu.ConditionLimitedMatchLobby")
                })
            }, e.prototype.onFaceReady.call(this)
        }, t
    }(h);
    n.__decorate([s.autowired("festivalService")], y.prototype, "festivalService", void 0);
    var S = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.onKicked = _.once(function() {
                t.popupService.drawConfirm("GAMEROOM_ERROR_POPUP_TITLE", "GAMEROOM_KICKED"), t.action.onKicked(), t.dispatch(d.clearKickState())
            }), t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.prepareAction()
        }, t.prototype.prepareAction = function() {
            var e, t = this.storeState,
                i = t.match.match,
                n = t.room,
                r = i.featureType,
                o = "quick" === r && void 0 !== n && void 0 !== n.teamId;
            switch (r) {
                case "room":
                    e = v;
                    break;
                case "quick":
                    e = o ? g : m;
                    break;
                case "ranked":
                    e = f;
                    break;
                case "festival":
                    e = y
            }
            this.action = this.addChildBinder(".id-buttons", e)
        }, t.prototype.shouldUpdate = function(e) {
            return !(!_.isUndefined(this.props) && this.props.rewardState === e.rewardState && this.props.roomState.isKicked === e.roomState.isKicked)
        }, t.prototype.update = function(e) {
            var t = e.rewardState;
            "picking" !== t.pickState || this.publisherService.isIgr ? "picked" === t.pickState && t.pickReward && this.action.enableButtons(!0) : this.action.enableButtons(!1), (t.isMatchAbandoned || t.isMatchExpired) && this.action.couldExit(), e.roomState && e.roomState.isKicked && this.onKicked(), ("picked" === t.pickState || this.publisherService.isNoReward() || t.isMatchAbandoned || t.isMatchExpired || u.isObserver(t)) && this.action.couldExit()
        }, t.prototype.setChatBinder = function(e) {
            this.action.setChatBinder(e)
        }, t
    }(s.Binder);
    n.__decorate([s.autowired("popupService")], S.prototype, "popupService", void 0), n.__decorate([s.autowired("publisherService")], S.prototype, "publisherService", void 0), t.MultiplayRewardNextBinder = S
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1),
        a = i(39),
        s = i(2),
        c = i(44),
        d = i(3),
        l = i(163),
        u = i(563),
        p = i(94),
        h = i(67),
        f = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(this.face, !0), this.hasSizeAll(".id-playerName", !0), this.hasSizeAll(".id-playerName .id-vipIcon", !0), this.hasSizeAll(".id-playerName .id-medalMC", !0), this.hasSizeAll(".id-buttons", !0), this.hasSizeAll(".id-buttons .comp-Button", !0), this.translate("> .id-disconnect .id-disconnectLabel", "LOADINGSCREEN_LOGOUT"), this.on(this.face, s.MouseEventEx.MOUSE_OVER, function() {
                    e.onMouseOver()
                }), this.on(this.face, s.MouseEventEx.MOUSE_OUT, function() {
                    e.onMouseOut()
                }), this.on(".id-addFriendBtn", s.MouseEventEx.CLICK, function() {
                    e.onClickAddFriend()
                }), u.param(this.face, {
                    customState: "other"
                }), this.visible(this.face, !1), this.visible(".id-infoBtn", !1)
            }, t.prototype.update = function(e) {
                var t = this;
                if (_.isEmpty(e)) this.gotoAndPlay(this.face, "empty");
                else {
                    var i = e.matchEndPlayer,
                        n = e.snippet,
                        o = e.isTeamMode,
                        s = e.isSelf,
                        c = e.isIgr,
                        d = e.isLeave;
                    this.face.customState = d ? "leave" : s ? "player" : "other";
                    var u = o ? a.getTeamString(i.team) : s ? "mylist" : "default";
                    this.gotoAndPlayAll(".id-rank", u), i.retire || d || ["default", "mylist", "teamA", "teamB"].forEach(function(e) {
                        i.rank && t.bindTextAll(".id-rank .id-" + e + "Rank", i.rank)
                    }), o ? (this.visibleAll(".id-rank .id-retireTeamA", i.retire && !d && i.team === a.Team.A), this.visibleAll(".id-rank .id-retireTeamB", i.retire && !d && i.team === a.Team.B), this.visibleAll(".id-rank .id-disconnectTeamA", d && i.team === a.Team.A), this.visibleAll(".id-rank .id-disconnectTeamB", d && i.team === a.Team.B)) : (this.visibleAll(".id-rank .id-retire", i.retire && !d), this.visibleAll(".id-rank .id-disconnect", d));
                    var h = this.$filter("vehicleName")(i.vehicle.code);
                    this.bindTextAll(".id-vehicleNameBar", h), this.applyAll(".id-vehicleNameBar .PcCafeIcon", p.igr, c), this.bindText(".id-vehicleOVR .id-ovrLabel", r.default.calculateOVR(i.vehicle.status) + ""), this.visibleAll(".id-vehicleOVR .id-ovrLabel", !d), this.bindTextAll(".id-playerName .id-name", n.name), this.bindTextAll(".id-playerName .id-level", "Lv." + n.level);
                    var f = this.ranked2Service.getMedalTier(n.pid, l.getFeatureType());
                    if (this.visibleAll(".id-playerName .id-medalMC", !!f.code), f.code) {
                        var v = "SPEED1ON1" === f.mode ? "1on1" : "6players";
                        this.gotoAndStopAll(".id-playerName .id-medalMC", v + "_" + f.code)
                    }
                    n.clanEmblemId && this.clanService.enableClan ? (this.visibleAll(".id-playerName .id-clanEmblem", !0), this.drawExternalImageAll(".id-playerName .id-clanEmblem", this.$filter("cdn_clan_emblem")(n.clanEmblemId)), this.face.$$(".id-playerName .id-clanEmblem").map(function(e) {
                        e.htmlElement.style.width = e.width * e.scaleX + "px", e.htmlElement.style.height = e.height * e.scaleY + "px"
                    })) : this.visibleAll(".id-playerName .id-clanEmblem", !1), this.visibleAll(".id-playerName .id-vipIcon", !1), this.visible(this.face, !0)
                }
            }, t.prototype.onMouseOver = function() {
                var e = this.getProps(),
                    t = e.matchEndPlayer,
                    i = e.isSelf;
                this.visible(".id-addFriendBtn", !i && t && !this.isMyFriend(t.pid)), this.enableButton(".id-addFriendBtn", !i && t && !this.isSentRequest(t.pid)), this.isShowButtons() && (this.gotoAndPlayAll(".id-vehicleOVR", "fade"), this.gotoAndPlayAll("> .id-disconnect", "fade"))
            }, t.prototype.onMouseOut = function() {
                this.gotoAndPlayAll(".id-vehicleOVR", "normal"), this.gotoAndPlayAll("> .id-disconnect", "normal")
            }, t.prototype.isMyFriend = function(e) {
                var t = d.store.getState().contacts,
                    i = t.friends;
                return !_.isUndefined(_.find(i, function(t) {
                    return t.snippet.pid === e
                }))
            }, t.prototype.isSentRequest = function(e) {
                var t = d.store.getState().contacts,
                    i = t.sentInvites;
                return !_.isUndefined(_.find(i, function(t) {
                    return t.snippet.pid === e
                }))
            }, t.prototype.onClickAddFriend = function() {
                var e = this,
                    t = this.getProps().matchEndPlayer;
                if (t && t.sid && r.default.isMongooseId(t.pid)) {
                    var i = this.playerSnippetService.getSnippet(t.pid);
                    this.contactsService.inviteFriend(i.name).catch(function(t) {
                        return c.showAddFriendErrorPopup(t, e.$filter("translate"), e.popupService)
                    })
                }
            }, t.prototype.isShowButtons = function() {
                var e = this.getProps(),
                    t = e.matchEndPlayer;
                return !e.isSelf && t && !this.isMyFriend(t.pid)
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([o.autowired("ranked2Service")], f.prototype, "ranked2Service", void 0), n.__decorate([o.autowired("clanService")], f.prototype, "clanService", void 0), n.__decorate([o.autowired("popupService")], f.prototype, "popupService", void 0), n.__decorate([o.autowired("playerSnippetService")], f.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("contactsService")], f.prototype, "contactsService", void 0);
    var v = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.playerListBinder = [], t.updatePlayersSnippet = _.once(function() {
                var e = _.map(t.matchResult.players, function(e) {
                    return e.pid
                });
                t.playerSnippetService.fetchSnippets(e).then(function() {
                    t.bindRankInfo()
                })
            }.bind(t)), t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.$$(".PlayerList").forEach(function(t, i) {
                e.playerListBinder.push(e.addChildBinder(t, f))
            })
        }, t.prototype.update = function(e) {
            this.matchResult = e.matchResult, this.isMatchAbandoned = e.isMatchAbandoned || !1, this.updatePlayersSnippet()
        }, t.prototype.bindRankInfo = function() {
            var e = this,
                t = d.store.getState().match.match,
                i = this.matchResult.players.slice().concat(_.isArray(this.matchResult.ais) ? this.matchResult.ais.slice() : []);
            this.sortedResult = i.filter(function(t) {
                return !e.isMatchAbandoned || d.store.getState().player.id === t.pid
            }).map(function(i) {
                var n = _.find(t.players, {
                        id: i.pid
                    }) || {},
                    r = e.playerSnippetService.getSnippet(i.pid) || {};
                return i.vehicle || (i.vehicle = n.vehicle), {
                    matchEndPlayer: i,
                    matchPlayer: n,
                    snippet: r
                }
            }), this.sortedResult.sort(h(function(e) {
                return e.matchEndPlayer.retire
            }, 1).thenBy(function(e) {
                return "left" === e.matchPlayer.state ? 0 : 1
            }, -1).thenBy(function(e) {
                return e.matchEndPlayer.rank
            }, 1).thenBy(function(e) {
                return e.snippet.level
            }, 1).thenBy(function(e) {
                return e.snippet.name.toUpperCase()
            }, 1));
            var n = d.store.getState().player.id;
            this.playerListBinder.forEach(function(t, i) {
                var r = e.sortedResult[i];
                if (r) {
                    var o = {
                        matchEndPlayer: r.matchEndPlayer,
                        snippet: r.snippet,
                        isTeamMode: e.gameModeService.isTeamMode(e.matchResult.gameMode),
                        isSelf: r.matchEndPlayer.pid === n,
                        isIgr: r.matchPlayer && r.matchPlayer.vehicle && !!r.matchPlayer.vehicle.igr,
                        isLeave: "left" === r.matchPlayer.state
                    };
                    t.setProps(o)
                }
            })
        }, t
    }(o.Binder);
    n.__decorate([o.autowired("playerSnippetService")], v.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("gameModeService")], v.prototype, "gameModeService", void 0), t.MultiplayRewardRankBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(3),
        a = i(54),
        s = i(8),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-resultTitle", "RANKEDMATCH_REWARD_FPRESULT_TITLE"), this.gotoAndPlay(".id-circleContainer1", "dailyBonus"), this.translate(".id-circleContainer1 .id-circleName", "RANKEDMATCH_REWARD_FPRESULT_DAILYBONUS"), this.translate(".id-currentSeasonPointTitle", "RANKEDMATCH_REWARD_TOTAL_SUMFP"), this.translate(".id-totalTitle", "RANKEDMATCH_REWARD_TOTAL_TITLE"), this.medalPreSeason = this.addChildBinder(".id-preSeason .RankedMatchRewardIconBig", a.TierMedalBinder), this.medalPromotion = this.addChildBinder(".id-promotion .RankedMatchRewardIconBig", a.TierMedalBinder), this.medalDemotion = this.addChildBinder(".id-demotion .RankedMatchRewardIconBig", a.TierMedalBinder), this.medalCurrent = this.addChildBinder(".id-rankedMatchMedalContainer .RankedMatchRewardIconBig", a.TierMedalBinder)
            }, t.prototype.update = function(e) {
                this.result = e.rankedMatch, _.isEmpty(this.result) || (this.refinedResult = this.getRefinedResult()), this.matchResult = e.matchResult;
                var t = this.getRankedMatchState();
                switch (this.gotoAndStop(this.face, t), t) {
                    case "noFP":
                        this.bindNoFp();
                        break;
                    case "currentFP":
                        this.bindCurrentResult();
                        break;
                    case "preseason":
                        this.bindPreSeason();
                        break;
                    case "promotion":
                        this.bindPromotion();
                        break;
                    case "demotion":
                        this.bindDemotion()
                }
            }, t.prototype.getRankedMatchState = function() {
                if (!this.result || _.isEmpty(this.result)) return "noFP";
                switch (this.result.beforeState) {
                    case "batch":
                        return "preseason";
                    case "promotion":
                        return "promotion";
                    case "depromotion":
                        return "demotion";
                    default:
                        return "currentFP"
                }
            }, t.prototype.getStatusLabels = function(e) {
                if ("noFP" === e) return {
                    title: "REWARD_SCREEN_SEASONEND_TITLE",
                    desc: "REWARD_SCREEN_SEASONEND_DESC"
                };
                if ("SPEED1ON1" === this.ranked2Service.getGameMode()) switch (e) {
                    case "preSeason":
                        return {
                            title: "1ON1_REWARD_TEST", subTitle: "1ON1_REWARD_TEST_PROGRESS", desc: "1ON1_REWARD_TEST_GUIDE"
                        };
                    case "promotion":
                        return {
                            title: "1ON1_REWARD_PROMOTION", subTitle: "1ON1_REWARD_PROMOTION_PROGRESS", desc: "1ON1_REWARD_PROMOTION_GUIDE"
                        };
                    case "demotion":
                        return {
                            title: "1ON1_REWARD_DEMOTION", subTitle: "1ON1_REWARD_DEMOTION_PROGRESS", desc: "1ON1_REWARD_DEMOTION_GUIDE"
                        }
                } else switch (e) {
                    case "preSeason":
                        return {
                            title: "RANKEDMATCH_TIERREPLACE_TITLE", subTitle: "RANKEDMATCH_REWARD_EVENT_RESULT_TITLE", desc: "RANKEDMATCH_REWARD_EVENT_RESULT_GRADEPLACEMENT_GUIDE"
                        };
                    case "promotion":
                        return {
                            title: "RANKEDMATCH_PROMOTION_START_TITLE", subTitle: "RANKEDMATCH_REWARD_EVENT_RESULT_TITLE", desc: "RANKEDMATCH_REWARD_EVENT_RESULT_PROMOTION_GUIDE"
                        };
                    case "demotion":
                        return {
                            title: "RANKEDMATCH_DEPROMOTION_START_TITLE", subTitle: "RANKEDMATCH_REWARD_EVENT_RESULT_TITLE", desc: "RANKEDMATCH_REWARD_EVENT_RESULT_DEPROMOTION_GUIDE"
                        }
                }
            }, t.prototype.bindNoFp = function() {
                var e = this.getStatusLabels("noFP");
                this.translate(".id-noFP .id-title", e.title), this.translate(".id-noFP .id-description", e.desc)
            }, t.prototype.bindCurrentResult = function() {
                var e = this,
                    t = o.store.getState().player.id,
                    i = _.find(this.matchResult.players, function(e) {
                        return e.pid === t
                    }).retire,
                    n = this.refinedResult.tierScore + this.refinedResult.diffScore;
                this.bindText(".id-currentFP .id-circleContainer1 .id-textNum", this.refinedResult.dailyBonus), this.gotoAndPlay(".id-currentFP .id-circleContainer2", i ? "retire" : "fpPlus"), this.translate(".id-circleContainer2 .id-circleName", i ? "1ON1_REWARD_RETIRE" : "1ON1_REWARD_RANKRESULT"), this.bindText(".id-currentFP .id-circleContainer2 .id-textNum", this.getFpBonusText()), this.bindText(".id-currentFP .id-tierPoint", n), this.hasSize(".id-currentFP .id-tierPoint .id-textField", !1);
                var r = function() {
                    return e.gotoAndPlay(".id-currentFP .id-tierPoint .id-addNumContainer", e.refinedResult.diffScore >= 0 ? "plus" : "minus")
                };
                r(), this.on(".id-currentFP .id-tierPoint .id-addNumContainer", s.EventEx.REBOOT, function(e) {
                    return r()
                }), this.bindText(".id-currentFP .id-tierPoint .id-plusNum", this.refinedResult.diffScore), this.visible(".id-currentFP .id-tierPoint .id-plusNum", this.refinedResult.diffScore >= 0), this.bindText(".id-currentFP .id-tierPoint .id-minusNum", Math.abs(this.refinedResult.diffScore)), this.visible(".id-currentFP .id-tierPoint .id-minusNum", this.refinedResult.diffScore < 0), this.medalCurrent.setProps({
                    tierCode: this.refinedResult.tier
                })
            }, t.prototype.bindPreSeason = function() {
                var e = this.getStatusLabels("preSeason");
                this.translate(".id-preSeason .id-statusTitle", e.title), this.translate(".id-preSeason .id-statusSubTitle", e.subTitle), this.translate(".id-preSeason .id-statusDescription", e.desc), this.gotoAndPlay(".id-preSeason .id-circlePass1", this.getPreSeasonProgressState(0)), this.gotoAndPlay(".id-preSeason .id-circlePass2", this.getPreSeasonProgressState(1)), this.gotoAndPlay(".id-preSeason .id-circlePass3", this.getPreSeasonProgressState(2)), this.gotoAndPlay(".id-preSeason .id-circlePass4", this.getPreSeasonProgressState(3)), this.gotoAndPlay(".id-preSeason .id-circlePass5", this.getPreSeasonProgressState(4)), this.bindText(".id-preSeason .id-circlePass1 .ResultText", this.getRankText("batch", 0)), this.bindText(".id-preSeason .id-circlePass2 .ResultText", this.getRankText("batch", 1)), this.bindText(".id-preSeason .id-circlePass3 .ResultText", this.getRankText("batch", 2)), this.bindText(".id-preSeason .id-circlePass4 .ResultText", this.getRankText("batch", 3)), this.bindText(".id-preSeason .id-circlePass5 .ResultText", this.getRankText("batch", 4)), this.translate(".id-preSeason .id-currentTier", "RANKEDMATCH_TIERNAME_" + this.refinedResult.tier), this.medalPreSeason.setProps({
                    tierCode: this.refinedResult.tier
                })
            }, t.prototype.bindPromotion = function() {
                var e = this.getStatusLabels("promotion");
                this.translate(".id-promotion .id-statusTitle", e.title), this.translate(".id-promotion .id-statusSubTitle", e.subTitle), this.translate(".id-promotion .id-statusDescription", e.desc), this.gotoAndPlay(".id-promotion .id-circlePass1", this.getProgressState("promotion", 0)), this.gotoAndPlay(".id-promotion .id-circlePass2", this.getProgressState("promotion", 1)), this.gotoAndPlay(".id-promotion .id-circlePass3", this.getProgressState("promotion", 2)), this.bindText(".id-promotion .id-circlePass1 .ResultText", this.getRankText("promotion", 0)), this.bindText(".id-promotion .id-circlePass2 .ResultText", this.getRankText("promotion", 1)), this.bindText(".id-promotion .id-circlePass3 .ResultText", this.getRankText("promotion", 2)), this.translate(".id-promotion .id-currentTier", "RANKEDMATCH_TIERNAME_" + this.refinedResult.nextTier), this.medalPromotion.setProps({
                    tierCode: this.refinedResult.nextTier
                })
            }, t.prototype.bindDemotion = function() {
                var e = this.getStatusLabels("demotion");
                this.translate(".id-demotion .id-statusTitle", e.title), this.translate(".id-demotion .id-statusSubTitle", e.subTitle), this.translate(".id-demotion .id-statusDescription", e.desc), this.gotoAndPlay(".id-demotion .id-circlePass1", this.getProgressState("depromotion", 0)), this.gotoAndPlay(".id-demotion .id-circlePass2", this.getProgressState("depromotion", 1)), this.gotoAndPlay(".id-demotion .id-circlePass3", this.getProgressState("depromotion", 2)), this.bindText(".id-demotion .id-circlePass1 .ResultText", this.getRankText("depromotion", 0)), this.bindText(".id-demotion .id-circlePass2 .ResultText", this.getRankText("depromotion", 1)), this.bindText(".id-demotion .id-circlePass3 .ResultText", this.getRankText("depromotion", 2)), this.translate(".id-demotion .id-currentTier", "RANKEDMATCH_TIERNAME_" + this.refinedResult.tier), this.medalDemotion.setProps({
                    tierCode: this.refinedResult.tier
                })
            }, t.prototype.getRefinedResult = function() {
                var e = o.store.getState().ranked.modes[this.ranked2Service.getGameMode()].rankedPlayer,
                    t = this.ranked2Service.getTierByFp(e.records.fp || 0),
                    i = this.ranked2Service.getTierInfoByTier(t.code + 1) ? t.code + 1 : t.code,
                    n = Math.floor(this.result.updatedFp) - Math.floor(this.result.beforeFp),
                    r = n - this.result.dailyFpBonus;
                return {
                    dailyBonus: this.result.dailyFpBonus,
                    fpBonus: r,
                    tierScore: this.ranked2Service.getFpWithinTier(e.records.fp),
                    diffScore: n,
                    tier: t.code,
                    nextTier: i
                }
            }, t.prototype.getFpBonusText = function() {
                if (!this.result) return "";
                var e = Math.floor(this.result.matchFpBonus),
                    t = e.toString();
                return e >= 0 && (t = "+" + t), t
            }, t.prototype.getPreSeasonProgressState = function(e) {
                return this.result && -1 !== this.result.stateProgress.batch[e] ? "check" : "normal"
            }, t.prototype.getRankText = function(e, t) {
                if (!this.result) return "";
                var i = this.result.stateProgress[e];
                if (!i) return "";
                var n = i[t];
                return 0 === n ? this.$filter("translate")("RANKEDMATCH_REWARD_EVENT_RESULT_RETIRE") : -1 === n ? "" : this.$filter("template")({
                    value: n
                }, "RANKEDMATCH_REWARD_EVENT_RESULT_RANKING")
            }, t.prototype.getProgressState = function(e, t) {
                if (!this.result) return "normal";
                var i = this.result.stateProgress[e];
                if (!i) return "normal";
                var n = i[t],
                    r = this.ranked2Service.getMinHighRank();
                return 1 <= n && n <= r ? "success" : -1 !== n ? "failure" : "normal"
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("ranked2Service")], c.prototype, "ranked2Service", void 0), t.MultiplayRewardRankedMatchBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(7),
        a = i(150),
        s = i(1),
        c = i(2),
        d = i(13),
        l = i(4),
        u = i(314),
        p = i(235);
    t.progressBarDuration = 1500;
    var h = function(e) {
        function i() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.hasReward = !0, t.igrCardPicked = !1, t.cardPicked = !1, t.expBonusExcludeItem = 0, t.spBonusExcludeItem = 0, t.expFromItem = 0, t.spFromItem = 0, t.initialExpRates = [], t.appliedSpExp = [], t
        }
        return n.__extends(i, e), i.prototype.onFaceReady = function() {
            var e = this;
            this.translate(".id-PlayerExp .id-title", "FRIENDLYMATCH_REWARD_EXPREWARD"), this.translate(".id-SpReward .id-title", "FRIENDLYMATCH_REWARD_SPREWARD"), this.translate(".id-SpReward .comp-TextField.id-Sp", "ITEMTYPE_SP"), this.translate(".id-SpReward .comp-TextField.id-HolderSp", "ITEMTYPE_SP"), this.translate(".id-SpReward .comp-TextField.id-detailInfoTitleTextfield0", "FRIENDLYMATCH_REWARD_MYSP"), this.translate(".id-SpReward .comp-TextField.id-detailInfoTitleTextfield1", "FRIENDLYMATCH_REWARD_REWARDSP"), this.translate(".id-PlayerExp .comp-TextField.id-EXP", "FRIENDLYMATCH_REWARD_EXP"), this.translate(".id-PlayerExp .id-levelNum .comp-TextField.id-level", "FRIENDLYMATCH_REWARD_LEVEL"), this.beforeProgressBar = this.getFace(".id-indicator0"), this.afterProgressBar = this.getFace(".id-indicator1"), this.expBonusFace = this.getFace(".id-PlayerExp .id-bonusInfo"), this.spBonusFace = this.getFace(".id-SpReward .id-bonusInfo"), this.expBonusFace.enabled = !1, this.spBonusFace.enabled = !1, this.addManagedListener(this.expBonusFace, c.MouseEventEx.MOUSE_OVER, function(t) {
                e.showBonusTooltip("exp", e.reward, t)
            }), this.addManagedListener(this.expBonusFace, c.MouseEventEx.MOUSE_OUT, function(t) {
                e.hideBonusTooltip()
            }), this.addManagedListener(this.spBonusFace, c.MouseEventEx.MOUSE_OVER, function(t) {
                e.showBonusTooltip("sp", e.reward, t)
            }), this.addManagedListener(this.spBonusFace, c.MouseEventEx.MOUSE_OUT, function(t) {
                e.hideBonusTooltip()
            }), this.beforeProgressBar.regX = 0, this.afterProgressBar.regX = 0, this.clearProgressBar(), this.addChildBinder(this.face, u.LevelupBinder)
        }, i.prototype.update = function(e) {
            var t = this;
            this.pickState = e.pickState || "unpicked", "picking" === e.pickState && ("IGR" === e.pickReward.provider ? this.igrCardPicked = !0 : this.cardPicked = !0, "EXP_PERCENT" === e.pickReward.type && this.incExpFromItem(e.pickReward), "SP_PERCENT" === e.pickReward.type && this.incSpFromItem(e.pickReward)), "autopick" === e.pickState && r.map(e.reward.card.items.gain, function(e) {
                return "IGR" === e.provider ? t.igrCardPicked = !0 : t.cardPicked = !0, "EXP_PERCENT" === e.type ? t.incExpFromItem(e) : "SP_PERCENT" === e.type ? t.incSpFromItem(e) : void 0
            }, {
                concurrency: 1
            })
        }, i.prototype.onAddedToScene = function() {
            this.prevStatus = this.props.prevStatus, this.reward = this.props.reward, this.hasReward = !(this.props.isMatchAbandoned || this.props.isRetired || this.props.isMatchExpired || p.isObserver(this.props)), this.nextLevel = this.prevStatus.level, this.hasReward && (this.expFromItem = _.sumBy(this.reward.exp.history, function(e) {
                return "ITEM" === e.display && e.displayValue
            }), this.spFromItem = _.sumBy(this.reward.sp.history, function(e) {
                return "ITEM" === e.display && e.displayValue
            }), this.expBonusExcludeItem = this.reward.exp.increment - this.expFromItem, this.spBonusExcludeItem = this.reward.sp.increment - this.spFromItem, this.expBonusExcludeItem > -1 && this.expBonusExcludeItem < 1 && (this.expBonusExcludeItem = 0), this.spBonusExcludeItem > -1 && this.spBonusExcludeItem < 1 && (this.spBonusExcludeItem = 0), this.expBonusFace.enabled = !!this.expBonusExcludeItem, this.spBonusFace.enabled = !!this.spBonusExcludeItem), this.bindSpExpInfo(), this.initProgressBar()
        }, i.prototype.incExpFromItem = function(e) {
            if (!_.includes(this.appliedSpExp, e)) {
                this.appliedSpExp.push(e), this.expBonusFace.enabled = !0;
                var t = this.$filter("template")({
                    basevalue: this.reward.exp.base,
                    bonusvalue: this.expBonusExcludeItem + Math.round(e.displayValue)
                }, "FRIENDLYMATCH_REWARD_EXPBONUS");
                this.bindText(".id-PlayerExp .id-AcquireInfoTextField", t);
                var i = $(this.getFace(".id-PlayerExp .comp-TextField.id-ExpNum").htmlElement),
                    n = this.reward.exp.base + this.expBonusExcludeItem;
                this.applyCounter(i, n, n + e.displayValue);
                var r = [],
                    o = _.last(this.initialExpRates),
                    a = e.displayValue / this.rewardService.getRequiredPlayerExp4NextLevel(this.nextLevel);
                if (o + a > 1)
                    for (var s = 0, c = o + a - (o + a) % 1; s < c; ++s) r.push(1);
                r.push((o + a) % 1), this.setGainedExp(r), this.expBonusExcludeItem = this.expBonusExcludeItem + e.displayValue, this.initialExpRates = r
            }
        }, i.prototype.incSpFromItem = function(e) {
            if (!_.includes(this.appliedSpExp, e)) {
                this.appliedSpExp.push(e), this.spBonusFace.enabled = !0;
                var t = this.$filter("template")({
                    basevalue: this.reward.sp.base,
                    bonusvalue: this.spBonusExcludeItem + Math.round(e.displayValue)
                }, "FRIENDLYMATCH_REWARD_SPBONUS");
                this.bindText(".id-SpReward .id-AcquireInfoTextField", t);
                var i = $(this.getFace(".id-SpReward .comp-TextField.id-HolderSpNum").htmlElement),
                    n = $(this.getFace(".id-SpReward .comp-TextField.id-SpNum").htmlElement),
                    r = this.reward.sp.base + this.spBonusExcludeItem;
                this.applyCounter(i, this.prevStatus.sp + r, this.prevStatus.sp + r + e.displayValue), this.applyCounter(n, r, r + e.displayValue), this.spBonusExcludeItem = this.spBonusExcludeItem + e.displayValue
            }
        }, i.prototype.bindSpExpInfo = function() {
            this.bindText(".id-SpReward .comp-TextField.id-HolderSpNum", "0"), this.bindText(".id-SpReward .comp-TextField.id-SpNum", "0"), this.bindText(".id-PlayerExp .comp-TextField.id-ExpNum", "0"), this.bindText(".id-PlayerExp .id-levelNum .comp-TextField.id-levelNum", this.prevStatus.level);
            var e = this.$filter("template")({
                    basevalue: this.hasReward ? this.reward.exp.base : 0,
                    bonusvalue: this.hasReward ? this.expBonusExcludeItem : 0
                }, "FRIENDLYMATCH_REWARD_EXPBONUS"),
                t = this.$filter("template")({
                    basevalue: this.hasReward ? this.reward.sp.base : 0,
                    bonusvalue: this.hasReward ? this.spBonusExcludeItem : 0
                }, "FRIENDLYMATCH_REWARD_SPBONUS");
            this.bindText(".id-PlayerExp .id-AcquireInfoTextField", e), this.bindText(".id-SpReward .id-AcquireInfoTextField", t)
        }, i.prototype.showBonusTooltip = function(e, t, i) {
            var r = this,
                o = function(e) {
                    return "ITEM" === e.display ? 1 : "IGR" === e.provider ? 2 : "PROMOTION" === e.provider ? 5 : void 0
                },
                a = t[e].history,
                s = _.groupBy(a.filter(function(e) {
                    return "ITEM" === e.display ? "IGR" === e.provider && r.igrCardPicked || "IGR" !== e.provider && r.cardPicked : !("BASIC" === e.provider && "TEXT" === e.display)
                }).map(function(e) {
                    return n.__assign({}, e, {
                        prefixId: o(e)
                    })
                }), "prefixId"),
                c = _.map(s, function(e) {
                    return n.__assign({}, e[0], {
                        count: e.reduce(function(e, t) {
                            return e + t.count
                        }, 0)
                    })
                }).sort(function(e, t) {
                    return e.prefixId - t.prefixId
                }).map(function(t, i) {
                    return {
                        type: t.type,
                        text: r.$filter("translate")("REWARD_BONUS_PREFIX_" + t.prefixId),
                        value: r.$filter("template")({
                            value: t.count
                        }, "REWARD_BONUS_UNITTEXT_" + e.toUpperCase())
                    }
                });
            c.length > 0 && this.tooltipService.show(i, "bottom", d.TooltipType.MatchRewardUncountableBonus, c, {
                marginLeft: -267,
                marginTop: 2
            })
        }, i.prototype.hideBonusTooltip = function() {
            this.tooltipService.hide()
        }, i.prototype.initProgressBar = function() {
            var e = this,
                t = this.prevStatus.exp - this.rewardService.getMaxExpByLevel(this.prevStatus.level),
                i = t / this.rewardService.getRequiredPlayerExp4NextLevel(this.prevStatus.level);
            this.beforeProgressBar.addCustomToTween(0, {
                flash: {
                    scaleX: i
                }
            }), this.hasReward ? (this.initialExpRates = this.getAfterBaseExpRates(), r.delay(2e3).then(function() {
                e.setGainedExp(e.initialExpRates), e.setCounterNumber()
            })) : this.bindText(".id-SpReward .comp-TextField.id-HolderSpNum", l.default.toMoney(this.prevStatus.sp.toString()))
        }, i.prototype.getAfterBaseExpRates = function() {
            var e = [],
                t = this.prevStatus.exp + this.reward.exp.base + this.expBonusExcludeItem,
                i = this.prevStatus.level;
            do {
                var n = this.rewardService.getMaxExpByLevel(i + 1);
                if (0 === n) return o.error("FATAL getAfterExpRates() invalid prevStatus", JSON.stringify(this.prevStatus)), e;
                if (n > t) {
                    var r = t - this.rewardService.getMaxExpByLevel(i),
                        a = r / this.rewardService.getRequiredPlayerExp4NextLevel(i);
                    e.push(a);
                    break
                }
                e.push(1)
            } while (i++);
            return o.debug("### getAfterExpRates() :", e), e
        }, i.prototype.setGainedExp = function(e) {
            var i = this,
                n = 0,
                r = function() {
                    i.afterProgressBar.addCustomToTween(t.progressBarDuration / 1e3, {
                        flash: {
                            scaleX: e[n]
                        },
                        ease: Power3.easeOut,
                        onComplete: function() {
                            if (n += 1, _.isUndefined(e[n])) return void i.dispatch(a.applyBonusAndUpdateLevel(a.MatchRewardKey, i.rewardService));
                            i.clearProgressBar(), i.setNextLevelInfo(), r()
                        }
                    })
                };
            r()
        }, i.prototype.setNextLevelInfo = function() {
            this.nextLevel = this.nextLevel + 1, this.bindText(".id-PlayerExp .id-levelNum .comp-TextField.id-levelNum", this.nextLevel)
        }, i.prototype.setCounterNumber = function() {
            var e = $(this.getFace(".id-SpReward .comp-TextField.id-HolderSpNum").htmlElement),
                t = $(this.getFace(".id-SpReward .comp-TextField.id-SpNum").htmlElement),
                i = $(this.getFace(".id-PlayerExp .comp-TextField.id-ExpNum").htmlElement),
                n = this.reward.sp.base + this.spBonusExcludeItem,
                r = this.reward.exp.base + this.expBonusExcludeItem;
            this.applyCounter(e, this.prevStatus.sp, this.prevStatus.sp + n), this.applyCounter(t, 0, n), this.applyCounter(i, 0, r)
        }, i.prototype.applyCounter = function(e, i, n) {
            e.prop("Counter", i).animate({
                Counter: n
            }, {
                duration: t.progressBarDuration + 500,
                easing: "swing",
                step: function(t) {
                    return e.text(l.default.toMoney(Math.ceil(t)))
                }
            })
        }, i.prototype.clearProgressBar = function() {
            this.beforeProgressBar.addCustomToTween(0, {
                flash: {
                    scaleX: 0
                }
            }), this.afterProgressBar.addCustomToTween(0, {
                flash: {
                    scaleX: 0
                }
            })
        }, i
    }(s.Binder);
    n.__decorate([s.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([s.autowired("tooltipService")], h.prototype, "tooltipService", void 0), n.__decorate([s.autowired("rewardService")], h.prototype, "rewardService", void 0), t.MultiplayRewardSpExpBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(3),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".Festival .id-resultTitle", "MINIFESTIVAL_MAINSCREEN_MATCH_REWARD_VICTORY_POINT"), this.translate(".Festival .id-totalTitle", "MINIFESTIVAL_MATCH_REWARD_SUM_POINT"), this.translate(".Festival .id-currentSeasonPointTitle", "MINIFESTIVAL_MAINSCREEN_MATCH_REWARD_DAILY_POINT"), this.translate(".Festival .id-circleContainer1 .id-circleName", "MINIFESTIVAL_MAINSCREEN_MATCH_REWARD_PARTICIPATION_POINT"), this.translate(".Festival .id-circleContainer2 .id-circleName", "MINIFESTIVAL_MAINSCREEN_MATCH_REWARD_RANK_POINT"), this.hasSize(".id-festivalPoint .id-textField", !1)
            }, t.prototype.update = function(e) {
                var t = this.$filter("translate"),
                    i = o.store.getState().player.id,
                    n = (_.find(e.matchResult.players, function(e) {
                        return e.pid === i
                    }).retire, 0),
                    r = 0,
                    a = 0,
                    s = 0,
                    c = e.festivalPoint;
                if (c) {
                    var d = c.delta,
                        l = d.prev,
                        u = d.curr;
                    r = c.pointByRank || 0, a = c.pointsByParticipation || 0, n = u.point, s = u.point - l.point
                } else {
                    var p = this.festivalService.selectedFestival.id,
                        h = this.festivalService.selectedMiniFestival.id,
                        f = this.festivalService.getMiniFestivalPlayer(p, h);
                    n = f ? f.point : 0
                }
                this.gotoAndStop(this.face, "festival"), this.bindText(".Festival .id-circleContainer1 .id-textNum", "+" + a), this.bindText(".Festival .id-circleContainer2 .id-textNum", "+" + r), this.gotoAndPlay(".Festival .id-circleContainer1", s > 0 ? "dailyBonus" : "retire"), this.gotoAndPlay(".Festival .id-circleContainer2", s > 0 ? "fpPlus" : "retire"), this.bindText(".Festival .id-festivalPoint", n + " " + t("NAV_GAME_MULTIPLAY_FESTIVAL_FP")), this.visible(".Festival .id-festivalPoint .id-addNumContainer", s > 0), s > 0 && (this.bindText(".Festival .id-festivalPoint .id-addNumContainer .id-plusNum", s), this.gotoAndPlay(".Festival .id-festivalPoint .id-addNumContainer", "plus"))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], a.prototype, "$filter", void 0), n.__decorate([r.autowired("festivalService")], a.prototype, "festivalService", void 0), t.MultiplayRewardFestivalBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(624),
        o = i(1289);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/multiplay/reward-team-battle", 41).container({
            stages: {
                "match-reward": r.MultiplayRewardBinder,
                "match-reward-team-battle-effect": o.TeamBattleEffectBinder
            }
        });
        e.state("root.MultiplayRewardTeamBattle", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(209),
        s = i(39),
        c = i(3),
        d = i(103),
        l = i(54),
        u = i(163),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.getFace(".id-name").hasSize = !0, this.getFace(".id-name").layoutFloat = "right", this.medal = this.addChildBinder(".RankedMatchRewardIconSmall", l.TierMedalBinder)
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this), _.isEmpty(this.props) && this.gotoAndStop(this.face, "empty")
            }, t.prototype.update = function(e) {
                function t(e) {
                    e.layoutPosition = "relative", e.layoutFloat = n === s.Team.A ? "right" : "left"
                }
                var i = this,
                    n = e.team,
                    r = e.rank,
                    o = e.name,
                    c = e.score,
                    d = e.isSelf,
                    l = e.medalTier,
                    u = e.medalType,
                    p = e.clanEmblemId;
                ["textField", "medalMC"].forEach(function(e) {
                    var n = i.getFace(".id-name .id-" + e);
                    n instanceof a.TextField ? n.hasSize = !1 : n.hasSize = !0, n.x = 0, t(n)
                });
                var h = this.getFace(".id-clanEmblem");
                h.hasSize = !1, h && p && this.clanService.enableClan ? (this.drawExternalImage(".id-name .id-clanEmblem", this.$filter("cdn_clan_emblem")(p)), h.htmlElement.style.width = h.width * h.scaleX + "px", h.htmlElement.style.height = h.height * h.scaleY + "px", t(h)) : (h.visible = !1, h.htmlElement.style.visibility = "hidden"), this.bindText(".id-score", c), this.bindText(".id-name", o), this.classNames(".id-name", d ? "entry-self" : ""), this.bindText(".id-rank", r || "/"), this.medal.setProps({
                    hide: !l,
                    tierCode: l,
                    tierMode: u
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([r.autowired("clanService")], p.prototype, "clanService", void 0);
    var h = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.playerBinders = [], t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.stage.on("branch", function() {
                e.handleBranch()
            }), this.translate(".id-resultContainer .id-resultWin", "SPEEDTEAMMATCH_MATCHREWARD_WIN"), this.translate(".id-resultContainer .id-resultLose", "SPEEDTEAMMATCH_MATCHREWARD_LOSE"), this.translate(".id-totalScore .id-teamATitleLabel", "SPEEDTEAMMATCH_TEAMRESULT_TEAMNAME_TEAMA"), this.translate(".id-totalScore .id-teamBTitleLabel", "SPEEDTEAMMATCH_TEAMRESULT_TEAMNAME_TEAMB"), this.translate(".id-bonusScoreContainer .id-description", "SPEEDTEAMMATCH_TEAMRESULT_DRAWINFO"), this.bindText(".id-totalScore .id-vsLabel", "VS"), this.bindText(".id-bonusScoreContainer .id-bonusScore", "+1"), s.TeamList.forEach(function(t, i) {
                e.translate(".id-playerList" + t + " .id-rankTitle", "SPEEDTEAMMATCH_TEAMRESULT_RANK"), e.translate(".id-playerList" + t + " .id-scoreTitle", "SPEEDTEAMMATCH_TEAMRESULT_RANKPOINT"), e.playerBinders[i + 1] = [], _.range(1, 5).forEach(function(n) {
                    e.playerBinders[i + 1].push(e.addChildBinder(".id-playerList" + t + " .id-playerItem" + n, p))
                })
            })
        }, t.prototype.handleBranch = function() {
            var e = this;
            if (this.stage.on("stop", function() {
                    if ("result" === e.stage.currentLabel) {
                        var t = o.getStageBinderByName("match-reward.fla");
                        t && t.face.emit("teamBattleStageFinished")
                    }
                }), this.teamBattleResult.teamAScore === this.teamBattleResult.teamBScore) {
                var t = s.getTeamString(this.teamBattleResult.firstPlaceTeam);
                this.getFace(".id-bonusScoreContainer").on("bonus", function() {
                    e.applyScore(e.teamBattleResult.teamAScore + e.teamBattleResult.teamABonus, e.teamBattleResult.teamBScore + e.teamBattleResult.teamBBonus), e.gotoAndPlay(".id-totalScore .id-" + t + "Score", "bonusEffect"), e.convertFace(".id-bonusScoreContainer").play()
                }), this.gotoAndPlay(".id-bonusScoreContainer", t), this.stage.gotoAndPlay("bonusScore")
            } else this.stage.gotoAndPlay("result");
            this.gotoAndPlay(".id-resultContainer", this.teamBattleResult.isLocalPlayerWinner ? "win" : "lose")
        }, t.prototype.onAddedToScene = function() {
            this.stage.gotoAndPlay("in"), this.chatBinder = this.addChildBinder(".id-fiveLineChat", d.SimpleChatWindowBinder, {
                entrance: d.SimpleChatEntrance.PostMatch
            })
        }, t.prototype.mapStateToProps = function(e) {
            return e.reward
        }, t.prototype.update = function(e) {
            var t = this;
            if (!_.isEmpty(e) && !_.isEmpty(e.matchResult)) {
                var i = e.matchResult.players.slice();
                i.sort(function(e, t) {
                    return e.retire === t.retire ? e.rank - t.rank : e.retire ? 1 : -1
                });
                var n = _.groupBy(i, "team");
                [s.Team.A, s.Team.B].forEach(function(e) {
                    (n[e] || []).forEach(function(i, n) {
                        var r = t.playerSnippetService.getSnippet(i.pid),
                            o = t.ranked2Service.getMedalTier(i.pid, u.getFeatureType());
                        t.playerBinders[e][n].setProps({
                            team: e,
                            rank: i.retire ? void 0 : i.rank,
                            name: r.name,
                            clanEmblemId: r.clanEmblemId,
                            score: i.retire ? t.staticdata.teamBattleRankPointData.retire : t.staticdata.teamBattleRankPointData[i.rank],
                            isSelf: i.pid === c.store.getState().player.id,
                            medalTier: o.code,
                            medalType: o.mode
                        })
                    })
                }), this.applyScore(e.teamBattleResult.teamAScore, e.teamBattleResult.teamBScore), this.teamBattleResult = e.teamBattleResult
            }
        }, t.prototype.applyScore = function(e, t) {
            this.bindText(".id-totalScore .id-teamAScore .id-score", e.toString()), this.bindText(".id-totalScore .id-teamAScore .id-motionScore", e.toString()), this.bindText(".id-totalScore .id-teamBScore .id-score", t.toString()), this.bindText(".id-totalScore .id-teamBScore .id-motionScore", t.toString())
        }, t
    }(r.StageBinder);
    n.__decorate([r.autowired("playerSnippetService")], h.prototype, "playerSnippetService", void 0), n.__decorate([r.autowired("worldChatService")], h.prototype, "worldChatService", void 0), n.__decorate([r.autowired("ranked2Service")], h.prototype, "ranked2Service", void 0), n.__decorate([r.autowired("staticdataLoaderService")], h.prototype, "staticdata", void 0), t.TeamBattleEffectBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(1291),
        r = i(37),
        o = i(11);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new o.StateDefinition("/match/result", 39).container({
            controller: "MatchResult",
            stages: {
                "match-result": n.MatchResultBinder
            }
        });
        e.state("root.MatchResult", t)
    }]).controller("MatchResultController", ["audioService", function(e) {
        setTimeout(function() {
            return e.get(r.FxAudioCode.EndLeaderboard).play()
        })
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(1),
        a = i(15),
        s = i(1292),
        c = i(194),
        d = i(103),
        l = i(3),
        u = i(1293),
        p = i(1294),
        h = i(4),
        f = i(1295),
        v = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.mapStateToProps = function(e) {
                return e.match
            }, t.prototype.onFaceReady = function() {
                var e = this,
                    t = l.store.getState().match.match;
                this.gameMode = t.gameMode, this.featureType = t.featureType, this.preloadRewardScreen = h.default.defer(), this.translate(".ScreenTitle .id-textField", "FRIENDLYMATCH_RESULT_COLUMN_RACERESULT"), this.gotoAndStop(".ColumnTitleContainer", this.getTitleLabel()), this.translate(".ColumnTitleContainer .id-columntitle1 .id-textField", "FRIENDLYMATCH_RESULT_COLUMN_RANKING"), this.translate(".ColumnTitleContainer .id-columntitle2 .id-textField", "FRIENDLYMATCH_RESULT_COLUMN_PLAYERNAME"), this.translateAll(".ColumnTitleContainer .id-columntitle3 .id-textField", this.getRecordTitle()), this.translateAll(".ColumnTitleContainer .id-columntitle4 .id-textField", this.getEtc2Title()), this.translateAll(".ColumnTitleContainer .id-columntitle5 .id-textField", this.getEtcTitle()), this.getFace(".DefaultListItemContainer").visible = !1, this.getFace(".WorldRaceHotPursuitResultItemrenderer").visible = !1, this.getFace(".SpeedTeamBattleResultItemrenderer").visible = !1, this.getFace(".DriftModeListItemContainer").visible = !1, this.getFace(".FoxhuntingModeListItemContainer").visible = !1, this.getFace(".PursuitModeListItemContainer").visible = !1, this.translate(".REMAINEDTIMECONTAINER > .id-description", "FRIENDLYMATCH_RESULT_COUNTDOWN"), this.getFace(".REMAINEDTIMECONTAINER > .id-description").visible = !1, this.addChildBinder(".id-fiveLineChat", d.SimpleChatWindowBinder, {
                    entrance: d.SimpleChatEntrance.PostMatch
                }), this.isTeamBattle() ? (this.getFace(".SpeedTeamBattleResultItemrenderer").visible = !0, this.raceMatchResultList = this.addChildBinder(this.getFace(".SpeedTeamBattleResultItemrenderer"), o.CollectionBinder, {
                    instanceBinder: u.TeamBattleResultItemBinder,
                    keyProperty: "id"
                })) : this.isDriftMode() ? (this.getFace(".DriftModeListItemContainer").visible = !0, this.raceMatchResultList = this.addChildBinder(this.getFace(".DriftModeListItemContainer .DriftMatchResultItemrenderer"), o.CollectionBinder, {
                    instanceBinder: s.DriftMatchResultItemBinder,
                    keyProperty: "id"
                })) : this.isFoxhuntingMode() ? (this.getFace(".FoxhuntingModeListItemContainer").visible = !0, this.raceMatchResultList = this.addChildBinder(this.getFace(".FoxhuntingModeListItemContainer .FoxhuntingMatchResultItemrenderer"), o.CollectionBinder, {
                    instanceBinder: p.FoxhuntingResultItemBinder,
                    keyProperty: "id"
                })) : this.isPursuitMode() ? (this.getFace(".PursuitModeListItemContainer").visible = !0, this.raceMatchResultList = this.addChildBinder(this.getFace(".PursuitModeListItemContainer .PursuitMatchResultItemrenderer"), o.CollectionBinder, {
                    instanceBinder: f.PursuitResultItemBinder,
                    keyProperty: "id"
                })) : (this.getFace(".DefaultListItemContainer").visible = !0, this.raceMatchResultList = this.addChildBinder(this.getFace(".DefaultListItemContainer .RaceMatchResultItemrenderer"), o.CollectionBinder, {
                    instanceBinder: c.RaceMatchResultItemBinder,
                    keyProperty: "id"
                }));
                var i = this.room2MatchService,
                    n = "root.menu.MultiplayLobby";
                switch (this.featureType) {
                    case "quick":
                        i = this.quickMatchService, n = "root.menu.MultiplayQuickMatch";
                        break;
                    case "ranked":
                        i = this.ranked2MatchService, n = this.ranked2Service.getMainStateName();
                        break;
                    case "festival":
                        i = this.festivalMatchService, n = "root.menu.ConditionLimitedMatchLobby"
                }
                this.addManagedOnceListener(i, "match.reward.timeout", function(t) {
                    e.popupService.draw("ConfirmPopup", {
                        title: "COMMON_ERROR_UNDEFINEOBJ_TITLE",
                        description: e.$filter("template")({
                            errormsg: t
                        }, "COMMON_ERROR_UNDEFINEOBJ_DESC"),
                        confirm: function() {
                            return e.stateService.go(n)
                        }
                    })
                }), i.deferredFinished.promise.then(function(t) {
                    var n = l.store.getState().reward,
                        o = t || n.isMatchExpired,
                        a = e.getNextState(o);
                    e.stateService.prebuildFaceForState(a).then(function() {
                        r.info("[META DEBUG] prebuilt " + a), e.preloadRewardScreen.resolve()
                    }), e.initCountDown(function() {
                        Promise.all([e.preloadRewardScreen.promise, i.deferredRewarded.promise]).then(function() {
                            r.info("[META DEBUG] Go " + a), e.stateService.go(a)
                        })
                    }, o)
                })
            }, t.prototype.getNextState = function(e) {
                return !e && this.isSpeedTeamMode() ? "root.MultiplayRewardTeamBattle" : "root.MultiplayReward"
            }, t.prototype.update = function(e) {
                _.isEmpty(e) || _.isEmpty(e.records) || this.raceMatchResultList.applyCollection(this.filterRecords(e.records.slice()))
            }, t.prototype.isDriftMode = function() {
                return "DRIFTINDIVIDUAL" === this.gameMode
            }, t.prototype.isFoxhuntingMode = function() {
                return "FOXHUNTINGINDIVIDUAL" === this.gameMode
            }, t.prototype.isPursuitMode = function() {
                return "PURSUITINDIVIDUAL" === this.gameMode
            }, t.prototype.isTeamBattle = function() {
                return this.gameModeService.isTeamMode(this.gameMode)
            }, t.prototype.isSpeedTeamMode = function() {
                return "SPEEDTEAM" === this.gameMode
            }, t.prototype.getRecordTitle = function() {
                return this.isDriftMode() ? "GAMEROOM_PLAYER_DP" : this.isFoxhuntingMode() ? "FOXHUNTINGINDIVIDUAL_RESULTLIST_WINLOSE" : "FRIENDLYMATCH_RESULT_COLUMN_LAPTIME"
            }, t.prototype.getEtcTitle = function() {
                return this.isFoxhuntingMode() ? "FOXHUNTINGINDIVIDUAL_RESULTLIST_HOWTOWIN" : "FRIENDLYMATCH_RESULT_COLUMN_GAPONNO1"
            }, t.prototype.getEtc2Title = function() {
                return this.isPursuitMode() ? "FRIENDLYMATCH_RESULT_COLUMN_PURSUITRESULT" : "SPEEDTEAMMATCH_RESULT_RANKPOINT"
            }, t.prototype.getTitleLabel = function() {
                return this.isTeamBattle() ? "team" : this.isDriftMode() ? "drift" : this.isFoxhuntingMode() ? "foxhunting" : this.isPursuitMode() ? "multyPursuit" : "default"
            }, t.prototype.filterRecords = function(e) {
                void 0 === e && (e = []);
                var t = e.map(function(e) {
                    return n.__assign({}, e)
                });
                return this.sortRecords(t), this.refineRecords(t), t
            }, t.prototype.sortRecords = function(e) {
                switch (this.gameMode) {
                    case "DRIFTINDIVIDUAL":
                        e.sort(function(e, t) {
                            return t.driftpoint - e.driftpoint
                        });
                        break;
                    default:
                        e.sort(function(e, t) {
                            return e.time && t.time ? e.time - t.time : e.completionRate && t.completionRate ? t.completionRate - e.completionRate : t.ratio - e.ratio
                        })
                }
                var t = l.store.getState().match.match;
                e.sort(function(e, i) {
                    var n = _.find(t.players, {
                            id: e.id
                        }),
                        r = _.find(t.players, {
                            id: i.id
                        }),
                        o = "disconnected" === n.state || "left" === n.state;
                    return o === ("disconnected" === r.state || "left" === r.state) ? 0 : o ? 1 : -1
                })
            }, t.prototype.getMedalTier = function(e) {
                return this.ranked2Service.getMedalTier(e, this.featureType)
            }, t.prototype.refineRecords = function(e) {
                var t = this,
                    i = l.store.getState().match.match,
                    n = l.store.getState().numberPlate.defaultNumberPlate;
                e.forEach(function(r, o) {
                    var a = _.find(i.players, function(e) {
                            return e.id === r.id
                        }),
                        s = t.getMedalTier(r.id);
                    r.disconnected = "disconnected" === a.state || "left" === a.state, r.name = t.getPlayerName(r), r.avatar = t.getAvatar(r), r.medalTier = s.code, r.medalType = s.mode, r.vehicleName = t.getVehicleName(r, a), r.plate = a.plate ? a.plate : n, r.rank = o + 1, r.gapTime = r.time - e[0].time, r.team = a.team, r.gapDp = r.driftpoint - e[0].driftpoint, r.igr = a.vehicle && !!a.vehicle.igr, r.arrested = a.arrested
                })
            }, t.prototype.getAvatar = function(e) {
                var t = e.id || e.target;
                return this.$filter("cdn_avatar")(this.playerSnippetService.getSnippet(t).avatar)
            }, t.prototype.getPlayerName = function(e) {
                var t = e.id || e.target;
                return e.disconnected ? this.$filter("translate")("COMMON_MATCHRESULT_NOUSERINFO") : this.playerSnippetService.getSnippet(t).name
            }, t.prototype.getVehicleName = function(e, t) {
                e.id || e.target;
                if (e.disconnected) return "";
                var i = t.vehicle.code,
                    n = this.vehicleDataService.getVehicleData(i);
                return this.$filter("manufacturerName")(n.manufacturerCode) + " " + this.$filter("vehicleName")(i)
            }, t.prototype.initCountDown = function(e, t) {
                var i = this;
                this.remainSecs = t ? a.Constants.MatchResultWaitTimeOnAbandonMatch : a.Constants.MatchResultWaitTime;
                var n = this.convertFace(".REMAINEDTIMECONTAINER > .id-secondNum");
                this.bindText(n, this.remainSecs.toString()), n.visible = !0, this.getFace(".REMAINEDTIMECONTAINER > .id-description").visible = !0;
                var r = setInterval(function() {
                    i.remainSecs--, i.bindText(n, i.remainSecs.toString()), n.visible = i.remainSecs >= 0, i.getFace(".REMAINEDTIMECONTAINER > .id-description").visible = !_.isUndefined(i.remainSecs), 0 === i.remainSecs && (clearInterval(r), e())
                }, 1e3)
            }, t.prototype.onDetach = function() {
                var e = this;
                this.bgmService.stop(2e3).then(function() {
                    return e.bgmService.playMeta()
                })
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$filter")], v.prototype, "$filter", void 0), n.__decorate([o.autowired("recordService")], v.prototype, "recordService", void 0), n.__decorate([o.autowired("room2MatchService")], v.prototype, "room2MatchService", void 0), n.__decorate([o.autowired("quickMatchService")], v.prototype, "quickMatchService", void 0), n.__decorate([o.autowired("ranked2MatchService")], v.prototype, "ranked2MatchService", void 0), n.__decorate([o.autowired("festivalMatchService")], v.prototype, "festivalMatchService", void 0), n.__decorate([o.autowired("playerSnippetService")], v.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("driverService")], v.prototype, "driverService", void 0), n.__decorate([o.autowired("stateService")], v.prototype, "stateService", void 0), n.__decorate([o.autowired("externalService")], v.prototype, "externalService", void 0), n.__decorate([o.autowired("popupService")], v.prototype, "popupService", void 0), n.__decorate([o.autowired("bgmService")], v.prototype, "bgmService", void 0), n.__decorate([o.autowired("dimService")], v.prototype, "dimService", void 0), n.__decorate([o.autowired("vehicleDataService")], v.prototype, "vehicleDataService", void 0), n.__decorate([o.autowired("ranked2Service")], v.prototype, "ranked2Service", void 0), n.__decorate([o.autowired("gameModeService")], v.prototype, "gameModeService", void 0), n.__decorate([o.autowired("worldChatService")], v.prototype, "worldChatService", void 0), t.MatchResultBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(194),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.bindRank = function(e) {
                var t = this.getPlayerColor(e),
                    i = this.convertFace(".RaceRankedLabel");
                this.bindText(i.$(".id-rankNum"), e.rank.toString()), i.visible = !!e.driftpoint, i.gotoAndStop(t);
                var n = this.convertFace(".RetireText");
                n.visible = !e.driftpoint, n.gotoAndStop(t)
            }, t.prototype.bindRecord = function(e) {
                var t = this.convertFace(".TimeRecordLabel");
                this.bindText(t.$(".DriftPoint"), r.default.formatDriftPoint(e.driftpoint)), t.gotoAndStop(this.getPlayerColor(e));
                var i = this.getFace(".id-UNIT");
                this.bindText(i, "DP"), t.visible = !!e.driftpoint
            }, t.prototype.bindRetiredLabel = function(e) {
                var t = this.convertFace(".DoNotRecordRightLabel");
                this.translate(t.$(".NoneRecordRight"), e.disconnected ? "LOADINGSCREEN_LOGOUT" : "BEPLAY_MAIN_DPZERO"), t.visible = !e.driftpoint, t.gotoAndStop(this.getPlayerColor(e))
            }, t.prototype.bindGapRecord = function(e) {
                var t = this.convertFace(".GapTimeRecordLabel");
                this.bindText(t.$(".GapNumber"), "" + r.default.numberWithCommas(e.gapDp)), t.gotoAndStop(this.getPlayerColor(e)), t.visible = !!e.driftpoint && !!e.gapDp
            }, t
        }(o.RaceMatchResultItemBinder);
    t.DriftMatchResultItemBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(39),
        o = i(194),
        a = i(4),
        s = i(94),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.bindBackground = function(e) {
                this.gotoAndStop(".ColumnBackgroundMC", e.rank % 2 == 0 ? "even" : "odd"), this.gotoAndStop(".ColumnTeamABackgroundMC", e.rank % 2 == 0 ? "even" : "odd"), this.gotoAndStop(".ColumnTeamBBackgroundMC", e.rank % 2 == 0 ? "even" : "odd"), this.gotoAndStop(".ColumnNoneFinishBackgroundMC", e.rank % 2 == 0 ? "even" : "odd"), this.getFace(".ColumnMyBackgroundMC").visible = this.isMe(e), this.isMe(e) && this.gotoAndStop(".ColumnMyBackgroundMC", r.getTeamString(e.team)), this.getFace(".ColumnBackgroundMC").visible = e.disconnected, this.getFace(".ColumnTeamABackgroundMC").visible = e.team === r.Team.A, this.getFace(".ColumnTeamBBackgroundMC").visible = e.team === r.Team.B, this.getFace(".ColumnNoneFinishBackgroundMC").visible = !1
            }, t.prototype.bindRank = function(e) {
                var t = this.getPlayerColor(e),
                    i = this.convertFace(".RaceRankedLabel");
                this.bindText(i.$(".RankNumber"), e.rank.toString()), i.$(".RankNumber").visible = !!e.time, i.gotoAndStop(t), i.$(".RetireIcon").visible = !e.time
            }, t.prototype.bindPlayerName = function(e) {
                var t = this.convertFace(".PlayerNameLabel");
                this.bindText(t.$(".id-playerName"), e.name), t.gotoAndStop(this.getPlayerColor(e))
            }, t.prototype.bindVehicleName = function(e) {
                var t = this.convertFace(".VehicleNameLabel");
                this.bindText(t.$(".id-vehicleName"), e.vehicleName), t.gotoAndStop(this.getPlayerColor(e, !0))
            }, t.prototype.bindRecord = function(e) {
                var t = this.convertFace(".TimeRecordLabel");
                this.bindText(t.$(".CurrentRecord"), a.default.formatLapTime(e.time)), t.visible = !!e.time, t.gotoAndStop(this.getPlayerColor(e, !0))
            }, t.prototype.bindGapRecord = function(e) {
                var t = this.convertFace(".GapTimeRecordLabel");
                this.bindText(t.$(".GapPointLabel"), "+" + a.default.formatLapTime(e.gapTime)), t.visible = !!e.time && !!e.gapTime, t.gotoAndStop(this.getPlayerColor(e, !0))
            }, t.prototype.bindTeamScore = function(e) {
                var t = this.convertFace(".id-teamScore"),
                    i = this.getTeamPoint(e);
                this.bindText(t.$(".id-blueScore"), i ? "+" + i : i.toString()), this.gotoAndStop(t, this.getPlayerColor(e, !0)), t.visible = !0
            }, t.prototype.applyProps = function(t) {
                if (!e.prototype.applyProps.call(this, t)) return !1;
                this.bindTeamScore(t), this.apply(".VehicleNameLabel .PcCafeIcon", s.igr, t.igr)
            }, t
        }(o.RaceMatchResultItemBinder);
    t.TeamBattleResultItemBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(194),
        o = i(39),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.bindRecord = function(e) {
                var t = this.convertFace(".WhetherLabel"),
                    i = this.convertFace(".MethodLabel");
                if (!e.time) return t.visible = !1, void(i.visible = !1);
                var n = 1 === e.rank;
                this.translate(t.$(".Whether"), n ? "FOXHUNTINGINDIVIDUAL_RESULTLIST_WIN" : "FOXHUNTINGINDIVIDUAL_RESULTLIST_LOSE");
                var r = (this.isMe(e) ? "mylist" : "default") + (n ? "Win" : "Lose");
                t.gotoAndPlay(r);
                var a = "FOXHUNTINGINDIVIDUAL_RESULTLIST_COMPLATERACE";
                switch (e.foxhuntingWinType) {
                    case o.FoxhuntingWinType.Overtake:
                        a = "FOXHUNTINGINDIVIDUAL_RESULTLIST_OVERTAKE";
                        break;
                    case o.FoxhuntingWinType.RearEnd:
                        a = "FOXHUNTINGINDIVIDUAL_RESULTLIST_BEOVERTAKEN"
                }
                this.translate(i.$(".methodText"), a), this.bindText(i.$(".lapNum"), e.lapCount + " " + this.$filter("translate")("FOXHUNTINGINDIVIDUAL_RESULTLIST_LAP")), i.gotoAndPlay(r)
            }, t.prototype.bindGapRecord = function(e) {}, t
        }(r.RaceMatchResultItemBinder);
    t.FoxhuntingResultItemBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(194),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.bindRetiredLabel = function(t) {
                e.prototype.bindRetiredLabel.call(this, t);
                var i = this.getPlayerColor(t),
                    n = t.arrested || !t.time ? "Lose" : "Win",
                    r = this.getFace("WHETHER_LABEL");
                r.visible = !0, this.gotoAndPlay(r, "" + i + n), this.translate(r.$("whether"), t.arrested || !t.time ? "FRIENDLYMATCH_RESULT_PURSUITRESULT_FAIL" : "FRIENDLYMATCH_RESULT_PURSUITRESULT_SUCCESS")
            }, t
        }(r.RaceMatchResultItemBinder);
    t.PursuitResultItemBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1297);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/player", 3).container({
            stages: {
                "player-select": r.PlayerCreateBinder
            }
        });
        e.state("root.Players", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1298),
        a = i(1299),
        s = i(315),
        c = i(37),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.state = s.createSharedState(), t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = this.state;
                this.addChildBinder(".PlayerNameInput", o.PlayerNameInputBinder, {
                    state: t
                }), this.addChildBinder(".KeyboardControlSelect", a.ControlSelectBinder, {
                    state: t
                }), this.visible(".id-exitButton", !1), this.visible(".id-secondPasswordButton", !1);
                var i = s.Scene.initial;
                t.on(s.Events.changeScene, function(t) {
                    i !== t && (e.gotoAndPlay(".id-bg", s.Scene[t]), e.audioService.get(c.FxAudioCode.BlueBanner_Slow).play(), i = t)
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.externalService.beCacheVehicles(_.map(this.vehicleDataService.getDefaultVehicles(), "code")), this.externalService.camera.vehicleSelect(0);
                var t = this.vehicleDataService.getDefaultVehicles()[0];
                this.externalService.beSelectVehicle(t), this.dimService.blur(1e3).then(function() {
                    e.state.emit(s.Events.changeScene, s.Scene.playerNameInput, t)
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("vehicleDataService")], d.prototype, "vehicleDataService", void 0), n.__decorate([r.autowired("dimService")], d.prototype, "dimService", void 0), n.__decorate([r.autowired("audioService")], d.prototype, "audioService", void 0), t.PlayerCreateBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(58),
        s = i(315),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.nameInputField = this.convertFace(".id-playerNameInput .id-textField"), this.nameInputField.htmlElement.onfocus = function() {
                    return e.focusIn()
                }, this.nameInputField.htmlElement.onblur = function() {
                    return e.focusOut()
                }, this.nameInputField.htmlElement.oninput = function() {
                    return e.onInput()
                }, this.guide = this.getFace(".textGuide"), this.translate(".textGuide .comp-TextField", "PLAYER_CREATION_INPUTINFO"), this.confirmButton = this.convertFace(".id-nameInputConfirm"), this.translate(this.confirmButton, "PLAYER_CREATION_BUTTON_CONFIRM"), this.confirmButton.on(o.MouseEventEx.CLICK, function() {
                    return e.confirm()
                }), this.configLoader.getConfig().then(function(t) {
                    return e.locale = t.locale
                }), this.playerName = "", this.creating = !1, this.duplicateName = !1, this.illegalName = !1, this.guide.visible = !0, this.confirmButton.enabled = !1, this.setGuideText(), this.onKeyDown = function(t) {
                    var i = e.removeBannedChar(e.playerName);
                    if (e.creating || 32 === t.keyCode || i.length < 2 && 13 === t.keyCode || i.length > 10 && 13 === t.keyCode) return void t.originalEvent.preventDefault();
                    e.playerName && 13 === t.keyCode && i.length >= 2 && i.length <= 10 && (t.originalEvent.preventDefault(), e.confirm())
                }, $(window).on("keydown", this.onKeyDown), $(window).on("keypress", this.onKeyDown), this.setupEvents()
            }, t.prototype.onDetach = function() {
                $(window).off("keydown", this.onKeyDown), $(window).off("keypress", this.onKeyDown)
            }, t.prototype.setupEvents = function() {
                var e, t = this;
                this.props.state.on(s.Events.changeScene, function(i, n) {
                    e !== i && i === s.Scene.playerNameInput && (t.face.visible = !0, t.gotoAndPlay(t.face, "in"), t.externalService.camera.playerNameInput(0), t.selectedVehicle = n, t.bindVehicle(n)), e = i
                })
            }, t.prototype.bindVehicle = function(e) {
                var t = this.$filter("manufacturerName")(e.manufacturerCode),
                    i = this.$filter("vehicleName")(e.code);
                this.bindText(".id-vehicleNameLabel", t + " " + i), this.translate(".id-titleLable", "PLAYER_CREATION_VEHICLE_TITLE")
            }, t.prototype.focusIn = function() {
                this.guide.visible = !1
            }, t.prototype.focusOut = function() {
                this.playerName.length <= 0 || "<br>" === this.playerName ? this.guide.visible = !0 : this.guide.visible = !1
            }, t.prototype.onInput = function() {
                this.playerName = this.nameInputField.text, this.clearErrors(), this.confirmButton.enabled = this.enabledConfirmButton() && !this.creating
            }, t.prototype.isConsonantName = function(e) {
                return null !== e.match(/[ㄱ-ㅣ]/gi)
            }, t.prototype.removeBannedChar = function(e) {
                var t = e;
                return t = "cn" === this.locale ? t.replace(/[^0-9a-zA-Z\u4e00-\u9fff]/gi, "") : "ko" === this.locale ? t.replace(/[^0-9a-zA-Z가-힣ㄱ-ㅣ]/gi, "") : t.replace(/[^0-9a-zA-Z]/gi, "")
            }, t.prototype.enabledConfirmButton = function() {
                var e = this.removeBannedChar(this.playerName);
                return !!this.banwordService.isBetweenLength(e, 2, 10)
            }, t.prototype.clearErrors = function() {
                this.duplicateName = !1, this.illegalName = !1, this.setGuideText()
            }, t.prototype.getGuideText = function() {
                return this.duplicateName ? "PLAYER_CREATION_USEDNAMEINFO" : this.illegalName ? "PLAYERNAME_NOTALLOWED" : "PLAYER_CREATION_NAMEINFO"
            }, t.prototype.setGuideText = function() {
                this.translate(".id-guideText .id-textField", this.getGuideText()), this.duplicateName || this.illegalName ? ($(".id-guideText").addClass("alert-color"), $(".id-guideText .id-textField").addClass("alert-color")) : ($(".id-guideText").removeClass("alert-color"), $(".id-guideText .id-textField").removeClass("alert-color"))
            }, t.prototype.shakeErrorMessage = function(e) {
                var t = $(".id-guideText > .id-textField");
                t.removeClass("message-alarm"), setTimeout(function() {
                    return t.addClass("message-alarm")
                }), this.setGuideText(), this.uistateNotifyService.setSubState(11, e)
            }, t.prototype.validateByClient = function() {
                return this.clearErrors(), !!this.playerName && (!this.isConsonantName(this.playerName) && this.removeBannedChar(this.playerName) === this.playerName || (this.illegalName = !0, this.shakeErrorMessage("unknown"), !1))
            }, t.prototype.selectPlayer = function(e) {
                var t = this;
                this.playerService.selectPlayer(e.id).then(function() {
                    return log.debug("@pid: " + e.id + ", @playerName: " + e.name), t.vehicleService.fetch()
                }).then(function() {
                    t.externalService.beSelectPlayer(e.id, e.name), t.face.once("stop", function() {
                        t.face.visible = !1, t.props.state.emit(s.Events.changeScene, s.Scene.keyboardControlSelect)
                    }), t.gotoAndPlay(t.face, "out")
                })
            }, t.prototype.confirm = function() {
                var e = this;
                if (this.validateByClient()) {
                    var t = function(t) {
                        e.creating = t, e.confirmButton.enabled = !t
                    };
                    t(!0);
                    var i = this.$filter("template")({
                        playername: this.playerName
                    }, "PLAYER_CREATION_NAMEINFO_WARNING");
                    this.popupService.draw("ConfirmCancelPopup", {
                        title: i,
                        description: "PLAYER_CREATION_NAMEINFO_WARNING_DESC",
                        confirmString: "PLAYER_CREATION_NAMEINFO_WARNING_CONFIRM",
                        cancelString: "PLAYER_CREATION_NAMEINFO_WARNING_CANCEL",
                        confirm: function() {
                            var i = {
                                vcode: e.selectedVehicle.code,
                                dcode: 20,
                                name: e.playerName,
                                slot: 0
                            };
                            e.playerService.createPlayer(i).then(function(t) {
                                e.externalService.beSelectPlayer(t.id, t.name), e.selectPlayer(t)
                            }).catch(function(i) {
                                switch (t(!1), i.errorCode) {
                                    case a.ErrorCode.OccupiedName:
                                    case a.ErrorCode.PlayerNameAlreadyExist:
                                        e.duplicateName = !0, e.shakeErrorMessage("occupied");
                                        break;
                                    case a.ErrorCode.BanwordName:
                                        e.illegalName = !0, e.shakeErrorMessage("banword")
                                }
                            })
                        },
                        cancel: function() {
                            return t(!1)
                        }
                    })
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([r.autowired("playerService")], c.prototype, "playerService", void 0), n.__decorate([r.autowired("vehicleService")], c.prototype, "vehicleService", void 0), n.__decorate([r.autowired("configLoader")], c.prototype, "configLoader", void 0), n.__decorate([r.autowired("banwordService")], c.prototype, "banwordService", void 0), n.__decorate([r.autowired("uistateNotifyService")], c.prototype, "uistateNotifyService", void 0), n.__decorate([r.autowired("popupService")], c.prototype, "popupService", void 0), t.PlayerNameInputBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(315),
        s = i(2),
        c = i(224),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.setupLabels(), this.setupEvents(), this.setupConfirm(), this.setupButtons()
            }, t.prototype.setupLabels = function() {
                this.translate(".id-keySelectTitle", "PLAYER_CREATION_KEYSELECT_TITLE");
                var e = this.getFace(".id-guideText"),
                    t = e.$(".id-caution"),
                    i = e.$(".id-textField");
                e.hasSize = !0, t.hasSize = !0, t.yOffset = 4, i.hasSize = !1, this.translate(i, "PLAYER_CREATION_KEYSELECT_GUIDE")
            }, t.prototype.bindButton = function(e, t, i, n) {
                var r = this;
                this.translate(e.$(".id-titleLabel"), i), this.translate(e.$(".id-descriptionLabel"), n), this.on(e, s.MouseEventEx.CLICK, function() {
                    r.selected = e, e.selected = !0, t.selected = !1, r.confirm.enabled = !0
                })
            }, t.prototype.setupButtons = function() {
                this.bindButton(this.wasd, this.arrow, "PLAYER_CREATION_KEYSELECT_WASD_TITLE", "PLAYER_CREATION_KEYSELECT_WASD_DESC"), this.bindButton(this.arrow, this.wasd, "PLAYER_CREATION_KEYSELECT_ARROW_TITLE", "PLAYER_CREATION_KEYSELECT_ARROW_DESC")
            }, t.prototype.setupConfirm = function() {
                var e = this;
                this.translate(this.confirm, "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.confirm.enabled = !1, this.onClickSafe(this.confirm, function() {
                    return e.selected === e.wasd ? e.inputKeyConfigService.setWasdType() : e.inputKeyConfigService.setArrowType(), new r(function(t) {
                        e.face.once("stop", function() {
                            t(), e.dispatch(c.show()), e.openworldService.connect().then(function() {
                                return e.stateService.go("root.menu.Openworld")
                            }).then(function() {
                                return e.dispatch(c.hide())
                            })
                        }), e.gotoAndPlay(e.face, "out"), e.props.state.emit(a.Events.changeScene, a.Scene.complete)
                    })
                })
            }, t.prototype.setupEvents = function() {
                var e, t = this;
                this.props.state.on(a.Events.changeScene, function(i) {
                    e !== i && i === a.Scene.keyboardControlSelect && (t.gotoAndPlay(t.face, "in"), t.externalService.camera.vehicleSelect(0)), e = i
                })
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([o.autowired("stateService")], d.prototype, "stateService", void 0), n.__decorate([o.autowired("inputKeyConfigService")], d.prototype, "inputKeyConfigService", void 0), n.__decorate([o.autowired("openworldService")], d.prototype, "openworldService", void 0), n.__decorate([o.select(".id-WASD")], d.prototype, "wasd", void 0), n.__decorate([o.select(".id-ARROW")], d.prototype, "arrow", void 0), n.__decorate([o.select(".id-keySelectConfirm")], d.prototype, "confirm", void 0), t.ControlSelectBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(1301),
        o = i(11),
        a = i(290),
        s = i(230);
    i(628);
    var c = i(628),
        d = i(1337),
        l = i(1339),
        u = i(1340),
        p = ["main", "root.startScreen", "root.coreLevelTest", "root.flaPlayer"];
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        function t(e, t, i, r, o, a) {
            return _.includes(p, i.$to().name) ? e.when() : t.testAccount ? (o.testAccount = t.testAccount, o.init()) : o.recoverSession().catch(function(e) {
                n.warn("fail to recover session:", e), a.post("RequestError", "Session recover failure", JSON.stringify(e)), r.go("root.startScreen")
            })
        }
        t.$inject = ["$q", "$stateParams", "$transition$", "stateService", "bootstrapService", "exceptionHandleService"];
        var i = new o.StateDefinition("?testAccount", 0).popup({
            stages: {
                popup: {
                    stageBinder: r.PopupStageBinder,
                    customComponents: {
                        IFrameView: s.IFrameView
                    },
                    willBeDelayLoaded: !0
                }
            }
        }).broadcast({
            stages: {
                "world-chat-broadcast-popup": d.BroadcastPopupBinder
            }
        }).announcement({
            stages: {
                announcement: c.AnnouncementBinder
            }
        }).connState({
            controller: "ConnStateController",
            template: l.tmpl
        }).coreLoading({
            stages: {
                "core-loading-screen": u.CoreLevelLoadingBinder
            }
        }).setResolve({
            rootStateResolver: t,
            _util: "$util",
            _debugService: "debugService"
        });
        e.state("root", i)
    }]).controller("ConnStateController", ["$scope", "pushService", function(e, t) {
        e.isConnected = function() {
            return t.connectionState === a.ConnectionState.Connected
        }, e.connectionState = function() {
            switch (t.connectionState) {
                case a.ConnectionState.Uninitialized:
                    return "";
                case a.ConnectionState.Reconnecting:
                    return "reconnecting...";
                case a.ConnectionState.Disconnected:
                    return "disconnected"
            }
            return "EDGE"
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(8),
        s = i(298),
        c = i(1302),
        d = i(1303),
        l = i(1304),
        u = i(1305),
        p = i(1306),
        h = i(1307),
        f = i(1308),
        v = i(1309),
        m = i(1310),
        g = i(1311),
        y = i(1312),
        S = i(1313),
        E = i(1314),
        T = i(1315),
        C = i(1316),
        b = i(1317),
        P = i(1318),
        I = i(1319),
        M = i(1320),
        A = i(1321),
        N = i(1322),
        R = i(1323),
        L = i(1324),
        O = i(1326),
        x = i(1327),
        w = i(1328),
        B = i(1329),
        D = i(1330),
        F = i(1331),
        k = i(1332),
        U = i(1333),
        H = i(37),
        V = i(1334),
        G = i(1335),
        j = i(1336),
        K = i(29),
        W = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.registeredPopups = {}, t.popups = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.background = this.getFace(".id-Background > svg"), this.backGradient = this.getFace(".id-gradient > .BackGradient"), this.mask = this.getFace(".Mask > svg"), this.register("InboxItemConfirmPopup", P.InboxItemConfirmPopup), this.register("WebLinkConfirmCancelPopup", c.WebLinkPopup), this.register("WebPageConfirmCancelPopup", d.WebPagePopup), this.register("PromoteResultConfirmPopup", m.PromoteResultConfirmPopup), this.register("SellVehicleCancelPopup", p.SellVehicleCancelPopup), this.register("MarketVehicleReofferPopup", S.MarketVehicleReofferPopup), this.register("SalesReceiptListPopup", h.SalesReceiptListPopup), this.register("SalesReceiptPopup", f.SalesReceiptPopup), this.register("SellVehicleConfirmPopup", C.SellVehicleConfirmPopup), this.register("SellVehiclePopup", b.SellVehiclePopup), this.register("BuyVehicleConfirmPopup", T.BuyVehicleConfirmPopup), this.register("BuyVehiclePopup", E.BuyVehiclePopup), this.register("UseItemConfirmPopup", M.UseItemConfirmPopup), this.register("FunctionUnlockConfirmPopup", y.FunctionUnlockConfirmPopup), this.register("UsePackagePopup", I.UseInventoryBundleItemPopup), this.register("NewLevelupRewardConfirmPopup", U.LevelupRewardPopup), this.register("NewLevelupRewardPreviewConfirmPopup", U.LevelupRewardPreviewPopup), this.register("VehicleProductionConfirmPopup", g.VehicleProductionConfirmPopup), this.register("PartsLevelupConfirmPopup", v.PartsLevelupConfirmPopup), this.register("BuyShopItemConfirmPopup", O.BuyShopItemConfirmPopup), this.register("DestroyNumberPlatePopup", A.DestroyNumberPlatePopup), this.register("ExchangeNumberPlateConfirmPopup", N.ExchangeNumberPlateConfirmPopup), this.register("ExchangeNumberPlateRestartConfirmPopup", R.ExchangeNumberPlateRestartConfirmPopup), this.register("AutoCollectNumberPlatePopup", L.AutoCollectNumberPlatePopup), this.register("BuyShopItemDecidePopup", x.BuyShopItemDecidePopup), this.register("BuyShopItemCompletePopup", w.BuyShopItemCompletePopup), this.register("GiftShopItemConfirmPopup", B.GiftShopItemConfirmPopup), this.register("ConfirmPopup", l.ConfirmPopup), this.register("ConfirmCancelPopup", u.ConfirmCancelPopup), this.register("ItemIconConfirmPopup", D.ItemIconConfirmPopup), this.register("CoolingOffConfirmPopup", F.CoolingOffConfirmPopup), this.register("ConfirmMultiLabelPopup", k.ConfirmMultiLabelPopup), this.register("PartsInstallNotificationPopup", V.PartsInstallNotificationPopup), this.register("PartsLevelUpNotificationPopup", G.PartsLevelUpNotificationPopup), this.register("OpenWorldCampaignRewardConfirmPopup", j.OpenworldCampaignRewardConfirmPopup), this.popupContainer = this.convertFace(".id-contents"), this.popupPrototypeData = this.getFace(".ConfirmPopup").data
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.resetPopup(), this.stage.on("stop", function() {
                    "in" === e.stage.currentLabel ? e.popupService.emit("popupOpened", {
                        popupName: e.activePopup
                    }) : "out" === e.stage.currentLabel && e.popupService.emit("popupClosed", {
                        popupName: e.activePopup
                    })
                })
            }, t.prototype.onKeyboardConfirm = function() {
                var e = this.popups[this.activePopup];
                return e && e.onKeyboardConfirm(), !1
            }, t.prototype.onKeyboardCancel = function() {
                var e = this.popups[this.activePopup];
                return e && e.onKeyboardCancel(), !1
            }, t.prototype.registerKeyboardEvents = function() {
                var e = this,
                    t = K.KeyboardMap.getKeyCode("ENTER"),
                    i = K.KeyboardMap.getKeyCode("SPACE"),
                    n = K.KeyboardMap.getKeyCode("ESCAPE");
                $(document).on("keydown.popup", function(r) {
                    var o = r.originalEvent,
                        a = o.keyCode;
                    if (!o.repeat) return a === t || a === i ? e.onKeyboardConfirm() : a === n ? e.onKeyboardCancel() : void 0
                })
            }, t.prototype.unregisterKeyboardEvents = function() {
                $(document).off("keydown.popup")
            }, t.prototype.align = function(e) {
                var t = this.face.$(".Mask").y,
                    i = (e.$("> svg") || e).height;
                e.x = 0, e.y = .5 * (this.face.height - i) - t
            }, t.prototype.register = function(e, t) {
                this.registeredPopups[e] = t
            }, t.prototype.initPopup = function(e) {
                var t = this,
                    i = n.__assign({}, this.popupPrototypeData);
                i.libraryItemName = i.libraryItemNameBase = i.name = e;
                var r = this.stage.buildInstance(i);
                this.popupContainer.addChild(r);
                var o = "." + e,
                    a = this.registeredPopups[e],
                    s = this.addChildBinder(this.getFace(o), a, {
                        confirm: function(e) {
                            return t.onConfirm(e)
                        },
                        cancel: function() {
                            return t.onCancel()
                        }
                    });
                return this.popups[e] = s, this.align(s.face), s
            }, t.prototype.drawPopup = function(e, t, i) {
                this.activePopup = i, e.show(t), this.gotoAndStop(".id-Background", t.background ? t.background : "default"), this.gotoAndStop(".id-gradient", t.background ? t.background : "default");
                var n = (e.face.$("> svg") || e.face).height,
                    r = n / 248;
                this.background.scaleY = r, this.backGradient && (this.backGradient.scaleY = r), this.mask.scaleY = r, this.stage.visible = !0, this.stage.gotoAndPlay("in"), this.audioService.get(H.FxAudioCode.BlueBanner_Fast).play(), this.uistateNotifyService.setSubState(9, i), this.registerKeyboardEvents()
            }, t.prototype.closePopup = function() {
                var e = this;
                return this.popups[this.activePopup].close(), this.activePopup = void 0, this.unregisterKeyboardEvents(), new r(function(t) {
                    e.gotoAndPlay(e.stage, "out"), e.once(e.stage, a.EventEx.STOP, function() {
                        e.resetPopup(), t()
                    }), e.audioService.get(H.FxAudioCode.BlueBanner_Fast).play(), e.uistateNotifyService.setSubState(10)
                })
            }, t.prototype.resetPopup = function() {
                this.background.scaleY = 1, this.mask.scaleY = 1, this.stage.visible = !1
            }, t.prototype.update = function(e) {
                var t = this;
                if (!_.isEmpty(e)) {
                    if (this.activePopup) {
                        if (e.name === this.activePopup) {
                            var i = _.assign({
                                confirm: function(e) {
                                    return t.onConfirm(e)
                                },
                                cancel: function() {
                                    return t.onCancel()
                                }
                            }, e.context);
                            return this.popups[this.activePopup].setProps(i)
                        }
                        return void this.closePopup().then(function() {
                            var i = t.popupService;
                            void 0 !== e.confirm ? i.confirmCurrent(e.confirm) : void 0 !== e.cancel ? i.cancelCurrent() : void 0 !== e.close && i.closeCurrent(), i.notifyClose()
                        })
                    }
                    if (e.name) {
                        var n = this.popups[e.name] || this.initPopup(e.name);
                        this.drawPopup(n, e.context, e.name)
                    }
                }
            }, t.prototype.onDetach = function() {
                this.unregisterKeyboardEvents()
            }, t.prototype.onConfirm = function(e) {
                this.dispatch(s.confirm(e))
            }, t.prototype.onCancel = function() {
                this.dispatch(s.cancel())
            }, t.prototype.mapStateToProps = function(e) {
                return e.popup
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("popupService")], W.prototype, "popupService", void 0), n.__decorate([o.autowired("audioService")], W.prototype, "audioService", void 0), n.__decorate([o.autowired("uistateNotifyService")], W.prototype, "uistateNotifyService", void 0), t.PopupStageBinder = W
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.props,
                    i = t.confirm,
                    n = t.cancel,
                    r = this.mapFaces(".id-confirm", ".id-cancel"),
                    a = r[0],
                    s = r[1];
                a.on(o.MouseEventEx.CLICK, i), s.on(o.MouseEventEx.CLICK, n)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.drawLabel(".Title > .id-textfield", t.title), this.drawLabel(".Description > .id-textfield", t.description), this.drawLabel(".SubDescription > .id-textfield", t.subDescription), this.translate(".id-confirm", t.confirmText || "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.translate(".id-cancel", t.confirmText || "COMMON_POPUP_EXIT_BUTTON_CANCEL")
            }, t
        }(r.PopupBinder);
    t.WebLinkPopup = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(16),
        a = i(2),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.props,
                    i = t.confirm,
                    n = t.cancel,
                    r = this.mapFaces(".id-confirm", ".id-cancel"),
                    o = r[0],
                    s = r[1];
                o.on(a.MouseEventEx.CLICK, i), s.on(a.MouseEventEx.CLICK, n)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.publisherService.initIngameWebViewCookies(), this.gotoAndStop(this.face, this.publisherService.publisher), this.drawLabel(".Title > .id-textfield", t.title), this.drawLabel(".Description > .id-textfield", t.description), this.drawLabel(".SubDescription > .id-textfield", t.subDescription);
                var i = this.convertFace(".id-webPromotion");
                i && (i.src = t.link), this.translate(".id-confirm", t.confirmText || "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.translate(".id-cancel", t.confirmText || "COMMON_POPUP_EXIT_BUTTON_CANCEL")
            }, t
        }(r.PopupBinder);
    n.__decorate([o.autowired("publisherService")], s.prototype, "publisherService", void 0), t.WebPagePopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.getFace(".id-confirm"),
                    i = this.props.confirm;
                t.on(o.MouseEventEx.CLICK, i)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.drawLabel(".Title > .id-textfield", t.title), this.drawLabel(".Description > .id-textfield", t.description), this.drawLabel(".id-confirm", t.confirmString || "COMMON_POPUP_EXIT_BUTTON_CONFIRM")
            }, t
        }(r.PopupBinder);
    t.ConfirmPopup = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.props,
                    i = t.confirm,
                    n = t.cancel;
                this.getFace(".id-confirm").on(o.MouseEventEx.CLICK, i), this.getFace(".id-cancel").on(o.MouseEventEx.CLICK, n)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.update(t)
            }, t.prototype.update = function(e) {
                this.drawLabel(".Title > .id-textfield", e.title), this.drawLabel(".Description > .id-textfield", e.description), this.drawLabel(".id-confirm", e.confirmString || "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.drawLabel(".id-cancel", e.cancelString || "COMMON_POPUP_EXIT_BUTTON_CANCEL")
            }, t
        }(r.PopupBinder);
    t.ConfirmCancelPopup = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(56),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.props,
                    i = t.confirm,
                    n = t.cancel;
                this.getFace(".id-confirm").on(o.MouseEventEx.CLICK, i), this.getFace(".id-cancel").on(o.MouseEventEx.CLICK, n), this.vehicleBinder = this.addChildBinder(".id-vehicleItem", a.VehicleCard), this.drawLabel(".PopupName .id-textField", "TRADEMARKET_VEHICLE_POPUP_SELLCANCLE_TITLE"), this.drawLabel(".Title > .id-textField", "TRADEMARKET_VEHICLE_POPUP_SELLCANCLE_DESC"), this.drawLabel(".id-confirm", "GAMEOPTION_AFTERAPPLY_POPUP_YES"), this.drawLabel(".id-cancel", "GAMEOPTION_AFTERAPPLY_POPUP_NO"), this.getFace(".VehicleName").hasSize = !0, this.getFace(".id-painting .id-color").hasSize = !0
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.vehicleBinder.setProps({
                    vehicle: t.vehicle,
                    muteStatusIcon: !0,
                    disableMouse: !0
                })
            }, t
        }(r.PopupBinder);
    t.SellVehicleCancelPopup = s
}, function(module, exports, __webpack_require__) {
    "use strict";
    Object.defineProperty(exports, "__esModule", {
        value: !0
    });
    var tslib_1 = __webpack_require__(0),
        _ = __webpack_require__(22),
        face_redux_1 = __webpack_require__(1),
        face_binder_1 = __webpack_require__(28),
        collection_binder_1 = __webpack_require__(62),
        MouseEventEx_1 = __webpack_require__(2),
        vehicle_data_service_1 = __webpack_require__(134),
        popup_binder_1 = __webpack_require__(23),
        SalesReceiptListPopup = function(_super) {
            function SalesReceiptListPopup() {
                var e = null !== _super && _super.apply(this, arguments) || this;
                return e.bScrollBarApplied = !1, e
            }
            return tslib_1.__extends(SalesReceiptListPopup, _super), SalesReceiptListPopup.prototype.findScrollBounds = function(e) {
                var t = e.$("[fc-scroll-bounds]");
                return _.isUndefined(t) && (t = e.$("svg") || e.$(".comp-MovieClip")), t
            }, SalesReceiptListPopup.prototype.hideInvisibleElement = function(target, direction, options) {
                var children = $(target).find("" + eval(options.psScrollHideClass));
                if (0 !== children.length) {
                    var size = this.getElementSize(children[0], direction),
                        pos = "w" === direction ? target.scrollLeft : target.scrollTop,
                        posMin = 0 === pos ? -1 : Math.floor(pos / size) - 1,
                        posMax = posMin + parseInt(options.psScrollHideLength, 10) + 1;
                    _.forEach(children, function(e, t) {
                        var i = posMin < t && t < posMax;
                        e.style.opacity = i ? "1" : "0"
                    })
                }
            }, SalesReceiptListPopup.prototype.getElementSize = function(e, t) {
                for (var i, n = e; !i;)
                    if (!(i = "w" === t ? n.offsetWidth : n.offsetHeight)) {
                        if (n === document.body) break;
                        if (!n.parentNode) break;
                        n = n.parentNode
                    } return i
            }, SalesReceiptListPopup.prototype.applyScrollBar = function(e, t) {
                var i = this,
                    n = $(e.htmlElement),
                    r = this.findScrollBounds(e);
                e.width = r.width, e.height = r.height, e.hasSize = !0, t.fcNoPerfectScroll || (r.visible = !1, n.perfectScrollbar({
                    suppressScrollX: !_.isUndefined(t.suppressScrollX),
                    suppressScrollY: !_.isUndefined(t.suppressScrollY),
                    useBothWheelAxes: !_.isUndefined(t.useBothWheelAxes),
                    wheelSpeed: _.isUndefined(t.wheelSpeed) ? 1 : parseFloat(t.wheelSpeed)
                }), e.on("mouseOver", function(e) {
                    return n.perfectScrollbar("update")
                }), e.on("heightChanged", function() {
                    return n.perfectScrollbar("update")
                }), n.perfectScrollbar("update")), t.psScrollHideX && n.on("ps-scroll-x", function(e) {
                    return i.hideInvisibleElement(e.target, "w", t)
                }), t.psScrollHideY && n.on("ps-scroll-y", function(e) {
                    return i.hideInvisibleElement(e.target, "h", t)
                })
            }, SalesReceiptListPopup.prototype.onFaceReady = function() {
                var e = this;
                _super.prototype.onFaceReady.call(this);
                var t = this.props,
                    i = t.confirm,
                    n = t.cancel;
                this.getFace(".id-confirm").on(MouseEventEx_1.MouseEventEx.CLICK, i), this.getFace(".id-cancel").on(MouseEventEx_1.MouseEventEx.CLICK, n), this.drawLabel(".PopupName .id-textField", "TRADEMARKET_VEHICLE_RECEIPT_POPUP_TITLE"), this.drawLabel(".id-confirm", "TRADEMARKET_BUTTON_ALLRECEIPT"), this.drawLabel(".id-cancel", "TRADEMARKET_POPUP_CANCEL"), this.drawLabel(".id-quantity .id-name", "TRADEMARKET_SELLLIST_POPUP_LISTAMOUNT"), this.drawLabel(".id-total .id-name", "TRADEMARKET_SELLLIST_POPUP_ALLSUMRECEIPT"), this.drawLabel(".id-marketPriceContainer .id-titleClass", "TRADEMARKET_LISTCOLUMN_CLASS"), this.drawLabel(".id-marketPriceContainer .id-titleName", "TRADEMARKET_LISTCOLUMN_VEHICLENAME"), this.drawLabel(".id-marketPriceContainer .id-titleGrade", "TRADEMARKET_LISTCOLUMN_UPGRADE"), this.drawLabel(".id-marketPriceContainer .id-titleOVR", "TRADEMARKET_LISTCOLUMN_OVR"), this.drawLabel(".id-marketPriceContainer .id-titleVehicle", "TRADEMARKET_SELLLIST_VEHICLE_SELLPRICE"), this.drawLabel(".id-marketPriceContainer .id-titleCommission", "TRADEMARKET_SELLLIST_COMMISSION"), this.drawLabel(".id-marketPriceContainer .id-titlePCDiscount", "TRADEMARKET_SELLLIST_POPUP_COLUMN_PCROOM"), this.drawLabel(".id-marketPriceContainer .id-titleVIPDiscount", "TRADEMARKET_SELLLIST_POPUP_COLUMN_VIP"), this.drawLabel(".id-marketPriceContainer .id-titleTotal", "TRADEMARKET_SELLLIST_POPUP_COLUMN_RECEIPTPRICE"), this.marketPriceListBinder = this.addChildBinder(this.getFace(".id-marketPriceContainer .id-marketPriceList .id-listItem"), collection_binder_1.CollectionBinder, {
                    keyProperty: "key",
                    instanceBinder: function(t, i) {
                        var n = i.offer,
                            r = i.vehicle;
                        t.hasSize = !0, t.layoutPosition = "relative", face_binder_1.gotoAndStop(t.$(".ListBackground"), (i.index + 1) % 2 ? "even" : "odd"), t.mouseEventEnabled = !1, face_binder_1.bindText(t.$(".id-vehicleClass .id-textField"), r.clazz), face_binder_1.bindText(t.$(".id-name .id-textField"), e.$filter("vehicleName")(n.code)), face_binder_1.bindText(t.$(".id-manufacturerName .id-textField"), e.$filter("manufacturerName")(r.manufacturerCode)), face_binder_1.gotoAndStop(t.$(".id-vehicleGrade"), "grade" + n.grade), face_binder_1.bindText(t.$(".id-ovr .id-textField"), i.ovr + ""), face_binder_1.bindText(t.$(".id-vehicle .id-textField"), e.$filter("currency")(n.price, "", 0)), face_binder_1.bindText(t.$(".id-commission .id-textField"), "-" + e.$filter("currency")(i.commission, "", 0)), face_binder_1.bindText(t.$(".id-PCDiscount .id-textField"), "+" + e.$filter("currency")(i.pcDiscount, "", 0)), face_binder_1.bindText(t.$(".id-VIPDiscount .id-textField"), "+" + e.$filter("currency")(i.vipDiscount, "", 0)), face_binder_1.bindText(t.$(".id-total .id-textField"), e.$filter("currency")(i.totalPrice, "", 0))
                    }
                })
            }, SalesReceiptListPopup.prototype.show = function(e) {
                _super.prototype.show.call(this, e), this.bindOfferListInfo(e)
            }, SalesReceiptListPopup.prototype.update = function(e) {
                this.bindOfferListInfo(e)
            }, SalesReceiptListPopup.prototype.onAddedToScene = function() {
                this.featureSetService.isEnabled("IGR") || this.classNames(this.face, "disable-igr")
            }, SalesReceiptListPopup.prototype.onDetach = function() {
                $(this.getFace(".id-marketPriceContainer .id-marketPriceList").htmlElement).perfectScrollbar("destroy"), _super.prototype.onDetach.call(this)
            }, SalesReceiptListPopup.prototype.bindOfferListInfo = function(e) {
                var t = this,
                    i = _.map(e.offerlist, function(i, n) {
                        var r = i.offer,
                            o = r.price * e.commission[0].value,
                            a = t.publisherService.isIgr ? o * (1 - e.commission[1].value) : 0,
                            s = r.price - o + a + 0,
                            c = t.vehicleDataService.getGradeBonusAttr(r.code, r.grade, r.partscodes),
                            d = vehicle_data_service_1.VehicleDataService.getIStatusOvr(c);
                        return _.defaults({
                            key: r.id,
                            ovr: d,
                            commission: o,
                            pcDiscount: a,
                            vipDiscount: 0,
                            totalPrice: s,
                            index: n
                        }, i)
                    });
                this.drawText(".id-quantity .id-value", e.offerlist.length.toString());
                var n = _.sumBy(i, function(e) {
                    return e.totalPrice
                });
                this.drawText(".id-total .id-value", this.$filter("currency")(n, "", 0)), this.marketPriceListBinder.applyCollection(i), this.bScrollBarApplied ? setTimeout(function() {
                    $(t.getFace(".id-marketPriceContainer .id-marketPriceList").htmlElement).perfectScrollbar("update").scrollTop(0)
                }, 200) : (this.applyScrollBar(this.getFace(".id-marketPriceContainer .id-marketPriceList"), {
                    suppressScrollX: ""
                }), this.bScrollBarApplied = !0)
            }, SalesReceiptListPopup
        }(popup_binder_1.PopupBinder);
    tslib_1.__decorate([face_redux_1.autowired("vehicleDataService")], SalesReceiptListPopup.prototype, "vehicleDataService", void 0), tslib_1.__decorate([face_redux_1.autowired("publisherService")], SalesReceiptListPopup.prototype, "publisherService", void 0), tslib_1.__decorate([face_redux_1.autowired("featureSetService")], SalesReceiptListPopup.prototype, "featureSetService", void 0), exports.SalesReceiptListPopup = SalesReceiptListPopup
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(1),
        s = i(56),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.props,
                    i = t.confirm,
                    n = t.cancel;
                this.getFace(".id-confirm").on(o.MouseEventEx.CLICK, i), this.getFace(".id-cancel").on(o.MouseEventEx.CLICK, n), this.drawLabel(".PopupName .id-textField", "TRADEMARKET_VEHICLE_RECEIPT_POPUP_TITLE"), this.drawLabel(".id-confirm", "TRADEMARKET_BUTTON_RECEIPT"), this.drawLabel(".id-cancel", "TRADEMARKET_POPUP_CANCEL"), this.drawLabel(".id-total .id-name", "TRADEMARKET_SELLLIST_POPUP_COLUMN_RECEIPTPRICE"), this.drawLabel(".id-value .id-name", "TRADEMARKET_SELLLIST_VEHICLE_SELLPRICE"), this.drawLabel(".id-commission .id-name", "TRADEMARKET_SELLLIST_COMMISSION"), this.drawLabel(".id-PCDiscount .id-name", "TRADEMARKET_SELLLIST_POPUP_COLUMN_PCROOM"), this.drawLabel(".id-VIPDiscount .id-name", "TRADEMARKET_SELLLIST_POPUP_COLUMN_VIP"), this.vehicleBinder = this.addChildBinder(".id-vehicleItem", s.VehicleCard)
            }, t.prototype.onAddedToScene = function() {
                this.featureSetService.isEnabled("IGR") || this.classNames(this.face, "disable-igr")
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t);
                var i = t.price,
                    n = t.price * t.commission[0].value,
                    r = this.publisherService.isIgr ? n * (1 - t.commission[1].value) : 0,
                    o = i - n + r + 0;
                this.drawText(".id-total .id-value", this.$filter("currency")(o, "", 0)), this.drawText(".id-value .id-value", this.$filter("currency")(t.price, "", 0)), this.drawText(".id-commission .id-value", "- " + this.$filter("currency")(n, "", 0)), this.drawText(".id-PCDiscount .id-value", this.$filter("currency")(r, "", 0)), this.drawText(".id-VIPDiscount .id-value", this.$filter("currency")(0, "", 0)), this.vehicleBinder.setProps({
                    vehicle: t.vehicle,
                    muteStatusIcon: !0,
                    disableMouse: !0
                })
            }, t.prototype.onKeyboardConfirm = function() {
                this.props.confirm && this.props.confirm()
            }, t
        }(r.PopupBinder);
    n.__decorate([a.autowired("publisherService")], c.prototype, "publisherService", void 0), n.__decorate([a.autowired("featureSetService")], c.prototype, "featureSetService", void 0), t.SalesReceiptPopup = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(28),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.props,
                    i = t.confirm,
                    n = t.cancel,
                    r = this.mapFaces(".id-confirm", ".id-cancel"),
                    a = r[0],
                    s = r[1];
                a.on(o.MouseEventEx.CLICK, i), s.on(o.MouseEventEx.CLICK, n)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.translate(".Title > .id-textField", t.title), this.translate(".Description > .id-textField", t.description), this.translate(".id-confirm", t.confirmText), this.translate(".id-cancel", t.cancelText), this.drawText(".StatNum > .id-textField", t.plusStat), this.drawText(".id-possessionNum > .id-textField", t.possessionNum), this.translate(".id-statName .id-textField", t.statName), this.translate(".id-possessionName .id-textField", t.possession), this.apply(".PartsName > .id-textField", a.bindHtml, t.partName), this.translate(".id-popupName .id-textField", t.popupTitleName), this.apply(".PartsIconContainer .ExternalImage", a.externalImage, this.$filter("cdn_parts")(t.partCode))
            }, t
        }(r.PopupBinder);
    t.PartsLevelupConfirmPopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(54),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.hasSize(".id-rankedMatchMedal", !0), this.hasSize(".id-rankedMatchMedal .id-medalMC", !0);
                var t = this.getFace(".id-confirm"),
                    i = this.props.confirm;
                t.on(o.MouseEventEx.CLICK, i), this.drawLabel(".id-confirm", "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.medal = this.addChildBinder(".RankedMatchRewardIconBig", a.TierMedalBinder)
            }, t.prototype.show = function(t) {
                var i = this;
                e.prototype.show.call(this, t), this.drawText(".id-rankedMatchMedal .id-textField", t.tierFp), this.drawLabel(".id-title", t.title), this.drawLabel(".id-description", t.description), t.progress.forEach(function(e, n) {
                    var r = i.getStateInfo(e, t.minHighRank);
                    i.gotoAndStop(".id-promoteScoreBoardContainer .id-promoteScoreBoard" + (n + 1), r.label), i.drawLabel(".id-promoteScoreBoardContainer .id-promoteScoreBoard" + (n + 1) + " .id-textField", r.text)
                }), this.medal.setProps({
                    tierCode: t.tier
                })
            }, t.prototype.getStateInfo = function(e, t) {
                return {
                    label: 1 <= e && e <= t ? "win" : "lose",
                    text: 0 === e ? "RANKEDMATCH_REWARD_EVENT_RESULT_RETIRE" : -1 === e ? "" : this.$filter("template")({
                        value: e
                    }, "RANKEDMATCH_REWARD_EVENT_RESULT_RANKING")
                }
            }, t
        }(r.PopupBinder);
    t.PromoteResultConfirmPopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(56),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.getFace(".id-confirm").on(o.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-cancel").on(o.MouseEventEx.CLICK, this.props.cancel), this.vehicleCard = this.addChildBinder(".id-vehicleItem", a.VehicleCard), this.vehicleCard.face.mouseEventEnabled = !1, this.vehicleCard.face.$(".id-painting").visible = !1, this.vehicleCard.face.$(".id-vehicleGrade").visible = !1
            }, t.prototype.show = function(t) {
                var i = this;
                e.prototype.show.call(this, t), this.translate(".id-confirm", "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.translate(".id-cancel", "COMMON_POPUP_EXIT_BUTTON_CANCEL"), this.translate(".id-unit", "INVENTORY_UNITS_NUM"), this.translate(".id-sp", "COMMON_VEHICLEVALUEUNIT"), this.translate(".id-consumeNumName", "COMMON_BLUEPRINT_COUNT"), this.translate(".id-commissionName", "VEHICLE_PRODUCTION_PRICE"), this.translate(".PopupName > .id-textField", t.popupTitle), this.translate(".Title > .id-textField", t.title), this.translate(".Description > .id-textField", t.description);
                var n = this.$filter("currency");
                this.drawText(".id-consumeNum", n(t.consumeNum, "", 0)), this.drawText(".id-commissionNum", n(t.commission, "", 0)), this.vehicleCard.setProps({
                    vehicle: t.selectedVehicle
                }), setTimeout(function() {
                    return i.gotoAndPlay(".id-vehicleItem", "default")
                }, 150)
            }, t
        }(r.PopupBinder);
    t.VehicleProductionConfirmPopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.getFace(".id-confirm"),
                    i = this.props.confirm;
                t.on(o.MouseEventEx.CLICK, i)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t);
                var i = t.unlock[0];
                this.translate(".id-confirm", "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.translate(".id-title", "UNLOCK_" + i.code + "_NAME"), this.drawLabel(".id-description", "UNLOCK_" + i.code + "_DESC"), this.drawExternalImage(".id-functionIcon", this.$filter("cdn_unlock")(i.code))
            }, t.prototype.onKeyboardConfirm = function() {
                this.props.confirm && this.props.confirm()
            }, t
        }(r.PopupBinder);
    t.FunctionUnlockConfirmPopup = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(4),
        s = i(626),
        c = i(298),
        d = i(56),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                e.prototype.onFaceReady.call(this), this.getFace(".id-confirm").on(o.MouseEventEx.CLICK, function() {
                    var e = t.convertFace(".id-sellingPriceContainer .id-vehiclePriceInput .id-textField"),
                        i = t.convertFace(".id-sellingPriceContainer .id-defaultText .comp-TextField"),
                        n = a.default.toMoneyNumber(e.text, i.text);
                    t.dispatch(c.confirm(n))
                }), this.getFace(".id-cancel").on(o.MouseEventEx.CLICK, this.props.cancel), this.translate(".PopupName > .id-textField", "TRADEMARKET_VEHICLE_RESALE_POPUP_TITLE"), this.translate(".Title > .id-textField", "TRADEMARKET_VEHICLE_RESALE_POPUP_DESC"), this.translate(".Description > .id-textField", "TRADEMARKET_POPUP_VEHICLESELL_DESC2"), this.translate(".id-confirm", "TRADEMARKET_SELLLIST_RESALE"), this.translate(".id-cancel", "TRADEMARKET_POPUP_CANCEL"), this.translate(".id-max .id-name", "TRADEMARKET_UPPERLIMITPRICE"), this.translate(".id-min .id-name", "TRADEMARKET_LOWERLIMITPRICE"), this.translate(".id-sellingPriceContainer .id-name", "TRADEMARKET_VEHICLE_SELLPRICE"), this.getFace(".VehicleName").hasSize = !0, this.vehicleBinder = this.addChildBinder(".id-vehicleItem", d.VehicleCard), this.vehiclePriceBinder = this.addChildBinder(".id-vehiclePriceInput", s.VehiclePriceBinder)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t);
                var i = this.$filter("currency");
                this.drawText(".id-max .id-value", i(t.limitdata.upper, "", 0)), this.drawText(".id-min .id-value", i(t.limitdata.lower, "", 0));
                var n = t.vehicle;
                this.vehicleBinder.setProps({
                    vehicle: n,
                    muteStatusIcon: !0,
                    disableMouse: !0
                });
                var r = t.limitdata.lower,
                    o = t.limitdata.upper;
                this.vehiclePriceBinder.setInitialPrice(t.price, t.basePrice, r, o)
            }, t
        }(r.PopupBinder);
    t.MarketVehicleReofferPopup = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(1),
        a = i(46),
        s = i(56),
        c = i(23),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.face.hasSize = !0, this.face.layoutPosition = "relative", this.face.layoutFloat = "top"
            }, t
        }(a.ProgressBinder),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-buy .id-buttonName", "TRADEMARKET_BUTTON_PURCHASE"), this.translate(".id-cancel .id-buttonName", "TRADEMARKET_POPUP_CANCEL"), this.getFace(".id-buy").on(r.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-cancel").on(r.MouseEventEx.CLICK, this.props.cancel), this.vehicleCard = this.addChildBinder(".id-vehicleItem", s.VehicleCard), this.progressBarBinder = this.addChildBinder(".id-statusIndicatorContainer .id-progressBar", o.CollectionBinder, {
                    instanceBinder: d,
                    keyProperty: "label"
                }), this.drawLabel(".PopupName .id-textField", "TRADEMARKET_VEHICLE_POPUP_PURCHASE_TITLE"), this.drawLabel(".Title > .id-textField", "TRADEMARKET_VEHICLE_POPUP_PURCHASE_DESC1"), this.drawLabel(".Description > .id-textField", "TRADEMARKET_VEHICLE_POPUP_PURCHASE_DESC2"), this.drawLabel(".id-marketPrice > .id-titleTextField1", "TRADEMARKET_PRICESTATUS"), this.drawLabel(".id-marketPrice > .id-titleTextField2", "TRADEMARKET_LISTCOLUMN_AMOUNT"), this.drawLabel(".id-vehiclePriceInfo > .id-title", "TRADEMARKET_PURCHASE_SP"), this.drawLabel(".id-balanceInfo > .id-title", "TRADEMARKET_AFTERPURCHASE_SP")
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t);
                for (var i = this.$filter("currency"), n = t.vehicle, r = 0; r < 3; r++) this.drawText(".id-marketPrice > .id-price" + (r + 1), r < t.priceInfo.length ? i(t.priceInfo[r].summary.price, "", 0) : ""), this.drawText(".id-marketPrice > .id-count" + (r + 1), r < t.priceInfo.length ? t.priceInfo[r].summary.count : "");
                this.vehicleCard.setProps({
                    vehicle: n,
                    muteStatusIcon: !0,
                    mutePaint: !0,
                    disableMouse: !0,
                    disableBlind: !0
                }), this.progressBarBinder.applyCollection(_(n.status).toPairs().map(function(e) {
                    var t = e[0],
                        i = e[1];
                    return {
                        label: "STATUS_" + t.toUpperCase(),
                        value: i,
                        max: 2e3,
                        duration: .7,
                        useOldStyleProgress: !0
                    }
                }).value()), this.drawText(".id-vehiclePriceInfo > .id-price", i(t.price, "", 0)), this.drawText(".id-balanceInfo > .id-price", i(t.afterSp, "", 0))
            }, t.prototype.onKeyboardConfirm = function() {
                this.props.confirm && this.props.confirm()
            }, t
        }(c.PopupBinder);
    t.BuyVehiclePopup = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(56),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                e.prototype.onFaceReady.call(this);
                var i = function() {
                    var e = t.props.gotoVehicle;
                    e && e()
                };
                this.vehicleCard = this.addChildBinder(".id-vehicleItem", a.VehicleCard), this.drawLabel(".PopupName .id-textField", "TRADEMARKET_VEHICLE_POPUP_PURCHASE2_TITLE"), this.drawLabel(".Title > .id-textField", "TRADEMARKET_VEHICLE_POPUP_PURCHASE2_DESC"), this.getFace(".id-confirm").on(o.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-goToGarage").on(o.MouseEventEx.CLICK, i.bind(this)), this.drawLabel(".id-confirm", "TRADEMARKET_BUTTON_CONFIRM"), this.drawLabel(".id-goToGarage", "TRADEMARKET_BUTTON_GOTOGARAGE")
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.props.gotoVehicle = t.gotoVehicle;
                var i = t.vehicle;
                this.vehicleCard.setProps({
                    vehicle: i,
                    muteStatusIcon: !0,
                    mutePaint: !0,
                    disableMouse: !0,
                    disableBlind: !0
                })
            }, t.prototype.onKeyboardConfirm = function() {
                this.props.confirm && this.props.confirm()
            }, t
        }(r.PopupBinder);
    t.BuyVehicleConfirmPopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(56),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.props.confirm;
                this.vehicleBinder = this.addChildBinder(".id-vehicleItem", a.VehicleCard), this.drawLabel(".PopupName .id-textField", "TRADEMARKET_POPUP_VEHICLESELL_TITLE"), this.drawLabel(".Title > .id-textField", "TRADEMARKET_POPUP_VEHICLESELL2_DESC"), this.drawLabel(".id-confirm", "TRADEMARKET_BUTTON_CONFIRM"), this.getFace(".id-confirm").on(o.MouseEventEx.CLICK, t), this.getFace(".VehicleName").hasSize = !0, this.getFace(".id-painting .id-color").hasSize = !0
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.vehicleBinder.setProps({
                    vehicle: t.vehicle,
                    muteStatusIcon: !0,
                    disableMouse: !0
                })
            }, t.prototype.onKeyboardConfirm = function() {
                this.props.confirm && this.props.confirm()
            }, t
        }(r.PopupBinder);
    t.SellVehicleConfirmPopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(56),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.props,
                    i = t.confirm,
                    n = t.cancel;
                this.getFace(".id-confirm").on(o.MouseEventEx.CLICK, i), this.getFace(".id-cancel").on(o.MouseEventEx.CLICK, n), this.vehicleCard = this.addChildBinder(".id-vehicleItem", a.VehicleCard), this.translate(".PopupName .id-textField", "TRADEMARKET_POPUP_VEHICLESELL_TITLE"), this.translate(".id-confirm", "TRADEMARKET_BUTTON_SELL"), this.translate(".id-cancel", "TRADEMARKET_POPUP_CANCEL"), this.translate(".id-value .id-name", "TRADEMARKET_VEHICLE_SELLPRICE"), this.translate(".id-title", "TRADEMARKET_POPUP_VEHICLESELL_DESC1"), this.translate(".id-description", "TRADEMARKET_POPUP_VEHICLESELL_DESC2"), this.getFace(".VehicleName").hasSize = !0, this.getFace(".id-painting .id-color").hasSize = !0
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t);
                var i = this.$filter("currency")(t.price, "", 0);
                this.drawText(".id-value .id-value", i), this.vehicleCard.setProps({
                    vehicle: t.vehicle,
                    muteStatusIcon: !0,
                    disableMouse: !0
                })
            }, t.prototype.onKeyboardConfirm = function() {
                this.props.confirm && this.props.confirm()
            }, t
        }(r.PopupBinder);
    t.SellVehiclePopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(23),
        a = i(2),
        s = i(27),
        c = i(5),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.props,
                    i = t.confirm,
                    n = t.cancel;
                this.getFace(".id-itemReceive").on(a.MouseEventEx.CLICK, i), this.getFace(".id-cancel").on(a.MouseEventEx.CLICK, n)
            }, t.prototype.show = function(t) {
                var i = this;
                e.prototype.show.call(this, t);
                var n = t.inboxPackage,
                    r = t.pack,
                    o = n.items.map(function(e) {
                        return i.$filter("translate")(e)
                    });
                this.drawLabel(".id-popupName .id-textField", this.getTitle(r)), this.drawLabel(".id-fromTitle", "INBOX_CONFIRM_POPUP_SENDER"), this.drawLabel(".id-dateTitle", "INBOX_CONFIRM_POPUP_RECEIVEDDATE"), this.drawLabel(".id-messageTitle", "INBOX_CONFIRM_POPUP_MESSAGE_TITLE"), this.drawLabel(".id-itemReceive", "INBOX_RECIEVE_POPUP_RECIEVE"), this.drawLabel(".id-cancel", "INBOX_RECIEVE_POPUP_CANCEL"), this.drawLabel(".id-fromName", n.type), r.endat && (this.drawLabel(".id-endDateTitle", "INBOX_RECIEVE_POPUP_EXPIRYTIME"), this.drawLabel(".id-endDateNum", c(r.endat).format(this.$filter("translate")("INBOX_RECIEVE_POPUP_EXPIRYTIME_INFO")))), this.drawLabel(".id-dateNum", n.date), this.drawLabel(".id-descriptionTextArea .id-textField", this.getDescription(r)), this.itemCardBinder = this.addChildBinder(".id-itemCard", s.ItemCardBinder, {
                    info: {
                        code: r.pid,
                        type: "ITEM",
                        name: r.title,
                        desc: r.desc,
                        count: r.count || 1,
                        tagName: this.$filter("translate")(s.TagMap[r.type]),
                        tagType: r.type.toLowerCase(),
                        img: this.inboxService.getItemImgPath(r),
                        fallbackImg: this.inboxService.getItemFallbackImgPath(r)
                    },
                    mouseDisabled: !0
                });
                var a = ["<div>" + this.$filter("translate")(n.desc) + "</div><br>", '<div class="itemsTitle">' + this.$filter("translate")("INBOX_CONFIRM_POPUP_REWARDTITLE") + "</div>", '<div class="items">' + o.join("<br>") + "</div>"];
                this.drawLabel(".id-itemInfoTextArea .id-textField", a.join(""))
            }, t.prototype.getTitle = function(e) {
                switch (e.type) {
                    case "GIFT":
                        return "INBOX_POPUP_RECEIVEGIFT_TITLE";
                    case "PROMOTION":
                    default:
                        return "INBOX_RECIEVE_POPUP_TITLE"
                }
            }, t.prototype.getDescription = function(e) {
                switch (e.type) {
                    case "PROMOTION":
                        return "INBOX_CONFIRM_POPUP_PROMOTION";
                    case "GIFT":
                        return (e.opts || {}).sendMsg;
                    default:
                        return ""
                }
            }, t
        }(o.PopupBinder);
    n.__decorate([r.autowired("inboxService")], d.prototype, "inboxService", void 0), n.__decorate([r.autowired("serverTimeService")], d.prototype, "serverTimeService", void 0), t.InboxItemConfirmPopup = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(23),
        a = i(2),
        s = i(13),
        c = i(27),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.useOne = function() {}, t.useAll = function() {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                e.prototype.onFaceReady.call(this), this.useOneButton = this.getFace(".id-use"), this.useAllButton = this.getFace(".id-useAll"), this.useOneButton.on(a.MouseEventEx.CLICK, function() {
                    t.setButtonsEnabled(!1), t.useOne(), t.clear()
                }), this.useAllButton.on(a.MouseEventEx.CLICK, function() {
                    t.setButtonsEnabled(!1), t.useAll(), t.clear()
                }), this.getFace(".id-cancel").on(a.MouseEventEx.CLICK, function() {
                    t.props.cancel(), t.clear()
                }), this.itemCardThumnails = this.addChildBinder(this.getFace(".id-itemCardSmall"), r.CollectionBinder, {
                    instanceBinder: c.ItemCardBinder,
                    keyProperty: "id"
                }), this.itemCardBinder = this.addChildBinder(".id-itemCard", c.ItemCardBinder), this.packageContainer = this.getFace(".id-itemTileList"), this.packageContainer.hasSize = !0, $(this.packageContainer.htmlElement).perfectScrollbar({
                    suppressScrollX: !0
                }), this.itemListTextFiled = this.getFace(".id-itemListTextArea > .id-textField"), this.itemListTextFiled.hasSize = !0, $(this.itemListTextFiled.htmlElement).perfectScrollbar({
                    suppressScrollX: !0
                })
            }, t.prototype.show = function(t) {
                var i = this;
                e.prototype.show.call(this, t), this.useOne = t.useOne, this.useAll = t.useAll, this.setButtonsEnabled(!0), this.item = t.item, this.drawLabel(".id-use", "INVENTORY_USE_RANDOMBOX_ONE"), this.drawLabel(".id-useAll", "INVENTORY_USE_RANDOMBOX_MANY"), this.drawLabel(".id-cancel", "COMMON_POPUP_EXIT_BUTTON_CANCEL"), this.drawLabel(".id-popupName .id-textField", "INVENTORY_USE_PACKAGE_POPUP_TITLE"), this.drawLabel(".id-subDescription", "BUNDLE_USE_POPUP_DESC"), this.drawLabel(".id-itemListTitle", "INBOX_CONFIRM_POPUP_REWARDTITLE"), this.drawLabel(".id-popupName .id-textField", "BUNDLE_USE"), this.itemCardBinder.setProps({
                    info: {
                        code: this.item.code,
                        type: "ITEM",
                        name: this.item.name,
                        count: this.item.count,
                        isNew: !1
                    },
                    mouseDisabled: !0
                }), this.setItemDetailInfo(), this.itemCardThumnails.applyCollection(this.item.items.map(function(e, t) {
                    return {
                        id: t,
                        info: {
                            type: e.rewardcommandtype,
                            code: i.getRewardCodeForThumnail(e),
                            count: e.count,
                            opts: e.opts || {}
                        },
                        onMouseOver: function() {
                            return i.onMouseOverComponent(e)
                        },
                        onMouseOut: function() {
                            return i.tooltipService.hide()
                        }
                    }
                })), setTimeout(function() {
                    $(i.packageContainer.htmlElement).perfectScrollbar("update").scrollTop(0), $(i.itemListTextFiled.htmlElement).perfectScrollbar("update").scrollTop(0)
                }, 100)
            }, t.prototype.getRewardCodeForThumnail = function(e) {
                switch (e.rewardcommandtype) {
                    case "NUMBER_PLATE":
                        return this.item.code;
                    default:
                        return e.rewardcommandcode
                }
            }, t.prototype.setItemDetailInfo = function() {
                var e = ['<div class="desc">' + this.item.desc + "</div>", '<div class="components-label">' + this.$filter("translate")("INBOX_CONFIRM_POPUP_REWARDTITLE") + "</div>", '<ul class="components">'].concat(this.inventoryService.getRewardableItemName(this.item).map(function(e) {
                    return "<li>" + e + "</li>"
                }), ["</ul>"]);
                this.bindHtml(this.itemListTextFiled, e.join(""))
            }, t.prototype.onMouseOverComponent = function(e) {
                var t = s.TooltipType.ItemCard,
                    i = {
                        type: e.rewardcommandtype,
                        code: e.rewardcommandcode,
                        count: e.count
                    };
                if ("BLUEPRINT" === e.rewardcommandtype) t = s.TooltipType.Blueprint, i = this.blueprintService.getBlueprintTooltipInfo(i.code);
                else if ("PARTS" === e.rewardcommandtype) t = this.partsService.isMaterial(i.code) ? s.TooltipType.PartsMaterialSlot : s.TooltipType.PartsSlot, i = this.partsService.getPartsTooltipInfo(i.code);
                else if ("VEHICLE" === e.rewardcommandtype) {
                    t = s.TooltipType.Vehicle;
                    var r = 1;
                    e.opts && e.opts.VEHICLE && void 0 != e.opts.VEHICLE.grade && (r = e.opts.VEHICLE.grade);
                    var o = this.vehiclePriceDataService.getBasePrice(i.code, r);
                    i = n.__assign({}, this.vehicleDataService.getVehicleData(i.code, r), {
                        price: o
                    })
                } else if ("VEHICLE_CUSTOM" === e.rewardcommandtype) {
                    t = s.TooltipType.Vehicle;
                    var a = Number(_.trimStart(String(i.code).slice(1, 3), "0")),
                        r = Number(_.trimStart(String(i.code).slice(4, 5), "0")),
                        o = this.vehiclePriceDataService.getBasePrice(a, r);
                    i = n.__assign({}, this.vehicleDataService.getVehicleData(a), {
                        price: o
                    })
                } else if ("TRIAL_VEHICLE" === e.rewardcommandtype) {
                    t = s.TooltipType.Vehicle;
                    var a = Number(_.trimStart(String(i.code).slice(2, 5), "0")),
                        c = Number(_.trimStart(String(i.code).slice(7), "0"));
                    i = n.__assign({}, this.vehicleDataService.getVehicleData(a), {
                        remainingCount: c
                    })
                }
                this.tooltipService.show(event, "right", t, i, {
                    marginLeft: 3
                })
            }, t.prototype.clear = function() {
                this.tooltipService.hide()
            }, t.prototype.setButtonsEnabled = function(e) {
                this.useOneButton.enabled = e, this.useAllButton.enabled = e
            }, t.prototype.onDetach = function() {
                $(this.packageContainer.htmlElement).perfectScrollbar("destroy"), $(this.itemListTextFiled.htmlElement).perfectScrollbar("destroy")
            }, t
        }(o.PopupBinder);
    n.__decorate([r.autowired("tooltipService")], d.prototype, "tooltipService", void 0), n.__decorate([r.autowired("inventoryService")], d.prototype, "inventoryService", void 0), n.__decorate([r.autowired("blueprintService")], d.prototype, "blueprintService", void 0), n.__decorate([r.autowired("partsService")], d.prototype, "partsService", void 0), n.__decorate([r.autowired("vehicleDataService")], d.prototype, "vehicleDataService", void 0), n.__decorate([r.autowired("vehiclePriceDataService")], d.prototype, "vehiclePriceDataService", void 0), t.UseInventoryBundleItemPopup = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(27),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.getFace(".id-confirm").on(o.MouseEventEx.CLICK, this.props.confirm)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.translate(".id-confirm", t.confirmText || "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.translate(".id-popupName", t.title || "POPUP_PACKAGE_USED_TITLE"), this.translate(".id-description .id-textfield", t.description || "POPUP_PACKAGE_USED_TEXT");
                var i = t.item;
                this.itemCardBinder = this.addChildBinder(".id-itemCard", a.ItemCardBinder, {
                    info: {
                        code: i.code,
                        type: "ITEM",
                        name: i.name,
                        count: i.count,
                        isNew: !1
                    },
                    actionButtonEnabled: !1
                })
            }, t.prototype.onKeyboardConfirm = function() {
                this.props.confirm && this.props.confirm()
            }, t
        }(r.PopupBinder);
    t.UseItemConfirmPopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(42),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.bindStatic(), this.card = this.addChildBinder(".id-numberPlate", a.NumberPlateCard), this.getFace(".id-confirmButton").on(o.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-cancelButton").on(o.MouseEventEx.CLICK, this.props.cancel), this.textInput = this.getFace(".id-textInput .id-textFieldContainer .id-textField"), this.textInput.htmlElement.oninput = function() {
                    e.updateConfirmButton()
                }
            }, t.prototype.bindStatic = function() {
                this.translate(".id-popupName", "MYNUMBERPLATE_REMOVE_POPUP_TITLE"), this.translate(".id-description", "MYNUMBERPLATE_REMOVE_POPUP_TEXT1"), this.translate(".InputDescription", "MYNUMBERPLATE_REMOVE_POPUP_TEXT3"), this.translate(".id-confirmButton", "MYNUMBERPLATE_REMOVE_POPUP_CONFIRM"), this.translate(".id-cancelButton", "MYNUMBERPLATE_REMOVE_POPUP_CANCEL")
            }, t.prototype.show = function(t) {
                var i = this;
                e.prototype.show.call(this, t);
                var n = t.destroyPlate;
                this.textInput.text = "", this.textInput.maxLength = 20, this.card.setProps({
                    personalNumber: t.personalNumber,
                    uniqueNumber: n.plateNumber,
                    templateCode: n.templateCode
                }), this.showSubDescription(t.spacquired), this.updateConfirmButton(), setTimeout(function() {
                    i.textInput.htmlElement.focus()
                }, 500)
            }, t.prototype.updateConfirmButton = function() {
                this.getFace(".id-confirmButton").enabled = /^DELETE$/i.test(this.textInput.text)
            }, t.prototype.showSubDescription = function(e) {
                var t = [this.$filter("translate")("MYNUMBERPLATE_REMOVE_POPUP_TEXT2")];
                e && e > 0 && t.push(this.$filter("template")({
                    spacquired: this.$filter("currency")(e, "", 0)
                }, "MYNUMBERPLATE_REMOVE_POPUP_SP")), this.bindHtml(".id-subDescription", t.join("\n"))
            }, t
        }(r.PopupBinder);
    t.DestroyNumberPlatePopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(42),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.cards = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.bindStatic(), _.times(5, function(t) {
                    var i = e.addChildBinder(".id-numberPlate" + (t + 1), a.NumberPlateCard);
                    e.cards.push(i)
                }), this.getFace(".id-confirmButton").on(o.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-cancelButton").on(o.MouseEventEx.CLICK, this.props.cancel), this.textInput = this.getFace(".id-textInput .id-textFieldContainer .id-textField"), this.textInput.htmlElement.oninput = function() {
                    e.updateConfirmButton()
                }
            }, t.prototype.bindStatic = function() {
                this.translate(".id-description", "MYNUMBERPLATE_EXCHANGE_POPUP_TEXT1"), this.translate(".id-subDescription", "MYNUMBERPLATE_EXCHANGE_POPUP_TEXT2"), this.translate(".InputDescription", "MYNUMBERPLATE_EXCHANGE_POPUP_TEXT3"), this.translate(".id-confirmButton", "MYNUMBERPLATE_EXCHANGE_POPUP_CONFIRM"), this.translate(".id-cancelButton", "MYNUMBERPLATE_EXCHANGE_POPUP_CANCEL")
            }, t.prototype.show = function(t) {
                var i = this;
                e.prototype.show.call(this, t), this.textInput.text = "", this.textInput.maxLength = 20;
                var n = t.personalNumber,
                    r = t.plates,
                    o = Object.keys(r).sort();
                o.forEach(function(e, t) {
                    i.cards[t].setProps({
                        personalNumber: n,
                        uniqueNumber: e,
                        templateCode: r[e]
                    })
                }), this.updateConfirmButton(), this.gotoAndStop(".id-numberPlateContainer", o.length.toString()), setTimeout(function() {
                    i.textInput.htmlElement.focus()
                }, 500)
            }, t.prototype.updateConfirmButton = function() {
                this.getFace(".id-confirmButton").enabled = /^DELETE$/i.test(this.textInput.text)
            }, t
        }(r.PopupBinder);
    t.ExchangeNumberPlateConfirmPopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(42),
        s = 3,
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.cards = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.bindStatic(), _.times(s, function(t) {
                    var i = e.addChildBinder(".id-numberPlate" + (t + 1), a.NumberPlateCard);
                    e.cards.push(i)
                }), this.getFace(".id-confirmButton").on(o.MouseEventEx.CLICK, this.props.confirm)
            }, t.prototype.bindStatic = function() {
                this.translate(".id-description", "MYNUMBERPLATE_EXCHANGE_SCREEN_RESTART_TEXT1"), this.translate(".id-subDescription", "MYNUMBERPLATE_EXCHANGE_SCREEN_RESTART_TEXT2"), this.translate(".id-confirmButton", "MYNUMBERPLATE_EXCHANGE_SCREEN_RESTART_CONFIRM")
            }, t.prototype.show = function(t) {
                var i = this;
                e.prototype.show.call(this, t);
                var n = t.personalNumber;
                t.plates.forEach(function(e, t) {
                    i.cards[t] && i.cards[t].setProps({
                        personalNumber: n,
                        uniqueNumber: e.plateNumber,
                        templateCode: e.templateCode
                    })
                }), this.gotoAndStop(".id-numberPlateContainer", s.toString())
            }, t
        }(r.PopupBinder);
    t.ExchangeNumberPlateRestartConfirmPopup = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1325),
        o = i(2),
        a = i(1),
        s = i(42),
        c = i(15),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                this.bindStatic(), this.initNumberPlateList(), e.prototype.onFaceReady.call(this), this.getFace(".id-confirmButton").on(o.MouseEventEx.CLICK, this.props.confirm), this.bindList = function(e, i) {
                    var n = t.chunkedPlates[i] || [];
                    e.forEach(function(e, i) {
                        t.bindPlate(e, n[i], i)
                    });
                    var r = e[0] ? e[0].face.parent : void 0;
                    t.gotoAndStop(r, n.length.toString())
                }
            }, t.prototype.bindStatic = function() {
                this.translate(".id-title", "MYNUMBERPLATE_AUTOCOLLECT_TITLE"), this.translate(".id-description", "MYNUMBERPLATE_AUTOCOLLECT_TEXT"), this.translate(".id-confirmButton", "MYNUMBERPLATE_AUTOCOLLECT_CONFIRM")
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.personalNumber = t.personalNumber;
                var i = t.plates;
                this.plates = _.map(i), this.chunkedPlates = _.chunk(this.plates, 6), this.pageSize = Math.max(1, this.chunkedPlates.length), this.scrollBarContainer.visible = this.pageSize > 1, this.isPaging = !1, this.pageIndex = 0, this.resetScrollBar(), this.bindList(this.currListBinder, this.pageIndex)
            }, t.prototype.initNumberPlateList = function() {
                var e = this;
                this.pagingContainer = this.getFace(".id-list"), this.addManagedListener(this.pagingContainer, "reset", function(t) {
                    e.gotoAndPlay(e.pagingContainer, "default"), e.bindList(e.currListBinder, e.pageIndex), e.isPaging = !1
                }), _.times(6, function(t) {
                    var i = e.getFace(".id-current .id-numberPlate" + (t + 1)),
                        n = e.getFace(".id-next .id-numberPlate" + (t + 1));
                    i.hasSize = !0, n.hasSize = !0, e.currListBinder.push(e.addChildBinder(i, s.NumberPlateCard)), e.nextListBinder.push(e.addChildBinder(n, s.NumberPlateCard))
                })
            }, t.prototype.onClose = function() {
                this.numberPlateService.selectPlate("AAAAA", c.NumberPlate.SelectType.EXPIRATION)
            }, t.prototype.bindPlate = function(e, t, i) {
                e && t && e.setProps({
                    personalNumber: this.personalNumber,
                    uniqueNumber: t.plateNumber,
                    templateCode: t.templateCode
                })
            }, t
        }(r.ScrollBarPagePopupBinder);
    n.__decorate([a.autowired("numberPlateService")], d.prototype, "numberPlateService", void 0), t.AutoCollectNumberPlatePopup = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(23),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.WheelEventDelayMs = 500, t.scrollGap = 0, t.isDragging = !1, t.dragBoundaryY = {
                    prev: 0,
                    next: 0
                }, t.pageIndex = 0, t.pageSize = 0, t.isPaging = !1, t.selectedIndex = 0, t.currListBinder = [], t.nextListBinder = [], t.dragEventHandler = _.bind(function(e) {
                    switch (e.type) {
                        case "mousedown":
                            t.onDragStartScrollBar(e);
                            break;
                        case "mouseup":
                            t.onDragEndScrollBar(e);
                            break;
                        case "mousemove":
                            t.onDragScrollBar(e);
                            break;
                        case "click":
                            t.onClickScrollBarTrack(e)
                    }
                }, t), t
            }
            return n.__extends(t, e), t.prototype.setWheelEventDelayMs = function(e) {
                this.WheelEventDelayMs = e
            }, t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.face.hasSize = !0, this.scrollBarContainer = this.getFace(".id-scrollBar"), this.scrollBarContainer.hasSize = !0, this.scrollBarThumb = this.scrollBarContainer.$(".id-thumb"), this.scrollBarThumb.hasSize = !0, this.scrollBarTrack = this.scrollBarContainer.$(".id-track"), this.scrollBarTrack.hasSize = !0;
                var t = _.throttle(this.wheelEventHandler.bind(this), this.WheelEventDelayMs, {
                    trailing: !1
                });
                this.pagingContainer && this.pagingContainer.htmlElement.addEventListener("wheel", t), this.scrollBarThumb.htmlElement.addEventListener("wheel", t), this.scrollBarTrack.htmlElement.addEventListener("wheel", t), this.scrollBarThumb.htmlElement.addEventListener("mousedown", this.dragEventHandler.bind(this)), this.scrollBarTrack.htmlElement.addEventListener("click", this.dragEventHandler.bind(this))
            }, t.prototype.resetScrollBar = function() {
                this.isDragging = !1, this.scrollGap = this.scrollBarTrack.height / this.pageSize, this.scrollBarThumb.y = this.pageIndex * this.scrollGap, this.scrollBarThumb.regY = 0, this.scrollBarThumb.scaleYMultiplier = this.scrollGap / this.scrollBarThumb.height, this.scrollBarContainer.visible = 1 < this.pageSize
            }, t.prototype.onItemClick = function(e, t) {
                var i = this.currListBinder[e].face;
                i.selected || (this.currListBinder.forEach(function(e) {
                    e.face.selected = !1
                }), i.selected = !0, this.selectedIndex = e, this.itemClickCallback && this.itemClickCallback(e, t))
            }, t.prototype.movePage = function(e, t, i) {
                var n = this;
                if (!this.isPaging && !(e < 0 || this.pageSize <= e || this.pageIndex === e)) {
                    this.currListBinder[this.selectedIndex].face.selected && (this.currListBinder[this.selectedIndex].face.selected = !1), this.movePageCallback1 && this.movePageCallback1(), this.isPaging = !0, this.pageIndex = e, this.bindList && this.bindList(this.nextListBinder, this.pageIndex);
                    var r = t;
                    "first" === t && (r = "previous"), "last" === t && (r = "next"), this.gotoAndPlay(this.pagingContainer, r), i && this.moveScrollBar(e), setTimeout(function() {
                        n.bindList && n.bindList(n.currListBinder, n.pageIndex), n.currListBinder[n.selectedIndex].face.selected && (n.currListBinder[n.selectedIndex].face.selected = !1), n.movePageCallback2 && n.movePageCallback2()
                    }, 100)
                }
            }, t.prototype.moveScrollBar = function(e) {
                var t = this,
                    i = e * this.scrollGap;
                this.scrollBarThumb.addCustomToTween(.2, {
                    flash: {
                        y: i,
                        onComplete: function() {
                            t.scrollBarThumb.y = i
                        }
                    }
                })
            }, t.prototype.wheelEventHandler = function(e) {
                if (!this.isPaging) {
                    var t = Math.max(-1, Math.min(1, e.wheelDelta || -e.detail));
                    1 === t ? this.movePage(this.pageIndex - 1, "previous", !0) : -1 === t && this.movePage(this.pageIndex + 1, "next", !0)
                }
            }, t.prototype.getViewportScaledValue = function(e) {
                return this.graphicConfigService.scaleRatio * e
            }, t.prototype.getScaledValueY = function(e, t) {
                return e.scaleY * t
            }, t.prototype.onDragStartScrollBar = function(e) {
                this.isDragging = !0, this.dragBoundaryY.prev = e.y - this.getViewportScaledValue(this.getScaledValueY(this.scrollBarThumb, e.offsetY)), this.dragBoundaryY.next = this.dragBoundaryY.prev + this.getViewportScaledValue(this.scrollGap), this.face.htmlElement.addEventListener("mousemove", this.dragEventHandler.bind(this)), this.face.htmlElement.addEventListener("mouseup", this.dragEventHandler.bind(this))
            }, t.prototype.onDragEndScrollBar = function(e) {
                this.isDragging = !1, this.face.htmlElement.removeEventListener("mousemove", this.dragEventHandler.bind(this)), this.face.htmlElement.removeEventListener("mouseup", this.dragEventHandler.bind(this))
            }, t.prototype.onDragScrollBar = function(e) {
                if (!this.isPaging && this.isDragging) {
                    var t = void 0,
                        i = this.scrollBarThumb.y;
                    e.y < this.dragBoundaryY.prev ? (t = "previous", i -= this.scrollGap) : this.dragBoundaryY.next < e.y && (t = "next", i += this.scrollGap);
                    var n = Math.round(i / this.scrollGap);
                    n < 0 && (n = 0), this.pageSize <= n && (n = this.pageSize - 1), this.pageIndex !== n && (this.movePage(n, t, !0), "previous" === t ? (this.dragBoundaryY.next = this.dragBoundaryY.prev, this.dragBoundaryY.prev -= this.getViewportScaledValue(this.scrollGap)) : (this.dragBoundaryY.prev = this.dragBoundaryY.next, this.dragBoundaryY.next += this.getViewportScaledValue(this.scrollGap)))
                }
            }, t.prototype.onClickScrollBarTrack = function(e) {
                e.offsetY < this.scrollBarThumb.y ? this.movePage(this.pageIndex - 1, "previous", !0) : this.scrollBarThumb.y + this.getScaledValueY(this.scrollBarThumb, this.scrollBarThumb.height) < e.offsetY && this.movePage(this.pageIndex + 1, "next", !0)
            }, t.prototype.preventMouseEvent = function(e) {
                this.classNames(this.face, e ? "prevent-click" : "")
            }, t
        }(o.PopupBinder);
    n.__decorate([r.autowired("graphicConfigService")], a.prototype, "graphicConfigService", void 0), t.ScrollBarPagePopupBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(23),
        s = i(2),
        c = i(27),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-itemPriceLabel", "SHOP_POPUP_PURCHASE_PRICE"), this.translate(".id-cancelButton", "SHOP_POPUP_PURCHASE_CANCEL"), this.getFace(".id-buyButton").on(s.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-cancelButton").on(s.MouseEventEx.CLICK, this.props.cancel), this.itemCardBinder = this.addChildBinder(".id-itemCard", c.ItemCardBinder);
                var t = this.getFace(".ItemPriceNumber"),
                    i = t.$(".id-monetaryUnitIcon"),
                    n = t.$(".id-itemPriceNum");
                t.hasSize = !0, i.hasSize = !0, t.htmlElement.insertBefore(n.htmlElement, i.htmlElement)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), t.type ? this.showOtherItem(t) : this.showTuningAndShopProduct(t)
            }, t.prototype.showTuningAndShopProduct = function(e) {
                var t = e.product,
                    i = e.bunches,
                    n = e.bunch,
                    r = e.possession,
                    a = e.tuningItem;
                this.gotoAndStopAll(".MonetaryUnitIcon", o.default.getPriceIconLabel(n.currency));
                var s = this.shopService.getPopupText(n.currency),
                    c = s.possessionText,
                    d = s.balanceText;
                if (this.translate(".id-myPossessionLabel", c), this.translate(".id-balanceLabel", d), this.bindText(".id-myPossessionNum", o.default.toMoney(r)), this.bindText(".id-itemPriceNum .id-itemPriceNum", o.default.toMoney(n.price)), this.bindText(".id-balanceNum", o.default.toMoney(r - n.price)), "TUNING_SHOP" === t.sellingShop) this.translate(".id-popupName", "TUNING_SHOP_POPUP_CONFIRMPURCHASE_TITLE"), this.translate(".id-subTitleLabel", "TUNING_SHOP_POPUP_PURCHASE_BUNCH"), this.translate(".id-description .id-textfield", "TUNING_SHOP_POPUP_CONFIRMPURCHASE_TEXT1"), this.translate(".id-description .id-descriptionLabel", "TUNING_SHOP_POPUP_CONFIRMPURCHASE_TEXT2"), this.translate(".id-buyButton", "TUNING_SHOP_POPUP_CONFIRMPURCHASE_PURCHASE_CONFIRM_BUTTON"), this.bindText(".id-decidePriceLabel .id-numberLabel", "" + o.default.toMoney(n.price));
                else {
                    this.translate(".id-popupName", "SHOP_POPUP_CONFIRMPURCHASE_TITLE"), this.translate(".id-subTitleLabel", "SHOP_POPUP_PURCHASE_BUNCH"), this.translate(".id-description .id-textfield", "SHOP_POPUP_CONFIRMPURCHASE_TEXT1"), this.translate(".id-description .id-descriptionLabel", this.shopService.isCash(n.currency) ? "SHOP_POPUP_CONFIRMPURCHASE_TEXT2" : ""), this.translate(".id-buyButton", "SHOP_POPUP_PURCHASE_PURCHASE");
                    var l = n.count + this.$filter("translate")("SHOP_POPUP_PURCHASE_AMOUNT");
                    this.bindText(".id-decidePriceLabel .id-numberLabel", o.default.toMoney(n.price) + " / " + l)
                }
                var u = _.minBy(i, function(e) {
                    return e.count
                });
                this.itemCardBinder.setProps({
                    info: {
                        name: t.name,
                        img: this.shopService.getProductImgPath(t),
                        type: a ? "TUNING" : "SHOP_PRODUCT",
                        code: a ? a.code : void 0,
                        price: u.price,
                        currency: u.currency,
                        count: 1,
                        rank: t.rank,
                        fallbackImg: this.shopService.getProductFallbackImgPath(t)
                    },
                    mouseDisabled: !0
                })
            }, t.prototype.showOtherItem = function(e) {
                var t = e.possession;
                this.gotoAndStopAll(".MonetaryUnitIcon", o.default.getPriceIconLabel(e.currency));
                var i = this.shopService.getPopupText(e.currency),
                    n = i.possessionText,
                    r = i.balanceText;
                if (this.translate(".id-myPossessionLabel", n), this.translate(".id-balanceLabel", r), this.bindText(".id-myPossessionNum", o.default.toMoney(t)), this.bindText(".id-itemPriceNum .id-itemPriceNum", o.default.toMoney(e.price)), this.bindText(".id-balanceNum", o.default.toMoney(t - e.price)), this.translate(".id-popupName", "SHOP_POPUP_CONFIRMPURCHASE_TITLE"), this.translate(".id-subTitleLabel", "SHOP_POPUP_PURCHASE_BUNCH"), this.translate(".id-description .id-textfield", "SHOP_POPUP_CONFIRMPURCHASE_TEXT1"), this.translate(".id-description .id-descriptionLabel", this.shopService.isCash(e.currency) ? "SHOP_POPUP_CONFIRMPURCHASE_TEXT2" : ""), this.translate(".id-buyButton", "SHOP_POPUP_PURCHASE_PURCHASE"), e.count <= 1 && e.hideSingleCount) this.bindText(".id-decidePriceLabel .id-numberLabel", "" + o.default.toMoney(e.price));
                else {
                    var a = e.count + this.$filter("translate")("SHOP_POPUP_PURCHASE_AMOUNT");
                    this.bindText(".id-decidePriceLabel .id-numberLabel", o.default.toMoney(e.price) + " / " + a)
                }
                var s = {
                    info: {
                        name: e.name,
                        type: e.type,
                        code: e.code,
                        price: e.price,
                        currency: e.currency,
                        count: e.count,
                        fallbackImg: void 0
                    },
                    mouseDisabled: !0
                };
                switch (e.type) {
                    case "NUMBER_PLATE_INSTANCE":
                        s.info.plate = e.plate
                }
                this.itemCardBinder.setProps(s)
            }, t
        }(a.PopupBinder);
    n.__decorate([r.autowired("shopService")], d.prototype, "shopService", void 0), t.BuyShopItemConfirmPopup = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(27),
        s = i(1),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-popupName", "SHOP_POPUP_FINALCONFIRMPURCHASE_TITLE"), this.translate(".id-description .id-textfield", "SHOP_POPUP_CONFIRMPURCHASE_TEXT1"), this.translate(".id-confirmButton", "SHOP_POPUP_FINALCONFIRMPURCHASE_YES"), this.translate(".id-cancelButton", "SHOP_POPUP_FINALCONFIRMPURCHASE_NO"), this.getFace(".id-confirmButton").on(o.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-cancelButton").on(o.MouseEventEx.CLICK, this.props.cancel), this.itemCardBinder = this.addChildBinder(".id-itemCard", a.ItemCardBinder)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t);
                var i = t.product,
                    n = t.bunches,
                    r = _.minBy(n, function(e) {
                        return e.count
                    });
                this.translate(".id-description .id-descriptionLabel", this.shopService.isCash(r.currency) ? "SHOP_POPUP_CONFIRMPURCHASE_TEXT2" : ""), this.itemCardBinder.setProps({
                    info: {
                        name: i.name,
                        img: this.shopService.getProductImgPath(i),
                        type: "SHOP_PRODUCT",
                        price: r.price,
                        currency: r.currency,
                        count: 1,
                        rank: i.rank,
                        fallbackImg: this.shopService.getProductFallbackImgPath(i)
                    },
                    mouseDisabled: !0
                })
            }, t
        }(r.PopupBinder);
    n.__decorate([s.autowired("shopService")], c.prototype, "shopService", void 0), t.BuyShopItemDecidePopup = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(1),
        s = i(27),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.eventListenerInfos = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-popupName", "SHOP_POPUP_PURCHASEDONE_TITLE"), this.translate(".id-description .id-textfield", "SHOP_POPUP_CONFIRMPURCHASE_TEXT1"), this.translate(".id-historyButton", "SHOP_POPUP_FINALCONFIRMPURCHASE_YES_HISTORY"), this.translate(".id-storageButton", "SHOP_POPUP_FINALCONFIRMPURCHASE_NO_INBOX"), this.translate(".id-confirmButton", "SHOP_POPUP_FINALCONFIRMPURCHASE_YES_CONFIRM"), this.getFace(".id-confirmButton").on(o.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-historyButton").enabled = !1, this.itemCardBinder = this.addChildBinder(".id-itemCard", s.ItemCardBinder)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t);
                var i = t.product,
                    n = t.bunches,
                    r = t.desc;
                r && (this.translate(".id-description .id-textfield", r.top), this.translate(".id-description .id-descriptionLabel", r.bottom)), this.registerButtonEvent("historyButton", t.onClickHistory), this.registerButtonEvent("storageButton", t.onClickInbox);
                var o = _.minBy(n, function(e) {
                    return e.count
                });
                this.translate(".id-description .id-descriptionLabel", this.shopService.isCash(o.currency) ? "SHOP_POPUP_CONFIRMPURCHASE_TEXT2" : ""), this.itemCardBinder.setProps({
                    info: {
                        name: i.name,
                        img: this.shopService.getProductImgPath(i),
                        type: "SHOP_PRODUCT",
                        price: o.price,
                        currency: o.currency,
                        count: 1,
                        rank: i.rank,
                        fallbackImg: this.shopService.getProductFallbackImgPath(i)
                    },
                    mouseDisabled: !0
                })
            }, t.prototype.registerButtonEvent = function(e, t) {
                var i = {
                    target: this.getFace(".id-" + e),
                    event: o.MouseEventEx.CLICK,
                    listener: t
                };
                i.target.on(i.event, i.listener), this.eventListenerInfos.push(i)
            }, t.prototype.onClose = function() {
                this.eventListenerInfos.forEach(function(e) {
                    var t = e.target,
                        i = e.event,
                        n = e.listener;
                    t.off(i, n)
                }), this.eventListenerInfos.splice(0)
            }, t
        }(r.PopupBinder);
    n.__decorate([a.autowired("shopService")], c.prototype, "shopService", void 0), t.BuyShopItemCompletePopup = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1),
        a = i(23),
        s = i(2),
        c = i(27),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-popupName", "SHOP_POPUP_CONFIRMGIFT_TITLE"), this.translate(".id-subTitleLabel", "SHOP_POPUP_GIFT_BUNCH"), this.translate(".id-itemPriceLabel", "SHOP_POPUP_GIFT_PRICE"), this.translate(".id-receiverLabel", "SHOP_POPUP_CONFIRMGIFT_RECIPIENT"), this.translate(".id-messageLabel", "SHOP_POPUP_CONFIRMGIFT_CONTEXT"), this.translate(".id-giftButton", "SHOP_POPUP_CONFIRMGIFT_GIFT"), this.translate(".id-cancelButton", "SHOP_POPUP_CONFIRMGIFT_CANCEL"), this.getFace(".id-giftButton").on(s.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-cancelButton").on(s.MouseEventEx.CLICK, this.props.cancel), this.itemCardBinder = this.addChildBinder(".id-itemCard", c.ItemCardBinder);
                var t = this.getFace(".ItemPriceNumber"),
                    i = t.$(".id-monetaryUnitIcon"),
                    n = t.$(".id-itemPriceNum");
                t.hasSize = !0, i.hasSize = !0, t.htmlElement.insertBefore(n.htmlElement, i.htmlElement), this.messageInput = this.convertFace(this.getFace(".id-inputTextArea .id-textField")), this.messageInput.htmlElement.addEventListener("input", this.onMessageBoxInput.bind(this)), this.messageInput.maxLength = 40, $(this.messageInput.htmlElement).attr("placeholder", this.$filter("translate")("SHOP_POPUP_CONFIRMGIFT_CONTEXT_GUIDE")), this.messageCharCount = this.getFace(".id-charCountLabel")
            }, t.prototype.updateMessageCharCount = function() {
                this.bindText(this.messageCharCount, this.messageInput.text.length + "/40")
            }, t.prototype.show = function(t) {
                var i = this;
                e.prototype.show.call(this, t);
                var n = t.receiver,
                    o = t.product,
                    a = t.bunches,
                    s = t.bunch,
                    c = t.possession,
                    d = s.count + this.$filter("translate")("SHOP_POPUP_GIFT_AMOUNT");
                this.bindText(".id-decidePriceLabel .id-numberLabel", r.default.toMoney(s.price) + " / " + d), this.gotoAndStopAll(".MonetaryUnitIcon", r.default.getPriceIconLabel(s.currency));
                var l = this.shopService.getPopupText(s.currency),
                    u = l.possessionText,
                    p = l.balanceText;
                this.translate(".id-myPossessionLabel", u), this.translate(".id-balanceLabel", p), this.bindText(".id-myPossessionNum", r.default.toMoney(c)), this.bindText(".id-itemPriceNum .id-itemPriceNum", r.default.toMoney(s.price)), this.bindText(".id-balanceNum", r.default.toMoney(c - s.price));
                var h = _.minBy(a, function(e) {
                    return e.count
                });
                this.itemCardBinder.setProps({
                    info: {
                        name: o.name,
                        img: this.shopService.getProductImgPath(o),
                        type: "SHOP_PRODUCT",
                        price: h.price,
                        currency: h.currency,
                        count: 1,
                        rank: o.rank,
                        fallbackImg: this.shopService.getProductFallbackImgPath(o)
                    },
                    mouseDisabled: !0
                }), this.translate(".id-receiverNameArea", n), this.messageInput.text = "", this.updateMessageCharCount(), setTimeout(function() {
                    i.messageInput.htmlElement.focus()
                }, 50)
            }, t.prototype.onMessageBoxInput = function(e) {
                this.updateMessageCharCount()
            }, t
        }(a.PopupBinder);
    n.__decorate([o.autowired("publisherService")], d.prototype, "publisherService", void 0), n.__decorate([o.autowired("shopService")], d.prototype, "shopService", void 0), t.GiftShopItemConfirmPopup = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(27),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.eventListenerInfos = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.descContainer = this.getFace(".id-descriptionContainer"), this.itemCardBinder = this.addChildBinder(".id-itemCard", a.ItemCardBinder)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.context = t, this.translate(".id-popupName", t.title || ""), this.itemCardBinder.setProps(t.itemCardProps), this.setDescContainer(), this.setButtonContainer()
            }, t.prototype.setDescContainer = function() {
                this.gotoAndStop(this.descContainer, this.context.desc.bottom ? "bottom" : "noneBottom"), this.context.desc.bottom ? (this.bindHtml(".Description .id-textfield", "<span>" + this.context.desc.top + "</span>"), this.bindHtml(".Description .id-descriptionLabel", "<span>" + this.context.desc.bottom + "</span>")) : this.bindHtml(".DescriptionNoneBottom .id-textfield", this.context.desc.top)
            }, t.prototype.setButtonContainer = function() {
                var e, t = this.context.buttons.length;
                this.context.isInvertTwoButton ? (e = "invertTwoButton", this.buttonContainer = this.getFace(".id-invertTwoButton")) : 1 === t ? (e = "oneButton", this.buttonContainer = this.getFace(".id-oneButton")) : 2 === t ? (e = "twoButton", this.buttonContainer = this.getFace(".id-twoButton")) : 3 === t && (e = "threeButton", this.buttonContainer = this.getFace(".id-threeButton")), this.gotoAndStop(".id-buttonContainer", e), this.setButtons(e)
            }, t.prototype.setButtons = function(e) {
                this.registerButtonEvent("confirm", this.props.confirm), "twoButton" !== e && "invertTwoButton" !== e || this.registerButtonEvent("cancel", this.props.cancel), "threeButton" === e && (this.registerButtonEvent("left"), this.registerButtonEvent("center"))
            }, t.prototype.registerButtonEvent = function(e, t) {
                var i = this,
                    n = this.context.buttons || [],
                    r = _.find(n, (s = {}, s.type = e, s)),
                    a = {
                        target: this.buttonContainer.$(".id-" + e),
                        event: o.MouseEventEx.CLICK,
                        listener: function(e) {
                            i.enableButton(a.target, !1), (r.onClick || t)(e)
                        }
                    };
                this.enableButton(a.target, !0), this.translate(a.target, r.name), a.listener && (a.target.on(a.event, a.listener), this.eventListenerInfos.push(a));
                var s
            }, t.prototype.onClose = function() {
                this.eventListenerInfos.forEach(function(e) {
                    var t = e.target,
                        i = e.event,
                        n = e.listener;
                    t.off(i, n)
                }), this.eventListenerInfos.splice(0)
            }, t
        }(r.PopupBinder);
    t.ItemIconConfirmPopup = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1),
        a = i(23),
        s = i(2),
        c = i(27),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-popupName", "INBOX_POPUP_WITHDRAWL_TITLE"), this.translate(".id-myPossessionLabel", "INBOX_POPUP_WITHDRAWL_MYCASH"), this.translate(".id-coolingOffPriceLabel", "INBOX_POPUP_WITHDRAWL_WITHDRAWLCASH"), this.translate(".id-description .id-textfield", "INBOX_POPUP_WITHDRAWL_TEXT1"), this.translate(".id-description .id-descriptionLabel", "INBOX_POPUP_WITHDRAWL_TEXT2"), this.translate(".id-confirmButton", "INBOX_POPUP_WITHDRAWL_WITHDRAW"), this.translate(".id-cancelButton", "INBOX_POPUP_WITHDRAWL_CANCEL"), this.getFace(".id-confirmButton").on(s.MouseEventEx.CLICK, this.props.confirm), this.getFace(".id-cancelButton").on(s.MouseEventEx.CLICK, this.props.cancel), this.itemCardBinder = this.addChildBinder(".id-itemCard", c.ItemCardBinder);
                var t = this.getFace(".ItemPriceNumber"),
                    i = t.$(".id-monetaryUnitIcon"),
                    n = t.$(".id-itemPriceNum");
                t.hasSize = !0, i.hasSize = !0, t.htmlElement.insertBefore(n.htmlElement, i.htmlElement)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.gotoAndStopAll(".MonetaryUnitIcon", "cash");
                var i = this.shopService.getMyMoney(t.bunch.currency);
                this.bindText(".id-myPossessionNum", r.default.toMoney(i)), this.bindText(".ItemPriceNumber .id-itemPriceNum", r.default.toMoney(t.bunch.price)), this.itemCardBinder.setProps(t.itemCardProps)
            }, t
        }(a.PopupBinder);
    n.__decorate([o.autowired("shopService")], d.prototype, "shopService", void 0), t.CoolingOffConfirmPopup = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this);
                var t = this.getFace(".id-confirm"),
                    i = this.props.confirm;
                t.on(o.MouseEventEx.CLICK, i)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t), this.drawLabel(".id-title > .id-textfield", t.title), this.drawLabel(".id-description > .id-textfield", t.description), this.drawLabel(".id-addition > .id-textfield", t.addition), this.drawLabel(".id-confirm", "COMMON_POPUP_EXIT_BUTTON_CONFIRM")
            }, t
        }(r.PopupBinder);
    t.ConfirmMultiLabelPopup = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(1),
        s = i(27),
        c = i(13),
        d = i(37),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.itemCardBinder = this.addChildBinder(".id-itemCardSmall", s.ItemCardBinder)
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.item;
                if (_.isEmpty(i)) return void this.enableButton(this.face, !1);
                this.enableButton(this.face, !0), this.itemCardBinder.setProps({
                    info: {
                        code: i.code,
                        type: i.type,
                        count: i.count
                    },
                    onMouseOver: function(e, i) {
                        t.tooltipService.show(e, "left", c.TooltipType.ItemCard, i, {
                            screen: c.TooltipScreen.LevelUp,
                            marginLeft: -6,
                            marginTop: -1
                        })
                    },
                    onMouseOut: function() {
                        return t.tooltipService.hide()
                    },
                    actionButtonEnabled: !1
                }), this.bindText(".id-titleLabel", this.$filter("rewardName")(i.type, i.code, i.count, i.opts)), this.bindText(".id-descriptionLabel", this.$filter("translate")(i.type + "_" + i.code + "_DESC"))
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([a.autowired("tooltipService")], l.prototype, "tooltipService", void 0), t.LevelupRewardItemBinder = l;
    var u = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.binderSets = {}, t.type = "animation", t.container = ".RewardAnimation", t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.translateAll(".id-titleLabel .titleLabelText", "PLAYERLEVELUP_POPUP_LEVELUP"), this.translateAll(".id-confirm", "PLAYERLEVELUP_POPUP_CONFIRM"), this.translateAll(".id-subTitleLabel2", "LEVELUP_PREVIOUS_LEVEL_REWARDS"), this.translateAll(".id-subTitleLabel3", "LEVELUP_NEXT_LEVEL_REWARDS"), this.translateAll(".id-lastLevelInfoContainer .id-statusLabel", "LEVELUP_PREVIOUS_LEVEL_ACQUIRED"), this.translateAll(".LevelTitleLabel", "PLAYER_REWARDLEVELING_POPUP_LEVEL"), this.addManagedListener(this.getFace(".id-confirm"), o.MouseEventEx.CLICK, function(t) {
                e.props.confirm && e.props.confirm()
            }), this.initUiPreset(this.type, this.container)
        }, t.prototype.initUiPreset = function(e, t) {
            for (var i = [], n = [], r = 1; r <= 3; ++r) i.push(this.addChildBinder(t + " .id-rewardItemIconContainer" + r, l)), n.push(this.addChildBinder(t + " .id-nextLevelInfoContainer .id-rewardItemContainer .id-rewardItem" + r + " .id-itemCardSmall", s.ItemCardBinder));
            this.binderSets[e] = {
                rewardListBinder: i,
                nextRewardBinder: n
            }
        }, t.prototype.show = function(t) {
            var i = this;
            e.prototype.show.call(this, t);
            var n = this.binderSets[t.preview ? "normal" : "animation"];
            this.translateAll(".id-subTitleLabel1", t.preview ? "LEVELUP_NEXT_ACQUIRE_REWARDS" : "LEVELUP_ACQUIRED_REWARDS"), this.bindTextAll(".id-levelNumLabel1", t.level - 1), this.bindTextAll(".id-levelNumLabel2", t.level);
            var r = this.rewardService.getLevelReward(t.level);
            n.rewardListBinder.forEach(function(e, t) {
                e.setProps({
                    item: r[t],
                    index: t
                })
            });
            var o = this.rewardService.getLevelReward(t.level + 1),
                a = !_.isEmpty(o);
            if (this.visibleAll(".id-levelNumLabel3", a), this.visibleAll(".id-levelTitleLabel3", a), this.visibleAll(".id-subTitleLabel3", a), this.visibleAll(".id-nextLevelInfoContainer", a), this.visibleAll(".id-nextArrow", a), this.visibleAll(".id-nextCirclePoint", a), a) {
                this.bindTextAll(".id-levelNumLabel3", t.level + 1);
                var s = o.map(function(e, t) {
                    return {
                        info: {
                            code: e.code,
                            type: e.type,
                            count: e.count
                        },
                        onMouseOver: function(e, t) {
                            i.tooltipService.show(e, "right", c.TooltipType.ItemCard, t, {
                                screen: c.TooltipScreen.LevelUp,
                                marginLeft: 5,
                                marginTop: -1
                            })
                        },
                        onMouseOut: function() {
                            return i.tooltipService.hide()
                        },
                        actionButtonEnabled: !1
                    }
                });
                n.nextRewardBinder.forEach(function(e, t) {
                    var n = s[t];
                    e.setProps(n), i.visible(e.face, !_.isEmpty(n))
                })
            }
            this.audioService.get(d.FxAudioCode.Level_Up).play(), this.gotoAndPlay(this.face, t.preview ? "normal" : "playAnimation")
        }, t.prototype.onKeyboardConfirm = function() {
            this.props.confirm && this.props.confirm()
        }, t
    }(r.PopupBinder);
    n.__decorate([a.autowired("rewardService")], u.prototype, "rewardService", void 0), n.__decorate([a.autowired("tooltipService")], u.prototype, "tooltipService", void 0), n.__decorate([a.autowired("audioService")], u.prototype, "audioService", void 0), t.LevelupRewardPopup = u;
    var p = function(e) {
        function t() {
            var t = e.call(this) || this;
            return t.type = "normal", t.container = ".RewardAnimationNormal", t
        }
        return n.__extends(t, e), t
    }(u);
    t.LevelupRewardPreviewPopup = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(1),
        s = i(236),
        c = i(182),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-popupName", "PARTS_INSTALL_CONFIRM_TITLE"), this.translate(".id-title", "PARTS_INSTALL_GETPARTSALARM"), this.translate(".id-description", "PARTS_INSTALL_GETPARTHELP"), this.drawLabel(".id-confirm", "POPUP_VEHICLELIST_FULL_TOVEHICLELIST"), this.drawLabel(".id-cancel", "COMMON_POPUP_EXIT_BUTTON_CANCEL"), this.partBinder = this.addChildBinder(".id-partsIcon", s.InventoryPartsBinder);
                var e = this.props,
                    t = e.confirm,
                    i = e.cancel,
                    n = this.getFace(".id-confirm"),
                    r = this.getFace(".id-cancel");
                n.on(o.MouseEventEx.CLICK, t), r.on(o.MouseEventEx.CLICK, i)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t);
                var i = t.code,
                    r = this.staticdataLoaderService.partsItemData[i];
                this.partBinder.setProps(n.__assign({}, r, {
                    resource: c.getParts(i),
                    tooltip: {
                        side: "right"
                    }
                }));
                var o = this.$filter("translate")("PARTS_" + i + "_NAME");
                this.drawLabel(".PartsName", o)
            }, t
        }(r.PopupBinder);
    n.__decorate([a.autowired("staticdataLoaderService")], d.prototype, "staticdataLoaderService", void 0), t.PartsInstallNotificationPopup = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(1),
        a = i(2),
        s = i(236),
        c = i(317),
        d = i(182),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-popupName", "PARTS_INSTALL_UPGRADE"), this.translate(".id-title", "PARTS_INSTALL_GETMATERIALALARM"), this.translate(".id-description", "PARTS_INSTALL_GETMATERIALHELP"), this.drawLabel(".id-confirm", "POPUP_VEHICLELIST_FULL_TOVEHICLELIST"), this.drawLabel(".id-cancel", "COMMON_POPUP_EXIT_BUTTON_CANCEL"), this.basePartsBinder = this.addChildBinder(".id-partsSlotOld", s.InventoryPartsBinder), this.targetPartsBinder = this.addChildBinder(".id-partsSlotNew", s.InventoryPartsBinder), this.materialPartsBinder = this.addChildBinder(".id-materialSlot", c.PartsMaterialBinder);
                var e = this.props,
                    t = e.confirm,
                    i = e.cancel,
                    n = this.getFace(".id-confirm"),
                    r = this.getFace(".id-cancel");
                n.on(a.MouseEventEx.CLICK, t), r.on(a.MouseEventEx.CLICK, i)
            }, t.prototype.show = function(t) {
                e.prototype.show.call(this, t);
                var i = t.code,
                    r = this.staticdataLoaderService.partsItemData[i],
                    o = this.staticdataLoaderService.partsCombineData[i],
                    a = this.staticdataLoaderService.partsItemData[o.targetCode],
                    s = this.staticdataLoaderService.partsMaterialData[o.materialCode];
                this.basePartsBinder.setProps(n.__assign({}, r, {
                    resource: d.getParts(i),
                    tooltip: {
                        side: "right"
                    }
                })), this.targetPartsBinder.setProps(n.__assign({}, a, {
                    resource: d.getParts(a.code),
                    tooltip: {
                        side: "right"
                    }
                })), this.materialPartsBinder.setProps({
                    code: s.code,
                    resource: d.getParts(o.materialCode),
                    tooltip: {
                        side: "left"
                    }
                });
                var c = this.$filter("translate")("PARTS_" + i + "_NAME");
                this.drawLabel(".id-partsSlotOldName", c);
                var l = this.$filter("translate")("PARTS_" + o.materialCode + "_NAME");
                this.drawLabel(".id-materialSlotName", l)
            }, t
        }(r.PopupBinder);
    n.__decorate([o.autowired("staticdataLoaderService")], l.prototype, "staticdataLoaderService", void 0), t.PartsLevelUpNotificationPopup = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(23),
        o = i(2),
        a = i(1),
        s = i(27),
        c = i(13),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.itemCardBinder = this.addChildBinder(this.face, s.ItemCardBinder)
            }, t.prototype.update = function(e) {
                var t = this;
                this.itemCardBinder.setProps({
                    info: e,
                    mouseDisabled: !1,
                    onMouseOver: function(e, i) {
                        t.tooltipService.show(e, "top", c.TooltipType.ItemCard, i, {
                            marginTop: -4
                        })
                    },
                    onMouseOut: function() {
                        return t.tooltipService.hide()
                    }
                })
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([a.autowired("tooltipService")], d.prototype, "tooltipService", void 0), t.RewardItemBinder = d;
    var l = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var t = this;
            e.prototype.onFaceReady.call(this), this.rewardContainer = this.convertFace(".id-rewardItem"), this.rewardContainer.hasSize = !0, this.rewardList = this.addChildBinder(this.rewardContainer.$(".id-itemCardSmallLabel"), a.CollectionBinder, {
                instanceBinder: d
            }), this.translate(".id-title", "OPENWORLD_CAMPAIGN_REWARD_POPUPTITLE"), this.translate(".id-addText", "OPENWORLD_CAMPAIGN_REWARD_DESC"), this.translate(".id-confirm .id-buttonName", "OPENWORLD_CAMPAIGN_REWARD_BUTTON_OK"), this.on(".id-confirm", o.MouseEventEx.CLICK, function(e) {
                t.props.confirm && t.props.confirm()
            })
        }, t.prototype.show = function(t) {
            e.prototype.show.call(this, t);
            var i = this.$filter("translate")("OPENWORLD_CAMPAIGN_TITLE_TITLE_" + t.campaignCode);
            this.template(".id-description", "OPENWORLD_CAMPAIGN_REWARD_TITLE", {
                campaigntitle: i
            }), this.confirm = t.confirm, this.rewardList.applyCollection(t.rewards)
        }, t
    }(r.PopupBinder);
    n.__decorate([a.autowired("tooltipService")], l.prototype, "tooltipService", void 0), n.__decorate([a.autowired("popupService")], l.prototype, "popupService", void 0), t.OpenworldCampaignRewardConfirmPopup = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(8),
        s = i(9),
        c = i(40),
        d = i(29),
        l = i(1338),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.popupWindow = null, t.inputArea = null, t.inputCount = null, t.lastInputText = "", t.needResetTip = !1, t._broadcastTicketCount = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.popupWindow = this.getFace(".id-broadcastPopup"), this.getFace(".id-confirmButton").on(o.MouseEventEx.CLICK, function() {
                    e.onConfirmButtonClick()
                }), this.getFace(".id-cancelButton").on(o.MouseEventEx.CLICK, function() {
                    e.onCancelButtonClick()
                });
                var t = this.getFace(".id-inputContainer .id-chatInput .id-textField");
                this.inputArea = t.htmlElement, this.inputArea.onkeypress = function(e) {
                    e.keyCode === d.KeyboardMap.getKeyCode("ENTER") && e.preventDefault()
                };
                var i = document.createElement("div");
                i.className = "fc-element comp-TextField input-count global-font", this.getFace(".id-inputContainer .id-characterCount").htmlElement.appendChild(i), this.inputCount = i, t.htmlElement.onfocus = function() {
                    return e.focusIn()
                }, t.htmlElement.onblur = function() {
                    return e.focusOut()
                };
                var n = this.staticdataLoaderService.worldChatData;
                this.inputLimit = Number(n.getConfig("BROADCAST_CHARACTER_LIMITED")), this.inputArea.maxLength = this.inputLimit, this.bindText(".id-inputContainer .id-characterCount .id-textField", " / " + this.inputLimit), this.translate(".id-titleLabel .id-textField", "CHAT_BROADCASTING_POPUP_TITLE"), this.translate(".id-description .id-textField", "CHAT_BROADCASTING_LIMITED_CHCRACTERS"), this.translate(".id-subDescription .id-textField", "CHAT_BROADCASTING_TIP"), this.translate(".id-confirmButton .id-buttonName .id-textField", "CHAT_BROADCASTING_POPUP_SEND"), this.translate(".id-cancelButton .id-buttonName .id-textField", "CHAT_BROADCASTING_POPUP_CANCEL"), this.addManagedListener(this.externalService, s.default.beAllPlayerLoaded, function() {
                    e.forceClose()
                }), this.addManagedListener(this.externalService, s.default.beFinishGame, function() {
                    e.forceClose()
                })
            }, t.prototype.focusIn = function() {
                this.inputService.overrideKeyboard("broadcast")
            }, t.prototype.focusOut = function() {
                this.inputService.clearKeyboardOverride("broadcast")
            }, t.prototype.onDetach = function() {
                this.storeUnfinishedInput()
            }, t.prototype.forceClose = function() {
                this.storeUnfinishedInput(), this.dispatch(c.closeBroadcastWindow())
            }, t.prototype.onConfirmButtonClick = function() {
                var e = this;
                if (0 !== this.inputArea.value.length) {
                    var t = this.inputArea.value;
                    this.worldChatService.sendBroadcastMsg(t).then(function() {
                        e.dispatch(c.closeBroadcastWindow())
                    }).catch(function(t) {
                        switch (e.inputArea.value = e.lastInputText, e.lastInputText = "", e.onInputAreaChange(), t.errorCode) {
                            case 8:
                                e.onForbiddenWordFound();
                                break;
                            case 13:
                            case 12:
                                e.onTicketNotEnough()
                        }
                    }), this.lastInputText = t, this.inputArea.value = ""
                }
            }, t.prototype.onCancelButtonClick = function() {
                this.dispatch(c.closeBroadcastWindow())
            }, t.prototype.showWindow = function() {
                var e = this;
                this.worldChatService.fetchBroadcastTicketCount(), this.template(".id-itemCount .id-textField", "CHAT_BROADCASTING_ITEM_HAVINGCOUNT", {
                    number: this.broadcastTicketCount
                }), this.popupWindow.gotoAndPlay("in"), this.popupWindow.once(a.EventEx.STOP, function(t) {
                    "in" === t.currentTarget.currentLabel && e.inputArea && (e.onInputAreaChange(), e.inputArea.oninput = function() {
                        return e.onInputAreaChange()
                    }, e.inputArea.focus())
                }), this.stage.visible = !0, this.dispatch(l.show(!0))
            }, t.prototype.hideWindow = function() {
                this.inputArea && (this.inputArea.value = "", this.onInputAreaChange()), this.popupWindow.gotoAndPlay("out"), this.stage.visible = !1, this.dispatch(c.broadcastUnfinishedInput("")), this.dispatch(l.show(!1))
            }, Object.defineProperty(t.prototype, "broadcastTicketCount", {
                get: function() {
                    return this._broadcastTicketCount
                },
                set: function(e) {
                    this._broadcastTicketCount = Math.max(e, 0), this.stage.visible && this.template(".id-itemCount .id-textField", "CHAT_BROADCASTING_ITEM_HAVINGCOUNT", {
                        number: this.broadcastTicketCount
                    })
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.storeUnfinishedInput = function() {
                var e = this.inputArea.value;
                0 !== e.length && this.dispatch(c.broadcastUnfinishedInput(e))
            }, t.prototype.onForbiddenWordFound = function() {
                this.translate(".id-description .id-textField", "CHAT_BROADCASTING_FORBIDDENWORDS"), this.needResetTip = !0, this.playShakeMessage()
            }, t.prototype.onTicketNotEnough = function() {
                this.translate(".id-description .id-textField", "CHATTING_YELL_UNAVAILABLE"), this.needResetTip = !0, this.playShakeMessage()
            }, t.prototype.playShakeMessage = function() {
                var e = this.getFace(".id-description .id-textField"),
                    t = e.htmlElement;
                t.className = t.className + " message-alarm", setTimeout(function() {
                    var e = t.className.split(" "),
                        i = [];
                    e.forEach(function(e) {
                        "message-alarm" !== e && i.push(e)
                    }), t.className = i.join(" ")
                }, 150)
            }, t.prototype.onInputAreaChange = function() {
                if (this.inputArea) {
                    this.needResetTip && (this.translate(".id-description .id-textField", "CHAT_BROADCASTING_LIMITED_CHCRACTERS"), this.needResetTip = !1), this.inputArea.validity.tooLong && (this.inputArea.value = this.inputArea.value.slice(0, this.inputLimit));
                    var e = this.inputArea.value.length;
                    this.inputCount.innerHTML = "" + e, this.enableButton(".id-confirmButton", this.inputArea.value.length > 0)
                }
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                t.broadcastVisible !== e.broadcastVisible && (e.broadcastVisible ? this.showWindow() : this.hideWindow()), t.broadcastInput !== e.broadcastInput && e.broadcastInput.length > 0 && (this.inputArea.value = e.broadcastInput, this.onInputAreaChange()), t.ticketCount !== e.ticketCount && (this.broadcastTicketCount = e.ticketCount || 0)
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.worldChat;
                return {
                    broadcastVisible: t.broadcastVisible,
                    broadcastInput: t.broadcastInput,
                    ticketCount: t.broadcastTicketCount
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("worldChatService")], u.prototype, "worldChatService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], u.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([r.autowired("inputService")], u.prototype, "inputService", void 0), t.BroadcastPopupBinder = u
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "view.modal.show",
            show: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.show = n
}, function(e, t, i) {
    "use strict";

    function n() {
        return '\n<div id="connState" ng-if="!isConnected()">{{connectionState()}}</div>\n  '
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.tmpl = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(9),
        a = i(46),
        s = i(224),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-description", "COMMON_3DLOADINGWAIT"), this.progressBar = this.addChildBinder(".id-progress", a.ProgressBinder, {
                    duration: 1,
                    outDuration: .5
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.configLoader.getConfig().then(function(t) {
                    return e.gotoAndStop(".id-logoContainer", "cn" === t.locale ? "china" : "korea")
                }), this.addManagedListener(this.externalService, o.default.beSetLoadingScreenForLevel, function(t) {
                    e.dispatch(t ? s.show() : s.hide())
                });
                var t = function(t) {
                    e.reduxProps.show && (e.progressBar.value = t)
                };
                this.addManagedListener(this.externalService, o.default.beSetLoadingProgressForLevel, t), this.addManagedListener(this.externalService, o.default.bePushLoadingProgress, t)
            }, t.prototype.update = function(e) {
                var t = this.reduxProps.show;
                !t && e.show ? this.show() : t && !e.show && this.hide()
            }, t.prototype.show = function() {
                var e = _.range(1, 11);
                this.gotoAndStop(".id-backgroundMC", _.sample(e));
                var t = _.sample(e);
                this.translate(".id-title", "GENERAL_LOADING_TIP_" + t), this.gotoAndStop(".id-icon", t), this.gotoAndPlay(this.face, "in")
            }, t.prototype.hide = function() {
                var e = this;
                this.gotoAndPlay(this.face, "out"), this.face.once("stop", function() {
                    setTimeout(function() {
                        return e.progressBar.value = 0
                    })
                })
            }, t.prototype.mapStateToProps = function(e) {
                return e.coreLoading
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([r.autowired("configLoader")], c.prototype, "configLoader", void 0), t.CoreLevelLoadingBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(3);
    i(1342), i(1343), i(1344), i(1345), i(1346), i(1347), i(1348), i(1349), i(1350), i(1351), i(1352), i(1353), i(1354), angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings", {
            url: "/settings",
            views: {
                "edge-ui-container@": {
                    templateUrl: "templates/settings.tmpl.html",
                    controller: "SettingsController"
                }
            }
        })
    }]).controller("SettingsController", ["$scope", "$timeout", "$state", "popupService", function(e, t, i, o) {
        e.selected = "", e.cheatStatus = "ready", Object.defineProperty(e, "player", {
            get: function() {
                return r.store.getState().player
            }
        }), e.progress = function() {
            e.$applyAsync(function() {
                return e.cheatStatus = "progress"
            })
        }, e.done = function() {
            e.$applyAsync(function() {
                return e.cheatStatus = "done"
            }), t(function() {
                return e.cheatStatus = "ready"
            }, 3e3)
        }, e.error = function() {
            e.$applyAsync(function() {
                return e.cheatStatus = "error"
            }), t(function() {
                return e.cheatStatus = "ready"
            }, 3e3)
        }, e.confirmed = function(e) {
            return new n(function(t) {
                o.draw("ConfirmCancelPopup", {
                    title: e,
                    confirm: t
                })
            })
        }, i.transition.$from().name && i.go(".asset")
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(6),
        o = i(534),
        a = i(10),
        s = i(3),
        c = i(12);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.asset", {
            url: "/asset",
            templateUrl: "templates/cheat/cheat-asset.html",
            controller: "CheatAssetController",
            resolve: {
                _license: ["licenseService", function(e) {
                    return e.fetch()
                }],
                _blueprint: ["blueprintService", function(e) {
                    return e.fetch()
                }],
                _vehicle: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                _parts: ["partsService", function(e) {
                    return e.fetch()
                }]
            }
        })
    }]).controller("CheatAssetController", ["$scope", "$q", "$filter", "playerService", "blueprintService", "vehicleService", "staticdataLoaderService", "numberPlateService", "externalService", function(e, t, i, d, l, u, p, h, f) {
        e.$parent.selected = "asset", d.setRecentVehicleIfNeeded(1), f.beSelectVehicle(c.getRecentVehicle()), e.showMeTheSp = function() {
            e.progress(), d.cheatSp(Number(e.spBonusAmount || 1e7)).then(function() {
                e.spBonusAmount = void 0, e.done()
            })
        }, e.bankrupt = function() {
            e.progress(), d.cheatSp(-e.player.sp).then(function() {
                e.done()
            })
        }, e.updateMileage = function() {
            d.cheatUpdateMileage(e.mileage).then(function() {
                e.mileage = void 0, e.done()
            })
        }, e.setMileageResetNextAt = function() {
            d.cheatMileageResetNextAt(new Date(e.mileageResetNextAt)).then(function() {
                e.done()
            })
        };
        var v = _.keyBy(u.producibleVehicles, "code"),
            m = _.pick(l.staticBlueprints, function(e) {
                return !!v[e.vehiclecode]
            });
        e.getBlueprintItems = function() {
            return m
        }, e.getBlueprintCount = function(e) {
            return l.getBlueprintCount(e)
        }, e.setBlueprintCount = function() {
            e.progress();
            var t = e.selectedBlueprintType,
                i = parseInt(e.selectedBlueprintCount, 10);
            if (t && !isNaN(i)) {
                var n = "*" === t ? _.map(l.staticBlueprints, "code") : [parseInt(t, 10)];
                l.cheatBlueprints(n, i).then(e.done)
            }
        }, e.changeBlueprint = function() {
            var t = e.selectedBlueprintType;
            e.selectedBlueprintCount = "*" === t ? "--" : l.getBlueprintCount(t)
        }, e.partsItemData = _.assign({}, p.partsItemData, p.partsMaterialData), e.getPartsName = function(e) {
            return i("translate")("PARTS_" + e + "_NAME")
        }, e.getPartsCount = function(e) {
            return s.store.getState().parts.parts[e] ? s.store.getState().parts.parts[e].count || 0 : 0
        }, e.setPartsCount = function() {
            e.progress();
            var i = e.selectedPartId,
                r = parseInt(e.selectedPartsCount, 10);
            i && !isNaN(r) && t.when(a.request("PUT", "parts/" + i, {
                count: r
            })).then(function(e) {
                return s.store.dispatch(o.update(e))
            }).then(function() {
                e.done()
            }).catch(function(t) {
                n.error(t), e.error()
            })
        }, e.selectedVehicleFilter = "ALL", e.removeVehicle = "*", e.getVehicles = function() {
            return _.filter(u.producibleVehicles, function(t) {
                return "ALL" === e.selectedVehicleFilter || t.clazz === e.selectedVehicleFilter
            })
        }, e.getRemovableVehicles = function() {
            var e = c.getRecentVehicle();
            return c.getOwnTrialVehicles().filter(function(t) {
                return t.id !== e.id && !t.favorite && !t.igr
            })
        }, e.addVehicles = function() {
            var t = e.selectedVehicleType,
                i = e.selectedVehicleGrade,
                n = e.selectedVehicleTrialCount;
            if (t) {
                i || (i = 1);
                var r;
                return r = "*" === t ? _.map(e.getVehicles(), function(e) {
                    return e.code
                }) : [parseInt(t, 10)], e.progress(), u.addVehicles(r, Number(i), Number(n)).then(e.done)
            }
        }, e.removeVehicles = function() {
            var t = e.removeVehicle;
            if (t) {
                e.progress();
                var i;
                i = "*" === t ? _.map(e.getRemovableVehicles(), function(e) {
                    return e.id
                }) : [t], r.all(i.map(function(e) {
                    return u.removeVehicle(e)
                })).then(function() {
                    e.removeVehicle = "*", e.done()
                }).catch(_.noop)
            }
        }, e.cheatServerTime = function(t) {
            return e.progress(), h.cheatServerTime(t).then(e.done).catch(_.noop)
        }, e.resetServerTime = function() {
            return e.progress(), h.cheatServerTime(void 0).then(e.done).catch(_.noop)
        }, e.getServerTime = function() {
            return e.progress(), h.getServerTime().then(function(t) {
                e.serverTime = new Date(t.currentTime), e.done()
            }).catch(_.noop)
        }, e.levelUp = function(i) {
            i = i || 1, e.progress(), t.when().then(function() {
                return d.cheatAddLevel(i)
            }).then(e.done)
        }, e.levelDown = function() {
            e.progress(), 1 !== s.store.getState().player.level && t.when().then(function() {
                return d.cheatAddLevel(-1)
            }).then(e.done)
        }, e.expUp = function(i) {
            e.progress(), t.when().then(function() {
                return d.cheatAddExp(i)
            }).then(e.done)
        }, e.changeName = function(i) {
            e.progress(), t.when().then(function() {
                return d.cheatChangeName(i)
            }).then(e.done)
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(107),
        r = i(3),
        o = i(136);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.debug", {
            url: "/debug",
            templateUrl: "templates/cheat/cheat-debug.html",
            controller: "CheatDebugController"
        })
    }]).controller("CheatDebugController", ["$scope", "$window", "$rootScope", "$translate", "steeringService", "playerService", "externalService", "featureSetService", function(e, t, i, a, s, c, d, l) {
        e.$parent.selected = "debug", e.isDebugSteering = function() {
            return s.debugSteering
        }, e.debugSteering = function(e) {
            s.debugSteering = e
        }, i.debugLevel = n.Features.debugLevel, e.toggleMode = function() {
            i.debugLevel = n.Features.debugLevel = "debug" === n.Features.debugLevel ? "production" : "debug"
        };
        var u = ["ko", "cn", "en"];
        e.locale = a.use(), e.toggleLocale = function() {
            var t = u[u.indexOf(e.locale) + 1] || u[0];
            a.use(t), angular.element(document.body).attr("locale", t), e.locale = t
        }, e.coreImageTexture = d.hasFeature("experimental.coreImageTexture"), e.toggleCoreImageTexture = function() {
            e.coreImageTexture = !e.coreImageTexture, d.setFeature("experimental.coreImageTexture", e.coreImageTexture)
        }, e.hwRenderedSvg = n.Features.hwRenderedSvg, e.toggleSvgRenderingMode = function() {
            e.hwRenderedSvg = n.Features.hwRenderedSvg = !e.hwRenderedSvg
        }, e.allowFrameSkip = n.Features.allowFrameSkip, e.toggleAnimationFrameSkip = function() {
            e.allowFrameSkip = n.Features.allowFrameSkip = !e.allowFrameSkip
        }, e.supportTweenMaxPause = t._tweenMaxPauseEnabled, e.tweenMaxPauseEnabled = t._tweenMaxPauseEnabled, e.toggleTweenMaxPauseMode = t._toggleTweenMaxPause, e.clientVersion = t.fakeClientVersion || d.beGetCoreVersion(), e.fakeClientVersion = function(i) {
            _.isNumber(i) && (e.progress(), c.changeClientVersion(i).then(function() {
                t.fakeClientVersion = i, e.done()
            }))
        }, e.resetVersion = function() {
            delete t.fakeClientVersion, e.clientVersion = d.beGetCoreVersion(), c.changeClientVersion(e.clientVersion).then(function() {
                e.done()
            })
        }, e.metaVersion = /^cl/.test(edge.version) ? edge.version : "local", e.feature = function(e) {
            return l.isEnabled(e)
        }, e.toggleFeature = function(e) {
            l.isEnabled(e) ? l.cheatDisable(e) : l.cheatEnable(e)
        }, e.testSandSDK = function() {
            var t = e.displayQuality,
                i = e.serverIP,
                n = e.loginStep,
                r = e.loginResult,
                o = e.loginDuration;
            d.beInitSandSDK(t, i, n, r, o)
        }, e.changeAppearance = function() {
            i.displayAppearanceEdit = !i.displayAppearanceEdit, r.store.dispatch(o.appearanceEdit(i.displayAppearanceEdit))
        }, e.isShowingApperanceEdit = function() {
            return i.displayAppearanceEdit
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(3),
        r = i(4);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.item", {
            url: "/item",
            templateUrl: "templates/cheat/cheat-item.html",
            controller: "CheatItemController"
        })
    }]).controller("CheatItemController", ["$scope", "$element", "$filter", "inventoryService", "inboxService", function(e, t, i, o, a) {
        function s(t) {
            e.$applyAsync(function() {
                var i = _.find(u, {
                    code: t || f.val()
                });
                e.desc = i && i.text || ""
            })
        }

        function c() {
            p.children().each(function(e, t) {
                return t.remove()
            }), p.hide(), h = -1
        }

        function d(e, t, i) {
            $(e.get(t)).removeClass("active");
            var n = t + i;
            return n >= e.length ? n = 0 : n < 0 && (n = e.length - 1), $(e.get(n)).addClass("active"), n
        }
        e.$parent.selected = "item";
        var l = i("translate"),
            u = _.map(o.getItemStaticdata(), function(e, t) {
                return {
                    code: t,
                    text: t + " - " + r.default.stripHtml(l("ITEM_" + t + "_NAME"))
                }
            });
        e.desc = "";
        var p = $('<div id="cheat-autocomplete-list"></div>').hide(),
            h = -1,
            f = t.find(".item-code").on("input", function() {
                c();
                var e = f.val();
                if (e) {
                    for (var t = 0, i = 0, n = u.length; i < n; ++i) {
                        if ("break" === function(i, n) {
                                var r = u[i],
                                    o = r.code,
                                    a = r.text;
                                return _.startsWith(o, e) ? ($("<div><strong>" + e + "</strong>" + a.substr(e.length) + "</div>").on("click", function() {
                                    f.val(o), s(o)
                                }).appendTo(p), ++t > 20 ? "break" : void 0) : "continue"
                            }(i)) break
                    }
                    p.children().length && p.show()
                }
            }).on("keydown", function(e) {
                var t = p.children();
                if (t.length) {
                    var i = e.keyCode;
                    40 === i ? h = d(t, h, 1) : 38 === i ? h = d(t, h, -1) : 13 === i && $(t.get(h)).click()
                }
            }).on("change", function() {
                return s()
            });
        p.appendTo(f.parent()), t.find(".inventory-apply").on("click", function() {
            e.progress();
            var i = f.val(),
                n = t.find(".item-count").val() || "1";
            o.cheatItemCount(i, n).then(e.done)
        }), t.find(".inbox-apply").on("click", function() {
            e.progress();
            var r = f.val(),
                o = t.find(".item-count").val() || "1",
                s = n.store.getState().player.id,
                c = {
                    pid: s,
                    title: i("translate")("ITEM_" + r + "_NAME"),
                    desc: i("translate")("ITEM_" + r + "_DESC"),
                    imgpath: a.getItemImgPath(r),
                    type: "PROMOTION",
                    rewards: [{
                        type: "ITEM",
                        code: Number(r),
                        count: parseInt(o, 10)
                    }]
                };
            a.cheatAddPackage(c).then(e.done)
        }), $(document).on("click", c), e.$on("$destroy", function() {
            return $(document).off("click", c)
        })
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(3);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.license", {
            url: "/license",
            templateUrl: "templates/cheat/cheat-license.html",
            controller: "CheatLicenseController",
            resolve: {
                _license: ["licenseService", function(e) {
                    return e.fetch()
                }]
            }
        })
    }]).controller("CheatLicenseController", ["$scope", "licenseService", function(e, t) {
        function i() {
            var i = n.store.getState().license.license;
            e.licenseLabel = function() {
                switch (i.code) {
                    case 1:
                        return "Beginner";
                    case 2:
                        return "Junior";
                    case 3:
                        return "Senior";
                    case 4:
                        return "Expert";
                    default:
                        return ""
                }
            }();
            var r = _.map(t.licenseTestData[i.code], "code");
            e.license = {
                completed: i.completedTest,
                required: _.difference(r, i.completedTest)
            }, e.$evalAsync()
        }
        e.$parent.selected = "license", i(), e.passLicenseTest = function(n) {
            e.progress(), t.cheatPassTest(n).then(function() {
                e.done(), i()
            })
        }, e.promoteLicense = function() {
            e.progress(), t.cheatPromoteLicense().then(function() {
                e.done(), i()
            })
        }, e.demoteLicense = function() {
            e.progress(), t.cheatDemoteLicense().then(function() {
                e.done(), i()
            })
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(12);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.market", {
            url: "/market",
            templateUrl: "templates/cheat/cheat-market.html",
            controller: "CheatMarketController"
        })
    }]).controller("CheatMarketController", ["$scope", "marketService", function(e, t) {
        e.$parent.selected = "market", e.myVehicles = r.getOwnVehicles(), e.registerAllVehicle = function() {
            if (e.myVehicles.length <= 1) return void(e.$parent.cheatStatus = "error");
            e.progress(), n.map(e.myVehicles.slice(1), function(e) {
                return t.registerVehicleOffer(e.id, e.code, e.grade, e.price)
            }, {
                concurrency: 1
            }).then(function() {
                e.done()
            }).catch(function() {
                e.error()
            })
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(10);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.trade", {
            url: "/trade",
            templateUrl: "templates/cheat/cheat-trade.html",
            controller: "CheatTradeController"
        })
    }]).controller("CheatTradeController", ["$scope", function(e) {
        e.$parent.selected = "trade", e.resetCooldown = function(t) {
            e.progress(), n.request("PUT", "traderecords/" + t + "/cooldown").then(function(t) {
                e.done()
            })
        }, e.fakeQuestDayOfWeek = function(t) {
            e.progress(), n.request("PUT", "trades/boosts/dayOfWeek", {
                dayOfWeek: Number(t)
            }).then(function(t) {
                e.done()
            })
        }, e.delFakeDayOfWeek = function(t) {
            e.progress(), n.request("DELETE", "trades/boosts/dayOfWeek").then(function(t) {
                e.done()
            })
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(7),
        r = i(5),
        o = i(10);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.match", {
            url: "/match",
            templateUrl: "templates/cheat/cheat-match.html",
            controller: "CheatMatchController",
            resolve: {
                _festival: ["featureSetService", "festivalService", function(e, t) {
                    return e.isEnabled("FESTIVAL") && t.fetch()
                }]
            }
        })
    }]).controller("CheatMatchController", ["$scope", "festivalService", function(e, t) {
        e.$parent.selected = "match", e.createMatch = function() {
            o.request("POST", "match2")
        }, e.matchTypes = ["room", "ranked", "roomMatchMaking"], e.setMatchCounts = function(t, i) {
            e.progress(), o.request("PUT", "statistics/matchcounts", {
                matchType: t,
                count: Number(i)
            }).then(function(t) {
                e.done()
            })
        }, e.getFestivals = function() {
            return t.festivals
        }, e.getMiniFestivals = function() {
            var i = e.selectedFestivalId;
            return i ? t.getFestival(i).miniFestivals : []
        }, e.getMiniFestivalPlayer = function(i) {
            var n = e.selectedFestivalId;
            return t.getMiniFestivalPlayer(n, i)
        }, e.getFestivalPeriod = function(e, t) {
            return r(e).format("YYYY-MM-DD HH:mm") + " - " + r(t).format("YYYY-MM-DD HH:mm")
        }, e.changeFestivalPointSelection = function() {
            var t = e.selectedFestivalId,
                i = e.selectedMiniFestivalId,
                n = _.toNumber(e.festivalPoint);
            e.festivalPointChecker = t && i && n > 0
        }, e.setFestivalPoint = function(i) {
            var r = e.selectedFestivalId,
                a = e.selectedMiniFestivalId;
            r && a && i > 0 ? (e.progress(), o.request("POST", "devonly/festivals/" + r + "/miniId/" + a + "/increase/point", {
                fid: r,
                miniId: a,
                point: i
            }).then(function(e) {
                return t.fetch()
            }).then(function() {
                e.done()
            }).catch(function(t) {
                window.alert(t.data.message), e.done()
            })) : n.error("Selecting a festival and a mini festival is a must to apply. And the point must be greater than 0.")
        }, e.terminateFestivalChecker = function() {
            return e.terminateFestivalId && Number(e.terminateDays) < 0
        }, e.terminateFestival = function(i) {
            if (i < 0) {
                var n = e.terminateFestivalId;
                e.progress(), o.request("PUT", "devonly/festivals/" + n + "/@terminate", {
                    fid: n,
                    days: Number(i)
                }).then(function(e) {
                    return t.fetchFestival()
                }).then(function() {
                    e.done()
                })
            }
        }, e.setMatchPlayerSize = function() {
            var t = _.toNumber(e.matchPlayerSize);
            _.inRange(t, 1, 9) && (e.progress(), o.request("PUT", "festivalmatchmaking/match/player/size/" + t).then(function() {
                e.matchPlayerSize = "", e.done()
            }))
        }, e.setMatchQueueSize = function() {
            if (!_.isEmpty(e.matchQueueSize)) {
                var t = _.toNumber(e.matchQueueSize);
                t >= 0 && (e.progress(), o.request("PUT", "festivalmatchmaking/minimum/queue/size/" + t).then(function() {
                    e.matchQueueSize = "", e.done()
                }))
            }
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(10);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.messenger", {
            url: "/messenger",
            templateUrl: "templates/cheat/cheat-messenger.html",
            controller: "CheatMessengerController"
        })
    }]).controller("CheatMessengerController", ["$scope", function(e) {
        e.$parent.selected = "messenger", e.addDummyFriends = function(t, i) {
            e.progress(), n.request("POST", "contacts/dummy", {
                count: Number(t),
                prefix: i
            }).then(function(t) {
                e.done()
            })
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(15),
        r = i(5);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.ranked", {
            url: "/ranked",
            templateUrl: "templates/cheat/cheat-ranked.html",
            controller: "CheatRankedController"
        })
    }]).controller("CheatRankedController", ["$scope", "ranked2Service", function(e, t) {
        function i(t) {
            var i = t.nextSeason || t.currSeason,
                n = r(i.startat).add(10, "minutes").subtract(9, "hours");
            e.addRankedSeason_startat_date = n.format("YYYYMMDD"), e.addRankedSeason_startat_time = n.format("HHmm"), e.addRankedSeason_seasonnum = i.seasonnum + 1
        }
        e.$parent.selected = "ranked", e.modifyRankedPlayerObj = {}, e.addRankedSeason_seasonnum = 2, e.addRankedSeason_startat_date = "20160522", e.addRankedSeason_startat_time = "1000", e.rankedGameMode = "SPEED1ON1", e.range = function(e) {
            return _.map(e, function(e, t) {
                return t
            })
        }, e.addRankedSeason = function() {
            e.progress();
            var i = e.addRankedSeason_startat_date + e.addRankedSeason_startat_time,
                n = r(i, "YYYYMMDDhhmm").toDate(),
                o = {
                    seasonnum: e.addRankedSeason_seasonnum,
                    startat: n.toString()
                };
            t.createdRankedSeason(o).then(function() {
                e.done(), e.getRankedSeasonList()
            })
        }, e.deleteRankedSeason = function(i) {
            e.progress(), t.removeRankedSeason(i).then(function() {
                e.done(), e.getRankedSeasonList()
            })
        }, e.dispenseSeasonalReward = function(i) {
            e.progress(), t.dispenseSeasonalReward(i).then(function() {
                e.done()
            })
        }, e.getRankedSeasonList = function() {
            e.progress(), t.getRankedSeasonList().then(function(i) {
                return e.rankedSeasons = i, t.getRankedSeasonCurrent()
            }).then(function(t) {
                e.done(), e.currentRankedSeason = t, i(e.rankedSeasons)
            })
        }, e.setRankedGameMode = function() {
            t.setGameMode(e.rankedGameMode), e.getRankedPlayer()
        }, e.initRankedPlayer = function() {
            t.setGameMode(e.rankedGameMode), t.fetch().then(function(t) {
                e.getRankedPlayer(), e.getRankedSeasonList()
            })
        }, e.getRankedPlayer = function() {
            e.progress(), t.getRankedPlayer().then(function(t) {
                e.$apply(function() {
                    e.done(), e.modifyRankedPlayerObj = _.cloneDeep(t)
                })
            })
        }, e.modifyRankedPlayer = function() {
            e.progress();
            var i = {
                seasonid: e.modifyRankedPlayerObj.seasonId,
                gameMode: e.modifyRankedPlayerObj.gameMode,
                pid: e.modifyRankedPlayerObj.pid,
                path: "records",
                value: e.modifyRankedPlayerObj.records
            };
            t.modifyRankedPlayer(i).then(function(t) {
                e.done(), e.modifyRankedPlayerObj = _.cloneDeep(t)
            })
        }, e.getRankedMatchStateList = function() {
            var e = [];
            return Object.keys(n.Ranked.RankedPlayerStateValuation).forEach(function(t) {
                e.push(n.Ranked.RankedPlayerStateValuation[t])
            }), e
        }, e.initRankedPlayer()
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(3),
        r = i(5),
        o = i(4);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.singleplay", {
            url: "/singleplay",
            templateUrl: "templates/cheat/cheat-singleplay.html",
            controller: "CheatSingleplayController"
        })
    }]).controller("CheatSingleplayController", ["$scope", "$filter", "timetrialService", "staticdataLoaderService", "serverTimeService", function(e, t, i, a, s) {
        e.$parent.selected = "singleplay", e.tracks = i.getTracks();
        var c = function() {
            return i.fetch().then(function() {
                var t = n.store.getState().timetrial,
                    i = t.seasonInfo,
                    r = i.currSeason,
                    o = i.nextSeason,
                    a = t.playerInfo.trackRecords,
                    s = t.platinumTrackCodes;
                e.timetrial = {
                    season: {
                        current: r,
                        next: o
                    },
                    player: {
                        medals: _.sum(_.map(a, function(e) {
                            return e.medalStep
                        })),
                        topMedals: (s || []).length
                    }
                }, e.$evalAsync()
            })
        };
        c();
        var d = function(e) {
            var t = n.store.getState().timetrial.seasonInfo.nextSeason;
            return i.cheatSeason(t.id, e)
        };
        e.advanceSeason = function() {
            e.confirmed("Are you sure to close current season?").then(function() {
                e.progress();
                var t = r(s.time).add(3, "seconds");
                d(t.toString()), setTimeout(function() {
                    c(), e.done()
                }, 3e3)
            })
        }, e.adjustNextSeason = function(t) {
            if (void 0 === t && (t = e.nextSeasonDate), t) {
                var i = r(t, "YYYYMMDDhhmm"),
                    o = n.store.getState().timetrial.seasonInfo,
                    a = o.currSeason,
                    s = (o.nextSeason, r(a.startAt).add(1, "minutes"));
                i <= s && (i = s), e.nextSeasonDate = i.format("YYYYMMDDhhmm"), e.confirmed("Are you sure to modify next season?").then(function() {
                    e.progress(), d(i.toString()).then(function() {
                        c(), e.done()
                    })
                })
            }
        }, e.changeTrack = function() {
            var t = n.store.getState().timetrial,
                i = t.playerInfo,
                r = t.medalLaptimes,
                a = _.get(i, "trackRecords." + e.selectedTrack + ".bestLaptime", 0);
            e.myRecord = a > 0 ? o.default.formatLapTime(a) : "not avaliable";
            var s = r[e.selectedTrack];
            s && (e.medal1Record = o.default.formatLapTime(s[1]), e.medal2Record = o.default.formatLapTime(s[2]), e.medal3Record = o.default.formatLapTime(s[3]))
        };
        var l = function() {
            c().then(function() {
                e.$evalAsync(function() {
                    return e.changeTrack()
                }), e.done()
            })
        };
        e.adjustLaptime = function() {
            var t;
            t = /\d{1,2}:\d{1,2}(\.\d{1,3})?/.test(e.laptime) ? r(e.laptime, "mm:ss.SSS").valueOf() - r().startOf("day").valueOf() : Number(e.laptime), _.isNaN(t) || (e.progress(), i.cheatTrackRecord(e.selectedTrack, t).then(l))
        }, e.deleteRecord = function() {
            e.progress(), i.cheatDeleteTrackRecord(e.selectedTrack).then(l)
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(10);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.publisher", {
            url: "/publisher",
            templateUrl: "templates/cheat/cheat-publisher.html",
            controller: "CheatPublisherController"
        })
    }]).controller("CheatPublisherController", ["$scope", "publisherService", "sessionService", function(e, t, i) {
        e.$parent.selected = "publisher", e.isIgr = function() {
            return t.isIgr
        }, e.putIgr = function(i) {
            return t.putIgr(i).then(function() {
                i ? e.getIgrVehicles() : e.clearIgrVehicles()
            })
        }, e.addIgrVehicle = function() {
            if (!_.isEmpty(e.addIgrVehicleInfo)) return e.progress(), r.request("POST", "igrvehicles", {
                code: e.addIgrVehicleInfo.code,
                grade: e.addIgrVehicleInfo.grade,
                startAt: e.addIgrVehicleInfo.startAt,
                endAt: e.addIgrVehicleInfo.endAt
            }).then(function() {
                e.done(), e.addIgrVehicleInfo = {}, e.getIgrVehicles()
            })
        }, e.setEditIgrVehicle = function(t) {
            var i = _.findIndex(e.igrVehicles, {
                id: t
            }); - 1 !== i && (e.editIgrVehicleInfo = e.igrVehicles[i])
        }, e.editIgrVehicle = function() {
            if ("*" !== e.editIgrVehicleInfo.id && void 0 !== e.editIgrVehicleInfo.id && !_.isEmpty(e.editIgrVehicleInfo)) return e.progress(), r.request("PUT", "igrvehicles/" + e.editIgrVehicleInfo.id, {
                code: e.editIgrVehicleInfo.code,
                grade: e.editIgrVehicleInfo.grade,
                startAt: e.editIgrVehicleInfo.startAt,
                endAt: e.editIgrVehicleInfo.endAt
            }).then(function() {
                return e.done()
            })
        }, e.getIgrVehicles = function() {
            return e.progress(), r.request("GET", "igrvehicles").then(function(t) {
                e.done(), e.igrVehicles = _.map(t.vehicles, function(e) {
                    return n.__assign({}, e, {
                        startAt: t.startAt,
                        endAt: t.endAt
                    })
                })
            })
        }, e.clearIgrVehicles = function() {
            e.igrVehicles = [], e.addIgrVehicleInfo = {}, e.editIgrVehicleInfo = {}
        }, e.clearIgrVehicles(), e.getIgrVehicles(), e.updateFatigue = function(t) {
            void 0 === t && (t = 0);
            var n = i.config;
            e.progress(), r.request("POST", "tc/fatiguerate", {
                hours: t,
                qqid: n.qqid
            }).then(function() {
                e.done()
            }).catch(function() {
                e.error()
            })
        }, e.setUserBlock = function(e, i) {
            t.postBlock(e || 0, i || "")
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(10),
        r = i(3),
        o = i(5);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.quest", {
            url: "/quest",
            templateUrl: "templates/cheat/cheat-quest.html",
            controller: "CheatQuestController"
        })
    }]).controller("CheatQuestController", ["$scope", "$filter", "questService", function(e, t, i) {
        e.$parent.selected = "quest", e.questResetType = r.store.getState().quest.quest.questResetType, e.questEndDate = r.store.getState().quest.quest.questResetTime, e.qpResetType = r.store.getState().quest.quest.qpResetType, e.qpEndDate = r.store.getState().quest.quest.qpResetTime, e.questResetAfterSeconds = 5, e.qpResetAfterSeconds = 5;
        var a = [];
        ! function() {
            a = r.store.getState().quest.quest.questProgress.slice(), a.forEach(function(e) {
                e.text = t("template")({
                    current: "",
                    target: ""
                }, "QUEST_" + e.code + "_NAME")
            })
        }(), e.changeQuestItem = function() {
            var t = _.find(a, function(t) {
                return t.code === parseInt(e.selectedQuestCode, 10)
            });
            if (!t) return e.questProgressValue = "", void(e.questProgressCompleted = !1);
            e.questProgressValue = t.value, e.questProgressCompleted = t.completed
        }, e.getQuestItems = function() {
            return a
        }, e.updateQuestProgress = function(t, i) {
            e.progress();
            var o = r.store.getState().player.id,
                a = {
                    code: e.selectedQuestCode,
                    value: t,
                    completed: i
                };
            n.request("PUT", "quests/players/" + o + "/progress", a).then(function() {
                e.done()
            })
        }, e.updateQuestSeasonAfter = function(t, i) {
            e.updateQuestSeason(o().add(t, "s").toDate(), i)
        }, e.updateQuestSeason = function(t, r) {
            e.progress(), n.request("PUT", "quests/quest/season", {
                endDate: t,
                resetType: r
            }).then(function() {
                i.fetchPlayerQuestData(), e.done()
            })
        }, e.updateQPSeasonAfter = function(t, i) {
            e.updateQPSeason(o().add(t, "s").toDate(), i)
        }, e.updateQPSeason = function(t, r) {
            e.progress(), n.request("PUT", "quests/qp/season", {
                endDate: t,
                resetType: r
            }).then(function() {
                i.fetchPlayerQuestData(), e.done()
            })
        }, e.increaseQP = function(t) {
            e.progress();
            var i = r.store.getState().player.id;
            n.request("PUT", "quests/players/" + i + "/qp", {
                delta: t
            }).then(function() {
                e.done()
            })
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(5),
        a = i(15),
        s = i(3);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.menu.settings.openworld", {
            url: "/openworld",
            templateUrl: "templates/cheat/cheat-openworld.html",
            controller: "CheatCampaignController",
            resolve: {
                _openworld: ["openworldCampaignService", "openworldMissionService", function(e, t) {
                    return r.all([e.fetchCampaign(), t.init()])
                }]
            }
        })
    }]).controller("CheatCampaignController", ["$scope", "openworldCampaignService", "openworldMissionService", function(e, t, i) {
        function c() {
            e.campaign = s.store.getState().campaign, e.completed = e.campaign.status === a.Openworld.CampaignStatus.Completed;
            var i = t.getAchivementTasks(),
                n = s.store.getState().campaign.currentCampaignCode;
            e.tasks = _.differenceBy(t.getCampaign(n).tasks, i, "code")
        }
        e.$parent.selected = "openworld", c(), e.completeCampaign = function() {
            e.progress(), r.mapSeries(e.tasks, function(t) {
                return e.completeTask(t.code)
            }).then(function() {
                return t.completeCampaign().then(function() {
                    c(), e.done()
                })
            })
        }, e.resetTasks = function() {
            e.progress();
            var i = s.store.getState().campaign.currentCampaignCode,
                n = t.getCampaign(i).tasks,
                r = {};
            n.forEach(function(e) {
                r[e.code] = 0, t.updateTask({
                    code: e.code,
                    value: 0
                })
            }), t.updateCampaign(r).then(function() {
                c(), e.done()
            })
        }, e.completeTask = function(i) {
            e.progress();
            var n = _.find(t.getTasks(), {
                code: i
            });
            t.updateTask({
                code: i,
                value: n.goal
            });
            var r = s.store.getState().campaign.currentTaskProgress;
            return t.updateCampaign(r).then(function() {
                c(), e.done()
            })
        }, e.totalResetCampaigns = function() {
            e.confirmed("Are you sure to reset whole campaigns?").then(function() {
                return e.progress(), t.cheatResetWholeCampaigns()
            }).then(function() {
                return t.fetchCampaign()
            }).then(function() {
                return t.startCampaign()
            }).then(function() {
                c(), e.done()
            })
        }, e.unlockAllMissions = function() {
            e.progress(), i.cheatUnlockAllMissions().then(e.done)
        }, e.unlockAllPortals = function() {
            e.progress(), i.cheatUnlockAllPortals().then(e.done)
        };
        e.changeLimitedMission = function() {
            var t = Number(e.selectedLimitedMissionCode);
            e.selectedLimitedMission = _.find(e.limitedMissions, {
                code: t
            })
        };
        var d = function() {
            var t = s.store.getState().mission.limitedMission;
            e.limitedMissions = _.map(t.progress, function(e) {
                return n.__assign({}, e)
            }), e.limitedMissionResetDate = o(t.resetDate).format("YYYY-MM-DD HH:mm:ss"), e.changeLimitedMission(), e.done()
        };
        d(), e.updateLimitedMission = function() {
            var t = e.selectedLimitedMission;
            t && (e.progress(), i.cheatLimitedMission({
                code: t.code,
                currentCount: Number(t.currentCount),
                limitCount: t.limitCount
            }).then(function() {
                return d()
            }))
        }, e.resetLimitedMissions = function() {
            e.progress(), i.cheatResetLimitedMissions().then(function() {
                return d()
            })
        }, e.updateLimitedMissionResetDate = function() {
            e.progress();
            var t = o(e.limitedMissionResetDate, "YYYY-MM-DD HH:mm:ss");
            if (!t.isValid()) return d();
            var n = o().add(1, "minutes");
            t <= n && (t = n), i.cheatLimitedMissionResetDate(t.toString()).then(function() {
                return d()
            })
        }
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1356),
        o = i(1358);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/core-level-test?testmode", 1).container({
            stages: {
                "start-screen": {
                    stageBinder: r.StartScreenBinder,
                    customComponents: {
                        CSSProgress: o.CSSProgress
                    }
                }
            }
        });
        e.state("root.startScreen", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(374),
        a = i(4),
        s = i(1),
        c = i(111),
        d = i(8),
        l = i(37),
        u = i(12),
        p = i(2),
        h = i(381),
        f = i(377),
        v = i(6),
        m = i(382),
        g = i(384),
        y = i(1357),
        S = i(305),
        E = i(3);
    ! function(e) {
        e[e.LOGIN_ERR_CANNOT_CONNECT_SERVER = 1] = "LOGIN_ERR_CANNOT_CONNECT_SERVER", e[e.LOGIN_ERR_DUPLICATED_LOGIN = 2] = "LOGIN_ERR_DUPLICATED_LOGIN", e[e.LOGIN_ERR_BANNED = 3] = "LOGIN_ERR_BANNED", e[e.LOGIN_ERR_SESSION_TIMEOUT = 4] = "LOGIN_ERR_SESSION_TIMEOUT", e[e.LOGIN_ERR_PROTECTED_USER = 5] = "LOGIN_ERR_PROTECTED_USER", e[e.LOGIN_ERR_FAILED_AUTH = 6] = "LOGIN_ERR_FAILED_AUTH", e[e.LOGIN_ERR_NOT_ALLOWED = 7] = "LOGIN_ERR_NOT_ALLOWED"
    }(n || (n = {}));
    var T = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.$window = $(window), t.loadMeta = _.once(function() {
                return v.all([t.stateService.prebuildFaceForState("root.menu"), t.stateService.prebuildFaceForState("root.menu.Openworld")])
            }), t.login = _.once(function() {
                t.bootstrapService.getAccessToken().then(function(e) {
                    return t.bootstrapService.saveAccessToken(t.token = e)
                }).catch(function(e) {
                    var i = "Failed to handle AccessToken " + (e.code ? e.code : e.message),
                        n = "Fail to handle AccessToken";
                    throw t.isProtectedUser(e) ? (i = e.extra && e.extra.meta && e.extra.meta.message || t.$filter("translate")("ERROR_CONNECT_BLOCKEDUNDERAGE"), n = e.reason || "ProtectedUser") : e.code === g.toCode(g.ErrorCode.SSOAuthRejectedByForcedShutdown) ? i = n = t.publisherService.getDisconnectReason("shutdown-3") : t.isSessionExpired(e) ? i = n = t.$filter("translate")("LOGIN_ERROR_SESSEIONEXPIRED") : t.isDeactivationAccount(e) ? i = n = t.$filter("translate")("LOGIN_ERROR_AUTHFAILED") : t.isBannedAccount(e) && (i = n = e.reason), t.popupService.drawConfirm("ALARM_SERVERLOST_TITLE", i, function() {
                        t.externalService.beShutdown(2, n)
                    }), new Error(i)
                }).then(function() {
                    return t.access()
                })
            }), t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.bindTexts(), this.doMisc(), this.configLoader.getConfig().then(function(t) {
                return e.config = t
            }), this.bgmService.init(), this.translate(".id-waitiingDescription .id-textField", "LOGINQUE_SYSTEM_PLEASEWAIT"), this.translate(".id-waitingNum .id-titleLabel", "LOGINQUE_SYSTEM_WAITINGNUM"), this.getFace(".id-exit").on(p.MouseEventEx.CLICK, function() {
                e.popupService.draw("ConfirmCancelPopup", {
                    title: "COMMON_POPUP_EXIT_TITLE",
                    description: "",
                    confirmString: "COMMON_POPUP_EXIT_BUTTON_CONFIRM",
                    confirm: function() {
                        return e.externalService.beShutdown(1)
                    }
                })
            })
        }, t.prototype.onAddedToScene = function() {
            this.init(), this.playFxSound()
        }, t.prototype.bindTexts = function() {
            this.translate(".id-logoContainer .id-copylight .id-textField", "STARTSCREEN_ALLRIGHTRESERVED"), this.translate(".PressAnyKey_MC .comp-TextField", "STARTSCREEN_PRESSANYKEY"), this.translate(".id-grbText .id-textField", "LOGOSCREEN_PLAYALL"), this.translate(".id-legal", "GAME_TITLESCREEN_LEGAL_DESC")
        }, t.prototype.doMisc = function() {
            var e = this;
            this.mapFaces(".FadeIn", ".FadeIn > svg").forEach(function(e) {
                return e.mouseEnabled = !1
            }), this.getFace(".Login").on(p.MouseEventEx.CLICK, function() {
                return e.tryTestLogin()
            }), this.stage.on(d.EventEx.STOP, function() {
                return e.onSceneStop()
            }), this.showTestLoginInputs(!1), o.default($(this.loginInput.htmlElement), function() {
                return e.tryTestLogin()
            }), this.loadingProgress.ratio = 0
        }, t.prototype.tryTestLogin = function() {
            var e = this.loginInput.text.trim();
            e && (this.bootstrapService.testAccount = e, this.login())
        }, t.prototype.isBannedAccount = function(e) {
            return e.code === f.toCode(f.ErrorCode.BannedAccount)
        }, t.prototype.isDuplicatedLogin = function(e) {
            return e.code === h.toCode(h.ErrorCode.DuplicatedLogin)
        }, t.prototype.isConnectionError = function(e) {
            return "connectionError" === e.name
        }, t.prototype.isExceedSessionLimit = function(e) {
            return e.code === h.toCode(h.ErrorCode.SessionLimitExceed)
        }, t.prototype.isProtectedUser = function(e) {
            return e.code === m.toCode(m.ErrorCode.ProtectedUser)
        }, t.prototype.isSessionExpired = function(e) {
            return e.code === m.toCode(m.ErrorCode.FailedAuthentication)
        }, t.prototype.isDeactivationAccount = function(e) {
            return e.code === m.toCode(m.ErrorCode.ErrorMessageNotAllowed)
        }, t.prototype.loginFailed = function(e) {
            var t = this;
            this.handleLoginResult(!1, e);
            var i = "ALARM_SERVERLOST_TITLE";
            if (this.isDuplicatedLogin(e)) return void this.popupService.drawConfirm(i, "DUPLICATION_ERROR_ALARM", function() {
                return t.access()
            });
            var n, r;
            n = r = this.isConnectionError(e) ? "Connection error - the server could not be reached." : this.isExceedSessionLimit(e) ? this.$filter("translate")("ERROR_MAXUSERLIMITE_CANNOTCONNECT") : e && e.message || "Unknown error", this.popupService.drawConfirm(i, n, function() {
                t.externalService.beShutdown(2, r)
            }), this.audioService.get(l.FxAudioCode.Warning).play()
        }, t.prototype.bindImages = function() {
            var e = this;
            this.bootstrapService.getNoticeBanners().then(function(t) {
                _.range(1, 4).forEach(function(i) {
                    e.addChildBinder(".id-notice" + i, y.NoticeImageBinder, t[i])
                })
            })
        }, t.prototype.onSceneStop = function() {
            var e = this.stage.currentLabel;
            "emblems" === e ? "ko" === this.config.locale ? this.stage.play() : this.playIntro() : "grb" === e ? this.playIntro() : "intro" === e && this.playPressAnyKey()
        }, t.prototype.playIntro = function() {
            this.$window.off("click keydown", this.devSkipHandler), this.stage.gotoAndPlay("intro"), this.uistateNotifyService.setSubState(13);
            var e = "cn" === this.config.locale && "china" || "korea";
            this.gotoAndPlay(".id-logoContainer", e)
        }, t.prototype.playPressAnyKey = function() {
            this.stage.gotoAndPlay("pressAnyKey"), this.bgmService.playMeta(!0), this.audioService.get(l.FxAudioCode.InputSmall).play(), this.$window.on("mousedown keydown", this.pressAnyKeyHandler)
        }, t.prototype.setProgress = function(e) {
            this.loadingProgress.killCustomTweens(), this.loadingProgress.addCustomToTween(1, {
                flash: {
                    ratio: e
                },
                ease: Power3.easeOut
            })
        }, t.prototype.playLoading = function() {
            var e = this;
            this.stage.gotoAndPlay("loading");
            var t, i = this.loadMeta();
            this.setProgress(.3), _.isEmpty(this.storeState.player) ? t = v.all([i, this.externalService.levelLoaded]) : (t = v.all([i, this.openworldService.connect()]), this.addManagedListener(this.externalService, c.CoreEvent.bePushLoadingProgress, function(t) {
                var i = .7 * t / 100 + .3;
                e.setProgress(i)
            })), t.then(function() {
                if (e.loadingProgress.ratio < 1) return e.setProgress(1) || v.delay(1e3)
            }).then(function() {
                return e.showNotice()
            })
        }, t.prototype.clearHandlers = function() {
            this.devSkipHandler && this.$window.off("click keydown", this.devSkipHandler), this.pressAnyKeyHandler && this.$window.off("mousedown keydown", this.pressAnyKeyHandler), this.$window.off("keydown.intro-video")
        }, t.prototype.init = function() {
            var e = this;
            this.uistateNotifyService.setSubState(12), this.devSkipHandler = function() {
                e.$window.off("click keydown", e.devSkipHandler), e.stage.gotoAndPlay("intro"), e.uistateNotifyService.setSubState(13)
            }, this.externalService.isEdgeBrowser() || this.$window.one("click keydown", this.devSkipHandler), this.bootstrapService.checkTestAccount().then(function(t) {
                t && (e.loginInput.text = t, e.externalService.isEdgeBrowser() || e.login())
            });
            var t = Date.now();
            this.externalService.levelLoaded.then(function() {
                e.$rootScope.$emit("levelBootedUp", t, Date.now())
            }), this.pressAnyKeyHandler = function() {
                e.clearHandlers(), e.loginHandler(), e.audioService.get(l.FxAudioCode.InputQuery).play()
            }
        }, t.prototype.access = function() {
            var e = this;
            return this.loadingStartedAt = (new Date).getTime(), this.checkWaitingQueue().then(function() {
                return e.bootstrapService.init()
            }).then(function() {
                return e.loadAssets()
            }).then(function() {
                return e.playLoading()
            }).catch(function(t) {
                return e.loginFailed(t)
            })
        }, t.prototype.checkWaitingQueue = function() {
            var e = this;
            return new v(function(t, i) {
                var n = function() {
                    e.bootstrapService.checkWaiting(e.token).then(function(i) {
                        if (!i || i <= 0) return t();
                        e.setWaitingInfo(i);
                        var r = i <= 1e3 ? 1 : i >= 6e4 ? 60 : Math.round(i / 1e3);
                        return setTimeout(function() {
                            return n()
                        }, 1e3 * Math.round(r))
                    }).catch(i)
                };
                n()
            })
        }, t.prototype.setWaitingInfo = function(e) {
            e >= 1e3 || this.prevRemain >= 1e3 ? a.default.applyCounter($(this.getFace(".id-waitingNum .id-numLabel").htmlElement), this.prevRemain || 0, e) : this.bindText(".id-waitingNum .id-numLabel", e), this.prevRemain = e, this.enableButton(".Login", !1), this.gotoAndPlay(this.face, "loginQueuing", !0)
        }, t.prototype.loginHandler = function() {
            this.enableButton(".Login", !0), this.stage.gotoAndPlay("login"), this.config.qqid || this.config.token ? this.login() : this.showTestLoginInputs(!0)
        }, t.prototype.showTestLoginInputs = function(e) {
            var t = this;
            this.getFace(".TextInput").visible = e, this.getFace(".Login").visible = e, this.getFace(".PressAnyKey_MC").visible = !e, e && setTimeout(function() {
                return t.loginInput.htmlElement.focus()
            }, 50)
        }, t.prototype.showNotice = function() {
            var e = this;
            this.translate(".id-noticeTitle .id-textField", "NOTIC_POPUP_TITLE"), this.translate(".id-noticeConfirm", "COMMON_POPUP_EXIT_BUTTON_CONFIRM"), this.bindImages(), this.audioService.get(l.FxAudioCode.ScreenMedium_In).play(), this.getFace(".id-noticeConfirm").once(p.MouseEventEx.CLICK, function() {
                return e.goNextScreen()
            }), this.stage.gotoAndPlay("notice"), this.handleLoginResult(!0)
        }, t.prototype.selectPlayerAndRestoreRecentVehicleIfNeeded = function() {
            var e = this,
                t = this.storeState.player;
            if (!_.isEmpty(t)) return log.debug("@id: " + t.id + ", @pid: " + t.id + ", @playerName: " + t.name), this.externalService.beSelectPlayer(t.id, t.name), this.playerService.selectPlayer(t.id).then(function() {
                if (!u.getRecentVehicle()) {
                    var t = u.getOwnVehicles()[0];
                    return e.playerService.changeRecentVehicle(t.id)
                }
            })
        }, t.prototype.loadAssets = function() {
            var e = this;
            return this.numberPlateService.initDefaultPlate(), this.playerService.fetch().then(function() {
                return e.vehicleService.fetch()
            }).then(function() {
                return e.selectPlayerAndRestoreRecentVehicleIfNeeded()
            }).catch(function(t) {
                var i = t.message || t.name;
                e.popupService.drawConfirm("ALARM_SERVERLOST_TITLE", "Failed to load assets (" + i + ")", function() {
                    e.handleLoginResult(!1), e.externalService.beShutdown(2, "Fail to fetch player from the server")
                })
            })
        }, t.prototype.goNextScreen = function() {
            this.clearHandlers(), this.convertFace(".id-noticeConfirm").enabled = !1, this.audioService.get(l.FxAudioCode.ScreenMedium_Out).play();
            var e = this.storeState.player;
            _.isEmpty(e) ? this.createPlayer() : this.stateService.go("root.menu.Openworld")
        }, t.prototype.createPlayer = function() {
            var e = this,
                t = this.stateService.prebuildFaceForState("root.Players");
            if ("nexon" !== this.publisherService.publisher) {
                var i = new S.Video("video/intro");
                i.addClass("fullscreen"), S.videoPlayer.setBackground(), t = v.all([t, S.videoPlayer.play(i).catch(_.noop)]), setTimeout(function() {
                    e.$window.on("keydown.intro-video", function(t) {
                        27 === t.keyCode && (S.videoPlayer.reset(), e.$window.off("keydown.intro-video"))
                    })
                }, 1e3)
            }
            t.then(function() {
                return e.stateService.go("root.Players")
            }).then(function() {
                return S.videoPlayer.clearBackground()
            })
        }, t.prototype.playFxSound = function() {
            var e = this,
                t = "";
            this.fxIntervalId = setInterval(function() {
                if (e.stage.currentLabel !== t) {
                    var i = void 0;
                    switch (t = e.stage.currentLabel) {
                        case "frostbite":
                            i = l.FxAudioCode.Intro_1_Frostbite;
                            break;
                        case "emblems":
                            i = l.FxAudioCode.Intro_2_Brands;
                            break;
                        case "grb":
                            i = l.FxAudioCode.Intro_3_Rating;
                            break;
                        case "intro":
                            i = l.FxAudioCode.Intro_NfsLogo;
                            break;
                        case "pressAnyKey":
                        case "login":
                            clearInterval(e.fxIntervalId), e.fxIntervalId = void 0
                    }
                    i && e.audioService.get(i).play()
                }
            }, 16)
        }, t.prototype.onDetach = function() {
            this.fxIntervalId && (clearInterval(this.fxIntervalId), log.warn("Make sure frame labels(for fx sound) have been changed."))
        }, t.prototype.handleLoginResult = function(e, t) {
            var i = this,
                r = (new Date).getTime(),
                o = Math.floor((r - this.loadingStartedAt) / 1e3),
                a = E.store.getState().configuration.configs.graphic.applied,
                s = a.graphic || 5,
                c = 0,
                d = 0;
            e || (d = 1, c = n.LOGIN_ERR_NOT_ALLOWED, void 0 === t ? c = n.LOGIN_ERR_CANNOT_CONNECT_SERVER : this.isDuplicatedLogin(t) ? c = n.LOGIN_ERR_DUPLICATED_LOGIN : this.isProtectedUser(t) ? c = n.LOGIN_ERR_PROTECTED_USER : this.isSessionExpired(t) ? c = n.LOGIN_ERR_SESSION_TIMEOUT : this.isDeactivationAccount(t) ? c = n.LOGIN_ERR_FAILED_AUTH : this.isBannedAccount(t) && (c = n.LOGIN_ERR_BANNED)), this.bootstrapService.getSandSDKApiServerIp().then(function(e) {
                var t = e.apiServer || "127.0.0.1";
                i.externalService.beInitSandSDK(s, t, d, c, o)
            }).catch(function(e) {
                i.externalService.beInitSandSDK(s, "127.0.0.1", d, c, o)
            })
        }, t
    }(s.StageBinder);
    r.__decorate([s.autowired("$rootScope")], T.prototype, "$rootScope", void 0), r.__decorate([s.autowired("$filter")], T.prototype, "$filter", void 0), r.__decorate([s.autowired("stateService")], T.prototype, "stateService", void 0), r.__decorate([s.autowired("externalService")], T.prototype, "externalService", void 0), r.__decorate([s.autowired("bootstrapService")], T.prototype, "bootstrapService", void 0), r.__decorate([s.autowired("popupService")], T.prototype, "popupService", void 0), r.__decorate([s.autowired("configLoader")], T.prototype, "configLoader", void 0), r.__decorate([s.autowired("audioService")], T.prototype, "audioService", void 0), r.__decorate([s.autowired("playerService")], T.prototype, "playerService", void 0), r.__decorate([s.autowired("vehicleService")], T.prototype, "vehicleService", void 0), r.__decorate([s.autowired("bgmService")], T.prototype, "bgmService", void 0), r.__decorate([s.autowired("numberPlateService")], T.prototype, "numberPlateService", void 0), r.__decorate([s.autowired("publisherService")], T.prototype, "publisherService", void 0), r.__decorate([s.autowired("uistateNotifyService")], T.prototype, "uistateNotifyService", void 0), r.__decorate([s.autowired("openworldService")], T.prototype, "openworldService", void 0), r.__decorate([s.select(".TextInput > .id-textField")], T.prototype, "loginInput", void 0), r.__decorate([s.select(".id-loadingItem")], T.prototype, "loadingProgress", void 0), t.StartScreenBinder = T
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(28),
        a = i(2),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this,
                    i = e.idx,
                    n = e.imgSrc,
                    r = e.link,
                    s = this.$filter("cdn"),
                    c = this.convertFace(this.face);
                if (o.externalImage(c.$(".externalImage"), s(n || "notice/" + i + ".png")), r) {
                    var d = function(e) {
                        var i = t.props.link;
                        if (i) switch (e.type) {
                            case a.MouseEventEx.MOUSE_OVER:
                                t.gotoAndPlay(c, "over");
                                break;
                            case a.MouseEventEx.MOUSE_OUT:
                                t.gotoAndPlay(c, "out");
                                break;
                            case a.MouseEventEx.CLICK:
                                t.externalService.beOpenBrowserWithURL(i)
                        }
                    };
                    this.chain(c).apply(o.on, {
                        event: a.MouseEventEx.MOUSE_OVER,
                        callback: d
                    }).apply(o.on, {
                        event: a.MouseEventEx.MOUSE_OUT,
                        callback: d
                    }).apply(o.on, {
                        event: a.MouseEventEx.CLICK,
                        callback: d
                    })
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], s.prototype, "externalService", void 0), t.NoticeImageBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(49),
        o = i(19),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t._ratio = .5, t._filledColor = "#e6e6e6", t._trackColor = "rgba(230, 230, 230, 0.2)", t
            }
            return n.__extends(t, e), t.prototype.initializeProperties = function(t) {
                e.prototype.initializeProperties.call(this, t), this.hasSize = !0
            }, Object.defineProperty(t.prototype, "ratio", {
                get: function() {
                    return this._ratio
                },
                set: function(e) {
                    e = Math.max(0, e), e = Math.min(1, e), this._ratio !== e && (this._ratio = e, this.invalidateData())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "filledColor", {
                get: function() {
                    return this._filledColor
                },
                set: function(e) {
                    this._filledColor !== e && (this._filledColor = e, this.invalidateState())
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "trackColor", {
                get: function() {
                    return this._trackColor
                },
                set: function(e) {
                    this._trackColor !== e && (this._trackColor = e, this.invalidateState())
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.postCreate = function() {
                e.prototype.postCreate.call(this);
                var t = this.$(".comp-Shape");
                t && (this.width = t.width, this.height = t.height), this.removeAllChildren(), this.htmlElement.classList.add("track"), this.filled = $('<div class="filled" style="width: 100%; height: 100%; -webkit-transform-origin: 0 0;">').get(0), this.htmlElement.appendChild(this.filled)
            }, t.prototype.drawState = function() {
                e.prototype.drawState.call(this), this.htmlElement.style.setProperty("background-color", this.trackColor), this.filled.style.setProperty("background-color", this.filledColor)
            }, t.prototype.drawData = function() {
                e.prototype.drawData.call(this), this.filled.style.setProperty("-webkit-transform", "scaleX(" + this._ratio + ")")
            }, t
        }(r.MovieClip);
    a = n.__decorate([o.component("CSSProgress")], a), t.CSSProgress = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1360),
        o = i(629),
        a = i(1364);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/inventory", 26).container({
            stages: {
                inventory: r.InventoryBinder
            },
            resolve: {
                inventory: ["inventoryService", function(e) {
                    return e.fetch()
                }],
                license: ["licenseService", function(e) {
                    return e.fetch()
                }]
            }
        });
        e.state("root.menu.Inventory", t);
        var i = new n.StateDefinition("/number-plate-lottery", 26, {
            source: "",
            itemId: -1
        }).dialog({
            stages: {
                "randombox-opening-number-plate": o.NumberPlateLotteryBinder
            }
        });
        e.state("root.menu.Inventory.NumberPlateLottery", i);
        var s = new n.StateDefinition("/player-name-update", void 0, {
            source: "",
            itemId: -1
        }).dialog({
            stages: {
                "player-name-update": a.PlayerNameUpdateBinder
            }
        });
        e.state("root.menu.Inventory.ChangePlayerName", s)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1361),
        a = i(1363),
        s = i(314),
        c = i(3),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.preventMouseEvent(!0), this.on(this.face, "stop", function() {
                    return e.preventMouseEvent(!1)
                }), this.inventoryItemListBinder = this.addChildBinder(this.face, o.InventoryListBinder), this.inventoryFilterBinder = this.addChildBinder(this.face, a.InventoryFilterBinder), this.addChildBinder(this.face, s.LevelupBinder)
            }, t.prototype.onAddedToScene = function() {
                this.numberPlateLottery()
            }, t.prototype.mapStateToProps = function(e) {
                return e.inventory
            }, t.prototype.update = function(e) {
                var t = e;
                this.inventoryItemListBinder.setProps(t), this.inventoryFilterBinder.setProps(t.filter)
            }, t.prototype.onDetach = function() {
                this.playerService.markInventoryAsChecked()
            }, t.prototype.preventMouseEvent = function(e) {
                this.classNames(this.face, e ? "prevent-click" : "")
            }, t.prototype.numberPlateLottery = function() {
                var e = this,
                    t = c.store.getState().numberPlate,
                    i = t.lotteryResults,
                    n = t.lotteryCode;
                i && i.length > 0 && this.popupService.draw("ConfirmPopup", {
                    title: "RANDOMNUMBERPLATE_RESTART_POPUP_TITLE",
                    description: "RANDOMNUMBERPLATE_RESTART_POPUP_TEXT",
                    confirmString: "RANDOMNUMBERPLATE_RESTART_POPUP_CONFIRM",
                    confirm: function() {
                        e.stateService.go("root.menu.Inventory.NumberPlateLottery", {
                            source: "root.menu.Inventory",
                            itemId: n
                        })
                    }
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("playerService")], d.prototype, "playerService", void 0), n.__decorate([r.autowired("stateService")], d.prototype, "stateService", void 0), n.__decorate([r.autowired("popupService")], d.prototype, "popupService", void 0), t.InventoryBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1362),
        a = i(2),
        s = i(166),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                _.times(12, function(e) {
                    var i = t.getFace(".id-current .id-itemCard" + (e + 1)),
                        n = t.getFace(".id-next .id-itemCard" + (e + 1));
                    t.currListBinder.push(t.addChildBinder(i, o.InventoryListItemBinder)), t.nextListBinder.push(t.addChildBinder(n, o.InventoryListItemBinder, {
                        disableMouseEvent: !0
                    }))
                }), this.pagingContainer = this.getFace(".id-itemTileList"), this.pagingContainer.hasSize = !0, e.prototype.onFaceReady.call(this), this.addManagedListener(this.pagingContainer, "reset", function(e) {
                    t.gotoAndPlay(t.pagingContainer, "default"), t.isPaging = !1, t.preventMouseEvent(!1), setTimeout(function() {
                        t.currListBinder.some(function(e, t) {
                            return "over" === e.face.currentLabel && !e.face.emit(a.MouseEventEx.MOUSE_OVER)
                        })
                    })
                }), this.bindList = function(e, i) {
                    var n = t.chunkedItems[i] || [];
                    e.forEach(function(e, i) {
                        t.bindItemInfo(e, n[i], i)
                    })
                }, this.movePageCallback1 = function() {
                    t.preventMouseEvent(!0), t.tooltipService.hide()
                }
            }, t.prototype.update = function(e) {
                var t = e.filter,
                    i = e.sorter;
                this.items = this.filterSortItems(e.items, t, i), this.initItemList(), this.resetScrollBar()
            }, t.prototype.filterSortItems = function(e, t, i) {
                var n = e.filter(function(e) {
                    if (!(e.count < 1)) return "ALL" === t.type || e.subtype === t.type
                });
                return n.sort(function(e, t) {
                    return e[i.field] > t[i.field] ? 1 * i.reverse : -1 * i.reverse
                }), n
            }, t.prototype.initItemList = function() {
                this.chunkedItems = _.chunk(this.items, 12), this.pageSize = Math.max(1, this.chunkedItems.length), this.isPaging = !1, this.pageSize <= this.pageIndex && (this.pageIndex = this.pageSize - 1), this.bindList(this.currListBinder, this.pageIndex)
            }, t.prototype.bindItemInfo = function(e, t, i) {
                var r = e.face;
                t ? (r.enabled = r.visible = !0, e.setProps(n.__assign({}, t, {
                    index: i
                }))) : (r.enabled = r.visible = !1, e.setProps({}))
            }, t
        }(s.ScrollBarPageBinder);
    n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.InventoryListBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(1),
        a = i(27),
        s = i(13),
        c = i(186),
        d = i(264),
        l = i(3),
        u = i(44),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                if (this.face.hasSize = !0, this.cardBinder = this.addChildBinder(this.face, a.ItemCardBinder), !e.disableMouseEvent) {
                    var i = this.getFace(".id-itemReceive");
                    this.addManagedListener(this.face, r.MouseEventEx.MOUSE_OVER, function(e) {
                        var i = t.props,
                            n = t.getSide(i.index),
                            r = e && e.currentTarget ? e : t.face;
                        t.tooltipService.show(r, n, s.TooltipType.ItemCard, i, {
                            marginTop: 26,
                            marginLeft: "left" === n ? -3 : -14,
                            screen: s.TooltipScreen.Inventory
                        })
                    }), this.addManagedListener(this.face, r.MouseEventEx.MOUSE_OUT, function() {
                        t.face.mouseEventEnabled ? t.tooltipService.hide() : (t.face.mouseEventEnabled = !0, t.face.emit(r.MouseEventEx.MOUSE_OUT))
                    }), this.addManagedListener(this.face, r.MouseEventEx.MOUSE_DOWN, function() {
                        t.face.mouseEventEnabled = !1
                    }), this.addManagedListener(this.face, r.MouseEventEx.MOUSE_UP, function() {
                        t.face.mouseEventEnabled = !0
                    }), this.addManagedListener(i, r.MouseEventEx.CLICK, function() {
                        t.tooltipService.hide();
                        var e = t.props;
                        t.inventoryService.isExpired(e.enddate) ? t.removeItem(e) : t.useItem(e)
                    })
                }
            }, t.prototype.update = function(e) {
                var t = e,
                    i = _.isEmpty(t) ? t : this.getItemCardProp(t);
                this.cardBinder.setProps(i)
            }, t.prototype.getItemCardProp = function(e) {
                var t, i;
                return c.InventoryService.isExpirableItem(e.enddate) ? (t = this.inventoryService.getRemainingTime(e.enddate), i = this.inventoryService.isExpired(e.enddate) ? "INVENTORY_ITEM_REMOVE" : "INVETORY_MOUSEOVER_USE") : i = "INVETORY_MOUSEOVER_USE", {
                    id: e.id,
                    info: {
                        code: e.code,
                        type: "ITEM",
                        count: e.count,
                        isNew: this.isNewItem(e),
                        remainText: t,
                        buttonText: i
                    },
                    actionButtonEnabled: !0
                }
            }, t.prototype.useItem = function(e) {
                switch (this.tooltipService.hide(), e.subtype) {
                    case "RANDOM":
                        return void this.useRandomItem(e);
                    case "BUNDLE":
                        return void this.useBundleItem(e);
                    case "NUMBER_PLATE":
                        return void(this.featureSetService.isEnabled("NUMBERPLATE") && this.useNumberPlateLottery(e));
                    case "PLAYER_NAME":
                        return void this.useChangePlayerNameItem(e);
                    default:
                        return void this.useBundleItem(e)
                }
            }, t.prototype.useRandomItem = function(e) {
                this.stateService.go("root.menu.Inventory.Randombox", {
                    itemId: e.id
                })
            }, t.prototype.useBundleItem = function(e) {
                var t = this,
                    i = _.clone(e),
                    n = function(e, i) {
                        t.popupService.draw("UseItemConfirmPopup", {
                            item: e,
                            confirm: function() {
                                return t.partsService.checkPartsNotification(i)
                            }
                        })
                    };
                this.popupService.draw("UsePackagePopup", {
                    item: e,
                    useOne: function() {
                        return e.platform && e.platform === d.InventoryItemPlatform.MOBILE ? (t.popupService.closePopup(), t.mobileItemWarning()) : t.inventoryService.isExpired(e.enddate) ? t.removeItem(e) : (i.count = 1, void t.inventoryService.useItem(e.id, 1).then(function(e) {
                            t.popupService.closePopup(), n(i, e.rewardItems)
                        }).catch(function(e) {
                            t.popupService.closePopup().then(function() {
                                return u.showInventoryUseErrorPopup(e, t)
                            })
                        }))
                    },
                    useAll: function() {
                        return e.platform && e.platform === d.InventoryItemPlatform.MOBILE ? (t.popupService.closePopup(), t.mobileItemWarning()) : t.inventoryService.isExpired(e.enddate) ? t.removeItem(e) : void t.inventoryService.useAllItem(e.id).then(function(e) {
                            t.popupService.closePopup(), n(i, e.rewardItems)
                        }).catch(function(e) {
                            t.popupService.closePopup().then(function() {
                                return u.showInventoryUseErrorPopup(e, t)
                            })
                        })
                    }
                })
            }, t.prototype.useChangePlayerNameItem = function(e) {
                var t = this,
                    i = e.code;
                this.popupService.draw("ItemIconConfirmPopup", {
                    title: "USE_PLAYER_NAME_ITEM_TITLE",
                    desc: {
                        top: this.$filter("translate")("USE_PLAYER_NAME_ITEM_DESC1"),
                        bottom: this.$filter("translate")("USE_PLAYER_NAME_ITEM_DESC2")
                    },
                    itemCardProps: {
                        info: {
                            code: i,
                            img: this.$filter("itemCardImg")("ITEM", i),
                            type: "ITEM",
                            count: 1
                        },
                        mouseDisabled: !0
                    },
                    buttons: [{
                        type: "confirm",
                        name: "USE_PLAYER_NAME_ITEM_CONFIRM",
                        onClick: function() {
                            return t.stateService.go("root.menu.Inventory.ChangePlayerName", {
                                source: "root.menu.Inventory",
                                itemId: i
                            })
                        }
                    }, {
                        type: "cancel",
                        name: "USE_PLAYER_NAME_ITEM_CANCEL",
                        onClick: function() {
                            return t.popupService.closePopup()
                        }
                    }]
                })
            }, t.prototype.useNumberPlateLottery = function(e) {
                this.stateService.go("root.menu.Inventory.NumberPlateLottery", {
                    source: "root.menu.Inventory",
                    itemId: e.code
                })
            }, t.prototype.removeItem = function(e) {
                var t = this;
                this.popupService.draw("ConfirmPopup", {
                    title: "ITEM_USE_POPUP_ENDDATE_TITLE",
                    description: this.$filter("translate")("ITEM_USE_POPUP_ENDDATE_TEXT1") + "<br/>" + this.inventoryService.decorateHighlight(this.$filter("translate")("ITEM_USE_POPUP_ENDDATE_TEXT2")),
                    confirm: function() {
                        t.inventoryService.removeExpiredItem(e.id)
                    }
                })
            }, t.prototype.getSide = function(e) {
                var t = (e + 1) % 6;
                return t < 4 && t > 0 ? "right" : "left"
            }, t.prototype.isNewItem = function(e) {
                if (e) {
                    var t = l.store.getState().player.checkedat.inventory.toString();
                    return +new Date(e.addedat) > +new Date(t)
                }
            }, t.prototype.mobileItemWarning = function() {
                this.popupService.draw("ConfirmPopup", {
                    title: "",
                    description: "GEM_ALARM_ONLYMOBILE",
                    confirm: function() {}
                })
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([o.autowired("tooltipService")], p.prototype, "tooltipService", void 0), n.__decorate([o.autowired("popupService")], p.prototype, "popupService", void 0), n.__decorate([o.autowired("stateService")], p.prototype, "stateService", void 0), n.__decorate([o.autowired("featureSetService")], p.prototype, "featureSetService", void 0), n.__decorate([o.autowired("vehicleService")], p.prototype, "vehicleService", void 0), n.__decorate([o.autowired("partsService")], p.prototype, "partsService", void 0), n.__decorate([o.autowired("inventoryService")], p.prototype, "inventoryService", void 0), t.InventoryListItemBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(264),
        a = i(1),
        s = i(8),
        c = i(299),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.initDropdown(".id-filterDropdown", o.Filters, c.setViewFilter), this.initDropdown(".id-sortDropdown", o.Sorters, c.setViewSorter)
            }, t.prototype.onDetach = function() {
                c.setViewFilter(o.Filters[0]), c.setViewSorter(o.Sorters[0])
            }, t.prototype.initDropdown = function(e, t, i) {
                var n = this.$filter("translate"),
                    r = this.convertFace(e);
                r.items = t.map(function(e) {
                    var t = _.assign({}, e);
                    return t.text = n(t.text), t
                }), r.on(s.EventEx.CHANGE, function() {
                    i(r.selectedItem)
                })
            }, t
        }(a.Binder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), t.InventoryFilterBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1365),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.addChildBinder(".PlayerNameInput", o.PlayerNameUpdateInputBinder, {
                    closeModal: function() {
                        e.gotoAndPlay(".id-bg", "out"), e.stateService.go("^")
                    }
                }), this.visible(".id-secondPasswordButton", !1), this.visible(".id-exitButton", !1)
            }, t.prototype.onAddedToScene = function() {
                this.visible(this.face, !0), this.gotoAndPlay(".id-bg", "in")
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("stateService")], a.prototype, "stateService", void 0), t.PlayerNameUpdateBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(15),
        s = i(299),
        c = i(58),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                this.nameInputField = this.convertFace(".id-playerNameInput .id-textField"), this.nameInputField.htmlElement.onfocus = function() {
                    return t.focusIn()
                }, this.nameInputField.htmlElement.onblur = function() {
                    return t.focusOut()
                }, this.nameInputField.htmlElement.oninput = function() {
                    return t.onInput()
                }, this.guide = this.getFace(".textGuide"), this.translate(".textGuide .comp-TextField", "PLAYER_CREATION_INPUTINFO"), this.confirmButton = this.convertFace(".id-nameInputConfirm"), this.translate(this.confirmButton, "PLAYER_CREATION_BUTTON_CONFIRM"), this.confirmButton.on(o.MouseEventEx.CLICK, function() {
                    return t.confirm()
                }), this.closeButton = this.convertFace(".id-vehicleSelectionPrev"), this.translate(this.closeButton, "PLAYER_CREATION_BUTTON_BACK"), this.closeButton.on(o.MouseEventEx.CLICK, function() {
                    return t.closeModal()
                }), this.configLoader.getConfig().then(function(e) {
                    return t.locale = e.locale
                }), this.playerName = "", this.updating = !1, this.duplicateName = !1, this.illegalName = !1, this.guide.visible = !0, this.confirmButton.enabled = !1, this.setGuideText(), this.onKeyDown = function(e) {
                    var i = t.removeBannedChar(t.playerName);
                    if (t.updating || 32 === e.keyCode || i.length < 2 && 13 === e.keyCode || i.length > 10 && 13 === e.keyCode) return void e.originalEvent.preventDefault();
                    t.playerName && 13 === e.keyCode && i.length >= 2 && i.length <= 10 && (e.originalEvent.preventDefault(), t.confirm())
                }, $(window).on("keydown", this.onKeyDown), $(window).on("keypress", this.onKeyDown)
            }, t.prototype.onAddedToScene = function() {
                this.face.visible = !0, this.gotoAndPlay(this.face, "in")
            }, t.prototype.onDetach = function() {
                $(window).off("keydown", this.onKeyDown), $(window).off("keypress", this.onKeyDown)
            }, t.prototype.focusIn = function() {
                this.guide.visible = !1
            }, t.prototype.focusOut = function() {
                this.playerName.length <= 0 || "<br>" === this.playerName ? this.guide.visible = !0 : this.guide.visible = !1
            }, t.prototype.onInput = function() {
                this.playerName = this.nameInputField.text, this.clearErrors(), this.confirmButton.enabled = this.enabledConfirmButton() && !this.updating
            }, t.prototype.isConsonantName = function(e) {
                return null !== e.match(/[ㄱ-ㅣ]/gi)
            }, t.prototype.removeBannedChar = function(e) {
                var t = e;
                return t = "cn" === this.locale ? t.replace(/[^0-9a-zA-Z\u4e00-\u9fff]/gi, "") : "ko" === this.locale ? t.replace(/[^0-9a-zA-Z가-힣ㄱ-ㅣ]/gi, "") : t.replace(/[^0-9a-zA-Z]/gi, "")
            }, t.prototype.enabledConfirmButton = function() {
                var e = this.removeBannedChar(this.playerName);
                return !!this.banwordService.isBetweenLength(e, 2, 10)
            }, t.prototype.clearErrors = function() {
                this.duplicateName = !1, this.illegalName = !1, this.setGuideText()
            }, t.prototype.getGuideText = function() {
                return this.duplicateName ? "PLAYER_CREATION_USEDNAMEINFO" : this.illegalName ? "PLAYERNAME_NOTALLOWED" : "PLAYER_CREATION_NAMEINFO"
            }, t.prototype.setGuideText = function() {
                this.translate(".id-guideText .id-textField", this.getGuideText()), this.duplicateName || this.illegalName ? ($(".id-guideText").addClass("alert-color"), $(".id-guideText .id-textField").addClass("alert-color")) : ($(".id-guideText").removeClass("alert-color"), $(".id-guideText .id-textField").removeClass("alert-color"))
            }, t.prototype.shakeErrorMessage = function(e) {
                var t = $(".id-guideText > .id-textField");
                t.removeClass("message-alarm"), setTimeout(function() {
                    return t.addClass("message-alarm")
                }), this.setGuideText(), this.uistateNotifyService.setSubState(11, e)
            }, t.prototype.validateByClient = function() {
                return this.clearErrors(), !!this.playerName && (!this.isConsonantName(this.playerName) && this.removeBannedChar(this.playerName) === this.playerName || (this.illegalName = !0, this.shakeErrorMessage("unknown"), !1))
            }, t.prototype.closeModal = function() {
                this.duplicateName = !1, this.illegalName = !1, this.guide.visible = !0, this.gotoAndPlay(this.face, "out"), this.props.closeModal()
            }, t.prototype.getItemFromInventory = function(e) {
                var t = this.inventoryService.filterInventoryItemByCode(e);
                return _.find(t, function(e) {
                    return e.count > 0
                })
            }, t.prototype.confirm = function() {
                var e = this;
                if (this.validateByClient()) {
                    var t = function(t) {
                        e.updating = t, e.confirmButton.enabled = !t, e.closeButton.enabled = !t
                    };
                    t(!0);
                    var i = this.$filter("template")({
                        playername: this.playerName
                    }, "PLAYER_CREATION_NAMEINFO_WARNING");
                    this.popupService.draw("ConfirmCancelPopup", {
                        title: i,
                        description: "PLAYER_CREATION_NAMEINFO_WARNING_DESC",
                        confirmString: "PLAYER_CREATION_NAMEINFO_WARNING_CONFIRM",
                        cancelString: "PLAYER_CREATION_NAMEINFO_WARNING_CANCEL",
                        confirm: function() {
                            var i = e.storeState.player.id,
                                r = e.getItemFromInventory(a.Constants.ChangePlayerNameItemCode);
                            e.playerService.updatePlayerName(i, e.playerName).then(function() {
                                t(!1), s.useItem(n.__assign({}, r, {
                                    count: r.count - 1
                                })), e.closeModal()
                            }).catch(function(i) {
                                switch (t(!1), i.errorCode) {
                                    case c.ErrorCode.OccupiedName:
                                    case c.ErrorCode.PlayerNameAlreadyExist:
                                        e.duplicateName = !0, e.shakeErrorMessage("occupied");
                                        break;
                                    case c.ErrorCode.BanwordName:
                                        e.illegalName = !0, e.shakeErrorMessage("banword")
                                }
                            })
                        },
                        cancel: function() {
                            t(!1), e.closeModal()
                        }
                    })
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("configLoader")], d.prototype, "configLoader", void 0), n.__decorate([r.autowired("playerService")], d.prototype, "playerService", void 0), n.__decorate([r.autowired("banwordService")], d.prototype, "banwordService", void 0), n.__decorate([r.autowired("uistateNotifyService")], d.prototype, "uistateNotifyService", void 0), n.__decorate([r.autowired("inventoryService")], d.prototype, "inventoryService", void 0), n.__decorate([r.autowired("popupService")], d.prototype, "popupService", void 0), t.PlayerNameUpdateInputBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1367);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/randombox?itemId", 27).dialog({
            stages: {
                "randombox-opening": r.InventoryRandomboxOpeningBinder
            },
            params: {
                item: null
            }
        });
        e.state("root.menu.Inventory.Randombox", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(58),
        a = i(1),
        s = i(27),
        c = i(185),
        d = i(28),
        l = i(13),
        u = i(186),
        p = [".ItemOpenEffect", ".InfoContainer", ".Buttons"],
        h = [".Buttons", ".InfoContainer"],
        f = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.itemRewardCards = [], t.cardOutlineEffects = [], t.getRewards = [], t.openingAll = !1, t._stopTrigger = !1, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "stopOpenItemTriggered", {
                get: function() {
                    return this._stopTrigger
                },
                set: function(e) {
                    this._stopTrigger = e, this.enableButton(".id-stopButton", !e)
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-title", "INVENTORY_USE_RANDOMBOX_CANACQUIRE"), this.translate(".id-countTitle", "INVENTORY_USE_RANDOMBOX_OWNEDAMOUNT"), this.translate(".Buttons .id-descriptionContainer .id-textField", "ITEM_AUTO_OPEN_MESSAGE_FINISH"), this.chain(".id-openButton").apply(d.translate, {
                    filterFn: this.$filter("translate"),
                    id: "ITEM_AUTO_OPEN_RANDOMBOX_OPEN"
                }).apply(d.onClick, function() {
                    e.enableControlButtons(!1), e.openOneItem(e.item, e.openingAll ? e.drawReOpening.bind(e) : e.drawAllOpening.bind(e)), e.openingAll = !1
                }), this.chain(".id-allOpenButton").apply(d.translate, {
                    filterFn: this.$filter("translate"),
                    id: "ITEM_AUTO_OPEN_RANDOMBOX_OPEN_ALL"
                }).apply(d.onClick, function() {
                    e.enableControlButtons(!1), e.openAllItem(e.item, e.openingAll ? e.drawReOpening.bind(e) : e.drawAllOpening.bind(e)), e.openingAll = !0
                }), this.chain(".id-stopButton").apply(d.translate, {
                    filterFn: this.$filter("translate"),
                    id: "ITEM_AUTO_OPEN_RANDOMBOX_OPEN_PAUSE"
                }).apply(d.onClick, function() {
                    return e.stopOpenItemTriggered = !0
                }), this.convertFace(".id-exitButton").enabled = !0, this.chain(".id-exitButton").apply(d.translate, {
                    filterFn: this.$filter("translate"),
                    id: "ITEM_AUTO_OPEN_RANDOMBOX_STOP"
                }).apply(d.onClick, function() {
                    e.enableControlButtons(!1), e.exit().then(function() {
                        e.getRewards.length > 0 && e.partsService.checkPartsNotification(e.getRewards)
                    })
                });
                for (var t = 0; t < 10; t++) this.itemRewardCards.push(this.addChildBinder(".id-resultCard" + (t + 1), s.ItemCardBinder)), this.cardOutlineEffects.push(this.getFace(".id-outlineEffect" + (t + 1)));
                var i = this.getFace(".id-itemListTextArea .id-textField");
                i.hasSize = !0, this.itemListTextArea = $(i.htmlElement), this.itemListTextArea.perfectScrollbar({
                    suppressScrollX: !0
                })
            }, t.prototype.onAddedToScene = function() {
                this.setAndDrawTargetItem(this.$stateParams.itemId), this.drawIntro(), this.enableControlButtons(!0)
            }, t.prototype.onDetach = function() {
                this.itemListTextArea.perfectScrollbar("destroy"), e.prototype.onDetach.call(this)
            }, t.prototype.setAndDrawTargetItem = function(e) {
                var t = this.inventoryService.findInventoryItemById(e);
                if (t) {
                    this.item = t;
                    var i = this.inventoryService.getRewardableItemName(t);
                    this.bindText(".id-itemCount", t.count), this.bindHtml(".id-itemListTextArea", i.join("<br>")), this.addChildBinder(".id-ItemCard", s.ItemCardBinder, {
                        info: {
                            type: "ITEM",
                            code: t.code,
                            name: t.name,
                            count: t.count
                        },
                        mouseDisabled: !0
                    }), this.bindText(".id-ItemName", this.$filter("rewardName")("ITEM", t.code, t.count))
                }
            }, t.prototype.drawIntro = function() {
                var e = this;
                this.gotoAndPlay(this.face, "intro"), p.map(function(t) {
                    return e.gotoAndPlay(t, "intro")
                })
            }, t.prototype.enableControlButtons = function(e) {
                this.enableButtonAll(".id-exitButton, .id-openButton, .id-allOpenButton", e), e && this.item && 1 === this.item.count && this.enableButton(".id-allOpenButton", !1)
            }, t.prototype.drawAllOpening = function() {
                return this.drawOpening(p)
            }, t.prototype.drawReOpening = function() {
                var e = this,
                    t = this.drawOpening([".ItemOpenEffect"]);
                return t.push(new r(function(t) {
                    e.gotoAndPlay(".Buttons", "open"), e.getFace(".Buttons").once("stop", t)
                })), t
            }, t.prototype.drawAutoReOpening = function() {
                return this.drawOpening([".ItemOpenEffect"])
            }, t.prototype.drawOpening = function(e) {
                var t = this;
                return e.map(function(e) {
                    return new r(function(i) {
                        t.gotoAndPlay(e, "opening"), ".ItemOpenEffect" === e && t.getFace(e).once("openingEffectEnd", function() {
                            t.stopOpenItemTriggered || t.gotoAndPlay(t.getFace(e), "stop")
                        }), t.getFace(e).once("stop", i)
                    })
                })
            }, t.prototype.drawStop = function(e) {
                var t = this;
                this.gotoAndPlay(".Buttons", e ? "end" : "stop"), this.getFace(".Buttons").once("stop", function() {
                    t.getFace(".id-stopButton").visible = !0, t.stopOpenItemTriggered = !1
                })
            }, t.prototype.drawRewardItem = function(e) {
                var t = this;
                this.gotoAndPlay(".ItemOpenEffect .ResultCards", e.length + "card"), e.forEach(function(e, i) {
                    t.itemRewardCards[i].setProps({
                        info: e,
                        onMouseOver: function() {
                            return t.onMouseOverResult(e, i)
                        },
                        onMouseOut: function() {
                            return t.tooltipService.hide()
                        },
                        actionButtonEnabled: !1
                    }), t.setVehiclePriceEffect(t.cardOutlineEffects[i], e)
                })
            }, t.prototype.setVehiclePriceEffect = function(e, t) {
                var i = ["VEHICLE", "VEHICLE_CUSTOM", "TRIAL_VEHICLE"];
                if (_.includes(i, t.type)) {
                    var n = t,
                        r = function() {
                            return _.isNumber(n.grade) ? n.grade || 1 : _.get(n, "opts.VEHICLE.grade", 1)
                        }(),
                        o = this.vehiclePriceDataService.getBasePrice(t.code, r);
                    this.staticdataLoaderService.staticValues.randomitemeffect_gold_min.value <= o ? this.gotoAndPlay(e, "gold") : this.staticdataLoaderService.staticValues.randomitemeffect_silver_min.value <= o ? this.gotoAndPlay(e, "silver") : this.gotoAndStop(e, "empty")
                } else this.gotoAndStop(e, "empty")
            }, t.prototype.checkAvailableItemCount = function(e, t) {
                var i = this;
                return new r(function(n, r) {
                    return !e || !e.id || e.count < 1 ? r("INVENTORY_USE_RANDOMBOX_ERROR_UNAVAILABLE") : u.InventoryService.hasVehicleReward(e) && (t = Math.min(t, i.vehicleService.getEmptyVehicleSlotCount())) < 1 ? r("POPUP_VEHICLELIST_FULL") : void n(t)
                })
            }, t.prototype.extractVehicleFromRewardInfo = function(e) {
                var t = e.opts.VEHICLE && e.opts.VEHICLE.grade || 1,
                    i = "TRIAL_VEHICLE" === e.type ? c.parseTrialVehicleInfo(e) : this.vehicleDataService.getVehicleData(e.code, t);
                return i.grade = t, i
            }, t.prototype.handleResult = function(e, t) {
                var i = this;
                return new r(function(r, o) {
                    var a = t.rewardItems;
                    if (!a || a.length < 1) return o("INVENTORY_USE_RANDOMBOX_ERROR_NONE");
                    if (u.InventoryService.hasVehicleReward(e)) {
                        var s = _.map(a, function(e) {
                            if ("VEHICLE" === e.type || "TRIAL_VEHICLE" === e.type) {
                                var t = i.extractVehicleFromRewardInfo(e);
                                return {
                                    code: t.code,
                                    grade: t.grade
                                }
                            }
                        });
                        return i.vehiclePriceDataService.getLatestPriceData(_.compact(s)).then(function(e) {
                            return r(_.map(a, function(e) {
                                if ("VEHICLE" === e.type || "TRIAL_VEHICLE" === e.type) {
                                    var t = "TRIAL_VEHICLE" === e.type ? c.parseTrialVehicleInfo(e) : i.extractVehicleFromRewardInfo(e),
                                        r = i.vehiclePriceDataService.getBasePrice(t.code, t.grade);
                                    return n.__assign({}, e, {
                                        price: r,
                                        mutePaint: !0
                                    })
                                }
                                return e
                            }))
                        })
                    }
                    return r(a)
                })
            }, t.prototype.handleOpenItemError = function(e) {
                var t = this,
                    i = e || "USEITEM_ERROR_MESSAGE_UNKNOWNISSUE",
                    n = this.getTitle(i);
                if (e.code === o.toCode(o.ErrorCode.FailedToCreateVehicleEnoughGarage)) {
                    var r = this.$filter("template")({
                        remaining: this.vehicleService.getEmptyVehicleSlotCount()
                    }, "BUNDLE_USE_REMAININGSLOT");
                    i = this.$filter("translate")("BUNDLE_USE_FAIL_POPUP_TITLE_GARAGEFULL") + " " + r, n = "INVENTORY_USE_RANDOMBOX_NO_VEHICLE_SLOT_TITLE"
                }
                this.popupService.draw("ConfirmPopup", {
                    title: n,
                    description: i,
                    confirm: function() {
                        return t.exit()
                    }
                })
            }, t.prototype.openOneItem = function(e, t) {
                var i = this;
                this.checkAvailableItemCount(e, 1).then(function(t) {
                    return i.inventoryService.useItem(e.id, t)
                }).then(function(t) {
                    return i.handleResult(e, t)
                }).then(function(n) {
                    return i.setAndDrawTargetItem(e.id), i.drawRewardItem(n), (o = i.getRewards).push.apply(o, n), i.getFace(".id-stopButton").visible = !1, i.enableControlButtons(!1), r.all(t()).then(function() {
                        i.enableControlButtons(!0), i.getFace(".id-stopButton").visible = !0, i.item.count < 1 ? i.drawStop(!0) : h.map(function(e) {
                            return i.gotoAndPlay(e, "intro")
                        })
                    });
                    var o
                }).catch(function(e) {
                    return i.handleOpenItemError(e)
                })
            }, t.prototype.openAllItem = function(e, t) {
                var i = this;
                this.checkAvailableItemCount(e, 10).then(function(t) {
                    return i.inventoryService.useItem(e.id, t)
                }).then(function(t) {
                    return i.handleResult(e, t)
                }).then(function(n) {
                    return i.setAndDrawTargetItem(e.id), i.drawRewardItem(n), (o = i.getRewards).push.apply(o, n), i.enableControlButtons(!1), r.all(t()).then(function() {
                        i.enableControlButtons(!0), i.stopOpenItemTriggered || i.item.count < 1 ? i.drawStop(i.item.count < 1) : i.openAllItem(i.item, i.drawAutoReOpening.bind(i))
                    });
                    var o
                }).catch(function(e) {
                    return i.handleOpenItemError(e)
                })
            }, t.prototype.getTitle = function(e) {
                switch (e) {
                    case "POPUP_VEHICLELIST_FULL":
                        return "INVENTORY_USE_RANDOMBOX_NO_VEHICLE_SLOT_TITLE";
                    default:
                        return ""
                }
            }, t.prototype.exit = function() {
                var e = this;
                return new r(function(t) {
                    e.gotoAndPlay(e.face, "exit"), e.face.once("stop", function() {
                        e.stateService.go("^"), t()
                    })
                })
            }, t.prototype.onMouseOverResult = function(e, t) {
                var i, r = e;
                if ("BLUEPRINT" === e.type) i = l.TooltipType.Blueprint, r = this.blueprintService.getBlueprintTooltipInfo(e.code);
                else if ("PARTS" === e.type) i = this.partsService.isMaterial(r.code) ? l.TooltipType.PartsMaterialSlot : l.TooltipType.PartsSlot, r = this.partsService.getPartsTooltipInfo(r.code);
                else if (c.isVehicleItemCard(e.type)) {
                    i = l.TooltipType.Vehicle;
                    var o = this.extractVehicleFromRewardInfo(r),
                        a = this.vehiclePriceDataService.getBasePrice(o.code, o.grade);
                    r = n.__assign({}, o, {
                        price: a
                    })
                } else i = l.TooltipType.ItemCard;
                var s = (t + 1) % 5,
                    d = s <= 3 && s > 0 ? "right" : "left",
                    u = {
                        marginLeft: "left" === d ? -1 : -16,
                        marginTop: 26
                    };
                this.tooltipService.show(event, d, i, r, u)
            }, t
        }(a.StageBinder);
    n.__decorate([a.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([a.autowired("$stateParams")], f.prototype, "$stateParams", void 0), n.__decorate([a.autowired("inventoryService")], f.prototype, "inventoryService", void 0), n.__decorate([a.autowired("stateService")], f.prototype, "stateService", void 0), n.__decorate([a.autowired("popupService")], f.prototype, "popupService", void 0), n.__decorate([a.autowired("vehicleService")], f.prototype, "vehicleService", void 0), n.__decorate([a.autowired("vehiclePriceDataService")], f.prototype, "vehiclePriceDataService", void 0), n.__decorate([a.autowired("blueprintService")], f.prototype, "blueprintService", void 0), n.__decorate([a.autowired("tooltipService")], f.prototype, "tooltipService", void 0), n.__decorate([a.autowired("partsService")], f.prototype, "partsService", void 0), n.__decorate([a.autowired("vehicleDataService")], f.prototype, "vehicleDataService", void 0), n.__decorate([a.autowired("staticdataLoaderService")], f.prototype, "staticdataLoaderService", void 0), t.InventoryRandomboxOpeningBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(63),
        r = i(12),
        o = i(11),
        a = i(3),
        s = i(1369),
        c = i(1374),
        d = i(1375),
        l = i(1377),
        u = i(1378),
        p = i(1379);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new o.StateDefinition("/vehicles/:vehicleCode", 5, {
            vehicleCode: ""
        }).container({
            controller: "Vehicles",
            stages: {
                vehicles: s.VehiclesBinder
            },
            resolve: {
                vehicles: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                fetchPrice: ["vehiclePriceDataService", function(e) {
                    e.getLatestPriceData(r.getOwnTrialVehicles()).then(function(e) {
                        return a.store.dispatch(n.updatePrices(e))
                    })
                }]
            }
        }).dialog({
            stages: {
                "vehicles-parts-inventory": {
                    stageBinder: u.VehiclesPartsInventoryBinder,
                    lazy: !0
                },
                "vehicles-parts-install": {
                    stageBinder: c.VehiclesPartsAttachmentBinder,
                    lazy: !0
                },
                "vehicles-parts-uninstall": {
                    stageBinder: l.VehiclesPartsDetachmentBinder,
                    lazy: !0
                },
                "vehicles-parts-combine": {
                    stageBinder: d.VehiclesPartsCombineBinder,
                    lazy: !0
                },
                "vehicles-parts-material-production": {
                    stageBinder: p.VehiclesPartsMaterialProductionBinder,
                    lazy: !0
                }
            },
            resolve: {
                parts: ["partsService", function(e) {
                    return e.fetch()
                }]
            }
        });
        e.state("root.menu.Vehicles", t)
    }]).controller("VehiclesController", ["playerService", "externalService", function(e, t) {
        e.setRecentVehicleIfNeeded(3), t.camera.garage()
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(114),
        o = i(4),
        a = i(1),
        s = i(62),
        c = i(12),
        d = i(2),
        l = i(82),
        u = i(3),
        p = i(164),
        h = i(124),
        f = i(1370),
        v = i(1371),
        m = i(1372),
        g = i(13),
        y = i(239),
        S = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(".id-vehicleTotalValue", !0), this.hasSize(".id-vehicleTotalValue .id-titleLabel", !1), this.hasSize(".id-vehicleTotalValue .id-valueLabel", !1), this.translate(".id-vehicleTotalValue .id-titleLabel", "GARAGE_VEHICLELIST_ALLVEHICLEVALUE"), this.translate(".id-totalNumTitle", "GARAGE_VEHICLELIST_ALLVEHICLENUM"), this.translate(".id-vehicleValueTitle", "COMMON_VEHICLEVALUE"), this.getFace(".id-increaseTotalNum").enabled = !1, this.vehiclesListBinder = this.addChildBinder(this.face, v.VehiclesListBinder), this.vehicleBinder = this.addChildBinder(".id-garageVehicleDetail", p.VehicleBinder), this.vehiclesPartsSlotBinder = this.addChildBinder(".id-partsSlotContainer", m.VehiclesPartsSlotBinder), this.vehiclesFilterBinder = this.addChildBinder(".id-filterAndSort", h.VehicleListFilterBinder), this.vehiclesStatusBinders = this.addChildBinder(".id-statusIndicatorContainer .id-statusIndicatorProgressBar", s.CollectionBinder, {
                    instanceBinder: f.VehiclesDeltaProgressBinder
                }), this.vehicleTotalNum = this.addChildBinder(".id-vehicleTotalNum .id-textField", y.DigitSlashDigitBinder), this.addManagedListener(this.face, d.MouseEventEx.CLICK, function() {
                    e.dispatch(r.hideManagement())
                }), this.initTrialVehicleInfo()
            }, t.prototype.initTrialVehicleInfo = function() {
                var e = this;
                this.hasSize(".id-expVehicleTitle", !0), this.hasSize(".id-expVehicleTitle .id-textField", !1), this.translate(".id-expVehicleTitle .id-textField", "EXPVEHICLE_GARAGE_INFORMATION"), this.on(".id-expVehicleTitle .id-tooltipIcon", d.MouseEventEx.MOUSE_OVER, this.showTooltipTrialVehicle.bind(this)), this.on(".id-expVehicleTitle .id-tooltipIcon", d.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.onAddedToScene = function(e) {
                var t = this;
                this.deregister = this.$transitions.onStart({}, function() {
                    return t.updateStatus()
                })
            }, t.prototype.shouldUpdate = function(e) {
                return !0
            }, t.prototype.update = function(e) {
                var t = this,
                    i = this.reduxProps,
                    r = e.vehicleState,
                    a = e.vehicleStatusState,
                    s = this.selectedVehicle !== r.selected,
                    d = _.find(r.vehicles, {
                        id: r.selected
                    });
                if (this.vehiclesFilterBinder.setProps(n.__assign({}, r, {
                        useVehicleTypes: 3
                    })), this.vehiclesListBinder.setProps(r), s || a !== this.reduxProps.vehicleStatusState) {
                    var p = _.map(l.StatusNames, function(e) {
                        return {
                            status: e,
                            vehicleStatusState: a,
                            selectedVehicle: d
                        }
                    });
                    this.vehiclesStatusBinders.applyCollection(p)
                }
                var h = u.store.getState(),
                    f = h.partsManagement,
                    v = h.partsCombine;
                if (s && (d && this.externalService.beSelectVehicle(d), this.selectedVehicle = r.selected, this.vehiclesPartsSlotBinder.enabledEquip(!c.isTrialVehicle(d))), i.vehicleState !== r) {
                    var m = u.store.getState().player.unlock.maxGarageCount,
                        g = {
                            left: {
                                text: c.getOwnTrialVehicles().length
                            },
                            slash: {
                                text: " / "
                            },
                            right: {
                                text: m
                            }
                        };
                    this.vehicleTotalNum.setProps(g), this.bindText(".id-vehicleTotalValue .id-valueLabel", o.default.toMoney(_.sumBy(c.getOwnVehicles(), function(e) {
                        return e.price
                    })))
                }
                if (d)
                    if (this.visible(".id-vehicleValueTitle", !c.isTrialVehicle(d)), this.visible(".id-expVehicleTitle", c.isTrialVehicle(d)), a.animate && a.animate.after) {
                        var y = this.vehiclesStatusBinders.binders[0],
                            S = y.progressDelay,
                            E = 1e3 * y.progressDuration;
                        setTimeout(function() {
                            t.vehicleBinder.setProps({
                                vehicle: d,
                                duration: E,
                                ovrSwing: !0
                            })
                        }, S)
                    } else _.isEmpty(f.attachmentPopup) && _.isEmpty(f.detachmentPopup) && _.isEmpty(v.upgrading) && this.vehicleBinder.setProps({
                        vehicle: d
                    });
                i.hasModal !== e.hasModal && (e.hasModal ? this.stage.freezeAnimation() : this.stage.thawAnimation())
            }, t.prototype.updateStatus = function() {
                var e = this.playerService.markVehiclesAsChecked();
                return u.store.getState().player.recent.vid === this.selectedVehicle ? e : Promise.all([e, this.playerService.changeRecentVehicle(this.selectedVehicle)])
            }, t.prototype.onDetach = function() {
                this.deregister()
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    vehicleState: e.vehicle,
                    vehicleStatusState: e.vehicleStatus,
                    hasModal: !!e.view.modal.shown.length
                }
            }, t.prototype.showTooltipTrialVehicle = function(e) {
                this.tooltipService.show(e, "topright", g.TooltipType.BasicDetail, {
                    mainText: [{
                        title: "EXPVEHICLE_INFORMATION_TITLE"
                    }, {
                        description: "EXPVEHICLE_INFORMATION_DESC"
                    }],
                    subText: []
                }, {
                    marginTop: 22,
                    marginLeft: 30
                }, {}, "vehicles-trial-info-tooltip")
            }, t
        }(a.StageBinder);
    n.__decorate([a.autowired("$transitions")], S.prototype, "$transitions", void 0), n.__decorate([a.autowired("playerService")], S.prototype, "playerService", void 0), n.__decorate([a.autowired("externalService")], S.prototype, "externalService", void 0), n.__decorate([a.autowired("tooltipService")], S.prototype, "tooltipService", void 0), t.VehiclesBinder = S
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(196),
        a = i(30),
        s = i(16),
        c = i(46),
        d = i(4),
        l = i(8),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "progressDuration", {
                get: function() {
                    return this.durations.increased / 1e3
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "decoratorDuration", {
                get: function() {
                    return this.durations.increasing / 1e3
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "progressDelay", {
                get: function() {
                    return this.durations.increasing
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(t.prototype, "decoratorDelay", {
                get: function() {
                    return 0
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function() {
                var e = this;
                this.progressBinder = this.addChildBinder(this.face, c.ProgressBinder), this.decoratorBinder = this.addChildBinder(".id-decorator", c.ProgressBinder), this.durations = _.transform(["increasing", "increased"], function(t, i) {
                    t[i] = 1e3 * d.default.calcLabelDuration(e.face, i) / 30
                }, {})
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.vehicleStatusState,
                    n = e.selectedVehicle,
                    a = i.animate,
                    s = i.composition;
                if (a) {
                    var c = a.before,
                        d = a.after;
                    if (c[e.status] !== d[e.status]) {
                        if (/normal|detail|simple|increased/.test(this.face.currentLabel)) {
                            this.gotoAndPlay(this.face, "increasing"), this.decoratorBinder.value = this.progressBinder.value = c[e.status];
                            var u = {
                                    label: "STATUS_" + e.status.toUpperCase(),
                                    value: d[e.status],
                                    max: 2e3,
                                    duration: this.progressDuration
                                },
                                p = {
                                    value: d[e.status],
                                    max: 2e3,
                                    duration: this.decoratorDuration
                                };
                            setTimeout(function() {
                                t.progressBinder.setProps(u)
                            }, this.progressDelay), setTimeout(function() {
                                t.decoratorBinder.setProps(p)
                            }, this.decoratorDelay), this.once(this.face, l.EventEx.STOP, function() {
                                t.dispatch(o.animateComplete())
                            })
                        }
                    }
                } else {
                    var h = s && s.statusType === e.status;
                    if (n) {
                        var f = n.status[e.status];
                        if (this.progressBinder.setProps({
                                label: "STATUS_" + e.status.toUpperCase(),
                                value: f,
                                max: 2e3,
                                duration: .7
                            }), h) {
                            this.gotoAndPlay(this.face, "detail", !0);
                            var v = _.findKey(r.Part.PartStatuses, function(t) {
                                    return t === e.status
                                }),
                                m = n.parts[v],
                                g = 0;
                            if (m > 0) {
                                var y = this.staticdata.partsItemData[m];
                                g = y && y.ovr[e.status]
                            }
                            this.decoratorBinder.setProps({
                                value: f - g,
                                max: 2e3
                            })
                        }
                    }
                    h || "detail" !== this.face.currentLabel || this.gotoAndPlay(this.face, "simple", !0)
                }
            }, t
        }(a.Binder);
    n.__decorate([s.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([s.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([s.autowired("staticdataLoaderService")], u.prototype, "staticdata", void 0), t.VehiclesDeltaProgressBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(114),
        o = i(63),
        a = i(1),
        s = i(12),
        c = i(2),
        d = i(3),
        l = i(56),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.pageIndex = 0, t.pageSize = 0, t.filterState = {}, t.isPaging = !1, t.currentListBinder = [], t.nextListBinder = [], t.selectedIndex = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                _.times(7, function(t) {
                    var i = e.getFace(".id-current" + (t + 1)),
                        n = e.getFace(".id-next" + (t + 1));
                    e.currentListBinder.push(e.addChildBinder(i, l.VehicleCard)), e.nextListBinder.push(e.addChildBinder(n, l.VehicleCard)), e.on(i, c.MouseEventEx.CLICK, e.onClick.bind(e, t))
                }), this.pagingContainer = this.getFace(".id-garagePhotoList"), this.pagingContainer.hasSize = !0, this.prevButton = this.getFace(".id-previousButton"), this.nextButton = this.getFace(".id-nextButton"), this.firstButton = this.getFace(".id-firstButton"), this.lastButton = this.getFace(".id-lastButton"), this.indicatorContainer = this.getFace(".id-pageNumberContainer"), this.currentIndicator = this.getFace(".id-currentPage"), this.setUpPagingFlow(), this.setUpPageNumberListener()
            }, t.prototype.setUpPagingFlow = function() {
                var e = this;
                this.on(this.prevButton, c.MouseEventEx.CLICK, function() {
                    t(e.pageIndex - 1, "previous")
                }), this.on(this.nextButton, c.MouseEventEx.CLICK, function() {
                    t(e.pageIndex + 1, "next")
                }), this.on(this.lastButton, c.MouseEventEx.CLICK, function() {
                    t(e.chunkedVehicles.length - 1, "last")
                }), this.on(this.firstButton, c.MouseEventEx.CLICK, function() {
                    t(0, "first")
                });
                var t = function(t, i) {
                    e.movePage(t, i)
                };
                this.on(this.pagingContainer, "reset", function(t) {
                    e.gotoAndPlay(e.pagingContainer, "default"), e.isPaging = !1
                }), this.wheelHandler = _.throttle(function(t) {
                    if (!e.isPaging) {
                        var i = Math.max(-1, Math.min(1, t.wheelDelta || -t.detail));
                        1 === i && 0 !== e.pageIndex ? e.movePage(e.pageIndex - 1, "previous") : -1 === i && e.pageIndex !== e.chunkedVehicles.length - 1 && e.movePage(e.pageIndex + 1, "next")
                    }
                }, 600, {
                    trailing: !1
                }), this.pagingContainer.htmlElement.addEventListener("mousewheel", this.wheelHandler, {
                    passive: !0
                })
            }, t.prototype.setUpPageNumberListener = function() {
                var e = this,
                    t = function(t, i) {
                        e.movePage(t, i)
                    };
                [{
                    num: 2,
                    action: "first"
                }, {
                    num: 3,
                    action: "previous"
                }, {
                    num: 5,
                    action: "next"
                }, {
                    num: 6,
                    action: "last"
                }].forEach(function(i) {
                    var n = i.num - 4,
                        r = e.getFace(".id-curr" + i.num);
                    e.addManagedListener(r, c.MouseEventEx.CLICK, function() {
                        t(e.pageIndex + n, i.action)
                    })
                }), this.addManagedListener(this.indicatorContainer, "reset", function(t) {
                    e.setPageIndicatorsNumber("default"), e.disposePageButton(), e.gotoAndPlay(e.indicatorContainer, "default")
                })
            }, t.prototype.onDetach = function() {
                this.playerService.markVehiclesAsChecked(), this.pagingContainer.htmlElement.removeEventListener("mousewheel", this.wheelHandler)
            }, t.prototype.update = function(e) {
                this.selectedVid = e.selected;
                var t = e.filterState || {};
                _.isEqual(this.filterState, t) || (this.pageIndex = 0), this.filterState = t, this.initVehicleList(s.getOwnTrialVehicles())
            }, t.prototype.initVehicleList = function(e) {
                var t = this.sort(this.filterClass(this.filterManufacturer(e)));
                if (!_.find(e, {
                        id: this.selectedVid
                    })) {
                    var i = 7 * this.pageIndex + this.selectedIndex,
                        n = t[i];
                    if (n || _.isEmpty(t) || (n = _.last(t)), !n) {
                        var r = this.sort(e);
                        _.isEmpty(r) || (n = _.first(r))
                    }
                    n && this.dispatch(o.select(n.id))
                }
                this.chunkedVehicles = _.chunk(t, 7), 0 === this.chunkedVehicles.length && d.store.dispatch(o.removeFilter()), this.pageSize = this.chunkedVehicles.length, this.pageIndex = this.pageIndex > this.pageSize - 1 ? this.pageSize - 1 : this.pageIndex, this.isPaging = !1, this.bindList(this.currentListBinder, this.pageIndex), this.setPageIndicatorsNumber("default"), this.disposePageButton()
            }, t.prototype.filterManufacturer = function(e) {
                var t = this;
                return _.filter(e, function(e) {
                    var i = t.filterState.manufacturerCode || 0;
                    return !(0 !== i) || e.manufacturerCode === i
                })
            }, t.prototype.filterClass = function(e) {
                var t = this;
                return _.filter(e, function(e) {
                    var i = t.filterState.clazz || "ALL";
                    return !("ALL" !== i) || e.clazz === i
                })
            }, t.prototype.sort = function(e) {
                return this.$util.applySorter(e, this.filterState.sortKey || ["default"]), e
            }, t.prototype.bindList = function(e, t) {
                var i = this.chunkedVehicles[t] || [],
                    n = this.selectedVid;
                e.forEach(function(e, t) {
                    var r = i[t],
                        o = r ? n === r.id : void 0;
                    e.setProps({
                        vehicle: r,
                        selected: o
                    })
                })
            }, t.prototype.setPageNumber = function(e, t, i) {
                var n = 0 <= t && t < this.pageSize,
                    r = this.indicatorContainer.$(".id-" + i + e);
                r && (r.enabled = n, this.bindText(r.$(".id-buttonName"), n ? t + 1 : ""))
            }, t.prototype.setPageNumbers = function(e, t) {
                this.setPageNumber(4, e, t);
                for (var i = 1; i < 4; i++) this.setPageNumber(4 - i, e - i, t), this.setPageNumber(4 + i, e + i, t)
            }, t.prototype.setPageIndicatorsNumber = function(e) {
                switch (this.setPageNumbers(this.pageIndex, "curr"), e) {
                    case "default":
                        this.bindText(this.currentIndicator.$(".id-current"), this.pageIndex + 1), this.setPageNumbers(this.pageIndex, "num");
                        break;
                    case "first":
                    case "last":
                        this.setPageNumbers("first" === e ? this.pageIndex + 1 : this.pageIndex - 1, "num")
                }
            }, t.prototype.onClick = function(e) {
                var t = this;
                if (!this.currentListBinder[e].face.selected) {
                    this.selectedIndex = e || 0, this.currentListBinder.forEach(function(e) {
                        var i = e.face;
                        i.selected && (i.selected = !1, t.gotoAndPlay(i.$(".id-configurationContainer"), "intro"))
                    }), this.currentListBinder[e].face.selected = !0;
                    var i = this.chunkedVehicles[this.pageIndex][e];
                    d.store.dispatch(o.select(i.id)), d.store.dispatch(r.hideManagement())
                }
            }, t.prototype.movePage = function(e, t) {
                var i = this;
                if (!this.isPaging && !(e < 0 || this.pageSize <= e || this.pageIndex === e)) {
                    this.isPaging = !0, this.pageIndex = e, this.prevButton.enabled = this.nextButton.enabled = this.lastButton.enabled = this.firstButton.enabled = !1, this.bindList(this.nextListBinder, e);
                    var n = t;
                    "first" === t && (n = "previous"), "last" === t && (n = "next"), this.gotoAndPlay(this.pagingContainer, n), this.gotoAndPlay(this.indicatorContainer, t), this.setPageIndicatorsNumber(t), setTimeout(function() {
                        i.bindList(i.currentListBinder, i.pageIndex), i.currentListBinder[i.selectedIndex].face.selected = !1
                    }, 100)
                }
            }, t.prototype.disposePageButton = function() {
                this.prevButton.enabled = this.firstButton.enabled = 0 !== this.pageIndex, this.nextButton.enabled = this.lastButton.enabled = this.pageIndex !== this.chunkedVehicles.length - 1
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("$util")], u.prototype, "$util", void 0), n.__decorate([a.autowired("playerService")], u.prototype, "playerService", void 0), t.VehiclesListBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(238),
        a = i(114),
        s = i(196),
        c = i(1),
        d = i(2),
        l = i(195),
        u = i(1373),
        p = i(72),
        h = i(8),
        f = i(12),
        v = i(3),
        m = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.partsBinders = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.buttonGroup = new p.ButtonGroup("ClassList"), this.translate(".id-inventoryButton", "VEHICLE_PARTSSLOT_BUTTON"), this.addManagedListener(this.getFace(".id-inventoryButton"), d.MouseEventEx.CLICK, function() {
                    e.lazyLoadService.loadView("vehicles-parts-inventory").then(function() {
                        var t = e.selectedVehicle.clazz;
                        e.dispatch(o.show(t))
                    })
                }), _.forEach(r.Part.PartTypes, function(t) {
                    e.partsBinders[t] = e.addChildBinder(".id-" + t + "Parts", l.AttachedPartsBinder);
                    var i = e.partsBinders[t].face;
                    i.toggle = !0, e.buttonGroup.addButton(i), e.addManagedListener(i, d.MouseEventEx.CLICK, function(i) {
                        v.store.getState().partsManagement.managementType !== t ? e.dispatch(a.showManagement(t)) : e.dispatch(a.hideManagement())
                    }), e.addManagedListener(i, d.MouseEventEx.MOUSE_OVER, function() {
                        e.isPartsChanging() || e.dispatch(s.showComposition(r.Part.PartStatuses[t]))
                    }), e.addManagedListener(i, d.MouseEventEx.MOUSE_OUT, function() {
                        e.isPartsChanging() || e.dispatch(s.hideComposition())
                    })
                }), this.addChildBinder(".id-partsInstallContainer", u.VehiclesPartsManagementBinder), this.on(this.face, d.MouseEventEx.CLICK, function(e) {
                    e.originalEvent.stopImmediatePropagation()
                })
            }, t.prototype.isPartsChanging = function() {
                var e = v.store.getState().vehicleStatus.animate,
                    t = v.store.getState().partsManagement,
                    i = t.attachmentPopup,
                    n = t.detachmentPopup;
                return !_.isUndefined(e) || !_.isEmpty(i) || !_.isEmpty(n)
            }, t.prototype.onDetach = function() {
                e.prototype.onDetach.call(this), this.dispatch(a.hideManagement())
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.partsManagementState,
                    n = e.vehicleState,
                    o = e.vehicleStatusState;
                if (this.selectedVehicle = n.vehicles[n.selected], this.selectedVehicle) {
                    if (!_.isEmpty(i.attachmentPopup)) {
                        if (!_.isEmpty(o.animate)) {
                            var a = i.attachmentPopup.code,
                                s = this.staticdata.partsItemData[a];
                            if (s) {
                                var c = this.getFace(".id-" + s.type + "Parts");
                                c.customState || (this.once(c, h.EventEx.STOP, function() {
                                    c.customState = void 0, t.buttonGroup.validate()
                                }), c.customState = "install", this.buttonGroup.validate())
                            }
                        }
                        return
                    }
                    this.selectedVehicle.parts && _.forEach(r.Part.PartTypes, function(e) {
                        var i = t.selectedVehicle.parts[e],
                            n = t.staticdata.partsItemData[i],
                            r = t.selectedVehicle.clazz,
                            o = n ? n.level : 0,
                            a = (t.partsService.isPartsUpgradable(i) || t.partsService.isPartsAttachable(e, r, o)) && !f.isTrialVehicle(t.selectedVehicle);
                        t.partsBinders[e].setProps({
                            code: i,
                            type: e,
                            potential: a
                        })
                    }), i.managementType || this.buttonGroup.resetButtons()
                }
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    partsManagementState: e.partsManagement,
                    partsState: e.parts,
                    vehicleState: e.vehicle,
                    vehicleStatusState: e.vehicleStatus
                }
            }, t.prototype.enabledEquip = function(e) {
                this.enableButtonAll(".PartsInstallSlotSmall", e)
            }, t
        }(c.Binder);
    n.__decorate([c.autowired("staticdataLoaderService")], m.prototype, "staticdata", void 0), n.__decorate([c.autowired("partsService")], m.prototype, "partsService", void 0), n.__decorate([c.autowired("lazyLoadService")], m.prototype, "lazyLoadService", void 0), t.VehiclesPartsSlotBinder = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(114),
        o = i(158),
        a = i(17),
        s = i(16),
        c = i(2),
        d = i(188),
        l = i(236),
        u = i(3),
        p = i(8),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = this.getFace(".id-partsUpgradeButton"),
                    i = t.$(".id-textField");
                !t.cloned && i && (i.scaleX = 1 / t.scaleX, i.scaleY = 1 / t.scaleY, i.width *= t.scaleX), this.translate(t, "PARTS_INSTALL_UPGRADE"), this.translate(".id-partsUninstallButton", "PARTS_INSTALL_UNINSTALL"), this.translate(".id-emptySlotLabel", "PARTS_INSTALL_NONE"), this.translate(".id-partsInventoryTitle", "GARAGE_PART_INVENTORYSLOT"), this.translate(".id-partsSlotTitle", "GARAGE_PART_EQUIPEDITEM"), this.partsBinders = _.map(_.times(10), function(t) {
                    var i = t + 1;
                    return e.addChildBinder(".id-partsListItem" + i, l.InventoryPartsBinder)
                }), _.forEach(this.partsBinders, function(t, i) {
                    var n = i + 1;
                    e.on(t.face, c.MouseEventEx.CLICK, function() {
                        if (e.selectedVehicle) {
                            var t = e.selectedVehicle.clazz,
                                i = u.store.getState().partsManagement.managementType,
                                o = parseInt(_.findKey(e.staticdata.partsItemData, {
                                    clazz: t,
                                    type: i,
                                    level: n
                                }), 10),
                                a = u.store.getState().parts.parts[o];
                            a && a.count > 0 && e.lazyLoadService.loadView("vehicles-parts-install").then(function() {
                                e.dispatch(r.showAttachmentPopup(o)), e.tooltipService.hide()
                            })
                        }
                    })
                }), this.on(t, c.MouseEventEx.CLICK, function() {
                    var t = u.store.getState().partsManagement.managementType;
                    e.selectedVehicle && t && e.lazyLoadService.loadView("vehicles-parts-combine").then(function() {
                        e.dispatch(o.showUpgradePopup(e.selectedVehicle, t))
                    })
                }), this.on(".id-partsUninstallButton", c.MouseEventEx.CLICK, function() {
                    var t = u.store.getState().partsManagement.managementType,
                        i = e.selectedVehicle.parts[t] || 0;
                    i > 0 && e.lazyLoadService.loadView("vehicles-parts-uninstall").then(function() {
                        e.dispatch(r.showDetachmentPopup(i))
                    })
                })
            }, t.prototype.update = function(e) {
                var t = e.partsManagementState,
                    i = e.vehicleState,
                    r = e.partsState,
                    o = e.vehicleStatusState,
                    a = e.partsCombineState;
                if (this.selectedVehicle = i.vehicles[i.selected], t && this.selectedVehicle) {
                    if (t.managementType) {
                        var s = this.selectedVehicle.clazz,
                            c = t.managementType,
                            l = this.selectedVehicle.parts[c] || 0,
                            u = this.staticdata.partsItemData[l];
                        if (0 !== l) {
                            var h = d.getPartsBonus(u),
                                f = u.level;
                            this.gotoAndStop(".id-installPartsSlot", "install"), this.gotoAndStop(".id-installPartsSlot .id-partsGradeContainer", "grade" + f), this.template(".id-installPartsSlot .id-partsLevel", "VEHICLE_PARTSSLOT_LEVEL", {
                                level: f
                            }), this.translate(".id-installPartsSlot .id-label", d.getStatusText(c)), this.translate(".id-installPartsSlot .id-value", h.toString()), this.drawExternalImage(".id-installPartsSlot .id-partsImage", this.$filter("cdn_parts")(l)), this.enableButton(".id-partsUninstallButton", !0)
                        } else this.gotoAndStop(".id-installPartsSlot", "empty"), this.gotoAndStop(".id-installPartsSlot .id-partsGradeContainer", "empty"), this.enableButton(".id-partsUninstallButton", !1);
                        var v = this.staticdata.partsCombineData[l],
                            m = 0 !== l && !!v && !a.upgrading && _.isEmpty(o.animate);
                        this.enableButton(".id-partsUpgradeButton", m);
                        var g = this.partsService.isPartsUpgradable(l, !0);
                        if (this.visible(".id-partsUpgradeButton .id-lightEffect", g), g) {
                            this.getFace(".id-partsUpgradeButton .id-lightEffect").play()
                        }
                        this.bindText(".id-partsClass", s), this.translate(".id-partsName", "PARTS_INVENTORY_PARTS_TYPE_FILTER_" + d.getPartsTypeIndex(c));
                        var y = _(this.partsService.partsItemDataArray).filter({
                                clazz: s,
                                type: c
                            }).sortBy("code").map(function(e) {
                                return _.defaults({
                                    resource: r.parts[e.code],
                                    slotType: "management"
                                }, e)
                            }).value(),
                            S = _.findLast(y, function(e) {
                                return e.resource && e.resource.count > 0 && e.level > (0 !== l ? u.level : 0)
                            }),
                            E = _(y).map(function(e) {
                                return n.__assign({}, e, {
                                    isBestItem: !_.isUndefined(S) && e.code === S.code
                                })
                            }).value();
                        _.forEach(this.partsBinders, function(e, t) {
                            e.setProps(E[t])
                        })
                    }
                    if (t.managementType !== this.currentPartsType && (t.managementType ? this.gotoAndPlay(this.face, t.managementType ? "another" : "show") : this.gotoAndPlay(this.face, "hide"), this.currentPartsType = t.managementType), o.animate && t.detachmentPopup) {
                        var T = t.detachmentPopup.code,
                            C = this.staticdata.partsItemData[T];
                        if (C) {
                            var b = this.getFace(".id-partsListItem" + C.level);
                            b.customState || (this.once(b, p.EventEx.STOP, function() {
                                b.customState = void 0, $(b.htmlElement).removeClass("prevent-click")
                            }), b.customState = "uninstall", $(b.htmlElement).addClass("prevent-click"))
                        }
                    }
                }
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    partsManagementState: e.partsManagement,
                    vehicleState: e.vehicle,
                    partsState: e.parts,
                    vehicleStatusState: e.vehicleStatus,
                    partsCombineState: e.partsCombine
                }
            }, t
        }(a.StageBinder);
    n.__decorate([s.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([s.autowired("staticdataLoaderService")], h.prototype, "staticdata", void 0), n.__decorate([s.autowired("partsService")], h.prototype, "partsService", void 0), n.__decorate([s.autowired("tooltipService")], h.prototype, "tooltipService", void 0), n.__decorate([s.autowired("lazyLoadService")], h.prototype, "lazyLoadService", void 0), t.VehiclesPartsManagementBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(114),
        o = i(196),
        a = i(69),
        s = i(17),
        c = i(2),
        d = i(16),
        l = i(8),
        u = i(188),
        p = i(3),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "isInstallable", {
                get: function() {
                    return this.ovrDiff > 0
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.adjustButtonsState = function(e) {
                this.enableButton(".id-confirmButton", e && this.isInstallable), this.enableButton(".id-cancelButton", e)
            }, t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".installTitle", "PARTS_INSTALL_CONFIRM_TITLE"), this.translate(".id-partsLevelLabel", "PARTS_INSTALL_CONFIRM_LEVEL"), this.translate(".id-installLabel", "PARTS_INSTALL_CONFIRM_CHANGE"), this.translate(".id-countLabel", "PARTS_INSTALL_CONFIRM_QUANTITY"), this.translate(".id-confirmButton", "PARTS_INSTALL_CONFIRM_CHECK"), this.translate(".id-cancelButton", "PARTS_INSTALL_CONFIRM_CANCEL"), this.on(".id-confirmButton", c.MouseEventEx.CLICK, function() {
                    var t = p.store.getState().vehicle.selected,
                        i = p.store.getState().partsManagement,
                        n = i.managementType,
                        s = i.attachmentPopup.code;
                    e.adjustButtonsState(!1), e.vehicleService.install(t, n, s).then(function() {
                        var t = p.store.getState().partsManagement.attachmentPopup,
                            i = t.before,
                            n = t.after;
                        e.gotoAndPlay(e.face, "install"), e.dispatch(r.hideManagement()), e.once(e.face, l.EventEx.STOP, function() {
                            e.dispatch(a.resume("parts-attachment")), e.dispatch(o.animate(i.status, n.status)), e.dispatch(r.hideAttachmentPopup())
                        })
                    }).catch(function(t) {
                        e.popupService.drawConfirm("COMMON_ERROR_SERVICE_TITLE", "COMMON_ERROR_MESSAGE_UNKNOWN", function() {
                            e.adjustButtonsState(!0)
                        })
                    })
                }), this.on(".id-cancelButton", c.MouseEventEx.CLICK, function() {
                    e.adjustButtonsState(!1), e.dispatch(r.hideAttachmentPopup())
                });
                var t = this.face;
                this.on(t, l.EventEx.STOP, function() {
                    /install|out/.test(t.currentLabel) ? e.gotoAndStop(e.face, "default") : /in/.test(t.currentLabel) && e.popupService.emit("popupOpened", {
                        popupName: "VehiclesPartsAttachmentPopup"
                    })
                })
            }, t.prototype.onDetach = function() {
                this.dispatch(r.resetAttachmentPopup()), this.dispatch(a.resume("parts-attachment"))
            }, t.prototype.getAttachingPartsCode = function(e) {
                if (e) {
                    var t = e.partsManagementState;
                    return t && t.attachmentPopup ? t.attachmentPopup.code : void 0
                }
            }, t.prototype.update = function(e) {
                var t = e.partsState,
                    i = this.face,
                    n = this.getAttachingPartsCode(e),
                    r = this.getAttachingPartsCode(this.reduxProps);
                if (n && (!r || r !== n)) {
                    var o = p.store.getState().vehicle,
                        s = o.vehicles[o.selected],
                        c = this.staticdata.partsItemData,
                        d = c[n],
                        l = d.type,
                        h = s.parts[l],
                        f = c[h],
                        v = u.getPartsBonus(f),
                        m = u.getPartsBonus(d),
                        g = t.parts[n] ? t.parts[n].count : 0;
                    if (this.ovrDiff = m - v, this.bindText(".id-levelOld", "" + (f ? f.level : 0)), this.bindText(".id-levelNew", "" + d.level), this.bindText(".id-valueOld", String(v)), this.bindText(".id-valueNew", String(m)), this.bindText(".id-valueDiff", this.isInstallable ? "+" + this.ovrDiff : String(this.ovrDiff)), this.bindText(".id-countValue", g), this.translate(".id-partsTypeLabel", u.getStatusText(l)), this.drawExternalImage(".id-partsImage", this.$filter("cdn_parts")(n)), h ? this.isInstallable ? this.translate(".id-descLabel", "PARTS_INSTALL_CONFIRM_OVERWRITE") : this.translate(".id-descLabel", "PARTS_INSTALL_CONFIRM_CANNOT") : this.translate(".id-descLabel", "PARTS_INSTALL_CONFIRM_EMPTY"), this.isInstallable) {
                        var y = this.$filter("translate")("PARTS_" + n + "_NAME");
                        this.template(".id-questionLabel", "PARTS_INSTALL_CONFIRM_DESC1", {
                            partsname: y
                        })
                    } else this.translate(".id-questionLabel", "PARTS_INSTALL_CONFIRM_DESC2");
                    this.adjustButtonsState(!0)
                }
                n ? i.timeline.isActive() && "install" === i.currentLabel || (this.dispatch(a.pause("parts-attachment")), this.gotoAndPlay(this.face, "in", !0)) : "in" === i.currentLabel && (this.dispatch(a.resume("parts-attachment")), this.gotoAndPlay(this.face, "out", !0))
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    partsManagementState: e.partsManagement,
                    partsState: e.parts
                }
            }, t
        }(s.StageBinder);
    n.__decorate([d.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([d.autowired("staticdataLoaderService")], h.prototype, "staticdata", void 0), n.__decorate([d.autowired("vehicleService")], h.prototype, "vehicleService", void 0), n.__decorate([d.autowired("popupService")], h.prototype, "popupService", void 0), t.VehiclesPartsAttachmentBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(6),
        a = i(158),
        s = i(238),
        c = i(196),
        d = i(114),
        l = i(69),
        u = i(17),
        p = i(2),
        h = i(16),
        f = i(4),
        v = i(3),
        m = i(317),
        g = i(195),
        y = i(8),
        S = i(1376),
        E = i(188),
        T = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.isOnCombine = !1, t.isUpdatedMaterial = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-combineTitle", "PARTS_COMBINE_POPUP_TITLE"), this.translate(".id-descLabel", "PARTS_COMBINE_POPUP_DESC"), this.translate(".id-commissionTitleLabel", "PARTS_COMBINE_POPUP_COST"), this.translate(".id-combineButton", "PARTS_COMBINE_POPUP_OK"), this.translate(".id-cancelButton", "PARTS_COMBINE_POPUP_CANCEL"), this.translate(".id-resultDescription", "PARTS_COMBINE_SUCCESS_ALERT"), this.translate(".id-restMaterialTitleLabel", "PARTS_COMBINE_SUCCESS_REMAIN"), this.translate(".id-confirmButton", "PARTS_COMBINE_SUCCESS_OK"), this.translate(".id-resultSuccess", "PARTS_COMBINE_SUCCESS_TITLE"), this.translate(".id-resultFail", "PARTS_COMBINE_FAIL_TITLE"), this.translate(".id-retryButton", "PARTS_COMBINE_FAIL_RETRY"), this.translate(".id-exitButton", "PARTS_COMBINE_FAIL_EXIT"), this.hasSize(".ValueSuccess > *", !1), this.on(".id-combineButton", p.MouseEventEx.CLICK, this.onCombine.bind(this, !1)), this.on(".id-retryButton", p.MouseEventEx.CLICK, this.onCombine.bind(this, !0)), this.on(".id-cancelButton", p.MouseEventEx.CLICK, function() {
                    e.dispatch(a.hide())
                }), this.onAll(".id-confirmButton, .id-exitButton", p.MouseEventEx.CLICK, function() {
                    var t = v.store.getState().partsInventory,
                        i = e.isResultSuccess(),
                        n = i ? "success" : "fail",
                        r = i ? t.visible ? "_inventory" : "_vehicles" : "";
                    e.gotoAndPlay(e.face, n + "_out" + r), e.enableButton(".id-confirmButton", !1), e.enableButton(".id-exitButton", !1), e.once(e.face, y.EventEx.STOP, function() {
                        if (i)
                            if (e.upgradeResult) {
                                var t = e.upgradeResult,
                                    n = t.before.status,
                                    r = t.after.status;
                                e.dispatch(c.animate(n, r))
                            } else if (e.craftResult && e.craftResult.part) {
                            var o = e.craftResult.part.code;
                            e.dispatch(s.animate(o))
                        }
                        e.dispatch(a.hide()), e.enableButton(".id-confirmButton", !0)
                    })
                });
                var t = this.face;
                this.on(t, y.EventEx.STOP, function() {
                    /out/.test(t.currentLabel) && setTimeout(function() {
                        return e.gotoAndStop(e.face, "hide")
                    }, 1), /success|fail|retry/.test(t.currentLabel) && (e.isOnCombine = !1, e.adjustButtonsState(!0)), /in/.test(t.currentLabel) && e.popupService.emit("popupOpened", {
                        popupName: "VehiclesPartsCombinePopup"
                    })
                }), this.materialPartsBinder = this.addChildBinder(".id-materialSlotOld", S.VehiclePartsCombineMaterialBinder), this.basePartsBinder = this.addChildBinder(".id-partsSlotOld", g.AttachedPartsBinder), this.targetPartsBinder = this.addChildBinder(".id-partsSlotNew", g.AttachedPartsBinder), this.resultPartsBinder = this.addChildBinder(".id-partsSlotResult", g.AttachedPartsBinder), this.resultMaterialBinder = this.addChildBinder(".id-restMaterialSlot", m.PartsMaterialBinder)
            }, t.prototype.onDetach = function() {
                this.dispatch(a.hide()), this.dispatch(l.resume("parts-combine"))
            }, t.prototype.update = function(e) {
                var t = e.partsCombineState,
                    i = t.popupState,
                    n = t.crafting,
                    r = t.upgrading,
                    o = e.partsState,
                    a = this.face;
                if (i && (!_.isEmpty(n) || !_.isEmpty(r))) {
                    var s = n ? n.code : r.vehicle.parts[r.partsType];
                    if (this.setPartsCombineData(s), this.resource = o.parts[this.combine.materialCode], this.setMainNotice(), this.setCombineInfos(), this.setBinders(), this.isOnCombine && !this.isUpdatedMaterial && (this.isUpdatedMaterial = this.isChangedMaterial(o)), n) {
                        if (n.result) {
                            var c = n.result,
                                d = c.part,
                                u = c.isSuccess,
                                p = d ? d.code : s;
                            this.bindResultValue(p, u), this.craftResult !== n.result && this.setResult(u)
                        }
                        this.craftResult = n.result
                    } else if (r) {
                        if (r.result) {
                            var h = r.result,
                                f = h.after,
                                u = h.isSuccess,
                                p = f.parts[this.base.type];
                            this.bindResultValue(p, u), this.upgradeResult !== r.result && this.setResult(u)
                        }
                        this.upgradeResult = r.result
                    }
                }
                if (this.reduxProps.partsCombineState) {
                    i !== this.reduxProps.partsCombineState.popupState && (i ? (this.dispatch(l.pause("parts-combine")), this.gotoAndPlay(this.face, "in", !0), this.adjustButtonsState(!0), this.craftResult = this.upgradeResult = void 0, this.isOnCombine = !1) : (this.dispatch(l.resume("parts-combine")), "in" === a.currentLabel && this.gotoAndPlay(this.face, "out", !0)))
                }
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    partsState: e.parts,
                    partsCombineState: e.partsCombine
                }
            }, t.prototype.checkLevelAlert = function() {
                var e = this;
                return new o(function(t) {
                    e.combine.couldFail ? e.popupService.draw("ConfirmCancelPopup", {
                        title: "PARTS_COMBINE_POPUP_WARNING",
                        description: "PARTS_COMBINE_POPUP_WARNING_DESC",
                        confirmString: "PARTS_COMBINE_POPUP_WARNING_CONFIRM",
                        confirm: t
                    }) : t()
                })
            }, t.prototype.onCombine = function(e) {
                var t = this,
                    i = v.store.getState().partsCombine,
                    n = i.crafting,
                    r = i.upgrading,
                    o = {
                        crafting: _.isEmpty(n),
                        upgrading: _.isEmpty(r)
                    };
                this.checkLevelAlert().then(function() {
                    if (e && (n && n.result ? v.store.dispatch(a.retryCraft()) : r && r.result && v.store.dispatch(a.retryUpgrade())), _(o).some(function(e) {
                            return !e
                        })) {
                        t.adjustButtonsState(!1), t.setBinders(), t.isUpdatedMaterial = !1, t.isOnCombine = !0;
                        var i = function(e) {
                            t.popupService.drawConfirm("COMMON_ERROR_SERVICE_TITLE", "COMMON_ERROR_MESSAGE_UNKNOWN", function() {
                                t.adjustButtonsState(!0), t.isOnCombine = !1
                            })
                        };
                        o.crafting ? o.upgrading || t.upgradeParts(r).then(function() {
                            t.isResultSuccess() && t.dispatch(d.hideManagement())
                        }).catch(function(e) {
                            return i()
                        }) : t.craftParts(n).catch(function(e) {
                            return i()
                        })
                    }
                })
            }, t.prototype.craftParts = function(e) {
                var t = e.code;
                return this.partsService.craft(t)
            }, t.prototype.upgradeParts = function(e) {
                var t = e.vehicle,
                    i = e.partsType;
                return this.vehicleService.upgradeParts(t.id, i)
            }, t.prototype.isResultSuccess = function() {
                var e = v.store.getState().partsCombine,
                    t = e.crafting,
                    i = e.upgrading;
                return t && t.result ? t.result.isSuccess : i && i.result ? i.result.isSuccess : void 0
            }, t.prototype.adjustButtonsState = function(e) {
                this.enableButton(".id-combineButton", e && this.isCraftable()), this.enableButton(".id-retryButton", e && this.isCraftable()), this.enableButton(".id-cancelButton", e), this.enableButton(".id-exitButton", e)
            }, t.prototype.getPartsItemData = function(e) {
                return this.staticdataLoaderService.partsItemData[e]
            }, t.prototype.setPartsCombineData = function(e) {
                this.combine = this.staticdataLoaderService.partsCombineData[e], this.base = this.getPartsItemData(e), this.target = this.getPartsItemData(this.combine.targetCode), this.attribute = r.Part.PartStatuses[this.base.type], this.baseOvr = this.base.ovr[this.attribute], this.targetOvr = this.target.ovr[this.attribute]
            }, t.prototype.isEnoughMaterial = function() {
                return this.resource && this.combine.materialAmount <= this.resource.count
            }, t.prototype.isEnoughCost = function() {
                return this.combine.cost <= v.store.getState().player.sp
            }, t.prototype.isCraftable = function() {
                return this.isEnoughMaterial() && this.isEnoughCost()
            }, t.prototype.getNoticeType = function() {
                return this.isEnoughMaterial() ? this.isEnoughCost() ? this.combine.couldFail ? "ALERT" : "DESC" : "NEEDSP" : "NEEDMATERIAL"
            }, t.prototype.setBinders = function() {
                this.basePartsBinder.setProps({
                    code: this.base.code
                }), this.targetPartsBinder.setProps({
                    code: this.combine.targetCode
                }), this.isOnCombine || this.materialPartsBinder.setProps({
                    resource: this.resource,
                    baseCode: this.base.code
                })
            }, t.prototype.setMainNotice = function() {
                this.isOnCombine || (this.translateAll("> .id-descLabel", "PARTS_COMBINE_POPUP_" + this.getNoticeType()), this.isCraftable() ? this.templateAll("> .id-questionLabel", "PARTS_COMBINE_POPUP_CONFIRM", {
                    partsname: this.$filter("translate")("PARTS_" + this.combine.baseCode + "_NAME")
                }) : this.translateAll("> .id-questionLabel", "PARTS_COMBINE_POPUP_UNAVAILABLE"))
            }, t.prototype.setCombineInfos = function() {
                this.translate(".id-materialName", "PARTS_" + this.combine.materialCode + "_NAME"), this.translateAll(".id-partsTypeLabel, .id-partsTypeLabelBig", E.getStatusText(this.base.type)), this.bindText(".id-partsName", this.$filter("translate")("PARTS_" + this.combine.baseCode + "_NAME")), this.bindText(".id-valueOld", this.baseOvr), this.bindText(".id-valueNew", this.targetOvr), this.bindText(".id-valueDiff", this.targetOvr - this.baseOvr), this.template(".id-partsNameBig", "VEHICLE_PARTSSLOT_" + this.base.type.toUpperCase() + "_BR", {
                    clazz: this.base.clazz
                }), this.template(".id-commission", "COMMON_SP", {
                    sp: f.default.toMoney(this.combine.cost)
                })
            }, t.prototype.isChangedMaterial = function(e) {
                var t = this.reduxProps.partsState;
                return !!this.combine && (t ? t.parts[this.combine.materialCode] : {}) !== (e ? e.parts[this.combine.materialCode] : {})
            }, t.prototype.bindResultValue = function(e, t) {
                this.resultPartsBinder.setProps({
                    code: e
                });
                var i = this.getPartsItemData(e);
                this.bindTextAll(".id-valueSuccess, .id-valueFail", String(i.ovr[this.attribute])), !0 === t && this.bindText(".id-valueSuccess .id-valueDiff", String(i.ovr[this.attribute] - this.baseOvr)), this.isUpdatedMaterial && (t ? this.setResultMaterial() : (this.setResultMaterial(), this.setResultNotice()))
            }, t.prototype.setResultNotice = function() {
                this.isCraftable() || (this.translateAll(".id-noticeContainer .id-descLabel", "PARTS_COMBINE_POPUP_" + this.getNoticeType()), this.translateAll(".id-noticeContainer .id-questionLabel", "PARTS_COMBINE_POPUP_UNAVAILABLE")), this.gotoAndPlay(".id-noticeContainer", this.isCraftable() ? "default" : "notice")
            }, t.prototype.setResultMaterial = function() {
                this.resultMaterialBinder.setProps({
                    code: this.combine.materialCode,
                    resource: this.resource
                })
            }, t.prototype.setResult = function(e) {
                var t = this,
                    i = this.face,
                    n = e ? "success" : "fail";
                "fail" !== i.currentLabel && "retry_fail" !== i.currentLabel || (n = "retry_" + n), this.gotoAndPlay(this.face, n), this.visible(".id-noticeContainer", !1), "fail" === n ? this.visible(".id-noticeContainer", !0) : "retry_fail" === n && this.once(this.face, "retry_fail_in", function() {
                    t.visible(".id-noticeContainer", !0)
                })
            }, t
        }(u.StageBinder);
    n.__decorate([h.autowired("$filter")], T.prototype, "$filter", void 0), n.__decorate([h.autowired("staticdataLoaderService")], T.prototype, "staticdataLoaderService", void 0), n.__decorate([h.autowired("partsService")], T.prototype, "partsService", void 0), n.__decorate([h.autowired("vehicleService")], T.prototype, "vehicleService", void 0), n.__decorate([h.autowired("vehicleDataService")], T.prototype, "vehicleDataService", void 0), n.__decorate([h.autowired("popupService")], T.prototype, "popupService", void 0), t.VehiclesPartsCombineBinder = T
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(16),
        a = i(316),
        s = i(4),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.partResourceBinder = this.addChildBinder(this.face, a.PartResourceBinder), this.update(this.props)
            }, t.prototype.update = function(e) {
                var t = e.resource,
                    i = e.baseCode;
                if (this.partResourceBinder.setProps(e), i) {
                    var n = this.staticdata.partsCombineData[i],
                        r = n.materialCode,
                        o = t && t.count >= n.materialAmount ? "sufficient" : "insufficient";
                    this.drawExternalImage(".MaterialImage", this.$filter("cdn_material")(r)), this.template(".id-combineCountNumLabel", "VEHICLE_PARTSSLOT_UPGRADE_DESC", {
                        cssStyle: o,
                        current: s.default.toMoney(t ? t.count : 0),
                        value: s.default.toMoney(n.materialAmount)
                    })
                }
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([o.autowired("staticdataLoaderService")], c.prototype, "staticdata", void 0), n.__decorate([o.autowired("sessionService")], c.prototype, "sessionService", void 0), n.__decorate([o.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.VehiclePartsCombineMaterialBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(69),
        o = i(114),
        a = i(196),
        s = i(4),
        c = i(195),
        d = i(16),
        l = i(8),
        u = i(188),
        p = i(2),
        h = i(17),
        f = i(3),
        v = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-screenTitle", "PARTS_UNINSTALL_TITLE"), this.translate(".id-confirmButton", "PARTS_UNINSTALL_OK"), this.translate(".id-cancelButton", "PARTS_UNINSTALL_CANCEL"), this.enableButton(".id-itemCardSmallLabel .id-itemCardSmall", !1), this.uninstallPartsBinder = this.addChildBinder(".id-partsSlotResult", c.AttachedPartsBinder), this.on(".id-confirmButton", p.MouseEventEx.CLICK, function() {
                    [".id-confirmButton", ".id-cancelButton"].forEach(function(t) {
                        return e.enableButtonAll(t, !1)
                    });
                    var t = f.store.getState().vehicle.selected,
                        i = f.store.getState().partsManagement.managementType;
                    return e.vehicleService.uninstall(t, i).then(function() {
                        var t = f.store.getState().partsManagement.detachmentPopup,
                            i = t.before,
                            n = t.after;
                        e.gotoAndPlay(e.face, "uninstall"), e.once(e.face, l.EventEx.STOP, function() {
                            e.dispatch(r.resume("parts-detachment")), e.dispatch(a.animate(i.status, n.status)), e.dispatch(o.resetDetachmentPopup()), [".id-confirmButton", ".id-cancelButton"].forEach(function(t) {
                                return e.enableButtonAll(t, !0)
                            })
                        })
                    })
                }), this.on(".id-cancelButton", p.MouseEventEx.CLICK, function() {
                    e.dispatch(o.hideDetachmentPopup()), [".id-confirmButton", ".id-cancelButton"].forEach(function(t) {
                        return e.enableButtonAll(t, !1)
                    }), e.once(e.face, l.EventEx.STOP, function() {
                        [".id-confirmButton", ".id-cancelButton"].forEach(function(t) {
                            return e.enableButtonAll(t, !0)
                        })
                    })
                })
            }, t.prototype.onDetach = function() {
                this.dispatch(o.resetDetachmentPopup()), this.dispatch(r.resume("parts-detachment"))
            }, t.prototype.update = function(e) {
                var t = e.partsManagementState,
                    i = void 0 === t ? {} : t,
                    n = e.partsState,
                    o = i.detachmentPopup;
                if (o) {
                    var a = this.face;
                    if (o.code) {
                        var c = i.managementType,
                            d = o.code,
                            l = this.staticdata.partsItemData[d],
                            p = n.parts[l.uninstallCode];
                        this.template(".id-partsNameBig", "VEHICLE_PARTSSLOT_" + c.toUpperCase() + "_BR", {
                            clazz: l.clazz
                        }), this.translate(".id-partsTypeLabelBig", u.getStatusText(c)), this.translate(".id-partsValue", String(u.getPartsBonus(l))), this.uninstallPartsBinder.setProps({
                            code: o.code
                        }), this.drawExternalImageAll(".id-partsImage", this.$filter("cdn_parts")(d)), this.translate(".id-uninstallItemTitle", "PARTS_UNINSTALL_ITEM");
                        var h = this.$filter("translate")("PARTS_" + l.uninstallCode + "_NAME"),
                            f = p ? p.count : 0;
                        this.template(".id-itemCardSmallLabel .id-itemName", "PARTS_UNINSTALL_ITEM_NAME_COUNT", {
                            item: h,
                            count: l.uninstallCount
                        }), this.translate(".id-itemCardSmallLabel .id-itemCardSmall .id-itemNum", f >= 1e6 ? "999,999+" : s.default.numberWithCommas(f)), this.drawExternalImage(".id-itemCardSmallLabel .id-itemCardSmall .id-itemType .id-itemImage", this.$filter("cdn_material")(l.uninstallCode)), p && p.count >= l.uninstallCount ? (this.translate(".id-questionLabel", "PARTS_UNINSTALL_SUFFICIENT"), this.enableButton(".id-confirmButton", !0)) : (this.translate(".id-questionLabel", "PARTS_UNINSTALL_INSUFFICIENT"), this.enableButton(".id-confirmButton", !1)), this.translate(".id-descLabel", "PARTS_UNINSTALL_DESC"), a.timeline.isActive() && "uninstall" === a.currentLabel || (this.dispatch(r.pause("parts-detachment")), this.gotoAndPlay(this.face, "in", !0))
                    } else "in" === a.currentLabel && (this.dispatch(r.resume("parts-detachment")), this.gotoAndPlay(this.face, "out", !0))
                }
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    partsManagementState: e.partsManagement,
                    partsState: e.parts
                }
            }, t
        }(h.StageBinder);
    n.__decorate([d.autowired("$filter")], v.prototype, "$filter", void 0), n.__decorate([d.autowired("staticdataLoaderService")], v.prototype, "staticdata", void 0), n.__decorate([d.autowired("vehicleService")], v.prototype, "vehicleService", void 0), t.VehiclesPartsDetachmentBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(238),
        a = i(69),
        s = i(15),
        c = i(1),
        d = i(2),
        l = i(62),
        u = i(17),
        p = i(317),
        h = i(236),
        f = i(72),
        v = i(8),
        m = i(135),
        g = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.partsMaterialTweens = [], t.partsItemTweens = [], t.disableTags = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-lvStatic", "PARTS_INVENTORY_FILTER_LEVEL"), this.translate(".id-materialStatic", "PARTS_INVENTORY_MATERIAL");
                var t = [".ColumnList", ".id-columnListItem", ".RowList", ".id-rowListItem", ".ClassList", ".id-classListItem", ".MaterialList", ".id-materialListItem", ".PartsList", ".id-partsListItem"];
                this.hasSizeAll(t.join(", "), !0), this.on(".id-closeButton", d.MouseEventEx.CLICK, function() {
                    e.dispatch(o.hide())
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = _.map(_.range(1, 11), String);
                this.addChildBinder(".ColumnList .id-columnListItem", l.CollectionBinder, {
                    instanceBinder: m.bindText
                }).applyCollection(t);
                var i = _.map(s.Part.PartTypes, function(e, t) {
                    return "PARTS_INVENTORY_PARTS_TYPE_FILTER_" + (t + 1)
                });
                this.addChildBinder(".RowList .id-rowListItem", l.CollectionBinder, {
                    instanceBinder: function(t, i) {
                        return m.bindText(t, e.$filter("translate")(i))
                    }
                }).applyCollection(i), this.addChildBinder(".ClassList .id-classListItem", l.CollectionBinder, {
                    instanceBinder: m.bindText
                }).applyCollection(s.Vehicle.ClassTypes), this.buttonGroup = new f.ButtonGroup("ClassList"), _.each(this.face.$$(".ClassList .id-classListItem"), function(t, i) {
                    e.addManagedListener(t, v.EventEx.SELECT, function() {
                        t.selected && e.dispatch(o.setClassType(s.Vehicle.ClassTypes[i]))
                    }), t.toggle = !0, e.buttonGroup.addButton(t)
                }), this.materialListBinder = this.addChildBinder(".MaterialList .id-materialListItem", l.CollectionBinder, {
                    instanceBinder: p.PartsMaterialBinder
                }), this.partsListBinder = this.addChildBinder(".PartsList .id-partsListItem", l.CollectionBinder, {
                    instanceBinder: h.InventoryPartsBinder
                }), this.on(this.face, "stop", function() {
                    var t = "show" !== e.face.currentLabel;
                    e.classNames(".PartsList", t ? "prevent-click" : ""), e.classNames(".MaterialList", t ? "prevent-click" : "")
                })
            }, t.prototype.onDetach = function() {
                this.dispatch(o.reset()), this.dispatch(a.resume("parts-inventory"))
            }, t.prototype.updatePartsListEnable = function() {
                var e = this,
                    t = _.isEmpty(this.disableTags);
                this.partsListBinder.binders.forEach(function(i) {
                    e.enableButton(i.face, t)
                })
            }, t.prototype.enablePartsList = function(e) {
                this.disableTags = _.difference(this.disableTags, [e]), this.updatePartsListEnable()
            }, t.prototype.disablePartsList = function(e) {
                this.disableTags = _.union(this.disableTags, [e]), this.updatePartsListEnable()
            }, t.prototype.showPartsInventory = function(e) {
                var t = this.face;
                e ? (this.enablePartsList("show"), this.dispatch(a.pause("parts-inventory")), this.gotoAndPlay(t, "show", !0)) : (this.disablePartsList("show"), this.dispatch(a.resume("parts-inventory")), "hide" !== t.currentLabel && (this.gotoAndPlay(t, "hide"), this.playerService.markPartsAsChecked()))
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.playerState,
                    n = e.partsState,
                    a = e.partsInventoryState,
                    c = e.partsCombineState,
                    d = a.visible,
                    l = a.classType,
                    u = a.animation,
                    p = n.parts;
                if (void 0 !== d) {
                    if (d !== this.reduxProps.partsInventoryState.visible && this.showPartsInventory(d), d)
                        if (u) {
                            var h = _.find(this.partsListBinder.binders.concat(this.materialListBinder.binders), function(e) {
                                return u.code === e.getProps().code
                            });
                            if (this.disablePartsList("anim"), h) {
                                var f = h.face;
                                this.once(f, v.EventEx.STOP, function() {
                                    f.customState = void 0, t.dispatch(o.resetAnimation()), t.enablePartsList("anim")
                                }), f.customState = "success"
                            }
                        } else if (l && !c.crafting) {
                        r.info("Processing Class: " + l);
                        var m = new Date(Date.parse(i.checkedat.part)),
                            g = _(this.partsService.partsMaterialDataArray).filter({
                                clazz: l
                            }).map(function(e, t) {
                                return _.assign({}, e, {
                                    resource: p[e.code],
                                    checkedAt: m,
                                    index: t,
                                    slotType: "inventory"
                                })
                            }).value();
                        this.materialListBinder.applyCollection(g);
                        var y = this.staticdata.partsCombineData,
                            S = _(this.partsService.partsItemDataArray).filter({
                                clazz: l
                            }).sortBy("code").map(function(e, t) {
                                var i = y[e.code],
                                    n = i ? p[i.materialCode] : void 0;
                                return _.defaults({
                                    resource: p[e.code],
                                    material: n,
                                    craftable: !0,
                                    slotType: "inventory",
                                    checkedAt: m,
                                    index: t
                                }, e)
                            }).value();
                        this.partsListBinder.applyCollection(S);
                        var E = _.indexOf(s.Vehicle.ClassTypes, l);
                        this.buttonGroup.selectedIndex !== E && (this.buttonGroup.setSelectedButtonByIndex(E), _.forEach(this.partsMaterialTweens, function(e) {
                            e.kill()
                        }), this.partsMaterialTweens = _.map(this.materialListBinder.binders, function(e) {
                            return e.face.addCustomFromToTween(.4, {
                                flash: {
                                    alpha: 0,
                                    xOffset: 40
                                }
                            }, {
                                flash: {
                                    alpha: 1,
                                    xOffset: 0
                                },
                                delay: .4,
                                ease: Power4.easeInOut
                            })
                        }), _.forEach(this.partsItemTweens, function(e) {
                            e.kill()
                        }), this.partsItemTweens = _.map(this.partsListBinder.binders, function(e, t) {
                            return e.face.addCustomFromToTween(.4, {
                                flash: {
                                    alpha: 0,
                                    xOffset: 40
                                }
                            }, {
                                flash: {
                                    alpha: 1,
                                    xOffset: 0
                                },
                                delay: t % 10 / 30,
                                ease: Power4.easeInOut
                            })
                        }))
                    }
                }
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    partsState: e.parts,
                    playerState: e.player,
                    partsInventoryState: e.partsInventory,
                    partsCombineState: e.partsCombine
                }
            }, t
        }(u.StageBinder);
    n.__decorate([c.autowired("$filter")], g.prototype, "$filter", void 0), n.__decorate([c.autowired("staticdataLoaderService")], g.prototype, "staticdata", void 0), n.__decorate([c.autowired("playerService")], g.prototype, "playerService", void 0), n.__decorate([c.autowired("partsService")], g.prototype, "partsService", void 0), t.VehiclesPartsInventoryBinder = g
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(1),
        a = i(2),
        s = i(172),
        c = i(627),
        d = i(16),
        l = i(158),
        u = i(238),
        p = i(8),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-productionTitle", "MATERIALCOMBINE_TITLE"), this.translate(".id-productionButton .id-buttonName", "MATERIALCOMBINE_BTN_OK"), this.translate(".id-cancelButton .id-buttonName", "MATERIALCOMBINE_BTN_CANCEL"), this.on(".id-productionButton", a.MouseEventEx.CLICK, function() {
                    e.current > 0 ? e.partsService.craft(e.code, e.current).then(function() {
                        e.gotoAndPlay(e.face, "production"), e.dispatch(u.setClassType(r.Vehicle.ClassTypes[e.targetMaterialClass - 1]))
                    }).catch(function(t) {
                        e.errorPopup()
                    }) : e.errorPopup()
                }), this.on(".id-cancelButton", a.MouseEventEx.CLICK, function() {
                    e.hide()
                }), this.enableButton(".id-upButton", !0), this.enableButton(".id-downButton", !1), this.on(".id-upButton", a.MouseEventEx.CLICK, function() {
                    return e.increase()
                }), this.on(".id-downButton", a.MouseEventEx.CLICK, function() {
                    return e.decrease()
                }), this.on(".id-confirmButton", a.MouseEventEx.CLICK, function() {
                    e.hide(), e.gotoAndPlay(e.face, "production_out"), e.once(e.face, p.EventEx.STOP, function() {
                        e.dispatch(u.animate(e.targetMaterialCode))
                    })
                }), this.translate(".id-confirmButton", "MATERIALCOMBINE_RESULT_BTN_OK"), this.on(".id-countTextInput .id-textFieldContainer", s.KeyboardEventEx.KEY_UP, function() {
                    var t = e.convertFace(".id-countTextInput .id-textFieldContainer").text,
                        i = t.replace(/[^0-9]/g, ""),
                        n = i ? parseInt(i, 10) : 0;
                    n > e.max && (n = e.max), e.bindText(".id-countTextInput .id-textFieldContainer", n), e.dispatch(c.setCurrent(n))
                }), this.on(".id-countTextInput .id-textFieldContainer", a.MouseEventEx.CLICK, function() {
                    $(e.getFace(".id-countTextInput .id-textFieldContainer .id-textField").htmlElement).select()
                })
            }, t.prototype.hide = function() {
                this.dispatch(c.hide()), this.dispatch(l.hide())
            }, t.prototype.update = function(e) {
                if (e.partsMaterial) {
                    var t = e.partsMaterial,
                        i = t.code,
                        n = t.resource;
                    if (this.reduxProps.show !== e.show && this.gotoAndPlay(this.face, e.show ? "in" : "out"), i) {
                        this.code = i, this.current = e.current;
                        var o = n.count,
                            a = this.staticdataLoaderService.partsMaterialData[i];
                        this.targetMaterialClass = r.Vehicle.VehicleClassEnum[a.clazz] - 1;
                        var s = a.combine,
                            c = s.targetCode,
                            d = s.requiredCount;
                        this.targetMaterialCode = c, this.requiredCount = d, this.max = parseInt(Number(o / d).toString(), 1 / d), this.enableButton(".id-upButton", this.current < this.max), this.enableButton(".id-downButton", this.current > 1), this.translate(".id-materialBeforeTitle", "PARTS_" + i + "_NAME"), this.drawExternalImage(".id-materialSlotBefore .id-partsImage", this.$filter("cdn_material")(a.code)), this.translate(".id-materialAfterTitle", "PARTS_" + c + "_NAME"), this.drawExternalImage(".id-materialSlotAfter .id-partsImage", this.$filter("cdn_material")(c));
                        var l = this.$filter("translate")("PARTS_" + c + "_NAME");
                        this.template(".id-questionLabel", "MATERIALCOMBINE_NOTI_MSG_01", {
                            current: this.current,
                            name: l
                        }), this.translate(".id-descLabel", "MATERIALCOMBINE_NOTI_MSG_02"), this.drawExternalImage(".id-materialSlotResult > .id-partsImage", this.$filter("cdn_material")(c)), this.bindText(".id-materialSlotResult .CountNumLabel", e.current), this.drawExternalImage(".id-restMaterialSlot > .id-materialImage", this.$filter("cdn_material")(e.partsMaterial.code)), this.bindText(".id-restMaterialSlot .RestCountNumLabel", o - e.current * d), this.template(".id-resultTitle", "MATERIALCOMBINE_RESULT_MSG", {
                            name: l,
                            current: e.current
                        }), this.translate(".id-resultDescription", "MATERIALCOMBINE_RESULT_CAUTION"), this.translate(".id-restMaterialTitleLabel", "MATERIALCOMBINE_RESULT_REMANENT"), o && (this.bindHtml(".id-materialSlotBefore > .id-countNumLabel", '<span style="color: #15CF57">' + o + "</span> / " + d), this.bindHtml(".id-materialSlotAfter > .id-countNumLabel", "" + this.current)), this.translate(".id-countTitle", "MATERIALCOMBINE_COUNT_TITLE"), this.template(".id-countDescription", "MATERIALCOMBINE_COUNT_MSG", {
                            count: d
                        }), this.translate(".id-countTextInput .id-textFieldContainer", "" + e.current), this.translate(".id-countTextInput .id-max", "/" + this.max)
                    }
                }
            }, t.prototype.mapStateToProps = function(e) {
                return e.partsMaterialProductionState
            }, t.prototype.increase = function() {
                this.current < this.max && this.dispatch(c.increase())
            }, t.prototype.decrease = function() {
                this.current >= 1 && this.dispatch(c.decrease())
            }, t.prototype.errorPopup = function() {
                var e = this,
                    t = this.$filter("template")({
                        count: this.requiredCount
                    }, "MATERIALCOMBINE_ERRORPOPUP_MSG");
                this.popupService.draw("ConfirmPopup", {
                    title: "MATERIALCOMBINE_ERRORPOPUP_TITLE",
                    description: t,
                    confirm: function() {
                        return e.hide()
                    }
                })
            }, t
        }(o.StageBinder);
    n.__decorate([d.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([d.autowired("popupService")], h.prototype, "popupService", void 0), n.__decorate([d.autowired("partsService")], h.prototype, "partsService", void 0), n.__decorate([d.autowired("staticdataLoaderService")], h.prototype, "staticdataLoaderService", void 0), t.VehiclesPartsMaterialProductionBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(1381),
        r = i(3),
        o = i(161),
        a = i(11);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new a.StateDefinition("/production", 7).container({
            stages: {
                "vehicle-production": n.ProductionBinder
            },
            resolve: {
                blueprints: ["blueprintService", function(e) {
                    return e.fetch()
                }],
                fetchPrice: ["vehiclePriceDataService", function(e) {
                    var t = r.store.getState().production.vehicles;
                    e.getLatestPriceData(t).then(function(e) {
                        return r.store.dispatch(o.updatePrices(e))
                    })
                }]
            }
        });
        e.state("root.menu.Production", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(161),
        o = i(3),
        a = i(1),
        s = i(1382),
        c = i(1384),
        d = i(1385),
        l = i(1386),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.productionListBinder = this.addChildBinder(".id-garagePhotoListContainer", c.ProductionListBinder), this.productionInfoBinder = this.addChildBinder(".id-garageVehicleDetail", s.ProductionInfoBinder), this.productionVehicleBinder = this.addChildBinder(".id-vehicleProductionButtonContainer", d.ProductionVehicleBinder), this.productionFilterBinder = this.addChildBinder(".id-filterAndSort", l.ProductionFilterBinder), this.transitionHookCleanup = this.$transitions.onSuccess({}, function(t) {
                    var i = t.$from().name,
                        n = t.$to().name;
                    "root.menu.Production.ProductionScene" === n ? e.face.visible = !1 : "root.menu.Production.ProductionScene" === i && "root.menu.Production" === n && (e.face.visible = !0, e.productionInfoBinder.resetSelection(), e.productionInfoBinder.setProps(e.reduxProps), e.productionListBinder.setProps(e.reduxProps), e.productionVehicleBinder.setProps(e.reduxProps))
                })
            }, t.prototype.onAddedToScene = function() {
                this.externalService.camera.production()
            }, t.prototype.update = function(e) {
                this.productionInfoBinder.setProps(e), this.productionListBinder.setProps(e), this.productionVehicleBinder.setProps(e), this.productionFilterBinder.setProps(e)
            }, t.prototype.onDetach = function() {
                this.transitionHookCleanup(), o.store.dispatch(r.removeFilter())
            }, t.prototype.mapStateToProps = function(e) {
                return e.production
            }, t
        }(a.StageBinder);
    n.__decorate([a.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([a.autowired("$transitions")], u.prototype, "$transitions", void 0), t.ProductionBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(46),
        a = i(1383),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-vehicleValueTitle", "GARAGE_PRODUCTION_VEHICLEPRICEINFO"), this.vehicleDetailBinder = this.addChildBinder(this.face, a.VehicleDetailBinder), this.blueprintGauge = this.addChildBinder(".id-blueprintGauge", o.ProgressBinder, {
                    label: "ITEMTYPE_BLUEPRINT",
                    layoutPosition: "relative",
                    useOldStyleProgress: !0,
                    duration: .7,
                    swapGauge: !0
                })
            }, t.prototype.resetSelection = function() {
                this.selectedCode = void 0
            }, t.prototype.update = function(e) {
                if (e.selectedVehicle && this.selectedCode !== e.selectedVehicle) {
                    this.selectedCode = e.selectedVehicle, this.vehicle = _.find(e.vehicles, {
                        code: this.selectedCode
                    }), this.externalService.beSelectVehicle(this.vehicle);
                    var t = this.vehicle;
                    this.vehicleDetailBinder.setProps({
                        vehicle: t
                    });
                    var i = this.$util.getBlueprintCount(this.vehicle.code),
                        n = this.$util.getBlueprintRequirements(this.vehicle.code);
                    this.blueprintGauge.setProps({
                        value: i,
                        displayValue: i + " / " + n,
                        max: n,
                        min: 0,
                        useOldStyleProgress: !0,
                        duration: .7,
                        swapGauge: !0
                    })
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([r.autowired("$util")], s.prototype, "$util", void 0), n.__decorate([r.autowired("externalService")], s.prototype, "externalService", void 0), t.ProductionInfoBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(62),
        o = i(46),
        a = i(164),
        s = i(82),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.statusList = this.addChildBinder(".id-statusIndicatorContainer .id-statusIndicatorProgressBar", r.CollectionBinder, {
                    instanceBinder: o.ProgressBinder
                }), e.prototype.onFaceReady.call(this)
            }, t.prototype.update = function(t) {
                if (e.prototype.update.call(this, t), !_.isEmpty(t)) {
                    var i = t.vehicle;
                    if (i) {
                        var n = _.map(s.StatusNames, function(e, n) {
                            return {
                                label: "STATUS_" + e.toUpperCase(),
                                value: i.status[e] || i.status[s.OldStatusNames[n]],
                                max: 2e3,
                                duration: .7,
                                useOldStyleProgress: t.progressUseOldStyleProgress,
                                layoutPosition: t.progressLayoutPosition
                            }
                        });
                        this.statusList.applyCollection(n)
                    }
                }
            }, t
        }(a.VehicleBinder);
    t.VehicleDetailBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(161),
        o = i(1),
        a = i(56),
        s = i(2),
        c = i(3),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.pageIndex = 0, t.pageSize = 0, t.vehicles = [], t.isPaging = !1, t.filterState = {}, t.currentListBinder = [], t.nextListBinder = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                _.times(7, function(t) {
                    var i = e.getFace(".id-current" + (t + 1)),
                        n = e.getFace(".id-next" + (t + 1));
                    e.currentListBinder.push(e.addChildBinder(i, a.VehicleCard)), e.nextListBinder.push(e.addChildBinder(n, a.VehicleCard)), e.on(i, s.MouseEventEx.CLICK, e.onClick.bind(e, t))
                }), this.pagingContainer = this.getFace(".id-garagePhotoList"), this.pagingContainer.hasSize = !0, this.prevButton = this.getFace(".id-previousButton"), this.nextButton = this.getFace(".id-nextButton"), this.firstButton = this.getFace(".id-firstButton"), this.lastButton = this.getFace(".id-lastButton"), this.indicatorContainer = this.getFace(".id-pageNumberContainer"), this.currentIndicator = this.getFace(".id-currentPage"), this.setUpPagingFlow(), this.setUpPageNumberListener()
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                setTimeout(function() {
                    return e.onClick(0)
                })
            }, t.prototype.setUpPagingFlow = function() {
                var e = this;
                this.on(this.prevButton, s.MouseEventEx.CLICK, function() {
                    t(e.pageIndex - 1, "previous")
                }), this.on(this.nextButton, s.MouseEventEx.CLICK, function() {
                    t(e.pageIndex + 1, "next")
                }), this.on(this.lastButton, s.MouseEventEx.CLICK, function() {
                    t(e.chunkedVehicles.length - 1, "last")
                }), this.on(this.firstButton, s.MouseEventEx.CLICK, function() {
                    t(0, "first")
                });
                var t = function(t, i) {
                    e.movePage(t, i)
                };
                this.on(this.pagingContainer, "reset", function(t) {
                    e.gotoAndPlay(e.pagingContainer, "default"), e.isPaging = !1
                }), this.wheelHandler = _.throttle(function(t) {
                    if (!e.isPaging) {
                        var i = Math.max(-1, Math.min(1, t.wheelDelta || -t.detail));
                        1 === i && 0 !== e.pageIndex ? e.movePage(e.pageIndex - 1, "previous") : -1 === i && e.pageIndex !== e.chunkedVehicles.length - 1 && e.movePage(e.pageIndex + 1, "next")
                    }
                }, 600, {
                    trailing: !1
                }), this.pagingContainer.htmlElement.addEventListener("mousewheel", this.wheelHandler, {
                    passive: !0
                })
            }, t.prototype.setUpPageNumberListener = function() {
                var e = this,
                    t = function(t, i) {
                        e.movePage(t, i)
                    };
                [{
                    num: 2,
                    action: "first"
                }, {
                    num: 3,
                    action: "previous"
                }, {
                    num: 5,
                    action: "next"
                }, {
                    num: 6,
                    action: "last"
                }].forEach(function(i) {
                    var n = i.num - 4,
                        r = e.getFace(".id-curr" + i.num);
                    e.on(r, s.MouseEventEx.CLICK, function() {
                        t(e.pageIndex + n, i.action)
                    })
                }), this.on(this.indicatorContainer, "reset", function(t) {
                    e.setPageIndicatorsNumber("default"), e.disposePageButton(), e.gotoAndPlay(e.indicatorContainer, "default")
                })
            }, t.prototype.update = function(e) {
                this.vehicles = e.vehicles;
                var t = e.filterState || {};
                _.isEqual(this.filterState, t) || (this.pageIndex = 0), this.filterState = t, this.initVehicleList()
            }, t.prototype.initVehicleList = function() {
                var e = this.sort(this.filterProducible(this.filterManufacturer(this.vehicles)));
                this.chunkedVehicles = _.chunk(e, 7), this.pageSize = this.chunkedVehicles.length, this.isPaging = !1, this.bindCurrentList(this.pageIndex), this.setPageIndicatorsNumber("default"), this.disposePageButton()
            }, t.prototype.bindCurrentList = function(e) {
                var t = c.store.getState().production.selectedVehicle,
                    i = this.chunkedVehicles[e] || [];
                this.currentListBinder.forEach(function(e, n) {
                    var r = i[n],
                        o = r ? r.code === t : void 0;
                    e.setProps({
                        vehicle: r,
                        multiline: !0,
                        selected: o,
                        fixedProgressbar: !0
                    })
                })
            }, t.prototype.bindNextList = function(e) {
                var t = this.chunkedVehicles[e];
                t && this.nextListBinder.forEach(function(e, i) {
                    var n = t[i];
                    e.setProps({
                        vehicle: n,
                        multiline: !0,
                        fixedProgressbar: !0
                    })
                })
            }, t.prototype.setPageNumber = function(e, t, i) {
                var n = 0 <= t && t < this.pageSize,
                    r = this.indicatorContainer.$(".id-" + i + e);
                r && (r.enabled = n, this.bindText(r.$(".id-buttonName"), n ? t + 1 : ""))
            }, t.prototype.setPageNumbers = function(e, t) {
                this.setPageNumber(4, e, t);
                for (var i = 1; i < 4; i++) this.setPageNumber(4 - i, e - i, t), this.setPageNumber(4 + i, e + i, t)
            }, t.prototype.setPageIndicatorsNumber = function(e) {
                switch (this.setPageNumbers(this.pageIndex, "curr"), e) {
                    case "default":
                        this.bindText(this.currentIndicator.$(".id-current"), this.pageIndex + 1), this.setPageNumbers(this.pageIndex, "num");
                        break;
                    case "first":
                    case "last":
                        this.setPageNumbers("first" === e ? this.pageIndex + 1 : this.pageIndex - 1, "num")
                }
            }, t.prototype.filterManufacturer = function(e) {
                var t = this;
                return _.filter(e, function(e) {
                    var i = t.filterState.manufacturerCode || 0;
                    return !(0 !== i) || e.manufacturerCode === i
                })
            }, t.prototype.filterProducible = function(e) {
                var t = this;
                return _.filter(e, function(e) {
                    return !("PRODUCIBLE" === t.filterState.producibleFilter) || t.$util.isProducible(e.code)
                })
            }, t.prototype.sort = function(e) {
                return this.$util.applyProductionSorter(e, this.filterState.sortKey || ["default"]), e
            }, t.prototype.onClick = function(e) {
                if (!this.currentListBinder[e].face.selected) {
                    this.selectedIndex = e, this.currentListBinder.forEach(function(e) {
                        var t = e.face;
                        t.selected && (t.selected = !1)
                    }), this.currentListBinder[e].face.selected = !0;
                    var t = this.chunkedVehicles[this.pageIndex][e];
                    c.store.dispatch(r.selectVehicle(t.code))
                }
            }, t.prototype.onDetach = function() {
                this.pagingContainer.htmlElement.removeEventListener("mousewheel", this.wheelHandler)
            }, t.prototype.movePage = function(e, t) {
                var i = this;
                if (!this.isPaging && !(e < 0 || this.pageSize <= e || this.pageIndex === e)) {
                    this.isPaging = !0, this.pageIndex = e, this.prevButton.enabled = this.nextButton.enabled = this.lastButton.enabled = this.firstButton.enabled = !1, this.bindNextList(e);
                    var n = t;
                    "first" === t && (n = "previous"), "last" === t && (n = "next"), this.gotoAndPlay(this.pagingContainer, n), this.gotoAndPlay(this.indicatorContainer, t), this.setPageIndicatorsNumber(t), setTimeout(function() {
                        i.bindCurrentList(i.pageIndex), i.currentListBinder[i.selectedIndex].face.selected = !1
                    }, 100)
                }
            }, t.prototype.disposePageButton = function() {
                this.prevButton.enabled = this.firstButton.enabled = 0 !== this.pageIndex, this.nextButton.enabled = this.lastButton.enabled = this.pageIndex !== this.chunkedVehicles.length - 1
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$util")], d.prototype, "$util", void 0), t.ProductionListBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(1),
        a = i(3),
        s = i(2),
        c = i(161),
        d = i(4),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this.getFace(".id-vehicleProduction");
                this.translate(e, "GARAGE_VEHICLE_PRODUCTION"), this.translate(".id-commissionTitle", "VEHICLE_PRODUCTION_PRICE"), this.on(e, s.MouseEventEx.CLICK, this.produce.bind(this))
            }, t.prototype.update = function(e) {
                var t = e.selectedVehicle || e.vehicles[0].code;
                this.vehicle = _.find(e.vehicles, {
                    code: t
                }), this.getFace(".id-vehicleProduction").enabled = this.isProducible(), this.bindText(".id-value", d.default.toMoney(this.$util.getRequiredSp(t))), this.translate(".id-sp", "COMMON_VEHICLEVALUEUNIT"), this.translate(".id-alertText", this.getAlertText())
            }, t.prototype.isProducible = function() {
                var e = this.$util.isProducible(this.vehicle.code),
                    t = this.vehicleService.hasEmptyVehicleSlot();
                return e && t && this.isAffordable()
            }, t.prototype.isAffordable = function() {
                return a.store.getState().player.sp >= this.$util.getRequiredSp(this.vehicle.code)
            }, t.prototype.isEnoughBlueprint = function() {
                var e = this.vehicle.code;
                return this.$util.getBlueprintCount(e) >= this.$util.getBlueprintRequirements(e)
            }, t.prototype.getAlertText = function() {
                return this.vehicleService.hasEmptyVehicleSlot() ? this.isEnoughBlueprint() ? this.isAffordable() ? "" : "VEHICLE_PRODUCTION_EXCEPTION3" : "VEHICLE_PRODUCTION_EXCEPTION2" : "VEHICLE_PRODUCTION_EXCEPTION1"
            }, t.prototype.produce = function() {
                var e = this;
                this.popupService.draw("VehicleProductionConfirmPopup", {
                    popupTitle: "GARAGE_VEHICLE_PRODUCTIONTITLE",
                    title: "VEHICLE_PRODUCTION_CONFIRM",
                    description: "VEHICLE_PRODUCTION_DESC",
                    confirm: function() {
                        e.vehicleService.createVehicle(e.vehicle.code).then(function(t) {
                            var i = _.assign({}, t);
                            a.store.dispatch(c.productVehicle({
                                code: i.code,
                                color: i.paint.colorCode
                            })), e.stateService.go("root.menu.Production.ProductionScene"), e.externalService.camera.revealStart(), e.externalService.beSelectVehicle(i)
                        }).catch(function(e) {
                            r.warn("Production failed! - ", e)
                        })
                    },
                    selectedVehicle: this.vehicle,
                    consumeNum: this.$util.getBlueprintRequirements(this.vehicle.code),
                    commission: this.$util.getRequiredSp(this.vehicle.code)
                })
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$util")], l.prototype, "$util", void 0), n.__decorate([o.autowired("vehicleService")], l.prototype, "vehicleService", void 0), n.__decorate([o.autowired("popupService")], l.prototype, "popupService", void 0), n.__decorate([o.autowired("externalService")], l.prototype, "externalService", void 0), n.__decorate([o.autowired("stateService")], l.prototype, "stateService", void 0), t.ProductionVehicleBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(161),
        o = i(1),
        a = i(8),
        s = i(3),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.vehicles = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.manufacturerFilter = this.convertFace(".id-filterDropdown1"), this.producibleFilter = this.convertFace(".id-filterDropdown2"), this.sorter = this.convertFace(".id-sortDropdown"), this.manufacturerFilter.on(a.EventEx.CHANGE, this.applyChanges.bind(this)), this.producibleFilter.on(a.EventEx.CHANGE, this.applyChanges.bind(this)), this.sorter.on(a.EventEx.CHANGE, this.applyChanges.bind(this)), this.manufacturerFilter.isDropUp = !0, this.producibleFilter.isDropUp = !0, this.sorter.isDropUp = !0
            }, t.prototype.update = function(e) {
                this.vehicles = e.vehicles, this.manufacturerFilter.items = this.getGroupedByManufacturer(this.vehicleDataService.getVehiclesData()), this.producibleFilter.items = this.getProducibleFilter(), this.sorter.items = this.getSortItems(), e.filterState && (this.manufacturerFilter.selectedIndex = _.findIndex(this.manufacturerFilter.items, function(t) {
                    return t.value === e.filterState.manufacturerCode
                }), this.producibleFilter.selectedIndex = _.findIndex(this.producibleFilter.items, function(t) {
                    return t.value === e.filterState.producibleFilter
                }))
            }, t.prototype.applyChanges = function() {
                var e = this.sorter.selectedIndex;
                s.store.dispatch(r.changeFilter({
                    manufacturerCode: this.manufacturerFilter.selectedItem.value,
                    producibleFilter: this.producibleFilter.selectedItem.value,
                    sortKey: this.getSortItems()[e].type
                }))
            }, t.prototype.getGroupedByManufacturer = function(e) {
                var t = this,
                    i = _.countBy(e, function(e) {
                        return e.manufacturerCode
                    });
                return [{
                    text: this.$filter("translate")("ALL_MANUFACTURER") + " (" + e.length + ")",
                    value: 0
                }].concat(_.map(i, function(e, i) {
                    return {
                        text: t.$filter("manufacturerName")(i) + " (" + e + ")",
                        value: parseInt(i, 10)
                    }
                }))
            }, t.prototype.getProducibleFilter = function() {
                return [{
                    text: this.$filter("translate")("COMMON_FILTER_ALLSTATE"),
                    value: "ALL"
                }, {
                    text: this.$filter("translate")("MANUFACTURABLE_VEHICLES"),
                    value: "PRODUCIBLE"
                }]
            }, t.prototype.getSortItems = function() {
                return [{
                    text: this.$filter("translate")("COMMON_SORTER_PRODUCTIONSTATE"),
                    type: ["default"]
                }, {
                    text: this.$filter("translate")("COMMON_SORTER_VEHICLEVALUE"),
                    type: ["price"]
                }, {
                    text: this.$filter("translate")("COMMON_SORTER_VEHICLECLASS"),
                    type: ["class"]
                }, {
                    text: this.$filter("translate")("COMMON_SORTER_VEHICLEOVR"),
                    type: ["ovr"]
                }]
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([o.autowired("vehicleDataService")], c.prototype, "vehicleDataService", void 0), t.ProductionFilterBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1388);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/production-scene", 8).dialog({
            stages: {
                "vehicle-production-scene": r.ProductionSceneBinder
            },
            resolve: {
                _vehicleData: ["vehicleService", function(e) {
                    return e.fetch()
                }]
            }
        });
        e.state("root.menu.Production.ProductionScene", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(9),
        a = i(53),
        s = i(302),
        c = i(2),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.visible = !0, this.translate(".PressAnyKeyContainer", "GARAGE_PRODUCTION_INFO"), this.translate(".id-confirmButton", "PRODUCTION_PRODUCTIONDONE"), this.addManagedOnceListener(this.externalService, o.default.beRevealShowInfo, function() {
                    e.playAction(2)
                }), this.addManagedOnceListener(this.externalService, o.default.beRevealEnded, function() {
                    e.stateService.go("root.menu.Production", {
                        vehicle: e.vehicle
                    })
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.dispatch(a.hide()), this.dispatch(s.hide()), this.externalService.isEdgeBrowser() || this.playAction(2), this.on(".id-confirmButton", c.MouseEventEx.CLICK, function() {
                    return e.goNext()
                }), this.goNextHandler = function() {
                    return e.goNext()
                }, $(window).one("keydown click", this.goNextHandler)
            }, t.prototype.update = function(e) {
                var t = e.productionVehicle,
                    i = this.vehicleDataService.getVehicleData(t.code);
                this.vehicle = n.__assign({}, i, {
                    color: t.color
                }), this.bindVehicleInfo()
            }, t.prototype.bindVehicleInfo = function() {
                this.gotoAndPlay(".id-manufacturerGradeContainer", 2), this.bindText(".ManufacturerName", this.$filter("manufacturerName")(this.vehicle.manufacturerCode)), this.bindText(".VehicleName", this.$filter("vehicleName")(this.vehicle.code)), this.bindText(".VehicleClass", this.vehicle.clazz), this.bindText(".id-ovr", this.vehicle.ovr + ""), this.translate(".PressAnyKey", "GARAGE_PRODUCTION_INFO")
            }, t.prototype.playAction = function(e) {
                this.gotoAndPlay(this.face, e), this.gotoAndPlay(".id-manufacturerGradeContainer", e)
            }, t.prototype.goNext = function() {
                this.face.visible = !1, this.externalService.camera.revealEnd(), this.externalService.isEdgeBrowser() || this.stateService.go("root.menu.Production", {
                    vehicle: this.vehicle
                }), $(window).off("keydown click", this.goNextHandler)
            }, t.prototype.onDetach = function() {
                this.dispatch(a.show())
            }, t.prototype.mapStateToProps = function(e) {
                return e.production
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("stateService")], d.prototype, "stateService", void 0), n.__decorate([r.autowired("vehicleDataService")], d.prototype, "vehicleDataService", void 0), t.ProductionSceneBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(63),
        r = i(12),
        o = i(11),
        a = i(3),
        s = i(1390);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new o.StateDefinition("/vehicle-upgrade", 6).container({
            stages: {
                "vehicle-upgrade": s.VehicleUpgradeStageBinder
            },
            resolve: {
                vehicles: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                players: ["playerService", function(e) {
                    return e.fetch()
                }],
                fetchPrice: ["vehiclePriceDataService", function(e) {
                    e.getLatestPriceData(r.getOwnVehicles()).then(function(e) {
                        return a.store.dispatch(n.updatePrices(e))
                    })
                }]
            }
        });
        e.state("root.menu.VehicleUpgrade", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(22),
        o = i(63),
        a = i(9),
        s = i(1),
        c = i(1391),
        d = i(37),
        l = i(12),
        u = i(82),
        p = i(3),
        h = i(1392),
        f = i(1393),
        v = i(81),
        m = i(240),
        g = i(1394),
        y = i(1395),
        S = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.vehicleSelector = new y.VehicleSelector(this.externalService, this.tuningShopService), this.effectBinder = this.addChildBinder(".CardsUpgradeSceneContainer", c.UpgradeEffectBinder), this.cardSelectBinder = this.addChildBinder(".SelectInfo", h.UpgradeSelectBinder, {
                    vehicleSelector: this.vehicleSelector
                }), this.vehiclesListBinder = this.addChildBinder(this.face, f.UpgradableVehiclesListBinder), this.translate(".NotEnough .id-title", "UPGRADE_NOVEHICLE_TITLE"), this.translate(".NotEnough .id-description", "UPGRADE_NOVEHICLE_TEXT"), this.translate(".noticeTextContainer .id-textField", "UPGRADE_GUIDETEXT")
            }, t.prototype.showEnterEffect = function() {
                this.externalService.camera.upgrade(), this.externalService.beSetVehicleUpgradeState(c.CoreState.Enter);
                var e = l.getRecentVehicle();
                this.fromVehicles && this.vehicleSelector.alreadySelected(e);
                var t = this.hasUpgradables ? this.upgradableList[0].base() : e;
                this.vehicleSelector.select(t)
            }, t.prototype.onAddedToScene = function() {
                this.updateUpgradableVehicleList(), this.showEnterEffect(), this.hasUpgradables && this.init(), this.setUpgrading(!1)
            }, t.prototype.onStageInitialize = function(t) {
                this.fromVehicles = "root.menu.Vehicles" === t, e.prototype.onStageInitialize.call(this, t)
            }, t.prototype.updateUpgradableVehicleList = function() {
                var e = this,
                    t = r.filter(l.getOwnVehicles(), function(e) {
                        return e.grade < 10
                    }),
                    i = r(t).groupBy(function(e) {
                        return e.code
                    }).filter(function(e) {
                        return e.length >= 2
                    }).map(function(e) {
                        return r.sortBy(e, function(e) {
                            return u.MaxGrade - e.grade
                        })
                    }).value();
                g.UpgradableVehicle.nameFilter = this.$filter("vehicleName");
                var n = i.sort(g.UpgradableVehicle.compareVehicles),
                    o = r.map(n, function(t) {
                        return {
                            defTuning: e.vehicleDataService.getDefaultTuningData(t[0].code),
                            vehicles: t
                        }
                    });
                this.upgradableList = g.UpgradableVehicle.generateUpgradableVehicles(o), this.hasUpgradables = !!this.upgradableList.length
            }, t.prototype.init = function() {
                var e = this,
                    t = $(this.getFace(".id-garagePhotoListContainer").htmlElement).addClass("prevent-click");
                this.externalService.once(a.default.beWaitingRoomFeedbackCameraWork, function() {
                    t.removeClass("prevent-click");
                    var i = e.upgradableList[0].base().code;
                    p.store.dispatch(m.pickVehicle(i)), e.vehiclesListBinder.setProps({
                        vehicles: e.upgradableList,
                        picked: i
                    })
                }), this.audioService.get(d.FxAudioCode.Cards_In).play()
            }, t.prototype.isUpgradable = function(e) {
                return !!e && e.length() >= 2
            }, t.prototype.setUpgrading = function(e) {
                this.cardSelectBinder.face.visible = !e && this.hasUpgradables, this.getFace(".NotEnough").visible = !e && !this.hasUpgradables, this.getFace(".id-transparentBg").visible = !e, this.getFace(".id-garagePhotoListContainer").visible = !e && this.hasUpgradables, this.gotoAndPlay(this.face, this.hasUpgradables ? "possible" : "impossible", !0)
            }, t.prototype.afterUpgrade = function(e) {
                var t = this.getPicked(e),
                    i = this.isUpgradable(t);
                if (!l.getRecentVehicle().id && this.dispatch(o.select(this.upgraded.id)), !i && !this.upgradableList.length) {
                    this.hasUpgradables = !1;
                    var n = l.getRecentVehicle();
                    return void this.vehicleSelector.select(n)
                }
                if (i) return p.store.dispatch(m.pickVehicle(e)), void this.vehiclesListBinder.setProps({
                    vehicles: this.upgradableList,
                    picked: e
                });
                e = this.upgradableList[0].base().code, p.store.dispatch(m.pickVehicle(e)), this.vehiclesListBinder.setProps({
                    vehicles: this.upgradableList,
                    picked: e
                })
            }, t.prototype.onDetach = function() {
                this.dispatch(m.init())
            }, t.prototype.getPicked = function(e) {
                return r.find(this.upgradableList, function(t) {
                    return t.isCode(e)
                })
            }, t.prototype.isChanged = function(e) {
                for (var t = [], i = 1; i < arguments.length; i++) t[i - 1] = arguments[i];
                var n = this.reduxProps.vehicleUpgrade;
                if (r.isUndefined(n)) return !1;
                for (var o = 0, a = t; o < a.length; o++) {
                    var s = a[o];
                    if (e[s] !== n[s]) return !0
                }
                return !1
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.vehicle,
                    n = e.vehicleUpgrade,
                    o = this.reduxProps.vehicle,
                    a = r.isUndefined(o) || !v.shallowEqual(i, o),
                    s = this.isChanged(n, "upgradeState"),
                    c = this.isChanged(n, "selectedVehicles"),
                    d = !r.isUndefined(n.picked) && this.isChanged(n, "picked");
                if (a && (this.updateUpgradableVehicleList(), this.vehiclesListBinder.setProps({
                        vehicles: this.upgradableList
                    })), c && this.getPicked(n.picked).updateSelection(n.selectedVehicles), s) switch (n.upgradeState) {
                    case "NOT_START":
                        break;
                    case "BEFORE_UPGRADE":
                        var l = this.getPicked(n.picked);
                        l.setExterior(n.selectedExterior), this.effectBinder.tryUpgradeVehicle(l).then(function(e) {
                            t.upgraded = e
                        });
                        break;
                    case "UPGRADING":
                        this.setUpgrading(!0);
                        break;
                    case "AFTER_UPGRADE":
                        this.updateUpgradableVehicleList(), this.afterUpgrade(n.picked), this.setUpgrading(!1), setTimeout(function() {
                            t.dispatch(m.setUpgradeState("NOT_START"))
                        }, 100)
                }(d || c) && (this.cardSelectBinder.rebind(this.getPicked(n.picked)), d && this.vehicleSelector.select(this.getPicked(n.picked).base()))
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    vehicle: e.vehicle,
                    vehicleUpgrade: e.vehicleUpgrade
                }
            }, t
        }(s.StageBinder);
    n.__decorate([s.autowired("$filter")], S.prototype, "$filter", void 0), n.__decorate([s.autowired("audioService")], S.prototype, "audioService", void 0), n.__decorate([s.autowired("externalService")], S.prototype, "externalService", void 0), n.__decorate([s.autowired("tuningShopService")], S.prototype, "tuningShopService", void 0), n.__decorate([s.autowired("vehicleDataService")], S.prototype, "vehicleDataService", void 0), t.VehicleUpgradeStageBinder = S
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(7),
        a = i(15),
        s = i(1),
        c = i(53),
        d = i(28),
        l = i(2),
        u = i(240),
        p = i(63);
    ! function(e) {
        e[e.Unknown = 0] = "Unknown", e[e.Enter = 1] = "Enter", e[e.Try = 2] = "Try", e[e.Succeed = 3] = "Succeed", e[e.Failed = 4] = "Failed", e[e.Completed = 5] = "Completed"
    }(n = t.CoreState || (t.CoreState = {}));
    var h = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            this.bindTexts(), this.bindHandlers()
        }, t.prototype.bindTexts = function() {
            this.translate(".id-confirm .id-buttonName .id-textField", "UPGRADE_UPGRADEDONE"), this.translate(".OVRDescription", "UPGRADE_VEHICLEOVR")
        }, t.prototype.bindHandlers = function() {
            var e = this;
            this.getFace(".id-confirm").on(l.MouseEventEx.CLICK, function() {
                return e.onConfirm()
            })
        }, t.prototype.show = function() {
            this.face.visible = !0
        }, t.prototype.hide = function() {
            this.face.visible = !1
        }, t.prototype.try = function() {
            o.trace("--\x3e beSetVehicleUpgradeState(Try)"), this.externalService.beSetVehicleUpgradeState(n.Try), this.show(), this.apply(this.face, d.gotoAndPlay, "startAnimation")
        }, t.prototype.success = function() {
            o.trace("--\x3e beSetVehicleUpgradeState(Succeed)"), this.externalService.beSetVehicleUpgradeState(n.Succeed), this.apply(this.face, d.gotoAndPlay, "success"), this.translate(".SuccessDescription", "UPGRADE_SUCCESS")
        }, t.prototype.failure = function() {
            o.trace("--\x3e beSetVehicleUpgradeState(Failed)"), this.externalService.beSetVehicleUpgradeState(n.Failed), this.apply(this.face, d.gotoAndPlay, "failure"), this.translate(".SuccessDescription", "UPGRADE_FAILURE")
        }, t.prototype.completed = function() {
            o.trace("--\x3e beSetVehicleUpgradeState(Completed)"), this.externalService.beSetVehicleUpgradeState(n.Completed), this.hide(), this.apply(this.face, d.gotoAndPlay, 1)
        }, t.prototype.bindTarget = function(e) {
            var t = "grade" + e.grade;
            this.apply(".id-vehicleGradeMC", d.gotoAndStop, t);
            var i = this.$filter("manufacturerName")(e.manufacturerCode) + "\n" + this.$filter("vehicleName")(e.code);
            this.apply(".id-vehicleName", d.bindText, i), $(".id-ovrContainer .id-ovrNum .id-textField").text(e.ovr)
        }, t.prototype.bindResult = function(e, t, i) {
            this.apply(".id-ResultGradelight1", d.gotoAndStop, "grade" + e.grade), this.apply(".id-ResultGradelight2", d.gotoAndStop, "grade" + e.grade), this.apply(".id-resultGradeMC", d.gotoAndStop, "grade" + e.grade), this.apply(".id-gradeContainer .id-gradeNum", d.gotoAndPlay, i ? "plus" : "minus");
            var n = e.ovr - t;
            this.apply(".id-gradeContainer .id-gradeNum .id-textField", d.bindText, n || "0");
            var r = this.$filter("currency")(e.price, "", 0),
                o = this.$filter("translate")("COMMON_VEHICLEVALUEUNIT"),
                a = r + ' <span class="sp-text">' + o + "</span>";
            this.bindHtml(".id-vehicleValue .id-spValue .id-textField", a)
        }, t.prototype.tryUpgradeVehicle = function(e) {
            var t = this;
            $("#edge-ui").addClass("prevent-click"), this.hideGlobalPanel();
            var i = e.getTarget(),
                n = e.getMaterial(),
                r = e.useTargetExterior();
            this.bindTarget(i);
            var s = i.ovr;
            return this.dispatch(u.setUpgradeState("UPGRADING")), this.vehicleService.upgrade(i, n, r).then(function(e) {
                o.debug("upgrade result:", e.upgradeStatus);
                var i = e.vehicle;
                return t.vehiclePriceDataService.getLatestPriceData([i]).then(function(t) {
                    return {
                        vehiclePriceData: t,
                        result: e
                    }
                })
            }).then(function(e) {
                var n = e.vehiclePriceData,
                    r = e.result,
                    o = r.upgradeStatus === a.Vehicle.VehicleUpgradeStatus.SUCCESS;
                return t.updateTarget(i, r.vehicle, n), t.bindResult(i, s, o), t.try(), t.face.once("branch", function() {
                    o ? t.success() : t.failure()
                }), t.face.once("reveal", function() {
                    t.face.once("stop", function() {
                        $("#edge-ui").removeClass("prevent-click");
                        var e = $(".id-ovrContainer .id-ovrNum .id-textField");
                        e.text(i.ovr), e.prop("Counter", s).animate({
                            Counter: e.text()
                        }, {
                            duration: 1e3,
                            easing: "swing",
                            step: function(t) {
                                return e.text(Math.ceil(t))
                            }
                        })
                    })
                }), r.vehicle
            }).catch(function(e) {
                $("#edge-ui").removeClass("prevent-click"), o.error(e), t.popupService.draw("ConfirmPopup", {
                    title: "ALARM_SERVERLOST_TITLE",
                    description: "ALARM_SERVERLOST_TEXT",
                    confirm: function() {
                        t.showGlobalPanel(), t.stateService.go("root.menu.Openworld")
                    }
                })
            })
        }, t.prototype.updateTarget = function(e, t, i) {
            var n = t.ovr,
                r = t.status,
                o = t.grade,
                a = t.parts;
            _.assign(e, {
                ovr: n,
                status: r,
                grade: o,
                parts: a
            }), e.paint = t.paint, e.price = i.get(e.code, e.grade), e.isUserChecked = !1, this.dispatch(p.resetUserCheck(e.id))
        }, t.prototype.onConfirm = function() {
            this.dispatch(u.setUpgradeState("AFTER_UPGRADE")), this.completed(), this.showGlobalPanel()
        }, t.prototype.showGlobalPanel = function() {
            this.dispatch(c.show())
        }, t.prototype.hideGlobalPanel = function() {
            this.dispatch(c.hide())
        }, t
    }(s.Binder);
    r.__decorate([s.autowired("stateService")], h.prototype, "stateService", void 0), r.__decorate([s.autowired("vehicleService")], h.prototype, "vehicleService", void 0), r.__decorate([s.autowired("popupService")], h.prototype, "popupService", void 0), r.__decorate([s.autowired("externalService")], h.prototype, "externalService", void 0), r.__decorate([s.autowired("$filter")], h.prototype, "$filter", void 0), r.__decorate([s.autowired("vehiclePriceDataService")], h.prototype, "vehiclePriceDataService", void 0), t.UpgradeEffectBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(22),
        o = i(1),
        a = i(134),
        s = i(2),
        c = i(62),
        d = i(3),
        l = i(240),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = this.face;
                t.hasSize = !0, t.setCustomStyle({
                    display: "inline-block",
                    position: "relative"
                }), this.face.on(s.MouseEventEx.CLICK, function() {
                    e.face.selected ? e.dispatch(l.deselectVehicle(e.index)) : e.dispatch(l.selectVehicle(e.index))
                })
            }, t.prototype.update = function(e) {
                var t = e.index,
                    i = e.enabled,
                    n = e.vehicle,
                    r = e.selected;
                void 0 !== t && void 0 !== n && (this.bindText(".id-num", t + 1), this.gotoAndStop(".id-vehicleGrade", this.grade(n)), this.face.htmlElement.setAttribute("data-grade", n.grade), this.bindText(".id-ovr", this.ovr(n)), this.face.enabled = i, this.face.selected = r, this.gotoAndStop(".id-backDisabled", t % 2 == 0 ? "odd" : "even"), this.gotoAndStop(".id-backDefault", t % 2 == 0 ? "odd" : "even")), this.index = t
            }, t.prototype.grade = function(e) {
                return "grade" + e.grade
            }, t.prototype.ovr = function(e) {
                return e ? e.ovr : 0
            }, t
        }(o.Binder),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.vehicleSelector = this.props.vehicleSelector, this.translate(".Expectation .id-title", "UPGRADE_WHENSUCCESS"), this.translate(".Expectation .id-blueprintGradeTitle", "UPGRADE_VEHICLEGRADE"), this.translate(".Expectation .id-ovrTitle", "UPGRADE_OVR"), this.translate(".Expectation .id-vehicleValueTitle", "COMMON_VEHICLEVALUE"), this.translate(".id-upgradeInfo .id-selectionExteriorTitle", "UPGRADE_COLORSELECTION"), this.translate(".id-commissionTitle", "UPGRADE_FEE"), this.bindText(".id-commissionNum", 0), this.translate(".id-notEnoughCommission .id-textField", "VEHICLE_UPGRADE_EXCEPTION"), this.visible(".id-notEnoughCommission", !1), this.translate(".id-titleContainer .id-numTitle", "UPGRADE_NUMBER"), this.translate(".id-titleContainer .id-blueprintGradeTitle", "UPGRADE_VEHICLEGRADE"), this.translate(".id-titleContainer .id-ovrTitle", "UPGRADE_OVR"), this.translate(".id-titleContainer .id-selectionTitle", "UPGRADE_SELECT"), this.bindText(".Expectation .id-vehicleValue .id-vehicleValue", 0), this.bindText(".Expectation .id-ovr", 0), this.gotoAndStop(".Expectation .id-vehicleGrade", "grade0"), this.hasSize(".id-scrollingList", !0), this.scrollingList = this.addChildBinder(".id-scrollingList .ScrollingListItem", c.CollectionBinder, {
                    instanceBinder: u
                }), this.translate(".id-upgrade", "GARAGE_VEHICLE_UPGRADE"), this.enableButton(".id-upgrade", !1), this.on(".id-upgrade", s.MouseEventEx.CLICK, function() {
                    return e.upgradeVehicle()
                }), this.on(".id-targetExterior", s.MouseEventEx.CLICK, function() {
                    return e.setExterior(e.upgradableVehicle.selection[0])
                }), this.on(".id-materialExterior", s.MouseEventEx.CLICK, function() {
                    return e.setExterior(e.upgradableVehicle.selection[1])
                }), this.visible(".id-vehicleGradeEffect", !1), this.visible(".id-vehicleGradeGlow", !1)
            }, t.prototype.onAddedToScene = function() {
                $(this.getFace(".id-scrollingList").htmlElement).perfectScrollbar()
            }, t.prototype.fullySelected = function() {
                return this.upgradableVehicle && 2 === this.upgradableVehicle.selection.length ? this.upgradableVehicle.getTarget() : null
            }, t.prototype.updateExpectedSpec = function() {
                var e = 0,
                    t = 0,
                    i = "Out",
                    n = this.upgradableVehicle.selectedVehicles();
                if (!n || 0 === n.length) return this.updateLabel(e, t, i), void this.bindText(".Expectation .id-vehicleValue .id-vehicleValue", this.$filter("currency")(0, "", 0));
                switch (n.length) {
                    case 1:
                        e = n[0].grade, t = n[0].ovr, this.vehicleSelector.select(n[0]);
                        break;
                    default:
                        t = r.maxBy(n, "ovr").ovr;
                        var o = n[0].grade,
                            s = n[1].grade,
                            c = Math.max(o, s),
                            d = Math.min(o, s);
                        if (e = 10 <= c || 0 === d ? c : c + 1, c < e) {
                            var l = this.vehicleDataService.getGradeBonus(n[0].code, e);
                            t += a.VehicleDataService.getIStatusOvr(l), i = "In"
                        }
                        this.vehicleSelector.select(this.upgradableVehicle.getSelectedExterior())
                }
                this.updateLabel(e, t, i), this.expectedValue(n[0].code, e)
            }, t.prototype.updateLabel = function(e, t, i) {
                this.gotoAndStop(".Expectation .id-vehicleGrade", "grade" + e);
                var n = $(".Expectation .id-ovr");
                if (t) {
                    var r = n.text();
                    n.text(t), n.stop(), n.prop("Counter", r).animate({
                        Counter: n.text()
                    }, {
                        duration: 300,
                        easing: "swing",
                        step: function(e) {
                            return n.text(Math.ceil(e))
                        }
                    })
                } else n.stop(), n.text(t)
            }, t.prototype.expectedValue = function(e, t) {
                var i = this;
                this.vehiclePriceDataService.getLatestPriceData([{
                    code: e,
                    grade: t
                }]).then(function(n) {
                    var r = n.get(e, t);
                    i.bindText(".Expectation .id-vehicleValue .id-vehicleValue", i.$filter("currency")(r, "", 0))
                })
            }, t.prototype.updateCollection = function() {
                var e = this,
                    t = this.upgradableVehicle.vehicles().map(function(t, i) {
                        return {
                            index: i,
                            enabled: e.enableSelect(i),
                            vehicle: t,
                            selected: e.upgradableVehicle.isSelected(i)
                        }
                    });
                this.scrollingList.applyCollection(t)
            }, t.prototype.calcCommission = function() {
                var e = this.fullySelected();
                return e ? this.vehicleDataService.getCommission(e.code, e.grade) : 0
            }, t.prototype.hasEnoughSp = function() {
                return d.store.getState().player.sp >= this.calcCommission()
            }, t.prototype.canUpgrade = function() {
                return !!this.fullySelected()
            }, t.prototype.upgradeVehicle = function() {
                var e = this;
                this.popupService.draw("ConfirmCancelPopup", {
                    title: "GARAGE_UPGRADE_POPUP_TITLE",
                    description: this.$filter("template")({
                        vehiclename: this.upgradableVehicle.name
                    }, "GARAGE_UPGRADE_POPUP_DESC"),
                    confirm: function() {
                        e.dispatch(l.setUpgradeState("BEFORE_UPGRADE", e.upgradableVehicle.selectedExteriorIndex()))
                    }
                })
            }, t.prototype.setExterior = function(e) {
                if (this.upgradableVehicle.selectedExteriorIndex() !== e) {
                    this.upgradableVehicle.setExterior(e);
                    var t = this.upgradableVehicle.vehicles()[e];
                    this.vehicleSelector.setExterior(t.paint), this.updateExteriorSelector()
                }
            }, t.prototype.updateExteriorSelector = function() {
                var e = this.canUpgrade();
                this.gotoAndStop(".id-upgradeInfo", e ? "selected" : "normal"), e ? (this.bindText(".id-targetExterior .id-num .id-textField", this.upgradableVehicle.selection[0] + 1), this.bindText(".id-materialExterior .id-num .id-textField", this.upgradableVehicle.selection[1] + 1), this.enableButton(".id-targetExterior", e), this.selectButton(".id-targetExterior", e && this.upgradableVehicle.useTargetExterior()), this.enableButton(".id-materialExterior", e), this.selectButton(".id-materialExterior", e && !this.upgradableVehicle.useTargetExterior()), this.visible(".id-vehicleGradeEffect", !0), this.visible(".id-vehicleGradeGlow", !0), this.hasEnoughSp() && this.gotoAndPlay(".id-btnGlow", "startAnimation")) : (this.visible(".id-vehicleGradeEffect", !1), this.visible(".id-vehicleGradeGlow", !1), this.gotoAndStop(".id-btnGlow", 1))
            }, t.prototype.enableSelect = function(e) {
                return !this.upgradableVehicle || !(2 === this.upgradableVehicle.selection.length && r.indexOf(this.upgradableVehicle.selection, e) < 0)
            }, t.prototype.onDetach = function() {
                $(this.getFace(".id-scrollingList").htmlElement).perfectScrollbar("destroy")
            }, t.prototype.rebind = function(e) {
                if (this.upgradableVehicle = e, this.upgradableVehicle) {
                    this.updateExteriorSelector(), this.updateExpectedSpec(), this.updateCollection();
                    var t = this.canUpgrade();
                    this.enableButton(".id-upgrade", t && this.hasEnoughSp())
                }
                this.bindText(".id-commissionNum", this.$filter("currency")(this.calcCommission(), "", 0)), this.visible(".id-notEnoughCommission", !this.hasEnoughSp())
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([o.autowired("popupService")], p.prototype, "popupService", void 0), n.__decorate([o.autowired("vehicleDataService")], p.prototype, "vehicleDataService", void 0), n.__decorate([o.autowired("vehiclePriceDataService")], p.prototype, "vehiclePriceDataService", void 0), t.UpgradeSelectBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(240),
        o = i(1),
        a = i(56),
        s = i(2),
        c = i(3),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.pageIndex = 0, t.pageSize = 0, t.vehicles = [], t.isPaging = !1, t.currentListBinder = [], t.nextListBinder = [], t.selectedIndex = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                _.times(5, function(t) {
                    var i = e.getFace(".id-current" + (t + 1)),
                        n = e.getFace(".id-next" + (t + 1));
                    e.currentListBinder.push(e.addChildBinder(i, a.VehicleCard)), e.nextListBinder.push(e.addChildBinder(n, a.VehicleCard)), e.addManagedListener(i, s.MouseEventEx.CLICK, e.onClick.bind(e, t))
                }), this.pagingContainer = this.getFace(".id-garagePhotoList"), this.pagingContainer.hasSize = !0, this.prevButton = this.getFace(".id-previousButton"), this.nextButton = this.getFace(".id-nextButton"), this.firstButton = this.getFace(".id-firstButton"), this.lastButton = this.getFace(".id-lastButton"), this.indicatorContainer = this.getFace(".id-pageNumberContainer"), this.currentIndicator = this.getFace(".id-currentPage"), this.setUpPagingFlow(), this.setUpPageNumberListener()
            }, t.prototype.setUpPagingFlow = function() {
                var e = this;
                this.addManagedListener(this.prevButton, s.MouseEventEx.CLICK, function() {
                    t(e.pageIndex - 1, "previous")
                }), this.addManagedListener(this.nextButton, s.MouseEventEx.CLICK, function() {
                    t(e.pageIndex + 1, "next")
                }), this.addManagedListener(this.lastButton, s.MouseEventEx.CLICK, function() {
                    t(e.chunkedVehicles.length - 1, "last")
                }), this.addManagedListener(this.firstButton, s.MouseEventEx.CLICK, function() {
                    t(0, "first")
                });
                var t = function(t, i) {
                    e.movePage(t, i)
                };
                this.addManagedListener(this.pagingContainer, "reset", function(t) {
                    e.gotoAndPlay(e.pagingContainer, "default"), e.isPaging = !1
                }), this.wheelHandler = _.throttle(function(t) {
                    if (!e.isPaging) {
                        var i = Math.max(-1, Math.min(1, t.wheelDelta || -t.detail));
                        1 === i && 0 !== e.pageIndex ? e.movePage(e.pageIndex - 1, "previous") : -1 === i && e.pageIndex !== e.chunkedVehicles.length - 1 && e.movePage(e.pageIndex + 1, "next")
                    }
                }, 600, {
                    trailing: !1
                }), this.pagingContainer.htmlElement.addEventListener("mousewheel", this.wheelHandler, {
                    passive: !0
                })
            }, t.prototype.setUpPageNumberListener = function() {
                var e = this,
                    t = function(t, i) {
                        e.movePage(t, i)
                    };
                [{
                    num: 2,
                    action: "first"
                }, {
                    num: 3,
                    action: "previous"
                }, {
                    num: 5,
                    action: "next"
                }, {
                    num: 6,
                    action: "last"
                }].forEach(function(i) {
                    var n = i.num - 4,
                        r = e.getFace(".id-curr" + i.num);
                    e.addManagedListener(r, s.MouseEventEx.CLICK, function() {
                        t(e.pageIndex + n, i.action)
                    })
                }), this.addManagedListener(this.indicatorContainer, "reset", function(t) {
                    e.setPageIndicatorsNumber("default"), e.disposePageButton(), e.gotoAndPlay(e.indicatorContainer, "default")
                })
            }, t.prototype.onDetach = function() {
                this.playerService.markVehiclesAsChecked(), this.pagingContainer.htmlElement.removeEventListener("mousewheel", this.wheelHandler)
            }, t.prototype.update = function(e) {
                this.vehicles = _.map(e.vehicles, function(e) {
                    return e.base()
                }), this.selectedVid = e.picked, this.initVehicleList()
            }, t.prototype.initVehicleList = function() {
                var e = this.vehicles;
                this.chunkedVehicles = _.chunk(e, 5), 0 !== this.chunkedVehicles.length && (this.pageSize = this.chunkedVehicles.length, this.pageIndex = this.pageIndex > this.pageSize - 1 ? this.pageSize - 1 : this.pageIndex, this.isPaging = !1, this.bindList(this.currentListBinder, this.pageIndex), this.setPageIndicatorsNumber("default"), this.disposePageButton())
            }, t.prototype.bindList = function(e, t) {
                var i = this,
                    n = this.chunkedVehicles[t] || [];
                e.forEach(function(e, t) {
                    var r = n[t],
                        o = r ? i.selectedVid === r.code : void 0;
                    o && (e.face.$(".id-configurationButton").visible = !1, e.face.$(".id-handlingTuningButton").visible = !1), e.setProps({
                        vehicle: r,
                        selected: o
                    })
                })
            }, t.prototype.setPageNumber = function(e, t, i) {
                var n = 0 <= t && t < this.pageSize,
                    r = this.indicatorContainer.$(".id-" + i + e);
                r && (r.enabled = n, this.bindText(r.$(".id-buttonName"), n ? t + 1 : ""))
            }, t.prototype.setPageNumbers = function(e, t) {
                this.setPageNumber(4, e, t);
                for (var i = 1; i < 4; i++) this.setPageNumber(4 - i, e - i, t), this.setPageNumber(4 + i, e + i, t)
            }, t.prototype.setPageIndicatorsNumber = function(e) {
                switch (this.setPageNumbers(this.pageIndex, "curr"), e) {
                    case "default":
                        this.bindText(this.currentIndicator.$(".id-current"), this.pageIndex + 1), this.setPageNumbers(this.pageIndex, "num");
                        break;
                    case "first":
                    case "last":
                        this.setPageNumbers("first" === e ? this.pageIndex + 1 : this.pageIndex - 1, "num")
                }
            }, t.prototype.onClick = function(e) {
                var t = this;
                if (!this.currentListBinder[e].face.selected) {
                    this.selectedIndex = e || 0, this.currentListBinder.forEach(function(e) {
                        var i = e.face;
                        i.selected && (i.selected = !1, t.gotoAndPlay(i.$(".id-configurationContainer"), "intro"))
                    }), this.currentListBinder[e].face.selected = !0, this.currentListBinder[e].face.$(".id-configurationButton").visible = !1, this.currentListBinder[e].face.$(".id-handlingTuningButton").visible = !1;
                    var i = this.chunkedVehicles[this.pageIndex][e];
                    this.selectedVid = i.code, c.store.dispatch(r.pickVehicle(this.selectedVid))
                }
            }, t.prototype.movePage = function(e, t) {
                var i = this;
                if (!this.isPaging && !(e < 0 || this.pageSize <= e || this.pageIndex === e)) {
                    this.isPaging = !0, this.pageIndex = e, this.prevButton.enabled = this.nextButton.enabled = this.lastButton.enabled = this.firstButton.enabled = !1, this.bindList(this.nextListBinder, e);
                    var n = t;
                    "first" === t && (n = "previous"), "last" === t && (n = "next"), this.gotoAndPlay(this.pagingContainer, n), this.gotoAndPlay(this.indicatorContainer, t), this.setPageIndicatorsNumber(t), setTimeout(function() {
                        i.bindList(i.currentListBinder, i.pageIndex)
                    }, 100)
                }
            }, t.prototype.disposePageButton = function() {
                this.prevButton.enabled = this.firstButton.enabled = 0 !== this.pageIndex, this.nextButton.enabled = this.lastButton.enabled = this.pageIndex !== this.chunkedVehicles.length - 1
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("playerService")], d.prototype, "playerService", void 0), t.UpgradableVehiclesListBinder = d
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        var i = e && e.getTarget(),
            n = t && t.getTarget();
        return i && !n ? -1 : !i && n ? 1 : i || n ? a.compare(i, n) : 0
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(22),
        o = i(75),
        a = function() {
            function e(e, t) {
                this._vehicles = e, this._base = this._vehicles[0], this._defaultTuning = t
            }
            return e.prototype.vehicles = function() {
                return this._vehicles
            }, e.prototype.base = function() {
                return this._base
            }, Object.defineProperty(e.prototype, "code", {
                get: function() {
                    return this._base.code
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "ovr", {
                get: function() {
                    return this._base.ovr
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "grade", {
                get: function() {
                    return this._base.grade
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "value", {
                get: function() {
                    return this._base.price
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "name", {
                get: function() {
                    return e.nameFilter(this._base.code)
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "count", {
                get: function() {
                    return this._vehicles.length
                },
                enumerable: !0,
                configurable: !0
            }), Object.defineProperty(e.prototype, "clazz", {
                get: function() {
                    return this._base.clazz
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.isCode = function(e) {
                return this._base.code === e
            }, e.prototype.length = function() {
                return this._vehicles.length
            }, e.prototype.reset = function() {
                this._base = this._vehicles[0]
            }, e.prototype.setExterior = function(e) {
                this._selectedExterior = e
            }, e.prototype.selectedExteriorIndex = function() {
                return this._selectedExterior
            }, e.prototype.getSelectedExterior = function() {
                return this._vehicles[this._selectedExterior]
            }, e.prototype.useTargetExterior = function() {
                return this.getTarget() === this._vehicles[this._selectedExterior]
            }, e.prototype.getTarget = function() {
                return 2 !== this._selection.length ? null : this._vehicles[this._selection[0]]
            }, e.prototype.getMaterial = function() {
                return 2 !== this._selection.length ? null : this._vehicles[this._selection[1]]
            }, Object.defineProperty(e.prototype, "selection", {
                get: function() {
                    return this._selection
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.selectedVehicles = function() {
                var e = this;
                return r.map(this._selection, function(t) {
                    return e._vehicles[t]
                })
            }, e.prototype.isSelected = function(e) {
                return this._selection.indexOf(e) >= 0
            }, e.prototype.chooseExterior = function(e, t, i, n) {
                return e > t ? (this._selectedExterior = i, !0) : t > e && (this._selectedExterior = n, !0)
            }, e.prototype.updateSelection = function(e) {
                var t = this;
                if (this._selection = e, 2 === e.length) {
                    var i = e[0],
                        n = e[1],
                        o = this._vehicles[i],
                        a = this._vehicles[n],
                        s = r.filter(o.paint, function(e, i) {
                            return -1 !== e && e !== t._defaultTuning[i]
                        }).length,
                        c = r.filter(a.paint, function(e, i) {
                            return -1 !== e && e !== t._defaultTuning[i]
                        }).length;
                    if (this.chooseExterior(s, c, i, n)) return;
                    if (this.chooseExterior(o.ovr, a.ovr, i, n)) return;
                    if (this.chooseExterior(o.createdat, a.createdat, i, n)) return;
                    this._selectedExterior = i
                }
            }, e.compare = function(t, i) {
                if (t.clazz !== i.clazz) return o.vehicleClassOrder[t.clazz] - o.vehicleClassOrder[i.clazz];
                if (t.ovr > i.ovr) return -1;
                if (t.ovr < i.ovr) return 1;
                if (t.grade > i.grade) return -1;
                if (t.grade < i.grade) return 1;
                var n = e.nameFilter(t.code),
                    r = e.nameFilter(i.code);
                return n < r ? -1 : n > r ? 1 : 0
            }, e.compareVehicles = function(t, i) {
                return e.compare(t[0], i[0])
            }, e.generateUpgradableVehicles = function(t) {
                var i = [];
                return r.each(t, function(t) {
                    i.push(new e(t.vehicles, t.defTuning))
                }), i
            }, e
        }();
    t.UpgradableVehicle = a, t.compareCard = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(81),
        r = function() {
            function e(e, t) {
                this.external = e, this.tuning = t, this.paint = {}
            }
            return Object.defineProperty(e.prototype, "selected", {
                get: function() {
                    return this._selected
                },
                set: function(e) {
                    this._selected = e, this.paint = {}
                },
                enumerable: !0,
                configurable: !0
            }), e.prototype.alreadySelected = function(e) {
                this.selected = e
            }, e.prototype.select = function(e) {
                this.selected && this.selected.code === e.code && n.shallowEqual(this.selected.paint, e.paint) || (this.selected = e, this.external.beSelectVehicle(e))
            }, e.prototype.setExterior = function(e) {
                var t = e.colorCode,
                    i = e.wheelCode,
                    n = e.wrapCode;
                if (this.paint.colorCode !== t) {
                    this.paint.colorCode = t;
                    var r = this.tuning.getTuningItemByCode(t);
                    r && this.external.beSetVehicleColor(r.rgb)
                }
                if (this.paint.wheelCode !== i) {
                    this.paint.wheelCode = i;
                    var o = this.tuning.getCidByTuningItemCode(i);
                    this.external.beSetVehicleWheel(o)
                }
                if (this.paint.wrapCode !== n) {
                    this.paint.wrapCode = n;
                    var a = this.tuning.getCidByTuningItemCode(n);
                    this.external.beSetVehicleWrapping(a)
                }
            }, e
        }();
    t.VehicleSelector = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(1397);
    angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.coreLevelTest", {
            url: "/splash",
            views: {
                "edge-ui-container@": {
                    template: '\n            <div style="width: 1920px; height: 1080px; color: green; font-size: 120%; padding: 20px;">\n              <h2>Welcome to direct level test mode!</h2>\n              <pre style="padding: 0px 10px">{{ progress }}</pre>\n              <pre style="padding: 0px 10px; color: red; white-space: pre-wrap">{{ error }}</pre>\n            </div>\n          ',
                    controller: "CoreLevelTestController"
                }
            }
        })
    }]).controller("CoreLevelTestController", ["$scope", "$stateParams", "externalService", function(e, t, i) {
        function r(t) {
            e.$applyAsync(function() {
                return e.progress += t + "\n"
            })
        }

        function o(t, i) {
            e.$applyAsync(function() {
                var n = t;
                i && (n += " " + JSON.stringify(i)), e.error += n + "\n"
            })
        }
        e.progress = "", e.error = "", i.beSetMouseEnabled(!0), new n.SimpleTest(r, o).run()
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(7),
        a = i(4),
        s = i(34),
        c = i(10),
        d = i(9),
        l = i(1398),
        u = function(e) {
            function t(t, i) {
                var n = e.call(this, t, i) || this;
                n.notify = t, n.notifyError = i, n.runningBalanceTest = !1;
                var r = s.getInjector();
                return n.room2Service = r.get("room2Service"), n.room2MatchService = r.get("room2MatchService"), n.recordService = r.get("recordService"), n
            }
            return n.__extends(t, e), t.prototype.initBalanceTest = function() {
                var e = this;
                this.externalService.on(d.default.beMakeBalanceTest, function() {
                    o.info("beMakeBalanceTest called"), e.runningBalanceTest = !0
                }), this.externalService.on(d.default.beCollectGameRecord, function(t) {
                    o.info("CORE>>", "beCollectGameRecord", JSON.stringify(t));
                    var i = e.recordService.convertRecord(t);
                    if (!i.lapcount && e.runningBalanceTest) {
                        var r = n.__assign({}, i, {
                            createdAt: Date.now(),
                            result: i.result.map(function(e) {
                                return n.__assign({}, e, {
                                    playerid: i.username
                                })
                            })
                        });
                        o.info(">> POST v2/log/ai/matchend - " + JSON.stringify(r)), c.request("POST", "log/ai/matchend", r)
                    }
                })
            }, t.prototype.emulateCoreGame = function() {
                var e = window;
                this.room2MatchService.once("server.created", function() {
                    r.delay(1500).then(function() {
                        e.beAllPlayerLoaded();
                        var t = 5;
                        return a.default.interval(function() {
                            e.beHUDStartCountdown(t--)
                        }, 1e3, 5)
                    }).delay(1e3).then(e.beHUDStartGame)
                })
            }, t.prototype.init = function() {
                var e = s.getInjector(),
                    t = e.get("$location").search();
                return this.hudGameMode = t.gamemode ? t.gamemode.toUpperCase() : "SPEEDINDIVIDUAL", o.debug("searched: " + JSON.stringify(t)), this.initBalanceTest(), this.externalService.isEdgeBrowser() || this.emulateCoreGame(), r.resolve()
            }, t.prototype.create = function() {
                var e = this;
                this.notify("create match...");
                o.debug("roomGameMode: SPEEDINDIVIDUAL"), o.debug("hudGameMode: " + this.hudGameMode), this.room2MatchService.once("server.created", function() {
                    e.notify("server.created; done.")
                }), this.room2MatchService.once("all.loaded", function() {
                    e.notify("allPlayerLoaded"), t.resolve()
                });
                var t = a.default.defer(),
                    i = {
                        title: "foobar",
                        maxPlayer: 6,
                        maxVehicleClazz: "ALL",
                        gameMode: "SPEEDINDIVIDUAL",
                        channel: "ALL",
                        password: -1
                    };
                return this.room2Service.createRoom(i).then(function() {
                    return e.room2Service.startGame()
                }).catch(function(t) {
                    return e.notifyError("create match failed:", t)
                }), t.promise
            }, t.prototype.play = function() {
                var e = a.default.gameModeToHudState[this.hudGameMode];
                this.stateService.go(e)
            }, t
        }(l.BaseTest);
    t.SimpleTest = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(34),
        a = i(3),
        s = function() {
            function e(e, t) {
                this.notify = e, this.notifyError = t;
                var i = o.getInjector();
                this.bootstrapService = i.get("bootstrapService"), this.playerService = i.get("playerService"), this.vehicleService = i.get("vehicleService"), this.externalService = i.get("externalService"), this.stateService = i.get("stateService")
            }
            return e.prototype.run = function() {
                var e = this;
                this.init().then(function() {
                    return e.login()
                }).then(function() {
                    return e.create()
                }).then(function() {
                    return e.play()
                }).catch(function(t) {
                    return e.notifyError("something wrong:", t)
                })
            }, e.prototype.init = function() {
                return r.resolve()
            }, e.prototype.login = function() {
                var e = this,
                    t = "dmy" + Math.floor(Math.random() * Math.pow(10, 5));
                t = t.replace(/18/g, "1z8"), this.notify("login... " + t);
                var i = o.getInjector(),
                    n = i.get("vehicleDataService").getDefaultVehicles();
                return this.bootstrapService.testAccount = t, this.bootstrapService.getAccessToken().then(function(t) {
                    return e.bootstrapService.saveAccessToken(t)
                }).then(function() {
                    return e.bootstrapService.init()
                }).then(function() {
                    return e.playerService.fetch()
                }).then(function() {
                    var i = a.store.getState().player;
                    return _.isEmpty(i) ? e.playerService.createPlayer({
                        name: t,
                        vcode: n[0].code,
                        dcode: 20,
                        slot: 0
                    }).then(function(t) {
                        return e.playerService.selectPlayer(t.id)
                    }) : e.playerService.selectPlayer(i.id)
                }).then(function() {
                    return e.vehicleService.fetch()
                }).then(function() {
                    return e.turnOffAssist()
                }).then(function() {
                    var t = a.store.getState().player,
                        i = t.id,
                        n = t.name;
                    e.externalService.beSelectPlayer(i, n), e.notify("done.")
                }).catch(function(t) {
                    return e.notifyError("login failed:", t)
                })
            }, e.prototype.turnOffAssist = function() {
                var e = o.getInjector().get("inGameConfigService"),
                    t = a.store.getState().configuration.configs.ingame.staging;
                return e.setConfig(n.__assign({}, t, {
                    useAbs: !1,
                    useHcs: !1
                }))
            }, e.prototype.create = function() {
                return r.resolve()
            }, e.prototype.play = function() {}, e
        }();
    t.BaseTest = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1400),
        o = i(319);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/market/vehicle/purchase", 14).container({
            stages: {
                "exchange-market-buy": r.MarketVehicleBuyBinder
            },
            resolve: {
                player: ["playerService", function(e) {
                    return e.fetch()
                }],
                vehicle: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                market: ["marketService", function(e) {
                    return e.fetch()
                }]
            }
        }).dialog({
            stages: {
                "vehicle-detail": o.VehicleDetailBinder
            }
        });
        e.state("root.menu.VehiclePurchase", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(1),
        a = i(2),
        s = i(88),
        c = i(1401),
        d = i(1406),
        l = i(1407),
        u = i(1408),
        p = i(1411),
        h = i(88),
        f = i(1412),
        v = i(12);
    ! function(e) {
        e[e.Condition = 0] = "Condition", e[e.MyVehicles = 1] = "MyVehicles", e[e.Favorites = 2] = "Favorites"
    }(n || (n = {}));
    var m = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.currTabMenu = n.Condition, t.searchMarketOffers = _.debounce(function() {
                var e = _.cloneDeep(t.conditionalSearchBinder.getSearchConditions()),
                    i = t.conditionalSearchResultBinder.getSelectedManufacturers().slice();
                if (_.isEmpty(i) || (e.manufacturerCode = i, _.isEmpty(e.code) || (e.code = _.filter(e.code, function(i) {
                        var n = t.vehicleDataService.getVehicleData(i);
                        return -1 !== e.manufacturerCode.indexOf(n.manufacturerCode)
                    }), e.manufacturerCode = [])), !t.conditionalSearchBinder.isEmptyKeyword() && _.isEmpty(e.code) && _.isEmpty(e.manufacturerCode) && (e.code = [-1]), 0 < e.maxPrice && e.maxPrice < e.minPrice) return t.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_SEARCHPRICEERROR_TITLE",
                    description: "TRADEMARKET_SEARCHPRICEERROR_DESC"
                }), void t.enableButton(t.btnBuy, !0);
                t.conditionalSearchResultBinder.setProps({
                    searching: !0
                }), t.marketService.searchOfferList(e).then(function(e) {
                    t.lastSearchInfo = {
                        menu: t.currTabMenu
                    }, t.conditionalSearchResultBinder.setProps({
                        searchList: e,
                        searching: !1,
                        favorites: t.favorites
                    })
                }).catch(function(e) {
                    t.conditionalSearchResultBinder.setProps({
                        searchList: [],
                        searching: !1,
                        favorites: []
                    })
                })
            }.bind(t), 500), t.searchMarketOffersByCode = _.debounce(function(e, i) {
                t.searchResultBinder.setProps({
                    searching: !0
                }), t.marketService.getVehicleOfferByCode(e).then(function(n) {
                    t.lastSearchInfo = {
                        menu: t.currTabMenu,
                        code: e,
                        grade: i
                    }, t.searchResultBinder.setProps({
                        searchList: n,
                        searching: !1,
                        favorites: t.favorites,
                        code: e,
                        grade: i
                    })
                }).catch(function(e) {
                    t.searchResultBinder.setProps({
                        searchList: [],
                        searching: !1,
                        favorites: []
                    })
                })
            }.bind(t), 500), t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.getFace(".id-tabMenuContainer").hasSize = !0, this.tabMenuListBinder = this.addChildBinder(".id-tabMenuContainer > .id-tabMenuItem", o.CollectionBinder, {
                instanceBinder: f.TabMenuButtonBinder
            });
            var t = ["TRADEMARKET_SEARCHCONDITION", "TRADEMARKET_VEHICLELIST", "TRADEMARKET_FAVORITELIST"],
                i = t.map(function(t, i) {
                    return {
                        index: i,
                        title: t,
                        onClick: function(t) {
                            var i = t.index;
                            e.changeTabMenu(i)
                        }
                    }
                });
            this.tabMenuListBinder.applyCollection(i), this.btnBuy = this.getFace(".id-buy"), this.translate(this.btnBuy, "TRADEMARKET_BUTTON_PURCHASE"), this.addManagedListener(this.btnBuy, a.MouseEventEx.CLICK, function(t) {
                e.showBuyPopup()
            }), this.enableButton(this.btnBuy, !1), this.hasSize(".id-spCountNum", !0), this.hasSize(".id-spCountNum .id-valueLabel", !1), this.hasSize(".id-spCountNum .id-titleLabel", !1), this.translate(".id-description", "TRADEMARKET_SEARCHRESULT_DEFAULTNOTICE"), this.translate(".id-searchResultTitle .id-textField", "TRADEMARKET_SEARCHRESULT"), this.translate(".id-spCountNum .id-titleLabel", "TRADEMARKET_MYSP"), this.conditionalSearchBinder = this.addChildBinder(".id-conditionalSearchContainer", d.ConditionalSearchBinder, {
                searchCondition: this.searchCondition.bind(this)
            }), this.conditionalSearchResultBinder = this.addChildBinder(".id-conditionalSearchResultListContainer", c.ConditionalSearchResultBinder, {
                changeManufacturer: function() {
                    e.changeResultView(n.Condition, !0), e.enableButton(e.btnBuy, !1), e.searchMarketOffers()
                },
                selectedItem: function(t) {
                    e.conditionalSearchResultBinder.face.visible && e.enableButton(e.btnBuy, !_.isEmpty(t))
                },
                onRegister: function(t, i, n) {
                    return e.registerFavorite(t, i, n)
                },
                onDetail: function(t) {
                    return e.showCheckAndDetailPopup(t)
                }
            }), this.myVehicleListBinder = this.addChildBinder(".id-myVehicleListContainer", l.MyVehicleListBinder, {
                onSearch: function(t, i) {
                    e.changeResultView(n.MyVehicles, !0), e.enableButton(e.btnBuy, !1), e.searchMarketOffersByCode(t, i)
                },
                onDetail: function(t) {
                    return e.showDetailPopup(t)
                }
            }), this.favoriteVehicleListBinder = this.addChildBinder(".id-favoriteVehicleListContainer", u.FavoriteVehicleListBinder, {
                onSearch: function(t, i) {
                    e.changeResultView(n.Favorites, !0), e.enableButton(e.btnBuy, !1), e.searchMarketOffersByCode(t, i)
                },
                onDetail: function(t) {
                    return e.showCheckAndDetailPopup(t)
                },
                onUnregister: function(t, i) {
                    return e.registerFavorite(h.UnregisterFavorite, t, i)
                }
            }), this.searchResultBinder = this.addChildBinder(".id-searchResultListContainer", p.VehicleSearchResultBinder, {
                selectedItem: function(t) {
                    e.searchResultBinder.face.visible && e.enableButton(e.btnBuy, !_.isEmpty(t))
                },
                onRegister: function(t, i, n) {
                    return e.registerFavorite(t, i, n)
                },
                onDetail: function(t) {
                    return e.showCheckAndDetailPopup(t)
                }
            })
        }, t.prototype.mapStateToProps = function(e) {
            return {
                player: e.player,
                vehicle: e.vehicle,
                favorites: e.market.favorites
            }
        }, t.prototype.onAddedToScene = function() {
            this.changeTabMenu(n.Condition), this.changeResultView(n.Condition), this.searchCondition()
        }, t.prototype.update = function(e) {
            var t = e.player,
                i = e.favorites;
            this.player = t, this.vehicles = v.getOwnTrialVehicles(), this.favorites = i;
            var n = this.$filter("currency")(t.sp, "", 0);
            this.bindText(".id-spCountNum .id-valueLabel", n), this.myVehicleListBinder.face.visible ? this.myVehicleListBinder.setProps({
                vehicles: this.vehicles
            }) : this.favoriteVehicleListBinder.face.visible && this.favoriteVehicleListBinder.setProps({
                favorites: i
            }), this.conditionalSearchResultBinder.face.visible ? this.conditionalSearchResultBinder.updateFavorites(i) : this.searchResultBinder.face.visible && this.searchResultBinder.updateFavorites(i)
        }, t.prototype.searchCondition = function() {
            this.changeResultView(n.Condition, !0), this.enableButton(this.btnBuy, !1), this.searchMarketOffers()
        }, t.prototype.registerFavorite = function(e, t, i) {
            e === h.RegisterFavorite ? this.marketService.addFavorite(t, i) : e === h.UnregisterFavorite && this.marketService.removeFavorite(t, i)
        }, t.prototype.refreshOffers = function() {
            this.lastSearchInfo && (this.lastSearchInfo.menu === n.Condition ? this.searchMarketOffers() : this.searchMarketOffersByCode(this.lastSearchInfo.code, this.lastSearchInfo.grade))
        }, t.prototype.showBuyPopup = function() {
            var e = this;
            this.tooltipService.hide();
            var t;
            this.conditionalSearchResultBinder.face.visible ? t = this.conditionalSearchResultBinder.getSelectedOffer() : this.searchResultBinder.face.visible && (t = this.searchResultBinder.getSelectedOffer()), _.isUndefined(t) || (this.enableButton(this.btnBuy, !1), this.marketService.getVehicleOffer(t.code, t.grade).then(function(i) {
                if (0 === i.length) e.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_PURCHASEFAIL_ALLREADYSELL_TITLE",
                    description: "TRADEMARKET_CANTPURCHASE_POPUP_ALREADYSELL",
                    confirm: function() {
                        return e.refreshOffers()
                    }
                });
                else if (i[0].summary.price !== t.price) e.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_PURCHASEFAIL_CHANGEPRICE_TITLE",
                    description: "TRADEMARKET_PURCHASEFAIL_CHANGEPRICE_DESC",
                    confirm: function() {
                        return e.refreshOffers()
                    }
                });
                else if (t.price > e.player.sp) e.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_CANTPURCHASE_POPUP_TITTLE",
                    description: "TRADEMARKET_CANTPURCHASE_POPUP_DESC",
                    confirm: function() {
                        return e.enableButton(e.btnBuy, !0)
                    }
                });
                else if (e.player.unlock.maxGarageCount <= e.vehicles.length) e.popupService.draw("ConfirmCancelPopup", {
                    title: "TRADEMARKET_CANTPURCHASE_POPUP_TITTLE",
                    description: "TRADEMARKET_CANTPURCHASE_POPUP_DESC2",
                    confirmString: "TRADEMARKET_BUTTON_GOTOGARAGE",
                    confirm: function() {
                        e.stateService.go("root.menu.Vehicles")
                    },
                    cancel: function() {
                        return e.enableButton(e.btnBuy, !0)
                    }
                });
                else {
                    var n = e.vehicleDataService.createRefinedVehicle(t.code, t.grade);
                    e.popupService.draw("BuyVehiclePopup", {
                        vehicle: n,
                        priceInfo: i,
                        ownSp: e.player.sp,
                        price: t.price,
                        afterSp: e.player.sp - t.price,
                        confirm: function() {
                            e.marketService.purchaseVehicle(t.code, t.grade, t.price).then(function(t) {
                                return e.showOfferResultPopup(t)
                            }).catch(function(t) {
                                var i = "ALARM_SERVERLOST_TITLE",
                                    n = "ALARM_SERVERLOST_TEXT",
                                    r = function() {
                                        return e.refreshOffers()
                                    };
                                t.errorCode === s.ErrorCode.VehicleOfferDoesNotExist ? (i = "TRADEMARKET_PURCHASEFAIL_ALLREADYSELL_TITLE", n = "TRADEMARKET_CANTPURCHASE_POPUP_ALREADYSELL") : 429 === t.status && (i = "ERROR_POPUP_TITLE", n = "ERROR_DONOTUSEMACRO_KICKOUT"), e.popupService.draw("ConfirmPopup", {
                                    title: i,
                                    description: n,
                                    confirm: r
                                })
                            })
                        },
                        cancel: function() {
                            return e.enableButton(e.btnBuy, !0)
                        }
                    })
                }
            }).catch(function(t) {
                return e.refreshOffers()
            }))
        }, t.prototype.showOfferResultPopup = function(e) {
            var t = this;
            this.tooltipService.hide();
            var i = this.vehicleDataService.createRefinedVehicle(e.offer.code, e.offer.grade);
            this.popupService.draw("BuyVehicleConfirmPopup", {
                vehicle: i,
                gotoVehicle: function() {
                    return t.stateService.go("root.menu.Vehicles", {
                        vehicleId: e.offer.madeVid
                    })
                },
                confirm: function() {
                    return t.refreshOffers()
                }
            })
        }, t.prototype.changeTabMenu = function(e) {
            this.currTabMenu = e, this.tabMenuListBinder.binders.forEach(function(t) {
                t.face.selected = t.getProps().index === e
            }), this.conditionalSearchBinder.face.visible = e === n.Condition, this.myVehicleListBinder.face.visible = e === n.MyVehicles, this.favoriteVehicleListBinder.face.visible = e === n.Favorites, this.myVehicleListBinder.face.visible ? this.myVehicleListBinder.setProps({
                vehicles: this.vehicles
            }) : this.favoriteVehicleListBinder.face.visible && this.favoriteVehicleListBinder.setProps({
                favorites: this.favorites
            })
        }, t.prototype.changeResultView = function(e, t) {
            void 0 === t && (t = !1), this.conditionalSearchResultBinder.face.visible = e === n.Condition, this.searchResultBinder.face.visible = e !== n.Condition, e === n.Condition ? this.searchResultBinder.setProps({
                searchList: [],
                favorites: [],
                searching: t
            }) : this.conditionalSearchResultBinder.setProps({
                searchList: [],
                favorites: [],
                searching: t
            }), this.visible(".id-description", e === n.Condition)
        }, t.prototype.showDetailPopup = function(e) {
            this.marketService.emit("openVehicleDetail", e)
        }, t.prototype.showCheckAndDetailPopup = function(e) {
            this.marketService.emit("checkOwnedAndOpenDetail", e)
        }, t
    }(o.StageBinder);
    r.__decorate([o.autowired("$filter")], m.prototype, "$filter", void 0), r.__decorate([o.autowired("popupService")], m.prototype, "popupService", void 0), r.__decorate([o.autowired("marketService")], m.prototype, "marketService", void 0), r.__decorate([o.autowired("tooltipService")], m.prototype, "tooltipService", void 0), r.__decorate([o.autowired("vehicleDataService")], m.prototype, "vehicleDataService", void 0), r.__decorate([o.autowired("stateService")], m.prototype, "stateService", void 0), t.MarketVehicleBuyBinder = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(140),
        a = i(1402),
        s = i(631),
        c = i(632),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this,
                    i = e.changeManufacturer,
                    n = e.selectedItem,
                    r = e.onRegister,
                    d = e.onDetail;
                this.translate(".id-noVehicles", "TRADEMARKET_NOSALEVEHICLE"), this.translate(".id-loading .LoadingTitle", "TRADEMARKET_SEARCHRESULT_WAIT"), this.manufacturerSelectorBinder = this.addChildBinder(".id-manufacturerFiltering", a.ManufacturerSelectorBinder, {
                    changeManufacturer: i
                });
                var l = this.addChildBinder(".SortingContainer", o.SortTabBinder, {
                    tabInfos: [{
                        title: "TRADEMARKET_LISTCOLUMN_CLASS",
                        type: "clazz"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_VEHICLENAME",
                        type: "name"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_UPGRADE",
                        type: "grade"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_OVR",
                        type: "ovr"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_MINPRICE",
                        type: "price"
                    }],
                    initSelectedIndex: 4,
                    initDescending: !0,
                    selectedTab: function() {
                        t.update(t.getProps())
                    }
                });
                this.vehicleSearchListBinder = this.addChildBinder(".VehicleList", s.VehicleSearchListBinder, {
                    itemBinderClass: c.VehicleConditionSearchListItemBinder,
                    sortTabBinder: l,
                    selectedItem: n,
                    onRegister: r,
                    onDetail: d,
                    itemCountPerPage: 8
                })
            }, t.prototype.update = function(e) {
                var t = e.searchList,
                    i = e.searching,
                    n = e.favorites;
                i && this.vehicleSearchListBinder.selectItem(-1), this.vehicleSearchListBinder.setProps({
                    items: t,
                    favorites: n
                }), this.visible(".id-noVehicles", !i && _.isEmpty(t)), this.visible(".id-loading", i)
            }, t.prototype.getSelectedManufacturers = function() {
                return this.manufacturerSelectorBinder.getSelectedManufacturerCodes()
            }, t.prototype.getSelectedOffer = function() {
                return this.vehicleSearchListBinder.getSelectedItem()
            }, t.prototype.updateFavorites = function(e) {
                this.setProps(n.__assign({}, this.getProps(), {
                    favorites: e
                }))
            }, t
        }(r.Binder);
    t.ConditionalSearchResultBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1403),
        a = i(1404),
        s = i(88),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.selectedManufacturerCodes = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                this.translate(".id-countTitle .id-textField", "TRADEMARKET_SELECTEDMANUFACTURER"), this.changeManufacturer = e.changeManufacturer, this.manufactureListBinder = this.addChildBinder(".id-tileList", a.ManufacturerListBinder, {
                    itemBinderClass: o.ManufacturerListItemBinder,
                    selectedItem: function(e) {
                        t.selectManufacturer(e ? e.code : s.AllCode), t.setManufacturerCount()
                    },
                    itemCountPerPage: 5,
                    itemCountPerLine: 4
                })
            }, t.prototype.onAddedToScene = function() {
                this.setManufacturerList()
            }, t.prototype.getSelectedManufacturerCodes = function() {
                return this.selectedManufacturerCodes
            }, t.prototype.setManufacturerList = function() {
                this.manufactures = _.union([s.AllCode], this.marketService.getSortedManufacturerCodes()).map(function(e) {
                    return {
                        code: e
                    }
                }), this.manufactureListBinder.setProps({
                    items: this.manufactures
                }), this.selectManufacturer(s.AllCode, !0), this.setManufacturerCount()
            }, t.prototype.selectManufacturer = function(e, t) {
                e === s.AllCode ? this.selectedManufacturerCodes = [] : 0 <= _.indexOf(this.selectedManufacturerCodes, e) ? _.remove(this.selectedManufacturerCodes, function(t) {
                    return t === e
                }) : this.selectedManufacturerCodes.push(e), this.manufactureListBinder.updateSelectedManufacturer(this.selectedManufacturerCodes), t || this.changeManufacturer && this.changeManufacturer()
            }, t.prototype.setManufacturerCount = function() {
                var e = _.isEmpty(this.selectedManufacturerCodes) ? _.size(this.manufactures) - 1 : this.selectedManufacturerCodes.length;
                this.bindHtml(".id-countNum .id-textField", '<span class="selected">' + e + "</span> / " + (_.size(this.manufactures) - 1))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("marketService")], c.prototype, "marketService", void 0), t.ManufacturerSelectorBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(this.face, !0), this.visible(".comp-Bitmap", !1), this.addManagedListener(this.face, o.MouseEventEx.CLICK, function(t) {
                    var i = e.getProps(),
                        n = i.info,
                        r = i.onClick;
                    r && r(n)
                })
            }, t.prototype.update = function(e) {
                var t = e.info,
                    i = t.index,
                    n = t.code,
                    r = t.selected,
                    o = (i + Math.floor(i / 4)) % 2;
                this.gotoAndStop(".ListBackground", o ? "odd" : "even"), this.bindText(".id-textField", this.getManufactureName(n)), this.face.selected = !!r
            }, t.prototype.getManufactureName = function(e) {
                return "all" === e ? this.$filter("translate")("TRADEMARKET_MANUFACTURER_ALL") : this.$filter("translate")(this.$filter("l10nstring")(e, "manufacturer"))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], a.prototype, "$filter", void 0), t.ManufacturerListItemBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1405),
        o = i(88),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.selectedList = [], t
            }
            return n.__extends(t, e), t.prototype.updatelistItemSelected = function(e) {
                var t = this;
                this.listBinder.binders.forEach(function(e) {
                    var i = e.getProps().info,
                        n = _.isEmpty(t.selectedList) && o.AllCode === i.code || 0 <= _.indexOf(t.selectedList, i.code);
                    e.face.selected = n
                })
            }, t.prototype.updateSelectedManufacturer = function(e) {
                this.selectedList = e, this.updatelistItemSelected(this.selectedIndex)
            }, t
        }(r.GridScrollListBinder);
    t.ManufacturerListBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(104),
        o = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.itemCountPerLine = 1, t.lineCount = 1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(t) {
                var i = t.itemCountPerLine;
                this.itemCountPerLine = i || 1, e.prototype.onFaceReady.call(this, t)
            }, t.prototype.applyCollection = function() {
                var e = this;
                this.lineCount = Math.ceil(this.items.length / this.itemCountPerLine), this.lineCount - this.itemCountPerPage < this.currentScrollTopIndex && (this.currentScrollTopIndex = this.lineCount - this.itemCountPerPage), this.currentScrollTopIndex < 0 && (this.currentScrollTopIndex = 0);
                var t = this.currentScrollTopIndex * this.itemCountPerLine,
                    i = _.slice(this.items, t, t + this.itemCountPerPage * this.itemCountPerLine);
                this.listBinder.applyCollection(_.map(i, function(t, i) {
                    return n.__assign({}, e.getItemProps(t), {
                        viewIndex: i
                    })
                }))
            }, t.prototype.calcScrollThumb = function() {
                this.scrollItemGap = this.face.height / this.lineCount;
                var e = this.listBinder.binders[0].face.height;
                this.scrollThumbHeight = this.face.height * this.face.height / (e * this.lineCount), this.scrollThumbHeight += this.face.height - ((this.lineCount - this.itemCountPerPage) * this.scrollItemGap + this.scrollThumbHeight), this.scrollThumbHeight = _.toInteger(this.scrollThumbHeight)
            }, t.prototype.isNeedScrollBar = function() {
                return this.itemCountPerPage < this.lineCount
            }, t.prototype.updateScroll = function(e) {
                var t = this.currentScrollTopIndex;
                this.currentScrollTopIndex += e, this.lineCount - this.itemCountPerPage < this.currentScrollTopIndex && (this.currentScrollTopIndex = this.lineCount - this.itemCountPerPage), this.currentScrollTopIndex < 0 && (this.currentScrollTopIndex = 0), t !== this.currentScrollTopIndex && (this.applyCollection(), this.updatelistItemSelected(this.selectedIndex)), !this.scrollBar || t === this.currentScrollTopIndex && 0 !== e || $(this.scrollThumb).css("top", _.toInteger(this.currentScrollTopIndex * this.scrollItemGap))
            }, t
        }(r.LineScrollListBinder);
    t.GridScrollListBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(13),
        s = i(288),
        c = i(4),
        d = i(208),
        l = i(88),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.conditions = {}, t.btnClazzList = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this,
                    i = e.searchCondition;
                this.translate(".id-priceFilteringTitle", "TRADEMARKET_CONDITION_PRICE"), this.translate(".id-classFilteringTitle", "TRADEMARKET_CONDITION_CLASS"), this.translate(".id-gradeFilteringTitle", "TRADEMARKET_CONDITION_UPGRADE"), this.translate(".id-ovrFilteringTitle", "TRADEMARKET_CONDITION_OVR"), this.translate(".id-statusFilteringTitle1", "TRADEMARKET_CONDITION_TOPSPEED"), this.translate(".id-statusFilteringTitle2", "TRADEMARKET_CONDITION_ACCELERATION"), this.translate(".id-statusFilteringTitle3", "TRADEMARKET_CONDITION_MAXNITRO"), this.translate(".id-statusFilteringTitle4", "TRADEMARKET_CONDITION_STRENGTH"), this.translate(".id-statusFilteringTitle5", "TRADEMARKET_CONDITION_DURABILITY"), this.translate(".id-reset", "TRADEMARKET_BUTTON_RESETCONDITION"), this.translate(".id-search", "TRADEMARKET_BUTTON_SEARCH"), l.ClazzList.forEach(function(e, i) {
                    t.translate(".id-tileList .id-" + e + "Class", ("TRADEMARKET_CONDITION_CLASS_" + e).toUpperCase()), t.gotoAndStop(".id-tileList .id-" + e + "Class .ListBackground", i % 2 ? "odd" : "even")
                });
                var n = this.getFace(".id-searchTooltip");
                this.addManagedListener(n, o.MouseEventEx.MOUSE_OVER, function(e) {
                    t.tooltipService.show(e, "bottom", a.TooltipType.MarketSearchGuide, {}, {
                        marginTop: 41,
                        marginLeft: -425,
                        width: 465
                    })
                }), this.addManagedListener(n, o.MouseEventEx.MOUSE_OUT, function(e) {
                    t.tooltipService.hide()
                }), this.nameInputText = this.convertFace(this.getFace(".id-searchInput")), this.nameInputText.maxLength = 30, this.nameInputText.hasSize = !0;
                var r = this.nameInputText.textField.htmlElement;
                $(r).attr("placeholder", this.$filter("translate")("TRADEMARKET_DEFAULTSEARCH")), this.registerEventHandler(r, "input", function(e) {
                    t.onInputNameInputText(e)
                }), this.registerEventHandler(r, "keydown", function(e) {
                    if (40 === e.keyCode) return $(".dropdown").focus(), e.preventDefault()
                }), this.minPriceInputText = this.convertFace(this.getFace(".id-priceInput .id-priceInput1")), this.minPriceReadText = this.getFace(".id-priceInput .id-priceTextField1"), this.minPriceInputText.maxLength = 21, this.minPriceInputText.textField.width = 168, $(this.minPriceInputText.textField.htmlElement).attr("placeholder", "0"), this.registerEventHandler(this.minPriceInputText.textField.htmlElement, "input", function(e) {
                    t.minPriceInputText.text = t.minPriceInputText.text.replace(/[^0-9,]/g, ""), t.onInputPriceInputText("minPrice"), t.updateMaxPriceReadTextColor(!1)
                }), this.maxPriceInputText = this.convertFace(this.getFace(".id-priceInput .id-priceInput2")), this.maxPriceReadText = this.getFace(".id-priceInput .id-priceTextField2"), this.maxPriceInputText.maxLength = 21, this.maxPriceInputText.textField.width = 168, $(this.maxPriceInputText.textField.htmlElement).attr("placeholder", this.$filter("translate")("TRADEMARKET_CONDITION_MAX")), this.maxPriceInputText.addEventListener(d.FocusEventEx.FOCUS_IN, function(e) {
                    t.changePriceCondFontType(t.maxPriceInputText.textField, !1), t.updateMaxPriceReadTextColor(!0)
                }), this.registerEventHandler(this.maxPriceInputText.textField.htmlElement, "input", function(e) {
                    t.maxPriceInputText.text = t.maxPriceInputText.text.replace(/[^0-9,]/g, ""), t.onInputPriceInputText("maxPrice"), t.updateMaxPriceReadTextColor(!0)
                }), this.registerEventHandler(this.maxPriceInputText.textField.htmlElement, "blur", function(e) {
                    _.isEmpty(t.maxPriceInputText.text) && t.changePriceCondFontType(t.maxPriceInputText.textField, !0), t.updateMaxPriceReadTextColor(!1)
                }), l.ClazzList.forEach(function(e, i) {
                    var n = ".id-tileList .id-" + e + "Class",
                        r = t.getFace(n);
                    t.addManagedListener(r, o.MouseEventEx.CLICK, function(i) {
                        t.selectClazz(e)
                    }), t.btnClazzList.push(r)
                });
                var s = this.getConditionUiSpec().MinMaxConditions,
                    c = s.Condition,
                    u = s.SubCondition;
                c.forEach(function(e) {
                    u.forEach(function(i) {
                        var n = t.convertFace(e.container + " " + i.id);
                        n.hasSize = !0, n.addEventListener(o.MouseEventEx.CLICK, function(r) {
                            t.renderConditionDropDown(e.itemType, n, i.type, e.name, e.onClick, e.collection)
                        })
                    })
                }), this.addManagedListener(this.getFace(".id-reset"), o.MouseEventEx.CLICK, function(e) {
                    t.initConditions()
                }), this.addManagedListener(this.getFace(".id-search"), o.MouseEventEx.CLICK, function(e) {
                    i && i()
                })
            }, t.prototype.onAddedToScene = function() {
                this.initConditions()
            }, t.prototype.registerEventHandler = function(e, t, i) {
                e.addEventListener(t, i)
            }, t.prototype.changePriceCondFontType = function(e, t) {
                $(e.htmlElement).removeClass(t ? "global-font" : "local-font"), $(e.htmlElement).addClass(t ? "local-font" : "global-font"), t ? $(e.htmlElement).addClass("empty") : $(e.htmlElement).removeClass("empty")
            }, t.prototype.changeMinMaxCondFontType = function(e, t) {
                $(e.htmlElement).removeClass(t ? "limit global-font" : "nolimit"), $(e.htmlElement).addClass(t ? "nolimit" : "limit")
            }, t.prototype.getVehicleCodesByName = function(e) {
                var t = this,
                    i = [],
                    n = function(e) {
                        var i = e.toLowerCase();
                        return _.forEach(t.marketService.getSearchManufacturers(), function(e) {
                            i = i.replace(e.name.toLowerCase(), "")
                        }), i.trim()
                    }(e);
                if (!_.isEmpty(n)) {
                    var r = n.split(" ");
                    r.forEach(function(e, t) {
                        return r[t] = e.replace("(", "").replace(")", "")
                    }), _.forEach(this.marketService.getSearchVehicles(), function(e) {
                        var t = e.name.toLowerCase().replace("(", "").replace(")", "").split(" ");
                        0 === _.differenceWith(r, t, function(e, t) {
                            return t.match(e)
                        }).length && i.push(e.code)
                    })
                }
                return i
            }, t.prototype.getManufacturerCodesByName = function(e) {
                var t = [];
                return _.forEach(this.marketService.getSearchManufacturers(), function(i) {
                    i.name.toLowerCase().match(e.toLowerCase()) && t.push(i.code)
                }), t
            }, t.prototype.getSearchConditions = function() {
                var e = this;
                if (this.conditions.code = [], this.conditions.manufacturerCode = [], !_.isEmpty(this.nameInputText.text)) {
                    var t = _.words(this.nameInputText.text, /[^,]+/g);
                    _.forEach(t, function(t) {
                        var i = e.getVehicleCodesByName(_.trim(t));
                        _.isEmpty(i) || (e.conditions.code = _.concat(e.conditions.code, i));
                        var n = e.getManufacturerCodesByName(_.trim(t));
                        _.isEmpty(n) || (e.conditions.manufacturerCode = _.concat(e.conditions.manufacturerCode, n))
                    }), this.conditions.code = _.uniq(this.conditions.code), this.conditions.manufacturerCode = _.uniq(this.conditions.manufacturerCode)
                }
                return this.conditions
            }, t.prototype.getConditionUiSpec = function() {
                var e = this,
                    t = function(t, i, n) {
                        e.conditions[i] = t;
                        var r = n.$(".id-textField");
                        e.bindText(r, e.conditions[i]), e.changeMinMaxCondFontType(r, !1)
                    },
                    i = function(t, i, n) {
                        e.conditions[i] = t.value || t, e.gotoAndStop(n.$(".id-vehicleGrade"), e.conditions[i] + 1)
                    };
                return {
                    MinMaxConditions: {
                        Condition: [{
                            name: "Grade",
                            container: ".id-gradeFilteringDropdown",
                            collection: _.map(l.GradeList, function(e) {
                                return {
                                    value: e,
                                    src: "images/html/exchange-market/vehicleGrade" + e + ".png"
                                }
                            }),
                            itemType: "image",
                            onClick: i
                        }, {
                            name: "Ovr",
                            container: ".id-ovrFilteringDropdown",
                            collection: this.marketService.searchValue.ovr,
                            itemType: "number",
                            onClick: t
                        }, {
                            name: "Speed",
                            container: ".id-statusFilteringDropdown1",
                            collection: this.marketService.searchValue.topspeed,
                            itemType: "number",
                            onClick: t
                        }, {
                            name: "Acceleration",
                            container: ".id-statusFilteringDropdown2",
                            collection: this.marketService.searchValue.acceleration,
                            itemType: "number",
                            onClick: t
                        }, {
                            name: "Nitro",
                            container: ".id-statusFilteringDropdown3",
                            collection: this.marketService.searchValue.nitrocapacity,
                            itemType: "number",
                            onClick: t
                        }, {
                            name: "Strength",
                            container: ".id-statusFilteringDropdown4",
                            collection: this.marketService.searchValue.strength,
                            itemType: "number",
                            onClick: t
                        }, {
                            name: "Durability",
                            container: ".id-statusFilteringDropdown5",
                            collection: this.marketService.searchValue.durability,
                            itemType: "number",
                            onClick: t
                        }],
                        SubCondition: [{
                            id: ".id-dropdown1",
                            type: "min"
                        }, {
                            id: ".id-dropdown2",
                            type: "max"
                        }]
                    }
                }
            }, t.prototype.initConditions = function() {
                var e = this;
                this.conditions = {
                    code: [],
                    clazz: [],
                    manufacturerCode: [],
                    minGrade: 1,
                    maxGrade: 10
                }, this.nameInputText.text = "", this.minPriceInputText.text = "", this.maxPriceInputText.text = "", this.changePriceCondFontType(this.maxPriceInputText.textField, !0), this.bindText(this.minPriceReadText, ""), this.bindText(this.maxPriceReadText, "");
                var t = this.getConditionUiSpec().MinMaxConditions,
                    i = t.Condition,
                    n = t.SubCondition;
                i.forEach(function(t) {
                    n.forEach(function(i) {
                        var n = e.convertFace(t.container + " " + i.id),
                            r = "" + i.type + t.name;
                        if ("Grade" === t.name) e.gotoAndStop(n.$(".id-vehicleGrade"), e.conditions[r] + 1);
                        else {
                            var o = n.$(".id-textField");
                            "min" === i.type ? e.bindText(o, "-") : e.bindText(o, e.$filter("translate")("TRADEMARKET_CONDITION_MAX")), e.changeMinMaxCondFontType(o, !0)
                        }
                    })
                }), this.selectClazz(l.AllClazz)
            }, t.prototype.isEmptyKeyword = function() {
                return _.isEmpty(this.nameInputText.text)
            }, t.prototype.onInputNameInputText = function(e) {
                var t = this,
                    i = this.nameInputText.text,
                    n = i,
                    r = _.words(n, /[^,]+/g),
                    o = r[r.length - 1],
                    a = this.getSearchResult(_.trim(o));
                s.render(!0, {
                    itemType: "text",
                    items: _.map(a, "view"),
                    element: angular.element(e.currentTarget).parent(".id-searchInput"),
                    className: "market-keyword-search",
                    onClick: function(e) {
                        var n = i.split(",");
                        n[n.length - 1] = a[e].value, t.nameInputText.text = n.join(", ")
                    },
                    isActiveKeyEvent: !1
                })
            }, t.prototype.getSearchResult = function(e) {
                var t = new RegExp(e, "i"),
                    i = _.filter(this.marketService.getSearchManufacturers(), function(e) {
                        var i = t.test(e.name),
                            n = t.test(e.penName);
                        return i || n
                    }).map(function(e) {
                        return {
                            value: e.name,
                            view: "<span class='mf'>" + e.name + "</span>"
                        }
                    }),
                    n = _.sortBy(_.filter(this.marketService.getSearchVehicles(), function(e) {
                        var i = t.test(e.manufacturer),
                            n = t.test(e.name),
                            r = t.test(e.manufacturer + " " + e.name),
                            o = t.test(e.penName),
                            a = t.test(e.manufacturerPenName);
                        return i || n || r || o || a
                    }).map(function(e) {
                        return {
                            value: e.manufacturer + " " + e.name,
                            view: "<span class='mf'>" + e.manufacturer + "</span> " + e.name
                        }
                    }), "value");
                return i.concat(n)
            }, t.prototype.onInputPriceInputText = function(e) {
                var t, i;
                "minPrice" === e ? (t = this.minPriceInputText, i = this.minPriceReadText) : (t = this.maxPriceInputText, i = this.maxPriceReadText);
                var n = t.text.replace(/,/g, "");
                this.conditions[e] = _.isEmpty(n) ? void 0 : Number(n), t.text = c.default.toMoney(n), this.bindText(i, c.default.changeNumberToText(String(n), this.$filter("translate")("TRADEMARKET_PRICESEARCH_UNIT1"), this.$filter("translate")("TRADEMARKET_PRICESEARCH_UNIT2"), this.$filter("translate")("TRADEMARKET_PRICESEARCH_UNIT3"), this.$filter("translate")("TRADEMARKET_PRICESEARCH_UNIT4")))
            }, t.prototype.updateMaxPriceReadTextColor = function(e) {
                var t = this.maxPriceReadText.$(".id-textField"),
                    i = Number(this.minPriceInputText.text.replace(/,/gi, ""));
                Number(this.maxPriceInputText.text.replace(/,/gi, "")) < i ? $(t.htmlElement).addClass("lower") : $(t.htmlElement).removeClass("lower"), e ? $(t.htmlElement).addClass("focus") : $(t.htmlElement).removeClass("focus")
            }, t.prototype.selectClazz = function(e) {
                var t = this;
                e === l.AllClazz ? this.conditions.clazz = [] : _.indexOf(this.conditions.clazz, e) >= 0 ? _.remove(this.conditions.clazz, function(t) {
                    return t === e
                }) : this.conditions.clazz.push(e), this.btnClazzList.forEach(function(e, i) {
                    var n = l.ClazzList[i];
                    e.selected = _.isEmpty(t.conditions.clazz) && l.AllClazz === n || 0 <= _.indexOf(t.conditions.clazz, n)
                })
            }, t.prototype.renderConditionDropDown = function(e, t, i, n, r, o) {
                var a = this,
                    c = t.htmlElement,
                    d = "" + i + n,
                    l = ("min" === i ? "max" : "min") + n,
                    u = _.cloneDeep(o);
                _.isUndefined(this.conditions[l]) || (u = _.filter(u, function(e) {
                    var t = e.value || e;
                    return "min" === i ? t <= a.conditions[l] : a.conditions[l] <= t
                }));
                var p = _.map(u, function(e) {
                        return e.src || e
                    }),
                    h = _.findIndex(u, function(e) {
                        return (e.value || e) === a.conditions[d]
                    });
                s.render(!0, {
                    itemType: e,
                    items: p,
                    selectedIndex: h,
                    element: angular.element(c),
                    onClick: function(e) {
                        return r(u[e], d, t)
                    },
                    isActiveKeyEvent: !1,
                    className: "market-search",
                    style: {
                        isDropUp: !0
                    }
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], u.prototype, "tooltipService", void 0), n.__decorate([r.autowired("marketService")], u.prototype, "marketService", void 0), t.ConditionalSearchBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(140),
        a = i(633),
        s = i(241),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this,
                    i = e.onSearch,
                    n = e.onDetail;
                this.translate(".id-countTitle", "TRADEMARKET_MYVEHICLE_AMOUNT");
                var r = this.addChildBinder(".SortingContainer", o.SortTabBinder, {
                    tabInfos: [{
                        title: "TRADEMARKET_LISTCOLUMN_FAVORITE",
                        type: "favorite"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_CLASS",
                        type: "clazz"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_VEHICLENAME",
                        type: "name"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_UPGRADE",
                        type: "grade"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_OVR",
                        type: "ovr"
                    }],
                    initDescending: !0,
                    selectedTab: function() {
                        t.update(t.getProps())
                    }
                });
                this.vehicleListBinder = this.addChildBinder(".VehicleList", a.VehicleListBinder, {
                    itemBinderClass: s.VehicleListItemBinder,
                    sortTabBinder: r,
                    onSearch: i,
                    onDetail: n,
                    itemCountPerPage: 12
                })
            }, t.prototype.update = function(e) {
                var t = e.vehicles;
                this.vehicleListBinder.setProps({
                    items: t
                }), this.bindText(".id-countNum .id-Num", _.size(t))
            }, t
        }(r.Binder);
    t.MyVehicleListBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(140),
        a = i(1409),
        s = i(1410),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this,
                    i = e.onSearch,
                    n = e.onDetail,
                    r = e.onUnregister;
                this.translate(".id-countTitle", "TRADEMARKET_FAVORITE_VEHICLEAMOUNT"), this.translate(".id-noVehicles", "TRADEMARKET_NOFAVORITEVEHICLE");
                var c = this.addChildBinder(".SortingContainer", o.SortTabBinder, {
                    tabInfos: [{
                        title: "TRADEMARKET_LISTCOLUMN_CLASS",
                        type: "clazz"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_VEHICLENAME",
                        type: "name"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_UPGRADE",
                        type: "grade"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_OVR",
                        type: "ovr"
                    }],
                    initDescending: !0,
                    selectedTab: function() {
                        t.update(t.getProps())
                    }
                });
                this.favoriteListBinder = this.addChildBinder(".VehicleList", a.FavoriteListBinder, {
                    itemBinderClass: s.FavoriteListItemBinder,
                    sortTabBinder: c,
                    onSearch: i,
                    onDetail: n,
                    onUnregister: r,
                    itemCountPerPage: 12
                })
            }, t.prototype.update = function(e) {
                var t = e.favorites;
                this.favoriteListBinder.setProps({
                    items: t
                }), this.bindText(".id-countNum .id-Num", _.size(t)), this.visible(".id-noVehicles", _.isEmpty(t))
            }, t
        }(r.Binder);
    t.FavoriteVehicleListBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(104),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(t) {
                e.prototype.onFaceReady.call(this, t), this.onSearch = t.onSearch, this.onDetail = t.onDetail, this.onUnregister = t.onUnregister
            }, t.prototype.setItems = function(e) {
                var t = e.items || [],
                    i = this.sortTabBinder.getSelectedTabInfo(),
                    r = i.tabInfo,
                    o = i.descending;
                t = this.marketService.sortingFavorite(t, r.type, o), this.items = t.map(function(e, t) {
                    return n.__assign({}, e.vehicle, e.favorite, {
                        status: e.calStatus,
                        ovr: e.calOvr,
                        index: t,
                        favorite: !0
                    })
                })
            }, t.prototype.getItemProps = function(e) {
                var t = this;
                return {
                    info: e,
                    onClick: function(e) {
                        return t.selectItem(e.index)
                    },
                    onSearch: function(e) {
                        return t.onSearch(e.code, e.grade)
                    },
                    onDetail: function(e) {
                        return t.onDetail(e)
                    },
                    onUnregister: function(e) {
                        return t.onUnregister(e.code, e.grade)
                    }
                }
            }, t
        }(o.LineScrollListBinder);
    n.__decorate([r.autowired("marketService")], a.prototype, "marketService", void 0), t.FavoriteListBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(241),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                e.prototype.onFaceReady.call(this);
                var i = this.getFace(".id-clear");
                this.addManagedListener(i, o.MouseEventEx.CLICK, function(e) {
                    var i = t.getProps(),
                        n = i.info,
                        r = i.onUnregister;
                    r && r(n)
                })
            }, t.prototype.update = function(e) {
                var t = e.info;
                this.visible(".id-tagContainer", t.favorite), this.gotoAndStop(".id-vehicleGrade", "grade" + t.grade), this.gotoAndStop(".id-partIcon", this.isOwnParts(t.parts)), this.gotoAndStop(".id-background", t.index % 2 ? "odd" : "even"), this.bindText(".id-vehicleClass .id-textField", t.clazz), this.bindText(".id-manufacturerName .id-textField", this.$filter("manufacturerName")(t.manufacturerCode)), this.bindText(".id-vehicleName .id-textField", this.$filter("vehicleName")(t.code)), this.bindText(".id-ovr .id-textField", t.ovr), this.translate(".id-clear .id-textField", "TRADEMARKET_FAVORITELIST_REGISTRATIONCANCLE")
            }, t
        }(a.VehicleListItemBinder);
    n.__decorate([r.autowired("vehicleDataService")], s.prototype, "vehicleDataService", void 0), t.FavoriteListItemBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(140),
        a = i(631),
        s = i(632),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = e.selectedItem,
                    i = e.onRegister,
                    n = e.onDetail;
                this.translate(".id-noVehicles", "TRADEMARKET_NOSALEVEHICLE");
                var r = this.addChildBinder(".SortingContainer", o.SortTabBinder, {
                    tabInfos: [{
                        title: "TRADEMARKET_LISTCOLUMN_CLASS",
                        type: "clazz"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_VEHICLENAME",
                        type: "name"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_UPGRADE",
                        type: "grade"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_OVR",
                        type: "ovr"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_MINPRICE",
                        type: "price"
                    }],
                    initSelectedIndex: 4,
                    initDescending: !1,
                    disableMouseEvent: !0
                });
                this.vehicleSearchListBinder = this.addChildBinder(".VehicleList", a.VehicleSearchListBinder, {
                    itemBinderClass: s.VehicleSearchListItemBinder,
                    sortTabBinder: r,
                    selectedItem: t,
                    onRegister: i,
                    onDetail: n,
                    itemCountPerPage: 12
                })
            }, t.prototype.update = function(e) {
                var t = e.searchList,
                    i = e.favorites,
                    n = e.searching,
                    r = e.code,
                    o = e.grade;
                n && this.vehicleSearchListBinder.selectItem(-1), this.vehicleSearchListBinder.setProps({
                    items: t,
                    favorites: i,
                    code: r,
                    grade: o
                }), this.visible(".id-noVehicles", !n && _.isEmpty(t))
            }, t.prototype.getSelectedOffer = function() {
                return this.vehicleSearchListBinder.getSelectedItem()
            }, t.prototype.updateFavorites = function(e) {
                this.vehicleSearchListBinder.setProps({
                    items: this.props.searchList,
                    favorites: e
                })
            }, t
        }(r.Binder);
    t.VehicleSearchResultBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.addManagedListener(this.face, o.MouseEventEx.CLICK, function(t) {
                    e.props.onClick && e.props.onClick(e.props)
                })
            }, t.prototype.update = function(e) {
                this.translate(".id-buttonTextField", e.title)
            }, t
        }(r.Binder);
    t.TabMenuButtonBinder = a
}, function(e, t, i) {
    "use strict";

    function n(e) {
        return {
            type: "vehicle-detail-parts.setVehicle",
            props: e
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.setVehicle = n
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(625),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.vehiclePartsBinder = this.addChildBinder(".PartsInfo", o.VehiclePartsBinder)
            }, t.prototype.update = function(e) {
                _.isEmpty(e) || this.vehiclePartsBinder.setProps(e)
            }, t.prototype.mapStateToProps = function(e) {
                return e.vehicleDetailParts
            }, t
        }(r.Binder);
    t.VehicleDetailPartsBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1416),
        o = i(319);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/market/vehicle/sell", 15).container({
            stages: {
                "exchange-market-sell": r.MarketVehicleSellBinder
            },
            resolve: {
                player: ["playerService", function(e) {
                    return e.fetch()
                }],
                vehicle: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                market: ["marketService", function(e) {
                    return e.fetch()
                }]
            }
        }).dialog({
            stages: {
                "vehicle-detail": o.VehicleDetailBinder
            }
        });
        e.state("root.menu.VehicleSell", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(6),
        a = i(1),
        s = i(3),
        c = i(2),
        d = i(1417),
        l = i(1419),
        u = i(1420),
        p = i(12),
        h = i(67),
        f = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.refreshLowerUpperAndDetail = _.debounce(function(e) {
                    t.getLowerUpperAndDetail(e)
                }.bind(t), 500, {
                    leading: !0
                }), t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(".id-spCountNum", !0), this.hasSize(".id-spCountNum .id-titleLabel", !1), this.hasSize(".id-spCountNum .id-valueLabel", !1), this.translate(".id-vehicleListTitle > .id-textField", "TRADEMARKET_SELLVEHICLELIST"), this.translate(".id-spCountNum .id-titleLabel", "TRADEMARKET_MYSP"), this.translate(".id-description > .id-textField", "TRADEMARKET_SELLVEHICLE_DEFAULTNOTICE"), this.btnSell = this.getFace(".id-sell"), this.translate(this.btnSell, "TRADEMARKET_BUTTON_SELL"), this.addManagedListener(this.btnSell, c.MouseEventEx.CLICK, function(t) {
                    var i = e.myVehicleListBinder.getSelectedVehicle();
                    if (!_.isEmpty(i)) {
                        var n = e.tuningShopService.getTuningVehicle(i.code);
                        r.debug("--trade sell button, defaulTuning", n, "vehicle:", i.paint);
                        var o = n.defaultColorCode !== i.paint.colorCode;
                        o = o || n.defaultWheelCode !== i.paint.wheelCode, o = o || n.defaultWrapCode !== i.paint.wrapCode, o ? e.popupService.draw("ConfirmCancelPopup", {
                            title: "TRADEMARKET_POPUP_VEHICLESELL_TUNING_TITLE",
                            description: "TRADEMARKET_POPUP_VEHICLESELL_TUNING_DESC1",
                            confirm: function() {
                                e.showSellPopup(i)
                            }
                        }) : e.showSellPopup(i)
                    }
                }), this.myVehicleListBinder = this.addChildBinder(".id-sellMyVehicleListContainer", d.MyVehicleListBinder, {
                    selectedItem: function(t) {
                        return e.selectedVehicle(t)
                    },
                    onDetail: function(t) {
                        return e.showDetailPopup(t)
                    }
                }), this.sellInfoBinder = this.addChildBinder(".SellInfoContainer", l.SellInfoBinder), this.searchResultBinder = this.addChildBinder(".MarketPriceContainer", u.PriceSearchResultBinder)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    player: e.player,
                    vehicle: e.vehicle
                }
            }, t.prototype.update = function(e) {
                var t = e.player;
                this.recentVid = t.recent.vid, this.vehicles = p.getOwnVehicles();
                var i = this.$filter("currency")(t.sp, "", 0);
                this.bindText(".id-spCountNum .id-valueLabel", i), this.myVehicleListBinder.setProps({
                    vehicles: this.vehicles,
                    player: t
                })
            }, t.prototype.showSellPopup = function(e) {
                var t = this,
                    i = s.store.getState().market;
                if (!i.priceData.isValidPrice) return void this.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_CANTSELL_WRONGPRICE_TITLE",
                    description: "TRADEMARKET_CANTSELL_WRONGPRICE_DESC"
                });
                if (0 === e.grade) return void this.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_CANTSELL_ZEROUPGRADE_TITLE",
                    description: "TRADEMARKET_CANTSELL_ZEROUPGRADE_DESC"
                });
                if (e.favorite) return void this.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_CANTSELL_FAVORITEVEHICLE_TITLE",
                    description: "TRADEMARKET_CANTSELL_FAVORITEVEHICLE_DESC"
                });
                if (this.marketService.maxOfferCount <= i.myOffers.length) return void this.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_CANTSELL_SELLLISTFULL_TITLE",
                    description: "TRADEMARKET_CANTSELL_SELLLISTFULL_DESC"
                });
                var n = i.priceData.price;
                if (n < Number(this.limitPrice.lower) || n > Number(this.limitPrice.upper)) return void this.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_SELLFAIL_CHANGEPRICE_TITLE",
                    description: "TRADEMARKET_SELLLIST_POPUP_PRICEINPUTERROR"
                });
                this.popupService.draw("SellVehiclePopup", {
                    vehicle: e,
                    price: n,
                    confirm: function() {
                        t.marketService.registerVehicleOffer(e.id, e.code, e.grade, i.priceData.price).then(function(i) {
                            t.openSellResultPopup(e)
                        }).then(function() {
                            if (e.id === t.recentVid) {
                                var i = t.vehicles.sort(h(function(e) {
                                    return e.favorite
                                }, -1).thenBy(function(e) {
                                    return e.ovr
                                }, -1));
                                t.changeRecentVehicle(i[0])
                            }
                        }).catch(function(e) {
                            t.popupService.draw("ConfirmPopup", {
                                title: "ALARM_SERVERLOST_TITLE",
                                description: "ALARM_SERVERLOST_TEXT"
                            })
                        })
                    }
                })
            }, t.prototype.changeRecentVehicle = function(e) {
                this.playerService.changeRecentVehicle(e.id)
            }, t.prototype.openSellResultPopup = function(e) {
                this.popupService.draw("SellVehicleConfirmPopup", {
                    vehicle: e
                })
            }, t.prototype.showDetailPopup = function(e) {
                this.marketService.emit("openVehicleDetail", e)
            }, t.prototype.selectedVehicle = function(e) {
                if (this.limitPrice = {
                        base: 0,
                        lower: 0,
                        upper: 0
                    }, _.isEmpty(e)) this.enableButton(this.btnSell, !1), this.sellInfoBinder.setProps({}), this.searchResultBinder.setProps({});
                else {
                    var t = this.sellInfoBinder.getProps().vehicle;
                    t && t.code === e.code && t.grade === e.grade ? this.refreshLowerUpperAndDetail(e) : this.getLowerUpperAndDetail(e)
                }
            }, t.prototype.getLowerUpperAndDetail = function(e) {
                var t = this;
                this.enableButton(this.btnSell, !1), this.sellInfoBinder.setProps({
                    vehicle: e
                }), o.all([this.marketService.getVehicleOfferByCode(e.code), this.marketService.getMarketLimitPrice(e.code, e.grade)]).then(function(i) {
                    var n = i[0],
                        r = i[1];
                    t.searchResultBinder.setProps({
                        searchList: n,
                        selectedGrade: e.grade
                    });
                    var o = _.find(n, function(t) {
                        return t.summary.grade === e.grade
                    });
                    t.setDefaultPrice(e, o, r)
                }).catch(function(e) {
                    return t.searchResultBinder.setProps({})
                })
            }, t.prototype.setDefaultPrice = function(e, t, i) {
                this.limitPrice = i, this.sellInfoBinder.setProps({
                    vehicle: e,
                    summary: t,
                    limitPrice: i
                }), this.enableButton(this.btnSell, 1 < _.size(this.vehicles))
            }, t
        }(a.StageBinder);
    n.__decorate([a.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([a.autowired("popupService")], f.prototype, "popupService", void 0), n.__decorate([a.autowired("playerService")], f.prototype, "playerService", void 0), n.__decorate([a.autowired("marketService")], f.prototype, "marketService", void 0), n.__decorate([a.autowired("vehicleDataService")], f.prototype, "vehicleDataService", void 0), n.__decorate([a.autowired("tuningShopService")], f.prototype, "tuningShopService", void 0), t.MarketVehicleSellBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(140),
        a = i(2),
        s = i(633),
        c = i(1418),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this,
                    i = e.selectedItem,
                    n = e.onDetail;
                this.btnAllCheck = this.getFace(".id-allCheck"), this.translate(".id-allCheck .id-checkboxName .id-textField", "TRADEMARKET_CHECK_ALLVEHICLELIST"), this.translate(".id-countTitle .id-textField", "TRADEMARKET_MYVEHICLE_AMOUNT"), this.translate(".id-noVehicles", "TRADEMARKET_NOPOSSIBLESALEVEHICLE"), this.addManagedListener(this.btnAllCheck, a.MouseEventEx.CLICK, function(e) {
                    t.btnAllCheck.selected = !t.btnAllCheck.selected, t.update(t.getProps())
                });
                var r = this.addChildBinder(".SortingContainer", o.SortTabBinder, {
                    tabInfos: [{
                        title: "TRADEMARKET_LISTCOLUMN_FAVORITE",
                        type: "favorite"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_CLASS",
                        type: "clazz"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_VEHICLENAME",
                        type: "name"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_UPGRADE",
                        type: "grade"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_OVR",
                        type: "ovr"
                    }],
                    initDescending: !0,
                    selectedTab: function() {
                        t.update(t.getProps())
                    }
                });
                this.vehicleListBinder = this.addChildBinder(".VehicleList", s.VehicleListBinder, {
                    itemBinderClass: c.VehicleListItemBinder,
                    sortTabBinder: r,
                    selectedItem: i,
                    onDetail: n,
                    itemCountPerPage: 12
                })
            }, t.prototype.update = function(e) {
                var t = e.vehicles,
                    i = e.player,
                    n = this.getFilteredVehicles(t, i.recent.vid);
                this.vehicleListBinder.setProps({
                    items: n
                }), this.bindText(".id-countNum .id-Num", _.size(t)), this.visible(".id-noVehicles", _.isEmpty(n))
            }, t.prototype.getFilteredVehicles = function(e, t) {
                var i = this.btnAllCheck.selected;
                return _.filter(e, function(e) {
                    return i || 0 !== e.grade && !e.igr && !e.favorite && e.id !== t
                })
            }, t.prototype.getSelectedVehicle = function() {
                return this.vehicleListBinder.getSelectedItem()
            }, t
        }(r.Binder);
    t.MyVehicleListBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(241),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(t) {
                e.prototype.update.call(this, t), this.visible(".id-blind", this.isNoSellVehicle(t.info))
            }, t.prototype.isNoSellVehicle = function(e) {
                return !!e.favorite || 0 === e.grade
            }, t
        }(r.VehicleListItemBinder);
    t.VehicleListItemBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(56),
        a = i(626),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-title", "TRADEMARKET_SELLVEHICLE"), this.translate(".id-marketPrice .id-titleTextField1", "TRADEMARKET_UPPERLIMITPRICE"), this.translate(".id-marketPrice .id-titleTextField2", "TRADEMARKET_LOWERLIMITPRICE"), this.translate(".id-vehiclePriceTitle", "TRADEMARKET_SELLLIST_VEHICLE_SELLPRICE"), this.vehicleBinder = this.addChildBinder(".id-vehicleItem", o.VehicleCard), this.vehicleBinder.face.mouseEventEnabled = !1, this.vehiclePriceBinder = this.addChildBinder(".id-vehiclePriceInput", a.VehiclePriceBinder)
            }, t.prototype.update = function(e) {
                var t = e.vehicle,
                    i = e.summary,
                    n = e.limitPrice;
                if (_.isEmpty(t) ? this.vehicleBinder.face.visible = !1 : (this.vehicleBinder.face.visible = !0, this.vehicleBinder.setProps({
                        vehicle: t,
                        muteStatusIcon: !0,
                        disableMouse: !0
                    })), _.isEmpty(n)) this.bindText(".id-marketPrice .id-price1", "-"), this.bindText(".id-marketPrice .id-price2", "-"), this.vehiclePriceBinder.setInitialPrice(0, 0, 0, 0);
                else {
                    var r = this.$filter("currency")(n.upper, "", 0);
                    this.bindText(".id-marketPrice .id-price1", r);
                    var o = this.$filter("currency")(n.lower, "", 0);
                    this.bindText(".id-marketPrice .id-price2", o);
                    var a = _.isEmpty(i) ? n.upper : i.summary.price;
                    this.vehiclePriceBinder.setInitialPrice(a, n.base, n.lower, n.upper)
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), t.SellInfoBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(140),
        a = i(1421),
        s = i(1422),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-title", "TRADEMARKET_PRICESTATUS"), this.translate(".id-noVehicles", "TRADEMARKET_NOSALEVEHICLE");
                var e = this.addChildBinder(".SortingContainer", o.SortTabBinder, {
                    tabInfos: [{
                        title: "TRADEMARKET_LISTCOLUMN_UPGRADE",
                        type: "grade"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_OVR",
                        type: "ovr"
                    }, {
                        title: "TRADEMARKET_LISTCOLUMN_MINPRICE",
                        type: "price"
                    }, {
                        title: "TRADEMARKET_AMOUNT",
                        type: "count"
                    }],
                    initSelectedIndex: 2,
                    disableMouseEvent: !0
                });
                this.priceSearchList = this.addChildBinder(".id-marketPriceList", a.PriceSearchListBinder, {
                    itemBinderClass: s.PriceSearchListItemBinder,
                    sortTabBinder: e,
                    itemCountPerPage: 11
                })
            }, t.prototype.update = function(e) {
                var t = e.searchList,
                    i = e.selectedGrade;
                this.priceSearchList.setProps({
                    items: t,
                    selectedGrade: i
                }), this.visible(".id-noVehicles", _.isEmpty(t))
            }, t
        }(r.Binder);
    t.PriceSearchResultBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(104),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.setItems = function(e) {
                var t = e.selectedGrade,
                    i = e.items || [],
                    r = this.sortTabBinder.getSelectedTabInfo(),
                    o = r.tabInfo,
                    a = r.descending;
                i = this.marketService.sortingSummariesInfo(i, o.type, a), this.items = i.map(function(e, t) {
                    return n.__assign({}, e.vehicle, e.summary, {
                        status: e.calStatus,
                        ovr: e.calOvr,
                        index: t
                    })
                }), this.selectedIndex = _.findIndex(this.items, function(e) {
                    return t === e.grade
                })
            }, t.prototype.getItemProps = function(e) {
                return {
                    info: e
                }
            }, t
        }(o.LineScrollListBinder);
    n.__decorate([r.autowired("marketService")], a.prototype, "marketService", void 0), t.PriceSearchListBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0
            }, t.prototype.update = function(e) {
                var t = e.info,
                    i = e.selected;
                this.gotoAndStop(".id-background", t.index % 2 ? "odd" : "even");
                var n = !_.isEmpty(t);
                this.visible(".id-vehicleGrade", n), this.visible(".id-ovr", n), this.visible(".id-price", n), this.visible(".id-count", n), n && (this.gotoAndStop(".id-vehicleGrade", "grade" + t.grade), this.bindText(".id-ovr .id-textField", t.ovr), this.bindText(".id-price .id-textField", this.$filter("currency")(t.price, "", 0)), this.bindText(".id-count .id-textField", t.count)), this.face.mouseEventEnabled = n, this.face.selected = i || !1
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), n.__decorate([r.autowired("vehicleDataService")], o.prototype, "vehicleDataService", void 0), t.PriceSearchListItemBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(1424),
        r = i(11);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new r.StateDefinition("/market/vehicle/sell/list", 16).container({
            stages: {
                "exchange-market-sell-list": n.MarketVehicleSellListBinder
            },
            resolve: {
                _vehicleService: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                _marketService: ["marketService", function(e) {
                    return e.fetch()
                }]
            }
        });
        e.state("root.menu.VehicleSellList", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1425),
        a = i(1426),
        s = i(1429),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.headerBinder = this.addChildBinder(".id-vehicleSellListContainer", o.SellListHeaderBinder), this.contentsBinder = this.addChildBinder(".id-vehicleSellListContainer .id-listContainer", a.SellListContentsBinder), this.footerBinder = this.addChildBinder(".id-vehicleSellListContainer", s.SellListFooterBinder)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    playerState: e.player,
                    marketState: e.market
                }
            }, t.prototype.update = function(e) {
                _.isEmpty(e) || (_.isEmpty(e.playerState) || this.headerBinder.setProps(e.playerState), _.isEmpty(e.marketState) || (this.contentsBinder.setProps(e.marketState), this.footerBinder.setProps(e.marketState)))
            }, t
        }(r.StageBinder);
    t.MarketVehicleSellListBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(".id-spCountNum", !0), this.hasSize(".id-spCountNum .id-titleLabel", !1), this.hasSize(".id-spCountNum .id-valueLabel", !1), this.translate(".id-title", "TRADEMARKET_VEHICLE_SELLLIST"), this.translate(".id-spCountNum .id-titleLabel", "TRADEMARKET_MYSP")
            }, t.prototype.update = function(e) {
                if (!_.isEmpty(e)) {
                    var t = this.$filter("currency")(e.sp, "", 0);
                    this.bindText(".id-spCountNum .id-valueLabel", t)
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), t.SellListHeaderBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1427),
        a = i(1428),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-titles .id-title1", "TRADEMARKET_LISTCOLUMN_CLASS"), this.translate(".id-titles .id-title2", "TRADEMARKET_LISTCOLUMN_VEHICLENAME"), this.translate(".id-titles .id-title3", "TRADEMARKET_LISTCOLUMN_UPGRADE"), this.translate(".id-titles .id-title4", "TRADEMARKET_LISTCOLUMN_OVR"), this.translate(".id-titles .id-title5", "TRADEMARKET_SELLLIST_VEHICLE_SELLPRICE"), this.translate(".id-titles .id-title6", "TRADEMARKET_SELLLIST_SELLSTATUS"), this.translate(".id-noVehicles", "TRADEMARKET_NOSALEVEHICLE"), this.myOfferListBinder = this.addChildBinder(".id-vehicleList", o.MyOfferListBinder, {
                    itemBinderClass: a.VehicleOfferItemBinder,
                    itemCountPerPage: 12
                })
            }, t.prototype.update = function(e) {
                var t = e.myOffers;
                this.myOfferListBinder.setProps({
                    items: t
                }), this.visible(".id-noVehicles", _.isEmpty(t))
            }, t
        }(r.Binder);
    t.SellListContentsBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(104),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.setItems = function(e) {
                var t = e.items || [];
                t = this.marketService.sortingMyOffers(t), this.items = t.map(function(e, t) {
                    return n.__assign({}, e.vehicle, e.offer, {
                        ovr: e.calOvr,
                        index: t
                    })
                })
            }, t.prototype.getItemProps = function(e) {
                return {
                    info: e
                }
            }, t
        }(o.LineScrollListBinder);
    n.__decorate([r.autowired("marketService")], a.prototype, "marketService", void 0), t.MyOfferListBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(195),
        a = i(1),
        s = i(12),
        c = i(2),
        d = i(3),
        l = i(88),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.partsBinders = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.face.layoutPosition = "relative", this.face.layoutFloat = "left", _.each(r.Part.PartTypes, function(t) {
                    e.partsBinders[t] = e.addChildBinder(".id-partsContainer .id-" + t + "Parts", o.AttachedPartsBinder)
                }), this.translate(".id-editButtons .id-edit", "TRADEMARKET_SELLLIST_RESALE"), this.on(".id-editButtons .id-edit", c.MouseEventEx.CLICK, function() {
                    e.onReOffer(e.props.info)
                }), this.translate(".id-editButtons .id-cancel", "TRADEMARKET_POPUP_CANCEL"), this.on(".id-editButtons .id-cancel", c.MouseEventEx.CLICK, function() {
                    e.onCancelOffer(e.props.info)
                }), this.translate(".id-state .id-receipt .id-buttonName", "TRADEMARKET_BUTTON_RECEIPT"), this.on(".id-state .id-receipt", c.MouseEventEx.CLICK, function() {
                    e.onTookOneOffer(e.props.info)
                }), this.update(this.props)
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.info;
                this.gotoAndStop(".id-background", i.index % 2 ? "odd" : "even"), this.bindText(".id-vehicleClass", i.clazz), this.bindText(".id-manufacturerName", this.$filter("manufacturerName")(i.manufacturerCode)), this.bindText(".id-vehicleName", this.$filter("vehicleName")(i.code)), this.gotoAndStop(".id-vehicleGrade", "grade" + i.grade), this.bindText(".id-ovr", i.ovr), this.bindText(".id-vehiclePrice", this.$filter("currency")(i.price, "", 0));
                var n = this.getOfferStatus(i.status);
                this.getFace(".id-editButtons").visible = "sold" !== n, this.gotoAndStop(".id-editButtons", n), this.gotoAndStop(".id-state", n), this.bindText(".id-state", this.getStatusString(i));
                var o = i.partscodes;
                _.forEach(r.Part.PartTypes, function(e) {
                    t.partsBinders[e].setProps({
                        code: o[e],
                        type: e,
                        potential: !1
                    })
                })
            }, t.prototype.getOfferStatus = function(e) {
                return "SOLD" === e ? "sold" : "selling"
            }, t.prototype.getStatusString = function(e) {
                return "SOLD" === e.status ? this.$filter("translate")("TRADEMARKET_SELLSTATUS_SELL") : e.chgdt.toString().substring(0, 10)
            }, t.prototype.onCancelOffer = function(e) {
                var t = this;
                if (d.store.getState().player.unlock.maxGarageCount <= s.getOwnTrialVehicles().length) return void this.popupService.draw("ConfirmCancelPopup", {
                    title: "TRADEMARKET_CANTSELLCANCLE_POPUP_TITLE",
                    description: "TRADEMARKET_CANTSELLCANCLE_POPUP_DESC",
                    confirmString: "POPUP_VEHICLELIST_FULL_TOVEHICLELIST",
                    cancelString: "GAMEOPTION_CONFIRM",
                    confirm: function() {
                        t.stateService.go("root.menu.Vehicles")
                    }
                });
                this.popupService.draw("SellVehicleCancelPopup", {
                    vehicle: this.vehicleDataService.decorateVehicle(e),
                    confirm: function() {
                        t.marketService.cancelVehicleOffer(e).then(function() {
                            t.popupService.draw("ConfirmPopup", {
                                title: "TRADEMARKET_VEHICLE_POPUP_SELLCANCLE_TITLE",
                                description: "TRADEMARKET_VEHICLE_POPUP_SELLCANCLE_DESC2",
                                confirm: function() {}
                            })
                        }).catch(function(e) {
                            var i = "ALARM_SERVERLOST_TITLE",
                                n = "ALARM_SERVERLOST_TEXT";
                            e.errorCode === l.ErrorCode.VehicleOfferDocumentDoesNotExist && (i = "TRADEMARKET_CANCLEFAIL_ALREADYSELL_TITLE", n = "TRADEMARKET_CANCLEFAIL_ALREADYSELL_DESC"), t.popupService.draw("ConfirmPopup", {
                                title: i,
                                description: n,
                                confirm: function() {}
                            })
                        })
                    },
                    cancel: function() {
                        return !1
                    }
                })
            }, t.prototype.onReOffer = function(e) {
                var t = this;
                this.marketService.getMarketLimitPrice(e.code, e.grade).then(function(i) {
                    t.popupService.draw("MarketVehicleReofferPopup", {
                        vehicle: t.vehicleDataService.decorateVehicle(e),
                        limitdata: i,
                        price: e.price,
                        basePrice: i.base,
                        confirm: function(n) {
                            var r = !0;
                            isNaN(n) && (r = !1), n % 100 != 0 && (r = !1), (Number(n) < Number(i.lower) || Number(n) > Number(i.upper)) && (r = !1), r ? t.marketService.reofferVehicle(e, Number(n)).then(function() {
                                e.price = Number(n), t.popupService.draw("ConfirmPopup", {
                                    title: "TRADEMARKET_VEHICLE_RESALE_POPUP_TITLE",
                                    description: "TRADEMARKET_VEHICLE_RESALE_POPUP_DESC2",
                                    confirm: function() {}
                                })
                            }).catch(function(e) {
                                var i = "ALARM_SERVERLOST_TITLE",
                                    n = "ALARM_SERVERLOST_TEXT";
                                switch (e.errorCode) {
                                    case l.ErrorCode.VehicleStatusInvalid:
                                    case l.ErrorCode.VehicleAlreadySold:
                                        i = "TRADEMARKET_RESALEFAILE_ALREADYSELL_TITLE", n = "TRADEMARKET_RESALEFAILE_ALREADYSELL_DESC"
                                }
                                t.popupService.draw("ConfirmPopup", {
                                    title: i,
                                    description: n,
                                    confirm: function() {}
                                })
                            }) : t.popupService.draw("ConfirmPopup", {
                                title: "TRADEMARKET_RESALEFAIL_POPUP_TITLE",
                                description: "TRADEMARKET_RESALEFAIL_POPUP_DESC",
                                confirm: function() {}
                            })
                        },
                        cancel: function() {
                            return !1
                        }
                    })
                })
            }, t.prototype.onTookOneOffer = function(e) {
                var t = this;
                this.popupService.draw("SalesReceiptPopup", {
                    vehicle: this.vehicleDataService.decorateVehicle(e),
                    price: e.price,
                    commission: this.marketService.getCommissionInfo(),
                    confirm: function() {
                        t.marketService.receiptOffer(e).then(function() {
                            t.popupService.draw("ConfirmPopup", {
                                title: "TRADEMARKET_VEHICLE_RECEIPT_POPUP_TITLE",
                                description: "TRADEMARKET_VEHICLE_RECEIPT_POPUP_DESC",
                                confirm: function() {}
                            })
                        }).catch(function(e) {
                            log.error(e), t.popupService.draw("ConfirmPopup", {
                                title: "ALARM_SERVERLOST_TITLE",
                                description: "ALARM_SERVERLOST_TEXT",
                                confirm: function() {}
                            })
                        })
                    },
                    cancel: function() {
                        return !1
                    }
                })
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([a.autowired("marketService")], u.prototype, "marketService", void 0), n.__decorate([a.autowired("popupService")], u.prototype, "popupService", void 0), n.__decorate([a.autowired("vehicleDataService")], u.prototype, "vehicleDataService", void 0), n.__decorate([a.autowired("stateService")], u.prototype, "stateService", void 0), t.VehicleOfferItemBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(3),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = 100 - Math.ceil(100 * this.staticdataLoaderService.commissionValue.igr);
                t > 0 ? (this.visible(".id-description", !0), this.template(".id-description", "TRADEMARKET_SELLLIST_DEFAULTNOTICE", {
                    pcroomdiscount: t + "%"
                })) : this.visible(".id-description", !1), this.translate(".id-listCount .id-title", "TRADEMARKET_VEHICLE_SELLLIST"), this.translate(".id-totalReceiptPrice .id-title", "TRADEMARKET_SELLLIST_ALLSUMRECEIPT"), this.receiptButton = this.convertFace(".id-receipt"), this.translate(this.receiptButton, "TRADEMARKET_BUTTON_ALLRECEIPT"), this.on(this.receiptButton, o.MouseEventEx.CLICK, function() {
                    e.onTookOfferList()
                })
            }, t.prototype.update = function(e) {
                if (!_.isEmpty(e)) {
                    var t = e.myOffers;
                    this.bindText(".id-listCount .id-countNum .id-Num", t.length + " / " + this.marketService.maxOfferCount);
                    var i = _.sumBy(t, function(e) {
                        var t = e.offer;
                        return "SOLD" === t.status ? t.price : 0
                    });
                    i = this.getApplyCommissionPrice(i);
                    var n = this.$filter("currency")(i, "", 0);
                    this.bindText(".id-totalReceiptPrice .id-priceNum .id-Num", n), this.offerList = t;
                    var r = this.getSoldOffers();
                    this.receiptButton.enabled = r.length > 0, this.popupService.updateMessage({
                        offerlist: r
                    })
                }
            }, t.prototype.getApplyCommissionPrice = function(e) {
                var t = this.marketService.getCommissionInfo(),
                    i = e,
                    n = e * t[0].value;
                return i - n + (this.publisherService.isIgr ? n * (1 - t[1].value) : 0) + 0
            }, t.prototype.getSoldOffers = function() {
                return _.filter(this.offerList, function(e) {
                    return "SOLD" === e.offer.status
                })
            }, t.prototype.onTookOfferList = function() {
                var e = this;
                if (0 !== this.offerList.length) {
                    var t = this.getSoldOffers();
                    this.popupService.draw("SalesReceiptListPopup", {
                        offerlist: t,
                        commission: this.marketService.getCommissionInfo(),
                        sponsor: a.store.getState().player.sponsor,
                        confirm: function() {
                            0 !== t.length && e.marketService.receiptAllOffer().then(function() {
                                e.drawReceiptResultPopup()
                            }).catch(function(t) {
                                log.error(t), e.drawErrorPopup()
                            })
                        },
                        cancel: function() {
                            return !1
                        }
                    })
                }
            }, t.prototype.drawReceiptResultPopup = function() {
                this.popupService.draw("ConfirmPopup", {
                    title: "TRADEMARKET_VEHICLE_RECEIPT_POPUP_TITLE",
                    description: "TRADEMARKET_VEHICLE_RECEIPT_POPUP_DESC",
                    confirm: function() {}
                })
            }, t.prototype.drawErrorPopup = function() {
                this.popupService.draw("ConfirmPopup", {
                    title: "ALARM_SERVERLOST_TITLE",
                    description: "ALARM_SERVERLOST_TEXT",
                    confirm: function() {}
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([r.autowired("marketService")], s.prototype, "marketService", void 0), n.__decorate([r.autowired("popupService")], s.prototype, "popupService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], s.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("publisherService")], s.prototype, "publisherService", void 0), t.SellListFooterBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), angular.module("edge.app").config(["$stateProvider", function(e) {
        e.state("root.flaPlayer", {
            url: "/fla-player/:name?ignoreScripts",
            views: {
                "edge-ui-container@": {
                    template: "<h1>Please stand by</h1>",
                    controller: "FlaPlayerController"
                }
            },
            params: {
                name: ""
            },
            resolve: {
                prebuild: ["$stateParams", "prebuildService", function(e, t) {
                    return t.loadView(e.name, {})
                }]
            }
        })
    }]).controller("FlaPlayerController", ["$scope", "$stateParams", "prebuildService", function(e, t, i) {
        var n = i.pop(t.name),
            r = n.stage;
        $("#edge-ui-container").children().replaceWith(r.htmlElement), t.ignoreScripts && (r.callbackTweens.forEach(function(e) {
            return e.kill()
        }), r.callbackTweens = []), r.reboot(), e.$on("$destroy", function() {
            return i.destroy(r)
        })
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1432);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/inbox", 25).container({
            stages: {
                inbox: r.InboxBinder
            },
            resolve: {
                inbox: ["inboxService", function(e) {
                    return e.fetch()
                }]
            }
        });
        e.state("root.menu.Inbox", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(300),
        a = i(8),
        s = i(306),
        c = i(1433),
        d = i(314),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.preventMouseEvent(!0), this.on(this.face, "stop", function() {
                    return e.preventMouseEvent(!1)
                }), this.inboxListBinder = this.addChildBinder(this.face, c.InboxListBinder), this.addChildBinder(this.face, d.LevelupBinder), this.setFilter()
            }, t.prototype.update = function(e) {
                _.isEmpty(e) || this.inboxListBinder.setProps(e)
            }, t.prototype.setFilter = function() {
                var e = this;
                this.filterDropdown = this.convertFace(".id-filterDropdown"), this.filterDropdown.items = s.Filters.map(function(t) {
                    return {
                        text: e.$filter("translate")(t.text),
                        type: t.type
                    }
                }), this.filterDropdown.on(a.EventEx.CHANGE, function() {
                    o.setViewingFilter(e.filterDropdown.selectedItem.type)
                }), this.sortDropdown = this.convertFace(".id-sortDropdown"), this.sortDropdown.visible = !1
            }, t.prototype.onDetach = function() {
                o.setViewingFilter("ALL"), this.playerService.markInboxAsChecked()
            }, t.prototype.mapStateToProps = function(e) {
                return e.inbox
            }, t.prototype.preventMouseEvent = function(e) {
                this.classNames(this.face, e ? "prevent-click" : "")
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([r.autowired("playerService")], l.prototype, "playerService", void 0), t.InboxBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1434),
        a = i(2),
        s = i(166),
        c = i(44),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                _.times(12, function(e) {
                    var i = t.getFace(".id-current .id-itemCard" + (e + 1)),
                        n = t.getFace(".id-next .id-itemCard" + (e + 1));
                    t.currListBinder.push(t.addChildBinder(i, o.InboxListItemBinder)), t.nextListBinder.push(t.addChildBinder(n, o.InboxListItemBinder, {
                        disableMouseEvent: !0
                    }))
                }), this.pagingContainer = this.getFace(".id-itemTileList"), this.pagingContainer.hasSize = !0, e.prototype.onFaceReady.call(this), this.addManagedListener(this.pagingContainer, "reset", function(e) {
                    t.gotoAndPlay(t.pagingContainer, "default"), t.isPaging = !1, t.preventMouseEvent(!1), setTimeout(function() {
                        t.currListBinder.some(function(e, t) {
                            return "over" === e.face.currentLabel && !e.face.emit(a.MouseEventEx.MOUSE_OVER)
                        })
                    })
                }), this.translate(".id-getBulkButtonContainer > .id-textField", "INBOX_RECIEVEALL_TEXT"), this.translate(".id-getBulkButtonContainer .id-getBulk", "INBOX_RECIEVEALL"), this.on(".id-getBulkButtonContainer .id-getBulk", a.MouseEventEx.CLICK, this.receiveItems.bind(this)), this.bindList = function(e, i) {
                    var n = t.chunkedPackages[i] || [];
                    e.forEach(function(e, i) {
                        t.bindPackageInfo(e, n[i], i)
                    })
                }, this.movePageCallback1 = function() {
                    t.preventMouseEvent(!0), t.tooltipService.hide()
                }, this.movePageCallback2 = function() {
                    t.enableButton(".id-getBulkButtonContainer .id-getBulk", !_.isEmpty(t.getUsableItems()))
                }
            }, t.prototype.update = function(e) {
                var t = e.filter;
                this.packages = this.filterSortPacakges(e.packages, t), this.initItemList(), this.resetScrollBar()
            }, t.prototype.initItemList = function() {
                this.chunkedPackages = _.chunk(this.packages, 12), this.pageSize = Math.max(1, this.chunkedPackages.length), this.isPaging = !1, this.pageSize <= this.pageIndex && (this.pageIndex = this.pageSize - 1), this.bindList(this.currListBinder, this.pageIndex), this.enableButton(".id-getBulkButtonContainer .id-getBulk", !_.isEmpty(this.getUsableItems()))
            }, t.prototype.bindPackageInfo = function(e, t, i) {
                var r = e.face;
                t ? (r.enabled = r.visible = !0, e.setProps(n.__assign({}, t, {
                    index: i
                }))) : (r.enabled = r.visible = !1, e.setProps({}))
            }, t.prototype.filterSortPacakges = function(e, t) {
                void 0 === t && (t = "");
                var i = e.filter(function(e) {
                    return !t || "ALL" === t || e.type === t
                });
                return i.sort(function(e, t) {
                    return e.createdat < t.createdat ? 1 : -1
                }), i
            }, t.prototype.getUsableItems = function() {
                var e = this;
                return _.filter(this.chunkedPackages[this.pageIndex], function(t) {
                    return !e.inboxService.isUnconfirmedCashItem(n.__assign({}, t, t.opts))
                })
            }, t.prototype.receiveItems = function() {
                var e = this;
                if (!this.isPaging) {
                    var t = this.getUsableItems();
                    _.isEmpty(t) || (this.preventMouseEvent(!0), this.enableButton(".id-getBulkButtonContainer .id-getBulk", !1), this.inboxService.usePackage(_.map(t, function(e) {
                        return e.id
                    })).catch(function(t) {
                        e.popupService.closePopup().then(function() {
                            return c.showInboxUseErrorPopup(t, e)
                        })
                    }).finally(function() {
                        e.preventMouseEvent(!1), e.enableButton(".id-getBulkButtonContainer .id-getBulk", !_.isEmpty(e.getUsableItems()))
                    }))
                }
            }, t
        }(s.ScrollBarPageBinder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], d.prototype, "tooltipService", void 0), n.__decorate([r.autowired("inboxService")], d.prototype, "inboxService", void 0), n.__decorate([r.autowired("popupService")], d.prototype, "popupService", void 0), n.__decorate([r.autowired("vehicleService")], d.prototype, "vehicleService", void 0), t.InboxListBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(2),
        a = i(1),
        s = i(27),
        c = i(300),
        d = i(13),
        l = i(306),
        u = i(3),
        p = i(44),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                if (this.face.hasSize = !0, this.cardBinder = this.addChildBinder(this.face, s.ItemCardBinder), !e.disableMouseEvent) {
                    this.addManagedListener(this.face, o.MouseEventEx.MOUSE_OVER, function(e) {
                        var i = t.props;
                        t.showTooltip(e, i, i.index)
                    }), this.addManagedListener(this.face, o.MouseEventEx.MOUSE_OUT, function() {
                        t.face.mouseEventEnabled ? t.tooltipService.hide() : (t.face.mouseEventEnabled = !0, t.face.emit(o.MouseEventEx.MOUSE_OUT))
                    }), this.addManagedListener(this.face, o.MouseEventEx.MOUSE_DOWN, function() {
                        t.face.mouseEventEnabled = !1
                    }), this.addManagedListener(this.face, o.MouseEventEx.MOUSE_UP, function() {
                        t.face.mouseEventEnabled = !0
                    });
                    var i = this.getFace(".id-itemReceive");
                    i && this.addManagedListener(i, o.MouseEventEx.CLICK, function() {
                        var e = t.props;
                        t.tooltipService.hide(), t.inboxService.isExpired(e.endat) ? t.removeItem(e) : t.showReceiveItemPopup(e)
                    });
                    var n = this.getFace(".id-coolingOffContainer");
                    n && this.addManagedListener(n, o.MouseEventEx.CLICK, function() {
                        var e = t.props;
                        t.tooltipService.hide(), t.showCoolingoffPopup(e)
                    })
                }
            }, t.prototype.update = function(e) {
                if (!_.isEmpty(e)) {
                    var t = this.getItemCardProp(e);
                    this.cardBinder.setProps(t)
                }
            }, t.prototype.getItemType = function(e) {
                return 1 === e.rewards.length && "TUNING" === e.rewards[0].type ? "TUNING" : e.type
            }, t.prototype.getItemCode = function(e) {
                return "TUNING" === this.getItemType(e) ? e.rewards[0].code : e.pid
            }, t.prototype.getItemCardProp = function(e) {
                var t = e.opts || {},
                    i = this.getItemCode(e),
                    r = this.getItemType(e),
                    o = this.inboxService.isExpired(e.endat) ? "INVENTORY_ITEM_REMOVE" : this.inboxService.isUnconfirmedCashItem(n.__assign({}, e, e.opts)) && "PURCHASED" === e.type ? "INBOX_FINALCONFIRMPURCHASE" : void 0;
                return {
                    id: e.id,
                    info: {
                        code: i,
                        type: r,
                        name: e.title,
                        desc: e.desc,
                        count: e.count || 1,
                        tagName: this.$filter("translate")(s.TagMap[e.type]),
                        tagType: e.type.toLowerCase(),
                        isNew: this.isNewPackage(e),
                        remainText: e.endat ? this.getExpiryTimeInfo(e.endat) : void 0,
                        buttonText: o,
                        bunch: t.bunch,
                        unconfirmed: t.unconfirmed,
                        orderNo: t.orderNo,
                        createdat: e.createdat,
                        img: this.inboxService.getItemImgPath(e),
                        fallbackImg: this.inboxService.getItemFallbackImgPath(e)
                    },
                    actionButtonEnabled: !0
                }
            }, t.prototype.isNewPackage = function(e) {
                var t = u.store.getState().player.checkedat.inbox.toString();
                return +new Date(e.createdat.toString()) > +new Date(t)
            }, t.prototype.showReceiveItemPopup = function(e) {
                switch (e.type) {
                    case "PURCHASED":
                        this.showReceivePurchasedItem(e);
                        break;
                    case "GIFT":
                    case "PROMOTION":
                    case "RANKED_MATCH_REWARD":
                    case "FESTIVAL":
                    case "MINI_FESTIVAL":
                        this.showReceivePromotionGiftItem(e)
                }
            }, t.prototype.showReceivePurchasedItem = function(e) {
                var t = this,
                    i = this.getItemCode(e),
                    r = this.getItemType(e);
                this.popupService.draw("ItemIconConfirmPopup", {
                    title: "INBOX_POPUP_FINALCONFIRMPURCHASE_TITLE",
                    desc: {
                        top: this.$filter("translate")("INBOX_POPUP_FINALCONFIRMPURCHASE_TEXT1"),
                        bottom: this.inboxService.isUnconfirmedCashItem(n.__assign({}, e, e.opts)) ? this.$filter("translate")("INBOX_POPUP_FINALCONFIRMPURCHASE_TEXT2") : void 0
                    },
                    itemCardProps: {
                        info: {
                            code: i,
                            type: r,
                            name: e.title,
                            desc: e.desc,
                            count: e.count || 1,
                            tagName: this.$filter("translate")(s.TagMap[e.type]),
                            tagType: e.type.toLowerCase(),
                            img: this.inboxService.getItemImgPath(e),
                            fallbackImg: this.inboxService.getItemFallbackImgPath(e)
                        },
                        mouseDisabled: !0
                    },
                    buttons: [{
                        type: "confirm",
                        name: "INBOX_POPUP_FINALCONFIRMPURCHASE_YES",
                        onClick: function(i) {
                            t.inboxService.isUnconfirmedCashItem(n.__assign({}, e, e.opts)) ? t.purchaseComplete(e) : t.inboxService.isExpired(e.endat) ? t.removeItem(e) : t.inboxService.usePackage([e.id]).then(function() {
                                return t.popupService.closePopup()
                            }).then(function() {
                                return t.showReceivedItemCompletedPopup(e)
                            }).catch(function(e) {
                                t.popupService.closePopup().then(function() {
                                    return p.showInboxUseErrorPopup(e, t)
                                })
                            })
                        }
                    }, {
                        type: "cancel",
                        name: "INBOX_POPUP_FINALCONFIRMPURCHASE_NO",
                        onClick: function() {
                            return t.popupService.closePopup()
                        }
                    }]
                })
            }, t.prototype.showReceivePromotionGiftItem = function(e) {
                var t = this;
                this.popupService.draw("InboxItemConfirmPopup", {
                    isNew: this.isNewPackage(e),
                    inboxPackage: this.getReadablePackageInfo(e),
                    confirm: function() {
                        t.inboxService.isUnconfirmedCashItem(n.__assign({}, e, e.opts)) ? t.purchaseComplete(e) : t.inboxService.isExpired(e.endat) ? t.removeItem(e) : (t.popupService.chaining = !0, t.inboxService.usePackage([e.id]).then(function(i) {
                            return t.showReceivedItemCompletedPopup(e)
                        }).catch(function(e) {
                            return p.showInboxUseErrorPopup(e, t)
                        }))
                    },
                    pack: e
                })
            }, t.prototype.purchaseComplete = function(e) {
                var t = this;
                this.shopService.purchaseComplete(e.opts.orderNo).then(function(t) {
                    if (!t) throw new Error("purchase complete");
                    c.deletePackageOrder(e.opts.orderNo)
                }).then(function() {
                    return t.popupService.closePopup()
                }).then(function() {
                    return t.showReceivedItemCompletedPopup(e)
                }).catch(function(e) {
                    t.popupService.closePopup().then(function() {
                        return t.popupService.draw("ConfirmPopup", {
                            description: "구매 확정에 실패하였습니다. (" + e.errorCode + ")"
                        })
                    })
                })
            }, t.prototype.showTooltip = function(e, t, i) {
                var n = d.TooltipType.InboxPackage,
                    r = this.getSide(i),
                    o = e && e.currentTarget ? e : this.face;
                this.tooltipService.show(o, r, n, this.getReadablePackageInfo(t), {
                    marginTop: 26,
                    marginLeft: "left" === r ? -3 : -14,
                    screen: d.TooltipScreen.Inbox
                })
            }, t.prototype.getReadablePackageInfoType = function(e) {
                if (!e) return "";
                var t = this.$filter("translate");
                switch (e.type) {
                    case "PROMOTION":
                        return t("INBOX_ITEM_TOOLTIP_EVENT");
                    case "PURCHASED":
                        return t("INBOX_POPUP_SENDER_SHOP");
                    case "FESTIVAL":
                    case "MINI_FESTIVAL":
                        return t("INBOX_ITEM_TOOLTIP_FESTIVAL");
                    case "GIFT":
                        return (e.opts || {}).senderName
                }
            }, t.prototype.getReadablePackageInfo = function(e) {
                var t = this.$filter("translate");
                return {
                    title: t(e.title),
                    type: this.getReadablePackageInfoType(e),
                    date: _.template(t("INBOX_ITEM_TOOLTIP_DATE"))(r.default.yyyymmdd(new Date(e.createdat.toString()))),
                    desc: t(e.desc),
                    items: this.inboxService.getRewardableItemName(e),
                    count: e.count || 1,
                    expiration: this.inboxService.isUnconfirmedCashItem(n.__assign({}, e, e.opts)) && "PURCHASED" === e.type ? t("INBOX_ITEM_TOOLTIP_WITHDRAWL_PERIOD") : void 0
                }
            }, t.prototype.getSide = function(e) {
                var t = (e + 1) % 6;
                return t < 4 && t > 0 ? "right" : "left"
            }, t.prototype.showReceivedItemCompletedPopup = function(e) {
                var t = this,
                    i = this.getItemCode(e),
                    n = this.getItemType(e),
                    r = l.ReceivedPopupStringMap,
                    o = "GIFT" === e.type,
                    a = void 0 !== _.find(e.rewards, function(e) {
                        return "TUNING" === e.type
                    }),
                    c = o ? "gift" : "default";
                a && (c += "Tuning");
                var d = r[c];
                return this.popupService.draw("ItemIconConfirmPopup", {
                    title: d.title,
                    desc: {
                        top: this.$filter("translate")(d.top),
                        bottom: this.$filter("translate")(d.bottom)
                    },
                    itemCardProps: {
                        info: {
                            code: i,
                            type: n,
                            name: e.title,
                            desc: e.desc,
                            count: e.count || 1,
                            tagName: this.$filter("translate")(s.TagMap[e.type]),
                            tagType: e.type.toLowerCase(),
                            img: this.inboxService.getItemImgPath(e),
                            fallbackImg: this.inboxService.getItemFallbackImgPath(e)
                        },
                        mouseDisabled: !0
                    },
                    buttons: [{
                        type: "confirm",
                        name: d.confirm,
                        onClick: function() {
                            return t.popupService.closePopup()
                        }
                    }],
                    isInvertTwoButton: !1
                }), null
            }, t.prototype.showCoolingoffPopup = function(e) {
                var t = this;
                if (this.inboxService.isUnconfirmedCashItem(n.__assign({}, e, e.opts))) {
                    if (this.cardBinder.isExpiredPayback(e.createdat)) return void this.popupService.drawConfirm("INBOX_POPUP_EXPIREDWITHDRAWL_TITLE", "INBOX_POPUP_EXPIREDWITHDRAWL_TEXT1");
                    var i = this.getItemCode(e),
                        o = this.getItemType(e);
                    this.popupService.draw("CoolingOffConfirmPopup", {
                        itemCardProps: {
                            info: {
                                code: i,
                                type: o,
                                name: e.title,
                                desc: e.desc,
                                count: e.count || 1,
                                img: this.inboxService.getItemImgPath(e),
                                fallbackImg: this.inboxService.getItemFallbackImgPath(e)
                            },
                            mouseDisabled: !0
                        },
                        bunch: e.opts.bunch,
                        confirm: function() {
                            t.popupService.chaining = !0, t.shopService.purchaseCancel(e.opts.orderNo).then(function(t) {
                                if (!t) throw new Error("purchase cancel");
                                c.deletePackageOrder(e.opts.orderNo)
                            }).then(function() {
                                return t.shopService.fetchCash()
                            }).then(function() {
                                t.popupService.draw("ConfirmMultiLabelPopup", {
                                    title: t.$filter("translate")("INBOX_POPUP_CONFIRMWITHDRAWL_TITLE"),
                                    description: t.$filter("translate")("INBOX_POPUP_CONFIRMWITHDRAWL_TEXT1"),
                                    addition: t.$filter("template")({
                                        withdrawlcash: r.default.toMoney(e.opts.bunch.price)
                                    }, "INBOX_POPUP_CONFIRMWITHDRAWL_TEXT2")
                                })
                            }).catch(function(e) {
                                return t.popupService.draw("ConfirmPopup", {
                                    description: "청약 철회에 실패하였습니다. (" + e.errorCode + ")"
                                })
                            })
                        }
                    })
                }
            }, t.prototype.getExpiryTimeInfo = function(e) {
                var t = this.serverTimeService.getRemainingTime(e),
                    i = t.day,
                    n = t.hour,
                    r = t.minute,
                    o = t.timestamp,
                    a = i > 0 ? "ITEM_TAG_ENDDATE_REMAINING_DAYS" : n > 0 ? "ITEM_TAG_ENDDATE_REMAINING_HOURS" : r > 1 ? "ITEM_TAG_ENDDATE_REMAINING_MINUTES" : "ITEM_TAG_ENDDATE_REMAINING_LESSTHAN1M";
                return o < 0 ? "ITEM_TAG_ENDDATE_END" : this.$filter("template")({
                    day: i,
                    hour: n,
                    minute: r
                }, a)
            }, t.prototype.removeItem = function(e) {
                var t = this;
                this.popupService.draw("ConfirmPopup", {
                    title: "INBOX_USEREMOVE_POPUP_TITLE",
                    description: this.$filter("translate")("INBOX_USEREMOVE_POPUP_TEXT"),
                    confirm: function() {
                        t.inboxService.removeExpiredItem({
                            ids: [e.id]
                        })
                    }
                })
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([a.autowired("inboxService")], h.prototype, "inboxService", void 0), n.__decorate([a.autowired("tooltipService")], h.prototype, "tooltipService", void 0), n.__decorate([a.autowired("popupService")], h.prototype, "popupService", void 0), n.__decorate([a.autowired("stateService")], h.prototype, "stateService", void 0), n.__decorate([a.autowired("shopService")], h.prototype, "shopService", void 0), n.__decorate([a.autowired("vehicleService")], h.prototype, "vehicleService", void 0), n.__decorate([a.autowired("serverTimeService")], h.prototype, "serverTimeService", void 0), t.InboxListItemBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(320), i(1440), i(1445), i(1448)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(263),
        s = i(109),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-title", "LICENSETEST_LANDING_MAIN"), this.translate(".id-description", "LICENSETEST_LANDING_MAIN_DESC"), this.translate(".id-startButton", "LICENSETEST_LANDING_MAIN_START"), this.on(".id-startButton", o.MouseEventEx.CLICK, function() {
                    e.lazyLoadService.loadView("license-popup").then(function() {
                        return e.dispatch(a.openMain())
                    })
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.gotoAndPlay(this.face, "in"), this.onEndStateChangeDelay = this.$rootScope.$on("onEndStateChangeDelay", function() {
                    if (e.$stateParams.licensetype) {
                        var t = s.LicenseCode[e.$stateParams.licensetype];
                        e.lazyLoadService.loadView("license-popup").then(function() {
                            return e.dispatch(a.openMain())
                        }).then(function() {
                            return t && e.dispatch(a.setActiveTab(t))
                        })
                    }
                })
            }, t.prototype.onDetach = function() {
                this.onEndStateChangeDelay(), this.dispatch(a.closeMain())
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("lazyLoadService")], c.prototype, "lazyLoadService", void 0), n.__decorate([r.autowired("$rootScope")], c.prototype, "$rootScope", void 0), n.__decorate([r.autowired("$stateParams")], c.prototype, "$stateParams", void 0), t.LicenseMain = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(28),
        s = i(109),
        c = i(2),
        d = i(263),
        l = i(1438),
        u = i(635),
        p = i(8),
        h = i(1439),
        f = i(13),
        v = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.licenseButtons = {}, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate("> .id-titleLabel", "LICENSE_MAIN_TITLE"), this.bindLicenseButtons();
                var t = this.getFace(".id-loading");
                t.visible = !1, t.$(".LoadingIndicator").stop(), this.chain(".id-exitButton").apply(a.translate, {
                    filterFn: this.$filter("translate"),
                    id: "LICENSE_MAIN_LEAVE"
                }).apply(a.onClick, function() {
                    return e.exit("root.menu.LicenseTest")
                }), this.testContainerBinder = this.addChildBinder(".id-testContainer", l.TestContainerBinder, {
                    service: this.service,
                    trackData: this.staticdata.trackData,
                    $filter: this.$filter,
                    onStartTest: function(t) {
                        return e.startTest(t)
                    }
                }), this.testStartBinder = this.addChildBinder(".id-testStartContainer", u.TestStartBinder, {
                    service: this.service,
                    stateService: this.stateService,
                    $filter: this.$filter
                }), this.rewardBinder = this.addChildBinder(".id-licenseRewardContainer", h.RewardContainerBinder, {
                    $filter: this.$filter,
                    licenseData: this.service.licenseData
                })
            }, t.prototype.onAddedToScene = function(e) {
                var t = this,
                    i = e;
                if (this.fromHud = Boolean(this.$stateParams.fromHud), this.fromHud) {
                    this.hasPromotion(i) && this.apply(this.face, a.classNames, "prevent-click"), this.stage.gotoAndPlay("in"), this.stage.once(p.EventEx.STOP, function() {
                        t.applyStagedState(i).then(function() {
                            t.apply(t.face, a.classNames, "")
                        })
                    });
                    var n = this.clearLevelUnloadHook = this.$transitions.onExit({
                        exiting: this.stateService.getCurrentName()
                    }, function(e, i) {
                        return n(), t.exit()
                    })
                }
            }, t.prototype.hasPromotion = function(e) {
                return e.staging && void 0 !== e.staging.promote
            }, t.prototype.exit = function(e) {
                var t = this;
                return this.clearLevelUnloadHook && this.clearLevelUnloadHook(), this.clearLevelUnloadHook = void 0, this.enableButton(".id-exitButton", !1), this.apply(".id-testContainer", a.classNames, "prevent-click"), this.tryExit(e).then(function() {
                    t.apply(".id-testContainer", a.classNames, ""), t.enableButton(".id-exitButton", !0)
                })
            }, t.prototype.tryExit = function(e) {
                var t = this;
                return this.fromHud ? (this.bgmService.setRaceLoadingListener().then(function() {
                    return t.bgmService.playMeta()
                }), e ? this.stateService.go(e) : r.resolve()) : r.resolve(this.dispatch(d.closeMain()))
            }, t.prototype.applyStagedState = function(e) {
                var t = this,
                    i = r.resolve();
                if (!e.staging) return i;
                var n = e.staging,
                    o = n.passedTest,
                    a = n.promote;
                return void 0 !== o ? i = this.showUnlock() : void 0 !== a && (i = this.showPromote(e)), i.then(function() {
                    var e = t.storeState.player.level;
                    t.dispatch(d.applyStaging(e, t.service.licenseData))
                })
            }, t.prototype.showUnlock = function() {
                var e = this.service.getPassedTestIndex();
                return this.testContainerBinder.passTest(e)
            }, t.prototype.showPromote = function(e) {
                var t = this,
                    i = e.activeTab,
                    n = e.license,
                    o = e.staging.promote,
                    a = this.service.licenseTestData[i - 1],
                    s = _.findIndex(a, function(e) {
                        return -1 === n.completedTest.indexOf(e.code)
                    });
                return this.testContainerBinder.passTest(s).then(function() {
                    return new r(function(e, i) {
                        t.stateService.go(".acquire");
                        var n = t.$transitions.onSuccess({
                            to: "root.LicenseMain",
                            from: "root.LicenseMain.acquire"
                        }, function() {
                            n(), e(), t.dispatch(d.setActiveTab(o + 1))
                        })
                    })
                })
            }, t.prototype.bindLicenseButtons = function() {
                var e = this,
                    t = this.service.licenseData;
                this.licenseButtons[s.LicenseCode.Junior] = this.convertFace(".id-juniorButton"), this.licenseButtons[s.LicenseCode.Senior] = this.convertFace(".id-seniorButton"), this.licenseButtons[s.LicenseCode.Expert] = this.convertFace(".id-expertButton"), _.each(this.licenseButtons, function(i, n) {
                    var r = parseInt(n, 10);
                    a.translate(i.$(".id-completeMarker"), {
                        filterFn: e.$filter("translate"),
                        id: "LICENSE_MAIN_COMPLETE"
                    }), a.translate(i.$(".id-nameLabel"), {
                        filterFn: e.$filter("translate"),
                        id: "LICENSE_MAIN_TITLE_" + s.LicenseCode[r].toUpperCase()
                    }), a.template(i.$(".id-licenseLock"), {
                        filterFn: e.$filter("template"),
                        id: "LICENSE_MAIN_LOCK",
                        filterOpts: {
                            value: t[r].requiredLevel
                        }
                    }), a.on(i, {
                        event: c.MouseEventEx.CLICK,
                        callback: function() {
                            return e.dispatch(d.setActiveTab(r))
                        }
                    }), a.on(i, {
                        event: c.MouseEventEx.MOUSE_OVER,
                        callback: function(t) {
                            e.isLocked(r) && e.tooltipService.show(t, "horizontal", f.TooltipType.LicenseTab, e.service.tabTooltip(r), {
                                marginTop: 35,
                                marginLeft: 5
                            })
                        }
                    }), a.on(i, {
                        event: c.MouseEventEx.MOUSE_OUT,
                        callback: function() {
                            e.tooltipService.hide()
                        }
                    }), a.gotoAndStop(i.$(".id-licenseIcon"), s.LicenseCode[r].toLowerCase())
                })
            }, t.prototype.isLocked = function(e, t) {
                void 0 === t && (t = this.reduxProps);
                var i = this.service.licenseData;
                return this.storeState.player.level < i[e].requiredLevel || e > t.license.code + 1
            }, t.prototype.bindState = function(e, t) {
                for (var i = t.license, n = t.activeTab, r = 0, o = [s.LicenseCode.Junior, s.LicenseCode.Senior, s.LicenseCode.Expert]; r < o.length; r++) {
                    var c = o[r],
                        d = this.licenseButtons[c];
                    d.selected = c === n;
                    var l = c <= i.code,
                        u = this.isLocked(c, t);
                    this.apply(d, a.classNames, {
                        locked: u,
                        completed: l
                    }), d.$(".id-completeMarker").visible = l, d.$(".id-licenseLock").visible = u
                }
                this.translate("> .id-descriptionLabel", "LICENSE_MAIN_TOOLTIP_" + s.LicenseCode[n].toUpperCase()), this.gotoAndStop(".id-licenseButtons", s.LicenseCode[n].toLowerCase()), _.isUndefined(e.activeTab) || e.activeTab === t.activeTab || this.convertFace(".id-licenseButtons > .LoopEffect").reboot();
                var p = this.service.licenseTestData[n - 1];
                this.testContainerBinder.showTests(i, p, this.isLocked(n, t)), this.rewardBinder.showReward(i, n)
            }, t.prototype.startTest = function(e) {
                this.testStartBinder.show(e)
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                _.isUndefined(t.mainOpen) || t.mainOpen === e.mainOpen || (e.mainOpen ? (this.tooltipService.hide(), this.apply(this.face, a.gotoAndPlay, "in")) : this.apply(this.face, a.gotoAndPlay, "out")), this.bindState(t, e)
            }, t.prototype.mapStateToProps = function(e) {
                return e.license
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$filter")], v.prototype, "$filter", void 0), n.__decorate([o.autowired("$stateParams")], v.prototype, "$stateParams", void 0), n.__decorate([o.autowired("$transitions")], v.prototype, "$transitions", void 0), n.__decorate([o.autowired("licenseService")], v.prototype, "service", void 0), n.__decorate([o.autowired("stateService")], v.prototype, "stateService", void 0), n.__decorate([o.autowired("externalService")], v.prototype, "externalService", void 0), n.__decorate([o.autowired("staticdataLoaderService")], v.prototype, "staticdata", void 0), n.__decorate([o.autowired("tooltipService")], v.prototype, "tooltipService", void 0), n.__decorate([o.autowired("bgmService")], v.prototype, "bgmService", void 0), t.LicensePopup = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(634),
        s = i(109),
        c = i(8),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.testButtons = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.lockLabel = "none";
                for (var e = 0; e < 6; e++) this.testButtons.push(this.addChildBinder(".id-testItem" + (e + 1), a.TestButtonBinder))
            }, t.prototype.getLockLabel = function(e, t, i) {
                if (i) return "license";
                var n = t[0].licenseCode;
                return e.code > n ? "none" : _(t).filter(function(e) {
                    return "skill" === e.type
                }).every(function(t) {
                    return -1 !== e.completedTest.indexOf(t.code)
                }) ? "none" : s.LicenseCode[n + 1].toLowerCase()
            }, t.prototype.bindButtons = function(e, t) {
                for (var i = this.props, r = i.$filter("cdn_license_test_icon"), o = function(e) {
                        return i.$filter("cdn_track")(e)
                    }, a = 0; a < 6; a++) {
                    this.testButtons[a].setProps(n.__assign({}, t[a], {
                        onClick: i.onStartTest,
                        iconCdnFilter: r,
                        trackCdnFilter: o,
                        license: e
                    }))
                }
            }, t.prototype.showTests = function(e, t, i) {
                var n = this,
                    r = this.testData !== t;
                r && (this.gotoAndPlay(this.face, "in"), this.testData = t), this.bindButtons(e, t);
                var o = this.getLockLabel(e, t, i);
                if (i) {
                    var a = this.props;
                    this.template(".LockReason", "LICENSE_MAIN_SKILLLOCK", {
                        value: a.service.licenseData[t[0].licenseCode + 1].requiredLevel
                    })
                } else "none" !== o && this.translate(".LockReason", "LICENSE_MAIN_DRIVINGLOCK");
                if (this.lockLabel !== o) {
                    var s = this.getFace(".id-lockedArea");
                    r || "none" === this.lockLabel || "none" !== o ? this.gotoAndPlay(s, o) : (this.gotoAndPlay(s, this.lockLabel + "Unlock"), s.once(c.EventEx.STOP, function() {
                        return n.gotoAndPlay(s, o)
                    })), this.lockLabel = o
                }
            }, t.prototype.passTest = function(e) {
                var t = this.testButtons[e];
                return t ? t.unlock() : (this.exceptionHandleService.catchScreenError(new Error("Invalid License Data")), r.resolve())
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("exceptionHandleService")], d.prototype, "exceptionHandleService", void 0), t.TestContainerBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(109),
        a = (i(28), i(638)),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-completeContainer", "LICENSE_MAIN_REWARDTEXT"), this.hasSize(".id-rewardItem", !0), this.hasSize(this.item, !0), this.rewardItem = this.addChildBinder(".id-itemCardSmall", a.RewardItemBinder)
            }, t.prototype.getDescription = function(e) {
                var t = this.props,
                    i = t.$filter,
                    n = t.licenseData,
                    r = o.LicenseCode[e].toUpperCase();
                return e === o.LicenseCode.Expert ? i("translate")("LICENSE_MAIN_REWARD_" + r + "_NEW1") : i("template")({
                    value: n[e + 1].requiredLevel
                }, "LICENSE_MAIN_REWARD_" + r + "_NEW1")
            }, t.prototype.showReward = function(e, t) {
                this.translate(".id-title", "LICENSE_MAIN_REWARD_" + o.LicenseCode[t].toUpperCase() + "TITLE"), this.classNamesAll(".id-completeContainer, .ReflectionLoopContainer, .comp-Bitmap", "prevent-click"), this.getFace(".id-completeContainer").visible = e.code >= t, this.bindHtml(".id-rewardItem", this.getDescription(t)), this.rewardItem.bindReward(t)
            }, t
        }(r.Binder);
    t.RewardContainerBinder = s
}, function(e, t, i) {
    "use strict";

    function n(e, t) {
        t.bind(e, s.HudType.License)
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var r = i(70),
        o = i(76),
        a = i(122),
        s = i(189),
        c = i(11),
        d = i(1441),
        l = i(1442),
        u = i(1443),
        p = i(1444),
        h = i(85),
        f = i(95),
        v = i(97),
        m = i(77),
        g = i(608),
        y = i(309),
        S = i(78),
        _ = i(79),
        E = i(123),
        T = i(98),
        C = i(71),
        b = i(96);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new c.StateDefinition("/license/hud/item", 44).container({
            controller: "LicenseHUDItem",
            stages: {
                "hud-mini-map": {
                    stageBinder: S.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: r.default
                    }
                },
                "hud-critical-effect": v.HudCriticalEffectBinder,
                "hud-dashboard": C.HudDashboardBinder,
                "hud-message-bar": T.HudMessageBarBinder,
                "hud-gamemode-guide": h.HudGameModeGuideBinder,
                "hud-start-counting": _.HudStartCountingBinder,
                "hud-start-effect": m.HudStartEffectBinder,
                "hud-item-slot": g.HudItemSlotBinder,
                "hud-item-indicator": {
                    stageBinder: y.HudItemIndicatorBinder,
                    customComponents: {
                        PieMask: o.default
                    }
                },
                "hud-license-finish": d.HudLicenseFinishBinder,
                "hud-license-time": l.HudLicenseTimeBinder,
                "hud-license-condition-info": u.HudLicenseConditionBinder,
                "hud-license-inputkey-guide": p.HudLicenseNoticeBinder,
                "hud-game-play-chat": b.GamePlayChatBinder,
                "hud-esc-menu": f.HudEscMenuBinder
            }
        });
        e.state("root.LicenseHudItem", t), t = new c.StateDefinition("/license/hud/speed", 44).container({
            controller: "LicenseHUDSpeed",
            stages: {
                "hud-mini-map": {
                    stageBinder: S.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: r.default
                    }
                },
                "hud-critical-effect": v.HudCriticalEffectBinder,
                "hud-dashboard": C.HudDashboardBinder,
                "hud-gamemode-guide": h.HudGameModeGuideBinder,
                "hud-start-counting": _.HudStartCountingBinder,
                "hud-start-effect": m.HudStartEffectBinder,
                "hud-speed-turbo-slot": {
                    stageBinder: a.HudSpeedTurboSlotBinder,
                    customComponents: {
                        PieMask: o.default
                    }
                },
                "hud-speed-turbo-gauge": E.HudSpeedTurboGaugeBinder,
                "hud-license-finish": d.HudLicenseFinishBinder,
                "hud-license-time": l.HudLicenseTimeBinder,
                "hud-license-condition-info": u.HudLicenseConditionBinder,
                "hud-license-inputkey-guide": p.HudLicenseNoticeBinder,
                "hud-game-play-chat": b.GamePlayChatBinder,
                "hud-esc-menu": f.HudEscMenuBinder
            }
        }), e.state("root.LicenseHudSpeed", t)
    }]).controller("LicenseHUDItemController", ["$scope", "hudService", n]).controller("LicenseHUDSpeedController", ["$scope", "hudService", n])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(3),
        s = i(8),
        c = i(242),
        d = i(320),
        l = i(4),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.conditions = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = a.store.getState().license;
                this.test = t.currentTest, this.translate(".id-titleLabel", t.currentTest.name), this.translate(".id-successLabel", "LICENSE_SUCCESS_DESC"), this.translate(".id-successResult", "LICENSE_SUCCESS_DESC"), this.translate(".id-failLabel", "LICENSE_FAIL_DESC"), this.translate(".id-failResult", "LICENSE_FAIL_DESC"), this.translate(".id-npcTitle", "LICENSE_START_NAME");
                for (var i = 0; i < 3; i++) this.conditions.push(this.addChildBinder(".id-objective" + (i + 1), c.ConditionBinder));
                this.finishHandler = function(t, i, n) {
                    e.handleFinish(t, i, n)
                }, this.service.on("finish", this.finishHandler), this.convertFace(".id-confirmButton").enabled = !1, this.convertFace(".id-cancelButton").enabled = !1, this.completeHandler = function() {
                    return e.unlockButtons()
                }, this.service.on("complete", this.completeHandler), this.drawExternalImage("> .id-externalImage", this.$filter("cdn_driver")(d.LicenseDriver))
            }, t.prototype.onAddedToScene = function() {
                this.showDebugButtons()
            }, t.prototype.onDetach = function() {
                this.debug && this.debug.remove(), this.service.removeListener("finish", this.finishHandler), this.service.removeListener("complete", this.completeHandler)
            }, t.prototype.unlockButtons = function() {
                this.convertFace(".id-confirmButton").enabled = !0, this.convertFace(".id-cancelButton").enabled = !0
            }, t.prototype.handleFinish = function(e, t, i) {
                var n = this;
                e && i ? (this.bindText(".id-lapTimeLabel", l.default.formatLapTime(i)), this.translate(".id-npcDescription", this.test.lang.success), this.translate(".id-confirmButton", "LICENSE_SUCCESS_LEAVE"), this.onClickSafe(".id-confirmButton", function() {
                    return n.exit()
                })) : (this.getFace(".id-lapTimeLabel").visible = !1, this.translate(".id-npcDescription", this.test.lang.fail), this.translate(".id-confirmButton", "LICENSE_FAIL_RESTART"), this.onClickSafe(".id-confirmButton", function() {
                    return n.retry()
                }), this.translate(".id-cancelButton", "LICENSE_FAIL_LEAVE"), this.onClickSafe(".id-cancelButton", function() {
                    return n.exit()
                }));
                for (var r = 0, o = this.test.conditions.length; r < o; r++) {
                    var a = this.service.checkCompletedCondition(r, t);
                    this.conditions[r].setProps(_.assign({}, this.test.conditions[r], {
                        complete: a
                    }))
                }
                this.stage.gotoAndPlay(e ? "successIn" : "failIn"), this.stage.once(s.EventEx.STOP, function() {
                    return n.inputService.overrideMouse("license")
                })
            }, t.prototype.exit = function() {
                var e = this;
                return new r(function(t) {
                    e.stage.play(), e.stage.once(s.EventEx.STOP, function() {
                        e.stateService.go("root.LicenseMain", {
                            fromHud: !0
                        }).then(function() {
                            return e.inputService.clearMouseOverride("license")
                        }).then(t)
                    })
                })
            }, t.prototype.retry = function() {
                var e = this;
                return new r(function(t) {
                    e.inputService.clearMouseOverride("license"), e.stage.play(), e.stage.once(s.EventEx.STOP, function() {
                        e.stateService.go("root.LicenseLoading").then(function() {
                            return t()
                        }), e.service.startTest(e.test)
                    })
                })
            }, t.prototype.showDebugButtons = function() {
                var e = this;
                this.externalService.isDevelopment() && (this.debug = $('<div class="twbs" style="position: fixed; left: 45%; top: 20px">'), $('<button class="btn btn-success btn-lg" type="submit">성공</button>').on("click", function() {
                    e.debug.hide(), e.service.cheatSuccess()
                }).appendTo(this.debug), $('<button class="btn btn-danger btn-lg" type="submit">실패</button>').on("click", function() {
                    e.debug.hide(), e.service.cheatFail()
                }).appendTo(this.debug), this.debug.appendTo("#edge-ui"))
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([o.autowired("licenseService")], u.prototype, "service", void 0), n.__decorate([o.autowired("stateService")], u.prototype, "stateService", void 0), n.__decorate([o.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([o.autowired("inputService")], u.prototype, "inputService", void 0), t.HudLicenseFinishBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = i(28),
        c = i(4),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.apply(this.stage, s.classNames, "leftsideReviseCoordinateOfScreenRatio"), this.translate(".id-currentRecordName", "ID_HUD_RECORD_MY_TRACK_RECORD");
                var t = this.convertFace(".id-lapTimeLabel");
                t.ignoreRepositionLayout = !0;
                var i = function(i) {
                    _.isNumber(i) && e.bindText(t, c.default.formatLapTime(i))
                };
                this.addManagedListener(this.externalService, a.default.beHUDSetTimeElapsed, i), i(0)
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.hudService.once("intro", function() {
                    e.stage.$("CONTAINER").gotoAndPlay("intro")
                })
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("hudService")], d.prototype, "hudService", void 0), t.HudLicenseTimeBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(3),
        s = i(28),
        c = i(9),
        d = i(37),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.convertFace(".id-conditionDetail .id-textField").ignoreRepositionLayout = !0
            }, t.prototype.update = function(e) {
                var t = e.label;
                this.bindText(".id-conditionDetail", t), this.prevProps && !this.prevProps.complete && e.complete && this.gotoAndPlay(this.face, "get"), this.prevProps = e
            }, t
        }(r.Binder);
    t.ConditionInfoBinder = l;
    var u = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.lastSec = 0, t.limitSec = 0, t.playCountdown = _.once(function() {
                t.audioService.get(d.FxAudioCode.EndCountdown).play()
            }), t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.apply(this.stage, s.classNames, "rightsideReviseCoordinateOfScreenRatio");
            var t = a.store.getState().license,
                i = t.currentTest,
                n = i.name,
                o = i.conditions,
                u = i.type,
                p = i.code,
                h = _.find(o, function(e) {
                    return "time" === e.name
                });
            this.limitSec = h ? Math.floor(h.goal / 1e3) : this.service.RETIRE_MAX_SEC, this.translate(".id-titleLabel", n), this.translate(".id-categoryLabel", "LICENSE_TEST_" + u.toUpperCase()), this.translate(".id-conditionLabel", "LICENSE_TEST_LOADING_CONDITION"), this.translate(".id-recountName", "BEPLAY_MAIN_RACEFINISH"), this.addManagedListener(this.externalService, c.default.beHUDSetTimeElapsed, function(t) {
                return e.onElapseTime(t)
            }), this.addManagedOnceListener(this.externalService, c.default.beFinishGame, function() {
                e.audioService.get(d.FxAudioCode.EndCountdown).stop()
            }), this.retire = this.getFace(".id-retireCount"), this.translate(this.retire.$(".id-recountName .id-RETIRECOUNTNAME"), "1ON1_RACE_LAPTIME_END"), this.retire.visible = !1, this.getFace(".id-conditionInfo").hasSize = !0, this.infoItems = this.addChildBinder(".id-conditionInfoItem", r.CollectionBinder, {
                instanceBinder: l
            }), this.infoItems.applyCollection(this.getInfoProps()), this.conditionHandler = function(t) {
                return e.updateCondition(t)
            }, this.service.on("conditionUpdate", this.conditionHandler), this.drawExternalImage(".id-testIcon", this.$filter("cdn_license_test_icon")(p))
        }, t.prototype.onAddedToScene = function() {
            var e = this;
            this.hudService.once("intro", function() {
                e.stage.$("CONTAINER").gotoAndPlay("intro")
            })
        }, t.prototype.onDetach = function() {
            this.service.removeListener("conditionUpdate", this.conditionHandler)
        }, t.prototype.getInfoProps = function(e) {
            var t = this;
            if (void 0 === e && (e = -1), e < 0) {
                var i = a.store.getState().license,
                    n = i.currentTest.conditions;
                this.infoProps = n.map(function(e, i) {
                    return {
                        label: t.service.getHudConditionLabel(i),
                        complete: t.service.checkCompletedCondition(i)
                    }
                })
            } else this.infoProps = this.infoProps.map(function(i, n) {
                return n !== e ? i : {
                    label: t.service.getHudConditionLabel(n),
                    complete: t.service.checkCompletedCondition(n)
                }
            });
            return this.infoProps
        }, t.prototype.updateCondition = function(e) {
            this.infoItems.applyCollection(this.getInfoProps(e))
        }, t.prototype.setRetireTimer = function(e) {
            void 0 === e && (e = 0);
            var i = this.retire;
            e > 0 ? (i.visible || (i.gotoAndPlay("start"), i.visible = !0), e <= t.RETIRE_AUDIO_START_SEC && this.playCountdown(), this.bindText(i.$(".id-recountNum"), e + "")) : i.visible = !1
        }, t.prototype.onElapseTime = function(e) {
            var i = Math.floor(e / 1e3),
                n = this.limitSec - t.RETIRE_AUDIO_START_SEC;
            i > this.lastSec && i >= n && (this.setRetireTimer(this.limitSec - i), this.retire.gotoAndPlay("loopCount")), this.lastSec = i
        }, t
    }(o.StageBinder);
    u.RETIRE_AUDIO_START_SEC = 10, n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([r.autowired("licenseService")], u.prototype, "service", void 0), n.__decorate([r.autowired("hudService")], u.prototype, "hudService", void 0), n.__decorate([r.autowired("audioService")], u.prototype, "audioService", void 0), t.HudLicenseConditionBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(1),
        a = i(17),
        s = i(3),
        c = i(9);
    ! function(e) {
        e[e.Drift = 1] = "Drift", e[e.PerfectStart = 2] = "PerfectStart", e[e.VehicleReset = 3] = "VehicleReset", e[e.SuperTurbo = 4] = "SuperTurbo"
    }(n || (n = {}));
    var d;
    ! function(e) {
        e[e.Forward = 0] = "Forward", e[e.Reserved = 1] = "Reserved", e[e.Left = 2] = "Left", e[e.Right = 3] = "Right", e[e.Total = 4] = "Total"
    }(d || (d = {}));
    var l;
    ! function(e) {
        e[e.Handbreak = 0] = "Handbreak", e[e.Nitro = 1] = "Nitro", e[e.Item = 2] = "Item", e[e.Reset = 3] = "Reset", e[e.Total = 4] = "Total"
    }(l || (l = {}));
    var u = d.Total + l.Handbreak,
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.keyStates = {}, t.isDriftCompletedByHandBrake = !1, t
            }
            return r.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this,
                    t = s.store.getState().license;
                this.visible(this.stage, !1), this.isDriftCompletedByHandBrake = !1, t.currentTest.code === n.VehicleReset && this.addManagedListener(this.externalService, c.default.beVehicleTeleported, function(t) {
                    e.recordService.pushRecord("vehiclereset", e.hudService.timeElapsed)
                }), this.addManagedListener(this.externalService, c.default.beLicenseNotifyInput, function(i) {
                    _.forEach(e.keyStates, function(t, n) {
                        var r = 1 << Number(n) & i;
                        e.gotoAndPlay(t, r ? "input" : "normal")
                    }), t.currentTest.code === n.Drift && 1 << u & i && !e.isDriftCompletedByHandBrake && (e.isDriftCompletedByHandBrake = !0, e.recordService.pushRecord("usehandbrake", e.hudService.timeElapsed))
                }), this.addManagedListener(this.externalService, c.default.beLicenseNotifySubStep, function(t) {
                    e.setEvent(t)
                })
            }, t.prototype.setDirectionKey = function(e, t) {
                var i = ["TUTORIAL_DRIVING_ACC_KEY", "", "TUTORIAL_DRIVING_LEFT_KEY", "TUTORIAL_DRIVING_RIGHT_KEY"];
                if (this.inputKeyConfigService.isSetDefault) {
                    var n = ["front", "rear", "left", "right"];
                    this.gotoAndPlay(e, "imageButton"), this.gotoAndPlay(e + " .id-directionImageButton", "normal"), this.gotoAndPlay(e + " .id-directionImageButton .id-arrow", n[t]), this.translate(e + " .id-directionImageButton .id-keyName", i[t]), this.keyStates[t] = e + " .id-directionImageButton"
                } else {
                    var r = ["W", "S", "A", "D"];
                    this.gotoAndPlay(e, "textButton"), this.gotoAndPlay(e + " .id-directionTextButton", "normal"), this.bindHtml(e + " .id-directionTextButton .id-keyText", r[t]), this.translate(e + " .id-directionTextButton .id-keyName", i[t]), this.keyStates[t] = e + " .id-directionTextButton"
                }
            }, t.prototype.setFunctionKey = function(e, t) {
                var i = ["TUTORIAL_DRIVING_DRIFT_KEY", "TUTORIAL_DRIVING_NITRO_KEY", "LICENSE_TURBO_KEY", "GAMEOPTION_INPUTKEY_RESET"],
                    n = ["SHIFT", "SPACE BAR", "CTRL", "F"];
                this.gotoAndPlay(e, "imageButton"), this.gotoAndPlay(e, "normal"), this.bindHtml(e + " .id-keyText .id-textField", n[t]), this.translate(e + " .id-keyName", i[t]), this.keyStates[d.Total + t] = e
            }, t.prototype.setEvent = function(e) {
                switch (this.keyStates = {}, this.visible(this.stage, !0), this.translate(".id-description", "LICENSE_TEST_NOTICE_0" + e), e) {
                    case 1:
                        this.stage.gotoAndPlay("inputKeyGuide"), this.gotoAndPlay(".id-inputKeyGuide", "direction"), this.setDirectionKey(".id-inputKeyGuide .id-directionButton", d.Forward);
                        break;
                    case 2:
                        this.stage.gotoAndPlay("inputKeyGuide"), this.gotoAndPlay(".id-inputKeyGuide", "drift"), this.setDirectionKey(".id-inputKeyGuide .id-directionButton1", d.Forward), this.setDirectionKey(".id-inputKeyGuide .id-directionButton2", d.Right), this.setFunctionKey(".id-inputKeyGuide .id-handBrakeButton", l.Handbreak);
                        break;
                    case 3:
                        this.stage.gotoAndPlay("inputKeyGuide"), this.gotoAndPlay(".id-inputKeyGuide", "nitro"), this.setDirectionKey(".id-inputKeyGuide .id-directionButton", d.Forward), this.setFunctionKey(".id-inputKeyGuide .id-nitroButton", l.Nitro);
                        break;
                    case 4:
                        this.stage.gotoAndPlay("inputKeyGuide"), this.gotoAndPlay(".id-inputKeyGuide", "respawn"), this.setFunctionKey(".id-inputKeyGuide .id-respawnButton", l.Reset);
                        break;
                    case 5:
                        this.stage.gotoAndPlay("superTurboGuide"), this.translate(".TurboGuideAnimation .TurboContainerStill .GaugeStill .id-superTurboArea .id-areaText", "LICENSE_TEST_NAME_04"), this.translate(".TurboGuideAnimation .TurboContainer .Gauge .id-superTurboArea .id-TextSuperTurbo", "LICENSE_TEST_NAME_04"), this.bindHtmlAll(".TurboGuideAnimation .TurboKeyText", "CTRL"), this.translateAll(".TurboGuideAnimation .id-turboKeyName", "LICENSE_TURBO_KEY"), this.translateAll(".TurboGuideAnimation .id-superTurboKeyName", "LICENSE_SUPERTURBO_KEY"), this.translate(".id-turboDescription", "LICENSE_TEST_NOTICE_05"), this.translate(".id-superTurboDescription", "LICENSE_TEST_NOTICE_05")
                }
            }, t
        }(a.StageBinder);
    r.__decorate([o.autowired("hudService")], p.prototype, "hudService", void 0), r.__decorate([o.autowired("$filter")], p.prototype, "$filter", void 0), r.__decorate([o.autowired("externalService")], p.prototype, "externalService", void 0), r.__decorate([o.autowired("inputKeyConfigService")], p.prototype, "inputKeyConfigService", void 0), r.__decorate([o.autowired("recordService")], p.prototype, "recordService", void 0), t.HudLicenseNoticeBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1446);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/license/loading?fromLobby", 43).global({
            stages: {
                "license-loading-screen": r.LicenseLoadingBinder
            },
            resolve: {
                vehicle: ["vehicleService", function(e) {
                    return e.fetch()
                }]
            }
        });
        e.state("root.LicenseLoading", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(1),
        a = i(242),
        s = i(1447),
        c = i(636),
        d = i(3),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = d.store.getState().license,
                    t = e.license,
                    i = e.currentTest,
                    n = i.type,
                    r = i.name,
                    o = i.conditions,
                    l = t.code > i.licenseCode || _.some(t.completedTest, function(e) {
                        return e === i.code
                    });
                this.translate(".id-categoryLabel", "LICENSE_TEST_" + n.toUpperCase()), this.translate(".id-titleLabel", r), this.translate(".id-tipLabel .comp-TextField", i.lang.loading), this.translate(".id-objectiveLabel", "LICENSE_TEST_LOADING_CONDITION"), this.translate(".id-trackLabel", "LICENSE_TEST_LOADING_TRACK"), this.translate(".id-vehicleLabel", "LICENSE_TEST_LOADING_VEHICLE");
                for (var u = 0; u < 3; u++) {
                    this.addChildBinder(".id-objective" + (u + 1), a.ConditionBinder).setProps(_.assign({}, o[u], {
                        complete: l
                    }))
                }
                this.addChildBinder(".id-trackContainer", c.LicenseTrackBinder, i);
                var p = this.vehicleDataService.createRefinedVehicle(i.vehicleCode);
                this.vehicleBinder = this.addChildBinder(".id-vehicleContainer", s.LicenseLoadingVehicleBinder), this.vehicleBinder.setProps({
                    vehicle: p
                }), this.setHandlers()
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = d.store.getState().license,
                    i = this.$stateParams.fromLobby && JSON.parse(this.$stateParams.fromLobby);
                i && this.bgmService.setRaceLoadingListener(), i || "driving" === t.currentTest.type ? this.loadGame(t.currentTest) : setTimeout(function() {
                    return e.loadGame(t.currentTest)
                }, 5e3);
                var n = this.featureSetService.isEnabled("PARTNERSHIPMARKETING");
                this.visible(".MarketingArea", n), n && this.drawExternalImage(".MarketingArea", this.$filter("cdn_marketing")("marketing-type-01"))
            }, t.prototype.setHandlers = function() {
                var e = this;
                this.addManagedListener(this.externalService, r.default.beAllPlayerLoaded, function() {
                    var t = d.store.getState().license,
                        i = "item" === t.currentTest.hud ? "root.LicenseHudItem" : "root.LicenseHudSpeed";
                    e.stateService.go(i)
                }), this.addManagedListener(this.externalService, r.default.bePushLoadingProgress, function(t) {
                    return e.vehicleBinder.updateProgress(t)
                })
            }, t.prototype.loadGame = function(e) {
                this.service.loadLicenseGame(e), this.externalService.isEdgeBrowser() || this.service.cheatStartGame()
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$stateParams")], l.prototype, "$stateParams", void 0), n.__decorate([o.autowired("licenseService")], l.prototype, "service", void 0), n.__decorate([o.autowired("externalService")], l.prototype, "externalService", void 0), n.__decorate([o.autowired("stateService")], l.prototype, "stateService", void 0), n.__decorate([o.autowired("bgmService")], l.prototype, "bgmService", void 0), n.__decorate([o.autowired("vehicleDataService")], l.prototype, "vehicleDataService", void 0), n.__decorate([o.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([o.autowired("featureSetService")], l.prototype, "featureSetService", void 0), t.LicenseLoadingBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(637),
        o = i(46),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.progress = this.addChildBinder(".id-progressBar", o.ProgressBinder, {
                    duration: 3,
                    outDuration: .5
                }), e.prototype.onFaceReady.call(this)
            }, t.prototype.updateProgress = function(e) {
                this.progress.value = e || 0
            }, t
        }(r.LicenseVehicleBinder);
    t.LicenseLoadingVehicleBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(639);
    var n = i(11),
        r = i(639);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/acquire?{fromHud}", 42).dialog({
            stages: {
                "license-acquire": r.LicenseAcquireEffect
            }
        });
        e.state("root.LicenseMain.acquire", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(1450),
        r = i(12),
        o = i(11),
        a = i(3);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = function(e) {
                return "SPEED1ON1" === e ? 65 : 66
            },
            i = function(e) {
                return new o.StateDefinition("/rankedmatch/" + e, t(e), {
                    gameMode: e
                }).container({
                    controller: "RankedMatch",
                    stages: {
                        "multiplay-ranked-match-main": n.RankedMatchBinder
                    },
                    resolve: {
                        vehicle: ["vehicleService", function(e) {
                            return e.fetch()
                        }],
                        ranked: ["ranked2Service", function(t) {
                            return t.setGameMode(e), t.fetch()
                        }],
                        license: ["licenseService", function(e) {
                            return e.fetch()
                        }]
                    }
                })
            };
        e.state("root.menu.RankedMatch1On1", i("SPEED1ON1")), e.state("root.menu.RankedMatch6Players", i("SPEEDINDIVIDUAL"))
    }]).controller("RankedMatchController", ["externalService", "stateService", "playerService", "ranked2Service", function(e, t, i, n) {
        var o = a.store.getState().rankedEvent,
            s = o.eventQueue[n.getGameMode()];
        s && 0 < s.length && t.go(t.getCurrentName() + ".event"), i.setRecentVehicleIfNeeded(7), e.camera.rankedMatchMain(), e.beSelectVehicle(r.getRecentVehicle())
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(53),
        o = i(4),
        a = i(3),
        s = i(1),
        c = i(12),
        d = i(2),
        l = i(108),
        u = i(58),
        p = i(1451),
        h = i(1452),
        f = i(1454),
        v = i(1455),
        m = i(1456),
        g = i(1457),
        y = i(1458),
        S = i(136),
        E = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.matchingTime = 0, t.onServerTimeout = function(e) {
                    return t.handleServerTimeout(e)
                }, t.onServerCreated = function() {
                    return t.startLoading()
                }, t.onConnectError = function(e) {
                    return t.handleConnectionError(e)
                }, t.onSeasonExpired = function(e) {
                    void 0 === e && (e = !0), e && (t.cleanUpMatchMaking(), t.setScene("matching_out")), t.popupService.drawConfirm("1ON1_MAIN_STARTMATCHING_SEASONENDED_TITLE", "1ON1_MAIN_STARTMATCHING_SEASONENDED_DESC", function() {
                        t.stateService.go(".", {}, {
                            reload: !0
                        })
                    })
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.seasonPeriodBinder = this.addChildBinder(this.face, p.SeasonPeriodBinder), this.tierInfoBinder = this.addChildBinder(".id-currentStatusInfoContainer", h.TierInfoBinder), this.seasonRecordBinder = this.addChildBinder(".id-seasonRecordContainer", f.SeasonRecordBinder), this.seasonRewardBinder = this.addChildBinder(".id-seasonRewardContainer", v.SeasonRewardBinder), this.seasonLeaderBoardBinder = this.addChildBinder(".id-seasonLeaderBoard", m.SeasonLeaderBoardBinder), this.vehicleInfoBinder = this.addChildBinder(".id-vehicleInfo", g.VehicleInfoBinder), this.changeVehicleBinder = this.addChildBinder(this.face, y.RankedMatchChangeVehicleBinder), this.initButtons()
            }, t.prototype.onAddedToScene = function() {
                this.uiGameMode = this.$stateParams.gameMode, this.setScene("in"), this.checkShowResultPopup()
            }, t.prototype.onDetach = function() {
                this.clearTimer(), this.removeMatchServiceListener()
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    ranked: e.ranked
                }
            }, t.prototype.shouldUpdate = function(e) {
                var t = e.ranked,
                    i = (t.seasons, t.modes),
                    n = i[this.ranked2Service.getGameMode()],
                    r = n.topPlayersInfo,
                    o = n.tierRankInfo,
                    a = n.rankedPlayer;
                return !!(r && o && a) && this.uiGameMode === a.gameMode
            }, t.prototype.update = function(e) {
                var t = e.ranked,
                    i = t.seasons,
                    n = t.modes,
                    r = t.selectedTab,
                    o = n[this.ranked2Service.getGameMode()],
                    a = o.topPlayersInfo,
                    s = o.tierRankInfo,
                    c = o.rankedPlayer;
                this.seasonPeriodBinder.setProps(i), this.tierInfoBinder.setProps({
                    rankedPlayer: c,
                    tierRankInfo: s,
                    topPlayersInfo: a
                }), this.seasonRecordBinder.setProps(c), this.seasonRewardBinder.setProps(c), this.seasonLeaderBoardBinder.setProps({
                    rankedPlayer: c,
                    topPlayersInfo: a,
                    selectedTab: r
                })
            }, t.prototype.initButtons = function() {
                var e = this;
                this.translate(".id-changeVehicleButton", "1ON1_MAIN_CHANGEVEHICLE"), this.translate(".id-startButton", "1ON1_MAIN_STARTMATCHING"), this.translate(".id-cancelButton", "1ON1_MAIN_STARTMATCHING_INPROGRESS_CANCEL"), this.translate(".id-loading .id-loadingLabel", "1ON1_MAIN_STARTMATCHING_INPROGRESS"), this.on(".id-startButton", d.MouseEventEx.CLICK, function() {
                    var t = e.getProps().ranked.seasons.nextSeason,
                        i = t ? e.serverTimeService.getRemainingDuration(t.startat) : void 0;
                    i && i.asMinutes() < 10 ? e.popupService.draw("ConfirmCancelPopup", {
                        title: "1ON1_MAIN_STARTMATCHING_SEASONEND_TITLE",
                        description: "1ON1_MAIN_STARTMATCHING_SEASONEND_DESC",
                        confirmString: "1ON1_MAIN_STARTMATCHING_SEASONEND_CONFIRM",
                        cancelString: "1ON1_MAIN_STARTMATCHING_SEASONEND_CANCEL ",
                        confirm: function() {
                            e.startMatchMaking()
                        }
                    }) : e.startMatchMaking()
                }), this.on(".id-cancelButton", d.MouseEventEx.CLICK, function() {
                    return e.cancelMatchMaking()
                }), this.on(".id-changeVehicleButton", d.MouseEventEx.CLICK, function() {
                    return e.openChangeVehiclePopup()
                })
            }, t.prototype.setScene = function(e) {
                var t = !1;
                switch (e) {
                    case "in":
                    case "matching_out":
                        this.enableButton(".id-startButton", !0), this.enableButton(".id-cancelButton", !1);
                        break;
                    case "changeVehicle_in":
                        this.enableButton(".id-startButton", !1), this.enableButton(".id-cancelButton", !1);
                        break;
                    case "matching_in":
                        this.enableButton(".id-startButton", !1), this.enableButton(".id-cancelButton", !0), t = !0
                }
                this.gotoAndPlay(this.face, e, t)
            }, t.prototype.setTimer = function() {
                var e = this;
                (this.matchingTimer || this.forceMatchingTimer) && this.cleanUpMatchMaking(), console.assert(!this.matchingTimer && !this.forceMatchingTimer), this.setMatchingTime(0), this.matchingTimer = setInterval(function() {
                    return e.setMatchingTime(e.matchingTime + 1)
                }, 1e3)
            }, t.prototype.clearTimer = function() {
                this.matchingTimer && clearInterval(this.matchingTimer), this.matchingTimer = void 0, this.forceMatchingTimer && clearTimeout(this.forceMatchingTimer), this.forceMatchingTimer = void 0
            }, t.prototype.setMatchingTime = function(e) {
                var t = this;
                this.ranked2MatchService.checkTimeout(e, this.cancelMatchMaking.bind(this)).then(function(i) {
                    if (i) return t.cleanUpMatchMaking();
                    t.matchingTime = e, t.bindText(".id-loading .id-count", e)
                })
            }, t.prototype.addMatchServiceListener = function() {
                this.ranked2MatchService.once("server.created", this.onServerCreated), this.ranked2MatchService.once("server.timeout", this.onServerTimeout), this.ranked2MatchService.once("connect.error", this.onConnectError), this.ranked2MatchService.once("season.expired", this.onSeasonExpired)
            }, t.prototype.removeMatchServiceListener = function() {
                this.ranked2MatchService.removeListener("server.created", this.onServerCreated), this.ranked2MatchService.removeListener("server.timeout", this.onServerTimeout), this.ranked2MatchService.removeListener("connect.error", this.onConnectError), this.ranked2MatchService.removeListener("season.expired", this.onSeasonExpired)
            }, t.prototype.startMatchMaking = function() {
                var e = this;
                return this.setScene("matching_in"), this.setMatchingTime(0), this.deferredRequest = o.default.defer(), this.addMatchServiceListener(), this.ranked2Service.startRankedMatchMaking().then(function() {
                    e.ranked2MatchService.init(), e.setTimer(), e.deferredRequest.resolve(), e.registerTransitionAlert(), e.uistateNotifyService.setSubState(3), e.dispatch(S.matchmaking(!0))
                }).catch(function(t) {
                    log.error("ranked2Service matchmaking failed:", t.code), e.cleanUpMatchMaking(), e.setScene("matching_out"), t.code === l.toCode(l.ErrorCode.SeasonHaveBeenChanged) ? e.onSeasonExpired(!1) : t.code === u.toCode(u.ErrorCode.IgrVehicleDateExpiredWhenGetIgrVehicle) && (e.popupService.drawConfirm("PCVEHICLE_UPDATE_COMMONPOPUP_TITLE", "PCVEHICLE_UPDATE_COMMONPOPUP_DESC", function() {
                        e.vehicleService.fetchIgrVehicles()
                    }), e.externalService.beSelectVehicle(e.playerService.setRecentVehicleIfNeeded(1)))
                })
            }, t.prototype.cancelMatchMaking = function(e) {
                var t = this;
                return this.enableButton(".id-cancelButton", !1), this.ranked2Service.cancelRankedMatchMaking().then(function() {
                    t.cleanUpMatchMaking(), t.setScene("matching_out")
                }).catch(function(i) {
                    log.info("failed to cancel ranked matchmaking:", i), t.setForcedMatchTimeout(), e && e()
                })
            }, t.prototype.cleanUpMatchMaking = function() {
                this.deferredRequest.reject(new Error("cleanUpMatchMaking")), this.clearTimer(), this.removeMatchServiceListener(), this.setMatchingTime(0), this.deregisterTransitionAlert(), this.uistateNotifyService.setSubState(4), this.dispatch(S.matchmaking(!1))
            }, t.prototype.registerTransitionAlert = function() {
                var e = this;
                this.deregisterOnStart = this.$transitions.onStart({}, function() {
                    return e.tryTransition()
                })
            }, t.prototype.deregisterTransitionAlert = function() {
                this.deregisterOnStart && (this.deregisterOnStart(), this.deregisterOnStart = void 0)
            }, t.prototype.setForcedMatchTimeout = function() {
                var e = this;
                console.assert(!this.forceMatchingTimer), this.forceMatchingTimer = setTimeout(function() {
                    return e.discardMatch()
                }, 5e3)
            }, t.prototype.discardMatch = function() {
                log.warn("ranked/created push was not arrived. it might be treated as losing"), this.ranked2Service.clearMatchMakingStates(), this.cleanUpMatchMaking(), this.setScene("matching_out")
            }, t.prototype.startLoading = function() {
                var e = this;
                this.deferredRequest.promise.then(function() {
                    e.deregisterTransitionAlert(), e.clearTimer();
                    var t = o.default.gameModeToHudState[e.ranked2Service.getGameMode()];
                    e.stateService.go(t + ".loading")
                }).catch(function(e) {
                    log.info("Push is received successfully, but Request is failed")
                })
            }, t.prototype.handleConnectionError = function(e) {
                var t = this;
                this.setScene("matching_out"), l.toCode(l.ErrorCode.ClientVersionNotMatched) === e.errorCode && (this.ranked2MatchService.cancelServerTimeout(), this.ranked2Service.exit().then(function() {
                    return t.cleanUpMatchMaking()
                }), this.popupService.draw("ConfirmPopup", {
                    title: "COMMON_ERROR_SERVICE_TITLE",
                    description: "ALARM_CLIENTUPDATE_GUIDETEXT",
                    confirm: function() {
                        t.externalService.isDevelopment() && t.popupService.draw("ConfirmPopup", {
                            title: "COMMON_ERROR_SERVICE_TITLE",
                            description: e.message || ""
                        })
                    }
                }))
            }, t.prototype.handleServerTimeout = function(e) {
                var t = this;
                this.setScene("matching_out"), this.ranked2Service.exit().then(function() {
                    return t.cleanUpMatchMaking()
                }), this.popupService.draw("ConfirmPopup", {
                    title: "COMMON_ERROR_SERVICE_TITLE",
                    description: "Reason - " + e
                })
            }, t.prototype.tryTransition = function() {
                var e = this;
                return new Promise(function(t) {
                    e.popupService.draw("ConfirmCancelPopup", {
                        title: "COMMON_STOPMATCHING_POPUP_TITLE",
                        description: "COMMON_STOPMATCHING_POPUP_DESC",
                        confirm: function() {
                            e.cancelMatchMaking(function() {
                                return t(!1)
                            }).then(function() {
                                return e.enableButton(".id-startButton", !1), e.enableButton(".id-changeVehicleButton", !1), t(!0)
                            })
                        },
                        cancel: function() {
                            return t(!1)
                        }
                    }), setTimeout(function() {
                        return $("#edge-ui").removeClass("prevent-click")
                    })
                })
            }, t.prototype.checkShowResultPopup = function() {
                var e = this.ranked2Service.getLastPlayerState();
                if ("promotion" === e || "depromotion" === e) {
                    var t = a.store.getState().ranked.modes;
                    if (t[this.ranked2Service.getGameMode()] && t[this.ranked2Service.getGameMode()].rankedPlayer) {
                        var i = a.store.getState().ranked.modes[this.ranked2Service.getGameMode()].rankedPlayer,
                            n = this.ranked2Service.getTierByFp(i.records.fp),
                            r = this.$filter("translate")("RANKEDMATCH_TIERNAME_" + n.code),
                            o = this.getResultPopupLabels(i, e, r);
                        this.popupService.draw("PromoteResultConfirmPopup", {
                            title: o.title,
                            description: o.desc,
                            tier: n.code,
                            tierFp: this.ranked2Service.getFpWithinTier(i.records.fp),
                            progress: i.records.stateProgress[e],
                            minHighRank: this.ranked2Service.getMinHighRank()
                        }), this.ranked2Service.setLastPlayerState(void 0)
                    }
                }
            }, t.prototype.getResultPopupLabels = function(e, t, i) {
                var n = e.records.stateProgress[t],
                    r = this.ranked2Service.getMinHighRank(),
                    o = _.filter(n, function(e) {
                        return -1 !== e && 1 <= e && e <= r
                    }).length,
                    a = "1ON1_REMAINPOPUP_TITLE",
                    s = "1ON1_REMAINPOPUP_DESC";
                return "promotion" === t && 2 <= o ? (a = "1ON1_PROMOTIONPOPUP_TITLE", s = "1ON1_PROMOTIONPOPUP_DESC") : "depromotion" === t && o < 2 && (a = "1ON1_DEMOTIONPOPUP_TITLE", s = "1ON1_DEMOTIONPOPUP_DESC"), {
                    title: this.$filter("template")({
                        tier: i
                    }, a),
                    desc: this.$filter("translate")(s)
                }
            }, t.prototype.openChangeVehiclePopup = function() {
                var e = this,
                    t = function() {
                        e.dispatch(r.hideNav()), e.changeVehicleBinder.setProps(c.getVehicleState()), e.externalService.beRankedMatchChangeVehicle(!0), e.setScene("changeVehicle_in")
                    };
                this.publisherService.isNeedUpdateIgrVehicles() ? this.vehicleService.fetchIgrVehicles().finally(function() {
                    return t()
                }) : t()
            }, t
        }(s.StageBinder);
    n.__decorate([s.autowired("$filter")], E.prototype, "$filter", void 0), n.__decorate([s.autowired("$stateParams")], E.prototype, "$stateParams", void 0), n.__decorate([s.autowired("$transitions")], E.prototype, "$transitions", void 0), n.__decorate([s.autowired("ranked2Service")], E.prototype, "ranked2Service", void 0), n.__decorate([s.autowired("ranked2MatchService")], E.prototype, "ranked2MatchService", void 0), n.__decorate([s.autowired("stateService")], E.prototype, "stateService", void 0), n.__decorate([s.autowired("popupService")], E.prototype, "popupService", void 0), n.__decorate([s.autowired("externalService")], E.prototype, "externalService", void 0), n.__decorate([s.autowired("uistateNotifyService")], E.prototype, "uistateNotifyService", void 0), n.__decorate([s.autowired("serverTimeService")], E.prototype, "serverTimeService", void 0), n.__decorate([s.autowired("vehicleService")], E.prototype, "vehicleService", void 0), n.__decorate([s.autowired("publisherService")], E.prototype, "publisherService", void 0), n.__decorate([s.autowired("playerService")], E.prototype, "playerService", void 0), t.RankedMatchBinder = E
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(5),
        a = i(1),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.shouldUpdate = function(e) {
                return !!e
            }, t.prototype.update = function(e) {
                var t, i = (e.prevSeason, e.currSeason),
                    n = e.nextSeason,
                    a = o(i.startat.toString());
                t = n ? o(n.startat.toString()) : o(a).add(r.Constants.RankedMatchSeasonPeriod, "days"), this.bindText(".id-seasonYear", a.year()), this.template(".id-seasonNumberContainer", "1ON1_MAIN_SEASON_NUM", {
                    num: i.seasonnum
                }), this.template(".id-seasonPeriod", "1ON1_MAIN_SEASON_PERIOD", {
                    m1: a.month() + 1,
                    d1: a.date(),
                    m2: t.month() + 1,
                    d2: t.date()
                })
            }, t
        }(a.Binder);
    t.SeasonPeriodBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(2),
        a = i(1),
        s = i(4),
        c = i(13),
        d = i(54),
        l = i(1453),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSizeAll(".id-title", !0), this.hasSizeAll(".id-tooltipButton", !0), this.tierTooltipBinder = this.addChildBinder(".id-currentTierTooltip", l.TierTooltipBinder), this.medalPreSeason = this.addChildBinder(".id-preSeason .id-medalContainer .RankedMatchRewardIconBig", d.TierMedalBinder), this.medalPromotion = this.addChildBinder(".id-promotion .id-medalContainer .RankedMatchRewardIconBig", d.TierMedalBinder), this.medalDemotion = this.addChildBinder(".id-demotion .id-medalContainer .RankedMatchRewardIconBig", d.TierMedalBinder), this.medalCurrent = this.addChildBinder(".id-currentFP .id-medalContainer .RankedMatchRewardIconBig", d.TierMedalBinder), this.onAll(".id-tooltipButton", o.MouseEventEx.MOUSE_OVER, this.showTooltip.bind(this)), this.onAll(".id-tooltipButton", o.MouseEventEx.MOUSE_OUT, this.hideTooltip.bind(this)), this.gameModeLabel = "SPEED1ON1" === this.ranked2Service.getGameMode() ? "1ON1" : "RANKEDMATCH"
            }, t.prototype.shouldUpdate = function(e) {
                var t = e.rankedPlayer,
                    i = e.tierRankInfo,
                    n = e.topPlayersInfo;
                return !!(t && i && n)
            }, t.prototype.update = function(e) {
                var t = e.rankedPlayer,
                    i = e.tierRankInfo,
                    n = e.topPlayersInfo,
                    r = t.records,
                    o = this.ranked2Service.getTierByFp(r.fp || 0),
                    a = o.code || 1,
                    s = this.ranked2Service.getFpWithinTier(r.fp || 0),
                    c = this.getRankedTierPercent(a, s, i);
                switch (this.state = this.getStatus(r.state), this.gotoAndStop(this.face, this.state), this.state) {
                    case "preseason":
                        this.bindPreSeasonStatus(r.stateProgress.batch, a);
                        break;
                    case "promotion":
                        this.bindPromotionStatus(r.stateProgress.promotion, a + 1);
                        break;
                    case "demotion":
                        this.bindDemotionStatus(r.stateProgress.depromotion, a);
                        break;
                    default:
                        this.bindCurrentStatus(s, a, n.myRank, c), this.bindNextTier(o, r)
                }
                this.tierTooltipBinder.setProps(t)
            }, t.prototype.getStatus = function(e) {
                switch (e) {
                    case r.Ranked.RankedPlayerStateValuation.BATCH:
                        return "preseason";
                    case r.Ranked.RankedPlayerStateValuation.PROMOTION:
                        return "promotion";
                    case r.Ranked.RankedPlayerStateValuation.DEPROMOTION:
                        return "demotion";
                    default:
                        return "currentFP"
                }
            }, t.prototype.bindPreSeasonStatus = function(e, t) {
                var i = this;
                _.times(5, function(t) {
                    var n = -1 !== e[t] ? "check" : "normal";
                    i.gotoAndPlay(".id-preSeason .id-step" + (t + 1), n)
                }), this.translate(".id-preSeason .id-title", "1ON1_MAIN_STATUS_TEST_TITLE"), this.translate(".id-preSeason .id-description", "1ON1_MAIN_STATUS_TEST_DESC"), this.medalPreSeason.setProps({
                    tierCode: t
                })
            }, t.prototype.bindPromotionStatus = function(e, t) {
                var i = this,
                    n = this.ranked2Service.getMinHighRank(),
                    r = function(t) {
                        var i = e[t];
                        return 1 <= i && i <= n ? "success" : -1 !== i ? "failure" : "normal"
                    };
                _.times(3, function(e) {
                    i.gotoAndPlay(".id-promotion .id-step" + (e + 1), r(e))
                }), this.translate(".id-promotion .id-title", this.gameModeLabel + "_MAIN_STATUS_PROMOTION_TITLE"), this.translate(".id-promotion .id-description", this.gameModeLabel + "_MAIN_STATUS_PROMOTION_DESC"), this.medalPromotion.setProps({
                    tierCode: t
                })
            }, t.prototype.bindDemotionStatus = function(e, t) {
                var i = this,
                    n = this.ranked2Service.getMinHighRank(),
                    r = function(t) {
                        var i = e[t];
                        return 1 <= i && i <= n ? "success" : -1 !== i ? "failure" : "normal"
                    };
                _.times(3, function(e) {
                    i.gotoAndPlay(".id-demotion .id-step" + (e + 1), r(e))
                }), this.translate(".id-demotion .id-title", this.gameModeLabel + "_MAIN_STATUS_DEMOTION_TITLE"), this.translate(".id-demotion .id-description", this.gameModeLabel + "_MAIN_STATUS_DEMOTION_DESC"), this.medalDemotion.setProps({
                    tierCode: t
                })
            }, t.prototype.isHighRanker = function(e) {
                return e <= 1e3
            }, t.prototype.isUnderHalf = function(e) {
                return 50 <= e
            }, t.prototype.bindCurrentStatus = function(e, t, i, n) {
                var r = i && this.isHighRanker(i) || !this.isUnderHalf(n) ? "current" : "under";
                if (this.gotoAndStop(".id-currentFP", r), this.translate(".id-currentFP .id-title .id-textField", "1ON1_MAIN_STATUS_GENERAL_TITLE"), this.bindText(".id-tierPoint", e), ("under" === r || e >= 1e4) && this.getFace(".id-tierPoint").setCustomStyle({
                        "font-size": "65px"
                    }), this.translate(".id-tierName", "RANKEDMATCH_TIERNAME_" + t), i && this.isHighRanker(i)) this.template(".id-currentFP .id-rankedPercentNum", "RANKEDMATCH_MAIN_USERRANK", {
                    value: s.default.toMoney(i),
                    suffix: this.$filter("ordinalSuffix")(i)
                }), this.translate(".id-currentFP .id-rankedMatchPercentName", "RANKEDMATCH_MAIN_RANKINALLUSER");
                else if (!this.isUnderHalf(n)) {
                    var o = _.floor(n, 2).toString() + "%";
                    this.bindText(".id-currentFP .id-rankedPercentNum", o), this.translate(".id-currentFP .id-rankedMatchPercentName", "1ON1_MAIN_STATUS_GENERAL_PERCENT")
                }
                this.medalCurrent.setProps({
                    tierCode: t
                })
            }, t.prototype.bindNextTier = function(e, t) {
                var i = e.code || 1;
                if (this.maxTier = this.maxTier || this.ranked2Service.getMaxTier(), i >= this.maxTier) return void this.visible(".id-nextTierContainer", !1);
                this.visible(".id-nextTierContainer", !0), this.template(".id-nextTierContainer .id-title", "RANKEDMATCH_NEEDFP_FOR_NEXTTIER", {
                    nexttier: this.$filter("translate")("RANKEDMATCH_TIERNAME_" + (i + 1))
                }), this.translate(".id-nextTierContainer .id-tierPoint", "" + (e.rating - t.fp))
            }, t.prototype.getRankedTierPercent = function(e, t, i) {
                for (var n = i.tierPlayerCount, r = this.ranked2Service.getTierInfoByTier(e).rating, o = 1 === e ? 0 : this.ranked2Service.getTierInfoByTier(e - 1).rating, a = r - o, s = _.round(n[e] * (t / a)), c = 1; c < e; c++) s += n[c];
                var d = 100 - s / i.totalPlayerCount * 100;
                return d < .01 && (d = .01), d
            }, t.prototype.showTooltip = function(e) {
                if ("currentFP" === this.state) this.tierTooltipBinder.show();
                else {
                    var t = {
                            preseason: {
                                title: "1ON1_MAIN_STATUS_TEST_TIP_1",
                                desc: "1ON1_MAIN_STATUS_TEST_TIP_2"
                            },
                            promotion: {
                                title: this.gameModeLabel + "_MAIN_STATUS_PROMOTION_TIP_1",
                                desc: this.gameModeLabel + "_MAIN_STATUS_PROMOTION_TIP_2"
                            },
                            demotion: {
                                title: this.gameModeLabel + "_MAIN_STATUS_DEMOTION_TIP1",
                                desc: this.gameModeLabel + "_MAIN_STATUS_DEMOTION_TIP2"
                            }
                        },
                        i = t[this.state];
                    i && this.tooltipService.show(e, "right", c.TooltipType.BasicTitled, {
                        title: this.$filter("translate")(i.title),
                        description: this.$filter("translate")(i.desc)
                    }, {}, {}, "tierState")
                }
            }, t.prototype.hideTooltip = function() {
                "currentFP" === this.state ? this.tierTooltipBinder.hide() : this.tooltipService.hide()
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([a.autowired("ranked2Service")], u.prototype, "ranked2Service", void 0), n.__decorate([a.autowired("tooltipService")], u.prototype, "tooltipService", void 0), t.TierInfoBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-title", "1ON1_MAIN_STATUS_GENERAL_TIP_TITLE"), this.translate(".id-description", "1ON1_MAIN_STATUS_GENERAL_TIP_DESC"), this.translate(".id-currentTierTitle", "1ON1_MAIN_STATUS_GENERAL_TIP_CURRENT"), this.translate(".id-seasonClassContainer .id-classDriver", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_1"), this.translate(".id-seasonClassContainer .id-classChallenge", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_2"), this.translate(".id-seasonClassContainer .id-classMaster", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_3"), this.translate(".id-seasonClassContainer .id-classAce", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_4"), this.translate(".id-seasonClassContainer .id-classLegend", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_5");
                var t = "SPEED1ON1" === this.ranked2Service.getGameMode() ? "1on1" : "6players";
                ["Driver", "Challenge", "Master", "Ace", "Legend"].forEach(function(i, n) {
                    e.gotoAndPlay(".id-seasonClassContainer .id-class" + i, t), e.translate(".id-seasonClassContainer .id-class" + i, "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_" + (n + 1))
                })
            }, t.prototype.setBonusFpDesc = function(e) {
                var t = this.ranked2Service.getTierByFp(e.records.fp || 0),
                    i = (t.code, t.dailyFpBonus),
                    n = t.dailyBonusCount,
                    r = e.records.fpBonus,
                    o = r.todayCount,
                    a = r.updatedAt,
                    s = new Date(String(a)).getDate() === this.serverTimeService.time.getDate() ? o : 0;
                this.template(".id-dailyBonus .id-textField", "RANKEDMATCH_DAILYBONUSFP_DESC", {
                    value: s,
                    dailybonuscount: n,
                    dailyfpbonus: i
                })
            }, t.prototype.update = function(e) {
                var t = this.ranked2Service.getTierByFp(e.records.fp || 0),
                    i = t.code,
                    n = this.ranked2Service.getNameByTier(i);
                this.setBonusFpDesc(e), this.gotoAndStop(".id-seasonClassContainer", n);
                var r = this.ranked2Service.getFpWithinTier(e.records.fp || 0),
                    o = this.$filter("translate")("RANKEDMATCH_TIERNAME_" + t.code) + " <span>" + r + "</span>";
                this.bindHtml(".id-currentTierPoint", o)
            }, t.prototype.show = function() {
                this.setBonusFpDesc(this.props), this.gotoAndPlay(this.face, "over")
            }, t.prototype.hide = function() {
                this.gotoAndPlay(this.face, "out")
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), n.__decorate([r.autowired("ranked2Service")], o.prototype, "ranked2Service", void 0), n.__decorate([r.autowired("serverTimeService")], o.prototype, "serverTimeService", void 0), t.TierTooltipBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(1),
        a = i(13),
        s = i(54),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.medals = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-seasonRecordTitle", "1ON1_MAIN_RECORD_TITLE"), this.translateAll(".id-topTierTitle", "1ON1_MAIN_RECORD_BEST"), this.translateAll(".id-winName", "1ON1_MAIN_RECORD_WIN"), this.translateAll(".id-playName", "1ON1_MAIN_RECORD_PLAYCOUNT"), this.translateAll(".id-prizeContainer .id-prizeTitle", "1ON1_MAIN_RECORD_HIGH"), [{
                    selector: ".id-topTier1on1Container, .id-topTierContainer",
                    type: "best"
                }, {
                    selector: ".id-win1on1Container, .id-winContainer",
                    type: "win"
                }, {
                    selector: ".id-play1on1Container, .id-playContainer",
                    type: "play"
                }, {
                    selector: ".id-prizeContainer",
                    type: "high"
                }].forEach(function(t) {
                    e.onAll(t.selector, r.MouseEventEx.MOUSE_OVER, function(i) {
                        return e.showTooltip(i, t.type)
                    }), e.onAll(t.selector, r.MouseEventEx.MOUSE_OUT, function() {
                        return e.tooltipService.hide()
                    })
                }), this.medals = this.face.$$(".RankedMatchRewardIconBig").map(function(t) {
                    return e.addChildBinder(t, s.TierMedalBinder)
                })
            }, t.prototype.shouldUpdate = function(e) {
                return !!e
            }, t.prototype.update = function(e) {
                var t = e.gameMode,
                    i = e.records,
                    n = this.ranked2Service.getTierByFp(i.bestFp),
                    r = this.ranked2Service.getTierGroupNumber(n.code),
                    o = this.ranked2Service.getNumberByTier(n.code);
                this.translateAll(".id-topTierName", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_" + r), this.translateAll(".id-topTierNum", "RANKEDMATCH_TIERGRADE_" + o), this.visibleAll(".id-topTierNum", 1 < n.code), this.medals.map(function(e) {
                    return e.setProps({
                        tierCode: n.code
                    })
                }), this.bindTextAll(".id-winNum", i.info.win);
                var a = (i.info.attend - i.info.retire).toString();
                if (this.bindTextAll(".id-playNum", a), "SPEEDINDIVIDUAL" === t) {
                    this.bindTextAll(".id-prizeContainer .id-prizeNum", i.info.high);
                    (i.info.attend - i.info.retire).toString()
                }
                this.gotoAndPlay(this.face, "SPEED1ON1" === t ? "1on1" : "6players")
            }, t.prototype.showTooltip = function(e, t) {
                var i = {
                        best: "1ON1_MAIN_RECORD_BEST_TIP",
                        win: "1ON1_MAIN_RECORD_WIN_TIP",
                        play: "1ON1_MAIN_RECORD_PLAYCOUNT_TIP",
                        high: "1ON1_MAIN_RECORD_HIGH_TIP"
                    },
                    n = i[t];
                n && this.tooltipService.show(e, "bottom", a.TooltipType.Basic, this.$filter("translate")(n), {}, {}, "seasonRecord")
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([o.autowired("ranked2Service")], c.prototype, "ranked2Service", void 0), n.__decorate([o.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.SeasonRecordBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(1),
        a = i(46),
        s = i(13),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(".id-seasonRewardTitleContainer", !0), this.hasSize(".id-seasonRewardTitle", !0), this.translate(".id-seasonRewardTitleContainer .id-seasonRewardTitle", "1ON1_MAIN_REWARD_TITLE"), this.progressBarTier = this.addChildBinder(".id-seasonReward1 .id-progressBar", a.ProgressBinder, {
                    duration: 1,
                    outDuration: .5
                }), this.progressBarHigh = this.addChildBinder(".id-seasonReward2 .id-progressBar", a.ProgressBinder, {
                    duration: 1,
                    outDuration: .5
                }), this.onAll(".id-tooltipButton", r.MouseEventEx.MOUSE_OVER, this.showTooltip.bind(this)), this.onAll(".id-tooltipButton", r.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                }), this.on(".id-seasonReward1 .id-itemContainer", r.MouseEventEx.MOUSE_OVER, function(t) {
                    return e.showRewardTooltip(t, "best")
                }), this.on(".id-seasonReward1 .id-itemContainer", r.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                }), this.on(".id-seasonReward2 .id-itemContainer", r.MouseEventEx.MOUSE_OVER, function(t) {
                    return e.showRewardTooltip(t, "high")
                }), this.on(".id-seasonReward2 .id-itemContainer", r.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.shouldUpdate = function(e) {
                return !!e
            }, t.prototype.update = function(e) {
                var t = e.gameMode,
                    i = e.records,
                    n = (i.fp, i.bestFp),
                    r = i.info,
                    o = r.win,
                    a = r.high,
                    s = r.attend,
                    c = r.retire,
                    d = this.ranked2Service.getTierByFp(n || 0);
                this.gameMode = t, this.tierRewards = d.package.rewards, this.highRewards = this.ranked2Service.getMedalContentionRewards();
                var l = Math.max(0, s - c);
                this.translate(".id-seasonReward1 .id-title", "1ON1_MAIN_REWARD_BEST");
                var u = d.playNumberForReward <= l ? "1ON1_MAIN_REWARD_GET" : "1ON1_MAIN_REWARD_COUNT";
                this.translate(".id-seasonReward1 .id-subTitle", u), this.updateProgress(this.getFace(".id-seasonReward1"), this.progressBarTier, l, d.playNumberForReward);
                var p = this.$filter("itemCardImg")(this.tierRewards[0].type, this.tierRewards[0].code);
                this.drawExternalImage(".id-seasonReward1 .id-itemContainer .id-itemImage", p);
                var h = this.ranked2Service.getMedalContentionNumber(),
                    f = "SPEED1ON1" === t ? o : a;
                this.translate(".id-seasonReward2 .id-title", "SPEED1ON1" === t ? "1ON1_MAIN_REWARD_WIN" : "1ON1_MAIN_REWARD_HIGH");
                var v = h <= f ? "1ON1_MAIN_REWARD_GET" : "1ON1_MAIN_REWARD_COUNT";
                this.translate(".id-seasonReward2 .id-subTitle", v), this.updateProgress(this.getFace(".id-seasonReward2"), this.progressBarHigh, f, h);
                var m = this.$filter("itemCardImg")(this.highRewards[0].type, this.highRewards[0].code);
                this.drawExternalImage(".id-seasonReward2 .id-itemContainer .id-itemImage", m)
            }, t.prototype.updateProgress = function(e, t, i, n) {
                var r = n <= i;
                this.visible(e.$(".id-currentNum"), !r), this.visible(e.$(".id-splitline"), !r), this.visible(e.$(".id-totalNum"), !r), this.bindText(e.$(".id-currentNum"), i), this.bindText(e.$(".id-totalNum"), n), this.gotoAndStop(e.$(".id-progressBar .id-filled"), r ? "complete" : "normal"), t.value = i / n * 100
            }, t.prototype.showTooltip = function(e) {
                this.tooltipService.show(e, "right", s.TooltipType.SeasonRewardDetail, {
                    best: {
                        title: "1ON1_MAIN_REWARD_TIP_BEST_TITLE",
                        desc: "1ON1_MAIN_REWARD_TIP_BEST_DESC"
                    },
                    high: {
                        title: "SPEED1ON1" === this.gameMode ? "1ON1_MAIN_REWARD_TIP_WIN_TITLE" : "1ON1_MAIN_REWARD_TIP_HIGH_TITLE",
                        desc: "SPEED1ON1" === this.gameMode ? "1ON1_MAIN_REWARD_TIP_WIN_DESC" : "1ON1_MAIN_REWARD_TIP_HIGH_DESC"
                    },
                    guide: "SPEED1ON1" === this.gameMode ? "1ON1_MAIN_REWARD_TIP_GUIDE" : "SIX_MAIN_REWARD_TIP_GUIDE"
                })
            }, t.prototype.showRewardTooltip = function(e, t) {
                var i = "best" === t ? this.tierRewards[0] : this.highRewards[0];
                this.tooltipService.show(e, "right", s.TooltipType.ItemCard, i, {
                    marginLeft: 10,
                    fontSize: 15,
                    up: !0
                })
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([o.autowired("ranked2Service")], c.prototype, "ranked2Service", void 0), n.__decorate([o.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.SeasonRewardBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(1),
        a = i(3),
        s = i(54),
        c = i(108),
        d = i(578),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.on(this.face, r.MouseEventEx.CLICK, function(t) {
                    e.props.onClick && e.props.onClick(e.props)
                }), this.update(this.props)
            }, t.prototype.update = function(e) {
                this.translate(".id-buttonName", e.title)
            }, t
        }(o.Binder),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(this.face, !0), this.hasSize(".id-currentFP", !0), this.hasSize(".id-currentFP .id-medalMC", !0), this.medalPrev = this.addChildBinder("> .RankedMatchRewardIconSmall", s.TierMedalBinder), this.medalCurr = this.addChildBinder(".id-currentFP .RankedMatchRewardIconSmall", s.TierMedalBinder)
            }, t.prototype.update = function(e) {
                this.gotoAndStop(".id-background", e.index % 2 ? "odd" : "even"), this.gotoAndStop(".id-playerNameContainer", e.me ? "me" : "default"), this.bindText(".id-rankNum", e.rank), this.bindTextAll(".id-playerNameContainer .id-textField", e.playerName), this.bindText(".id-currentFP", e.tierFp), this.medalPrev.setProps({
                    hide: !e.medalTier,
                    tierCode: e.medalTier,
                    tierMode: e.medalType
                }), this.medalCurr.setProps({
                    tierCode: e.tier
                })
            }, t
        }(o.Binder),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(".id-tabList", !0), this.tabButtonsBinder = this.addChildBinder(".id-tabList .id-tabButton", o.CollectionBinder, {
                    instanceBinder: l
                });
                var t = ["1ON1_MAIN_RANK_TOP5", "1ON1_MAIN_RANK_FRIENDS"],
                    i = t.map(function(t, i) {
                        return {
                            index: i,
                            title: t,
                            onClick: function(t) {
                                var i = t.index;
                                e.changeTab(i)
                            }
                        }
                    });
                this.tabButtonsBinder.applyCollection(i), this.hasSize(".id-seasonLeaderboardList", !0), this.tabItemListBinder = this.addChildBinder(".id-seasonLeaderboardList .id-listItem", o.CollectionBinder, {
                    instanceBinder: u
                }), void 0 === a.store.getState().ranked.selectedTab && this.dispatch(d.selectTab(this.contactsService.friends.length ? c.TabMenu.Friends : c.TabMenu.Top5))
            }, t.prototype.shouldUpdate = function(e) {
                var t = e.rankedPlayer,
                    i = e.topPlayersInfo;
                return !(!t || !i)
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.rankedPlayer,
                    n = i.pid,
                    r = i.gameMode,
                    o = i.records,
                    s = i.seasonId,
                    d = e.topPlayersInfo.top5,
                    l = e.selectedTab,
                    u = [],
                    p = function(e, i) {
                        var o = u[u.length - 1] || {
                                rank: -1,
                                fp: -1
                            },
                            a = t.ranked2Service.getMedalTier(e.pid, "ranked");
                        u.push({
                            index: u.length,
                            rank: o.fp === e.fp ? o.rank : i,
                            me: n === e.pid,
                            pid: e.pid,
                            playerName: e.name || t.$filter("translate")("RANKEDMATCH_MAIN_TOPRANKERLIST_UNKNOWN"),
                            tier: t.ranked2Service.getTierByFp(e.fp).code,
                            medalTier: e.prevTier || a.code,
                            medalType: r,
                            tierFp: t.ranked2Service.getFpWithinTier(e.fp),
                            fp: e.fp
                        })
                    };
                if (this.selectedTab = l, this.selectedTab === c.TabMenu.Top5) _.forEach(d, function(e, t) {
                    p(d[t], _.toInteger(t))
                });
                else if (this.selectedTab === c.TabMenu.Friends) {
                    var h = _.filter(this.contactsService.friends, function(e) {
                            return e.snippet.ranked[r] && -1 < e.snippet.ranked[r].fp && s === e.snippet.ranked[r].currSeasonId
                        }),
                        f = _.map(h, function(e) {
                            return {
                                pid: e.snippet.pid,
                                name: e.snippet.name,
                                fp: e.snippet.ranked[r].fp
                            }
                        }),
                        v = a.store.getState().player;
                    f.push({
                        pid: n,
                        name: v.name,
                        fp: o.fp
                    }), f = _.orderBy(f, ["fp"], ["desc"]), f.splice(5), f.map(function(e, t) {
                        return p(e, t + 1)
                    })
                }
                this.tabItemListBinder.applyCollection(u), this.tabButtonsBinder.binders.map(function(e, i) {
                    e.face.selected = i === t.selectedTab, t.classNames(e.face, i === t.selectedTab ? "selected" : "")
                })
            }, t.prototype.changeTab = function(e) {
                e !== this.selectedTab && (this.selectedTab = e, this.dispatch(d.selectTab(e)))
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([o.autowired("ranked2Service")], p.prototype, "ranked2Service", void 0), n.__decorate([o.autowired("playerSnippetService")], p.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("contactsService")], p.prototype, "contactsService", void 0), t.SeasonLeaderBoardBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(12),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                var t = o.getRecentVehicle(),
                    i = t.manufacturerCode,
                    n = t.code,
                    r = t.ovr,
                    a = t.clazz,
                    s = t.grade;
                this.bindText(".id-manufacturerName", this.$filter("manufacturerName")(i)), this.bindText(".id-vehicleName", this.$filter("vehicleName")(n)), this.bindText(".id-ovr", r), this.bindText(".id-vehicleClass", a), this.gotoAndStop(".id-vehicleGrade", "grade" + s)
            }, t.prototype.mapStateToProps = function(e) {
                return e.vehicle
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], a.prototype, "$filter", void 0), t.VehicleInfoBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(75),
        o = i(12),
        a = i(614),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-changeVehicleLabel", "1ON1_MAIN_CHANGEVEHICLESCREEN_TITLE")
            }, t.prototype.initVehicles = function() {
                this.vehicles = o.getAllVehicles();
                var e = o.getVehicleState();
                this.bindText(".id-retentionTextfield", "" + this.vehicles.length), this.vehicleListBinder.setProps({
                    vehicles: this.applyFilter(r.defaultSortKeys),
                    selected: this.selected
                }), this.filterBinder.setProps(n.__assign({}, e, {
                    filterState: r.defaultSortKeys,
                    useVehicleTypes: 7
                }))
            }, t.prototype.changeVehicleCamera = function(e) {
                this.externalService.beRankedMatchChangeVehicle(e)
            }, t
        }(a.ChangeVehicleBinder);
    t.RankedMatchChangeVehicleBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1460);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = function(e) {
                return "SPEED1ON1" === e ? 67 : 68
            },
            i = function(e) {
                return new n.StateDefinition("/event", t(e)).dialog({
                    stages: {
                        "multiplay-ranked-match-season-events": r.default
                    }
                })
            };
        e.state("root.menu.RankedMatch1On1.event", i("SPEED1ON1")), e.state("root.menu.RankedMatch6Players.event", i("SPEEDINDIVIDUAL"))
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(5),
        o = i(108),
        a = i(1),
        s = i(1461),
        c = i(1462),
        d = i(1463),
        l = i(1464),
        u = i(1465),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.seasonDemote = this.addChildBinder(".SeasonDemoteStartContainer", c.SeasonDemoteBinder), this.seasonPromote = this.addChildBinder(".SeasonPromoteStartContainer", s.SeasonPromoteBinder), this.preSeasonPrimary = this.addChildBinder(".PreSeasonPrimaryStartContainer", d.PreSeasonPrimaryBinder), this.preSeasonResult = this.addChildBinder(".PreSeasonResultContainer", l.PreSeasonResultBinder), this.preSeasonExisting = this.addChildBinder(".PreSeasonExistingStartContainer", u.PreSeasonExistingBinder)
            }, t.prototype.playEvent = function(e) {
                switch (e) {
                    case o.SeasonEvent.PreSeasonPrimaryStart:
                        this.preSeasonPrimary.play(this.currentSeasonYear.bind(this), this.currentSeason, e), this.gotoAndPlay(this.face, "preSeasonPrimaryStart");
                        break;
                    case o.SeasonEvent.PreSeasonExistingStart:
                        this.preSeasonExisting.play(this.currentSeasonYear.bind(this), this.currentSeason, this.getTierName.bind(this), this.getTierStringCode.bind(this), e), this.gotoAndPlay(this.face, "preSeasonExistingStart");
                        break;
                    case o.SeasonEvent.PreSeasonResult:
                        this.preSeasonResult.play(this.currentSeasonYear.bind(this), this.currentSeason, this.currentTier, this.getTierName.bind(this)), this.gotoAndPlay(this.face, "preSeasonResult");
                        break;
                    case o.SeasonEvent.PromoteStart:
                        this.seasonPromote.play(this.currentTier), this.gotoAndPlay(this.face, "seasonPromoteStart");
                        break;
                    case o.SeasonEvent.DemoteStart:
                        this.seasonDemote.play(this.currentTier), this.gotoAndPlay(this.face, "seasonDemoteStart")
                }
            }, t.prototype.shouldUpdate = function(e) {
                var t = e.ranked,
                    i = t.seasons,
                    n = t.modes,
                    r = n[this.ranked2Service.getGameMode()].rankedPlayer;
                return !(!i || !r)
            }, t.prototype.update = function(e) {
                var t = e.rankedEvent,
                    i = e.ranked,
                    n = i.seasons,
                    r = i.modes,
                    o = r[this.ranked2Service.getGameMode()],
                    a = o.rankedPlayer,
                    s = o.prevSeasonInfo,
                    c = this.ranked2Service.getTierByFp(a.records.fp || 0);
                this.currentTier = c.code || 1, this.currentSeason = n.currSeason;
                var d = t.eventQueue[this.ranked2Service.getGameMode()];
                0 === d.length ? this.stateService.go("^") : (this.preSeasonExisting.setProps({
                    prevSeasonInfo: s,
                    rankedPlayer: a
                }), this.preSeasonPrimary.setProps(a), this.preSeasonResult.setProps(a), this.seasonPromote.setProps(a), this.seasonDemote.setProps(a), this.playEvent(d[0]))
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    rankedEvent: e.rankedEvent,
                    ranked: e.ranked
                }
            }, t.prototype.currentSeasonYear = function() {
                if (this.currentSeason) {
                    return r(this.currentSeason.startat.toString()).year()
                }
                return r().year()
            }, t.prototype.getTierName = function(e) {
                return this.ranked2Service.getNameByTier(e)
            }, t.prototype.getTierStringCode = function(e) {
                return "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_" + this.ranked2Service.getTierGroupNumber(e)
            }, t
        }(a.StageBinder);
    n.__decorate([a.autowired("ranked2Service")], p.prototype, "ranked2Service", void 0), n.__decorate([a.autowired("stateService")], p.prototype, "stateService", void 0), t.default = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(162),
        a = i(2),
        s = i(54),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-seasonPromoteTitle .id-textField", "RANKEDMATCH_EVENT_PROMOTION"), this.translate(".id-seasonPromoteDescription .id-textField", this.getLabels().guide1), this.translate(".id-TargetMedal .id-titleName .id-textField", "RANKEDMATCH_TARGET_TIER"), this.translate(".id-currentMedal .id-titleName .id-textField", "RANKEDMATCH_CURRENT_TIER"), this.translate(".id-confirmButton", "RANKEDMATCH_OK_BUTTON"), this.on(".id-confirmButton", a.MouseEventEx.CLICK, function() {
                    return e.onStop()
                }), this.medalCurr = this.addChildBinder(".id-currentMedal .RankedMatchRewardIconBig", s.TierMedalBinder), this.medalNext = this.addChildBinder(".id-TargetMedal .RankedMatchRewardIconBig", s.TierMedalBinder)
            }, t.prototype.onStop = function() {
                var e = this.getProps().gameMode;
                this.dispatch(o.finishEvent(e))
            }, t.prototype.play = function(e) {
                this.medalCurr.setProps({
                    tierCode: e
                }), this.medalNext.setProps({
                    tierCode: e + 1
                }), this.gotoAndStop(".id-currentMedal .id-circleGaugeContainer", "tier" + e), this.gotoAndStop(".id-TargetMedal .id-circleGaugeContainer", "tier" + (e + 1)), this.translate(".id-currentMedal .id-tierDescription .id-textField", "RANKEDMATCH_TIERNAME_" + e), this.translate(".id-TargetMedal .id-tierDescription .id-textField", "RANKEDMATCH_TIERNAME_" + (e + 1));
                var t = this.$filter("translate")("RANKEDMATCH_TIERNAME_" + (e + 1)),
                    i = this.$filter("template")({
                        name: t
                    }, this.getLabels().guide2);
                this.translate(".id-descriptionTextfield .comp-TextField", i)
            }, t.prototype.getLabels = function() {
                return "SPEED1ON1" === this.ranked2Service.getGameMode() ? {
                    guide1: "1ON1_PROMOTION_DESC",
                    guide2: "1ON1_PROMOTION_TEXT"
                } : {
                    guide1: "RANKEDMATCH_PROMOTION_GUIDE_GUIDE1",
                    guide2: "RANKEDMATCH_PROMOTION_GUIDE_GUIDE2"
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("ranked2Service")], c.prototype, "ranked2Service", void 0), t.SeasonPromoteBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(162),
        s = i(54),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-seasonPromoteTitle .id-textField", "RANKEDMATCH_EVENT_MAINTAINRACE"), this.translate(".id-seasonPromoteDescription .id-textField", this.getLabels().guide1), this.translate(".id-titleName .id-textField", "RANKEDMATCH_TARGET_TIER"), this.translate(".id-confirmButton", "RANKEDMATCH_OK_BUTTON"), this.on(".id-confirmButton", o.MouseEventEx.CLICK, function() {
                    return e.onStop()
                }), this.medalCurr = this.addChildBinder(".id-TargetMedal .RankedMatchRewardIconBig", s.TierMedalBinder)
            }, t.prototype.onStop = function() {
                var e = this.getProps().gameMode;
                this.dispatch(a.finishEvent(e))
            }, t.prototype.play = function(e) {
                this.medalCurr.setProps({
                    tierCode: e
                });
                var t = this.$filter("translate")("RANKEDMATCH_TIERNAME_" + e);
                this.template(".id-tierDescription .id-textField", "RANKEDMATCH_KEEP_TIER_DESCRITION", {
                    name: t
                });
                var i = this.$filter("template")({
                    name: t
                }, this.getLabels().guide2);
                this.translate(".id-descriptionTextfield .comp-TextField", i)
            }, t.prototype.getLabels = function() {
                return "SPEED1ON1" === this.ranked2Service.getGameMode() ? {
                    guide1: "1ON1_DEMOTION_DESC",
                    guide2: "1ON1_DEMOTION_TEXT"
                } : {
                    guide1: "RANKEDMATCH_DEPROMOTION_GUIDE_GUIDE1",
                    guide2: "RANKEDMATCH_DEPROMOTION_GUIDE_GUIDE2"
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("ranked2Service")], c.prototype, "ranked2Service", void 0), t.SeasonDemoteBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(108),
        o = i(1),
        a = i(162),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.on("stop", function() {
                    return e.onStop()
                }), this.translate(".id-seasonStartDescription .id-textField", "RANKEDMATCH_SEASONSTART_GUIDE"), this.translate(".id-preSeasonStartTitle .id-textField", "RANKEDMATCH_TIERREPLACE_TITLE"), this.translate(".id-preSeasonStartDescription .id-textField", "RANKEDMATCH_TIERREPLACE_GUIDE")
            }, t.prototype.play = function(e, t, i) {
                this.template(".id-seasonStartTitle .id-textField", "RANKEDMATCH_SEASONTITLE", {
                    year: e(),
                    value: t.seasonnum
                }), i === r.SeasonEvent.PreSeasonPrimaryStart && this.gotoAndPlay(this.face, "seasonIntro", !0)
            }, t.prototype.onStop = function() {
                switch (this.face.currentLabel) {
                    case "seasonIntro":
                        this.gotoAndPlay(this.face, "preSeasonIntro", !0);
                        break;
                    case "preSeasonIntro":
                        var e = this.getProps().gameMode;
                        this.dispatch(a.finishEvent(e))
                }
            }, t
        }(o.Binder);
    t.PreSeasonPrimaryBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(162),
        a = i(1),
        s = i(640),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-preSeasonResultSubtitle .id-textField", "RANKEDMATCH_TIERREPLACE_RESULT_TITLE"), this.translate(".id-seasonClassContainer .id-classDriver .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_1"), this.translate(".id-seasonClassContainer .id-classChallenge .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_2"), this.translate(".id-seasonClassContainer .id-classMaster .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_3"), this.translate(".id-seasonClassContainer .id-classAce .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_4"), this.translate(".id-seasonClassContainer .id-classLegend .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_5"), this.translate(".id-CircleContainer .id-circleName .id-textField", "RANKEDMATCH_TIERREPLACE_RESULT2_REWARDFP"), this.translate(".id-descriptionTextfield .comp-TextField", "1ON1_TESTRESULT_GUIDE"), this.translate(".id-confirmButton", "RANKEDMATCH_OK_BUTTON"), this.on(".id-confirmButton", r.MouseEventEx.CLICK, function() {
                    return e.onStop()
                }), this.seasonOverallContainer = this.addChildBinder(".id-seasonOverallContainer", s.SeasonOverallContainerBinder)
            }, t.prototype.onStop = function() {
                var e = this.getProps().gameMode;
                this.dispatch(o.finishEvent(e))
            }, t.prototype.getFp = function(e) {
                return Math.floor(e.fp)
            }, t.prototype.getResultFpState = function(e) {
                return 0 < e.fp ? "fpPlus" : "fpMinus"
            }, t.prototype.play = function(e, t, i, n) {
                var r = this.getProps().records;
                this.template(".id-seasonStartTitle .id-textField", "RANKEDMATCH_SEASONTITLE", {
                    year: e(),
                    value: t.seasonnum
                }), this.seasonOverallContainer.setProps({
                    tier: i,
                    fpWithinTier: this.ranked2Service.getFpWithinTier(r.fp)
                });
                var o = this.$filter("translate")("RANKEDMATCH_TIERNAME_" + i);
                this.template(".id-preSeasonResultDescription .id-textField", "RANKEDMATCH_TIERREPLACE_RESULT2_GUIDE1", {
                    name: o
                }), this.gotoAndPlay(".id-seasonClassContainer", n(i)), this.gotoAndPlay(".id-CircleContainer", this.getResultFpState(r)), this.bindText(".id-CircleContainer .id-textNum .id-textField", this.getFp(r))
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([a.autowired("ranked2Service")], c.prototype, "ranked2Service", void 0), t.PreSeasonResultBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(108),
        o = i(13),
        a = i(1),
        s = i(2),
        c = i(162),
        d = i(640),
        l = i(27),
        u = i(54),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.seasonhighRankContainerPlayed = !1, t.seasonAcquisitionMedals = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-preSeasonStartTitle .id-textField", "RANKEDMATCH_TIERREPLACE_TITLE"), this.translate(".id-preSeasonStartDescription .id-textField", "RANKEDMATCH_TIERREPLACE_GUIDE"), this.translate(".id-seasonStartDescription .id-textField", "RANKEDMATCH_SEASONSTART_GUIDE"), this.translate(".id-seasonRewardDescription .id-textField", "RANKEDMATCH_PREVIOUSSEASON_REWARD_TITLE"), this.translate(".id-seasonResultDescription .id-textField", "RANKEDMATCH_PREVIOUSSEASON_RESULT_TITLE"), this.translate(".id-classDriver .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_1"), this.translate(".id-classChallenge .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_2"), this.translate(".id-classMaster .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_3"), this.translate(".id-classAce .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_4"), this.translate(".id-classLegend .id-textField", "RANKEDMATCH_MAIN_TIERINFOTOOLTIP_TIERNAME_5"), this.translate(".id-seasonRecordContainer .id-topTierContainer .id-topTierTitle .id-textField", "RANKEDMATCH_MAIN_MYSEASONINFO_TOPTIER"), this.translate(".id-seasonRecordContainer .id-winContainer .id-winName .id-textField", "RANKEDMATCH_MAIN_MYSEASONINFO_WIN"), this.translate(".id-seasonRecordContainer .id-prizeContainer .id-prizeTitle .id-textField", "RANKEDMATCH_MAIN_MYSEASONINFO_MEDALCONTENTION"), this.translate(".id-seasonRecordContainer .id-playContainer .id-playName .id-textField", "RANKEDMATCH_MAIN_MYSEASONINFO_COMPLETERACING"), this.translate(".id-seasonRewardItemContainer .id-noneItemDescription .id-textField", "RANKEDMATCH_PREVIOUSSEASON_REWARD_NOREWARD"), this.translate(".id-seasonRewardItemContainer .id-rewardItemContainer1 .rewardMedalContainer .id-itemTitle .comp-Textfield", "RANKEDMATCH_PREVIOUSSEASON_REWARD_BESTTIER"), this.translate(".id-seasonMedalAcquisitionContainer .id-titleName .comp-TextField", "RANKEDMATCH_PRESEASON_RESULT_GET_MEDAL"), this.translate(".id-confirmButton", "RANKEDMATCH_OK_BUTTON"), this.on(".id-confirmButton", s.MouseEventEx.CLICK, function() {
                    return e.onConfirm()
                }), this.hasSize(".id-seasonhighRank .RewardItem", !0), this.getFace(".id-seasonhighRank .RewardItem").setCustomStyle({
                    "text-align": "center"
                }), this.rewardGuideStrCode = "RANKEDMATCH_PREVIOUSSEASON_REWARD_GUIDE", this.onPlaying = !0, this.face.on("stop", function() {
                    return e.onStop()
                }), this.rewardItems = [], this.seasonOverallContainer = this.addChildBinder(".id-seasonOverallContainer", d.SeasonOverallContainerBinder), this.seasonAcquisitionMedals = this.face.$$(".id-medalMC").map(function(t) {
                    return e.addChildBinder(t, u.TierMedalBinder)
                })
            }, t.prototype.outRewardItem = function() {
                this.tooltipService.hide()
            }, t.prototype.onConfirm = function() {
                var e = this;
                this.onPlaying || (this.onPlaying = !0, this.isTopRankReward ? (this.gotoAndPlay(this.face, "seasonhighRankContainer"), this.rewardGuideStrCode = "RANKEDMATCH_PREVIOUSSEASON_REWARD_GUIDE2", this.isTopRankReward = !1) : this.isMedalReward ? (this.gotoAndPlay(this.face, "seasonMedalRewardContainer"), this.on(".id-seasonMedalAcquisitionContainer", "stop", function() {
                    e.gotoAndPlay(e.face, "preSeasonIntro_existing")
                }), this.isMedalReward = !1) : this.gotoAndPlay(this.face, "preSeasonIntro_existing"))
            }, t.prototype.onStop = function() {
                var e = this.face.currentLabel;
                switch (this.onPlaying = !1, e) {
                    case "preSeasonIntro_existing":
                        var t = this.getProps().rankedPlayer.gameMode;
                        this.dispatch(c.finishEvent(t));
                        break;
                    case "seasonhighRankContainer":
                        this.seasonhighRankContainerPlayed = !0, this.seasonOverallContainer.setProps({
                            hide: !0
                        }), $(this.getFace(".id-seasonRewardItemContainer").htmlElement).hide()
                }
            }, t.prototype.overRewardItem = function(e, t) {
                if (t.rewardType) {
                    var i = this.getProps().prevSeasonInfo.rewardMap,
                        n = function() {
                            return "bestTier" === t.rewardType ? i.bestTier.package.rewards[0] : "highPrize" === t.rewardType ? i.highPrize.package.rewards[0] : void 0
                        }(),
                        r = {
                            marginLeft: 60,
                            marginTop: -70,
                            fontSize: 15
                        };
                    this.tooltipService.show(e, "right", o.TooltipType.ItemCard, n, r)
                }
            }, t.prototype.overHighRankReward = function(e, t) {
                var i = {
                    fontSize: 15
                };
                this.tooltipService.show(e, "right", o.TooltipType.ItemCard, t, i)
            }, t.prototype.setSeasonRewardItems = function(e) {
                var t = this,
                    i = this.face.$(".SeasonRewardItemContainer").$$(".RewardItemContainer"),
                    n = [i.slice(0, 1), i.slice(1, 3), i.slice(3)],
                    r = n[this.rewardItems.length - 1] || [];
                this.rewardItems.forEach(function(e, i) {
                    var n = e.item ? e.item.type : "ITEM",
                        o = e.item ? e.item.code : 0;
                    t.addChildBinder(r[i].$(".ItemIconRenderer .ItemCardSmall"), l.ItemCardBinder, {
                        info: {
                            type: n,
                            code: o
                        },
                        mouseDisabled: !0
                    }), t.gotoAndStop(r[i], e.type), r[i].on(s.MouseEventEx.MOUSE_OVER, function(i) {
                        return t.overRewardItem(i, e)
                    }), r[i].on(s.MouseEventEx.MOUSE_OUT, function() {
                        return t.outRewardItem()
                    }), t.translate(r[i].$(".id-rewardItemContainer .id-itemTitle"), e.title), t.translate(r[i].$(".id-rewardMedalContainer .id-tierName"), e.tiername), t.translate(r[i].$(".id-rewardMedalContainer .id-itemTitle"), e.title)
                })
            }, t.prototype.setSeasonHighRankRewardItems = function(e) {
                var t = this,
                    i = this.face.$(".id-seasonHighRankItemContainer").$$(".RewardItem"),
                    n = [i.slice(0, 1), i.slice(1, 3)],
                    r = n[e.package.rewards.length - 1] || [];
                e.package.rewards.forEach(function(e, i) {
                    var n = e.type || "ITEM",
                        o = e.code || 0;
                    t.addChildBinder(r[i].$(".ItemCardSmall"), l.ItemCardBinder, {
                        info: {
                            type: n,
                            code: o
                        },
                        mouseDisabled: !0
                    }), r[i].on(s.MouseEventEx.MOUSE_OVER, function(i) {
                        return t.overHighRankReward(i, e)
                    }), r[i].on(s.MouseEventEx.MOUSE_OUT, function() {
                        return t.outRewardItem()
                    })
                })
            }, t.prototype.play = function(e, t, i, n, o) {
                var a = this.getProps().prevSeasonInfo,
                    s = a.prevPlayer,
                    c = a.rewardMap,
                    d = c.topRank;
                this.isTopRankReward = !_.isUndefined(d) && d.isRewarded;
                var l, u, p;
                d.rank > 0 ? l = d.rank : (u = 0, p = -100);
                var h = c.bestTier,
                    f = c.highPrize,
                    v = s.records,
                    m = !_.isUndefined(h) && h.isRewarded,
                    g = !_.isUndefined(f) && f.isRewarded,
                    y = v.bestFp,
                    S = this.ranked2Service.getTierByFp(y).code;
                this.isMedalReward = this.ranked2Service.isMedalReward(S);
                var E = "RANKEDMATCH_TIERNAME_" + S.toString(),
                    T = 0;
                this.isMedalReward && (T += 1), m && (T += 1), g && (T += 1);
                var C = T ? "item" + T.toString() : "none";
                this.template(".id-seasonStartTitle .id-textField", "RANKEDMATCH_SEASONTITLE", {
                    year: e(),
                    value: t.seasonnum
                }), this.gotoAndPlay(".id-seasonClassContainer", i(S)), this.seasonOverallContainer.setProps({
                    tier: S,
                    fpWithinTier: this.ranked2Service.getFpWithinTier(v.bestFp)
                }), this.visible(".id-seasonRecordContainer .id-topTierContainer .id-topTierNum .id-textField", S > 1), this.translate(".id-seasonRecordContainer .id-topTierContainer .id-topTierNum .id-textField", "RANKEDMATCH_TIERGRADE_" + this.ranked2Service.getNumberByTier(S)), this.translate(".id-seasonRecordContainer .id-topTierContainer .id-topTierName .id-textField", n(S)), this.bindText(".id-seasonRecordContainer .id-winContainer .id-winNum .id-textField", v.info.win), this.bindText(".id-seasonRecordContainer .id-prizeContainer .id-prizeNum .id-textField", v.info.high), this.bindText(".id-seasonRecordContainer .id-playContainer .id-PlayNum .id-textField", v.info.attend - v.info.retire), this.translate(".id-descriptionTextfield .comp-TextField", this.rewardGuideStrCode), this.gotoAndStop(".id-seasonRewardItemContainer", C), this.translate(".id-seasonMedalAcquisitionContainer .id-tierName .comp-TextField", E), this.seasonAcquisitionMedals.forEach(function(e) {
                    return e.setProps({
                        tierCode: S
                    })
                }), m && this.rewardItems.push({
                    type: "item",
                    rewardType: "bestTier",
                    item: c.bestTier.package.rewards[0],
                    title: "RANKEDMATCH_PREVIOUSSEASON_REWARD_BESTTIER"
                }), g && this.rewardItems.push({
                    type: "item",
                    rewardType: "highPrize",
                    item: c.highPrize.package.rewards[0],
                    title: "RANKEDMATCH_PREVIOUSSEASON_REWARD_MEDALCONTENTION"
                }), this.isMedalReward && this.rewardItems.push({
                    type: "medal",
                    tier: S,
                    tiername: E,
                    title: "RANKEDMATCH_PREVIOUSSEASON_REWARD_TIERMEDAL"
                }), this.setSeasonRewardItems(S), this.visible(".id-seasonhighRank", this.isTopRankReward), this.isTopRankReward && (this.translate(".id-seasonhighRank .id-titleName .id-textField", "RANKEDMATCH_PREVIOUSSEASON_REWARD_MYRANK"), this.translate(".id-seasonhighRank .id-seasonHighRankItemContainer .id-itemTitle .id-textField", "RANKEDMATCH_PREVIOUSSEASON_REWARD_TOPRANK"), this.getFace(".id-seasonhighRank").setCustomStyle({
                    opacity: u,
                    "z-index": p
                }), this.gotoAndStop(".id-seasonHighRankItemContainer", "item" + d.package.rewards.length), this.bindText(".id-seasonhighRank .RankNum .id-textField", l), this.setSeasonHighRankRewardItems(d)), o === r.SeasonEvent.PreSeasonExistingStart && this.gotoAndPlay(this.face, "seasonIntro_existing")
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("ranked2Service")], p.prototype, "ranked2Service", void 0), n.__decorate([a.autowired("tooltipService")], p.prototype, "tooltipService", void 0), t.PreSeasonExistingBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(1467), i(1472), i(1476)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1468);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/shop", 9).container({
            stages: {
                "shop-main": r.ShopMainBinder
            },
            resolve: {
                shop: ["shopService", function(e) {
                    return e.fetch()
                }]
            }
        });
        e.state("root.menu.Shop", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(1469),
        s = i(1471),
        c = i(642),
        d = i(2),
        l = i(13),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.preventMouseEvent(!0), this.on(this.face, "stop", function() {
                    return e.preventMouseEvent(!1)
                }), this.bannerContainerBinder = this.addChildBinder(".id-bannerContainer", a.BannerContainerBinder), this.topProductListBinder = this.addChildBinder(".id-topProductList", s.TopProductListBinder), this.chargeCashBinder = this.addChildBinder(".id-myCashContainer", c.ChargeCashBinder);
                var t = this.getFace(".id-refresh");
                t.on(d.MouseEventEx.MOUSE_OVER, function() {
                    var t = e.$filter("translate")("SHOP_CASHCHARGE_TOOLTIP_REFRESHBUTTON");
                    e.tooltipService.show(event, "bottomleft", l.TooltipType.Basic, t, {
                        marginTop: 3,
                        width: 100
                    })
                }), t.on(d.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                }), t.on(d.MouseEventEx.CLICK, function() {
                    e.tooltipService.hide(), t.enabled = !1, r.delay(1e3).then(function() {
                        return e.shopService.fetchCash()
                    }).then(function() {
                        return t.enabled = !0
                    })
                })
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    shopState: e.shop,
                    playerState: e.player
                }
            }, t.prototype.update = function(e) {
                this.chargeCashBinder.setProps({
                    cash: e.shopState.cash,
                    mileage: e.playerState.mileage
                })
            }, t.prototype.preventMouseEvent = function(e) {
                this.classNames(this.face, e ? "prevent-click" : "")
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("shopService")], u.prototype, "shopService", void 0), n.__decorate([o.autowired("tooltipService")], u.prototype, "tooltipService", void 0), n.__decorate([o.autowired("$filter")], u.prototype, "$filter", void 0), t.ShopMainBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(28),
        a = i(2),
        s = i(1470),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.apply(this.face, o.param, {
                    hasSize: !0,
                    layoutPosition: "relative",
                    layoutFloat: "top",
                    enabled: !0,
                    heightOffset: 2
                }), this.setProps(this.props)
            }, t.prototype.update = function(e) {
                this.face.selected = e.selected
            }, t
        }(r.Binder);
    t.Indicator = c;
    var d = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.bannerCurrListBinder = [], t.bannerNextListBinder = [], t.isMoving = !1, t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var t = this;
            e.prototype.onFaceReady.call(this), this.activeBannerBinder = this.addChildBinder(".id-activeBanner", s.ActiveBannerBinder), this.bannerList = this.getFace(".id-bannerList"), this.bannerList.hasSize = !0, this.addManagedListener(this.bannerList, "reset", function(e) {
                t.gotoAndPlay(t.bannerList, "default"), t.bindActiveBanner(), t.bindBannerIndicator(), t.bindTargetBanners(!1, !0), t.isMoving = !1
            }), _.times(3, function(e) {
                var i = t.getFace(".id-current" + e),
                    n = t.addChildBinder(i, s.BannerBinder);
                t.bannerCurrListBinder.push(n), t.addManagedListener(i, a.MouseEventEx.CLICK, t.onClickList.bind(t, e))
            }), _.times(5, function(e) {
                var i = t.getFace(".id-next" + e),
                    n = t.addChildBinder(i, s.BannerBinder);
                t.bannerNextListBinder.push(n)
            }), this.bannerIndicatorContainer = this.getFace(".id-bannerIndicatorContainer"), this.bannerIndicatorContainer.hasSize = !0;
            var i = this.bannerIndicatorContainer.$(".id-indicatorContainer");
            this.apply(i, o.param, {
                hasSize: !0,
                layoutPosition: "relative"
            }), this.bannerIndicators = this.addChildBinder(this.bannerIndicatorContainer.$(".id-indicator"), r.CollectionBinder, {
                instanceBinder: c
            }), this.addManagedListener(this.face, a.MouseEventEx.MOUSE_OVER, function(e) {
                t.stopAutoRotate()
            }), this.addManagedListener(this.face, a.MouseEventEx.MOUSE_OUT, function(e) {
                t.startAutoRotate()
            })
        }, t.prototype.mapStateToProps = function(e) {
            return {
                banners: e.shop.banners || []
            }
        }, t.prototype.update = function(e) {
            this.initBannerList(e.banners), this.bindActiveBanner(), this.bindTargetBanners(!0, !0), this.initBannerIndicator(), this.bindBannerIndicator(), this.startAutoRotate()
        }, t.prototype.onDetach = function() {
            this.stopAutoRotate()
        }, t.prototype.initBannerIndicator = function() {
            var e = _.filter(this.banners, function(e) {
                    return !_.isEmpty(e)
                }),
                t = _.map(e, function(e, t) {
                    return {
                        index: t,
                        selected: !1
                    }
                });
            this.bannerIndicators.applyCollection(t);
            var i = this.bannerIndicatorContainer.$(".id-indicatorContainer"),
                n = this.bannerIndicators.binders.reduce(function(e, t) {
                    return e + t.face.height
                }, 0);
            i.height = n, i.y = .5 * (this.bannerIndicatorContainer.height - n)
        }, t.prototype.bindBannerIndicator = function() {
            var e = this;
            this.bannerIndicators.binders.forEach(function(t) {
                var i = t.getProps();
                t.setProps({
                    index: i.index,
                    selected: i.index === e.bannerViewIndices[0]
                })
            })
        }, t.prototype.onClickList = function(e) {
            if (!this.isMoving) {
                var t;
                2 === e ? t = "next" : 0 === e && (t = "previous"), this.moveBanner(t)
            }
        }, t.prototype.moveBanner = function(e) {
            this.isMoving = !0, this.gotoAndPlay(this.bannerList, e), "next" === e ? this.bannerViewIndices.push(this.bannerViewIndices.shift()) : this.bannerViewIndices.unshift(this.bannerViewIndices.pop()), this.bindTargetBanners(!0, !1)
        }, t.prototype.initBannerList = function(e) {
            this.banners = (e || []).sort(function(e, t) {
                return e.order - t.order
            });
            for (var t = this.banners.length; t < 3; ++t) this.banners.push({});
            this.bannerViewIndices = _.map(this.banners, function(e, t) {
                return t
            })
        }, t.prototype.bindActiveBanner = function() {
            if (this.activeBannerBinder) {
                var e = this.getViewBanner(0);
                this.activeBannerBinder.setProps({
                    banner: e,
                    mouseEnabled: !0
                }), this.gotoAndPlay(".id-activeBanner > .id-banner", "in")
            }
        }, t.prototype.getViewBanner = function(e) {
            return this.banners[this.bannerViewIndices[e]]
        }, t.prototype.bindBannerList = function(e, t, i) {
            var n = this;
            e.forEach(function(e, r) {
                var o = n.getViewBanner(t[r]);
                e.setProps({
                    banner: o,
                    mouseEnabled: i
                })
            })
        }, t.prototype.bindTargetBanners = function(e, t) {
            e && this.bindBannerList(this.bannerCurrListBinder, this.getCurrBindBannerViewIndices(), !0), t && this.bindBannerList(this.bannerNextListBinder, this.getNextBindBannerViewIndices(), !1)
        }, t.prototype.getCurrBindBannerViewIndices = function() {
            return [this.banners.length - 1, 0, 1]
        }, t.prototype.getNextBindBannerViewIndices = function() {
            return [this.banners.length - 2, this.banners.length - 1, 0, 1, 2]
        }, t.prototype.startAutoRotate = function() {
            var e = this;
            this.stopAutoRotate(), _.filter(this.banners, function(e) {
                return !_.isEmpty(e)
            }).length <= 1 || (this.timerRotate = setInterval(function() {
                if (!e.isMoving) {
                    var t = e.getViewBanner(1),
                        i = _.isEmpty(t) ? "previous" : "next";
                    e.moveBanner(i)
                }
            }, 3e3))
        }, t.prototype.stopAutoRotate = function() {
            _.isUndefined(this.timerRotate) || clearInterval(this.timerRotate)
        }, t
    }(r.Binder);
    t.BannerContainerBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(60),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.button = this.face
            }, t.prototype.update = function(e) {
                var t = e.banner,
                    i = e.mouseEnabled;
                if (_.isEmpty(t)) return this.button.enabled = !1, void(this.getFace(".id-bannerImage").visible = !1);
                this.button.enabled = !0, this.button.mouseEnabled = this.button.mouseEventEnabled = i || !1, this.getFace(".id-bannerImage").visible = !0, this.drawExternalImage(".id-bannerImage", this.$filter("cdn_shop_banner")(t.code))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), t.BannerBinder = s;
    var c = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            e.prototype.onFaceReady.call(this), this.addManagedListener(this.face, o.MouseEventEx.CLICK, this.onClick.bind(this))
        }, t.prototype.onClick = function(e) {
            var t = this,
                i = this.getProps().banner;
            if (!_.isEmpty(i))
                if ("CATEGORY" === i.type) a.ProductCategories.forEach(function(e) {
                    var n = new RegExp(e.name, "gi"); - 1 !== String(i.link).search(n) && t.stateService.go("root.menu.Shop" + e.name)
                });
                else if ("PURCHASE" === i.type) {
                var n = this.shopService.getProduct(i.product);
                if (!n) return;
                if (!this.shopService.isOnSaleProduct(n)) return void this.popupService.draw("ConfirmPopup", {
                    title: "SHOP_POPUP_PURCHASEFAIL_TITLE",
                    description: "SHOP_POPUP_PURCHASEFAIL_DESC"
                });
                this.stateService.go("root.menu.Shop.Purchase", {
                    productCode: i.product
                })
            }
        }, t
    }(s);
    n.__decorate([r.autowired("stateService")], c.prototype, "stateService", void 0), n.__decorate([r.autowired("shopService")], c.prototype, "shopService", void 0), n.__decorate([r.autowired("popupService")], c.prototype, "popupService", void 0), t.ActiveBannerBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(60),
        s = i(641),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.currListBinder = [], t.nextListBinder = [], t.pageIndex = 0, t.pageSize = 0, t.isPaging = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-topProductLabel", "SHOP_MAIN_BEST"), _.times(6, function(t) {
                    var i = e.getFace(".id-current" + (t + 1)),
                        n = e.getFace(".id-next" + (t + 1));
                    e.currListBinder.push(e.addChildBinder(i, s.ProductListItemBinder)), e.nextListBinder.push(e.addChildBinder(n, s.ProductListItemBinder, {
                        disableMouseEvent: !0
                    }))
                }), this.pagingContainer = this.getFace(".id-cardList"), this.pagingContainer.hasSize = !0, this.prevButton = this.getFace(".id-previousButton"), this.nextButton = this.getFace(".id-nextButton"), this.firstButton = this.getFace(".id-firstButton"), this.lastButton = this.getFace(".id-lastButton"), this.indicatorContainer = this.getFace(".id-pageNumberContainer"), this.currentIndicator = this.getFace(".id-currentPage"), this.setUpPagingArrowBtn(), this.setUpPagingNumBtn(), this.wheelHandler = _.throttle(function(t) {
                    if (!e.isPaging) {
                        var i = Math.max(-1, Math.min(1, t.wheelDelta || -t.detail));
                        1 === i && 0 !== e.pageIndex ? e.movePage(e.pageIndex - 1, "previous") : -1 === i && e.pageIndex !== e.chunkedProducts.length - 1 && e.movePage(e.pageIndex + 1, "next")
                    }
                }, 600, {
                    trailing: !1
                }), this.pagingContainer.htmlElement.addEventListener("mousewheel", this.wheelHandler, {
                    passive: !0
                })
            }, t.prototype.setUpPagingArrowBtn = function() {
                var e = this;
                this.addManagedListener(this.prevButton, o.MouseEventEx.CLICK, function() {
                    t(e.pageIndex - 1, "previous")
                }), this.addManagedListener(this.nextButton, o.MouseEventEx.CLICK, function() {
                    t(e.pageIndex + 1, "next")
                }), this.addManagedListener(this.lastButton, o.MouseEventEx.CLICK, function() {
                    t(e.chunkedProducts.length - 1, "last")
                }), this.addManagedListener(this.firstButton, o.MouseEventEx.CLICK, function() {
                    t(0, "first")
                });
                var t = function(t, i) {
                    e.movePage(t, i)
                };
                this.addManagedListener(this.pagingContainer, "reset", function(t) {
                    e.gotoAndPlay(e.pagingContainer, "default"), e.isPaging = !1, e.preventMouseEvent(!1), setTimeout(function() {
                        e.currListBinder.some(function(e, t) {
                            return "over" === e.face.currentLabel && !e.face.emit(o.MouseEventEx.MOUSE_OVER)
                        })
                    })
                })
            }, t.prototype.setUpPagingNumBtn = function() {
                var e = this,
                    t = function(t, i) {
                        e.movePage(t, i)
                    };
                [{
                    num: 2,
                    action: "first"
                }, {
                    num: 3,
                    action: "previous"
                }, {
                    num: 5,
                    action: "next"
                }, {
                    num: 6,
                    action: "last"
                }].forEach(function(i) {
                    var n = i.num - 4,
                        r = e.getFace(".id-curr" + i.num);
                    e.addManagedListener(r, o.MouseEventEx.CLICK, function() {
                        t(e.pageIndex + n, i.action)
                    })
                }), this.addManagedListener(this.indicatorContainer, "reset", function(t) {
                    e.setPageIndicatorsNumber("default"), e.disposePageButton(), e.gotoAndPlay(e.indicatorContainer, "default")
                })
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    topProducts: e.shop.topProducts || []
                }
            }, t.prototype.update = function(e) {
                this.initItemList(e.topProducts)
            }, t.prototype.initItemList = function(e) {
                this.products = e || [], this.products.sort(function(e, t) {
                    return e.rank - t.rank
                }), this.chunkedProducts = _.chunk(this.products, 6), this.pageSize = Math.max(1, this.chunkedProducts.length), this.pageIndex = this.pageIndex > this.pageSize - 1 ? this.pageSize - 1 : this.pageIndex, this.isPaging = !1, this.bindList(this.currListBinder, this.pageIndex), this.setPageIndicatorsNumber("default"), this.disposePageButton()
            }, t.prototype.bindProductInfo = function(e, t, i) {
                var r = e.face;
                t ? (r.enabled = !0, e.setProps(n.__assign({}, t, {
                    index: i,
                    filterOpt: a.ProductFilters[0]
                }))) : (r.enabled = !1, e.setProps({}))
            }, t.prototype.bindList = function(e, t) {
                var i = this,
                    n = this.chunkedProducts[t] || [];
                e.forEach(function(e, t) {
                    i.bindProductInfo(e, n[t], t)
                })
            }, t.prototype.movePage = function(e, t) {
                var i = this;
                if (!this.isPaging && !(e < 0 || this.pageSize <= e || this.pageIndex === e)) {
                    this.preventMouseEvent(!0), this.tooltipService.hide(), this.isPaging = !0, this.pageIndex = e, this.prevButton.enabled = this.nextButton.enabled = this.lastButton.enabled = this.firstButton.enabled = !1, this.bindList(this.nextListBinder, this.pageIndex);
                    var n = t;
                    "first" === t && (n = "previous"), "last" === t && (n = "next"), this.gotoAndPlay(this.pagingContainer, n), this.gotoAndPlay(this.indicatorContainer, t), this.setPageIndicatorsNumber(t), setTimeout(function() {
                        i.bindList(i.currListBinder, i.pageIndex)
                    }, 100)
                }
            }, t.prototype.setPageNumber = function(e, t, i) {
                var n = 0 <= t && t < this.pageSize,
                    r = this.indicatorContainer.$(".id-" + i + e);
                r && (r.enabled = n, this.bindText(r.$(".id-buttonName"), n ? t + 1 : ""))
            }, t.prototype.setPageNumbers = function(e, t) {
                this.setPageNumber(4, e, t);
                for (var i = 1; i < 4; i++) this.setPageNumber(4 - i, e - i, t), this.setPageNumber(4 + i, e + i, t)
            }, t.prototype.setPageIndicatorsNumber = function(e) {
                switch (this.setPageNumbers(this.pageIndex, "curr"), e) {
                    case "default":
                        this.bindText(this.currentIndicator.$(".id-current"), this.pageIndex + 1), this.setPageNumbers(this.pageIndex, "num");
                        break;
                    case "first":
                    case "last":
                        this.setPageNumbers("first" === e ? this.pageIndex + 1 : this.pageIndex - 1, "num")
                }
            }, t.prototype.disposePageButton = function() {
                this.prevButton.enabled = this.firstButton.enabled = 0 < this.pageIndex, this.nextButton.enabled = this.lastButton.enabled = this.pageIndex < this.pageSize - 1
            }, t.prototype.preventMouseEvent = function(e) {
                this.classNames(this.face, e ? "prevent-click" : "")
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$util")], c.prototype, "$util", void 0), n.__decorate([r.autowired("$window")], c.prototype, "$window", void 0), n.__decorate([r.autowired("stateService")], c.prototype, "stateService", void 0), n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), n.__decorate([r.autowired("serverTimeService")], c.prototype, "serverTimeService", void 0), t.TopProductListBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1473),
        o = i(60);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = function(e, t) {
            return new n.StateDefinition("/shop/product/list/" + e, t).container({
                stages: {
                    "shop-category": r.ShopCategoryBinder
                },
                resolve: {
                    products: ["shopService", function(t) {
                        return t.fetchCategoryProducts("shop_" + e)
                    }],
                    cash: ["shopService", function(e) {
                        return e.fetchCash()
                    }]
                }
            })
        };
        o.ProductCategories.map(function(i) {
            e.state("root.menu.Shop" + i.name, t(i.name.toLowerCase(), i.state))
        })
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(1474),
        s = i(1475),
        c = i(642),
        d = i(2),
        l = i(13),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.preventMouseEvent(!0), this.on(this.face, "stop", function() {
                    return e.preventMouseEvent(!1)
                }), this.getFace(".id-itemTileList").hasSize = !0, this.productListBinder = this.addChildBinder(this.face, a.ProductListBinder), this.productFilterBinder = this.addChildBinder(this.face, s.ShopCategoryFilterBinder), this.chargeCashBinder = this.addChildBinder(".id-myCashContainer", c.ChargeCashBinder);
                var t = this.getFace(".id-refresh");
                t.on(d.MouseEventEx.MOUSE_OVER, function() {
                    var t = e.$filter("translate")("SHOP_CASHCHARGE_TOOLTIP_REFRESHBUTTON");
                    e.tooltipService.show(event, "bottomleft", l.TooltipType.Basic, t, {
                        marginTop: 3,
                        width: 100
                    })
                }), t.on(d.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                }), t.on(d.MouseEventEx.CLICK, function() {
                    e.tooltipService.hide(), t.enabled = !1, r.delay(1e3).then(function() {
                        return e.shopService.fetchCash()
                    }).then(function() {
                        return t.enabled = !0
                    })
                })
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    shopState: e.shop,
                    playerState: e.player
                }
            }, t.prototype.shouldUpdate = function(e) {
                var t = e.shopState;
                return !_.isEmpty(t)
            }, t.prototype.update = function(e) {
                var t = e.shopState,
                    i = e.playerState,
                    n = this.reduxProps,
                    r = n.shopState,
                    o = n.playerState;
                r && r.productCollection === t.productCollection || this.productListBinder.setProps(t), r && o && r.cash === t.cash && i.mileage === o.mileage || this.chargeCashBinder.setProps({
                    cash: t.cash,
                    mileage: i.mileage
                })
            }, t.prototype.preventMouseEvent = function(e) {
                this.classNames(this.face, e ? "prevent-click" : "")
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$window")], u.prototype, "$window", void 0), n.__decorate([o.autowired("shopService")], u.prototype, "shopService", void 0), n.__decorate([o.autowired("tooltipService")], u.prototype, "tooltipService", void 0), n.__decorate([o.autowired("$filter")], u.prototype, "$filter", void 0), t.ShopCategoryBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(60),
        a = i(2),
        s = i(641),
        c = i(166),
        d = i(67),
        l = ["root.menu.ShopCategory1", "root.menu.ShopCategory2", "root.menu.ShopCategory3", "root.menu.ShopCategory4"],
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.filterOpt = o.ProductFilters[0], t.sortOpt = o.ProductSorters[0], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                _.times(12, function(e) {
                    var i = t.getFace(".id-current .id-itemCard" + (e + 1)),
                        n = t.getFace(".id-next .id-itemCard" + (e + 1));
                    t.currListBinder.push(t.addChildBinder(i, s.ProductListItemBinder)), t.nextListBinder.push(t.addChildBinder(n, s.ProductListItemBinder, {
                        disableMouseEvent: !0
                    }))
                }), this.pagingContainer = this.getFace(".id-itemTileList"), this.pagingContainer.hasSize = !0, e.prototype.onFaceReady.call(this), this.addManagedListener(this.pagingContainer, "reset", function(e) {
                    t.gotoAndPlay(t.pagingContainer, "default"), t.isPaging = !1, t.preventMouseEvent(!1), setTimeout(function() {
                        t.currListBinder.some(function(e, t) {
                            return "over" === e.face.currentLabel && !e.face.emit(a.MouseEventEx.MOUSE_OVER)
                        })
                    })
                }), this.addManagedListener(this.face, o.EventSortChanged, function(e) {
                    t.sortProducts(e.selectedItem), t.initItemList(), t.resetScrollBar()
                }), this.addManagedListener(this.face, o.EventFilterChanged, function(e) {
                    t.filterProducts(e.selectedItem), t.sortProducts(t.sortOpt), t.initItemList(), t.resetScrollBar()
                }), this.bindList = function(e, i) {
                    var n = t.chunkedProducts[i] || [];
                    e.forEach(function(e, i) {
                        t.bindProductInfo(e, n[i], i)
                    })
                }, this.movePageCallback1 = function() {
                    t.preventMouseEvent(!0), t.tooltipService.hide()
                }
            }, t.prototype.shouldUpdate = function(e) {
                return !_.isEmpty(e)
            }, t.prototype.update = function(e) {
                this.productCollection = e.productCollection, this.updateProducts()
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this), this.updateProducts()
            }, t.prototype.updateProducts = function() {
                var e = this.stateService.getCurrentName();
                if (-1 !== l.indexOf(e)) {
                    var t = "shop_category" + e.charAt(e.length - 1);
                    this.filterValidProducts(this.productCollection[t] || []), this.filterProducts(o.ProductFilters[0]), this.sortProducts(o.ProductSorters[0]), this.initItemList(), this.resetScrollBar()
                }
            }, t.prototype.filterValidProducts = function(e) {
                var t = this;
                this.saleables = e.filter(function(e) {
                    return t.shopService.isOnSaleProduct(e) && "SHOP" === e.sellingShop
                })
            }, t.prototype.filterProducts = function(e) {
                this.filterOpt = e, "ALL" === e.type ? this.products = this.saleables.slice() : "SP" === e.type || "MILEAGE" === e.type ? this.products = this.saleables.filter(function(t) {
                    return -1 !== _.findIndex(t.bunches, {
                        currency: e.type
                    })
                }) : "CASH" === e.type && (this.products = this.saleables.filter(function(e) {
                    return -1 !== _.findIndex(e.bunches, function(e) {
                        return -1 !== e.currency.indexOf("CASH")
                    })
                }))
            }, t.prototype.getCurrencyPoint = function(e, t) {
                return "ALL" === this.filterOpt.type ? "SP" === e.bunches[0].currency ? 3 * t : "MILEAGE" === e.bunches[0].currency ? 2 * t : 1 * t : 1
            }, t.prototype.getCurrentPrice = function(e) {
                var t = 0;
                return "SP" === this.filterOpt.type || "MILEAGE" === this.filterOpt.type ? t = _.findIndex(e.bunches, {
                    currency: this.filterOpt.type
                }) : "CASH" === this.filterOpt.type && (t = _.findIndex(e.bunches, function(e) {
                    return -1 !== e.currency.indexOf("CASH")
                })), t < 0 && (t = 0), e.bunches[t].price
            }, t.prototype.sortProducts = function(e) {
                var t = this;
                this.sortOpt = e, "order" === e.field ? this.products.sort(d(e.field, e.reverse).thenBy("name", e.reverse).thenBy(function(i, n) {
                    return t.getCurrencyPoint(i, e.reverse) - t.getCurrencyPoint(n, e.reverse)
                }, e.reverse).thenBy(function(e, i) {
                    return t.getCurrentPrice(e) - t.getCurrentPrice(i)
                }, e.reverse)) : "name" === e.field ? this.products.sort(d(e.field, e.reverse).thenBy("order", e.reverse).thenBy(function(i, n) {
                    return t.getCurrencyPoint(i, e.reverse) - t.getCurrencyPoint(n, e.reverse)
                }, e.reverse).thenBy(function(e, i) {
                    return t.getCurrentPrice(e) - t.getCurrentPrice(i)
                }, e.reverse)) : "price" === e.field && this.products.sort(d(function(i, n) {
                    return t.getCurrencyPoint(i, e.reverse) - t.getCurrencyPoint(n, e.reverse)
                }, e.reverse).thenBy(function(e, i) {
                    return t.getCurrentPrice(e) - t.getCurrentPrice(i)
                }, e.reverse).thenBy("order", e.reverse).thenBy("name", e.reverse))
            }, t.prototype.initItemList = function() {
                this.chunkedProducts = _.chunk(this.products, 12), this.pageSize = Math.max(1, this.chunkedProducts.length), this.pageIndex = 0, this.isPaging = !1, this.bindList(this.currListBinder, this.pageIndex)
            }, t.prototype.bindProductInfo = function(e, t, i) {
                var r = e.face;
                t ? (r.enabled = r.visible = !0, e.setProps(n.__assign({}, t, {
                    index: i,
                    filterOpt: this.filterOpt
                }))) : (r.enabled = r.visible = !1, e.setProps({}))
            }, t
        }(c.ScrollBarPageBinder);
    n.__decorate([r.autowired("stateService")], u.prototype, "stateService", void 0), n.__decorate([r.autowired("shopService")], u.prototype, "shopService", void 0), n.__decorate([r.autowired("tooltipService")], u.prototype, "tooltipService", void 0), t.ProductListBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(8),
        a = i(60),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = a.ProductFilters.filter(function(t) {
                        return "MILEAGE" !== t.type || e.featureSetService.isEnabled("MILEAGE")
                    });
                this.initDropdown(".id-filterDropdown", t, a.EventFilterChanged), this.initDropdown(".id-sortDropdown", a.ProductSorters, a.EventSortChanged)
            }, t.prototype.initDropdown = function(e, t, i) {
                var n = this,
                    r = this.$filter("translate"),
                    a = this.convertFace(e);
                a.items = t.map(function(e) {
                    var t = _.assign({}, e);
                    return t.text = r(t.text), t
                }), a.on(o.EventEx.CHANGE, function() {
                    n.face.dispatchEvent(i, {
                        selectedItem: a.selectedItem
                    })
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([r.autowired("featureSetService")], s.prototype, "featureSetService", void 0), t.ShopCategoryFilterBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(60),
        o = i(321),
        a = i(1478);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = function() {
            return new n.StateDefinition("/purchase/{productCode}", 12, {
                productCode: ""
            }).dialog({
                stages: {
                    "shop-popup": o.ProductPurchaseBinder
                }
            })
        };
        e.state("root.menu.Shop.Purchase", t()), r.ProductCategories.map(function(i) {
            return e.state("root.menu.Shop" + i.name + ".Purchase", t())
        })
    }]).config(["stateServiceProvider", function(e) {
        var t = function() {
            return new n.StateDefinition("/present/{productCode}", 13, {
                productCode: "",
                product: "",
                bunch: "",
                possession: ""
            }).dialog({
                stages: {
                    "shop-popup": a.ProductPresentBinder
                }
            })
        };
        e.state("root.menu.Shop.Present", t()), r.ProductCategories.map(function(i) {
            return e.state("root.menu.Shop" + i.name + ".Present", t())
        })
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(1),
        a = i(27),
        s = i(13),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.itemCards = this.addChildBinder(this.getFace(".ItemCardSmall"), o.CollectionBinder, {
                    instanceBinder: a.ItemCardBinder,
                    keyProperty: "index"
                }), this.face.hasSize = !0, $(this.face.htmlElement).perfectScrollbar({
                    suppressScrollX: !0
                }), this.onOverList = this.updateScroll.bind(this), this.face.once(r.MouseEventEx.MOUSE_OVER, this.onOverList)
            }, t.prototype.updateScroll = function() {
                var e = this;
                setTimeout(function() {
                    $(e.face.htmlElement).perfectScrollbar("update")
                })
            }, t.prototype.update = function(e) {
                var t = this;
                e && 0 !== e.rewards.length && (this.itemCards.applyCollection(e.rewards.map(function(e, i) {
                    return {
                        index: i,
                        info: {
                            code: e.code,
                            type: e.type,
                            count: e.count
                        },
                        onMouseOver: function(i) {
                            t.tooltipService.show(i, "right", s.TooltipType.ItemCard, {
                                code: e.code,
                                type: e.type,
                                count: e.count,
                                desc: t.$filter("translate")(e.type + "_" + e.code + "_DESC")
                            }, {
                                marginTop: 0,
                                marginLeft: 3,
                                screen: s.TooltipScreen.Shop
                            })
                        },
                        onMouseOut: function() {
                            return t.tooltipService.hide()
                        },
                        actionButtonEnabled: !1
                    }
                })), this.updateScroll())
            }, t.prototype.onDetach = function() {
                e.prototype.onDetach.call(this), this.face.removeEventListener(r.MouseEventEx.MOUSE_OVER, this.onOverList), $(this.face.htmlElement).perfectScrollbar("destroy")
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([o.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.ProductComponentBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1479),
        a = i(644),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translateAll(".id-popupName", "SHOP_POPUP_GIFT_TITLE"), this.translateAll(".id-itemPriceLabel", "SHOP_POPUP_GIFT_PRICE"), this.translateAll(".id-subTitleLabel", "SHOP_POPUP_GIFT_BUNCH")
            }, t.prototype.onAddedToScene = function() {
                this.setDatas(), this.setUiContainers(), this.setBunchInfo(), this.setProductComponent(), this.setCashContainer(), this.setItemCard(), this.setPriceInfoByBunch(), this.setProductDetailInfo(), e.prototype.onAddedToScene.call(this)
            }, t.prototype.setDatas = function() {
                var e = this;
                this.product = this.$stateParams.product, this.currentBunch = this.$stateParams.bunch, this.currentCurrency = this.currentBunch.currency, this.isBundle = this.product.rewards && this.product.rewards.length > 1, this.targetBunches = _.filter(this.product.bunches, function(t) {
                    return t.currency === e.currentCurrency
                })
            }, t.prototype.setUiContainers = function() {
                this.isBundle ? this.targetContainer = this.getFace(".GiftShopBundleItemPopup") : this.targetContainer = this.getFace(".GiftShopSingleItemPopup"), this.targetContainer.visible = !0, this.nextBinder = this.addChildBinder(this.targetContainer, o.PresentNextBinder, {
                    exit: this.exit.bind(this)
                }), this.gotoAndStop(".id-selectiveBuyContainer", "default")
            }, t.prototype.setBunchInfo = function() {
                var e = "<span>" + r.default.toMoney(this.currentBunch.price) + " / " + this.currentBunch.count + "</span>";
                this.bindHtml(this.targetContainer.$(".id-decidePriceLabel .id-numberLabel"), e + this.$filter("translate")("SHOP_POPUP_GIFT_AMOUNT")), this.gotoAndStop(this.targetContainer.$("> .id-monetaryUnitIcon"), r.default.getPriceIconLabel(this.currentCurrency))
            }, t
        }(a.ProductPurchaseCommBinder);
    t.ProductPresentBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(2),
        o = i(1),
        a = i(60),
        s = i(1480),
        c = i(3),
        d = i(643),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.asterisk = "*********************", t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                e.prototype.onFaceReady.call(this);
                var i = this.getFace(".id-cancelButton"),
                    n = this.getFace(".id-giftButton");
                this.translate(n, "SHOP_POPUP_GIFT_GIFT"), this.translate(i, "SHOP_POPUP_GIFT_CANCEL"), this.enableButton(n, !1), this.addManagedListener(n, r.MouseEventEx.CLICK, function() {
                    t.present()
                }), this.addManagedListener(i, r.MouseEventEx.CLICK, function() {
                    t.enableButton(i, !1), t.exit()
                }), this.initFriendList()
            }, t.prototype.present = function() {
                var e = this,
                    t = this.shopService.getMyMoney(this.currentCurrency) - this.currentBunch.price;
                if (t < 0) return this.openInSufficientPopup(t);
                var i = c.store.getState().player.name;
                this.stateService.go("^"), this.popupService.draw("GiftShopItemConfirmPopup", {
                    receiver: this.receiver.name,
                    product: this.product,
                    bunches: this.targetBunches,
                    bunch: this.currentBunch,
                    possession: this.shopService.getMyMoney(this.currentCurrency),
                    confirm: function() {
                        e.popupService.chaining = !0;
                        var t = e.$document.find(".GiftShopItemConfirmPopup .id-inputTextArea .id-textField").val();
                        e.shopService.presentProduct(i, e.receiver.pid, e.product.code, e.currentBunch, e.filterBanWord(t)).then(function(t) {
                            return e.shopService.fetchCash()
                        }).then(function() {
                            return e.openPresentCompletePopup()
                        }).catch(e.onErrorPurchase.bind(e))
                    }
                })
            }, t.prototype.filterBanWord = function(e) {
                for (var t = 0, i = this.publisherService.matchBanWords(e); t < i.length; t++) {
                    var n = i[t],
                        r = new RegExp(n, "gi");
                    e = e.replace(r, this.asterisk.substr(0, n.length))
                }
                return e
            }, t.prototype.openPresentCompletePopup = function() {
                var e = this,
                    t = _.minBy(this.targetBunches, function(e) {
                        return e.count
                    });
                this.popupService.draw("ItemIconConfirmPopup", {
                    title: "SHOP_POPUP_GIFTSENT_TITLE",
                    desc: {
                        top: this.$filter("template")({
                            playername: this.receiver.name
                        }, "SHOP_POPUP_GIFTSENT_TEXT1")
                    },
                    itemCardProps: {
                        info: {
                            name: this.product.name,
                            img: this.shopService.getProductImgPath(this.product),
                            type: "SHOP_PRODUCT",
                            price: t.price,
                            currency: t.currency,
                            count: 1,
                            rank: this.product.rank,
                            fallbackImg: this.shopService.getProductFallbackImgPath(this.product)
                        },
                        mouseDisabled: !0
                    },
                    buttons: [{
                        type: "confirm",
                        name: "SHOP_POPUP_GIFTSENT_CONFIRM",
                        onClick: function() {
                            return e.popupService.closePopup()
                        }
                    }]
                })
            }, t.prototype.initFriendList = function() {
                var e = this;
                this.presentFriendlistBinder = this.addChildBinder(".id-friendlyListContainer", s.PresentFriendlistBinder), this.presentFriendlistBinder.setProps({
                    friends: this.contactsService.friends
                }), this.addManagedListener(this.presentFriendlistBinder.face, a.EventSelectedFriend, function(t) {
                    e.getFace(".id-giftButton").enabled = t.selected, e.receiver = t.selected ? t.friend : {}
                })
            }, t
        }(d.PurchaseNextCommBinder);
    n.__decorate([o.autowired("contactsService")], l.prototype, "contactsService", void 0), n.__decorate([o.autowired("$document")], l.prototype, "$document", void 0), t.PresentNextBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(60),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.update(this.props)
            }, t.prototype.update = function(e) {
                this.bindText(".id-checkboxName", e.snippet.name)
            }, t
        }(r.Binder);
    t.FriendItemBinder = s;
    var c = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            e.prototype.onFaceReady.call(this), this.translateAll(".id-emptyInfoLabel", "SHOP_POPUP_GIFT_NOFRIEND"), this.translateAll(".id-friendlyListDescriptionLabel", "SHOP_POPUP_GIFT_ADDFRIEND"), this.translateAll(".id-friendsLabel", "SHOP_POPUP_GIFT_FRIEND"), this.friendlyListContainer = this.getFace(".id-friendlyList"), this.friendlyListContainer.hasSize = !0, this.getFace(".id-friendsLabel").hasSize = !0, this.friendsListBinder = this.addChildBinder(this.getFace(".id-friendsContainer"), r.CollectionBinder, {
                instanceBinder: s
            })
        }, t.prototype.update = function(e) {
            var t = this;
            if (!_.isEmpty(e)) {
                var i = e.friends || [];
                this.bindTextAll(".id-friendlyListTitleLabel", this.$filter("translate")("SHOP_POPUP_GIFT_FRIENDLIST") + " " + i.length), this.gotoAndStop(this.face, 0 < i.length ? "friend" : "empty"), this.friendsListBinder.applyCollection(i);
                var n = function(e, t) {
                    e.$$(t).forEach(function(t) {
                        e.htmlElement.appendChild(t.htmlElement)
                    })
                };
                n(this.friendlyListContainer, ".id-friendsLabel"), n(this.friendlyListContainer, ".id-friendsContainer"), this.checkBoxList = [], this.setFriendListCheckBoxEventListener(this.friendsListBinder.binders), setTimeout(function() {
                    return $(t.friendlyListContainer.htmlElement).perfectScrollbar()
                }, 50)
            }
        }, t.prototype.setFriendListCheckBoxEventListener = function(e) {
            var t = this;
            e.forEach(function(e) {
                var i = e.face.$(".id-friendCheckBox"),
                    n = e.getProps();
                t.addManagedListener(i, o.MouseEventEx.CLICK, function() {
                    t.onClickFriendList(i, n.snippet)
                }), t.checkBoxList.push(i)
            })
        }, t.prototype.onClickFriendList = function(e, t) {
            this.checkBoxList.forEach(function(t) {
                t.selected = t === e && !e.selected
            }), this.face.dispatchEvent(a.EventSelectedFriend, {
                selected: e.selected,
                friend: t
            })
        }, t.prototype.onDetach = function() {
            $(this.friendlyListContainer.htmlElement).perfectScrollbar("destroy"), e.prototype.onDetach.call(this)
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), t.PresentFriendlistBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1482),
        o = i(230);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/web-leaderboard", 45).container({
            stages: {
                "web-leaderboard": {
                    stageBinder: r.WebLeaderboardBinder,
                    customComponents: {
                        IFrameView: o.IFrameView
                    }
                }
            },
            resolve: {
                cookie: ["publisherService", function(e) {
                    return e.initIngameWebViewCookies()
                }]
            }
        });
        e.state("root.menu.WebLeaderboard", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(8),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.loaded = o.default.defer();
                var t = this.convertFace(".id-leaderBoard");
                t.src = this.publisherService.getLeaderboardUri(), t.once(a.EventEx.LOAD, function() {
                    return e.loaded.resolve()
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.loaded.promise.then(function() {
                    return e.stage.gotoAndPlay("intro")
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("publisherService")], s.prototype, "publisherService", void 0), t.WebLeaderboardBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(12),
        o = i(11),
        a = i(1484),
        s = i(91);
    i(1497), angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new o.StateDefinition("/vehicles-tuning-shop?goTo", 46).container({
            controller: "VehicleTuningShop",
            stages: {
                "vehicles-tuning-shop": a.VehicleTuningShopStageBinder
            },
            resolve: {
                vehicles: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                players: ["playerService", function(e) {
                    return e.fetch()
                }],
                tuning: ["tuningShopService", function(e) {
                    return n.all([e.fetchProducts(), e.fetchInventory()])
                }],
                shop: ["shopService", function(e) {
                    return e.fetchCash()
                }]
            }
        });
        e.state("root.menu.VehicleTuningShop", t)
    }]).controller("VehicleTuningShopController", ["externalService", "playerService", function(e, t) {
        t.setRecentVehicleIfNeeded(3), e.camera.tuningShop(16), e.beSelectVehicle(r.getRecentVehicle()), setTimeout(function() {
            e.beTuningShopSetCameraMode(s.TuningShopCameraMode.CAMERA_START)
        }, 100)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1485),
        a = i(1486),
        s = i(53),
        c = i(92),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.vehicleTuningShopStartBinder = this.addChildBinder(this.face, o.VehicleTuningShopStartBinder), this.vehicleTuningShopMainBinder = this.addChildBinder(this.face, a.VehicleTuningShopMainBinder)
            }, t.prototype.onDetach = function() {
                this.dispatch(s.showNav("tuning")), this.dispatch(c.resetSelected()), this.dispatch(c.hideWrapping(!1)), this.tuningShopService.removeAllListeners(), this.tuningShopService.resetTuningItems()
            }, t.prototype.update = function(e) {
                this.vehicleTuningShopStartBinder.setProps(e), this.vehicleTuningShopMainBinder.setProps(e)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    vehicleState: e.vehicle,
                    tuningShopState: e.tuningShop
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("tuningShopService")], d.prototype, "tuningShopService", void 0), t.VehicleTuningShopStageBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(53),
        a = i(1),
        s = i(8),
        c = i(12),
        d = i(91),
        l = i(92),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-startDesc .id-tuningStartDesc", "TUNING_SHOP_START_DESC"), this.translate(".id-startButton .id-textField", "TUNING_SHOP_START"), this.onClickSafe(".id-startButton", function() {
                    return new r(function(t) {
                        e.gotoAndPlay(e.face, "tuningIn"), e.once(e.face, s.EventEx.STOP, function() {
                            return t()
                        }), e.externalService.beTuningShopSetCameraMode(d.TuningShopCameraMode.CAMERA_COLOR), e.dispatch(o.hideNav("tuning")), e.dispatch(l.selectItemTab(0)), e.dispatch(l.resetFilter()), e.showDebugButtons()
                    })
                })
            }, t.prototype.onAddedToScene = function() {
                this.gotoAndPlay(this.face, "startIn")
            }, t.prototype.update = function(e) {
                var t = c.getRecentVehicle();
                this.bindText(".id-startDesc .id-manufacturerName", this.$filter("manufacturerName")(t.manufacturerCode)), this.bindText(".id-startDesc .id-vehicleName", this.$filter("vehicleName")(t.code))
            }, t.prototype.onDetach = function() {
                this.removeDebugButtons()
            }, t.prototype.removeDebugButtons = function() {
                this.debug && this.debug.remove()
            }, t.prototype.showDebugButtons = function() {
                var e = this;
                this.externalService.isDevelopment() && (this.debug = $('<div class="twbs" style="position: fixed; left: 1%; top: 250px; width: 100px;">'), $('<button class="btn btn-success btn-lg" type="submit">CAMERA0</button>').on("click", function() {
                    e.externalService.beTuningShopSetCameraMode(d.TuningShopCameraMode.CAMERA_START)
                }).appendTo(this.debug), $('<button class="btn btn-success btn-lg" type="submit">CAMERA1</button>').on("click", function() {
                    e.externalService.beTuningShopSetCameraMode(d.TuningShopCameraMode.CAMERA_COLOR)
                }).appendTo(this.debug), $('<button class="btn btn-success btn-lg" type="submit">CAMERA2</button>').on("click", function() {
                    e.externalService.beTuningShopSetCameraMode(d.TuningShopCameraMode.CAMERA_WHEEL)
                }).appendTo(this.debug), $('<button class="btn btn-success btn-lg" type="submit">CAMERA3</button>').on("click", function() {
                    e.externalService.beTuningShopSetCameraMode(d.TuningShopCameraMode.CAMERA_WRAP)
                }).appendTo(this.debug), $('<button class="btn btn-success btn-lg" type="submit">CAMERA4</button>').on("click", function() {
                    e.externalService.beTuningShopSetCameraMode(d.TuningShopCameraMode.CAMERA_CHANGEVEHICLE)
                }).appendTo(this.debug), $('<button class="btn btn-success btn-lg" type="submit">CAMERA5</button>').on("click", function() {
                    e.externalService.beTuningShopSetCameraMode(d.TuningShopCameraMode.CAMERA_ORBIT)
                }).appendTo(this.debug), $('<button class="btn btn-success btn-lg" type="submit">CAMERA6</button>').on("click", function() {
                    e.externalService.beTuningShopSetCameraMode(d.TuningShopCameraMode.CAMERA_EXIT)
                }).appendTo(this.debug), this.debug.appendTo("#edge-ui"))
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([a.autowired("externalService")], u.prototype, "externalService", void 0), t.VehicleTuningShopStartBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1487),
        o = i(1488),
        a = i(1489),
        s = i(91),
        c = i(53),
        d = i(92),
        l = i(28),
        u = i(1),
        p = i(4),
        h = i(12),
        f = i(72),
        v = i(8),
        m = i(2),
        g = i(1493),
        y = i(1494),
        S = i(1495),
        E = i(91),
        T = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.selectedTabIndex = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-propertyTitle", "TUNING_SHOP_HOWMUCH_IHAVE"), this.translate(".id-changeVehicleButton", "TUNING_SHOP_CAR_EXCHANGE_BUTTON"), this.translate(".id-inventoryButton", "TUNING_SHOP_INVENTORY"), this.translate(".id-exitButton", "TUNING_SHOP_EXIT_BUTTON"), this.hasSizeAll(".TypeList, .id-typeListItem", !0);
                var t = _.map(E.TuningCategoryInfo, function(t) {
                    return e.$filter("translate")(t.localKey)
                });
                this.addChildBinder(".TypeList .id-typeListItem", u.CollectionBinder, {
                    instanceBinder: l.bindText
                }).applyCollection(t), this.itemTypeGroup = new f.ButtonGroup("TypeList"), _.each(this.face.$$(".TypeList .id-typeListItem"), function(t, i) {
                    t.toggle = !0, t.on(v.EventEx.SELECT, function() {
                        t.selected && e.dispatch(d.selectItemTab(i))
                    }), e.itemTypeGroup.addButton(t)
                }), this.listBinder = this.addChildBinder(".id-shopItemContainer", o.VehicleTuningShopListBinder), this.filterBinder = this.addChildBinder(".id-shopItemContainer", S.TuningFilterBinder, this.props), this.selectedItemContainer = this.addChildBinder(".id-selectedItemContainer", a.VehicleTuningShopSelectedItemContainerBinder), this.inventoryPopup = this.addChildBinder(".id-inventoryPopup", r.TuningInventoryBinder), this.freecamBinder = this.addChildBinder(this.face, g.VehicleTuningShopFreecamBinder), this.vehicleTuningShopChangeVehicleBinder = this.addChildBinder(this.face, y.VehicleTuningShopChangeVehicleBinder), this.properties = this.addChildBinder(".id-property .id-propertyItem", u.CollectionBinder, {
                    instanceBinder: C
                }), this.on(".id-changeVehicleButton", m.MouseEventEx.CLICK, this.onChangeVehicle.bind(this)), this.on(".id-inventoryButton", m.MouseEventEx.CLICK, this.onInventory.bind(this)), this.on(".id-selectedItemContainer .id-exitButton", m.MouseEventEx.CLICK, this.onExit.bind(this)), this.translate(".id-cautionWrapping .id-title", "TUNING_SHOP_WRAP_INSTALL_ALERT"), this.translate(".id-cautionWrapping .id-decription", "TUNING_SHOP_WRAP_INSTALL_ALERT_DESC"), this.translate(".id-cautionWrapping .id-checkboxName", "TUNING_SHOP_WRAP_INSTALL_NOSHOW");
                var i = this.getFace(".id-cautionWrapping .id-hideCheckbox");
                this.addManagedListener(i, m.MouseEventEx.CLICK, function() {
                    i.selected = !i.selected
                }), this.addManagedListener(i, v.EventEx.SELECT, function() {
                    if (i.selected) e.externalService.beSetVehicleWrapping(0);
                    else {
                        var t = e.face.$$(".id-tapList .id-typeListItem")[0],
                            n = h.getRecentVehicle(),
                            r = t.selected ? e.tuningShopService.getItemCodeByProductCode(e.props.tuningShopState.selectedProducts.WRAP.productCode) || n.paint.wrapCode : n.paint.wrapCode;
                        r && e.externalService.beSetVehicleWrapping(e.tuningShopService.getCidByTuningItemCode(r))
                    }
                    e.dispatch(d.hideWrapping(i.selected))
                }), this.addManagedListener(this.face, "freeCam_out", function() {
                    e.showWrapCaution(e.tuningShopService.isEquipOrSelectedWrap())
                }), this.addManagedListener(this.face, "freeCam_in", function() {
                    e.showWrapCaution(!1)
                }), this.addManagedListener(this.face, "vehicle_change_out", function() {
                    e.showWrapCaution(e.tuningShopService.isEquipOrSelectedWrap())
                }), this.addManagedListener(this.face, "vehicle_change_in", function() {
                    e.showWrapCaution(!1, !1)
                }), this.translate(".id-shopItemContainer .id-tipContainer .id-textContainer0", "TUNING_SHOP_FREECAM_ENTRANCE_DESC"), this.translate(".id-shopItemContainer .id-tipContainer .id-textContainer1", "TUNING_SHOP_ITEMLIST_SCROLL_DESC")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.itemTypeGroup.setSelectedButtonByIndex(0), this.showWrapCaution(this.tuningShopService.isEquipOrSelectedWrap()), this.transitionCleanUp = this.$transitions.onSuccess({
                    to: "root.menu.VehicleTuningShop",
                    from: "root.menu.VehicleTuningShop.Purchase"
                }, function() {
                    e.dispatch(c.hideNav("tuning"))
                }), "inventory" === this.$stateParams.goTo && (this.face.once("stop", function() {
                    e.onInventory()
                }), this.gotoAndPlay(this.face, "tuningIn"), this.externalService.beTuningShopSetCameraMode(s.TuningShopCameraMode.CAMERA_COLOR), this.dispatch(c.hideNav("tuning")), this.dispatch(d.selectItemTab(0)), this.dispatch(d.resetFilter())), this.playerService.addMileageResetTimer(function() {
                    e.updateProperties()
                })
            }, t.prototype.onDetach = function() {
                this.transitionCleanUp(), this.playerService.clearMileageResetTimer()
            }, t.prototype.showWrapCaution = function(e, t) {
                var i = this;
                void 0 === t && (t = !0);
                var n = this.getFace(".id-cautionWrapping");
                e ? (this.visible(n, !0), this.gotoAndPlay(n, "in", !0)) : t ? "in" === n.currentLabel && (this.gotoAndPlay(n, "out"), n.once("stop", function() {
                    "out" === n.currentLabel && i.visible(n, !1)
                })) : (this.visible(n, !1), this.gotoAndStop(n, "out"))
            }, t.prototype.update = function(e) {
                var t = e.tuningShopState,
                    i = this.face.currentLabel;
                if (i && "startIn" !== i) {
                    this.updateProperties();
                    var n = h.getRecentVehicle();
                    this.bindText(".id-tuningInfo .id-manufacturerName", this.$filter("manufacturerName")(n.manufacturerCode)), this.bindText(".id-tuningInfo .id-vehicleName", this.$filter("vehicleName")(n.code));
                    var r = t.selectedTab;
                    this.listBinder.setProps(e), this.onOrderItem !== t.purchased && (_.isUndefined(t.purchased) ? _.isUndefined(t.purchased) && this.selectedTabIndex === r && this.freecamBinder.lockFreeCam(!1) : this.freecamBinder.lockFreeCam(!0), this.onOrderItem = t.purchased), this.selectedTabIndex !== r && (this.itemTypeGroup.setSelectedButtonByIndex(r), this.tuningShopService.adjustCategoryCamera(r), this.lockFreeCam(r), this.selectedTabIndex = r), this.filterBinder.setProps(t), this.selectedItemContainer.setProps(e), this.freecamBinder.setProps(e), this.showWrapCaution(this.tuningShopService.isEquipOrSelectedWrap()), this.getFace(".id-cautionWrapping .id-hideCheckbox").selected = !!e.tuningShopState.hideWrapping
                }
            }, t.prototype.lockFreeCam = function(e) {
                var t = this,
                    i = 0;
                switch (e) {
                    case s.TuningItemTab.VEHICLECOLOR:
                        i = 800;
                        break;
                    case s.TuningItemTab.WHEELCOLOR:
                        i = 1e3;
                        break;
                    case s.TuningItemTab.WRAP:
                    case s.TuningItemTab.WRAP_EX:
                        i = -1 !== [s.TuningItemTab.WRAP, s.TuningItemTab.WRAP_EX].indexOf(this.selectedTabIndex) ? 0 : 1100
                }
                0 < i && (this.timerFreecam && clearTimeout(this.timerFreecam), this.freecamBinder.lockFreeCam(!0), this.timerFreecam = setTimeout(function() {
                    t.freecamBinder.lockFreeCam(!1)
                }, i))
            }, t.prototype.updateProperties = function() {
                var e = this,
                    t = "tencent" === this.publisherService.publisher ? "TCCASH" : "NXCASH",
                    i = this.featureSetService.isEnabled("MILEAGE") ? ["SP", t, "MILEAGE"] : ["SP", t],
                    n = _.map(i, function(t) {
                        return {
                            currency: t,
                            value: e.shopService.getMyMoney(t)
                        }
                    });
                this.properties.applyCollection(n)
            }, t.prototype.onExit = function() {
                var e = this,
                    t = function() {
                        e.gotoAndPlay(e.face, "startIn"), e.externalService.beTuningShopSetCameraMode(s.TuningShopCameraMode.CAMERA_EXIT), e.dispatch(c.showNav("tuning")), e.dispatch(d.resetSelected()), e.dispatch(d.hideWrapping(!1)), e.tuningShopService.emit("reset-preview-items");
                        var t = h.getRecentVehicle();
                        t && e.tuningShopService.beSetTuningItems(t.paint, !1), e.getFace(".id-cautionWrapping .id-hideCheckbox").selected = !1, e.filterBinder.onExit()
                    };
                if (this.tuningShopService.isEmptySelectedItems()) return void t();
                this.popupService.draw("ConfirmCancelPopup", {
                    title: "TUNING_SHOP_EXIT_ALERT_BUTTON",
                    description: "TUNING_SHOP_GOOUT_NOTPURCHASE_ALERT_BUTTON",
                    confirmString: "TUNING_SHOP_EXIT_BUTTON",
                    cancelString: "TUNING_SHOP_EXIT_CANCEL_BUTTON",
                    confirm: t
                })
            }, t.prototype.onInventory = function() {
                this.inventoryPopup.inventoryIn()
            }, t.prototype.onChangeVehicle = function() {
                this.externalService.beTuningShopSetCameraMode(s.TuningShopCameraMode.CAMERA_CHANGEVEHICLE), this.gotoAndPlay(this.face, "changeVehicle_in");
                var e = this.props.vehicleState;
                this.vehicleTuningShopChangeVehicleBinder.setProps({
                    vehicles: e.vehicles,
                    recentVid: h.getRecentVehicle().id,
                    selectedTab: this.props.tuningShopState.selectedTab
                }), this.face.emit("vehicle_change_in")
            }, t
        }(u.Binder);
    n.__decorate([u.autowired("$filter")], T.prototype, "$filter", void 0), n.__decorate([u.autowired("externalService")], T.prototype, "externalService", void 0), n.__decorate([u.autowired("popupService")], T.prototype, "popupService", void 0), n.__decorate([u.autowired("tuningShopService")], T.prototype, "tuningShopService", void 0), n.__decorate([u.autowired("shopService")], T.prototype, "shopService", void 0), n.__decorate([u.autowired("publisherService")], T.prototype, "publisherService", void 0), n.__decorate([u.autowired("featureSetService")], T.prototype, "featureSetService", void 0), n.__decorate([u.autowired("playerService")], T.prototype, "playerService", void 0), n.__decorate([u.autowired("$transitions")], T.prototype, "$transitions", void 0), n.__decorate([u.autowired("$stateParams")], T.prototype, "$stateParams", void 0), t.VehicleTuningShopMainBinder = T;
    var C = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.face.hasSize = !0
        }, t.prototype.update = function(e) {
            var t = this.$filter("currency")(e.value, "", 0);
            this.bindText(".id-textField", p.default.toMoney(t)), this.gotoAndStop(".id-monetaryUnitIcon", p.default.getPriceIconLabel(e.currency))
        }, t
    }(u.Binder);
    n.__decorate([u.autowired("$filter")], C.prototype, "$filter", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(1),
        a = i(2),
        s = i(28),
        c = i(72),
        d = i(8),
        l = i(3),
        u = i(50),
        p = i(91),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.addManagedListener(this.face, a.MouseEventEx.MOUSE_OVER, function(t) {
                    e.showTooltip(t)
                }), this.addManagedListener(this.face, a.MouseEventEx.MOUSE_OUT, function(t) {
                    e.tooltipService.hide()
                })
            }, t.prototype.showTooltip = function(e) {
                var t, i = e && e.currentTarget ? e : this.face;
                if (this.props.isExclusive) {
                    var n = this.tuningShopService.getExclusiveVehicleCode(this.props.code);
                    n && (t = this.$filter("vehicleName")(n))
                }
                var r = {
                    code: this.props.code,
                    count: this.props.count,
                    subtype: this.props.subtype,
                    restrict: t
                };
                this.tooltipService.show(i, "right", u.TooltipType.Tuning, r)
            }, t.prototype.update = function(e) {
                var t = !_.isEmpty(e);
                if (this.face.enabled = t, e) switch (e.subtype) {
                    case "VEHICLECOLOR":
                    case "WHEELCOLOR":
                        this.visible(".id-colorContainer", !0), this.visible(".id-tuningItemImage", !1), this.hasSize(".id-colorContainer .id-solid", !0), this.hasSize(".id-colorContainer .id-secondary", !0);
                        var i = this.getFace(".id-colorContainer .id-solid");
                        i && (e.rgb ? i.setCustomStyle({
                            "background-color": e.rgb.solid
                        }) : i.visible = !1);
                        var n = this.getFace(".id-colorContainer .id-secondary");
                        n && (e.rgb ? n.setCustomStyle({
                            "background-color": e.rgb.secondary
                        }) : n.visible = !1);
                        break;
                    case "WRAP":
                        this.visible(".id-colorContainer", !1), this.visible(".id-tuningItemImage", !0), this.drawExternalImage(".id-tuningItemImage", this.$filter("cdn_wrap")(e.code))
                }
                var r = e && e.checkedat < e.addedat;
                this.visible(".id-newTag", t && r), this.visible(".id-count", t), this.template(".id-count", "TUNING_SHOP_ITEMS_HAVEAMOUNT", {
                    number: e.count
                })
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([o.autowired("tooltipService")], h.prototype, "tooltipService", void 0), n.__decorate([o.autowired("tuningShopService")], h.prototype, "tuningShopService", void 0);
    var f = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.scrollIndex = 0, t.scrollSize = 0, t.currentListBinder = [], t.nextListBinder = [], t.isScrolling = !1, t.scrollGap = 0, t.isDragging = !1, t.dragBoundaryY = {
                prev: 0,
                next: 0
            }, t.dragEventHandler = _.bind(function(e) {
                switch (e.type) {
                    case "mousedown":
                        t.onDragStartScrollBar(e);
                        break;
                    case "mouseup":
                        t.onDragEndScrollBar(e);
                        break;
                    case "mousemove":
                        t.onDragScrollBar(e);
                        break;
                    case "click":
                        t.onClickScrollBarTrack(e)
                }
            }, t), t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.getFace(".id-closeButton").on(a.MouseEventEx.CLICK, function() {
                e.gotoAndPlay(e.face, "out"), e.face.once(d.EventEx.STOP, function() {
                    e.tuningShopService.updateCheckedat(), e.face.visible = !1
                })
            }), this.getFace(".id-typeList").hasSize = !0;
            var t = _.map(p.TuningCategoryInfo, function(t) {
                return e.$filter("translate")(t.localKey)
            });
            this.addChildBinder(".id-typeList .id-typeListItem", o.CollectionBinder, {
                instanceBinder: s.bindText
            }).applyCollection(t), this.buttonGroup = new c.ButtonGroup("InventoryTypeList"), _.each(this.face.$$(".id-typeList .id-typeListItem"), function(t, i) {
                e.addManagedListener(t, d.EventEx.SELECT, function() {
                    t.selected && (r.debug("selected type : ", i), e.selectedCategory = e.tuningShopService.getCategory(i), e.bindInventoryList())
                }), t.toggle = !0, e.buttonGroup.addButton(t)
            }), this.scrollContainer = this.getFace(".id-itemTileList"), this.addManagedListener(this.scrollContainer, "reset", function(t) {
                e.gotoAndPlay(e.scrollContainer, "default"), e.isScrolling = !1, setTimeout(function() {
                    e.currentListBinder.some(function(e, t) {
                        return "over" === e.face.currentLabel && !e.face.emit(a.MouseEventEx.MOUSE_OVER)
                    })
                })
            }), this.wheelHandler = _.throttle(function(t) {
                if (!e.isScrolling) {
                    var i = Math.max(-1, Math.min(1, t.wheelDelta || -t.detail));
                    1 === i && 0 !== e.scrollIndex ? e.movePage(e.scrollIndex - 1, "previous") : -1 === i && e.scrollIndex !== e.chunkedItems.length - 1 && e.movePage(e.scrollIndex + 1, "next")
                }
            }, 600, {
                trailing: !1
            });
            var i = this.getFace(".id-current");
            i.hasSize = !0, i.htmlElement.addEventListener("mousewheel", this.wheelHandler.bind(this), {
                passive: !0
            }), this.scrollBarContainer = this.getFace(".id-scrollBar"), this.scrollBarContainer.hasSize = !0, this.scrollBarContainer.htmlElement.addEventListener("mousewheel", this.wheelHandler.bind(this), {
                passive: !0
            }), this.scrollBarThumb = this.scrollBarContainer.$(".id-thumb"), this.scrollBarThumb.hasSize = !0, this.scrollBarTrack = this.scrollBarContainer.$(".id-track"), this.scrollBarTrack.hasSize = !0, this.scrollBarThumb.htmlElement.addEventListener("mousedown", this.dragEventHandler), this.scrollBarTrack.htmlElement.addEventListener("click", this.dragEventHandler)
        }, t.prototype.onAddedToScene = function() {
            var e = this;
            _.times(18, function(t) {
                var i = e.getFace(".id-current .id-item" + (t + 1)),
                    n = e.getFace(".id-next .id-item" + (t + 1)),
                    r = e.addChildBinder(i, h);
                e.currentListBinder.push(r), e.nextListBinder.push(e.addChildBinder(n, h)), e.addManagedListener(i, a.MouseEventEx.MOUSE_OVER, e.onMouseOver.bind(e, t))
            }), this.updateInventory(), this.buttonGroup.setSelectedButtonByIndex(0)
        }, t.prototype.movePage = function(e, t) {
            var i = this;
            if (!this.isScrolling && !(e < 0 || this.scrollSize <= e || this.scrollIndex === e)) {
                this.isScrolling = !0, this.scrollIndex = e, this.bindList(this.nextListBinder, e);
                var n = t;
                this.scrollContainer.once("stop", function() {
                    i.tooltipService.hide()
                }), this.gotoAndPlay(this.scrollContainer, n), this.moveScrollBar(), setTimeout(function() {
                    i.bindList(i.currentListBinder, i.scrollIndex)
                }, 100)
            }
        }, t.prototype.getViewportScaledValue = function(e) {
            return this.graphicConfigService.scaleRatio * e
        }, t.prototype.getScaledValueY = function(e, t) {
            return e.scaleY * t
        }, t.prototype.onDragStartScrollBar = function(e) {
            this.isDragging = !0, this.dragBoundaryY.prev = e.y - this.getViewportScaledValue(this.getScaledValueY(this.scrollBarThumb, e.offsetY)), this.dragBoundaryY.next = this.dragBoundaryY.prev + this.getViewportScaledValue(this.scrollGap), this.face.htmlElement.addEventListener("mousemove", this.dragEventHandler), this.face.htmlElement.addEventListener("mouseup", this.dragEventHandler)
        }, t.prototype.onDragEndScrollBar = function(e) {
            this.isDragging = !1, this.face.htmlElement.removeEventListener("mousemove", this.dragEventHandler), this.face.htmlElement.removeEventListener("mouseup", this.dragEventHandler)
        }, t.prototype.onDragScrollBar = function(e) {
            if (!this.isScrolling && this.isDragging) {
                var t = void 0,
                    i = this.scrollBarThumb.y;
                e.y < this.dragBoundaryY.prev ? (t = "previous", i -= this.scrollGap) : this.dragBoundaryY.next < e.y && (t = "next", i += this.scrollGap);
                var n = Math.round(i / this.scrollGap);
                n < 0 && (n = 0), this.scrollSize <= n && (n = this.scrollSize - 1), this.scrollIndex !== n && (this.movePage(n, t), "previous" === t ? (this.dragBoundaryY.next = this.dragBoundaryY.prev, this.dragBoundaryY.prev -= this.getViewportScaledValue(this.scrollGap)) : (this.dragBoundaryY.prev = this.dragBoundaryY.next, this.dragBoundaryY.next += this.getViewportScaledValue(this.scrollGap)))
            }
        }, t.prototype.onClickScrollBarTrack = function(e) {
            e.offsetY < this.scrollBarThumb.y ? this.movePage(this.scrollIndex - 1, "previous") : this.scrollBarThumb.y + this.getScaledValueY(this.scrollBarThumb, this.scrollBarThumb.height) < e.offsetY && this.movePage(this.scrollIndex + 1, "next")
        }, t.prototype.moveScrollBar = function() {
            var e = this,
                t = this.scrollIndex * this.scrollGap;
            this.scrollBarThumb.addCustomToTween(.2, {
                flash: {
                    y: t,
                    onComplete: function() {
                        e.scrollBarThumb.y = t
                    }
                }
            })
        }, t.prototype.initScrollBar = function() {
            this.isDragging = !1, this.scrollGap = this.scrollBarTrack.height / this.scrollSize, this.scrollBarThumb.y = 0, this.scrollBarThumb.regY = 0, this.scrollBarThumb.scaleYMultiplier = this.scrollGap / this.scrollBarThumb.height, this.scrollBarContainer.visible = 1 < this.scrollSize
        }, t.prototype.updateInventory = function() {
            var e = this,
                t = l.store.getState().tuningShop,
                i = t.items;
            this.inventoryItems = _.map(i, function(i) {
                return _.extend(e.tuningShopService.getTuningItemByCode(i.code), i, {
                    checkedat: t.checkedat
                })
            })
        }, t.prototype.bindInventoryList = function() {
            var e = this,
                t = _.filter(this.inventoryItems, function(t) {
                    return Math.floor(t.code / 1e4) === e.selectedCategory.codeGroup
                }),
                i = _.sortBy(t, function(e) {
                    return e.addedat
                }).reverse();
            this.chunkedItems = _.chunk(i, 18), this.scrollSize = this.chunkedItems.length, 0 === this.scrollSize ? this.scrollIndex = 0 : this.scrollIndex = this.scrollIndex > this.scrollSize - 1 ? this.scrollSize - 1 : this.scrollIndex, this.bindList(this.currentListBinder, this.scrollIndex), this.initScrollBar()
        }, t.prototype.onMouseOver = function(e) {}, t.prototype.bindList = function(e, t) {
            var i = this.chunkedItems[t] || [];
            e.forEach(function(e, t) {
                var n = i[t];
                e.setProps(n)
            })
        }, t.prototype.update = function(e) {
            this.reduxProps.items === e.items && this.reduxProps.checkedat === e.checkedat || (this.updateInventory(), this.bindInventoryList())
        }, t.prototype.mapStateToProps = function(e) {
            return e.tuningShop
        }, t.prototype.inventoryIn = function() {
            this.face.visible = !0, this.scrollIndex = 0, this.buttonGroup.setSelectedButtonByIndex(0), this.gotoAndPlay(this.face, "in")
        }, t
    }(o.Binder);
    n.__decorate([o.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([o.autowired("tuningShopService")], f.prototype, "tuningShopService", void 0), n.__decorate([o.autowired("graphicConfigService")], f.prototype, "graphicConfigService", void 0), n.__decorate([o.autowired("tooltipService")], f.prototype, "tooltipService", void 0), t.TuningInventoryBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(3),
        s = i(92),
        c = i(12),
        d = i(50),
        l = i(22),
        u = i(4),
        p = i(91),
        h = i(67),
        f = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this;
                this.translate(".id-tagContainer .id-newTag", "TUNING_SHOP_ITEM_TAG_NEW"), this.translate(".id-tagContainer .id-lmitedSaleTag", "TUNING_SHOP_ITEM_TAG_PROMOTION"), e.disableMouseEvent || (this.on(this.face, o.MouseEventEx.MOUSE_OVER, function(e) {
                    var i, n = e.currentTarget ? e : t.face,
                        r = t.props,
                        o = t.tuningShopService.getTuningItemByCode(r.rewards[0].code);
                    if (o.isExclusive) {
                        var a = t.tuningShopService.getExclusiveVehicleCode(o.code);
                        a && (i = t.$filter("vehicleName")(a))
                    }
                    var s = {
                        code: o.code,
                        count: t.tuningShopService.getInventoryCountByCode(o.code),
                        subtype: o.subtype,
                        restrict: i,
                        price: r.bunches[0].price,
                        priceType: r.bunches[0].currency
                    };
                    t.tooltipService.show(n, "top", d.TooltipType.Tuning, s)
                }), this.on(this.face, o.MouseEventEx.MOUSE_OUT, function(e) {
                    t.tooltipService.hide()
                }))
            }, t.prototype.update = function(e) {
                var t = !l.isEmpty(e);
                if (this.enableButton(this.face, t), !t) return this.tooltipService.hide();
                var i = e.rewards[0].code,
                    n = this.tuningShopService.getTuningItemByCode(i);
                if (n) {
                    switch (n.subtype) {
                        case "VEHICLECOLOR":
                        case "WHEELCOLOR":
                            this.visible(".id-colorContainer", !0), this.visible(".id-tuningItemImage", !1), this.hasSize(".id-colorContainer .id-solid", !0), this.hasSize(".id-colorContainer .id-secondary", !0);
                            var r = this.getFace(".id-colorContainer .id-solid");
                            r && (n.rgb ? r.setCustomStyle({
                                "background-color": n.rgb.solid
                            }) : r.visible = !1);
                            var o = this.getFace(".id-colorContainer .id-secondary");
                            o && (n.rgb ? o.setCustomStyle({
                                "background-color": n.rgb.secondary
                            }) : o.visible = !1);
                            break;
                        case "WRAP":
                            this.visible(".id-colorContainer", !1), this.visible(".id-tuningItemImage", !0), this.drawExternalImage(".id-tuningItemImage", this.$filter("cdn_wrap")(i))
                    }
                    var a = e.isNewProduct || e.isPromotion;
                    if (this.visible(".id-tagContainer", a), a) {
                        var s = function() {
                            return e.isNewProduct && e.isPromotion ? "newAndLimited" : e.isNewProduct ? "new" : e.isPromotion ? "limited" : void 0
                        }();
                        this.gotoAndPlay(".id-tagContainer", s, !0)
                    }
                    this.gotoAndStop(".id-monetaryUnitIcon", u.default.getPriceIconLabel(e.bunches[0].currency))
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([r.autowired("tuningShopService")], f.prototype, "tuningShopService", void 0), n.__decorate([r.autowired("tooltipService")], f.prototype, "tooltipService", void 0);
    var v = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.selectedTabIndex = -1, t.pageIndex = 0, t.pageSize = 0, t.isPaging = !1, t.currentListBinder = [], t.nextListBinder = [], t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            l.times(7, function(t) {
                var i = e.getFace(".id-current" + (t + 1)),
                    n = e.getFace(".id-next" + (t + 1));
                e.currentListBinder.push(e.addChildBinder(i, f)), e.nextListBinder.push(e.addChildBinder(n, f, {
                    disableMouseEvent: !0
                })), e.addManagedListener(i, o.MouseEventEx.CLICK, e.onClick.bind(e, t))
            }), this.pagingContainer = this.getFace(".id-itemList"), this.pagingContainer.hasSize = !0, this.prevButton = this.getFace(".id-previousButton"), this.nextButton = this.getFace(".id-nextButton"), this.firstButton = this.getFace(".id-firstButton"), this.lastButton = this.getFace(".id-lastButton"), this.indicatorContainer = this.getFace(".id-pageNumberContainer"), this.currentIndicator = this.getFace(".id-currentPage"), this.setUpPagingFlow(), this.setUpPageNumberListener()
        }, t.prototype.setUpPagingFlow = function() {
            var e = this;
            this.addManagedListener(this.prevButton, o.MouseEventEx.CLICK, function() {
                t(e.pageIndex - 1, "previous")
            }), this.addManagedListener(this.nextButton, o.MouseEventEx.CLICK, function() {
                t(e.pageIndex + 1, "next")
            }), this.addManagedListener(this.lastButton, o.MouseEventEx.CLICK, function() {
                t(e.chunkedProduct.length - 1, "last")
            }), this.addManagedListener(this.firstButton, o.MouseEventEx.CLICK, function() {
                t(0, "first")
            });
            var t = function(t, i) {
                e.movePage(t, i)
            };
            this.addManagedListener(this.pagingContainer, "reset", function(t) {
                e.gotoAndPlay(e.pagingContainer, "default"), e.isPaging = !1, e.preventMouseEvent(!1)
            }), this.wheelHandler = l.throttle(function(t) {
                if (!e.isPaging) {
                    var i = Math.max(-1, Math.min(1, t.wheelDelta || -t.detail));
                    1 === i && 0 !== e.pageIndex ? e.movePage(e.pageIndex - 1, "previous") : -1 === i && e.pageIndex !== e.chunkedProduct.length - 1 && e.movePage(e.pageIndex + 1, "next")
                }
            }, 600, {
                trailing: !1
            }), this.pagingContainer.htmlElement.addEventListener("mousewheel", this.wheelHandler, {
                passive: !0
            })
        }, t.prototype.setUpPageNumberListener = function() {
            var e = this,
                t = function(t, i) {
                    e.movePage(t, i)
                };
            [{
                num: 2,
                action: "first"
            }, {
                num: 3,
                action: "previous"
            }, {
                num: 5,
                action: "next"
            }, {
                num: 6,
                action: "last"
            }].forEach(function(i) {
                var n = i.num - 4,
                    r = e.getFace(".id-curr" + i.num);
                e.addManagedListener(r, o.MouseEventEx.CLICK, function() {
                    t(e.pageIndex + n, i.action)
                })
            }), this.addManagedListener(this.indicatorContainer, "reset", function(t) {
                e.setPageIndicatorsNumber("default"), e.disposePageButton(), e.gotoAndPlay(e.indicatorContainer, "default")
            })
        }, t.prototype.update = function(e) {
            var t, i, n = this,
                r = e.vehicleState,
                o = e.tuningShopState,
                a = c.getRecentVehicle(),
                s = this.tuningShopService.getTuningVehicle(a.code),
                d = o.selectedTab,
                u = this.tuningShopService.getCategory(d);
            switch (d) {
                case p.TuningItemTab.VEHICLECOLOR:
                    t = s.vehicleColorFilter, i = "TUNING_SHOP_ITEM_NOTALLOW_ALERT_VEHICLECOLOR";
                    break;
                case p.TuningItemTab.WHEELCOLOR:
                    t = s.wheelColorFilter, i = "TUNING_SHOP_ITEM_NOTALLOW_ALERT_WHEELCOLOR";
                    break;
                case p.TuningItemTab.WRAP:
                    t = s.wrapFilter, i = "TUNING_SHOP_ITEM_NOTALLOW_PUBLIC_ALERT";
                    break;
                case p.TuningItemTab.WRAP_EX:
                    t = s.exclusiveWrapFilter, i = "TUNING_SHOP_ITEM_NOTALLOW_PRIVATE_ALERT"
            }
            var f = l.find(r.vehicles, {
                id: a.id
            });
            this.selectedTabIndex === d && this.selectedVehicleCode === f.code || (this.pageIndex = 0, this.selectedTabIndex = d, this.selectedVehicleCode = f.code, "NONE" === t.type ? (this.translate(".id-description", i), this.gotoAndPlay(this.face, "description_in")) : this.gotoAndPlay(this.face, "in"));
            var v = this.tuningShopService.getProductList(u.codeGroup),
                m = l.filter(v, function(e) {
                    var i, r, a = e.rewards[0].code;
                    switch (t.type) {
                        case "ALL":
                            i = !0;
                            break;
                        case "ALLOW":
                            i = !l.isUndefined(t.codes) && t.codes.indexOf(a) >= 0;
                            break;
                        case "REJECT":
                            i = !l.isUndefined(t.codes) && t.codes.indexOf(a) < 0;
                            break;
                        default:
                            i = !1
                    }
                    switch (o.filterState.filterType) {
                        case "ALL":
                            r = !0;
                            break;
                        case "HAVE":
                            r = n.tuningShopService.getInventoryCountByCode(a) > 0;
                            break;
                        case "SP":
                        case "CASH":
                        case "MILE":
                            r = new RegExp(o.filterState.filterType).test(e.bunches[0].currency)
                    }
                    return i && r
                }),
                g = o.filterState,
                y = g.sortField,
                S = g.sortOrder;
            switch (y) {
                case "name":
                    m.sort(h(function(e) {
                        return n.translateName(e)
                    }, S).thenBy("isPromotion", -1).thenBy("isNewProduct", -1).thenBy("code", 1));
                    break;
                default:
                    m.sort(h(y, S).thenBy(function(e) {
                        return n.translateName(e)
                    }, 1).thenBy("code", 1))
            }
            o.priorityCodes && m.sort(h(function(e) {
                return o.priorityCodes.indexOf(e.code)
            }, -1)), this.chunkedProduct = l.chunk(m, 7), this.pageSize = this.chunkedProduct.length || 1, this.pageIndex = this.pageIndex > this.pageSize - 1 ? this.pageSize - 1 : this.pageIndex, this.isPaging = !1, this.preventMouseEvent(!1), this.bindList(this.currentListBinder, this.pageIndex), this.setPageIndicatorsNumber("default"), this.disposePageButton()
        }, t.prototype.translateName = function(e) {
            return this.$filter("tuningItemName")(e.rewards[0].code)
        }, t.prototype.bindList = function(e, t) {
            var i = this,
                n = this.chunkedProduct[t] || [];
            e.forEach(function(e, t) {
                var r = n[t];
                if (e.setProps(r), r) {
                    var o = i.tuningShopService.getSubtypeByTabIndex(i.selectedTabIndex),
                        a = i.props.tuningShopState.selectedProducts[o].productCode;
                    e.face.selected = r.code === a
                }
            })
        }, t.prototype.setPageNumber = function(e, t, i) {
            var n = 0 <= t && t < this.pageSize,
                r = this.indicatorContainer.$(".id-" + i + e);
            r && (r.enabled = n, this.bindText(r.$(".id-buttonName"), n ? t + 1 : ""))
        }, t.prototype.setPageNumbers = function(e, t) {
            this.setPageNumber(4, e, t);
            for (var i = 1; i < 4; i++) this.setPageNumber(4 - i, e - i, t), this.setPageNumber(4 + i, e + i, t)
        }, t.prototype.setPageIndicatorsNumber = function(e) {
            switch (this.setPageNumbers(this.pageIndex, "curr"), e) {
                case "default":
                    this.bindText(this.currentIndicator.$(".id-current"), this.pageIndex + 1), this.setPageNumbers(this.pageIndex, "num");
                    break;
                case "first":
                case "last":
                    this.setPageNumbers("first" === e ? this.pageIndex + 1 : this.pageIndex - 1, "num")
            }
        }, t.prototype.onClick = function(e) {
            var t = this.chunkedProduct[this.pageIndex],
                i = t[e],
                n = this.tuningShopService.getTuningItemByCode(i.rewards[0].code);
            n && (a.store.dispatch(s.selectProduct(n.subtype, i.code)), this.tuningShopService.emit("reset-preview-item"))
        }, t.prototype.movePage = function(e, t) {
            var i = this;
            if (!this.isPaging && !(e < 0 || this.pageSize <= e || this.pageIndex === e)) {
                this.preventMouseEvent(!0), this.tooltipService.hide(), this.isPaging = !0, this.pageIndex = e, this.prevButton.enabled = this.nextButton.enabled = this.lastButton.enabled = this.firstButton.enabled = !1, this.bindList(this.nextListBinder, e);
                var n = t;
                "first" === t && (n = "previous"), "last" === t && (n = "next"), this.gotoAndPlay(this.pagingContainer, n), this.gotoAndPlay(this.indicatorContainer, t), this.setPageIndicatorsNumber(t), setTimeout(function() {
                    i.bindList(i.currentListBinder, i.pageIndex)
                }, 100)
            }
        }, t.prototype.disposePageButton = function() {
            this.prevButton.enabled = this.firstButton.enabled = 0 !== this.pageIndex, this.nextButton.enabled = this.lastButton.enabled = this.pageIndex !== this.chunkedProduct.length - 1
        }, t.prototype.preventMouseEvent = function(e) {
            this.classNames(this.face, e ? "prevent-click" : "")
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("$filter")], v.prototype, "$filter", void 0), n.__decorate([r.autowired("tuningShopService")], v.prototype, "tuningShopService", void 0), n.__decorate([r.autowired("externalService")], v.prototype, "externalService", void 0), n.__decorate([r.autowired("tooltipService")], v.prototype, "tooltipService", void 0), t.VehicleTuningShopListBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(72),
        a = i(8),
        s = i(12),
        c = i(3),
        d = i(1490),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                this.translate(".id-tapItemText", e.index ? "TUNING_SHOP_PREVIOUS_VIEW" : "TUNING_SHOP_NOW_PREVIEW")
            }, t
        }(r.Binder);
    t.VehicleTuningSelectionTabBinder = l;
    var u = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.exteriorIdx = 0, t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.getFace(".id-tapList").hasSize = !0, this.tabSelectionList = this.addChildBinder(".id-tapList .id-typeListItem", r.CollectionBinder, {
                instanceBinder: l
            }), this.tabSelectionList.applyCollection([{
                index: 0
            }, {
                index: 1
            }]), this.buttonGroup = new o.ButtonGroup("PreviewTypeList"), _.each(this.face.$$(".id-tapList .id-typeListItem"), function(t, i) {
                t.on(a.EventEx.SELECT, function() {
                    if (t.selected) {
                        if (e.buttonGroup.selectedIndex === i) return;
                        var n = e.getFace(".id-itemListContainer");
                        n.removeAllListeners(a.EventEx.STOP), n.gotoAndPlay(i ? "tap2" : "tap1"), n.once(a.EventEx.STOP, function() {
                            e.gotoAndStop(n, n.timeline.time())
                        }), e.buttonGroup.selectedIndex >= 0 && e.updateExterior(!i)
                    }
                }), t.toggle = !0, e.buttonGroup.addButton(t)
            }), this.itemListBinder = this.addChildBinder(".id-itemListContainer", d.VehicleTuningShopItemListBinder)
        }, t.prototype.onAddedToScene = function() {
            this.buttonGroup.setSelectedButtonByIndex(0)
        }, t.prototype.update = function(e) {
            this.itemListBinder.setProps(e), this.exteriorIdx !== e.tuningShopState.updateExteriorIdx && (this.updateExterior(!this.buttonGroup.selectedIndex), this.exteriorIdx = e.tuningShopState.updateExteriorIdx)
        }, t.prototype.updateExterior = function(e) {
            var t = c.store.getState().tuningShop;
            if (t)
                if (e) this.tuningShopService.beSetTuningPreviewItem(t.selectedProducts, t.hideWrapping, t.updateExteriorRefresh);
                else {
                    var i = s.getRecentVehicle();
                    i && this.tuningShopService.beSetTuningItems(i.paint, t.hideWrapping)
                }
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("tuningShopService")], u.prototype, "tuningShopService", void 0), t.VehicleTuningShopSelectedItemContainerBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(12),
        a = i(1491),
        s = i(1492),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.getFace(".id-currentItemList").hasSize = !0, this.getFace(".id-previewItemList").hasSize = !0, this.currentItemList = this.addChildBinder(".id-currentItemList .id-currentItem", r.CollectionBinder, {
                    instanceBinder: a.VehicleTuningShopCurrentItemBinder,
                    keyProperty: "type"
                }), this.previewItemList = this.addChildBinder(".id-previewItemList .id-motionPreviewItem", r.CollectionBinder, {
                    instanceBinder: s.VehicleTuningShopPreviewItemBinder,
                    keyProperty: "type"
                })
            }, t.prototype.onAddedToScene = function() {
                this.updateCurrentItems()
            }, t.prototype.updateCurrentItems = function() {
                var e = this.tuningShopService.getCurrentTuningItemProps();
                this.currentItemList.applyCollection(e)
            }, t.prototype.update = function(e) {
                var t = e.tuningShopState,
                    i = !_.isUndefined(t.purchased),
                    r = o.isTrialVehicle(o.getRecentVehicle()),
                    a = _.map(this.tuningShopService.getPreviewTuningItemProps(t.selectedProducts), function(e) {
                        return n.__assign({}, e, {
                            mouseDisabled: i,
                            pruchaseDisabled: r
                        })
                    });
                this.previewItemList.applyCollection(a), this.updateCurrentItems()
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("tuningShopService")], c.prototype, "tuningShopService", void 0), t.VehicleTuningShopItemListBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(4),
        s = i(7),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.translate(".CurrentButtons .id-removeButton", "TUNING_SHOP_ITEMS_INSTALL_UNINSTALL"), this.on(".CurrentButtons .id-removeButton", o.MouseEventEx.CLICK, this.onUninstall.bind(this));
                var e = this.getFace(".id-price"),
                    t = e.$(".id-textField"),
                    i = e.$(".id-monetaryUnitIcon");
                e.hasSize = !0, i.hasSize = !0, e.htmlElement.insertBefore(t.htmlElement, i.htmlElement), this.translate(".id-priceTitle", "TUNING_SHOP_PREVIOUS_VIEW_REMOVE_DECAL_COST")
            }, t.prototype.onUninstall = function() {
                var e, t, i = this,
                    n = this.props.code,
                    r = this.tuningShopService.getTuningItemByCode(n),
                    o = this.shopService.getMyMoney("SP"),
                    a = o >= r.removalSpCost,
                    c = a ? "ConfirmCancelPopup" : "ConfirmPopup";
                a ? (e = this.$filter("translate")("TUNING_SHOP_POPUP_CONFIRMUNAPPLIED_DESC"), t = this.$filter("template")({
                    count: r.removalSpCost
                }, "TUNING_SHOP_POPUP_CONFIRMUNAPPLIED_TEXT1")) : (e = this.$filter("translate")("TUNING_SHOP_POPUP_CONFIRMUNAPPLIED_NOTENOUGH_DESC"), t = this.$filter("template")({
                    count: r.removalSpCost - o
                }, "TUNING_SHOP_POPUP_CONFIRMUNAPPLIED_NOTENOUGH_TEXT1")), this.popupService.draw(c, {
                    title: "TUNING_SHOP_POPUP_CONFIRMUNAPPLIED_TITLE",
                    description: e + "\n" + t,
                    confirmString: "TUNING_SHOP_POPUP_CONFIRMUNAPPLIED_UNAPPLIED_BUTTON",
                    cancelString: "TUNING_SHOP_POPUP_CONFIRMUNAPPLIED_CANCEL_BUTTON",
                    confirm: function() {
                        a && (s.info("Uninstall wrap : ", n), i.tuningShopService.uninstallTuningItem(n).then(function() {
                            i.externalService.beSetVehicleWrapping(0)
                        }))
                    }
                })
            }, t.prototype.update = function(e) {
                if (this.face.enabled = 0 !== e.code, 0 !== e.code) {
                    var t = this.$filter("translate"),
                        i = this.tuningShopService.getTuningItemByCode(e.code);
                    switch ("VEHICLECOLOR" !== e.type && this.face.setCustomStyle({
                            "margin-top": "-7px"
                        }), i.subtype) {
                        case "VEHICLECOLOR":
                        case "WHEELCOLOR":
                            this.visible(".id-colorContainer", !0), this.visible(".id-tuningItemthumbnail", !1), this.hasSize(".id-colorContainer .id-solid", !0), this.hasSize(".id-colorContainer .id-secondary", !0);
                            var n = this.getFace(".id-colorContainer .id-solid");
                            n && (i.rgb ? n.setCustomStyle({
                                "background-color": i.rgb.solid
                            }) : n.visible = !1);
                            var r = this.getFace(".id-colorContainer .id-secondary");
                            r && (i.rgb ? r.setCustomStyle({
                                "background-color": i.rgb.secondary
                            }) : r.visible = !1), this.visible(".id-priceTitle", !1);
                            break;
                        case "WRAP":
                            this.visible(".id-colorContainer", !1), this.visible(".id-tuningItemthumbnail", !0), this.drawExternalImage(".id-tuningItemthumbnail", this.$filter("cdn_wrap")(e.code)), this.visible(".id-priceTitle", !0)
                    }
                    this.translate(".id-title", this.tuningShopService.getLocalKeyByCode(e.code)), this.bindTextAll(".id-description", this.$filter("tuningItemDesc")(e.code)), this.visible(".id-count", e.count > 0), this.template(".id-count", "TUNING_SHOP_ITEMS_HAVEAMOUNT", {
                        number: e.count
                    }), this.visible(".id-price", i.removalSpCost > 0), i.removalSpCost > 0 && (this.bindText(".id-price", a.default.toMoney(i.removalSpCost)), this.gotoAndStop(".id-monetaryUnitIcon", "sp"), this.visible(".id-shortage", this.shopService.checkEnoughMoney("SP", i.removalSpCost))), this.visible(".id-price .id-line", !1), this.template(".CurrentButtons .id-description .id-textField", "TUNING_SHOP_ITEMS_CANNOT_UNINSTALL", {
                        type: t(this.tuningShopService.getLocalKeyByCode(e.code))
                    }), this.gotoAndPlay(".CurrentButtons", "WRAP" === e.type ? "remove" : "default")
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("tuningShopService")], c.prototype, "tuningShopService", void 0), n.__decorate([r.autowired("shopService")], c.prototype, "shopService", void 0), n.__decorate([r.autowired("popupService")], c.prototype, "popupService", void 0), n.__decorate([r.autowired("externalService")], c.prototype, "externalService", void 0), t.VehicleTuningShopCurrentItemBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(92),
        s = i(81),
        c = i(4),
        d = i(7),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.currentFace = this.getFace(".id-current"), this.nextFace = this.getFace(".id-next"), this.nextFace.mouseEventEnabled = !1, this.face.setCustomStyle({
                    display: "inline-block",
                    position: "relative"
                }), this.hasSize(this.face, !0), this.translateAll(".id-previewButtons .id-deleteButton", "TUNING_SHOP_REMOVE_ITEM_BUTTON"), this.translateAll(".id-previewButtons .id-equipButton", "TUNING_SHOP_ITEMS_INSTALL_INSTALL"), this.translateAll(".id-previewButtons .id-buyButton", "TUNING_SHOP_PURCHASE_BUTTON"), this.translateAll(".id-expVehicleAlert .id-textField", "EXPVEHICLE_TUNINGSHOP_PURCHASE_FORBID"), this.face.$$(".id-price").forEach(function(e) {
                    e.$(".id-line").visible = !1;
                    var t = e.$(".id-textField"),
                        i = e.$(".id-monetaryUnitIcon");
                    e.hasSize = !0, i.hasSize = !0, e.htmlElement.insertBefore(t.htmlElement, i.htmlElement)
                }), this.registerListeners(), this.gotoAndPlay(this.face, "default"), this.tuningShopService.addListener("reset-preview-items", this.handleResetPreviewItems.bind(this)), this.tuningShopService.addListener("reset-preview-item", this.handleResetPreviewItem.bind(this))
            }, t.prototype.handleResetPreviewItems = function() {
                this.gotoAndPlay(this.face, "default"), this.enableButton(this.currentFace, !1)
            }, t.prototype.handleResetPreviewItem = function() {
                this.enableButton(".id-current .id-previewButtons .id-buyButton", !0)
            }, t.prototype.onDestroy = function() {
                e.prototype.onDestroy.call(this), this.tuningShopService.removeListener("reset-preview-items", this.handleResetPreviewItems), this.tuningShopService.removeListener("reset-preview-item", this.handleResetPreviewItem)
            }, t.prototype.onPurchase = function() {
                this.currentProps.code && (this.applyingCode = this.currentProps.code, this.enableButton(".id-current .id-previewButtons .id-buyButton", !1), this.stateService.go("root.menu.VehicleTuningShop.Purchase", {
                    productCode: this.currentProps.pcode,
                    storeName: "tuningShop"
                }))
            }, t.prototype.registerListeners = function() {
                var e = this;
                this.getFace(".id-current .id-previewButtons .id-buyButton").on(o.MouseEventEx.CLICK, function() {
                    return e.onPurchase()
                }), this.getFace(".id-current .id-previewButtons .id-deleteButton").on(o.MouseEventEx.CLICK, function() {
                    return e.onRemove()
                }), this.getFace(".id-current .id-previewButtons .id-equipButton").on(o.MouseEventEx.CLICK, function() {
                    return e.onEquip()
                })
            }, t.prototype.onRemove = function() {
                this.dispatch(a.deselectProduct(this.currentProps.type, "delete"))
            }, t.prototype.onEquip = function() {
                var e = this;
                if (this.currentProps.code) {
                    this.applyingCode = this.currentProps.code;
                    var t = this.tuningShopService.getInventoryItemIdByCode(this.currentProps.code);
                    this.tuningShopService.useTuningInventoryItem(t).then(function() {
                        return e.dispatch(a.deselectProduct(e.currentProps.type, "apply"))
                    }).catch(function(e) {
                        d.error("--tuning> inventory item using error.")
                    })
                }
            }, t.prototype.bindData = function(e, t) {
                var i = this.tuningShopService.getTuningItemByCode(e.code);
                switch (i.subtype) {
                    case "VEHICLECOLOR":
                    case "WHEELCOLOR":
                        this.visible(t.$(".id-colorContainer"), !0), this.visible(t.$(".id-tuningItemthumbnail"), !1), this.hasSize(t.$(".id-colorContainer .id-solid"), !0), this.hasSize(t.$(".id-colorContainer .id-secondary"), !0);
                        var n = t.$(".id-colorContainer .id-solid");
                        n && (i.rgb ? n.setCustomStyle({
                            "background-color": i.rgb.solid
                        }) : n.visible = !1);
                        var r = t.$(".id-colorContainer .id-secondary");
                        r && (i.rgb ? r.setCustomStyle({
                            "background-color": i.rgb.secondary
                        }) : r.visible = !1);
                        break;
                    case "WRAP":
                        this.visible(t.$(".id-colorContainer"), !1), this.visible(t.$(".id-tuningItemthumbnail"), !0), this.drawExternalImage(t.$(".id-tuningItemthumbnail"), this.$filter("cdn_wrap")(e.code))
                }
                this.translate(t.$(".id-title"), this.tuningShopService.getLocalKeyByCode(e.code)), this.bindTextAll(".id-description", this.$filter("tuningItemDesc")(e.code)), this.visible(t.$(".id-count"), e.count > 0), this.template(t.$(".id-count"), "TUNING_SHOP_ITEMS_HAVEAMOUNT", {
                    number: e.count
                });
                var o = c.default.getPriceIconLabel(e.currency);
                this.bindText(t.$(".id-price"), c.default.toMoney(e.price)), this.gotoAndStop(t.$(".id-price .id-monetaryUnitIcon"), o);
                var a = !this.shopService.checkEnoughMoney(e.currency, e.price);
                a && (this.translate(t.$(".id-shortage .id-shortageText"), "TUNING_SHOP_ITEMS_NOTENOUGH_" + o.toUpperCase()), this.gotoAndPlay(t.$(".id-shortage"), "loopAnimation")), this.visible(t.$(".id-shortage"), 0 === e.count && a), this.gotoAndPlay(t.$(".id-previewButtons"), e.count > 0 ? "equip" : "buy"), this.drawStrikeThrough(t, e.count > 0)
            }, t.prototype.drawStrikeThrough = function(e, t) {
                t ? $(e.$(".id-price .id-textField").htmlElement).addClass("strike") : $(e.$(".id-price .id-textField").htmlElement).removeClass("strike")
            }, t.prototype.update = function(e) {
                var t = this;
                if ("VEHICLECOLOR" !== e.type && this.face.setCustomStyle({
                        "margin-top": "-7px"
                    }), !this.currentProps || !s.shallowEqual(this.currentProps, e)) {
                    if (this.visibleAll(this.currentFace.$(".id-previewButtons"), !e.pruchaseDisabled), this.visibleAll(this.currentFace.$(".id-expVehicleAlert"), !!e.pruchaseDisabled), "apply" === e.action && this.applyingCode !== this.currentProps.code) return this.dispatch(a.selectProduct(this.currentProps.type, this.currentProps.code)), void this.handleResetPreviewItem();
                    var i = !!this.currentProps && !!this.currentProps.code,
                        n = !!e.code,
                        r = this.face.currentLabel;
                    if (i && n) {
                        if (e.code === this.currentProps.code) return;
                        r = "change", this.enableButton(this.currentFace, !0), this.enableButton(this.nextFace, !0), this.bindData(this.currentProps, this.currentFace), this.bindData(e, this.nextFace), this.once(this.face, "reset", function() {
                            t.bindData(e, t.currentFace), t.gotoAndPlay(t.face, "default")
                        })
                    } else !i && n ? (this.enableButton(this.currentFace, !0), this.bindData(e, this.currentFace), r = "in") : i && !n ? (r = e.action, this.once(this.face, "stop", function() {
                        var e = t.face.timeline.currentLabel();
                        _.includes(["delete", "default", "apply"], e) && (t.enableButton(t.currentFace, !1), "apply" === e && (t.handleResetPreviewItem(), t.gotoAndPlay(t.face, "default"), t.dispatch(a.updateExterior())))
                    })) : this.enableButton(this.currentFace, !1);
                    this.gotoAndPlay(this.face, r || "default"), this.currentProps = e, "apply" !== r && this.dispatch(a.updateExterior())
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([r.autowired("stateService")], l.prototype, "stateService", void 0), n.__decorate([r.autowired("tuningShopService")], l.prototype, "tuningShopService", void 0), n.__decorate([r.autowired("shopService")], l.prototype, "shopService", void 0), t.VehicleTuningShopPreviewItemBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(2),
        s = i(91),
        c = i(8),
        d = i(29),
        l = i(53),
        u = i(40),
        p = {
            onEvent: function() {
                return !1
            }
        },
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.isUIVisible = !0, this.translate(".id-backButton", "TUNING_SHOP_FREECAM_GO_BACK"), this.translate(".id-inputkeyContainer .id-keyboard1 .id-keyTitle", "TUNING_SHOP_FREECAM_SCREENSHOT"), this.bindText(".id-inputkeyContainer .id-keyboard1 .id-keyValue", "Print Screen"), this.translate(".id-inputkeyContainer .id-keyboard2 .id-keyTitle", "TUNING_SHOP_FREECAM_UI_ON_OFF"), this.bindText(".id-inputkeyContainer .id-keyboard2 .id-keyValue", "F12"), this.translate(".id-notificationScreenshot .id-title", "TUNING_SHOP_FREECAM_NOTICE_TITLE"), this.translate(".id-notificationScreenshot .id-description", "TUNING_SHOP_FREECAM_NOTICE_DESC"), this.keydownHandler = function(t) {
                    switch (t.keyCode) {
                        case d.KeyboardMap.getKeyCode("ESCAPE"):
                            e.exit();
                            break;
                        case d.KeyboardMap.getKeyCode("F12"):
                            e.isUIVisible = !e.isUIVisible, e.changeVisibilityUI(e.isUIVisible)
                    }
                }, this.keyupHander = function(t) {
                    switch (t.keyCode) {
                        case d.KeyboardMap.getKeyCode("PrnScn"):
                            e.visible(".id-notificationScreenshot", !0), e.gotoAndPlay(".id-notificationScreenshot", "in")
                    }
                }, this.initFreeCamMouseEvent()
            }, t.prototype.registerKeydownHandler = function() {
                this.unregisterKeydownHandler(), $(window).on("keydown", this.keydownHandler), $(window).on("keyup", this.keyupHander)
            }, t.prototype.unregisterKeydownHandler = function() {
                $(window).off("keydown", this.keydownHandler), $(window).off("keyup", this.keyupHander)
            }, t.prototype.initFreeCamMouseEvent = function() {
                var e = this;
                this.on(".id-freecamButton", a.MouseEventEx.MOUSE_OVER, function() {
                    e.externalService.beSetMouseEnabled(!0, 3)
                }), this.on(".id-freecamButton", a.MouseEventEx.MOUSE_OUT, function() {
                    "freeCam_in" !== e.face.timeline.currentLabel() && e.externalService.beSetMouseEnabled(!0)
                }), this.on(".id-freecamButton", a.MouseEventEx.CLICK, function() {
                    e.registerKeydownHandler(), e.dispatch(l.enableSystemTrayAll(!1)), e.gotoAndPlay(e.face, "freeCam_in"), e.face.emit("freeCam_in"), e.dispatch(u.closeMainChatWindow()), e.globalKeyService.pushListener(d.KeyboardMap.getKeyCode("ENTER"), p), e.externalService.beSetKeyboardEnabled(!1), e.externalService.beTuningShopSetCameraMode(s.TuningShopCameraMode.CAMERA_ORBIT)
                }), this.onClickSafe(".id-backButton", this.exit.bind(this))
            }, t.prototype.changeVisibilityUI = function(e) {
                this.visible(".id-inputkeyContainer", e), this.visible(".id-backButton", e), this.visible(".id-tuningInfo", e)
            }, t.prototype.exit = function() {
                var e = this;
                return new r(function(t) {
                    e.unregisterKeydownHandler(), e.dispatch(l.enableSystemTrayAll(!0)), e.isUIVisible = !0, e.changeVisibilityUI(e.isUIVisible), e.visible(".id-notificationScreenshot", !1), e.gotoAndPlay(e.face, "freeCam_out"), e.tuningShopService.adjustCategoryCamera(e.props.tuningShopState.selectedTab), e.face.once(c.EventEx.STOP, function() {
                        e.globalKeyService.popListener(d.KeyboardMap.getKeyCode("ENTER"), p), e.externalService.beSetKeyboardEnabled(!0), e.face.emit("freeCam_out"), t()
                    })
                })
            }, t.prototype.onDetach = function() {
                this.unregisterKeydownHandler(), this.dispatch(l.enableSystemTrayAll(!0))
            }, t.prototype.lockFreeCam = function(e) {
                this.enableButton(".id-freecamButton", !e)
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("externalService")], h.prototype, "externalService", void 0), n.__decorate([o.autowired("tuningShopService")], h.prototype, "tuningShopService", void 0), n.__decorate([o.autowired("globalKeyService")], h.prototype, "globalKeyService", void 0), t.VehicleTuningShopFreecamBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(92),
        o = i(63),
        a = i(16),
        s = i(30),
        c = i(75),
        d = i(12),
        l = i(2),
        u = i(193),
        p = i(165),
        h = i(124),
        f = i(3),
        v = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-changeVehicleLabel", "LOBBY_CHANGEVEHICLE"), this.translate(".VehicleSelectContainer .id-changeButton", "LOBBY_CHANGEVEHICLE"), this.translate(".VehicleSelectContainer .id-exitButton", "FRIENDLYMATCH_WAITINGROOM_BUTTON_EXIT"), this.on(".VehicleSelectContainer .id-changeButton", l.MouseEventEx.CLICK, this.onChangeVehicle.bind(this)), this.on(".VehicleSelectContainer .id-exitButton", l.MouseEventEx.CLICK, this.onCancel.bind(this)), this.vehicleInfoBinder = this.addChildBinder(".id-vehicleDetail", u.VehicleInfoBinder), this.vehicleListBinder = this.addChildBinder(".VehicleSelectContainer", p.VehicleListBinder, {
                    itemCountPerPage: 12,
                    rowSize: 6
                }), this.filterBinder = this.addChildBinder(".VehicleSelectContainer", h.VehicleListFilterBinder), this.filterBinder.setManufacturerDropUp(!1), this.filterBinder.setClassDropUp(!1), this.filterBinder.setSorterDropUp(!1), this.addManagedListener(this.filterBinder.face, "filterSortChange", function(t) {
                    var i = e.applyFilter(t);
                    e.vehicleListBinder.setProps({
                        vehicles: i
                    })
                }), this.addManagedListener(this.vehicleListBinder.face, "selected", function(t) {
                    e.selected = t.id, e.initialUnspawned || e.selected === e.initialSelected || (e.initialUnspawned = !0), e.vehicleInfoBinder.setProps({
                        vehicle: t
                    }), e.externalService.beSelectVehicle(t)
                })
            }, t.prototype.update = function(e) {
                this.initialSelected = this.selected = e.recentVid, this.initialUnspawned = !1, this.bindText(".VehicleSelectContainer .id-retentionTextfield", "" + d.getOwnTrialVehicles().length), this.vehicleListBinder.setProps(n.__assign({}, e, {
                    vehicles: this.applyFilter(c.defaultSortKeys),
                    selected: this.selected
                })), this.filterBinder.setProps(n.__assign({}, e, {
                    filterState: c.defaultSortKeys,
                    useVehicleTypes: 3
                })), this.hideWrapping = f.store.getState().tuningShop.hideWrapping || !1, this.hideWrapping && this.dispatch(r.hideWrapping(!1));
                var t = d.getVehicleInfo(this.initialSelected);
                this.externalService.beSelectVehicle(t)
            }, t.prototype.applyFilter = function(e) {
                var t = d.getOwnTrialVehicles();
                if (e) {
                    var i = e.manufacturerCode,
                        n = e.clazz,
                        r = e.sortKey;
                    i && (t = _.filter(t, {
                        manufacturerCode: i
                    })), n && "ALL" !== n && (t = _.filter(t, (o = {}, o.clazz = n, o))), this.$util.applySorter(t, r || ["default"])
                }
                return t;
                var o
            }, t.prototype.preventClick = function() {
                var e = this;
                $(this.face.htmlElement).addClass("prevent-click"), this.face.once("stop", function() {
                    $(e.face.htmlElement).removeClass("prevent-click")
                })
            }, t.prototype.onChangeVehicle = function() {
                var e = this;
                if (this.preventClick(), this.selected === this.initialSelected) return this.closePopup(), void(this.initialUnspawned && this.dispatch(r.updateExterior(!0)));
                var t = d.getVehicleInfo(this.initialSelected),
                    i = d.getVehicleInfo(this.selected);
                if (this.tuningShopService.isEmptySelectedItems() || t.code === i.code) return void this.confirmChangeVehicle(!1);
                $(this.face.htmlElement).removeClass("prevent-click"), this.popupService.draw("ConfirmCancelPopup", {
                    title: "TUNING_SHOP_CAR_EXCHANGE_POPUP_ALERT_BUTTON",
                    description: "TUNING_SHOP_CAR_EXCHANGE_POPUP_ALERT_DESC",
                    confirmString: "TUNING_SHOP_CAR_EXCHANGE_BUTTON",
                    cancelString: "TUNING_SHOP_CAR_EXCHANGE_POPUP_CANCEL_BUTTON",
                    confirm: function() {
                        e.confirmChangeVehicle(!0)
                    }
                })
            }, t.prototype.confirmChangeVehicle = function(e) {
                var t = this,
                    i = d.getVehicleInfo(this.selected);
                this.playerService.changeRecentVehicle(i.id).then(function() {
                    t.closePopup(), e && t.dispatch(r.resetSelected()), t.dispatch(r.updateExterior(!0))
                })
            }, t.prototype.onCancel = function() {
                if (this.preventClick(), this.selected === this.initialSelected) return this.closePopup(), void this.dispatch(r.updateExterior(!0));
                var e = this.tuningShopService.getPreviewPaint(),
                    t = n.__assign({}, d.getVehicleInfo(this.initialSelected), {
                        paint: n.__assign({}, e, {
                            wrapCode: this.hideWrapping ? 0 : e.wrapCode
                        })
                    });
                this.externalService.beSelectVehicle(t), this.vehicleInfoBinder.setProps({
                    vehicle: t
                }), this.closePopup()
            }, t.prototype.closePopup = function() {
                this.gotoAndPlay(this.face, "changeVehicle_out", !0), this.selected = void 0, this.playerService.markVehiclesAsChecked(), this.tuningShopService.adjustCategoryCamera(this.props.selectedTab), this.dispatch(o.removeFilter()), this.dispatch(r.hideWrapping(this.hideWrapping)), this.face.emit("vehicle_change_out")
            }, t
        }(s.Binder);
    n.__decorate([a.autowired("externalService")], v.prototype, "externalService", void 0), n.__decorate([a.autowired("playerService")], v.prototype, "playerService", void 0), n.__decorate([a.autowired("$util")], v.prototype, "$util", void 0), n.__decorate([a.autowired("popupService")], v.prototype, "popupService", void 0), n.__decorate([a.autowired("tuningShopService")], v.prototype, "tuningShopService", void 0), t.VehicleTuningShopChangeVehicleBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(8),
        a = i(1),
        s = i(1496),
        c = i(92),
        d = i(2),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = this.$filter("translate");
                this.filterDropdown = this.convertFace(".id-filterAndSort .id-filterDropdown"), this.sorterDropdown = this.convertFace(".id-filterAndSort .id-sortDropdown"), this.filterDropdown.items = s.TuningShopFilter.map(function(e) {
                    return n.__assign({}, e, {
                        text: t(e.text)
                    })
                }), this.sorterDropdown.items = s.TuningShopSorter.map(function(e) {
                    return n.__assign({}, e, {
                        text: t(e.text)
                    })
                }), this.filterDropdown.isDropUp = !0, this.sorterDropdown.isDropUp = !0, this.filterDropdown.on(o.EventEx.CHANGE, function() {
                    e.ownCheckBox.selected = "HAVE" === e.filterDropdown.selectedItem.type, e.applyChanges()
                }), this.sorterDropdown.on(o.EventEx.CHANGE, this.applyChanges.bind(this)), this.translate(".id-myItemsCheckBox .id-checkboxName", "TUNING_SHOP_SHOWONLYOWN"), this.ownCheckBox = this.getFace(".id-myItemsCheckBox"), this.ownCheckBox.on(d.MouseEventEx.CLICK, function() {
                    e.ownCheckBox.selected = !e.ownCheckBox.selected, e.onOwnCheckboxChanged()
                })
            }, t.prototype.update = function(e) {
                e.filterState && (this.filterDropdown.selectedIndex = _.findIndex(this.filterDropdown.items, function(t) {
                    return t.type === e.filterState.filterType
                }), this.sorterDropdown.selectedIndex = _.findIndex(this.sorterDropdown.items, function(t) {
                    return t.sortField === e.filterState.sortField && t.sortOrder === e.filterState.sortOrder
                }))
            }, t.prototype.applyChanges = function() {
                this.dispatch(c.changeFilter({
                    filterType: this.filterDropdown.selectedItem.type,
                    sortField: this.sorterDropdown.selectedItem.sortField,
                    sortOrder: this.sorterDropdown.selectedItem.sortOrder
                }))
            }, t.prototype.onOwnCheckboxChanged = function() {
                var e = this;
                this.filterDropdown.selectedIndex = _.findIndex(this.filterDropdown.items, function(t) {
                    return t.type === (e.ownCheckBox.selected ? "HAVE" : "ALL")
                }), this.applyChanges()
            }, t.prototype.onExit = function() {
                this.ownCheckBox.selected = !1, this.onOwnCheckboxChanged()
            }, t
        }(r.Binder);
    n.__decorate([a.autowired("$filter")], l.prototype, "$filter", void 0), t.TuningFilterBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.TuningShopFilter = [{
        type: "ALL",
        text: "TUNING_SHOP_ITEM_FILTER_ALLITEM"
    }, {
        type: "HAVE",
        text: "TUNING_SHOP_ITEM_FILTER_IHAVEITEM"
    }, {
        type: "SP",
        text: "TUNING_SHOP_ITEM_FILTER_SPITEM"
    }, {
        type: "CASH",
        text: "TUNING_SHOP_ITEM_FILTER_CASHITEM"
    }, {
        type: "MILE",
        text: "TUNING_SHOP_ITEM_FILTER_MILEITEM"
    }], t.TuningShopSorter = [{
        sortField: "order",
        sortOrder: 1,
        text: "TUNING_SHOP_ITEM_SORT_BESTSALEITEM"
    }, {
        sortField: "isNewProduct",
        sortOrder: -1,
        text: "TUNING_SHOP_ITEM_SORT_MOSTRECENTITEM"
    }, {
        sortField: "isPromotion",
        sortOrder: -1,
        text: "TUNING_SHOP_ITEM_SORT_LIMITEDTIMEITEM"
    }, {
        sortField: "name",
        sortOrder: 1,
        text: "TUNING_SHOP_CATEGORY_SORT_NAME_ASCE"
    }, {
        sortField: "name",
        sortOrder: -1,
        text: "TUNING_SHOP_CATEGORY_SORT_NAME_DESC"
    }]
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1498);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/purchase/{productCode}", 90, {
            productCode: "",
            storeName: "tuningShop"
        }).dialog({
            stages: {
                "shop-popup": r.TuningProductPurchaseBinder
            }
        });
        e.state("root.menu.VehicleTuningShop.Purchase", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(321),
        o = i(1),
        a = i(1499),
        s = i(4),
        c = i(27),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translateAll(".id-dropDownPriceMenu .id-subTitleLabel", "TUNING_SHOP_POPUP_PURCHASE_BUNCH")
            }, t.prototype.setItemCard = function() {
                this.itemCardBinder = this.addChildBinder(this.targetContainer.$(".id-itemCard"), c.ItemCardBinder);
                var e = _.minBy(this.targetBunches, function(e) {
                        return e.count
                    }),
                    t = this.product.rewards[0].code;
                this.itemCardBinder.setProps({
                    info: {
                        name: this.product.name,
                        type: "TUNING",
                        code: t,
                        price: e.price,
                        currency: e.currency,
                        count: 1,
                        rank: this.product.rank,
                        fallbackImg: void 0
                    },
                    mouseDisabled: !0
                })
            }, t.prototype.setProduct = function() {
                this.product = this.tuningShopService.getProductByProductCode(parseInt(this.$stateParams.productCode, 10))
            }, t.prototype.setNextFlow = function() {
                this.nextBinder = this.addChildBinder(this.targetContainer, a.TuningPurchaseNextBinder, {
                    exit: this.exit.bind(this)
                })
            }, t.prototype.getDescAreaValues = function() {
                return ['<div class="desc">' + this.product.desc + "</div>"]
            }, t.prototype.setBunchesDropDown = function() {
                var e = this;
                this.targetBunches = _.filter(this.product.bunches, function(t) {
                    return t.currency === e.currentCurrency
                }), this.bunchesDropDown.items = this.targetBunches.map(function(e, t) {
                    return {
                        text: "" + s.default.toMoney(e.price),
                        value: t,
                        bunch: e
                    }
                }), this.enableButton(this.bunchesDropDown, this.product.bunches.length > 1)
            }, t.prototype.exit = function() {
                e.prototype.exit.call(this), this.tuningShopService.emit("reset-preview-item")
            }, t
        }(r.ProductPurchaseBinder);
    n.__decorate([o.autowired("tuningShopService")], d.prototype, "tuningShopService", void 0), t.TuningProductPurchaseBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(322),
        a = i(1),
        s = i(92),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.checkout = function() {
                var e = this;
                return "NXCASH" === this.currentBunch.currency ? new r(function(t) {
                    e.popupService.draw("ConfirmCancelPopup", {
                        title: "TUNING_SHOP_POPUP_CONFIRMPURCHASE_CASH_TITLE",
                        description: "TUNING_SHOP_POPUP_CONFIRMPURCHASE_CASH_DESC",
                        confirm: function() {
                            e.shopService.purchaseProduct(e.product.code, e.currentBunch).then(function(t) {
                                return e.shopService.purchaseComplete(t.orderNo)
                            }).then(t)
                        },
                        cancel: function() {
                            e.enableBuyingButton(), e.dispatch(s.resetPurchased()), t()
                        }
                    })
                }) : this.shopService.purchaseProduct(this.product.code, this.currentBunch)
            }, t.prototype.update = function(t) {
                e.prototype.update.call(this, t), this.enableButton(".id-giftButton", !1)
            }, t.prototype.buy = function() {
                var e = this,
                    t = this.product.rewards[0].code,
                    i = this.tuningShopService.getTuningItemByCode(t),
                    n = this.shopService.getMyMoney(this.currentCurrency) - this.currentBunch.price;
                if (n < 0) return this.openInSufficientPopup(n);
                this.stateService.go("^"), this.dispatch(s.purchaseProduct(this.product.rewards[0].code)), this.popupService.draw("BuyShopItemConfirmPopup", {
                    product: this.product,
                    bunches: this.targetBunches,
                    bunch: this.currentBunch,
                    possession: this.shopService.getMyMoney(this.currentCurrency),
                    tuningItem: i,
                    confirm: function() {
                        e.checkout().then(function() {
                            return e.shopService.fetchCash()
                        }).catch(function(t) {
                            e.onErrorPurchase(t), e.enableBuyingButton(), e.dispatch(s.resetPurchased())
                        })
                    },
                    cancel: function() {
                        e.enableBuyingButton(), e.dispatch(s.resetPurchased())
                    }
                })
            }, t.prototype.enableBuyingButton = function() {
                this.tuningShopService.emit("reset-preview-item")
            }, t
        }(o.PurchaseNextBinder);
    n.__decorate([a.autowired("tuningShopService")], c.prototype, "tuningShopService", void 0), t.TuningPurchaseNextBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(1501), i(1506), i(1512)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1502);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/clanInfo", 48).container({
            stages: {
                "clan-system-my-clan": r.ClanInfoBinder
            }
        });
        e.state("root.menu.MyClan", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1503),
        a = i(1504),
        s = i(1505),
        c = i(325),
        d = i(212),
        l = i(3),
        u = i(2),
        p = i(125),
        h = i(4),
        f = i(67),
        v = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.addChildBinder(".id-clanDetailInfoContainer", o.MyClanDetailBinder), this.addChildBinder(".id-topInfoContainer", s.ClanNoticeBinder), this.sortTabBinder = this.addChildBinder(".id-columnTitleContainer", c.ClanSortTabBinder, {
                    tabInfos: [{
                        title: "CLAN_MYCLAN_COLUMN_PLAYERLEVEL",
                        sort: function(e) {
                            return f(function(e) {
                                return e.playerInfo.level
                            }, e)
                        }
                    }, {
                        title: "CLAN_MYCLAN_COLUMN_PLAYERNAME",
                        sort: function(e) {
                            return f(function(e, t) {
                                return e.playerInfo.name.localeCompare(t.playerInfo.name)
                            }, e)
                        }
                    }, {
                        title: "CLAN_MYCLAN_COLUMN_GRADE",
                        sort: function(e) {
                            return f(function(e) {
                                return -e.role
                            }, e)
                        }
                    }, {
                        title: "CLAN_MYCLAN_COLUMN_RECENTCAR",
                        sort: function(t) {
                            return f(function(t, i) {
                                var n = e.vehicleDataService.getVehicleData(t.playerInfo.vCode),
                                    r = e.vehicleDataService.getVehicleData(i.playerInfo.vCode);
                                return h.default.compareCarClass(n.clazz, r.clazz)
                            }, t)
                        }
                    }, {
                        title: "CLAN_MYCLAN_COLUMN_OVR",
                        sort: function(e) {
                            return f(function(e) {
                                return e.playerInfo.ovr
                            }, e)
                        }
                    }, {
                        title: "CLAN_MYCLAN_COLUMN_ ACCUMULATEDDATE",
                        sort: function(e) {
                            return f(function(e, t) {
                                return h.default.compareDate(e.joinDate, t.joinDate)
                            }, -1 === e ? 1 : -1)
                        }
                    }, {
                        title: "CLAN_MYCLAN_COLUMN_LASTVISITDATE",
                        sort: function(t) {
                            return f(function(e, t) {
                                var i = e.playerInfo.online,
                                    n = t.playerInfo.online;
                                return i && n ? 0 : i ? 1 : n ? -1 : e.playerInfo.loginDate && t.playerInfo.loginDate ? h.default.compareDate(e.playerInfo.loginDate, t.playerInfo.loginDate) : 0
                            }, t).thenBy(function(e) {
                                return e.role
                            }, 1).thenBy(function(e) {
                                return e.playerInfo.level
                            }, -1).thenBy(function(e, t) {
                                return h.default.compareDate(e.joinDate, t.joinDate)
                            }, 1).thenBy(function(e, t) {
                                return e.playerInfo.name.charAt(0) === t.playerInfo.name.charAt(0) ? 0 : e.playerInfo.name.localeCompare(t.playerInfo.name)
                            }, 1).thenBy(function(t, i) {
                                var n = e.vehicleDataService.getVehicleData(t.playerInfo.vCode),
                                    r = e.vehicleDataService.getVehicleData(i.playerInfo.vCode);
                                return h.default.compareCarClass(n.clazz, r.clazz)
                            }, -1).thenBy(function(e) {
                                return e.playerInfo.ovr
                            }, -1)
                        }
                    }],
                    initDescending: !0,
                    initSelectedIndex: 6,
                    sortFun: function(t, i) {
                        e.onSortList(t, i, e.reduxProps.myClanMembers)
                    }
                }), this.myClanMemberListBinder = this.addChildBinder(".id-listItemRendererContainer", a.MyClanMemberListBinder, {
                    itemBinderClass: a.MyClanMemberItemBinder,
                    sortTabBinder: this.sortTabBinder,
                    selectedItem: function(e) {},
                    itemCountPerPage: 10
                }), this.leaveClanButton = this.convertFace(".id-withdraw"), this.translate(".id-withdraw .id-buttonName", "CLAN_MYCLAN_CLANOUT"), this.leaveClanButton.on(u.MouseEventEx.CLICK, function() {
                    return e.onLeaveClanClick()
                })
            }, t.prototype.refreshMyClan = function() {
                var e = this;
                this.clanService.refreshMyClanInfo().then(function(t) {
                    return t && e.clanService.fetchMyClanMembers()
                })
            }, t.prototype.onLeaveClanClick = function() {
                var e = this;
                p.ClanPopupHelper.onConfirmLeaveClanPopup(function() {
                    var t = e.reduxProps.myClanInfo;
                    t.masterPid === l.store.getState().player.id ? p.ClanPopupHelper.onRefuseLeaveClanPopup() : e.clanService.leaveClan(t.id, e.onClanLeft.bind(e), function(t) {
                        switch (t.errCode) {
                            case d.ErrorCode.ClanMasterCanNotLeave:
                                p.ClanPopupHelper.onRefuseLeaveClanPopup()
                        }
                        e.refreshMyClan()
                    })
                })
            }, t.prototype.onClanLeft = function() {
                var e = this;
                p.ClanPopupHelper.onLeftClanPopup(function() {
                    e.stateService.go("root.menu.ClanList")
                })
            }, t.prototype.updateClanMemberList = function(e) {
                if (e && this.myClanMemberListBinder) {
                    var t = _.clone(e);
                    if (e.length < 10)
                        for (var i = e.length; i < 10; ++i) t.push({
                            disable: !0
                        });
                    this.myClanMemberListBinder.setProps({
                        items: t
                    })
                }
            }, t.prototype.onSortList = function(e, t, i) {
                if (e.sort && "function" == typeof e.sort) {
                    var n = !0 === t ? -1 : 1,
                        r = _.map(_.clone(i));
                    if (r) {
                        var o = r.sort(e.sort(n));
                        this.updateClanMemberList(o)
                    }
                }
            }, t.prototype.onAddedToScene = function() {
                this.refreshMyClan()
            }, t.prototype.update = function(e) {
                var t = this,
                    i = this.reduxProps;
                if (i.baseInfo !== e.baseInfo) {
                    var n = e.baseInfo ? e.baseInfo.expelNotification : void 0;
                    if (n && "" !== n) return void this.stateService.go("root.menu.ClanList")
                }
                if (i.myClanMembers !== e.myClanMembers && (this.updateClanMemberList(_.map(e.myClanMembers)), this.sortTabBinder.firstSort(function(i, n) {
                        t.onSortList(i, n, e.myClanMembers)
                    })), i.myClanInfo !== e.myClanInfo) {
                    var r = e.myClanInfo ? e.myClanInfo.emblem : void 0;
                    r && this.drawExternalImage(".id-clanEmblem", this.$filter("cdn_clan_emblem")(r))
                }
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.clan;
                return {
                    baseInfo: t.baseInfo,
                    myClanInfo: t.myClanInfo,
                    myClanMembers: t.members
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], v.prototype, "$filter", void 0), n.__decorate([r.autowired("clanService")], v.prototype, "clanService", void 0), n.__decorate([r.autowired("stateService")], v.prototype, "stateService", void 0), n.__decorate([r.autowired("vehicleDataService")], v.prototype, "vehicleDataService", void 0), t.ClanInfoBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(323),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.descriptionLabel = this.getFace(".id-descriptionLabel")
            }, t.prototype.update = function(t) {
                this.reduxProps.clanDetail !== t.clanDetail && e.prototype.setClanInfo.call(this, t.clanDetail) && (this.descriptionLabel.text = t.clanDetail.introduction)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    clanDetail: e.clan.myClanInfo
                }
            }, t
        }(r.ClanDetailBinder);
    t.MyClanDetailBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(324);
    t.MyClanMemberListBinder = o.ClanScrollListBinder;
    var a = i(2),
        s = i(212),
        c = i(15),
        d = i(8),
        l = i(125),
        u = i(4),
        p = i(3),
        h = i(116),
        f = i(44),
        v = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.dropDownHandlers = [], t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "button", {
                get: function() {
                    return this.face
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.positionDropDown = this.convertFace(".id-position"), this.translate(".id-position .id-buttonName", "CLAN_MYCLAN_GRADE_TITLE"), _.forEach(this.staticdataLoaderService.clanDataManager.authorities, function(t) {
                    e.positionDropDown.items.push(e.translateRoleToString(t.position)), e.dropDownHandlers.push(e.onChangePosition.bind(e, t.position))
                }), this.positionDropDown.on(d.EventEx.CHANGE, function() {
                    var t = e.positionDropDown.selectedIndex;
                    e.dropDownHandlers[t] && e.dropDownHandlers[t]()
                }), this.positionDropDown.on(d.EventEx.SELECT, function() {
                    log.debug("positionDropdown selected, ", e.positionDropDown.selected), e.face.selected = e.positionDropDown.selected
                }), this.detailButton = this.convertFace(".id-detail"), this.detailButton.visible = this.featureSet.isEnabled("PLAYERINFO"), this.detailButton.visible && this.detailButton.on(a.MouseEventEx.CLICK, function() {
                    return e.onDetailClick()
                }), this.expelButton = this.convertFace(".id-cancel"), this.expelButton.on(a.MouseEventEx.CLICK, function() {
                    return e.onExpelClick()
                })
            }, t.prototype.update = function(e) {
                if (this.gotoAndStop(".id-background", e.info.index % 2 ? "even" : "odd"), !0 === e.info.disable) return void(this.button.enabled = !1);
                this.button.enabled = !0;
                var t = e.info;
                this.playerClanInfo = t;
                var i = t.playerInfo;
                if (t && i) {
                    this.onDisplayButtonsByRole();
                    var n = this.$filter("template")({
                        value: i.level
                    }, "CLAN_PLAYERLEVEL");
                    this.bindText(".id-levelLabel", n), this.bindText(".id-playerName", i.name), this.bindText(".id-positionName", this.translateRoleToString(t.role));
                    var r = this.vehicleDataService.getVehicleData(i.vCode);
                    r && (this.bindText(".id-vehicleClass", r.clazz), this.bindText(".id-manufacturerName", this.$filter("manufacturerName")(r.manufacturerCode)), this.bindText(".id-vehicleName", this.$filter("vehicleName")(r.code))), this.bindText(".id-overallNum", i.ovr);
                    var o = Math.ceil((Date.now() - t.joinDate.valueOf()) / 864e5);
                    this.bindText(".id-dateNum", this.$filter("template")({
                        day: o > 0 ? o : 1
                    }, "CLAN_MYCLAN_ACCUMULATEDDATE"));
                    var a = i.loginDate,
                        s = u.default.yyyymmdd(a);
                    this.bindText(".id-statusLabel", i.online ? this.$filter("translate")("CLAN_MYCLAN_STATE_ONLINE") : s.year + "." + s.month + "." + s.day);
                    var c = this.getFace(".id-statusLabel .id-textField").htmlElement;
                    c.classList.remove("online-color", "offline-color"), c.classList.add(i.online ? "online-color" : "offline-color")
                }
            }, t.prototype.translateRoleToString = function(e) {
                return this.$filter("translate")(this.staticdataLoaderService.clanDataManager.authorities[e].title)
            }, t.prototype.getRoleByTitle = function(e) {
                var t = this,
                    i = -1;
                return _.forEach(this.staticdataLoaderService.clanDataManager.authorities, function(n) {
                    if (t.$filter("translate")(n.title) === e) return void(i = n.position)
                }), i
            }, t.prototype.onDisplayButtonsByRole = function() {
                var e = this,
                    t = p.store.getState().player.id === this.playerClanInfo.pid,
                    i = p.store.getState().clan.members[p.store.getState().player.id].role,
                    n = this.playerClanInfo.role,
                    r = n > i;
                this.expelButton.visible = this.staticdataLoaderService.clanDataManager.authorities[i].expel && !t && r, this.positionDropDown.visible = this.staticdataLoaderService.clanDataManager.authorities[i].changePosition && !t && r, _.forEach(this.positionDropDown.items, function(t, i) {
                    n === e.getRoleByTitle(t) && (e.positionDropDown.selectedIndex = i)
                })
            }, t.prototype.onDetailClick = function() {}, t.prototype.onChangePosition = function(e) {
                this.staticdataLoaderService.clanDataManager.authorities[e].isMaster ? l.ClanPopupHelper.onConfirmClanMasterChangePopup(this.playerClanInfo.playerInfo.name, this.doChangePosition.bind(this, e), this.cancelChangePosition.bind(this)) : this.doChangePosition(e)
            }, t.prototype.doChangePosition = function(e) {
                this.clanService.changeClanMemberPostion(this.playerClanInfo.clanId, this.playerClanInfo.pid, e, this.onChangePositionSuccess.bind(this, e), this.onChangePositionFail.bind(this))
            }, t.prototype.cancelChangePosition = function() {
                var e = this,
                    t = this.playerClanInfo.role;
                _.forEach(this.positionDropDown.items, function(i, n) {
                    t === e.getRoleByTitle(i) && (e.positionDropDown.selectedIndex = n)
                })
            }, t.prototype.onChangePositionSuccess = function(e) {
                if (log.warn("onChangePositionSuccess[" + e + "]"), this.staticdataLoaderService.clanDataManager.authorities[e].isMaster) {
                    var t = _.cloneDeep(p.store.getState().clan.members),
                        i = p.store.getState().player.id,
                        n = this.playerClanInfo.pid;
                    t[i].role = c.Clan.Role.MEMBER, t[n].role = c.Clan.Role.CAPTAIN;
                    var r = _.map(t);
                    p.store.dispatch(h.refreshClanMembers(r))
                } else {
                    var t = _.cloneDeep(p.store.getState().clan.members);
                    t[this.playerClanInfo.pid].role = e;
                    var r = _.map(t);
                    p.store.dispatch(h.refreshClanMembers(r))
                }
                this.clanService.refreshMyClanInfo()
            }, t.prototype.onChangePositionFail = function(e) {
                log.warn("onChangePositionFail"), this.handleErr(e)
            }, t.prototype.onExpelClick = function() {
                this.face.selected = !0, l.ClanPopupHelper.onConfirmClanMemberExpelPopup(this.playerClanInfo.playerInfo.name, this.onAcceptExpelMember.bind(this), this.onCancelExpelMember.bind(this))
            }, t.prototype.onAcceptExpelMember = function() {
                this.face.selected = !1, this.clanService.expelClanMember(this.playerClanInfo.clanId, this.playerClanInfo.pid, this.onExpelMemberSuccess.bind(this), this.onExpelMemberFail.bind(this))
            }, t.prototype.onCancelExpelMember = function() {
                this.face.selected = !1
            }, t.prototype.onExpelMemberSuccess = function() {
                log.warn("onExpelMemberSuccess"), l.ClanPopupHelper.onClanMemberExpelledPopup(this.playerClanInfo.playerInfo.name);
                var e = [];
                e.push(this.playerClanInfo.pid), p.store.dispatch(h.removeClanMembers(e))
            }, t.prototype.onExpelMemberFail = function(e) {
                log.warn("onExpelMemberFail"), this.handleErr(e)
            }, t.prototype.handleErr = function(e) {
                switch (e.errorCode) {
                    case s.ErrorCode.ClanNotExist:
                        this.clanService.refreshMyClanInfo(), this.stateService.go("root.menu.ClanList");
                        break;
                    default:
                        f.showClanErrorPopup(e, this.$filter, this.popupService), this.clanService.fetchMyClanMembers()
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], v.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], v.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("popupService")], v.prototype, "popupService", void 0), n.__decorate([r.autowired("clanService")], v.prototype, "clanService", void 0), n.__decorate([r.autowired("stateService")], v.prototype, "stateService", void 0), n.__decorate([r.autowired("vehicleDataService")], v.prototype, "vehicleDataService", void 0), n.__decorate([r.autowired("featureSetService")], v.prototype, "featureSet", void 0), t.MyClanMemberItemBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(1),
        a = i(2),
        s = i(3),
        c = i(29);
    ! function(e) {
        e[e.UnInitial = 0] = "UnInitial", e[e.Edit = 1] = "Edit", e[e.Release = 2] = "Release"
    }(n || (n = {}));
    var d = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.blankText = "", t._noticeText = "", t._mode = n.Release, t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            this.initNoticeTextField(), this.initEditButtonContainer()
        }, t.prototype.initNoticeTextField = function() {
            var e = this;
            this._noticeTextField = this.convertFace(".id-descriptionInput .id-textField"), this._limitTextField = this.convertFace(".id-descriptionInput .id-limitedNum"), this._limitTextField.htmlElement.setAttribute("readonly", "");
            var t = this.getFace(".id-descriptionInput").htmlElement,
                i = document.createElement("div");
            i.className = "id-numText", t.appendChild(i), this.maximumNumText = document.createElement("div"), this.maximumNumText.className = "fc-element comp-TextField clan-member-count global-font id-maximumNum", i.appendChild(this.maximumNumText), this.currentNumText = document.createElement("div"), this.currentNumText.className = "fc-element comp-TextField clan-member-count global-font id-currentNum", i.appendChild(this.currentNumText), this.maxLength = this.staticdataLoaderService.clanDataManager.getConfig("CLAN_NOTICE_MAX_LENGTH"), this.maximumNumText.innerText = "/ " + this.maxLength, this.noticeTextFieldHtml.setAttribute("maxlength", this.maxLength), this.noticeTextFieldHtml.oninput = function(t) {
                return e.onNoticeInput(t)
            }, this.noticeTextFieldHtml.onkeypress = function(t) {
                t.keyCode === c.KeyboardMap.getKeyCode("ENTER") && (t.preventDefault(), e.onConfirm(void 0))
            }
        }, t.prototype.initEditButtonContainer = function() {
            this.editButtonContainer = this.getFace(".id-editButtonContainer"), this.editButtonContainer.getChildByName("edit").on(a.MouseEventEx.CLICK, this.onEdit.bind(this)), this.conFirmButton = this.convertFace(this.editButtonContainer.getChildByName("confirm")), this.conFirmButton.on(a.MouseEventEx.CLICK, this.onConfirm.bind(this)), this.editButtonContainer.getChildByName("cancel").on(a.MouseEventEx.CLICK, this.onCancel.bind(this)), this.mode = n.UnInitial
        }, t.prototype.onCancel = function(e) {
            this._noticeTextField.text = this._noticeText, this.editButtonContainer.gotoAndStop("default"), this.mode = n.Release
        }, t.prototype.onEdit = function(e) {
            this.editButtonContainer.gotoAndStop("release"), this.mode = n.Edit
        }, t.prototype.onConfirm = function(e) {
            var t = this;
            this.conFirmButton.enabled = !1;
            var i = s.store.getState().clan.myClanInfo.id;
            this.clanService.changeNotice(i, this._noticeTextField.text, function() {
                t.gotoAndPlay(t.editButtonContainer, "default"), t.mode = n.Release, t.conFirmButton.enabled = !0
            }, function() {
                t._noticeTextField.text = t._noticeText, t.conFirmButton.enabled = !0
            })
        }, Object.defineProperty(t.prototype, "limitTextLength", {
            set: function(e) {
                this.currentNumText.innerText = "" + e
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "noticeTextFieldHtml", {
            get: function() {
                return this._noticeTextField.htmlElement
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.onNoticeInput = function(e) {
            this.onNoticeTextChanged()
        }, t.prototype.onNoticeTextChanged = function() {
            this.limitTextLength = this._noticeTextField.text.length
        }, Object.defineProperty(t.prototype, "blankStyle", {
            get: function() {
                return ["clan-notice-blank", "clan-readonly-area"]
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "releaseStyle", {
            get: function() {
                return ["clan-notice-release", "clan-readonly-area"]
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "editStyle", {
            get: function() {
                return ["clan-notice-edit", "clan-writeable-area"]
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "allStyles", {
            get: function() {
                return ["clan-writeable-area", "clan-readonly-area", "clan-notice-blank", "clan-notice-release", "clan-notice-edit"]
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.setStyle = function(e) {
            (t = this.noticeTextFieldHtml.classList).remove.apply(t, this.allStyles), (i = this.noticeTextFieldHtml.classList).add.apply(i, e);
            var t, i
        }, t.prototype.enableNoticeInput = function(e) {
            e ? this.noticeTextFieldHtml.hasAttribute("readonly") && this.noticeTextFieldHtml.removeAttribute("readonly") : this.noticeTextFieldHtml.setAttribute("readonly", "")
        }, t.prototype.handleEditNoticePermissionByRole = function(e) {
            this.editButtonContainer.visible = this.hasAuthEditNotification(e), this.blankText = this.editButtonContainer.visible ? this.$filter("translate")("CLAN_MYCLAN_NOTICE_DEFAULT") : this.$filter("translate")("CLAN_MYCLAN_NOTICE_DEFAULT2")
        }, t.prototype.hasAuthEditNotification = function(e) {
            return this.staticdataLoaderService.clanDataManager.authorities[e].editNotification
        }, Object.defineProperty(t.prototype, "mode", {
            get: function() {
                return this._mode
            },
            set: function(e) {
                switch (this._mode = e, this.enableNoticeInput(e === n.Edit), this._limitTextField.visible = e === n.Edit, this.maximumNumText.hidden = e !== n.Edit, this.currentNumText.hidden = e !== n.Edit, e) {
                    case n.Edit:
                        /^$/.test(this._noticeText) && (this._noticeTextField.text = ""), this._noticeText = this._noticeTextField.text, this.noticeTextFieldHtml.select(), this.noticeTextFieldHtml.focus(), this.setStyle(this.editStyle), this.onNoticeTextChanged();
                        break;
                    case n.Release:
                        window.getSelection().removeAllRanges(), this.updateNotice(this._noticeText)
                }
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.update = function(e) {
            var t = this.reduxProps;
            t.myRole !== e.myRole && (this.handleEditNoticePermissionByRole(e.myRole), this.mode !== n.Edit || this.hasAuthEditNotification(e.myRole) || this.onCancel()), e.notice && t.notice !== e.notice && (this.mode === n.UnInitial ? (this._noticeText = e.notice, this.mode = n.Release) : this.updateNotice(e.notice))
        }, t.prototype.updateNotice = function(e) {
            this._noticeText = e, /^\s*$/.test(e) ? (this._noticeTextField.text = this.blankText, this.setStyle(this.blankStyle)) : (this._noticeTextField.text = e, this.setStyle(this.releaseStyle))
        }, t.prototype.mapStateToProps = function(e) {
            var t = e.clan,
                i = t.myClanInfo,
                n = t.members,
                r = n[s.store.getState().player.id],
                o = r ? r.role : void 0;
            return {
                notice: i ? i.notice : void 0,
                myRole: o
            }
        }, t
    }(o.Binder);
    r.__decorate([o.autowired("$filter")], d.prototype, "$filter", void 0), r.__decorate([o.autowired("staticdataLoaderService")], d.prototype, "staticdataLoaderService", void 0), r.__decorate([o.autowired("clanService")], d.prototype, "clanService", void 0), t.ClanNoticeBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1507);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/clanManage", 49).container({
            stages: {
                "clan-system-management": r.ClanManageBinder
            }
        });
        e.state("root.menu.ClanManage", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1508),
        a = i(1509),
        s = i(1510),
        c = i(1511),
        d = i(325),
        l = i(15),
        u = i(2),
        p = i(4),
        h = i(67),
        f = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.clanEmblemPopup = null, t.myClanApplicantList = null, t.noApplicantLabel = null, t.sortTabBinder = null, t.dissolutionEnable = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.addChildBinder(".id-clanDetailInfoContainer", o.MyClanDetailBinder), this.addChildBinder(".id-topInfoContainer", a.MyClanTopBinder), this.sortTabBinder = this.addSortTabBinder(), this.myClanApplicantList = this.addChildBinder(".id-listItemRendererContainer", s.MyClanApplicantListBinder, {
                    itemBinderClass: s.MyClanApplicantItemBinder,
                    sortTabBinder: this.sortTabBinder,
                    selectedItem: function(e) {},
                    itemCountPerPage: 10
                }), this.noApplicantLabel = this.getFace(".id-noApplicantLabel .id-textField"), this.clanEmblemPopup = this.addChildBinder(".id-clanEmblemChange", c.ClanEmblemBinder), this.translate(".id-emblemChange .id-buttonName", "CLAN_MANAGE_EMBLEM"), this.convertFace(".id-emblemChange").on(u.MouseEventEx.CLICK, function() {
                    return e.clanEmblemPopup.show()
                }), this.initDissolutionTooltip()
            }, t.prototype.initDissolutionTooltip = function() {
                var e = this;
                this.translate(".id-disabledDissolutionBtnTooltip .id-descriptionLabel .id-descriptionLabel", "CLAN_MANAGE_BREAKUP_TOOLTIP"), this.dissolutionButton = this.getFace(".id-dissolution"), this.tooltipHitArea = this.getFace(".id-tooltipHitArea"), this.tooltipHitArea && (this.tooltipHitArea.on(u.MouseEventEx.MOUSE_OVER, function() {
                    return e.onDissolutionBtnMouseOver()
                }), this.tooltipHitArea.on(u.MouseEventEx.MOUSE_OUT, function() {
                    return e.onDissolutionBtnMouseOut()
                })), this.addManagedListener(this.dissolutionButton, u.MouseEventEx.MOUSE_OVER, function() {
                    return e.onDissolutionBtnMouseOver()
                }), this.addManagedListener(this.dissolutionButton, u.MouseEventEx.MOUSE_OUT, function() {
                    return e.onDissolutionBtnMouseOut()
                }), this.switchDissolutionTooltips(this.dissolutionButton.enabled)
            }, t.prototype.switchDissolutionTooltips = function(e) {
                this.dissolutionEnable = e, this.tooltipHitArea && (this.tooltipHitArea.mouseEnabled = !this.dissolutionButton.enabled)
            }, t.prototype.onDissolutionBtnMouseOver = function() {
                this.reduxProps.role === l.Clan.Role.CAPTAIN && this.gotoAndPlay(".id-disabledDissolutionBtnTooltip", "over")
            }, t.prototype.onDissolutionBtnMouseOut = function() {
                this.reduxProps.role === l.Clan.Role.CAPTAIN && this.gotoAndPlay(".id-disabledDissolutionBtnTooltip", "out")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.clanService.refreshMyClanInfo().then(function(t) {
                    return t && e.clanService.fetchMyClanApplicants()
                })
            }, t.prototype.addSortTabBinder = function() {
                var e = this,
                    t = this.clanService.getSortLocale(),
                    i = [{
                        title: "CLAN_MANAGE_PLAYERLV",
                        sort: function(e) {
                            return h(function(e) {
                                return e.level
                            }, e)
                        }
                    }, {
                        title: "CLAN_MANAGE_PLAYER",
                        sort: function(e) {
                            return h(function(e, i) {
                                return e.name.localeCompare(i.name, t)
                            }, e)
                        }
                    }, {
                        title: "CLAN_MANAGE_RECENTCAR",
                        sort: function(e) {
                            return h(function(e, t) {
                                return p.default.compareCarClass(e.clazz, t.clazz)
                            }, e)
                        }
                    }, {
                        title: "CLAN_MANAGE_OVR",
                        sort: function(e) {
                            return h(function(e) {
                                return e.ovr
                            }, e)
                        }
                    }, {
                        title: "CLAN_MANAGE_APPLICATEDATE",
                        sort: function(e) {
                            return h(function(e, t) {
                                return p.default.compareDate(e.date, t.date)
                            }, e).thenBy(function(e) {
                                return e.level
                            }, -1).thenBy(function(e, t) {
                                return p.default.compareCarClass(e.clazz, t.clazz)
                            }, -1).thenBy(function(e) {
                                return e.ovr
                            }, -1).thenBy(function(e, i) {
                                return e.name.localeCompare(i.name, t)
                            }, 1)
                        }
                    }];
                return this.addChildBinder(".id-columnTitleContainer", d.ClanSortTabBinder, {
                    tabInfos: i,
                    initSelectedIndex: 4,
                    initDescending: !0,
                    sortFun: function(t, i) {
                        e.onSortList(t, i, e.reduxProps.applicants)
                    }
                })
            }, t.prototype.onSortList = function(e, t, i) {
                if (e.sort && "function" == typeof e.sort) {
                    var n = !0 === t ? -1 : 1,
                        r = _.clone(i);
                    if (r) {
                        var o = r.sort(e.sort(n)),
                            a = _.clone(o);
                        if (o.length < 10)
                            for (var s = o.length; s < 10; ++s) a.push({
                                disable: !0
                            });
                        this.myClanApplicantList.setProps({
                            items: a
                        })
                    }
                }
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                if (t.baseInfo !== e.baseInfo) {
                    var i = e.baseInfo ? e.baseInfo.expelNotification : void 0;
                    if (i && "" !== i) return void this.stateService.go("root.menu.ClanList")
                }
                if (t.applicants !== e.applicants && this.updateApplicants(e.applicants), t.myClanInfo !== e.myClanInfo) {
                    var n = e.myClanInfo ? e.myClanInfo.emblem : void 0;
                    n && this.drawExternalImage(".id-clanEmblem", this.$filter("cdn_clan_emblem")(n))
                }
                this.reduxProps.role !== e.role && (this.dissolutionButton.visible = e.role === l.Clan.Role.CAPTAIN), this.dissolutionButton.enabled !== this.dissolutionEnable && this.switchDissolutionTooltips(this.dissolutionButton.enabled)
            }, t.prototype.mapStateToProps = function(e) {
                var t = this,
                    i = e.clan,
                    n = Object.keys(i.members).length,
                    r = _.map(i.applicants).map(function(e) {
                        return t.mapApplicant(e, n)
                    }),
                    o = e.player.id,
                    a = null;
                try {
                    a = i.members[o].role
                } catch (e) {
                    a = null
                }
                return {
                    baseInfo: i.baseInfo,
                    role: a,
                    applicants: r,
                    myClanInfo: i.myClanInfo
                }
            }, t.prototype.mapApplicant = function(e, t) {
                var i = e.playerInfo,
                    r = {
                        clanId: e.clanId,
                        pid: e.pid,
                        level: i.level,
                        name: i.name,
                        ovr: i.ovr,
                        date: e.date,
                        memberNum: t
                    },
                    o = this.vehicleDataService.getVehicleData(i.vCode);
                return o && (r = n.__assign({}, r, {
                    clazz: o.clazz,
                    manufacturerCode: o.manufacturerCode,
                    code: o.code
                })), r
            }, t.prototype.updateApplicants = function(e) {
                var t = this,
                    i = this.reduxProps.applicants;
                this.noApplicantLabel.text = "", 0 === e.length && (this.noApplicantLabel.text = "" + this.$filter("translate")("CLAN_MANAGE_NOAPPLICANT")), null == e || _.isEqual(e, i) || this.sortTabBinder.firstSort(function(i, n) {
                    t.onSortList(i, n, e)
                }), e && (this.sortTabBinder.enableClick = e.length > 0)
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([r.autowired("clanService")], f.prototype, "clanService", void 0), n.__decorate([r.autowired("vehicleDataService")], f.prototype, "vehicleDataService", void 0), n.__decorate([r.autowired("stateService")], f.prototype, "stateService", void 0), t.ClanManageBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(1),
        a = i(2),
        s = i(323),
        c = i(3),
        d = i(116),
        l = i(125),
        u = i(44);
    ! function(e) {
        e[e.Label = 0] = "Label", e[e.Edit = 1] = "Edit"
    }(n || (n = {}));
    var p = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t._introMode = n.Label, t._descriptionBeforeEdit = "", t._isShowPopup = !1, t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            var t = this;
            e.prototype.onFaceReady.call(this), this.staticTranslate(), this.bindComponents(), this.descriptionInput.htmlElement.setAttribute("maxlength", this.clanService.clanIntroMaxLength), this.descriptionInput.htmlElement.setAttribute("readonly", ""), this.descriptionInput.htmlElement.oninput = function(e) {
                return t.onDescriptionInput(e)
            }, this.editButtonContainer.getChildByName("edit").on(a.MouseEventEx.CLICK, function(e) {
                t.gotoAndStop(t.editButtonContainer, "release"), t.introMode = n.Edit
            }), this.editButtonContainer.getChildByName("confirm").on(a.MouseEventEx.CLICK, function(e) {
                t.clanService.changeIntroduction(t.reduxProps.clanDetail.id, t.descriptionInput.text, function() {
                    c.store.dispatch(d.changeIntroduction(t.descriptionInput.text))
                }, function(e) {
                    l.ClanPopupHelper.onChangeIntroWithForbiddenWord(), t.descriptionInput.text = t._descriptionBeforeEdit
                }), t.gotoAndStop(t.editButtonContainer, "default"), t.introMode = n.Label
            }), this.editButtonContainer.getChildByName("cancel").on(a.MouseEventEx.CLICK, function(e) {
                t.descriptionInput.text = t._descriptionBeforeEdit, t.gotoAndStop(t.editButtonContainer, "default"), t.introMode = n.Label
            }), this.on(this.recruitCheckbox, a.MouseEventEx.CLICK, function() {
                t.onRecruitCheckbox()
            }), this.judgeCheckbox.visible = !1, this.on(this.judgeCheckbox, a.MouseEventEx.CLICK, function() {
                t.onJudgeCheckboxClick()
            }), this.dissolutionButton.enabled = !1, this.on(this.dissolutionButton, a.MouseEventEx.MOUSE_DOWN, function() {
                t.onDissolutionButtonClick()
            })
        }, t.prototype.onAddedToScene = function() {
            this.introMode = n.Label
        }, t.prototype.staticTranslate = function() {
            this.translate(".id-emblemChange .id-buttonName", "CLAN_MANAGE_EMBLEM"), this.translate(".id-clanRecruitTitle", "CLAN_MANAGE_RECRUITSET"), this.translate(".id-recruit .id-checkboxName", "CLAN_MANAGE_RECRUITING"), this.translate(".id-judge .id-checkboxName", "CLAN_MANAGE_SCREENING"), this.translate(".id-dissolution .id-buttonName", "CLAN_MANAGE_BREAKUP")
        }, t.prototype.bindComponents = function() {
            this.emblemChangeButton = this.getFace(".id-emblemChange"), this.editButtonContainer = this.getFace(".id-editButtonContainer"), this.confirmButton = this.getFace(".id-confirm"), this.descriptionInput = this.getFace(".id-descriptionInput .id-textField"), this.recruitCheckbox = this.getFace(".id-recruit"), this.judgeCheckbox = this.getFace(".id-judge"), this.dissolutionButton = this.getFace(".id-dissolution")
        }, t.prototype.onDescriptionInput = function(e) {
            this.descriptionInput.text = this.descriptionInput.text.replace(/(^\s*)|([\r\n\t])/g, "");
            var t = this.descriptionInput.text;
            t.length < this.clanService.clanIntroMinLength ? this.confirmButton.enabled = !1 : t.length > this.clanService.clanIntroMaxLength ? (this.confirmButton.enabled = !0, this.descriptionInput.text = t.substr(0, this.clanService.clanIntroMaxLength)) : this.confirmButton.enabled = !0
        }, t.prototype.onRecruitCheckbox = function() {
            var e = this;
            if (!this._isShowPopup) {
                this._isShowPopup = !0;
                var t = function() {
                        e._isShowPopup = !1
                    },
                    i = !this.recruitCheckbox.selected;
                !1 === i && this.reduxProps.applicantNum > 0 ? l.ClanPopupHelper.onRecruitCheck(t) : this.clanService.setRecruiting(this.reduxProps.clanDetail.id, i, function() {
                    c.store.dispatch(d.setRecruiting(i)), i ? l.ClanPopupHelper.onConfirmRecruiting(t) : l.ClanPopupHelper.onConfirmRecruitStop(t)
                }, function(t) {
                    e._isShowPopup = !1, u.showClanErrorPopup(t, e.$filter, e.popupService)
                })
            }
        }, t.prototype.onJudgeCheckboxClick = function() {
            var e = this;
            if (!this._isShowPopup) {
                this._isShowPopup = !0;
                var t = function() {
                        e._isShowPopup = !1
                    },
                    i = !this.judgeCheckbox.selected;
                !1 === i && this.reduxProps.applicantNum > 0 ? l.ClanPopupHelper.onRecruitCheck(t) : this.clanService.setCensorship(this.reduxProps.clanDetail.id, i, function() {
                    c.store.dispatch(d.setCensorship(i)), i ? l.ClanPopupHelper.onConfirmScreening(t) : l.ClanPopupHelper.onConfirmSkipScreen(t)
                }, function(t) {
                    e._isShowPopup = !1, u.showClanErrorPopup(t, e.$filter, e.popupService)
                })
            }
        }, t.prototype.onDissolutionButtonClick = function() {
            var e = this;
            l.ClanPopupHelper.onConfirmDissolveClan(function() {
                e.clanService.dismissClan(e.reduxProps.clanDetail.id, function() {
                    l.ClanPopupHelper.onDissolveClan(function() {
                        e.stateService.go("root.menu.ClanList")
                    })
                }, function(t) {
                    u.showClanErrorPopup(t, e.$filter, e.popupService)
                })
            }, function() {})
        }, t.prototype.update = function(t) {
            this.reduxProps.clanDetail !== t.clanDetail && e.prototype.setClanInfo.call(this, t.clanDetail) && (this.updateIntro(t.clanDetail.introduction), this.updateRecruit(t.clanDetail.recruiting, t.clanDetail.censorship), this.updateDissolutionButton(t.clanDetail.memberCount))
        }, t.prototype.mapStateToProps = function(e) {
            var t = e.clan,
                i = Object.keys(t.applicants).length;
            return {
                clanDetail: t.myClanInfo,
                applicantNum: i
            }
        }, t.prototype.updateIntro = function(e) {
            switch (this.introMode) {
                case n.Edit:
                    this._descriptionBeforeEdit = e;
                    break;
                case n.Label:
                    this.descriptionInput.text = e
            }
        }, t.prototype.updateRecruit = function(e, t) {
            this.recruitCheckbox.selected = e, this.judgeCheckbox.visible = e, this.judgeCheckbox.selected = t
        }, t.prototype.updateDissolutionButton = function(e) {
            this.dissolutionButton.enabled = 1 === e
        }, Object.defineProperty(t.prototype, "introMode", {
            get: function() {
                return this._introMode
            },
            set: function(e) {
                this._introMode = e;
                var t = this.descriptionInput.htmlElement;
                switch (this.introMode) {
                    case n.Edit:
                        this._descriptionBeforeEdit = this.descriptionInput.text, t.hasAttribute("readonly") && t.removeAttribute("readonly"), t.classList.remove("clan-writeable-area", "clan-readonly-area"), t.classList.add("clan-writeable-area"), t.select(), this.confirmButton.enabled = !0;
                        break;
                    case n.Label:
                        t.setAttribute("readonly", ""), t.classList.remove("clan-writeable-area", "clan-readonly-area"), t.classList.add("clan-readonly-area")
                }
            },
            enumerable: !0,
            configurable: !0
        }), t
    }(s.ClanDetailBinder);
    r.__decorate([o.autowired("clanService")], p.prototype, "clanService", void 0), r.__decorate([o.autowired("popupService")], p.prototype, "popupService", void 0), r.__decorate([o.autowired("stateService")], p.prototype, "stateService", void 0), t.MyClanDetailBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(239),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-titleLabel", "CLAN_MANAGE_APPLICANT"), this.applicantNum = this.addChildBinder(".id-numberLabel", o.DigitSlashDigitBinder)
            }, t.prototype.update = function(e) {
                var t = {
                    left: {
                        text: e.applicantNum
                    },
                    slash: {
                        text: " / "
                    },
                    right: {
                        text: 50
                    }
                };
                this.applicantNum.setProps(t)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    applicantNum: Object.keys(e.clan.applicants).length
                }
            }, t
        }(r.Binder);
    t.MyClanTopBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(2),
        s = i(3),
        c = i(116),
        d = i(125),
        l = i(44),
        u = i(324);
    t.MyClanApplicantListBinder = u.ClanScrollListBinder;
    var p = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.detail = null, t.approval = null, t.refusal = null, t.clanId = null, t.playerId = null, t.memberNum = -1, t
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.hasSize = !0, this.detail = this.getFace(".id-detail"), this.approval = this.getFace(".id-approval"), this.refusal = this.getFace(".id-refusal"), this.translate(".id-approval .id-buttonName", "CLAN_MANAGE_CONFIRM"), this.translate(".id-refusal .id-buttonName", "CLAN_MANAGE_REJECT"), this.detail.visible = this.featureSet.isEnabled("PLAYERINFO"), this.detail.visible && this.detail.on(a.MouseEventEx.CLICK, function() {
                return e.onDetailClick()
            }), this.approval.on(a.MouseEventEx.CLICK, function() {
                e.onApprovalClick()
            }), this.refusal.on(a.MouseEventEx.CLICK, function() {
                e.onRefusalClick()
            })
        }, t.prototype.onDetailClick = function() {}, t.prototype.onApprovalClick = function() {
            var e = this,
                t = this.playerSnippetService.getSnippet(this.playerId).name;
            d.ClanPopupHelper.onConfirmAcceptClanRequest(t, function() {
                e.memberNum < e.clanService.maxMemberCount ? e.clanService.acceptClanRequest(e.clanId, e.playerId, function() {
                    s.store.dispatch(c.removeApplicant(e.playerId)), e.clanService.refreshMyClanInfo(), d.ClanPopupHelper.onAcceptClanRequest(t, function() {})
                }, function(t) {
                    e.handleServerError(t)
                }) : d.ClanPopupHelper.onAcceptClanRequestFailure(function() {})
            }, function() {})
        }, t.prototype.onRefusalClick = function() {
            var e = this,
                t = this.playerSnippetService.getSnippet(this.playerId).name;
            d.ClanPopupHelper.onConfirmRejectClanRequest(t, function() {
                e.clanService.rejectClanRequest(e.clanId, e.playerId, function() {
                    s.store.dispatch(c.removeApplicant(e.playerId)), d.ClanPopupHelper.onRejectClanRequest(t, function() {})
                }, function(t) {
                    e.handleServerError(t)
                })
            }, function() {})
        }, t.prototype.handleServerError = function(e) {
            l.showClanErrorPopup(e, this.$filter, this.popupService), this.clanService.fetchMyClanApplicants()
        }, t.prototype.update = function(e) {
            var t = e.info;
            if (this.gotoAndStop(".id-background", t.index % 2 ? "even" : "odd"), !0 === t.disable) return void(this.face.enabled = !1);
            this.face.enabled = !0, this.clanId = t.clanId, this.playerId = t.pid, this.memberNum = t.memberNum;
            var i = this.$filter("template")({
                value: t.level
            }, "CLAN_PLAYERLEVEL");
            this.bindText(".id-levelLabel", i), this.bindText(".id-playerName", t.name), this.bindText(".id-vehicleClass", t.clazz), this.bindText(".id-manufacturerName", this.$filter("manufacturerName")(t.manufacturerCode)), this.bindText(".id-vehicleName", this.$filter("vehicleName")(t.code)), this.bindText(".id-overallNum", t.ovr);
            var n = o.default.yyyymmdd(t.date);
            this.bindText(".id-dateNum", n.year + "." + n.month + "." + n.day)
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([r.autowired("popupService")], p.prototype, "popupService", void 0), n.__decorate([r.autowired("clanService")], p.prototype, "clanService", void 0), n.__decorate([r.autowired("playerSnippetService")], p.prototype, "playerSnippetService", void 0), n.__decorate([r.autowired("featureSetService")], p.prototype, "featureSet", void 0), t.MyClanApplicantItemBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(8),
        s = i(645),
        c = i(3),
        d = i(116),
        l = i(166),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                this.translate(".id-titleLabel", "CLAN_MANAGE_EMBLEM_TITLE"), this.translate(".id-retentionLabel", "CLAN_MANAGE_EMBLEM_NUMBER"), this.translate(".id-confirmButton", "CLAN_MANAGE_EMBLEM_CONFIRM"), this.translate(".id-cancelButton", "CLAN_MANAGE_EMBLEM_CANCEL"), this.translate(".id-sortDropdown .id-buttonName", "CLAN_MANAGE_EMBLEMFILTER_ALL"), this.initDropDown(), this.initEmblemList(), e.prototype.onFaceReady.call(this), this.convertFace(".id-confirmButton").on(o.MouseEventEx.CLICK, function() {
                    return t.onConfirmClick()
                }), this.convertFace(".id-cancelButton").on(o.MouseEventEx.CLICK, function() {
                    return t.hide()
                }), this.retentionTextfield = this.getFace(".id-retentionTextfield"), this.bindList = function(e, i) {
                    var n = t.chunkedEmblems[i] || [];
                    e.forEach(function(e, i) {
                        t.bindEmblemInfo(e, n[i], i)
                    })
                }, this.itemClickCallback = function(e, i) {
                    var n = t.chunkedEmblems[t.pageIndex][e];
                    t.selectedId = n.id
                }
            }, t.prototype.initDropDown = function() {
                var e = this;
                this.filterDropDown = this.convertFace(".id-sortDropdown"), this.filterDropDown.items.push(this.$filter("translate")("CLAN_MANAGE_EMBLEMFILTER_ALL")), _.forEach(this.staticdataLoaderService.clanDataManager.emblemCategories, function(t) {
                    e.filterDropDown.items.push(e.$filter("translate")(t.nameId))
                }), this.filterDropDown.on(a.EventEx.CHANGE, function() {
                    e.refreshEmblemList()
                })
            }, t.prototype.initEmblemList = function() {
                var e = this;
                this.itemCountPerPage = 18, this.rowSize = 6, this.pagingContainer = this.getFace(".id-clanTileListContainer"), this.on(this.pagingContainer, "reset", function(t) {
                    e.gotoAndPlay(e.pagingContainer, "default"), e.isPaging = !1
                }), this.allEmblems = _.map(this.staticdataLoaderService.clanDataManager.emblems), _.times(this.itemCountPerPage, function(t) {
                    var i = e.getFace(".id-current .id-emblem" + (t + 1)),
                        n = e.getFace(".id-next .id-emblem" + (t + 1));
                    i.hasSize = !0, n.hasSize = !0, e.currListBinder.push(e.addChildBinder(i, s.ClanEmblemItemBinder)), e.nextListBinder.push(e.addChildBinder(n, s.ClanEmblemItemBinder)), e.on(i, o.MouseEventEx.CLICK, e.onItemClick.bind(e, t))
                })
            }, t.prototype.refreshEmblemList = function() {
                var e = this.filterDropDown.selectedIndex,
                    t = 0 === e ? this.allEmblems : _.filter(this.allEmblems, {
                        type: e
                    });
                this.retentionTextfield.text = t.length.toString(), this.chunkedEmblems = _.chunk(t, this.itemCountPerPage), this.pageSize = Math.max(1, this.chunkedEmblems.length), this.scrollBarContainer.visible = this.pageSize > 1, this.isPaging = !1, this.pageIndex = 0, this.bindList(this.currListBinder, this.pageIndex)
            }, t.prototype.bindEmblemInfo = function(e, t, i) {
                var n = e.face;
                if (n.enabled = n.visible = !!t, t) {
                    var r = {
                        emblemId: t.id
                    };
                    r && e.setProps(r), n.selected = t.id === this.selectedId, n.selected && (this.selectedIndex = i)
                }
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this), this.refreshEmblemList(), this.resetScrollBar()
            }, t.prototype.onDetach = function() {}, t.prototype.update = function(e) {}, t.prototype.show = function() {
                this.refreshEmblemList(), this.gotoAndPlay(this.face, "in")
            }, t.prototype.hide = function() {
                this.gotoAndPlay(this.face, "out")
            }, t.prototype.onConfirmClick = function() {
                var e = this;
                if (this.selectedId) {
                    var t = c.store.getState().clan,
                        i = t.myClanInfo.id;
                    this.clanService.changeEmblem(i, this.selectedId, function() {
                        c.store.dispatch(d.changeEmblem(e.selectedId))
                    }, null), this.hide()
                }
            }, t
        }(l.ScrollBarPageBinder);
    n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], u.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("clanService")], u.prototype, "clanService", void 0), t.ClanEmblemBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1513);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/clanList", 50).container({
            stages: {
                "clan-system-list": r.ClanSearchBinder
            },
            resolve: {
                clanList: ["clanService", function(e) {}]
            }
        });
        e.state("root.menu.ClanList", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1514),
        a = i(1515),
        s = i(1516),
        c = i(1517),
        d = i(325),
        l = i(2),
        u = i(3),
        p = i(116),
        h = i(13),
        f = i(125),
        v = i(44),
        m = i(67),
        g = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.clanCreationPopup = this.addChildBinder(".id-clanCreationPopup", o.ClanCreationBinder), this.searchOptionBinder = this.addChildBinder(".id-topInfoContainer", a.ClanSearchOptionsBinder), this.clanDetailBinder = this.addChildBinder(".id-clanDetailInfoContainer", s.SelectedClanDetailBinder);
                var t = this.clanService.getSortLocale();
                this.sortTabBinder = this.addChildBinder(".id-columnTitleContainer", d.ClanSortTabBinder, {
                    tabInfos: [{
                        title: "CLAN_CLANLIST_CLANNAME",
                        sort: function(e) {
                            return m(function(e, i) {
                                return e.name.localeCompare(i.name, t)
                            }, e).thenBy("memberCount", -1).thenBy(function(e) {
                                return Math.floor(e.createdDate.getTime() / 864e5)
                            }, 1)
                        }
                    }, {
                        title: "CLAN_CLANLIST_INTRODUCTION",
                        sort: function(e) {
                            return m(function(e, i) {
                                return e.introduction.localeCompare(i.introduction, t)
                            }, e).thenBy("memberCount", -1).thenBy(function(e) {
                                return Math.floor(e.createdDate.getTime() / 864e5)
                            }, 1)
                        }
                    }, {
                        title: "CLAN_CLANLIST_MEMBERS",
                        sort: function(e) {
                            return m("memberCount", e).thenBy(function(e) {
                                return Math.floor(e.createdDate.getTime() / 864e5)
                            }, 1).thenBy(function(e, i) {
                                return e.name.localeCompare(i.name, t)
                            }, 1)
                        }
                    }, {
                        title: "CLAN_CLANLIST_CREATIONDATE",
                        sort: function(e) {
                            return m(function(e) {
                                return Math.floor(e.createdDate.getTime() / 864e5)
                            }, e).thenBy("memberCount", -1).thenBy(function(e, i) {
                                return e.name.localeCompare(i.name, t)
                            }, 1)
                        }
                    }],
                    initSelectedIndex: 2,
                    initDescending: !0,
                    sortFun: function(t, i) {
                        return e.onSortList(t, i)
                    }
                });
                var i = this.addChildBinder(".id-judgeListItem", c.ScreeningItemBinder);
                this.clanListBinder = this.addChildBinder(".id-listItemRendererContainer", c.ClanListBinder, {
                    itemBinderClass: c.ClanListItemBinder,
                    sortTabBinder: this.sortTabBinder,
                    selectedItem: function(e) {
                        u.store.dispatch(p.selectAClan(e))
                    },
                    itemCountPerPage: 7,
                    screeningItem: i
                }), this.translate(".id-bottomInfoContainer .id-descriptionLabel", "CLAN_CLANLIST_DISPLAYLIMIT"), this.translate(".id-create", "CLAN_CLANLIST_CLANCREATION"), this.createButton = this.getFace(".id-create"), this.createButton.on(l.MouseEventEx.CLICK, function() {
                    return e.onCreateClick()
                }), this.tooltipHitArea = this.getFace(".id-tooltipHitArea"), this.tooltipHitArea && (this.tooltipHitArea.on(l.MouseEventEx.MOUSE_OVER, function(t) {
                    return e.onCreationHover(t)
                }), this.tooltipHitArea.on(l.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })), this.translate(".id-application", "CLAN_CLANLIST_JOINREQUEST"), this.applyButton = this.getFace(".id-application"), this.applyButton.on(l.MouseEventEx.CLICK, function() {
                    return e.onApplyClick()
                }), this.applyButton.enabled = !1, this.translate(".id-noneListTextLabel .id-textField", "CLAN_CLANLIST_NO_RESULTS"), this.clanListHint = this.getFace(".id-noneListTextLabel"), this.disabledTooltip = this.getFace(".id-disabledCreateBtnTooltip"), this.disabledTooltip.visible = !1
            }, t.prototype.onSortList = function(e, t) {
                if (e.sort && "function" == typeof e.sort) {
                    var i = !0 === t ? -1 : 1,
                        n = _.clone(this.reduxProps.searchResult);
                    if (n) {
                        if (this.reduxProps.searchOpts) {
                            var r = this.reduxProps.searchOpts,
                                o = _.filter(n, function(e) {
                                    if (!r.enableRecruit || r.enableRecruit && e.recruiting) return e
                                });
                            n = _.filter(o, function(e) {
                                if (!r.disableScreen || r.disableScreen && !e.censorship) return e
                            })
                        }
                        n = n.sort(e.sort(i)), this.updateClanList({
                            searchResult: n,
                            appliedClan: this.reduxProps.appliedClan
                        })
                    }
                }
            }, t.prototype.onCreateClick = function() {
                this.clanCreationPopup.show()
            }, t.prototype.onCreationHover = function(e) {
                this.createButton.enabled || this.tooltipService.show(e, "top", h.TooltipType.ClanCreation, {
                    clanCreationConditions: ["CLAN_CLANCREATION_CONDITION1", "CLAN_CLANCREATION_CONDITION2", "CLAN_CLANCREATION_CONDITION3"]
                })
            }, t.prototype.onApplyClick = function() {
                var e = this,
                    t = this.getProps().selectedClan;
                f.ClanPopupHelper.onRequestJoin(function() {
                    e.clanListBinder.selectNone(), e.clanService.joinClan(t.id, function(i) {
                        i ? f.ClanPopupHelper.onUnderScreening(t.name) : f.ClanPopupHelper.onJoinSuccess(function() {
                            return e.stateService.go("root.menu.MyClan")
                        }, t.name)
                    }, function(t) {
                        v.showClanErrorPopup(t, e.$filter, e.popupService)
                    })
                }, t.name)
            }, t.prototype.updateClanList = function(e) {
                var t = e.searchResult;
                t || (t = []), this.clanListHint.visible = 0 === t.length;
                var i = e.appliedClan,
                    n = i ? 6 : 7,
                    r = t.length;
                if (t.length < n)
                    for (var o = t.length; o < n; ++o) t.push({
                        disable: !0
                    });
                var a = _.findIndex(t, {
                    id: i ? i.id : -1
                }); - 1 !== a && t.splice(a, 1), this.clanListBinder.setProps({
                    items: t,
                    appliedClan: i,
                    itemCountPerPage: n
                }), r > 7 && this.clanListBinder.scrollToTopItem(), this.clanListBinder.getSelectedItem() || this.clanListHint.visible || i || this.clanListBinder.selectItem(0), 0 !== t.length && this.searchOptionBinder.setProps({
                    searchCount: r
                }), this.clanListHint.visible && !i && u.store.dispatch(p.selectAClan(null))
            }, t.prototype.canEnableApplyButton = function(e) {
                var t = u.store.getState().clan,
                    i = !0;
                return (!e || t.myClanInfo || t.appliedClan || !e.recruiting || e.memberCount >= e.maxMemberCount) && (i = !1), i
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.clanService.fetchClanCount(), this.clanService.refreshMyClanInfo().then(function() {
                    return e.clanService.fetchMyRequestedClan()
                })
            }, t.prototype.update = function(e) {
                var t = this,
                    i = this.reduxProps;
                if (i.baseInfo !== e.baseInfo) {
                    var n = e.baseInfo ? e.baseInfo.acceptNotification : void 0;
                    n && "" !== n && this.stateService.go("root.menu.MyClan")
                }
                this.applyButton.enabled = this.canEnableApplyButton(e.selectedClan), (i.searchResult !== e.searchResult || e.appliedClan && e.selectedClan === e.appliedClan || i.searchOpts !== e.searchOpts) && this.clanListBinder.selectItem(-1), i.searchResult === e.searchResult && i.appliedClan === e.appliedClan && i.searchOpts === e.searchOpts || setTimeout(function() {
                    return t.sortTabBinder.forceSortItems()
                }, 34), i.searchResult !== e.searchResult && setTimeout(function() {
                    return t.sortTabBinder.enableClick = e.searchResult.length > 0
                }, 34);
                var r = u.store.getState().player,
                    o = _.isEmpty(e.myClanInfo) && _.isEmpty(e.appliedClan);
                o = o && r.sp >= this.clanService.clanCreationSP && r.level >= this.clanService.clanCreationLevel, this.createButton.enabled = o, this.tooltipHitArea && (this.tooltipHitArea.mouseEnabled = !o)
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.clan;
                return {
                    searchOpts: t.searchOpts,
                    searchResult: t.clanList,
                    appliedClan: t.appliedClan,
                    selectedClan: t.clanInfo,
                    myClanInfo: t.myClanInfo,
                    baseInfo: t.baseInfo
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], g.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], g.prototype, "tooltipService", void 0), n.__decorate([r.autowired("popupService")], g.prototype, "popupService", void 0), n.__decorate([r.autowired("clanService")], g.prototype, "clanService", void 0), n.__decorate([r.autowired("stateService")], g.prototype, "stateService", void 0), t.ClanSearchBinder = g
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(1),
        a = i(8),
        s = i(2),
        c = i(29),
        d = i(44),
        l = i(125);
    ! function(e) {
        e[e.Success = 0] = "Success", e[e.InvalidClanIntro = 1] = "InvalidClanIntro", e[e.InvalidClanName = 2] = "InvalidClanName"
    }(n || (n = {}));
    var u = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.hasSize = !0, this.face.visible = !1, this.translate(".id-cancelButton", "CLAN_CLANCREATION_CANCEL"), this.cancelButton = this.getFace(".id-cancelButton"), this.cancelButton.on(s.MouseEventEx.CLICK, function() {
                return e.hide()
            }), this.translate(".id-confirmButton", "CLAN_CLANCREATION_CREATCLAN"), this.confirmButton = this.getFace(".id-confirmButton"), this.confirmButton.on(s.MouseEventEx.CLICK, function() {
                return e.onCreateClick()
            }), this.translate(".id-titleLabel", "CLAN_CLANCREATION_CREATION"), this.translate(".id-nameTitle", "CLAN_CLANCREATION_CLANNAME"), this.translate(".id-introductionTitle", "CLAN_CLANCREATION_INTRODUCTION"), this.translate(".id-clanDescription", "CLAN_CLANCREATION_NEEDAMOUNT"), this.clanNameInput = this.getFace(".id-clanNameInput"), this.clanIntroInput = this.getFace(".id-introductionInput"), this.clanNameTextField = this.convertFace(".id-clanNameInput .id-textField"), this.clanIntroTextField = this.convertFace(".id-introductionInput .id-textField"), this.drawExternalImage(".id-clanEmblemImage", this.$filter("cdn_clan_emblem")("0")), this.clanIntroTextField.htmlElement.onfocus = function() {
                e.clanIntroTextField.htmlElement.hasAttribute("placeholder") && e.clanIntroTextField.htmlElement.removeAttribute("placeholder")
            }, this.clanIntroTextField.htmlElement.onblur = function() {
                e.clanIntroTextField.htmlElement.setAttribute("placeholder", e.clanIntroPlaceholder)
            }, this.clanIntroTextField.htmlElement.onkeypress = function(e) {
                e.keyCode === c.KeyboardMap.getKeyCode("ENTER") && e.preventDefault()
            }, this.clanNameInput.maxLength = this.clanService.clanNameMaxLength, this.clanIntroTextField.htmlElement.setAttribute("maxlength", this.clanService.clanIntroMaxLength), this.clanNameInput.textField.htmlElement.oninput = function(t) {
                return e.onNameInput(t)
            };
            var t = this.$filter("translate")("CLAN_CLANCREATION_ENTERNAMEHERE");
            this.clanNameTextField.htmlElement.setAttribute("placeholder", t), this.clanIntroPlaceholder = this.$filter("translate")("CLAN_CLANCREATION_ENTERINTROHERE"), this.clanIntroTextField.htmlElement.setAttribute("placeholder", this.clanIntroPlaceholder)
        }, t.prototype.onNameInput = function(e) {
            var t = this.clanNameInput.textField.text;
            /\s/.test(t) && (this.clanNameInput.textField.text = t.replace(/\s/g, ""))
        }, t.prototype.show = function() {
            this.face.visible = !0, this.gotoAndPlay(this.face, "in")
        }, t.prototype.hide = function() {
            var e = this;
            this.gotoAndPlay(this.face, "out"), this.face.once(a.EventEx.STOP, function(t) {
                e.face.visible = !1, e.clanIntroInput.text = "", e.clanNameInput.text = ""
            })
        }, t.prototype.onCreateClick = function() {
            switch (this.checkCreateInfo()) {
                case n.Success:
                    this.create();
                    break;
                case n.InvalidClanName:
                    l.ClanPopupHelper.onCreateClanInvalidClanNamePopup(this.clanService.clanNameMinLength, this.clanService.clanNameMaxLength);
                    break;
                case n.InvalidClanIntro:
                    l.ClanPopupHelper.onCreateClanInvalidClanIntroPopup(this.clanService.clanIntroMinLength, this.clanService.clanIntroMaxLength)
            }
        }, t.prototype.checkCreateInfo = function() {
            return this.clanNameInput.text.length > this.clanService.clanNameMaxLength || this.clanNameInput.text.length < this.clanService.clanNameMinLength ? n.InvalidClanName : this.clanIntroInput.text.length > this.clanService.clanIntroMaxLength || this.clanIntroInput.text.length < this.clanService.clanIntroMinLength ? n.InvalidClanIntro : n.Success
        }, t.prototype.create = function() {
            var e = this;
            l.ClanPopupHelper.onCreateClanPopup(function() {
                e.clanService.createClan(e.clanNameInput.text, e.clanIntroInput.text, function() {
                    l.ClanPopupHelper.onCreateClanConfirmPopup(function() {
                        e.stateService.go("root.menu.ClanManage")
                    }), e.hide()
                }, function(t) {
                    d.showClanErrorPopup(t, e.$filter, e.popupService)
                })
            })
        }, t
    }(o.Binder);
    r.__decorate([o.autowired("$filter")], u.prototype, "$filter", void 0), r.__decorate([o.autowired("popupService")], u.prototype, "popupService", void 0), r.__decorate([o.autowired("clanService")], u.prototype, "clanService", void 0), r.__decorate([o.autowired("stateService")], u.prototype, "stateService", void 0), t.ClanCreationBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(3),
        s = i(116),
        c = i(29),
        d = i(125),
        l = !1,
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this._showSearch = !1;
                var t = this.getFace(".id-join");
                t.on(o.MouseEventEx.CLICK, function() {
                    e.canJoin = !e.canJoin, t.selected = e.canJoin, e.onSearchOptionChanged()
                });
                var i = this.getFace(".id-judge");
                i.on(o.MouseEventEx.CLICK, function() {
                    e.noScreen = !e.noScreen, i.selected = e.noScreen, e.onSearchOptionChanged()
                }), this.getFace(".id-searchIcon").on(o.MouseEventEx.CLICK, function() {
                    return e.onSearchButtonClick()
                }), this.nameInput = this.getFace(".id-nameInput");
                var n = document.createElement("div");
                n.className = "id_inputBackground";
                var r = this.nameInput.textField.htmlElement;
                this.nameInput.htmlElement.insertBefore(n, r);
                var s = function(t) {
                    t.keyCode === c.KeyboardMap.getKeyCode("ENTER") && e.onSearchButtonClick()
                };
                r.onfocus = function() {
                    r.addEventListener("keydown", s)
                }, r.onblur = function() {
                    r.removeEventListener("keydown", s)
                };
                var d = this.staticdataLoaderService.clanDataManager.getConfig("CLAN_SEARCH_KEYWORLD_MAX_LENGTH");
                this.nameInput.maxLength = Number(d);
                var l = this.$filter("translate")("CLAN_CLANLIST_CLANNAMESEARCH");
                this.nameInput.textField.applyHtmlElementAttributes(["placeholder=" + l]), this.nameInput.textField.htmlElement.oninput = function(t) {
                    return e.onNameInput(t)
                }, this.translate(".id-titleLabel", "CLAN_CLANLIST_ACTIVECLANSEARCH"), this.translate(".id-join .id-checkboxName .id-textField", "CLAN_CLANLIST_JOINPOSSIBLE"), this.translate(".id-judge .id-checkboxName .id-textField", "CLAN_CLANLIST_SCREENINGSKIP");
                var u = a.store.getState().clan;
                this.canJoin = u.searchOpts.enableRecruit, t.selected = this.canJoin, this.noScreen = u.searchOpts.disableScreen, i.selected = this.noScreen
            }, t.prototype.onAddedToScene = function() {
                this.clanService.searchClan(this.canJoin, !this.noScreen, "")
            }, t.prototype.onSearchButtonClick = function() {
                if (1 === this.keywords.length) return this.nameInput.textField.htmlElement.blur(), d.ClanPopupHelper.onSearchKeywordWarn();
                this.clanService.searchClan(this.canJoin, !this.noScreen, this.keywords), l = !0
            }, Object.defineProperty(t.prototype, "keywords", {
                get: function() {
                    return this.nameInput.textField.text
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onSearchOptionChanged = function() {
                var e = {
                    enableRecruit: this.canJoin,
                    disableScreen: this.noScreen,
                    keyWord: this.keywords
                };
                a.store.dispatch(s.changeSearchOptions(e))
            }, t.prototype.onNameInput = function(e) {
                var t = this.nameInput.textField.text;
                /\s/.test(t) && (this.nameInput.textField.text = t.replace(/\s/g, ""))
            }, t.prototype.updateClanCount = function(e) {
                this.template(".id-descriptionLabel", "CLAN_CLANLIST_ACTIVECLANNUMBER", {
                    value: e
                })
            }, t.prototype.updateSearchCount = function(e) {
                this.template(".id-descriptionLabel", "CLAN_CLANLIST_SEARCHRESULTNUMBER", {
                    value: e
                })
            }, t.prototype.update = function(e) {
                l ? this.updateSearchCount(e.searchCount) : this.updateClanCount(e.clanCount)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    clanCount: e.clan.clanCount
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], u.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], u.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("clanService")], u.prototype, "clanService", void 0), t.ClanSearchOptionsBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(323),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-clanRecruitTitle", "CLAN_CLANLIST_INFO_RECRUITSTATUS"), this.recruitText = this.getFace(".id-clanRecruitLabel"), this.descriptionLabel = this.getFace(".id-descriptionLabel")
            }, t.prototype.setClanInfo = function(t) {
                if (!e.prototype.setClanInfo.call(this, t)) return !1;
                var i = this.$filter("translate"),
                    n = this.recruitText.htmlElement,
                    r = n.classList;
                r.remove("clan-recruiting-text-color", "clan-not-recruiting-text-color");
                var o = "";
                return t.recruiting ? (r.add("clan-recruiting-text-color"), o = i("CLAN_CLANLIST_INFO_RECRUIT"), t.censorship && (o = i("CLAN_CLANLIST_INFO_SCREENING"))) : (r.add("clan-not-recruiting-text-color"), o = i("CLAN_CLANLIST_INFO_RECRUITSTOP")), n.className = r.toString(), this.recruitText.htmlText = o, this.descriptionLabel.text = t.introduction, !0
            }, t
        }(r.ClanDetailBinder);
    t.SelectedClanDetailBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(2),
        s = i(8),
        c = i(324),
        d = i(3),
        l = i(116),
        u = i(125),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.memberCount = null, t
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "button", {
                get: function() {
                    return this.face
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0;
                var e = this.getProps(),
                    t = e.info,
                    i = e.onClick;
                this.addManagedListener(this.face, a.MouseEventEx.CLICK, function(e) {
                    i && i(t)
                });
                var n = this.getFace(".id-numberLabel").htmlElement,
                    r = document.createElement("div");
                r.className = "fc-element comp-TextField clan-member-count global-font", n.appendChild(r), this.memberCount = r
            }, t.prototype.update = function(e) {
                if (this.gotoAndStop(".id-background", e.info.index % 2 ? "even" : "odd"), e.info.disable) return this.setDisable(!0), void(this.button.enabled = !1);
                this.setDisable(!1), this.button.enabled = !0;
                var t = e.info;
                this.bindText(".id-clanName", t.name), this.bindText(".id-introductionLabel", t.introduction);
                var i = o.default.yyyymmdd(t.createdDate),
                    n = i.year + "." + i.month + "." + i.day;
                this.bindText(".id-dateLabel", n), this.bindText(".id-numberLabel .id-textField", " / " + t.maxMemberCount), this.memberCount.innerHTML = "" + t.memberCount, this.drawExternalImage(".id-externalImage", this.$filter("cdn_clan_emblem")(t.emblem))
            }, t.prototype.setDisable = function(e) {
                this.visible(".id-clanName", !e), this.visible(".id-introductionLabel", !e), this.visible(".id-dateLabel", !e), this.visible(".id-numberLabel .id-textField", !e), this.visible(".id-externalImage", !e)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], p.prototype, "$filter", void 0), t.ClanListItemBinder = p;
    var h = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.memberCount = null, t
        }
        return n.__extends(t, e), Object.defineProperty(t.prototype, "button", {
            get: function() {
                return this.face
            },
            enumerable: !0,
            configurable: !0
        }), Object.defineProperty(t.prototype, "selected", {
            set: function(e) {
                this.button.selected = e
            },
            enumerable: !0,
            configurable: !0
        }), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.hasSize = !0, this.translate(".id-reviewLabel", "CLAN_SCREENING_IN_PROGRESS"), this.translate(".id-cancel .id-buttonName", "CLAN_JOIN_POPUP_CANCEL");
            var t = this.getFace(".id-cancel");
            t.on(a.MouseEventEx.CLICK, function() {
                return e.onClickCancel()
            }), t.enabled = !0, this.button.on(a.MouseEventEx.CLICK, function() {
                return e.onClickSelf()
            }), this.button.on(s.EventEx.SELECT, function() {
                return e.button.selected && e.onClickSelf()
            });
            var i = this.getFace(".id-numberLabel").htmlElement,
                n = document.createElement("div");
            n.className = "fc-element comp-TextField clan-member-count global-font", i.appendChild(n), this.memberCount = n
        }, t.prototype.update = function(e) {
            var t = e.info;
            this.bindText(".id-clanName", t.name), this.bindText(".id-numberLabel .id-textField", " / " + t.maxMemberCount), this.drawExternalImage(".id-externalImage", this.$filter("cdn_clan_emblem")(t.emblem)), this.memberCount.innerHTML = "" + t.memberCount
        }, t.prototype.onClickSelf = function() {
            var e = this.getProps().info;
            e && d.store.dispatch(l.selectAClan(e))
        }, t.prototype.onClickCancel = function() {
            var e = this;
            u.ClanPopupHelper.onCancelJoinRequest(function() {
                var t = e.getProps().info;
                t && e.clanService.cancelJoinRequest(t.id)
            })
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("clanService")], h.prototype, "clanService", void 0), n.__decorate([r.autowired("$filter")], h.prototype, "$filter", void 0), t.ScreeningItemBinder = h;
    var f = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(t) {
            e.prototype.onFaceReady.call(this, t);
            var i = t.itemBinderClass,
                n = t.screeningItem,
                o = t.appliedClan;
            this.screeningItem = n, this.inJudgeListBinder = this.addChildBinder(".ListItemRendererLine6 .id-listItem", r.CollectionBinder, {
                instanceBinder: i
            }), this.defaultListBinder = this.listBinder, this.listBinder = o ? this.inJudgeListBinder : this.defaultListBinder
        }, t.prototype.update = function(t) {
            t.appliedClan ? (this.gotoAndStop(this.face, "line6"), this.listBinder = this.inJudgeListBinder, this.screeningItem.setProps({
                info: t.appliedClan
            }), this.screeningItem.face.visible = !0) : (this.gotoAndStop(this.face, "line7"), this.listBinder = this.defaultListBinder, this.screeningItem.face.visible = !1), this.itemCountPerPage = t.itemCountPerPage, this.face.htmlElement.style.height = t.appliedClan ? "540px" : "630px", e.prototype.update.call(this, t)
        }, t.prototype.selectItem = function(t) {
            e.prototype.selectItem.call(this, t), this.getProps().appliedClan && (this.screeningItem.selected = -1 === this.selectedIndex)
        }, t
    }(c.ClanScrollListBinder);
    t.ClanListBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(1519), i(1527)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1520),
        o = i(1522),
        a = i(1523),
        s = i(1526),
        c = i(629),
        d = i(43);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        e.state("root.menu.MyNumberPlate", function() {
            return new n.StateDefinition("/my-number-plate", 52).container({
                stages: {
                    "number-plate": r.MyNumberPlateBinder
                },
                resolve: {
                    numberPlateInfo: [d.numberPlateService, function(e) {
                        return e.fetchInfo()
                    }]
                }
            })
        }());
        e.state("root.menu.MyNumberPlate.First", function() {
            return new n.StateDefinition("/first", 52, {
                exitCallback: function() {}
            }).dialog({
                stages: {
                    "number-plate-first-selection": o.FirstNumberPlateSelectionBinder
                }
            })
        }());
        e.state("root.menu.MyNumberPlate.Exchange", function() {
            return new n.StateDefinition("/exchange", 52, {
                exitCallback: function() {}
            }).dialog({
                stages: {
                    "number-plate-exchange": a.NumberPlateExchangeBinder
                }
            })
        }());
        e.state("root.menu.MyNumberPlate.Prefix", function() {
            return new n.StateDefinition("/prefix", 52, {
                container: ""
            }).dialog({
                stages: {
                    "number-plate-popup": s.NumberPlatePrefixBinder
                }
            })
        }());
        e.state("root.menu.MyNumberPlate.Lottery", function() {
            return new n.StateDefinition("/lottery", 52, {
                source: "",
                itemId: -1
            }).dialog({
                stages: {
                    "randombox-opening-number-plate": c.NumberPlateLotteryBinder
                }
            })
        }())
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(84),
        a = i(43),
        s = i(1521),
        c = i(42),
        d = i(648),
        l = i(2),
        u = i(59),
        p = i(3),
        h = i(237),
        f = i(13),
        v = i(12),
        m = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-lockGuide1", "MYNUMBERPLATE_PERSONALNUMBER"), this.translate(".id-lockGuide2", "MYNUMBERPLATE_UNIQUENUMBER"), this.translate(".id-lockTitle", "MYNUMBERPLATE_LV15_TEXT1"), this.translate(".id-lockDescription", "MYNUMBERPLATE_LV15_TEXT2"), this.translate(".id-vehicleView .id-buttonName", "MYNUMBERPLATE_TOGGLE_3D"), this.convertFace(".id-vehicleView").on(l.MouseEventEx.CLICK, function() {
                    return p.store.dispatch(o.changeState(u.UIState.VehicleView))
                }), this.initMain(), this.translate(".id-plateView .id-buttonName", "MYNUMBERPLATE_TOGGLE_2D"), this.convertFace(".id-plateView").on(l.MouseEventEx.CLICK, function() {
                    return p.store.dispatch(o.changeState(u.UIState.Main))
                }), this.addChildBinder(".id-numberPlateMain", c.NumberPlateCard, {
                    page: u.Page.MainPage
                }), this.addChildBinder(".id-classCircle", d.NumberPlateClassCircle, {
                    page: u.Page.MainPage
                })
            }, t.prototype.initMain = function() {
                var e = this;
                this.translate(".id-guideLabel1 .id-textField", "MYNUMBERPLATE_PERSONALNUMBER"), this.translate(".id-guideLabel2 .id-textField", "MYNUMBERPLATE_UNIQUENUMBER"), this.translate(".id-equipTag .id-textField", "MYNUMBERPLATE_INSTALLED"), this.translate(".id-stateContainer .id-equip", "MYNUMBERPLATE_INSTALL"), this.translate(".id-stateContainer .id-destroy", "MYNUMBERPLATE_REMOVE"), this.translate(".id-tipContainer .id-textField", "MYNUMBERPLATE_INFO"), this.translate(".id-numberPlateContainer .id-uniqueNumTrade .id-buttonName", "MYNUMBERPLATE_EXCHANGEUNIQUENUMBER"), this.addChildBinder(".id-numberPlateContainer", s.NumberPlateListBinder);
                var t = this.getFace(".id-stateContainer .id-equip"),
                    i = this.getFace(".id-stateContainer .id-destroy");
                this.on(t, l.MouseEventEx.CLICK, function() {
                    t.enabled = i.enabled = !1;
                    var n = e.reduxProps.selected;
                    e.numberPlateService.modifyPlateNumber(n).then(function() {
                        t.enabled = i.enabled = !0
                    })
                }), this.on(i, l.MouseEventEx.CLICK, function() {
                    var t = e.reduxProps.selected,
                        i = e.reduxProps.myNumberPlateInfo.prefix || "",
                        n = e.reduxProps.myNumberPlates[t],
                        r = e.reduxProps.destroysp || 0;
                    e.popupService.draw("DestroyNumberPlatePopup", {
                        personalNumber: i,
                        destroyPlate: n,
                        spacquired: r,
                        confirm: function() {
                            e.numberPlateService.destroyPlate(t).then(function() {
                                e.popupService.chaining = !0, h.NumberPlatePopupHelper.onDestroyPlate(t, r)
                            }).catch(function() {})
                        },
                        cancel: function() {}
                    })
                });
                var n = this.getFace(".id-numberPlateContainer .id-personalNumChange"),
                    r = this.getFace(".id-numberPlateContainer .id-personalNumChange .HitArea");
                this.on(n, l.MouseEventEx.CLICK, function() {
                    e.stateService.go("root.menu.MyNumberPlate.Prefix", {
                        container: "PersonalNumberInputPopup"
                    })
                }), this.on(r, l.MouseEventEx.MOUSE_OVER, function(t) {
                    if (!n.enabled) {
                        var i = e.$filter("translate")("MYNUMBERPLATE_CHANGEPERSONALNUMBER_TOOLTIP");
                        e.tooltipService.show(t, "left", f.TooltipType.Basic, i, {}, {}, "NumberPlatePrefixTooltip")
                    }
                }), this.on(r, l.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                });
                var o = this.getFace(".id-numberPlateContainer .id-uniqueNumTrade"),
                    a = this.getFace(".id-numberPlateContainer .id-uniqueNumTrade .HitArea");
                this.on(o, l.MouseEventEx.CLICK, function() {
                    e.stateService.go("root.menu.MyNumberPlate.Exchange")
                }), this.on(a, l.MouseEventEx.MOUSE_OVER, function(t) {
                    if (!o.enabled) {
                        var i = e.$filter("translate")("MYNUMBERPLATE_EXCHANGEUNIQUENUMBER_TOOLTIP");
                        e.tooltipService.show(t, "left", f.TooltipType.Basic, i, {}, {}, "NumberPlateExchangeTooltip")
                    }
                }), this.on(a, l.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.onAddedToScene = function(e) {
                this.multiPopup(e), this.$window.beNumberPlateSetCameraMode && (this.externalService.camera.numberPlate(), this.playerService.setRecentVehicleIfNeeded(1), this.externalService.beSelectVehicle(v.getRecentVehicle()))
            }, t.prototype.multiPopup = function(e) {
                var t = this,
                    i = [function() {}];
                if (e.lotteryResults && e.lotteryResults.length > 0) {
                    i.pop();
                    var n = function() {
                        return h.NumberPlatePopupHelper.onLotteryRestart(t.popupService, function() {
                            t.stateService.go("root.menu.MyNumberPlate.Lottery", {
                                source: "root.menu.MyNumberPlate",
                                itemId: e.lotteryCode
                            })
                        })
                    };
                    i.push(n)
                }
                if (e.exchangeResults && e.exchangeResults.length > 0) {
                    var r = i.pop(),
                        n = function() {
                            return t.popupService.draw("ExchangeNumberPlateRestartConfirmPopup", {
                                personalNumber: e.myNumberPlateInfo.prefix,
                                plates: e.exchangeResults,
                                confirm: function() {
                                    t.stateService.go("root.menu.MyNumberPlate.Exchange", {
                                        exitCallback: r
                                    })
                                }
                            })
                        };
                    i.push(n)
                }
                if (e.recycleList && _.map(e.recycleList).length > 0) {
                    var o = i.pop(),
                        n = function() {
                            return t.popupService.draw("AutoCollectNumberPlatePopup", {
                                personalNumber: e.myNumberPlateInfo.prefix,
                                plates: e.recycleList,
                                confirm: function() {
                                    o && o()
                                }
                            })
                        };
                    i.push(n)
                }
                if (e.firstList && Object.keys(e.firstList).length > 0) {
                    var a = i.pop(),
                        n = function() {
                            return t.stateService.go("root.menu.MyNumberPlate.First", {
                                exitCallback: a
                            })
                        };
                    i.push(n)
                }
                var s = i.pop();
                s && s()
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                if (!_.isEqual(t.uiState, e.uiState)) switch (e.uiState) {
                    case u.UIState.Lock:
                        this.gotoAndPlay(".id-mainContainer", "lock");
                        break;
                    case u.UIState.Main:
                        t.uiState === u.UIState.FirstBuild ? (this.gotoAndPlay(".id-mainContainer", "moveMain"), this.gotoAndPlay(".id-numberPlateContainer", "moveMain", !0)) : t.uiState === u.UIState.VehicleView ? this.gotoAndPlay(".id-mainContainer", "mainVehicleView_out") : (this.gotoAndPlay(".id-mainContainer", "mainPlateView_in"), this.gotoAndPlay(".id-numberPlateContainer", "mainPlateView_in", !0), this.getFace(".id-numberPlateContainer .id-itemList").emit("reset"));
                        break;
                    case u.UIState.VehicleView:
                        this.gotoAndPlay(".id-mainContainer", "mainVehicleView_in"), this.gotoAndPlay(".id-numberPlateContainer", "mainPlateView_in", !0)
                }
                if (!_.isEqual(t.myNumberPlateInfo, e.myNumberPlateInfo) && e.uiState === u.UIState.FirstBuild) {
                    var i = e.myNumberPlateInfo ? e.myNumberPlateInfo.prefix : "",
                        n = e.myNumberPlateInfo.selected;
                    "" === i || 0 === n.length || p.store.dispatch(o.changeState(u.UIState.Main))
                }
                var r = e.myNumberPlateInfo ? e.myNumberPlateInfo.prefixResetNum : 0;
                this.template(".id-numberPlateContainer .id-personalNumChange .id-buttonName", "MYNUMBERPLATE_CHANGEPERSONALNUMBER", {
                    itemcount: r
                }), this.getFace(".id-numberPlateContainer .id-personalNumChange").enabled = r > 0, this.gotoAndPlay(".id-stateContainer", e.myNumberPlateInfo && e.myNumberPlateInfo.selected.length > 0 && e.selected && e.myNumberPlateInfo.selected[0].plateNumber === e.selected ? "equip" : "normal")
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.numberPlate,
                    i = t.myNumberPlates,
                    n = t.myNumberPlateInfo,
                    r = t.exchangeResults,
                    o = t.lotteryResults,
                    a = t.recycleList,
                    s = t.uiState,
                    c = t.lotteryCode,
                    d = t.firstRandomResults,
                    l = t.myPreviewPlateNumber,
                    u = 0;
                if (i[l]) {
                    var p = i[l].templateCode;
                    u = this.numberPlateService.templateData(p).destorysp
                }
                return {
                    myNumberPlates: i,
                    myNumberPlateInfo: n,
                    firstList: d,
                    exchangeResults: r,
                    lotteryResults: o,
                    recycleList: a,
                    uiState: s,
                    selected: l,
                    destroysp: u,
                    lotteryCode: c
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], m.prototype, "$filter", void 0), n.__decorate([r.autowired(a.numberPlateService)], m.prototype, "numberPlateService", void 0), n.__decorate([r.autowired("popupService")], m.prototype, "popupService", void 0), n.__decorate([r.autowired("stateService")], m.prototype, "stateService", void 0), n.__decorate([r.autowired("tooltipService")], m.prototype, "tooltipService", void 0), n.__decorate([r.autowired("playerService")], m.prototype, "playerService", void 0), n.__decorate([r.autowired("externalService")], m.prototype, "externalService", void 0), n.__decorate([r.autowired("$window")], m.prototype, "$window", void 0), t.MyNumberPlateBinder = m
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(1),
        a = i(43),
        s = i(2),
        c = i(646),
        d = i(3),
        l = i(84),
        u = i(13),
        p = i(239),
        h = i(647);
    ! function(e) {
        e[e.achieved = 0] = "achieved", e[e.current = 1] = "current", e[e.unachieved = 2] = "unachieved"
    }(n || (n = {}));
    var f = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.page = 0, t.pageMax = 1, t.slots = 0, t.plates = [], t.isPaging = !1, t.currentPlateItems = [], t.nextPlateItems = [], t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            this.initTooltip(), this.initPlateList(), this.pageNumberContainer = this.addChildBinder(".id-pageNumberContainer", h.PageNumberContainer, {
                action: "numberPlate.updateMyNumberPlatePage"
            }), this.plateCount = this.addChildBinder(".id-titleContainer .id-count", p.DigitSlashDigitBinder), this.translate(".id-titleContainer .id-title", "MYNUMBERPLATE_MYUNIQUENUMBER")
        }, t.prototype.initTooltip = function() {
            var e = this,
                t = this.getFace(".id-tooltip");
            this.on(t, s.MouseEventEx.MOUSE_OVER, function(t) {
                e.onTooltipOver(t)
            }), this.on(t, s.MouseEventEx.MOUSE_OUT, function() {
                e.onTooltipOut()
            })
        }, t.prototype.onTooltipOver = function(e) {
            var t = this,
                i = d.store.getState().player.level,
                r = this.staticdataLoaderService.numberPlateDataManager.numberPlateData.numberPlateSlotData,
                o = r.filter(function(e) {
                    return "playerlevel" === e.unlocktype
                }).sort(function(e, t) {
                    return e.unlockvalue > t.unlockvalue ? -1 : 1
                }),
                a = r.filter(function(e) {
                    return "vipgrade" === e.unlocktype
                }).sort(function(e, t) {
                    return e.unlockvalue > t.unlockvalue ? -1 : 1
                }),
                s = [],
                c = !1;
            _.each(o, function(e) {
                var r = t.$filter("template")({
                        playerlvl: e.unlockvalue
                    }, "MYNUMBERPLATE_SLOTCONDITION_PLAYERLVL"),
                    o = t.$filter("template")({
                        slotnumber: e.slotnum
                    }, "MYNUMBERPLATE_SLOTCONDITION_SLOTAVAILABLE"),
                    a = n[n.unachieved];
                i >= e.unlockvalue && (c ? a = n[n.achieved] : (a = n[n.current], c = !0)), s.unshift({
                    desc: r,
                    slotDesc: o,
                    achieveStatus: a
                })
            });
            var l = [];
            _.each(a, function(e) {
                var i = t.$filter("template")({
                        level: e.unlockvalue
                    }, "MYNUMBERPLATE_SLOTCONDITION_VIP"),
                    r = t.$filter("template")({
                        slotnumber: e.slotnum
                    }, "MYNUMBERPLATE_SLOTCONDITION_SLOTAVAILABLE_ADDITIONAL"),
                    o = n[n.unachieved];
                l.unshift({
                    desc: i,
                    slotDesc: r,
                    achieveStatus: o
                })
            }), this.tooltipService.show(this.getFace(".id-tooltip .HitArea"), "topright", u.TooltipType.NumberPlateSlot, {
                title: this.$filter("translate")("MYNUMBERPLATE_SLOTCONDITION"),
                levelContent: s,
                vipContent: l
            }, {
                marginLeft: 5,
                marginTop: 24
            })
        }, t.prototype.onTooltipOut = function() {
            this.tooltipService.hide()
        }, t.prototype.initPlateList = function() {
            var e = this;
            this.itemList = this.getFace(".id-itemList"), this.itemList.hasSize = !0, _.times(6, function(t) {
                var i = e.getFace(".id-itemList .id-current" + (t + 1)),
                    n = e.addChildBinder(i, c.NumberPlateListItemBinder, {});
                e.currentPlateItems.push(n), e.on(i, s.MouseEventEx.CLICK, function() {
                    var i = e.plates[6 * e.page + t];
                    i && d.store.dispatch(l.previewNumberPlate(i.plateNumber))
                })
            }), _.times(6, function(t) {
                var i = e.getFace(".id-itemList .id-next" + (t + 1)),
                    n = e.addChildBinder(i, c.NumberPlateListItemBinder, {});
                e.nextPlateItems.push(n)
            }), this.on(this.itemList, "reset", function(t) {
                e.updateCurrentPlates(6 * e.page), e.gotoAndPlay(e.itemList, "default"), e.isPaging = !1
            })
        }, t.prototype.onDetach = function() {
            d.store.dispatch(l.updateMyNumberPlatePage(0))
        }, t.prototype.getItemMovie = function(e) {
            switch (e) {
                case h.PageAction.first:
                case h.PageAction.previous:
                    return h.PageAction[h.PageAction.previous];
                case h.PageAction.next:
                case h.PageAction.last:
                    return h.PageAction[h.PageAction.next];
                default:
                    return h.PageAction[h.PageAction.default]
            }
        }, t.prototype.update = function(e) {
            var t = this;
            if (this.selected !== e.selected || this.page !== e.page || !_.isEqual(e.myNumberPlates, this.plates)) {
                var i = e.plateInfo ? e.plateInfo.selected[0] : void 0;
                if (this.selected !== e.selected) this.selected = e.selected, this.updateCurrentPlates(6 * this.page);
                else if (this.page !== e.page) {
                    var n = this.getItemMovie(e.page > this.page ? h.PageAction.next : h.PageAction.previous);
                    this.page = e.page, this.isPaging || (this.isPaging = !0, this.updateNextPlates(6 * this.page), this.gotoAndPlay(this.itemList, n), setTimeout(function() {
                        t.updateCurrentPlates(6 * t.page)
                    }, 100))
                } else _.isEqual(this.plateInUse, i) || (this.plateInUse = i, this.updateCurrentPlates(6 * this.page));
                var r = this.plates.map(function(e) {
                    return e.plateNumber
                }).sort();
                _.isEqual(r, Object.keys(e.myNumberPlates).sort()) || (this.sortPlates(e.myNumberPlates, i), this.updateCurrentPlates(6 * this.page)), this.slots !== e.slots && (this.slots = e.slots, this.updateCurrentPlates(6 * this.page)), this.pageMax = Math.floor((Math.max(this.plates.length, this.slots) - 1) / 6), this.updatePageNumberContainer(this.page, this.pageMax), this.updateCount(this.plates.length, this.slots), this.getFace(".id-uniqueNumTrade").enabled = this.plates.length > 2
            }
        }, t.prototype.sortPlates = function(e, t) {
            var i = this;
            this.plates = _.values(e).sort(function(e, t) {
                return i.numberPlateService.comparePlate(e, t)
            }), t && (_.remove(this.plates, function(e) {
                return e.plateNumber === t.plateNumber
            }), this.plates.unshift(t))
        }, t.prototype.updateCurrentPlates = function(e) {
            var t = this;
            _.times(6, function(i) {
                var n = e + i >= t.slots;
                t.updatePlate(t.currentPlateItems[i], t.plates[e + i], n)
            })
        }, t.prototype.updateNextPlates = function(e) {
            var t = this;
            _.times(6, function(i) {
                var n = e + i >= t.slots;
                t.updatePlate(t.nextPlateItems[i], t.plates[e + i], n)
            })
        }, t.prototype.updatePlate = function(e, t, i) {
            var n = i && void 0 === t,
                r = void 0 !== t && t.plateNumber === this.selected,
                o = (t || {}).plateNumber === (this.plateInUse || {}).plateNumber;
            e.setProps({
                plate: t,
                lock: n,
                select: r,
                equip: o
            })
        }, t.prototype.updatePageNumberContainer = function(e, t) {
            this.pageNumberContainer.setProps({
                page: e,
                pageMax: t
            })
        }, t.prototype.updateCount = function(e, t) {
            var i = e > t,
                n = {
                    left: {
                        text: e,
                        className: i ? "exceed-color" : "normal-color"
                    },
                    right: {
                        text: t
                    }
                };
            this.plateCount.setProps(n)
        }, t.prototype.mapStateToProps = function(e) {
            var t = e.numberPlate,
                i = t.myNumberPlateInfo;
            return {
                plateInfo: i,
                slots: this.numberPlateService.getPlayerExpandSlots() + (i ? i.slotExpandSize : 0),
                selected: t.myPreviewPlateNumber,
                myNumberPlates: t.myNumberPlates,
                page: t.myNumberPlatePage
            }
        }, t
    }(o.Binder);
    r.__decorate([o.autowired("$filter")], f.prototype, "$filter", void 0), r.__decorate([o.autowired(a.numberPlateService)], f.prototype, "numberPlateService", void 0), r.__decorate([o.autowired("tooltipService")], f.prototype, "tooltipService", void 0), r.__decorate([o.autowired("staticdataLoaderService")], f.prototype, "staticdataLoaderService", void 0), t.NumberPlateListBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(43),
        a = i(2),
        s = i(59),
        c = i(15),
        d = i(42),
        l = i(3),
        u = i(84),
        p = i(8),
        h = i(4),
        f = i(237),
        v = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.currentItems = {}, t.nextItems = {}, t.itemButtons = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.bindStatic(), this.addChildBinder(".id-numberPlateMain", d.NumberPlateCard, {
                    page: s.Page.FirstBuildPage
                }), this.plateSelectButton = this.convertFace(".id-selectButton"), this.plateSelectButton.enabled = !1, this.plateSelectButton.on(a.MouseEventEx.CLICK, function() {
                    return e.selectAPlate()
                }), this.convertFace(".id-confirmButton").on(a.MouseEventEx.CLICK, function() {
                    e.numberPlateService.fetchInfo(), e.gotoAndPlay(e.face, "out"), e.once(e.face, p.EventEx.STOP, function() {
                        h.default.blockEdgeContentsMouseEvent(!1), e.stateService.go("^"), e.exitCallback && e.exitCallback()
                    })
                }), _.times(3, function(t) {
                    var i = e.convertFace(".id-item" + (t + 1));
                    e.itemButtons.push(i), i.on(a.MouseEventEx.CLICK, function(t) {
                        return e.onPlateClicked(t)
                    }), e.currentItems[i.name] = e.addChildBinder(".id-item" + (t + 1) + " .id-current", d.NumberPlateCard), e.nextItems[i.name] = e.addChildBinder(".id-item" + (t + 1) + " .id-next", d.NumberPlateCard), e.addManagedListener(i, "reset", function(t) {
                        e.currentItems[i.name].setProps(e.nextItems[i.name].getProps())
                    })
                })
            }, t.prototype.bindStatic = function() {
                this.translate(".id-effectTitle", "MYNUMBERPLATE_FIRSTNUMBER_ANIMATION"), this.translate(".id-title", "MYNUMBERPLATE_FIRSTNUMBER_UNIQUE_TITLE"), this.translate(".id-selectDescription", "MYNUMBERPLATE_FIRSTNUMBER_UNIQUE_TEXT1"), this.translate(".id-subSelectDescription", "MYNUMBERPLATE_FIRSTNUMBER_UNIQUE_TEXT2"), this.translate(".id-selectButton .id-buttonName", "MYNUMBERPLATE_FIRSTNUMBER_SELECT"), this.translate(".id-confirmButton .id-buttonName", "MYNUMBERPLATE_FIRSTNUMBER_CONFIRM"), this.translate(".id-resultDescription", "MYNUMBERPLATE_FIRSTNUMBER_SELECTED_TEXT1"), this.translate(".id-subResultDescription", "MYNUMBERPLATE_FIRSTNUMBER_SELECTED_TEXT2")
            }, t.prototype.onAddedToScene = function() {
                this.exitCallback = this.$stateParams.exitCallback, this.gotoAndPlay(this.face, "in"), this.plateSelectButton.enabled = !1
            }, t.prototype.onPlateClicked = function(e) {
                var t = this,
                    i = e.currentTarget;
                _.times(3, function(e) {
                    return t.itemButtons[e].selected = !1
                }), i.selected = !0;
                var n = this.currentItems[i.name].getProps().uniqueNumber;
                this.plateSelectButton.enabled = !0, l.store.dispatch(u.selectANumberPlateFromFirstRandomResults(n))
            }, t.prototype.selectAPlate = function() {
                var e = this,
                    t = this.reduxProps.plateNumberSelectedInFirstRandom;
                this.numberPlateService.selectPlate(t, c.NumberPlate.SelectType.INIT_PLAYER).then(function(i) {
                    i.selectRetType === c.NumberPlate.SelectRetType.SUCCESS ? (l.store.dispatch(u.selectANumberPlateFromFirstRandomResults(t)), l.store.dispatch(u.previewNumberPlate(t)), e.gotoAndPlay(e.face, "result")) : i.selectRetType === c.NumberPlate.SelectRetType.RESET && f.NumberPlatePopupHelper.onFirstRandomListResetPopup(function() {
                        var e = i.ret;
                        l.store.dispatch(u.refreshFirstRandomResultList(e))
                    })
                })
            }, t.prototype.update = function(e) {
                var t = this.reduxProps;
                _.isEqual(t.firstRandomList, e.firstRandomList) || e.uiState !== s.UIState.FirstBuild || this.showFirstRandomList(e)
            }, t.prototype.showFirstRandomList = function(e) {
                var t = this;
                if (e && e.firstRandomList) {
                    var i = e.myNumberPlateInfo ? e.myNumberPlateInfo.prefix : "";
                    _.map(e.firstRandomList).forEach(function(e, n) {
                        var r = t.itemButtons[n],
                            o = t.currentItems[r.name].getProps().uniqueNumber;
                        o && o !== e.plateNumber ? (t.nextItems[r.name].setProps({
                            personalNumber: i,
                            uniqueNumber: e.plateNumber,
                            templateCode: e.templateCode
                        }), r.gotoAndPlay("reset")) : t.currentItems[r.name].setProps({
                            personalNumber: i,
                            uniqueNumber: e.plateNumber,
                            templateCode: e.templateCode
                        })
                    })
                }
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.numberPlate;
                return {
                    myNumberPlateInfo: t.myNumberPlateInfo,
                    firstRandomList: t.firstRandomResults,
                    plateNumberSelectedInFirstRandom: t.plateNumberSelectedInFirstRandom,
                    uiState: t.uiState
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$stateParams")], v.prototype, "$stateParams", void 0), n.__decorate([r.autowired(o.numberPlateService)], v.prototype, "numberPlateService", void 0), n.__decorate([r.autowired("stateService")], v.prototype, "stateService", void 0), t.FirstNumberPlateSelectionBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(43),
        a = i(8),
        s = i(4),
        c = i(2),
        d = i(1524),
        l = i(1525),
        u = i(59),
        p = i(42),
        h = i(15),
        f = i(3),
        v = i(84),
        m = i(237),
        g = i(318),
        y = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.personalNumber = "", t.selecting = !1, t.resultSelected = "", t.resultPlates = [], t.resetPlates = [], t.resultPlateItems = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.bindStatic(), this.initIn(), this.initSelect(), this.initResult()
            }, t.prototype.bindStatic = function() {
                this.translate(".id-title", "MYNUMBERPLATE_EXCHANGE_TITLE"), this.translate(".id-probabilityTitle", "MYNUMBERPLATE_EXCHANGE_HIGHCLASS"), this.bindText(".id-probability .id-percentTextField", "%"), this.translate(".id-countTitle", "MYNUMBERPLATE_EXCHANGE_CHOSEN"), this.bindText(".id-count .id-maximumTextField", "/5"), this.translate(".id-exchangeButton .id-buttonName", "MYNUMBERPLATE_EXCHANGE_EXCHANGE"), this.translate(".id-cancelButton .id-buttonName", "MYNUMBERPLATE_EXCHANGE_EXIT"), this.translate(".id-selectDescription", "MYNUMBERPLATE_EXCHANGE_SCREEN_TEXT1"), this.translate(".id-subSelectDescription", "MYNUMBERPLATE_EXCHANGE_SCREEN_TEXT2"), this.translate(".id-selectButton .id-buttonName", "MYNUMBERPLATE_EXCHANGE_SCREEN_GETCHOSEN"), this.translate(".id-subResultDescription", "MYNUMBERPLATE_EXCHANGE_SCREEN_GET_TEXT"), this.translate(".id-confirmButton", "MYNUMBERPLATE_EXCHANGE_SCREEN_GET_CONFIRM"), this.translate("", "MYNUMBERPLATE_EXCHANGE_SCREEN_OWNED_TITLE"), this.translate("", "MYNUMBERPLATE_EXCHANGE_SCREEN_OWNED_TEXT"), this.translate("", "MYNUMBERPLATE_EXCHANGE_SCREEN_OWNED_CONFIRM")
            }, t.prototype.initIn = function() {
                var e = this;
                this._exchangeButton = this.getFace(".id-numberPlateContainer .id-exchangeButton"), this.addChildBinder(".id-numberPlateContainer", l.NumberPlateExchangeListBinder), this.addChildBinder(".id-materialContainer", d.NumberPlateExchangeMaterialContainerBinder), this.on(this.getFace(".id-numberPlateContainer .id-cancelButton"), c.MouseEventEx.CLICK, function() {
                    e.exit()
                }), this.on(this._exchangeButton, c.MouseEventEx.CLICK, function() {
                    var t = {},
                        i = e.reduxProps.selectedBeforeExchange;
                    i.forEach(function(i) {
                        var n = e.reduxProps.plates[i];
                        n && (t[i] = n.templateCode)
                    }), e.popupService.draw("ExchangeNumberPlateConfirmPopup", {
                        personalNumber: e.personalNumber,
                        plates: t,
                        confirm: function() {
                            e.numberPlateService.exchangePlates(i).then(function() {
                                e.selecting = !0, e.gotoAndPlay(e.face, "select")
                            }).catch(function(t) {
                                switch (t.errorCode) {
                                    case u.ErrorCode.NumberPlateAdvanceRandomError:
                                        g.NumberPlateErrorPopupHelper.errorPopup(e.popupService, e.$filter, t, {
                                            confirm: function() {
                                                e.exit()
                                            }
                                        });
                                        break;
                                    default:
                                        e.popupService.drawConfirm("", "", function() {
                                            e.exit()
                                        })
                                }
                            })
                        },
                        cancel: function() {}
                    })
                })
            }, t.prototype.initSelect = function() {
                var e = this;
                _.times(3, function(t) {
                    var i = e.getFace(".id-item" + (t + 1));
                    e.resultPlateItems.push(i);
                    var n = e.addChildBinder(".id-item" + (t + 1) + " .id-current", p.NumberPlateCard);
                    e.resultPlates.push(n);
                    var r = e.addChildBinder(".id-item" + (t + 1) + " .id-next", p.NumberPlateCard);
                    e.resetPlates.push(r), e.gotoAndPlay(".id-item" + (t + 1) + " .id-highClassTag", "in"), e.translate(".id-item" + (t + 1) + " .id-highClassTag .id-highTagLabel .id-textField", "MYNUMBERPLATE_EXCHANGE_SCREEN_HIGHCLASS"), e.on(i, c.MouseEventEx.CLICK, function() {
                        _.times(3, function(i) {
                            e.resultPlateItems[i].selected = t === i, t === i && e.reduxProps.results && (e.resultSelected = e.reduxProps.results[i].plateNumber)
                        }), e._selectButton.enabled = !0
                    }), e.on(i, "reset", function(e) {
                        n.setProps(r.getProps())
                    })
                }), this._selectButton = this.getFace(".id-selectButton"), this._selectButton.enabled = !1, this.on(this._selectButton, c.MouseEventEx.CLICK, function() {
                    e._selectButton.enabled = !1;
                    var t = e.reduxProps.results.map(function(e) {
                        return e.plateNumber
                    });
                    e.numberPlateService.selectPlate(e.resultSelected, h.NumberPlate.SelectType.EXCHANGE).then(function(i) {
                        switch (i.selectRetType) {
                            case h.NumberPlate.SelectRetType.SUCCESS:
                                e.selecting = !1, e.gotoAndPlay(e.face, "result");
                                break;
                            case h.NumberPlate.SelectRetType.RESET:
                                var n = _.cloneDeep(i.ret);
                                t = t.map(function(e) {
                                    return _.remove(n, function(t) {
                                        return t.plateNumber === e
                                    }).length > 0 ? void 0 : e
                                });
                                var r = _.findIndex(t, function(e) {
                                    return void 0 !== e
                                });
                                e.resultPlateItems[r].selected = !1, m.NumberPlatePopupHelper.onExchangeOwned(e.popupService, function() {
                                    r > -1 && (n.length > 0 && e.resetPlates[r].setProps({
                                        personalNumber: e.personalNumber,
                                        uniqueNumber: n[0].plateNumber,
                                        templateCode: n[0].templateCode
                                    }), e.gotoAndPlay(e.resultPlateItems[r], "reset")), f.store.dispatch(v.refreshExchangeResultList(i.ret))
                                })
                        }
                    })
                })
            }, t.prototype.initResult = function() {
                var e = this;
                this.resultPlate = this.addChildBinder(".id-numberPlateMain", p.NumberPlateCard);
                var t = this.getFace(".id-confirmButton");
                t.enabled = !0, this.on(t, c.MouseEventEx.CLICK, function() {
                    t.enabled = !1, f.store.dispatch(v.updateMyNumberPlatePage(0)), f.store.dispatch(v.previewNumberPlate("")), e.exit()
                })
            }, t.prototype.onAddedToScene = function(e) {
                if (this.exitCallback = this.$stateParams.exitCallback, e.results && e.results.length > 0 && e.selectedBeforeExchange && 0 === e.selectedBeforeExchange.length) {
                    var t = this.selecting ? "select" : "select_restart";
                    this.gotoAndPlay(this.face, t)
                } else this.gotoAndPlay(this.face, "in")
            }, t.prototype.onDetach = function() {
                this.selecting = !1, this.resultSelected = ""
            }, t.prototype.exit = function() {
                var e = this;
                this.selecting = !1, this.resultSelected = "", this.gotoAndPlay(this.face, "out"), this.once(this.face, a.EventEx.STOP, function() {
                    s.default.blockEdgeContentsMouseEvent(!1), e.stateService.go("^"), e.exitCallback && e.exitCallback()
                })
            }, t.prototype.update = function(e) {
                if (this.personalNumber !== e.personalNumber && (this.personalNumber = e.personalNumber), e.results.length > 0 && 0 === e.selectedBeforeExchange.length && !_.isEqual(this.reduxProps.results, e.results) ? this.updateSelect(e.results) : _.isEqual(this.reduxProps.plates, e.plates) && _.isEqual(this.reduxProps.selectedBeforeExchange, e.selectedBeforeExchange) || this.updateIn(e.plates, e.selectedBeforeExchange), this.resultSelected) {
                    var t = e.plates[this.resultSelected];
                    this.updateResult(t)
                }
            }, t.prototype.updateSelect = function(e) {
                var t = this;
                e.forEach(function(e, i) {
                    t.getFace(".id-item" + (i + 1) + " .id-highClassTag .id-highTagLabel").visible = t.numberPlateService.isHigh(e.templateCode), t.resultPlates[i].setProps({
                        personalNumber: t.personalNumber,
                        uniqueNumber: e.plateNumber,
                        templateCode: e.templateCode
                    })
                })
            }, t.prototype.updateIn = function(e, t) {
                var i = this,
                    n = _.pick(e, t),
                    r = _.values(n).map(function(e) {
                        return i.numberPlateService.isHigh(e.templateCode)
                    }),
                    o = _.countBy(r).true || 0,
                    a = _.filter(this.staticdataLoaderService.numberPlateDataManager.numberPlateData.numberPlateExchangeData, {
                        totalexchangenumber: r.length,
                        highclassnumber: o
                    })[0];
                this.bindText(".id-probability .id-probabilityText .id-textField", a ? 1e3 * a.highclassprob / 10 : 0), this.gotoAndStop(".Probability", a ? "select" : "default"), this.bindText(".id-count .id-count .id-textField", r.length), this.gotoAndStop(".id-count", r.length > 0 ? "select" : "default"), this._exchangeButton.enabled = r.length >= 2 && r.length <= 5
            }, t.prototype.updateResult = function(e) {
                if (e && this.resultPlate) {
                    var t = this.numberPlateService.isHigh(e.templateCode) ? "MYNUMBERPLATE_EXCHANGE_SCREEN_GET_HIGHCLASS" : "MYNUMBERPLATE_EXCHANGE_SCREEN_GET_NORMALCLASS";
                    this.translate(".id-resultDescription", t), this.resultPlate.setProps({
                        myNumberPlateInfo: {
                            prefix: this.personalNumber
                        },
                        plates: (i = {}, i[e.plateNumber] = e, i),
                        plateNumber: e.plateNumber
                    });
                    var i
                }
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.numberPlate;
                return {
                    personalNumber: t.myNumberPlateInfo ? t.myNumberPlateInfo.prefix || "" : "",
                    plates: t.myNumberPlates,
                    selectedBeforeExchange: t.exchangeList,
                    results: t.exchangeResults || []
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], y.prototype, "$filter", void 0), n.__decorate([r.autowired("$stateParams")], y.prototype, "$stateParams", void 0), n.__decorate([r.autowired("stateService")], y.prototype, "stateService", void 0), n.__decorate([r.autowired(o.numberPlateService)], y.prototype, "numberPlateService", void 0), n.__decorate([r.autowired("popupService")], y.prototype, "popupService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], y.prototype, "staticdataLoaderService", void 0), t.NumberPlateExchangeBinder = y
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(42),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.plates = {}, t.personalNumber = "", t.cards = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-materialDescription", "MYNUMBERPLATE_EXCHANGE_TEXT1"), this.translate(".id-subMaterialDescription", "MYNUMBERPLATE_EXCHANGE_TEXT2"), _.times(5, function(t) {
                    var i = e.addChildBinder(".id-numberPlate" + (t + 1), o.NumberPlateCard);
                    e.cards.push(i)
                })
            }, t.prototype.update = function(e) {
                if (!_.isEqual(this.reduxProps, e)) {
                    this.personalNumber = e.personalNumber;
                    var t = e.plates,
                        i = {};
                    _.each(e.selected, function(e) {
                        t[e] && (i[e] = t[e].templateCode)
                    });
                    var n = _.difference(Object.keys(this.plates), Object.keys(i)).length > 0,
                        r = _.difference(Object.keys(i), Object.keys(this.plates));
                    this.plates = i, n ? this.updateDecrease(this.plates) : this.updateIncrease(this.plates, r[0])
                }
            }, t.prototype.updateDecrease = function(e) {
                var t = this,
                    i = Object.keys(e);
                i.sort().forEach(function(i, n) {
                    t.updateCard(t.cards[n], t.personalNumber, i, e[i])
                }), this.gotoAndPlay(this.face, "numberPlate" + (i.length + 1) + "_out")
            }, t.prototype.updateIncrease = function(e, t) {
                if (!t || !e[t]) return void this.updateDecrease(e);
                var i = Object.keys(e).length;
                this.updateCard(this.cards[i - 1], this.personalNumber, t, e[t]), this.gotoAndPlay(this.face, "numberPlate" + i)
            }, t.prototype.updateCard = function(e, t, i, n) {
                e && e.setProps({
                    personalNumber: t,
                    uniqueNumber: i,
                    templateCode: n
                })
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.numberPlate;
                return {
                    personalNumber: t.myNumberPlateInfo ? t.myNumberPlateInfo.prefix : "",
                    plates: t.myNumberPlates,
                    selected: t.exchangeList || []
                }
            }, t
        }(r.Binder);
    t.NumberPlateExchangeMaterialContainerBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(43),
        a = i(3),
        s = i(84),
        c = i(647),
        d = i(646),
        l = i(2),
        u = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.page = 0, t.isPaging = !1, t.plates = [], t.selected = [], t.currentPlateItems = [], t.nextPlateItems = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.initPlateList(), this.pageNumberContainer = this.addChildBinder(".id-pageNumberContainer", c.PageNumberContainer, {
                    action: "numberPlate.updateExchangePage"
                })
            }, t.prototype.initPlateList = function() {
                var e = this;
                this.itemList = this.getFace(".id-itemList"), _.times(6, function(t) {
                    var i = e.getFace(".id-itemList .id-current" + (t + 1)),
                        n = e.addChildBinder(i, d.NumberPlateListItemBinder, {
                            lockMovie: "empty"
                        });
                    e.currentPlateItems.push(n), e.on(i, l.MouseEventEx.CLICK, function() {
                        var i = e.plates[6 * e.page + t];
                        if (i) {
                            var n = _.indexOf(e.selected, i.plateNumber) > -1 ? "unselectNumberPlateForExchange" : "selectNumberPlateForExchange";
                            i && a.store.dispatch(s[n](i.plateNumber))
                        }
                    })
                }), _.times(6, function(t) {
                    var i = e.getFace(".id-itemList .id-next" + (t + 1)),
                        n = e.addChildBinder(i, d.NumberPlateListItemBinder, {
                            lockMovie: "empty"
                        });
                    e.nextPlateItems.push(n)
                }), this.on(this.itemList, "reset", function(t) {
                    e.updateCurrentPlates(6 * e.page, e.isSelectOverflow()), e.gotoAndPlay(e.itemList, "default"), e.isPaging = !1
                })
            }, t.prototype.onAddedToScene = function() {
                a.store.dispatch(s.updateExchangePage(0))
            }, t.prototype.onDetach = function() {
                a.store.dispatch(s.updateExchangePage(0)), a.store.dispatch(s.clearExchangeList())
            }, t.prototype.getItemMovie = function(e) {
                switch (e) {
                    case c.PageAction.first:
                    case c.PageAction.previous:
                        return c.PageAction[c.PageAction.previous];
                    case c.PageAction.next:
                    case c.PageAction.last:
                        return c.PageAction[c.PageAction.next];
                    default:
                        return c.PageAction[c.PageAction.default]
                }
            }, t.prototype.isSelectOverflow = function() {
                return this.selected && 5 <= this.selected.length
            }, t.prototype.update = function(e) {
                var t = this;
                if (_.isEqual(this.selected, e.selected))
                    if (this.page !== e.page) {
                        var i = this.getItemMovie(e.page > this.page ? c.PageAction.next : c.PageAction.previous);
                        this.page = e.page, this.isPaging || (this.isPaging = !0, this.updateNextPlates(6 * this.page, this.isSelectOverflow()), this.gotoAndPlay(this.itemList, i), setTimeout(function() {
                            t.updateCurrentPlates(6 * t.page, t.isSelectOverflow())
                        }, 100))
                    } else {
                        var n = _.values(e.plates);
                        this.plates = n.sort(function(e, i) {
                            return t.numberPlateService.comparePlate(e, i)
                        }), this.updateCurrentPlates(6 * this.page, this.isSelectOverflow())
                    }
                else this.selected = e.selected, this.updateCurrentPlates(6 * this.page, this.isSelectOverflow());
                var r = Math.floor((Object.keys(e.plates).length - 1) / 6);
                this.updatePageNumberContainer(e.page, r)
            }, t.prototype.updateCurrentPlates = function(e, t) {
                var i = this;
                _.times(6, function(n) {
                    i.updatePlate(i.currentPlateItems[n], i.plates[e + n], {
                        overflow: t
                    })
                })
            }, t.prototype.updateNextPlates = function(e, t) {
                var i = this;
                _.times(6, function(n) {
                    i.updatePlate(i.nextPlateItems[n], i.plates[e + n], {
                        overflow: t
                    })
                })
            }, t.prototype.updatePlate = function(e, t, i) {
                var n = void 0 === t,
                    r = void 0 !== t && _.indexOf(this.selected, t.plateNumber) > -1,
                    o = i.overflow;
                e.setProps({
                    plate: t,
                    lock: n,
                    select: r,
                    disableUnselect: o
                })
            }, t.prototype.updatePageNumberContainer = function(e, t) {
                this.pageNumberContainer.setProps({
                    page: e,
                    pageMax: t
                })
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.numberPlate,
                    i = t.myNumberPlateInfo,
                    n = [];
                i && i.selected.length > 0 && n.push(i.selected[0].plateNumber);
                var r = _.omit(t.myNumberPlates, n);
                return {
                    page: t.exchangePage,
                    plates: r,
                    selected: t.exchangeList
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired(o.numberPlateService)], u.prototype, "numberPlateService", void 0), t.NumberPlateExchangeListBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(43),
        a = i(2),
        s = i(42),
        c = i(47),
        d = i(44),
        l = i(8),
        u = i(4),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this.$stateParams.container;
                this.targetContainer = this.getFace("." + e), this.targetContainer.visible = !0, this.gotoAndPlay(this.targetContainer, "in")
            }, t.prototype.exit = function() {
                var e = this;
                this.gotoAndPlay(this.targetContainer, "out"), this.once(this.targetContainer, l.EventEx.STOP, function() {
                    u.default.blockEdgeContentsMouseEvent(!1), e.stateService.go("^")
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$stateParams")], p.prototype, "$stateParams", void 0), n.__decorate([r.autowired("stateService")], p.prototype, "stateService", void 0), t.NumberPlatePopupBinder = p;
    var h = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.bindStatic(), this.initInput(), this.card = this.addChildBinder(".id-numberPlate", s.NumberPlateCard), this.description = this.getFace(".id-description .id-textField"), this.confirmButton = this.getFace(".id-confirmButton"), this.confirmButton.enabled = !1, this.on(this.confirmButton, a.MouseEventEx.CLICK, function() {
                e.confirmButton.enabled = !1, e.numberPlateService.modifyPlatePrefix(e.input.text).then(function(t) {
                    e.popupService.draw("ConfirmPopup", {
                        title: "MYNUMBERPLATE_PERSONAL_POPUP_DONE_TITLE",
                        description: e.$filter("template")({
                            personalnumber: t.prefix
                        }, "MYNUMBERPLATE_PERSONAL_POPUP_DONE_TEXT"),
                        confirmString: "MYNUMBERPLATE_PERSONAL_POPUP_DONE_CONFIRM",
                        confirm: function() {
                            e.exit()
                        }
                    })
                }).catch(function(t) {
                    if (c.IslandCodes.NUMBER_PLATE === Number(t.islandCode)) {
                        var i = d.parseError(t).description;
                        e.translate(e.description, i), e.confirmButton.enabled = !0
                    }
                })
            }), this.on(this.getFace(".id-concelButton"), a.MouseEventEx.CLICK, function() {
                e.exit()
            })
        }, t.prototype.bindStatic = function() {
            this.translate(".id-titleLabel .id-textField", "MYNUMBERPLATE_PERSONAL_POPUP_TITLE"), this.translate(".id-confirmButton .id-buttonName .id-textField", "MYNUMBERPLATE_PERSONAL_POPUP_CHANGE"), this.translate(".id-concelButton .id-buttonName .id-textField", "MYNUMBERPLATE_PERSONAL_POPUP_CANCEL")
        }, t.prototype.initInput = function() {
            var e = this;
            this.input = this.getFace(".id-textInput .id-textFieldContainer .id-textField"), this.input.text = "", this.input.maxLength = 2, this.input.htmlElement.oninput = function(t) {
                var i = 2 === e.input.text.length;
                e.confirmButton.enabled = i, e.card.setProps({
                    personalNumber: i ? e.input.text : e.reduxProps.personalNumber,
                    uniqueNumber: e.reduxProps.uniqueNumber,
                    templateCode: 1
                })
            }
        }, t.prototype.onAddedToScene = function() {
            var t = this;
            e.prototype.onAddedToScene.call(this), this.translate(this.description, "MYNUMBERPLATE_PERSONAL_POPUP_TEXT"), this.gotoAndPlay(this.card.face, "in"), setTimeout(function() {
                t.input.htmlElement.focus()
            }, 500)
        }, t.prototype.update = function(e) {
            var t = e.personalNumber,
                i = e.uniqueNumber;
            this.card.setProps({
                personalNumber: t,
                uniqueNumber: i,
                templateCode: 1
            })
        }, t.prototype.mapStateToProps = function(e) {
            var t = e.numberPlate,
                i = t.myNumberPlateInfo.prefix,
                n = t.myNumberPlateInfo.selected;
            return {
                personalNumber: i,
                uniqueNumber: n ? n[0].plateNumber : ""
            }
        }, t
    }(p);
    n.__decorate([r.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([r.autowired(o.numberPlateService)], h.prototype, "numberPlateService", void 0), n.__decorate([r.autowired("popupService")], h.prototype, "popupService", void 0), t.NumberPlatePrefixBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1528),
        o = i(43),
        a = i(1531);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        e.state("root.menu.NumberPlateSearchPurchase", function() {
            return new n.StateDefinition("/number-search", 53).container({
                stages: {
                    "number-plate-search": r.SearchNumberPlateBinder
                },
                resolve: {
                    numberPlateSearch: [o.numberPlateService, function(e) {
                        e.fetchInfo()
                    }],
                    shop: ["shopService", function(e) {
                        return e.fetchCash()
                    }]
                }
            })
        }());
        e.state("root.menu.NumberPlateSearchPurchase.Purchase", function() {
            return new n.StateDefinition("/purchase/{productCode}", 12, {
                productCode: ""
            }).dialog({
                stages: {
                    "shop-popup": a.NumberPlateDecidePurchaseBinder
                }
            })
        }())
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(43),
        a = i(2),
        s = i(8),
        c = i(172),
        d = i(29),
        l = i(42),
        u = i(648),
        p = i(1529),
        h = i(1530),
        f = i(59),
        v = i(84),
        m = i(3),
        g = i(104),
        y = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.updatelistItemSelected = function(e) {
                this.listBinder.binders.forEach(function(t) {
                    t.updateSelected(t.getProps().info.index === e)
                })
            }, t
        }(g.LineScrollListBinder),
        S = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.inputs = [], t.prevInputs = ["", "", "", "", ""], t.searched = !1, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.bindStatic(), this.initSearchInput(), this.initSearchFilter(), this.addChildBinder(".id-numberPlateMain", l.NumberPlateCard, {
                    page: f.Page.SearchPage
                }), this.addChildBinder(".id-classCircle", u.NumberPlateClassCircle, {
                    page: f.Page.SearchPage
                }), this.addChildBinder(".id-detailContainer", h.SearchNumberPlateDetailBinder), this.searchList = this.addChildBinder(".id-listContainer .id-numberPlateList", y, {
                    itemBinderClass: p.NumberPlateSearchListItemBinder,
                    itemCountPerPage: 7,
                    selectedItem: function(e) {
                        e && e.plateNumber && m.store.dispatch(v.selectANumberPlateFromSearchResults(e.plateNumber))
                    }
                }), this.searchDescription = this.getFace(".id-searchListContainer .id-searchDescription .id-textField"), this.addManagedListener(this.getFace(".id-searchListContainer .id-searchContainer .id-resetButton"), a.MouseEventEx.CLICK, function() {
                    _.times(5, function(t) {
                        e.prevInputs[t] = "", e.inputs[t].text = ""
                    }), e.searchButton.enabled = !1
                }), this.buyButton = this.getFace(".id-searchListContainer .id-buyButton"), this.buyButton.enabled = !1, this.addManagedListener(this.buyButton, a.MouseEventEx.CLICK, function() {
                    e.reduxProps.selectedSearch && m.store.dispatch(v.decidePurchaseNumberPlate(e.reduxProps.selectedSearch)), e.stateService.go("root.menu.NumberPlateSearchPurchase.Purchase")
                }), this.gotoAndStop(".id-propertyContainer .id-monetaryUnitIcon", "cash"), this.visible(".id-searchListContainer .id-buyButton", !this.publisherService.isDisablePurchaseNumperPlate()), this.visible(".id-propertyContainer", !this.publisherService.isDisablePurchaseNumperPlate())
            }, t.prototype.bindStatic = function() {
                this.translate(".id-searchTitleLabel", "SEARCHPURCHASE_SEARCHUNIQUE"), this.translate(".id-defaultGuide .id-description", "SEARCHPURCHASE_LISTGUIDE"), this.translate(".id-propertyContainer .id-title .id-textField", "SEARCHPURCHASE_MYCASH"), this.translate(".id-titleContainer .id-titleLabel1", "SEARCHPURCHASE_TYPE"), this.translate(".id-titleContainer .id-titleLabel2", "SEARCHPURCHASE_UNIQUENUMBER"), this.translate(".id-titleContainer .id-titleLabel3", "SEARCHPURCHASE_STATUS"), this.translate(".id-titleContainer .id-titleLabel4", "SEARCHPURCHASE_PRICE"), this.translate(".id-searchListContainer .id-buyButton .id-buttonName", "SEARCHPURCHASE_PURCHASE")
            }, t.prototype.initSearchInput = function() {
                var e = this;
                _.times(5, function(t) {
                    var i = e.getFace(".id-searchListContainer .id-searchContainer .id-searchTextInput" + (t + 1) + " .id-textFieldContainer .id-textField");
                    e.inputs.push(i)
                }), this.searchButton = this.getFace(".id-searchListContainer .id-searchContainer .id-searchButton"), _.each(this.inputs, function(t, i) {
                    t.maxLength = 1, e.addManagedListener(t, c.KeyboardEventEx.KEY_UP, function(t) {
                        var n = t.originalEvent;
                        d.KeyboardMap.getKeyCode("SPACE") === n.keyCode && (i < 4 && e.inputs[i + 1].htmlElement.focus(), 4 === i && e.inputs[0].htmlElement.focus(), n.preventDefault())
                    }), e.addManagedListener(t, c.KeyboardEventEx.KEY_DOWN, function(t) {
                        var n = t.originalEvent;
                        d.KeyboardMap.getKeyCode("TAB") === n.keyCode && (i < 4 && e.inputs[i + 1].htmlElement.focus(), 4 === i && e.inputs[0].htmlElement.focus(), n.preventDefault())
                    }), t.htmlElement.oninput = function(n) {
                        var r = t.text.slice(-1);
                        e.prevInputs[i] = r, e.updateSearchButton()
                    }, t.htmlElement.onblur = function(n) {
                        var r = t.text.slice(-1);
                        e.prevInputs[i] = r, e.updateSearchButton(), t.text = r
                    }, t.htmlElement.onfocus = function(e) {
                        t.htmlElement.select(), e.preventDefault()
                    }, t.htmlElement.onmouseup = function(e) {
                        t.htmlElement.select(), e.preventDefault()
                    }
                }), this.translate(this.searchButton, "SEARCHPURCHASE_SEARCH"), this.addManagedListener(this.searchButton, a.MouseEventEx.CLICK, function() {
                    e.searchButton.enabled = !1, e.searched = !0;
                    var t = "";
                    _.times(5, function(i) {
                        t += e.inputs[i].text && !/\s/.test(e.inputs[i].text) ? e.inputs[i].text : "?"
                    }), (t.match(/\?/g) || []).length > 1 ? e.searchButton.enabled = !0 : e.numberPlateService.searchPlates(t).then(function(t) {
                        0 === t.length ? e.updateSearchResult([]) : e.updateSearchResult(t), e.searchButton.enabled = !0
                    })
                })
            }, t.prototype.initSearchFilter = function() {
                var e = this;
                this.searchFilter = this.getFace(".id-filterDropDownButton");
                var t = this.staticdataLoaderService.numberPlateDataManager.numberPlateData.numberplateFilterData.map(function(t) {
                    return {
                        text: e.$filter("translate")(t.text),
                        action: t.action
                    }
                });
                this.searchFilter.items = t, this.addManagedListener(this.searchFilter, s.EventEx.CHANGE, function() {
                    var t = _.values(e.reduxProps.searchResults).sort(function(t, i) {
                            return e.numberPlateService.comparePlate(t, i)
                        }),
                        i = e.applySearchFilter(t);
                    e.searchList.selectItem(0), e.searchList.scrollTop(), e.updateSearchList(i)
                })
            }, t.prototype.onAddedToScene = function(e) {
                e.uiState !== f.UIState.Lock && m.store.dispatch(v.changeState(f.UIState.Search)), this.translate(this.searchDescription, "SEARCHPURCHASE_SLOTGUIDE"), this.searchButton.enabled = !1
            }, t.prototype.onDetach = function() {
                m.store.dispatch(v.selectANumberPlateFromSearchResults(null)), m.store.dispatch(v.refreshSearchList([]))
            }, t.prototype.update = function(e) {
                var t = this;
                if (this.reduxProps.cash !== e.cash) {
                    var i = "tencent" === this.publisherService.publisher ? "TCCASH" : "NXCASH";
                    this.bindText(".id-propertyContainer .id-textField", e.cash[i] || 0)
                }
                if (!_.isEqual(this.reduxProps.searchResults, e.searchResults) || this.reduxProps.selectedSearch !== e.selectedSearch) {
                    var n = _.values(e.searchResults).sort(function(e, i) {
                            return t.numberPlateService.comparePlate(e, i)
                        }),
                        r = this.applySearchFilter(n);
                    if (this.updateSearchList(r), e.lv < 15) this.buyButton.enabled = !1;
                    else if (e.searchResults) {
                        var o = e.searchResults[e.selectedSearch];
                        if (o)
                            if (o.pid && "" !== o.pid) this.buyButton.enabled = !1;
                            else {
                                var a = this.numberPlateService.templateData(o.templateCode);
                                this.buyButton.enabled = a.purchase
                            }
                        else this.buyButton.enabled = !1
                    } else this.buyButton.enabled = !1
                }
            }, t.prototype.updateSearchButton = function() {
                this.searchButton.enabled = _.countBy(this.prevInputs, function(e) {
                    return /^\s*$/.test(e)
                }).false >= 4
            }, t.prototype.updateSearchResult = function(e) {
                var t = this.applySearchFilter(e);
                this.updateSearchList(t)
            }, t.prototype.updateSearchList = function(e) {
                var t = e && e.length > 0;
                this.getFace(".id-defaultGuide").visible = !t;
                var i = this.searched && !t ? "SEARCHPURCHASE_SLOTGUIDE_NONE" : "SEARCHPURCHASE_SLOTGUIDE";
                if (this.translate(this.searchDescription, i), this.displaySearchList(e), t) {
                    var n = this.searchList.getSelectedItem();
                    (!n || !n.plateNumber) && this.searchList.selectItem(0)
                } else this.searchList.selectNone(), m.store.dispatch(v.selectANumberPlateFromSearchResults(""))
            }, t.prototype.displaySearchList = function(e) {
                for (var t = this, i = _.map(e, function(e) {
                        return n.__assign({}, e, {
                            disablePurchase: t.publisherService.isDisablePurchaseNumperPlate()
                        })
                    }), r = i.length; r < 7;) i.push({
                    plateNumber: void 0,
                    templateCode: void 0,
                    disablePurchase: void 0
                }), r += 1;
                this.searchList.setProps({
                    items: i
                })
            }, t.prototype.applySearchFilter = function(e) {
                return this[this.searchFilter.selectedItem.action](e)
            }, t.prototype.onFilterAll = function(e) {
                return e
            }, t.prototype.onFilterPurchase = function(e) {
                var t = this;
                return e.filter(function(e) {
                    return !0 == !e.pid && t.numberPlateService.templateData(e.templateCode).purchase
                })
            }, t.prototype.onFilterOwned = function(e) {
                return e.filter(function(e) {
                    return !1 == !e.pid
                })
            }, t.prototype.onFilterRandomItem = function(e) {
                var t = this;
                return e.filter(function(e) {
                    return !0 == !e.pid && t.numberPlateService.templateData(e.templateCode).lottery
                })
            }, t.prototype.onFilterExchange = function(e) {
                var t = this;
                return e.filter(function(e) {
                    return !0 == !e.pid && t.numberPlateService.templateData(e.templateCode).exchange
                })
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.numberPlate,
                    i = t.uiState,
                    n = e.shop.cash;
                return {
                    uiState: i,
                    lv: (e.player ? e.player.level : 0) || 0,
                    cash: n,
                    searchResults: t.searchResults,
                    selectedSearch: t.plateNumberSelectedInSearch
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], S.prototype, "$filter", void 0), n.__decorate([r.autowired(o.numberPlateService)], S.prototype, "numberPlateService", void 0), n.__decorate([r.autowired("publisherService")], S.prototype, "publisherService", void 0), n.__decorate([r.autowired("stateService")], S.prototype, "stateService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], S.prototype, "staticdataLoaderService", void 0), t.SearchNumberPlateBinder = S
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(43),
        a = i(42),
        s = i(2),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.hasSize = !0, this.addManagedListener(this.face, s.MouseEventEx.CLICK, function(t) {
                    var i = e.getProps(),
                        n = i.info,
                        r = i.onClick;
                    r && r(n)
                }), this.gotoAndStop(".id-price .id-monetaryUnitIcon", "cash")
            }, t.prototype.update = function(e) {
                var t = e.info;
                if (!t.plateNumber) return void this.displayEmpty(e);
                this.face.htmlElement.classList.remove("prevent-click");
                var i = this.numberPlateService.isHigh(t.templateCode);
                this.translate(".id-classInfo", i ? "SEARCHPURCHASE_LIST_HIGHCLASS" : "SEARCHPURCHASE_LIST_NORMAL"), this.visible(".id-numberPlate", !0), this.addChildBinder(".id-numberPlate", a.NumberPlateCard).setProps({
                    uniqueNumber: t.plateNumber,
                    templateCode: t.templateCode
                });
                var n = this.generateDetailInfo(!1 == !t.pid, t.templateCode);
                if (this.bindHtml(".id-detailInfo", n), this.visible(".id-price", !e.info.disablePurchase), !e.info.disablePurchase) {
                    var r = this.numberPlateService.purchasePrice(t.templateCode);
                    this.bindText(".id-price .id-textField", r > 0 ? this.$filter("currency")(r, "", 0) : "-"), this.visible(".id-price .id-monetaryUnitIcon", r > 0), this.gotoAndStop(".id-price", r > 0 ? "price" : "noPrice")
                }
                this.gotoAndStop(".id-background", e.info.index % 2 ? "even" : "odd")
            }, t.prototype.displayEmpty = function(e) {
                var t = e.info.index || 0;
                this.translate(".id-classInfo", ""), this.visible(".id-numberPlate", !1), this.bindHtml(".id-detailInfo", ""), this.visible(".id-price", !e.info.disablePurchase), e.info.disablePurchase || (this.bindText(".id-price .id-textField", ""), this.gotoAndStop(".id-price", "price"), this.visible(".id-price .id-monetaryUnitIcon", !1)), this.face.htmlElement.classList.add("prevent-click"), this.gotoAndStop(".id-background", t % 2 ? "even" : "odd")
            }, t.prototype.generateDetailInfo = function(e, t) {
                if (e) return this.$filter("translate")("SEARCHPURCHASE_LIST_UNAVAILABLE");
                var i = this.numberPlateService.templateData(t);
                if (i.auction) return this.$filter("translate")("SEARCHPURCHASE_LIST_UNAVAILABLE");
                var n = i.lottery,
                    r = i.exchange,
                    o = n || r ? this.$filter("translate")("SEARCHPURCHASE_LIST_RANDOM") : "",
                    a = i.purchase ? this.$filter("translate")("SEARCHPURCHASE_LIST_PURCHASE") : "";
                return [o, a].join(o && a ? "," : "")
            }, t.prototype.updateSelected = function(e) {
                this.face.selected = e, this.classNames(".id-price", e ? "selected" : "")
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired(o.numberPlateService)], c.prototype, "numberPlateService", void 0), t.NumberPlateSearchListItemBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(43),
        a = i(59),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.availableTitle = this.getFace(".id-availableTitle .id-textField"), this.availableDescription = this.getFace(".id-availableDescription .id-textField"), this.unavailableDescription = this.getFace(".id-unavailableDescription .id-textField"), this.gotoAndPlay(this.face, "default")
            }, t.prototype.update = function(e) {
                var t = e.plate;
                if (!t) return void this.displayEmpty();
                if (t.pid) return void this.displayOwned(t.pid);
                var i = this.numberPlateService.templateData(t.templateCode);
                if (i.auction) return void this.displayUnavailable();
                this.displayAvailable(e.uiState === a.UIState.Lock, i)
            }, t.prototype.displayEmpty = function() {
                this.availableTitle.text = "", this.availableDescription.text = "", this.unavailableDescription.text = "", this.gotoAndPlay(this.face, "default")
            }, t.prototype.displayOwned = function(e) {
                var t = this;
                this.playerSnippetService.getSnippetAsync(e).then(function(e) {
                    t.availableTitle.text = "", t.availableDescription.text = "", t.unavailableDescription.text = [t.$filter("translate")("SEARCHPURCHASE_DETAIL_OWNED"), t.$filter("template")({
                        playerlvl: e.level,
                        playername: e.name
                    }, "SEARCHPURCHASE_DETAIL_PLAYER")].join("\n"), t.gotoAndPlay(t.face, "unavailable")
                })
            }, t.prototype.displayUnavailable = function() {
                this.availableTitle.text = "", this.availableDescription.text = "", this.unavailableDescription.text = this.$filter("translate")("SEARCHPURCHASE_DETAIL_UNAVAILABLE"), this.gotoAndPlay(this.face, "unavailable")
            }, t.prototype.displayAvailable = function(e, t) {
                this.availableTitle.text = this.$filter("translate")("SEARCHPURCHASE_DETAIL_AVAILABLE"), this.unavailableDescription.text = "", this.availableDescription.text = e ? this.$filter("translate")("SEARCHPURCHASE_LV15_GUIDE_SELECTED") : _.remove([t.exchange ? this.$filter("translate")("SEARCHPURCHASE_DETAIL_AVAILABLE_EXCHANGE") : void 0, t.lottery ? this.$filter("translate")("SEARCHPURCHASE_DETAIL_AVAILABLE_RANDOMITEM") : void 0, t.purchase ? this.$filter("translate")("SEARCHPURCHASE_DETAIL_AVAILABLE_PURCHASE") : void 0], void 0).join("\n"), this.gotoAndPlay(this.face, "available")
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.numberPlate,
                    i = t.uiState,
                    n = t.searchResults,
                    r = t.plateNumberSelectedInSearch;
                return {
                    uiState: i,
                    plate: n && r && r in n ? n[r] : void 0
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([r.autowired("playerSnippetService")], s.prototype, "playerSnippetService", void 0), n.__decorate([r.autowired(o.numberPlateService)], s.prototype, "numberPlateService", void 0), t.SearchNumberPlateDetailBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(321),
        a = i(27),
        s = i(43),
        c = i(1532),
        d = i(84),
        l = i(3),
        u = i(4),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.setItemCard = function() {
                var e = _.minBy(this.targetBunches, function(e) {
                    return e.count
                });
                this.addChildBinder(this.targetContainer.$(".id-itemCard"), a.ItemCardBinder).setProps({
                    info: {
                        name: this.$filter("template")({
                            uniquenumber: this.product.name
                        }, "NUMBERPLATE_ITEMCARD_NAME"),
                        type: "NUMBER_PLATE_INSTANCE",
                        price: e.price,
                        currency: e.currency,
                        count: 1,
                        fallbackImg: void 0,
                        plate: this.product.spare
                    },
                    mouseDisabled: !0
                })
            }, t.prototype.setProduct = function() {
                this.product = this.numberPlateService.getDecidePurchaseItem()
            }, t.prototype.setNextFlow = function() {
                var e = this;
                this.nextBinder = this.addChildBinder(this.targetContainer, c.NumberPlateDecidePurchaseNextBinder, {
                    exit: function() {
                        l.store.dispatch(d.clearPurchaseNumberPlate()), e.exit()
                    }
                })
            }, t.prototype.getDescAreaValues = function() {
                var e = this.$filter("template")({
                    count: 1
                }, "SEARCHPURCHASE_PURCHASE_POPUP_COUNT");
                return ['<div class="desc">' + this.product.desc + "</div>", '<div class="count">' + e + "</div>"]
            }, t.prototype.setBunchesDropDown = function() {
                var e = this;
                this.targetBunches = _.filter(this.product.bunches, function(t) {
                    return t.currency === e.currentCurrency
                }), this.bunchesDropDown.items = this.targetBunches.map(function(e, t) {
                    return {
                        text: "" + u.default.toMoney(e.price),
                        value: t,
                        bunch: e
                    }
                })
            }, t.prototype.onDetach = function() {
                this.targetContainer.visible = !1
            }, t
        }(o.ProductPurchaseBinder);
    n.__decorate([r.autowired(s.numberPlateService)], p.prototype, "numberPlateService", void 0), t.NumberPlateDecidePurchaseBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(322),
        a = i(43),
        s = i(318),
        c = i(84),
        d = i(3),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(t) {
                e.prototype.update.call(this, t), this.enableButton(".id-giftButton", !1)
            }, t.prototype.refinedParams = function(e) {
                void 0 === e && (e = 0);
                var t = this.$filter("currency")(Math.abs(e), "", 0);
                return {
                    description: [this.$filter("translate")("SEARCHPURCHASE_INSUFFICIENTCASH_POPUP_TEXT"), this.$filter("template")({
                        insufficientcash: t
                    }, "SEARCHPURCHASE_INSUFFICIENTCASH_POPUP_CASH")].join("\n"),
                    confirmString: this.$filter("translate")("SEARCHPURCHASE_INSUFFICIENTCASH_POPUP_CHARGE")
                }
            }, t.prototype.buy = function() {
                var e = this,
                    t = this.shopService.getMyMoney(this.currentCurrency) - this.currentBunch.price;
                if (t < 0) return d.store.dispatch(c.clearPurchaseNumberPlate()), void this.openInSufficientPopup(t);
                this.stateService.go("^"), d.store.dispatch(c.confirmPurchaseNumberPlate(this.product.name));
                var i = function() {
                        e.popupService.chaining = !1, e.numberPlateService.buyPlate(e.product.name).then(function() {
                            d.store.dispatch(c.clearPurchaseNumberPlate()), e.shopService.fetchCash()
                        }).catch(function(t) {
                            d.store.dispatch(c.clearPurchaseNumberPlate()), s.NumberPlateErrorPopupHelper.errorPopup(e.popupService, e.$filter, t)
                        })
                    },
                    n = function() {
                        e.popupService.chaining = !0, e.popupService.draw("ConfirmCancelPopup", {
                            title: "SEARCHPURCHASE_FINALCONFIRM_POPUP_TITLE",
                            description: e.$filter("translate")("SEARCHPURCHASE_FINALCONFIRM_POPUP_TEXT1") + "\n" + e.$filter("translate")("SEARCHPURCHASE_FINALCONFIRM_POPUP_TEXT2"),
                            confirmString: "SEARCHPURCHASE_FINALCONFIRM_POPUP_CONFIRM",
                            cancelString: "SEARCHPURCHASE_FINALCONFIRM_POPUP_CANCEL",
                            confirm: i,
                            cancel: function() {
                                d.store.dispatch(c.clearPurchaseNumberPlate())
                            }
                        })
                    },
                    r = d.store.getState().numberPlate.searchResults[this.product.name];
                this.popupService.draw("BuyShopItemConfirmPopup", {
                    name: this.product.name,
                    type: "NUMBER_PLATE_INSTANCE",
                    code: r.templateCode,
                    price: this.currentBunch.price,
                    currency: this.currentCurrency,
                    possession: this.shopService.getMyMoney(this.currentCurrency),
                    count: 1,
                    hideSingleCount: !0,
                    plate: r,
                    confirm: "tencent" === this.publisherService.publisher ? i : n,
                    cancel: function() {
                        d.store.dispatch(c.clearPurchaseNumberPlate())
                    }
                })
            }, t
        }(o.PurchaseNextBinder);
    n.__decorate([r.autowired("configLoader")], l.prototype, "configLoader", void 0), n.__decorate([r.autowired(a.numberPlateService)], l.prototype, "numberPlateService", void 0), t.NumberPlateDecidePurchaseNextBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(1534), i(1542)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1535),
        o = i(197);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/trademarket/auctionHouse", 54).container({
            stages: {
                "auction-main": r.AuctionHouseBinder
            },
            resolve: {}
        }).dialog({
            stages: {
                "auction-detail-popup": o.AuctionItemDetailPopupBinder
            }
        });
        e.state("root.menu.TradeAuctionHouse", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(93),
        a = i(2),
        s = i(649),
        c = i(326),
        d = i(1536),
        l = i(1541),
        u = i(651),
        p = i(653),
        h = i(329),
        f = i(654),
        v = i(8),
        m = i(29),
        g = i(67),
        y = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.statusHandlers = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-refreshButton", "AUCTION_REFRESH"), this.translate(".id-refreshNotification", "MYAUCTION_REFRESH_DONE"), this.on(".id-resetButton", a.MouseEventEx.CLICK, this.onResetButtonClick.bind(this)), this.on(".id-refreshButton", a.MouseEventEx.CLICK, this.onRefreshButtonClick.bind(this)), this.categoryBinder = this.addChildBinder(".id-leftMenu", r.CollectionBinder, {
                    instanceBinder: l.AuctionCategoryItemBinder
                }), this.initSearchArea(), this.initFilterArea(), this.initItemListArea(), this.addChildBinder(".id-auctionNotificationListContainer", h.AuctionNotificationContainerBinder), this.addChildBinder(".id-bannerContainer", u.AuctionAdvertisementBinder), this.addChildBinder(".id-auctionNotificationContainer", p.AuctionBiddingBinder), this.addChildBinder(".id-mileageContainer", f.AuctionMileageBinder)
            }, t.prototype.initSearchArea = function() {
                var e = this;
                this.translate(".id-searchButton", "AUCTION_SEARCH_BUTTON"), this.on(".id-searchButton", a.MouseEventEx.CLICK, this.onSearchButtonClick.bind(this));
                var t = this.getFace(".id-searchTextInput");
                this.searchTextInput = t.textInput;
                var i = this.searchTextInput.textField.htmlElement,
                    n = function(t) {
                        t.keyCode === m.KeyboardMap.getKeyCode("ENTER") && e.onSearchButtonClick()
                    };
                i.onfocus = function() {
                    i.addEventListener("keydown", n)
                }, i.onblur = function() {
                    i.removeEventListener("keydown", n)
                };
                var r = this.staticdataLoaderService.auctionDataManager.getConfig("Auction_Search_Max_Length");
                this.searchTextInput.maxLength = _.parseInt(r);
                var o = this.$filter("translate")("AUCTION_SEARCH_TEXT");
                this.searchTextInput.textField.applyHtmlElementAttributes(["placeholder=" + o])
            }, t.prototype.initFilterArea = function() {
                var e = this;
                this.translate(".id-favoriteToggleButton .id-buttonName", "AUCTION_FAVORITE_TOGGLE"), this.favoriteFilter = this.getFace(".id-favoriteToggleButton"), this.favoriteFilter.on(a.MouseEventEx.CLICK, this.onFavoriteFilterSelected.bind(this)), this.auctionHouseStatusFilter = this.convertFace(".id-filterDropDownButton"), this.translate(".id-filterDropDownButton .id-buttonName", "AUCTION_FILTER_DEFAULT_TEXT"), this.auctionHouseStatusFilter.items.push(this.getFilterStringByKey("all"), this.getFilterStringByKey("inProgress"), this.getFilterStringByKey("finished")), this.statusHandlers.push(this.onStatusFilter.bind(this, "all")), this.statusHandlers.push(this.onStatusFilter.bind(this, "inProgress")), this.statusHandlers.push(this.onStatusFilter.bind(this, "finished")), this.auctionHouseStatusFilter.on(v.EventEx.CHANGE, function() {
                    var t = e.auctionHouseStatusFilter.selectedIndex;
                    e.statusHandlers[t] && e.statusHandlers[t]()
                })
            }, t.prototype.initItemListArea = function() {
                var e = this.addChildBinder(".id-titleContainer", c.SortTabBinder, {
                    tabInfos: [{
                        title: this.$filter("translate")("AUCTION_LIST_NAME"),
                        type: "item"
                    }, {
                        title: this.$filter("translate")("AUCTION_LIST_STATUS"),
                        type: "state"
                    }, {
                        title: this.$filter("translate")("AUCTION_LIST_PRICE"),
                        type: "price"
                    }],
                    initDescending: !0,
                    initSelectedIndex: 1,
                    sortFun: this.sortFun.bind(this)
                });
                this.auctionHouseItemListBinder = this.addChildBinder(".id-auctionItemListContainer", s.AuctionScrollListBinder, {
                    itemBinderClass: d.AuctionHouseItemBinder,
                    sortTabBinder: e,
                    itemCountPerPage: 7
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.initCategory(), this.auctionService.fetchAuctionItems(void 0, function() {
                    e.auctionService.SubscribeAuctionNotice()
                })
            }, t.prototype.initCategory = function() {
                var e = _.map(this.staticdataLoaderService.auctionDataManager.categorySettings);
                this.categoryBinder.applyCollection(e)
            }, t.prototype.onDetach = function() {
                this.auctionService.UnsubscribeAuctionNotice(), o.UpdateNotificationListDisplayStatus(!1)
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.auction;
                return {
                    autionItems: t.autionItems,
                    category: t.category,
                    searchOption: t.searchOption,
                    isFavoriteValidate: t.isFavoriteValidate,
                    auctionHouseStatusFilter: t.auctionHouseStatusFilter,
                    auctionHouseSortMode: t.auctionHouseSortMode
                }
            }, t.prototype.update = function(e) {
                var t = this,
                    i = _.map(e.autionItems),
                    n = _.filter(i, function(i) {
                        return t.filterItems(i, e)
                    });
                this.sortAuctionItems(n, e.auctionHouseSortMode), this.updateAuctionHouseItemList(n, this.reduxProps.category !== e.category), this.favoriteFilter.selected = e.isFavoriteValidate, _.forEach(this.auctionHouseStatusFilter.items, function(i, n) {
                    i === t.getFilterStringByKey(e.auctionHouseStatusFilter) && (t.auctionHouseStatusFilter.selectedIndex = n)
                })
            }, t.prototype.filterItems = function(e, t) {
                var i = t.searchOption,
                    n = e.itemName,
                    r = e.itemDesc,
                    o = i.toLowerCase(),
                    a = n.toLowerCase(),
                    s = r.toLowerCase();
                if ("All" !== t.category && e.category !== t.category) return !1;
                if (t.isFavoriteValidate && !e.isFavorite) return !1;
                if (t.searchOption.length > 0 && -1 === a.indexOf(o) && -1 === s.indexOf(o)) return !1;
                if ("inProgress" === t.auctionHouseStatusFilter) {
                    if (e.isFinished) return !1
                } else if ("finished" === t.auctionHouseStatusFilter && !e.isFinished) return !1;
                return !0
            }, t.prototype.updateAuctionHouseItemList = function(e, t) {
                var i = _.clone(e);
                if (e.length < 7)
                    for (var n = e.length; n < 7; ++n) i.push({
                        disable: !0
                    });
                this.auctionHouseItemListBinder.setProps({
                    items: i
                }), t && (this.auctionHouseItemListBinder.selectItem(-1), this.auctionHouseItemListBinder.scrollTop())
            }, t.prototype.sortFun = function(e, t) {
                o.updateAuctionSort({
                    mode: e.type,
                    isDesc: t
                })
            }, t.prototype.onFavoriteFilterSelected = function() {
                o.updateAuctionFavoriteFilter(!this.favoriteFilter.selected), this.auctionHouseItemListBinder.scrollTop()
            }, t.prototype.sortAuctionItems = function(e, t) {
                var i = !0 === t.isDesc ? -1 : 1;
                switch (t.mode) {
                    case "item":
                        e.sort(g(function(e, t) {
                            return e.itemName.localeCompare(t.itemName)
                        }, i));
                        break;
                    case "state":
                        e.sort(g(function(e) {
                            return !e.isFinished
                        }, i).thenBy(function(e, t) {
                            var i = e.finishTime.valueOf();
                            e.bidding && e.closingTime.valueOf() < i && (i = e.closingTime.valueOf());
                            var n = t.finishTime.valueOf();
                            return t.bidding && t.closingTime.valueOf() < n && (n = t.closingTime.valueOf()), e.isFinished && t.isFinished ? i - n : n - i
                        }, i).thenBy(function(e, t) {
                            return (e.bidding ? e.bidding.bidNumber : 0) - (t.bidding ? t.bidding.bidNumber : 0)
                        }, i).thenBy(function(e, t) {
                            return (e.bidding ? e.bidding.price : e.startPrice) - (t.bidding ? t.bidding.price : t.startPrice)
                        }, -1).thenBy(function(e, t) {
                            return e.itemName.localeCompare(t.itemName)
                        }, 1).thenBy(function(e, t) {
                            return e.startTime.valueOf() - t.startPrice.valueOf()
                        }, 1));
                        break;
                    case "price":
                        e.sort(g(function(e, t) {
                            return (e.bidding ? e.bidding.price : e.startPrice) - (t.bidding ? t.bidding.price : t.startPrice)
                        }, i))
                }
            }, t.prototype.onStatusFilter = function(e) {
                o.updateAuctionHouseStatusFilter(e), this.auctionHouseItemListBinder.scrollTop()
            }, t.prototype.onSearchButtonClick = function() {
                o.updateAuctionSearchOption(this.searchTextInput.textField.text), this.auctionHouseItemListBinder.scrollTop()
            }, t.prototype.onResetButtonClick = function() {
                this.searchTextInput.textField.text = "", o.updateAuctionSearchOption(this.searchTextInput.textField.text), this.auctionHouseItemListBinder.scrollTop()
            }, t.prototype.onRefreshButtonClick = function() {
                this.auctionService.fetchAuctionItems(void 0, this.onSuccessRefresh.bind(this))
            }, t.prototype.onSuccessRefresh = function() {
                this.gotoAndPlay(".id-refreshNotificationContainer", "in")
            }, Object.defineProperty(t.prototype, "keywords", {
                get: function() {
                    return this.searchTextInput.textField.text
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.getFilterStringByKey = function(e) {
                switch (e) {
                    case "all":
                        return this.$filter("translate")("AUCTION_FILTER_ALL");
                    case "inProgress":
                        return this.$filter("translate")("AUCTION_FILTER_INPROGRESS");
                    case "finished":
                        return this.$filter("translate")("AUCTION_FILTER_END");
                    default:
                        return ""
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], y.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], y.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("auctionService")], y.prototype, "auctionService", void 0), t.AuctionHouseBinder = y
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(327),
        s = i(197),
        c = i(328),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.auctionItemBinder = this.addChildBinder(".AuctionItem", a.AuctionItemBinder), this.translate(".id-imminentEndTimeTitle", "AUCTION_LIST_STATUS_NEAREND"), this.translate(".id-auctionEnd", "AUCTION_LIST_STATUS_ENDED"), this.translate(".id-buyNowContainer .id-buyNowPriceTitle", "AUCTION_LIST_PRICE_IMMEDIATE"), this.favoriteBtn = this.getFace(".id-favoriteButton"), this.favoriteBtn.on(o.MouseEventEx.CLICK, this.onFavoriteSelected.bind(this)), this.bidBtn = this.getFace(".id-bidButton"), this.translate(".id-bidButton .id-buttonName", "AUCTION_BID"), this.bidBtn.on(o.MouseEventEx.CLICK, this.onBid.bind(this))
            }, t.prototype.update = function(e) {
                if (this.gotoAndStop(".id-background", e.info.index % 2 ? "even" : "odd"), !0 === e.info.disable) return void(this.face.enabled = !1);
                this.face.enabled = !0, this.itemDetail = e.info, this.updateAuctionItem()
            }, t.prototype.updateAuctionItem = function() {
                var e = {
                    plateNumber: this.itemDetail.instanceCode,
                    templateCode: this.itemDetail.itemCode
                };
                this.auctionItemBinder.setProps({
                    info: {
                        code: this.itemDetail.itemCode,
                        type: this.itemDetail.itemType,
                        img: void 0,
                        fallbackImg: void 0,
                        plate: "NUMBER_PLATE_INSTANCE" === this.itemDetail.itemType ? e : void 0,
                        count: 1
                    },
                    isFavorite: this.itemDetail.isFavorite,
                    isFinished: this.itemDetail.isFinished
                }), this.bindText(".id-itemName", this.itemDetail.itemName), this.translate(".id-itemType", this.staticdataLoaderService.auctionDataManager.getCategoryGlobalKey(this.itemDetail.category));
                var t = this.itemDetail.bidding ? this.itemDetail.bidding.price : this.itemDetail.startPrice;
                this.bindText(".id-price", this.$filter("currency")(t, "", 0));
                var i = this.getFace(".id-buyNowPrice"),
                    n = this.getFace(".id-buyNowContainer .id-buyNowPriceTitle");
                this.itemDetail.immediatePrice && this.itemDetail.immediatePrice > 0 ? (i.visible = !0, n.visible = !0, this.bindText(i, this.$filter("currency")(this.itemDetail.immediatePrice, "", 0))) : (i.visible = !1, n.visible = !1);
                var r = this.getFace(".id-awaitingBiddingStatusContainer");
                if (this.itemDetail.isFinished) this.gotoAndPlay(r, "end");
                else {
                    var o = (this.itemDetail.closingTime.valueOf() - this.serverTimeService.time.valueOf()) / 1e3;
                    if ((o = Math.max(0, o)) >= c.ONE_DAY_SECONDS + c.SERVER_TIME_THRESHOLD) {
                        this.gotoAndPlay(r, "endTime");
                        var a = c.AuctionUtil.formatDateTime(this.itemDetail.closingTime),
                            s = a.date,
                            d = a.time;
                        this.bindText(".id-dayTextField", s), this.bindText(".id-timeTextField", d)
                    } else o = Math.min(c.ONE_DAY_SECONDS - 1, o), this.gotoAndPlay(r, "imminent"), this.bindText(".id-imminentEndTime", c.AuctionUtil.formatRemainTime(o))
                }
                this.favoriteBtn.selected = this.itemDetail.isFavorite
            }, t.prototype.onFavoriteSelected = function() {
                this.auctionService.SetAuctionItemFavorite(this.itemDetail.id, !this.itemDetail.isFavorite)
            }, t.prototype.onBid = function() {
                this.auctionService.fetchBiddingsWithAuctionItemID(this.itemDetail.id, s.AuctionItemDetailPopupBinder.popUp.bind(this))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], d.prototype, "staticdataLoaderService", void 0), n.__decorate([r.autowired("auctionService")], d.prototype, "auctionService", void 0), n.__decorate([r.autowired("serverTimeService")], d.prototype, "serverTimeService", void 0), t.AuctionHouseItemBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(93),
        a = i(1538),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-numberLabel", "AUCTIONPRODUCT_POPUP_BIDCOUNT"), this.translate(".id-bidAmountLabel", "AUCTIONPRODUCT_POPUP_BIDPRICE"), this.historyItems = [];
                for (var e = 0; e < 6; e++) {
                    var t = this.getFace(".id-bidAmount" + e.toString() + " .id-textField"),
                        i = this.getFace(".id-biddersName" + e.toString() + " .id-textField"),
                        n = this.getFace(".id-bidNum" + e.toString() + "  .id-textField"),
                        r = this.getFace(".id-bidNum" + e.toString() + "  .id-iconContainer");
                    this.historyItems.push(new a.AuctionBiddingHistoryItem(this, t, i, n, r, this.$filter))
                }
            }, t.prototype.updateBiddings = function(e, t) {
                if (e) {
                    this.itemDetail = e;
                    var i = t ? 0 : 1,
                        n = 0 === e.historyBiddings.length;
                    this.biddings = [];
                    for (var r = 0; r < 6; r++) this.biddings.push(void 0);
                    for (var r = 0; r < e.historyBiddings.length; r++) this.biddings[r + i] = e.historyBiddings[r];
                    n && (this.biddings[1] = {
                        id: void 0,
                        auctionItemId: void 0,
                        pid: void 0,
                        price: this.itemDetail.startPrice,
                        bidNumber: 0,
                        bidTime: void 0,
                        status: void 0,
                        playerName: this.$filter("translate")("AUCTIONPRODUCT_POPUP_STARTPRICE")
                    });
                    for (var r = 0; r < 6; r++) this.historyItems[r].updateBidding(this.biddings[r]);
                    t ? (this.gotoAndPlay(this.face, "refresh", !1), o.updateIsPlayBiddingHistoryAnim(!1)) : this.gotoAndPlay(this.face, "default", !0)
                }
            }, t.prototype.setSmallNum = function(e, t) {
                t <= 0 ? e.visible = !1 : (e.visible = !0, this.gotoAndStop(e, t.toString() + "k"))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), t.AuctionBiddingHistoryBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(3),
        r = function() {
            function e(e, t, i, n, r, o) {
                this.binder = e, this.amountLbl = t, this.nameLbl = i, this.numLbl = n, this.smallNumMC = r, this.$filter = o, this.setVisable(!1)
            }
            return e.prototype.updateBidding = function(e) {
                if (!e) return void this.setVisable(!1);
                this.updateDesc(e.price, e.playerName, e.bidNumber)
            }, e.prototype.updateDesc = function(e, t, i) {
                this.setVisable(!0), this.amountLbl.htmlText = this.$filter("currency")(e, "", 0), this.nameLbl.htmlText = t === n.store.getState().player.name ? this.$filter("template")({
                    name: t
                }, "AUCTION_PLAYER_NAME") : t, this.setNum(i)
            }, e.prototype.setNum = function(e) {
                e = Math.min(e, 9999);
                var t = Math.floor(e / 1e3);
                this.binder.setSmallNum(this.smallNumMC, t);
                var i = e % 1e3;
                this.numLbl.htmlText = i.toString()
            }, e.prototype.setVisable = function(e) {
                this.amountLbl.visible = e, this.nameLbl.visible = e, this.numLbl.visible = e, this.smallNumMC.visible = e
            }, e
        }();
    t.AuctionBiddingHistoryItem = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(258),
        a = i(93),
        s = i(2),
        c = i(29),
        d = i(4),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-mileageLabel", "AUCTIONPRODUCT_POPUP_MYMILEAGE"), this.translate(".id-bidAmountLabel", "AUCTIONPRODUCT_POPUP_MYBID"), this.translate(".id-buyNowLabel", "AUCTIONPRODUCT_POPUP_IMMEDIATEPRICE"), this.translate(".id-buttonName", "AUCTIONPRODUCT_POPUP_IMMEDIATEPURCHASE"), this.translate(".id-bidButton .id-buttonName", "AUCTIONPRODUCT_POPUP_BID"), this.translate(".id-endTitle", "AUCTIONPRODUCT_POPUP_END_TEXT1"), this.translate(".id-endDescription", "AUCTIONPRODUCT_POPUP_END_TEXT2"), this.buyNowBtn = this.getFace(".id-buyNowButton"), this.buyNowBtn.on(s.MouseEventEx.CLICK, this.onBuyNow.bind(this)), this.bidBtn = this.getFace(".id-bidButton"), this.bidBtn.on(s.MouseEventEx.CLICK, this.onBid.bind(this)), this.priceInput = this.getFace(".id-price");
                var t = function(t) {
                        return e.onInputPrice(t)
                    },
                    i = this.priceInput.textField.htmlElement;
                i.onfocus = function() {
                    return i.addEventListener("input", t)
                }, i.onblur = function() {
                    return i.removeEventListener("input", t)
                }, this.gotoAndStopAll(".MonetaryUnitIcon", "mileage")
            }, t.prototype.updateBidOption = function(e, t) {
                this.item = e, this.mileage = t, e.isFinished ? this.updateBidOptionFinished() : this.updateBidOptionBidding()
            }, t.prototype.updateBidOptionFinished = function() {
                this.gotoAndPlay(this.face, "end"), this.buyNowBtn.enabled = !1, this.bidBtn.enabled = !1
            }, t.prototype.updateBidOptionBidding = function() {
                this.gotoAndPlay(this.face, "default"), this.bindText(".id-mileage", this.$filter("currency")(this.mileage.balance, "", 0));
                var e = this.getFace(".id-buyNowPrice");
                this.isValidImmediatePrice(this.item.immediatePrice) ? (e.visible = !0, this.bindText(e, this.$filter("currency")(this.item.immediatePrice, "", 0))) : e.visible = !1, this.initMinMaxPrice(), this.priceInput.htmlText = this.$filter("currency")(_.toNumber(this.minPrice), "", 0), this.updateBidBtn(), this.updateBuyNowBtn()
            }, t.prototype.updateBidBtn = function() {
                var e = _.toNumber(this.priceInput.textField.text.replace(/\D/g, ""));
                if (isNaN(e)) return void(this.bidBtn.enabled = !1);
                this.bidBtn.enabled = this.mileage.balance >= e
            }, t.prototype.updateBuyNowBtn = function() {
                this.buyNowBtn.enabled = this.isValidImmediatePrice(this.item.immediatePrice) && this.mileage.balance >= this.item.immediatePrice
            }, t.prototype.onInputPrice = function(e) {
                if (e && e.keyCode === c.KeyboardMap.getKeyCode("ENTER")) return this.onBid(), void this.priceInput.textField.htmlElement.blur();
                var t = this.priceInput.textField.text.replace(/\D/g, "");
                this.priceInput.textField.text = this.$filter("currency")(_.toNumber(t), "", 0), this.updateBidBtn()
            }, t.prototype.onBid = function() {
                var e = _.toNumber(this.priceInput.textField.text.replace(/\D/g, ""));
                return e < this.minPrice ? void a.updatePopUpMsg({
                    msg: this.$filter("template")({
                        minprice: d.default.toMoney(this.minPrice)
                    }, "AUCTIONPRODUCT_POPUP_MESSAGE_LOW"),
                    isSuccess: !1
                }) : this.isValidImmediatePrice(this.item.immediatePrice) && e >= this.item.immediatePrice ? (e = this.item.immediatePrice, this.priceInput.textField.text = this.$filter("currency")(e, "", 0), void this.onBuyNow()) : void this.auctionService.BidForItemWithPrice(this.item.id, e, this.onSuccessBid.bind(this), this.onFailBid.bind(this))
            }, t.prototype.onBuyNow = function() {
                var e = this;
                this.popupService.draw("ConfirmCancelPopup", {
                    title: "AUCTIONPRODUCT_POPUP_IMMEDIATE_TITLE",
                    description: this.$filter("template")({
                        mileage: d.default.toMoney(this.item.immediatePrice)
                    }, "AUCTIONPRODUCT_POPUP_IMMEDIATE_TEXT"),
                    confirmString: "AUCTIONPRODUCT_POPUP_IMMEDIATE_YES",
                    cancelString: "AUCTIONPRODUCT_POPUP_IMMEDIATE_NO",
                    confirm: function() {
                        e.auctionService.BidForItemWithPrice(e.item.id, e.item.immediatePrice, e.onSuccessBid.bind(e), e.onFailBid.bind(e))
                    }
                })
            }, t.prototype.onSuccessBid = function(e) {
                a.updateIsPlayBiddingHistoryAnim(!0), this.auctionService.fetchBiddingsWithAuctionItemID(this.item.id), e.isFinished ? a.updatePopUpMsg({
                    msg: this.$filter("translate")("AUCTIONPRODUCT_POPUP_MESSAGE_SUCCESS_PURCHASE"),
                    isSuccess: !0
                }) : a.updatePopUpMsg({
                    msg: this.$filter("translate")("AUCTIONPRODUCT_POPUP_MESSAGE_SUCCESS_BID"),
                    isSuccess: !0
                })
            }, t.prototype.onFailBid = function(e) {
                var t;
                switch (e.errorCode) {
                    case o.ErrorCode.AuctionBiddingLowerThanMinimumBid:
                        t = "AUCTIONPRODUCT_POPUP_MESSAGE_NEWBID";
                        break;
                    case o.ErrorCode.AuctionItemAlreadyFinished:
                        t = "AUCTIONPRODUCT_POPUP_END_TEXT1";
                        break;
                    default:
                        t = "AUCTIONPRODUCT_POPUP_DEFAULT_ERROR"
                }
                a.updatePopUpMsg({
                    msg: this.$filter("translate")(t),
                    isSuccess: !1
                })
            }, t.prototype.initMinMaxPrice = function() {
                this.minPrice = this.item.startPrice, this.item.historyBiddings.length > 0 && (this.minPrice = this.item.historyBiddings[0].price, this.minPrice = this.getMinBid(this.minPrice), this.isValidImmediatePrice(this.item.immediatePrice) && this.minPrice > this.item.immediatePrice && (this.minPrice = this.item.immediatePrice))
            }, t.prototype.getMinBid = function(e) {
                var t = Math.ceil(Math.log(e + 1) / Math.log(10) - 1);
                return t < 1 && (t = 1), Math.pow(10, t - 1) + e
            }, t.prototype.isValidImmediatePrice = function(e) {
                return !!(e && e > 0)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([r.autowired("auctionService")], l.prototype, "auctionService", void 0), n.__decorate([r.autowired("popupService")], l.prototype, "popupService", void 0), t.AuctionBiddingOptionBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(13),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.face.on(o.MouseEventEx.MOUSE_OVER, function(t) {
                    return e.onHelpOver(t)
                }), this.face.on(o.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.onHelpOver = function(e) {
                var t = this.$filter("translate")("AUCTIONPRODUCT_POPUP_WAITTILL_TOOLTIP");
                this.tooltipService.show(e, "topright", a.TooltipType.Basic, t)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], s.prototype, "tooltipService", void 0), t.AuctionEndTooltipBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(93),
        a = i(2),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.face.hasSize = !0, this.categorySetting = this.props, this.initSelfUI()
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    category: e.auction.category
                }
            }, t.prototype.update = function(e) {
                this.categoryButton.selected = e.category === this.categorySetting.key
            }, t.prototype.initSelfUI = function() {
                this.categoryButton = this.face, this.categoryButton.on(a.MouseEventEx.CLICK, this.onCategorySelected.bind(this)), this.bindText(".id-menuName", this.$filter("translate")(this.categorySetting.globalKey)), this.gotoAndStop(".id-iconContainer", this.categorySetting.action)
            }, t.prototype.onCategorySelected = function() {
                o.updateAuctionCategory(this.categorySetting.key)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), t.AuctionCategoryItemBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1543),
        o = i(197);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/shop/auctionMyStatus", 55).container({
            stages: {
                "auction-my-status": r.AuctionMyStatusBinder
            },
            resolve: {}
        }).dialog({
            stages: {
                "auction-detail-popup": o.AuctionItemDetailPopupBinder
            }
        });
        e.state("root.menu.TradePlayerAuction", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(651),
        a = i(654),
        s = i(649),
        c = i(326),
        d = i(8),
        l = i(2),
        u = i(653),
        p = i(329),
        h = i(1544),
        f = i(93),
        v = i(4),
        m = i(67),
        g = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.statusHandlers = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.addChildBinder(".id-bannerContainer", o.AuctionAdvertisementBinder), this.addChildBinder(".id-auctionNotificationContainer", u.AuctionBiddingBinder), this.addChildBinder(".id-mileageContainer", a.AuctionMileageBinder), this.favoriteFilter = this.getFace(".id-favoriteToggleButton"), this.favoriteFilter.on(l.MouseEventEx.CLICK, this.onFavoriteFilterSelected.bind(this)), this.translate(".id-favoriteToggleButton .id-buttonName", "MYAUCTION_FAVORITE_TOGGLE"), this.myStatusFilter = this.convertFace(".id-filterDropDownButton"), this.translate(".id-filterDropDownButton .id-buttonName", "MYAUCTION_FILTER_DEFAULT_TEXT"), this.myStatusFilter.items.push(this.getFilterStringByKey("all"), this.getFilterStringByKey("inProgress"), this.getFilterStringByKey("finished")), this.statusHandlers.push(this.onStatusFilter.bind(this, "all")), this.statusHandlers.push(this.onStatusFilter.bind(this, "inProgress")), this.statusHandlers.push(this.onStatusFilter.bind(this, "finished")), this.myStatusFilter.on(d.EventEx.CHANGE, function() {
                    var t = e.myStatusFilter.selectedIndex;
                    e.statusHandlers[t] && e.statusHandlers[t]()
                });
                var t = this.addChildBinder(".id-titleContainer", c.SortTabBinder, {
                    tabInfos: [{
                        title: this.$filter("translate")("MYAUCTION_LIST_NAME"),
                        type: "item"
                    }, {
                        title: this.$filter("translate")("MYAUCTION_LIST_STATUS"),
                        type: "state"
                    }, {
                        title: this.$filter("translate")("MYAUCTION_LIST_MYBID"),
                        type: "price"
                    }, {
                        title: this.$filter("translate")("MYAUCTION_LIST_MYSTATUS"),
                        type: "myState"
                    }],
                    initDescending: !0,
                    initSelectedIndex: 1,
                    sortFun: this.sortFun.bind(this)
                });
                this.auctionMyStatusItemListBinder = this.addChildBinder(".id-auctionItemListContainer", s.AuctionScrollListBinder, {
                    itemBinderClass: h.AuctionMyStatusItemBinder,
                    sortTabBinder: t,
                    itemCountPerPage: 7
                }), this.addChildBinder(".id-auctionNotificationListContainer", p.AuctionNotificationContainerBinder), this.translate(".id-description", "MYAUCTION_NUMBERPLATE_TEXT"), this.refreshBtn = this.getFace(".id-refreshButton"), this.translate(".id-refreshButton .id-buttonName", "MYAUCTION_REFRESH"), this.refreshBtn.on(l.MouseEventEx.CLICK, this.onRefresh.bind(this)), this.getAllMileageBtn = this.getFace(".id-bulkCollectMileageButton"), this.translate(".id-bulkCollectMileageButton .id-buttonName", "MYAUCTION_BUTTON_GETALLMILEAGE"), this.getAllMileageBtn.on(l.MouseEventEx.CLICK, this.onGetAllMileage.bind(this)), this.translate(".id-refreshNotification", "MYAUCTION_REFRESH_DONE")
            }, t.prototype.onAddedToScene = function() {
                this.auctionService.fetchAuctionItems(void 0, this.onFetchItemsSuccess.bind(this))
            }, t.prototype.onFetchItemsSuccess = function() {
                this.auctionService.fetchBiddingsWithPlayerID(void 0, this.onFetchMyBiddingsSuccess.bind(this))
            }, t.prototype.onFetchMyBiddingsSuccess = function() {
                this.auctionService.SubscribeAuctionNotice()
            }, t.prototype.onDetach = function() {
                this.auctionService.UnsubscribeAuctionNotice(), f.UpdateNotificationListDisplayStatus(!1)
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.auction;
                return {
                    autionItems: t.autionItems,
                    isFavoriteValidate: t.isFavoriteValidate,
                    myStatusFilter: t.myStatusFilter,
                    myStatusSortMode: t.myStatusSortMode
                }
            }, t.prototype.update = function(e) {
                var t = this,
                    i = _.map(e.autionItems),
                    n = _.filter(i, function(i) {
                        return t.filterItems(i, e)
                    });
                this.sortAuctionItems(n, e.myStatusSortMode), this.updateAuctionHouseItemList(n), this.updateGetAllMileageBtn(n), this.favoriteFilter.selected = e.isFavoriteValidate, _.forEach(this.myStatusFilter.items, function(i, n) {
                    i === t.getFilterStringByKey(e.myStatusFilter) && (t.myStatusFilter.selectedIndex = n)
                })
            }, t.prototype.onFavoriteFilterSelected = function() {
                f.updateAuctionFavoriteFilter(!this.favoriteFilter.selected), this.auctionMyStatusItemListBinder.scrollTop()
            }, t.prototype.onStatusFilter = function(e) {
                f.updateMyStatusFilter(e), this.auctionMyStatusItemListBinder.scrollTop()
            }, t.prototype.sortFun = function(e, t) {
                f.updateMyStatusSort({
                    mode: e.type,
                    isDesc: t
                })
            }, t.prototype.filterItems = function(e, t) {
                if (!e.myLastBidding) return !1;
                if (t.isFavoriteValidate && !e.isFavorite) return !1;
                if ("inProgress" === t.myStatusFilter) {
                    if (e.isFinished) return !1
                } else if ("finished" === t.myStatusFilter && !e.isFinished) return !1;
                return !0
            }, t.prototype.updateAuctionHouseItemList = function(e) {
                var t = _.clone(e);
                if (e.length < 7)
                    for (var i = e.length; i < 7; ++i) t.push({
                        disable: !0
                    });
                this.auctionMyStatusItemListBinder.setProps({
                    items: t
                })
            }, t.prototype.updateGetAllMileageBtn = function(e) {
                var t = !1;
                _.forEach(e, function(e) {
                    h.AuctionMyStatusItemBinder.getMyAuctionStatus(e) === h.MyAuctionStatus.CanCollectMileage && (t = !0)
                }), this.getAllMileageBtn.enabled = t
            }, t.prototype.onRefresh = function() {
                var e = this;
                this.auctionService.fetchAuctionItems(void 0, function() {
                    e.auctionService.fetchBiddingsWithPlayerID(void 0, e.onRefreshSuccess.bind(e))
                })
            }, t.prototype.onRefreshSuccess = function() {
                this.gotoAndPlay(".id-refreshNotificationContainer", "in")
            }, t.prototype.onGetAllMileage = function() {
                this.auctionService.CollectMileageFromRejectedBidding(void 0, this.onGetAllMileageSuccess.bind(this))
            }, t.prototype.onGetAllMileageSuccess = function(e) {
                var t = this;
                e && this.popupService.draw("ItemIconConfirmPopup", {
                    title: "MYAUCTION_GETMILEAGEPOPUP_TITLE",
                    desc: {
                        top: this.$filter("template")({
                            mileageamount: v.default.toMoney(e.successful)
                        }, "MYAUCTION_GETMILEAGEPOPUP_TEXT1"),
                        bottom: this.$filter("translate")("MYAUCTION_GETMILEAGEPOPUP_TEXT2")
                    },
                    itemCardProps: {
                        info: {
                            type: "normal",
                            name: this.$filter("rewardName")("MILEAGE_PLUS", 9e4, e.successful),
                            img: this.$filter("itemCardImg")("MILEAGE_PLUS", 9e4),
                            isHideItemNum: !0
                        },
                        mouseDisabled: !0
                    },
                    buttons: [{
                        type: "confirm",
                        name: "MYAUCTION_GETMILEAGEPOPUP_CONFIRM",
                        onClick: function(e) {
                            t.popupService.closePopup()
                        }
                    }]
                }), this.auctionService.fetchAuctionItems(void 0, function() {
                    t.auctionService.fetchBiddingsWithPlayerID(void 0, t.onRefreshSuccess.bind(t))
                })
            }, t.prototype.sortAuctionItems = function(e, t) {
                var i = !0 === t.isDesc ? -1 : 1;
                switch (t.mode) {
                    case "item":
                        e.sort(m(function(e, t) {
                            return e.itemName.localeCompare(t.itemName)
                        }, i));
                        break;
                    case "state":
                        e.sort(m(function(e) {
                            return !e.isFinished
                        }, i).thenBy(function(e, t) {
                            var i = e.finishTime.valueOf();
                            e.bidding && e.closingTime.valueOf() < i && (i = e.closingTime.valueOf());
                            var n = t.finishTime.valueOf();
                            return t.bidding && t.closingTime.valueOf() < n && (n = t.closingTime.valueOf()), e.isFinished && t.isFinished ? i - n : n - i
                        }, i).thenBy(function(e, t) {
                            return (e.bidding ? e.bidding.bidNumber : 0) - (t.bidding ? t.bidding.bidNumber : 0)
                        }, i).thenBy(function(e, t) {
                            return (e.bidding ? e.bidding.price : e.startPrice) - (t.bidding ? t.bidding.price : t.startPrice)
                        }, -1).thenBy(function(e, t) {
                            return e.itemName.localeCompare(t.itemName)
                        }, 1).thenBy(function(e, t) {
                            return e.startTime.valueOf() - t.startPrice.valueOf()
                        }, 1));
                        break;
                    case "price":
                        e.sort(m(function(e, t) {
                            return e.myLastBidding.price - t.myLastBidding.price
                        }, i));
                        break;
                    case "myState":
                        e.sort(m(function(e, t) {
                            var i = h.AuctionMyStatusItemBinder.getLastBiddingStatus(e);
                            return h.AuctionMyStatusItemBinder.getLastBiddingStatus(t) - i
                        }, i).thenBy(function(e, t) {
                            return e.itemName.localeCompare(t.itemName)
                        }, 1))
                }
            }, t.prototype.getFilterStringByKey = function(e) {
                switch (e) {
                    case "all":
                        return this.$filter("translate")("MYAUCTION_FILTER_ALL");
                    case "inProgress":
                        return this.$filter("translate")("MYAUCTION_FILTER_INPROGRESS");
                    case "finished":
                        return this.$filter("translate")("MYAUCTION_FILTER_END");
                    default:
                        return ""
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], g.prototype, "$filter", void 0), n.__decorate([r.autowired("auctionService")], g.prototype, "auctionService", void 0), n.__decorate([r.autowired("popupService")], g.prototype, "popupService", void 0), t.AuctionMyStatusBinder = g
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(1),
        a = i(15),
        s = i(258),
        c = i(3),
        d = i(2),
        l = i(327),
        u = i(197),
        p = i(4),
        h = i(328);
    ! function(e) {
        e[e.ACCEPTED = 1] = "ACCEPTED", e[e.REJECTED = 2] = "REJECTED", e[e.BID = 3] = "BID"
    }(n = t.LastBiddingStatus || (t.LastBiddingStatus = {}));
    var f;
    ! function(e) {
        e[e.CanCollectProduct = 1] = "CanCollectProduct", e[e.CanCollectMileage = 2] = "CanCollectMileage", e[e.CanBid = 3] = "CanBid", e[e.None = 4] = "None"
    }(f = t.MyAuctionStatus || (t.MyAuctionStatus = {}));
    var v = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            this.face.hasSize = !0, this.auctionItemBinder = this.addChildBinder(".AuctionItem", l.AuctionItemBinder), this.translate(".id-imminentEndTimeTitle", "MYAUCTION_LIST_STATUS_NEAREND"), this.translate(".id-auctionEnd", "MYAUCTION_LIST_STATUS_ENDED"), this.favoriteBtn = this.getFace(".id-favoriteButton"), this.favoriteBtn.on(d.MouseEventEx.CLICK, this.onFavoriteSelected.bind(this)), this.bidBtn = this.getFace(".id-bidButton"), this.translate(".id-bidButton .id-buttonName", "MYAUCTION_BUTTON_BID"), this.bidBtn.on(d.MouseEventEx.CLICK, this.onBid.bind(this)), this.collectMileageBtn = this.getFace(".id-collectMileageButton"), this.translate(".id-collectMileageButton .id-buttonName", "MYAUCTION_BUTTON_GETMILEAGE"), this.collectMileageBtn.on(d.MouseEventEx.CLICK, this.onCollectMileage.bind(this)), this.collectProductBtn = this.getFace(".id-collectProductButton"), this.translate(".id-collectProductButton .id-buttonName", "MYAUCTION_BUTTON_GETPRODUCT"), this.collectProductBtn.on(d.MouseEventEx.CLICK, this.onCollectProduct.bind(this))
        }, t.prototype.update = function(e) {
            if (this.gotoAndStop(".id-background", e.info.index % 2 ? "even" : "odd"), !0 === e.info.disable) return void(this.face.enabled = !1);
            this.face.enabled = !0, this.itemDetail = e.info, this.updateAuctionItem()
        }, t.prototype.updateAuctionItem = function() {
            var e = {
                plateNumber: this.itemDetail.instanceCode,
                templateCode: this.itemDetail.itemCode
            };
            this.auctionItemBinder.setProps({
                info: {
                    code: this.itemDetail.itemCode,
                    type: this.itemDetail.itemType,
                    img: void 0,
                    fallbackImg: void 0,
                    plate: "NUMBER_PLATE_INSTANCE" === this.itemDetail.itemType ? e : void 0,
                    count: 1
                },
                isFavorite: this.itemDetail.isFavorite,
                isFinished: this.itemDetail.isFinished
            }), this.bindText(".id-itemName", this.itemDetail.itemName), this.translate(".id-itemType", this.staticdataLoaderService.auctionDataManager.getCategoryGlobalKey(this.itemDetail.category)), this.bindText(".id-price", this.$filter("currency")(this.itemDetail.myLastBidding.price, "", 0)), this.favoriteBtn.selected = this.itemDetail.isFavorite;
            var t = this.getFace(".id-awaitingBiddingStatusContainer");
            if (this.itemDetail.isFinished) this.gotoAndPlay(t, "end");
            else {
                var i = (this.itemDetail.closingTime.valueOf() - this.serverTimeService.time.valueOf()) / 1e3;
                if ((i = Math.max(0, i)) >= h.ONE_DAY_SECONDS + h.SERVER_TIME_THRESHOLD) {
                    this.gotoAndPlay(t, "endTime");
                    var n = h.AuctionUtil.formatDateTime(this.itemDetail.closingTime),
                        r = n.date,
                        o = n.time;
                    this.bindText(".id-dayTextField", r), this.bindText(".id-timeTextField", o)
                } else i = Math.min(h.ONE_DAY_SECONDS - 1, i), this.gotoAndPlay(t, "imminent"), this.bindText(".id-imminentEndTime", h.AuctionUtil.formatRemainTime(i))
            }
            this.updateLastBiddingStatus(), this.updateCollectBtnsState()
        }, t.prototype.onFavoriteSelected = function() {
            this.auctionService.SetAuctionItemFavorite(this.itemDetail.id, !this.itemDetail.isFavorite)
        }, t.prototype.onBid = function() {
            this.auctionService.fetchBiddingsWithAuctionItemID(this.itemDetail.id, u.AuctionItemDetailPopupBinder.popUp.bind(this))
        }, t.prototype.onCollectMileage = function() {
            this.auctionService.CollectMileageFromRejectedBidding(this.itemDetail.id, this.onCollectMileageSuccess.bind(this))
        }, t.prototype.onCollectMileageSuccess = function(e) {
            var t = this;
            e && (e.successful > 0 ? this.popupService.draw("ItemIconConfirmPopup", {
                title: "MYAUCTION_GETMILEAGEPOPUP_TITLE",
                desc: {
                    top: this.$filter("template")({
                        mileageamount: p.default.toMoney(e.successful)
                    }, "MYAUCTION_GETMILEAGEPOPUP_TEXT1"),
                    bottom: this.$filter("translate")("MYAUCTION_GETMILEAGEPOPUP_TEXT2")
                },
                itemCardProps: {
                    info: {
                        type: "normal",
                        name: this.$filter("rewardName")("MILEAGE_PLUS", 9e4, e.successful),
                        img: this.$filter("itemCardImg")("MILEAGE_PLUS", 9e4),
                        isHideItemNum: !0
                    },
                    mouseDisabled: !0
                },
                buttons: [{
                    type: "confirm",
                    name: "MYAUCTION_GETMILEAGEPOPUP_CONFIRM",
                    onClick: function(e) {
                        t.popupService.closePopup()
                    }
                }]
            }) : this.popupService.draw("ItemIconConfirmPopup", {
                title: "MYAUCTION_MILEAGERESETPOPUP_TITLE",
                desc: {
                    top: this.$filter("translate")("MYAUCTION_MILEAGERESETPOPUP_TEXT")
                },
                itemCardProps: {
                    info: {
                        type: "normal",
                        name: this.$filter("rewardName")("MILEAGE_PLUS", 9e4, e.successful),
                        img: this.$filter("itemCardImg")("MILEAGE_PLUS", 9e4),
                        isHideItemNum: !0
                    },
                    mouseDisabled: !0
                },
                buttons: [{
                    type: "confirm",
                    name: "MYAUCTION_MILEAGERESETPOPUP_CONFIRM",
                    onClick: function(e) {
                        t.popupService.closePopup()
                    }
                }]
            })), this.refresh()
        }, t.prototype.onCollectProduct = function() {
            this.auctionService.ReceiveAuctionItem(this.itemDetail.id, this.onCollectProductSuccess.bind(this), this.onCollectProductFailed.bind(this))
        }, t.prototype.onCollectProductSuccess = function() {
            var e = this,
                t = this.staticdataLoaderService.auctionDataManager.auctionItemPopUpSettings[this.itemDetail.itemType],
                i = {
                    plateNumber: this.itemDetail.instanceCode,
                    templateCode: this.itemDetail.itemCode
                };
            this.popupService.draw("ItemIconConfirmPopup", {
                title: "MYAUCTION_GETPRODUCTPOPUP_TITLE",
                desc: {
                    top: this.$filter("translate")("MYAUCTION_GETPRODUCTPOPUP_TEXT"),
                    bottom: this.$filter("translate")(t.desc)
                },
                itemCardProps: {
                    info: {
                        type: this.itemDetail.itemType,
                        code: this.itemDetail.itemCode,
                        name: "NUMBER_PLATE_INSTANCE" === this.itemDetail.itemType ? this.$filter("template")({
                            uniquenumber: this.itemDetail.instanceCode
                        }, "NUMBERPLATE_ITEMCARD_NAME") : void 0,
                        img: void 0,
                        fallbackImg: void 0,
                        plate: "NUMBER_PLATE_INSTANCE" === this.itemDetail.itemType ? i : void 0,
                        isHideItemNum: !0,
                        count: this.itemDetail.itemCount
                    },
                    mouseDisabled: !0
                },
                buttons: [{
                    type: "confirm",
                    name: "MYAUCTION_GETPRODUCTPOPUP_CONFIRM",
                    onClick: function(t) {
                        e.popupService.closePopup(), e.refresh()
                    }
                }, {
                    type: "cancel",
                    name: t.btnName,
                    onClick: function() {
                        (e.numberPlateService.enableNumberPlate || "NUMBER_PLATE_INSTANCE" !== e.itemDetail.itemType) && e.stateService.go(t.state)
                    }
                }]
            })
        }, t.prototype.onCollectProductFailed = function(e) {
            var t = c.store.getState().player;
            if ("NUMBER_PLATE_INSTANCE" === this.itemDetail.itemType) {
                if (e && e.code === s.ErrorCode.AuctionItemReceiveExpired) return this.popupService.draw("ConfirmMultiLabelPopup", {
                    title: "MYAUCTION_NUMBERPLATE_EXPIRED_TITLE",
                    description: "MYAUCTION_NUMBERPLATE_EXPIRED_TEXT1",
                    addition: "MYAUCTION_NUMBERPLATE_EXPIRED_TEXT2"
                });
                if (t.level < _.toInteger(this.staticdataLoaderService.auctionDataManager.getConfig("Auction_NumPlate_Receive_Min_Level"))) return this.popupService.draw("ConfirmPopup", {
                    title: "MYAUCTION_FULLPOPUP_TITLE",
                    description: "MYAUCTION_FULLPOPUP_TEXT_LV15"
                })
            }
            return this.popupService.draw("ConfirmPopup", {
                title: "MYAUCTION_FULLPOPUP_TITLE",
                description: "MYAUCTION_FULLPOPUP_TEXT"
            })
        }, t.prototype.updateLastBiddingStatus = function() {
            switch (t.getLastBiddingStatus(this.itemDetail)) {
                case n.REJECTED:
                    this.gotoAndStop(".id-statusContainer", "rejected"), this.translate(".id-statusContainer .id-status", "MYAUCTION_LIST_MYSTATUS_FAIL");
                    break;
                case n.BID:
                    this.gotoAndStop(".id-statusContainer", "bid"), this.translate(".id-statusContainer .id-status", "MYAUCTION_LIST_MYSTATUS_INPROGRESS");
                    break;
                case n.ACCEPTED:
                default:
                    this.gotoAndStop(".id-statusContainer", "accepted"), this.translate(".id-statusContainer .id-status", "MYAUCTION_LIST_MYSTATUS_SUCCESS")
            }
        }, t.getLastBiddingStatus = function(e) {
            return e.myLastBidding.status === a.AuctionHouse.BiddingStatus.REJECTED ? n.REJECTED : e.isFinished ? n.ACCEPTED : n.BID
        }, t.getMyAuctionStatus = function(e) {
            var t = e.myLastBidding.status === a.AuctionHouse.BiddingStatus.COLLECTED,
                i = e.myLastBidding.status === a.AuctionHouse.BiddingStatus.REJECTED;
            return e.myLastBidding.pid === e.bidding.pid && e.isFinished && !t ? f.CanCollectProduct : i ? f.CanCollectMileage : e.bidding.pid === e.myLastBidding.pid || e.isFinished ? f.None : f.CanBid
        }, t.prototype.updateCollectBtnsState = function() {
            switch (this.collectMileageBtn.visible = !1, this.collectProductBtn.visible = !1, this.bidBtn.visible = !1, t.getMyAuctionStatus(this.itemDetail)) {
                case f.CanCollectProduct:
                    this.collectProductBtn.visible = !0;
                    break;
                case f.CanCollectMileage:
                    this.collectMileageBtn.visible = !0;
                    break;
                case f.CanBid:
                    this.bidBtn.visible = !0
            }
        }, t.prototype.refresh = function() {
            var e = this;
            this.auctionService.fetchBiddingsWithAuctionItemID(this.itemDetail.id, function() {
                e.auctionService.fetchBiddingsWithPlayerID()
            })
        }, t
    }(o.Binder);
    r.__decorate([o.autowired("$filter")], v.prototype, "$filter", void 0), r.__decorate([o.autowired("staticdataLoaderService")], v.prototype, "staticdataLoaderService", void 0), r.__decorate([o.autowired("auctionService")], v.prototype, "auctionService", void 0), r.__decorate([o.autowired("numberPlateService")], v.prototype, "numberPlateService", void 0), r.__decorate([o.autowired("stateService")], v.prototype, "stateService", void 0), r.__decorate([o.autowired("popupService")], v.prototype, "popupService", void 0), r.__decorate([o.autowired("serverTimeService")], v.prototype, "serverTimeService", void 0), t.AuctionMyStatusItemBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(1546), i(1548)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(655),
        o = i(656);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/festival", 56).container({
            controller: "FestivalEntry",
            stages: {
                "multiplay-condition-limited-entry": r.FestivalEntryBinder
            },
            resolve: {
                festivals: ["festivalService", function(e) {
                    return e.fetch()
                }],
                vehicles: ["vehicleService", function(e) {
                    return e.fetch()
                }]
            }
        }).dialog({
            stages: {
                "multiplay-condition-limited-calendar-popup": o.FestivalCalendarBinder
            }
        });
        e.state("root.menu.ConditionLimitedMatch", t)
    }]).controller("FestivalEntryController", ["externalService", "playerService", function(e, t) {
        t.setRecentVehicleIfNeeded(7), setTimeout(function() {
            e.camera.festivalLobby(17), e.beFestivalShowChangeVehicleUi(!1)
        }, 100)
    }]), i(655)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(117),
        s = i(65),
        c = i(5),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-newLabel", "FESTIVAL_ENTRYSCREEN_FESTIVAL_SLOT_NEW"), this.translate(".id-description", "FESTIVAL_ENTRYSCREEN_FESTIVAL_SLOT_DISABLED"), this.hasSizeAll(".id-statusLabel > *", !1), this.on(this.face, o.MouseEventEx.CLICK, function() {
                    e.stateService.go("root.menu.ConditionLimitedMatchLobby", {
                        festivalId: e.festivalId
                    }), e.dispatch(s.selectFestival(e.festivalId))
                })
            }, t.prototype.update = function(e) {
                var t = !_.isEmpty(e);
                if (this.enableButton(this.face, t), this.festivalId = t ? e.id : void 0, t) {
                    var i = this.festivalService.getCurrentMiniFestival(this.festivalId),
                        n = this.festivalService.getFestivalStatus(this.festivalId),
                        r = void 0,
                        o = void 0;
                    switch (n) {
                        case a.FestivalStatus.TOBEOPEN:
                            r = "tobeopen", o = "FESTIVAL_ENTRYSCREEN_FESTIVAL_SLOT_EXPECTED_OPEN";
                            break;
                        case a.FestivalStatus.UPCOMING:
                            r = "upcoming", o = "FESTIVAL_ENTRYSCREEN_FESTIVAL_SLOT_ONGOING_EXPECTED";
                            break;
                        case a.FestivalStatus.PROCEED:
                            r = "proceed", o = "FESTIVAL_ENTRYSCREEN_FESTIVAL_SLOT_ONGOING"
                    }
                    this.gotoAndStop(".id-status", r), this.translateAll(".id-statusLabel", o), i && this.bindTime(i, "proceed" === r ? "proceed" : "upcoming");
                    var s = this.$filter("cdn");
                    this.drawExternalImage(".id-festivalImage", s("festival/" + e.view.imgUrl + "_entry.png"));
                    var c = this.festivalService.getFestivalFP(this.festivalId);
                    this.visible(".id-newLabel", 0 === c)
                }
            }, t.prototype.bindTime = function(e, t) {
                var i = c(e.startAt),
                    n = c(e.endAt);
                this.bindText(".id-" + t, i.format("HH:mm") + " - " + n.format("HH:mm"))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("stateService")], d.prototype, "stateService", void 0), n.__decorate([r.autowired("festivalService")], d.prototype, "festivalService", void 0), t.FestivalEntryBannerBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(659),
        o = i(12),
        a = i(1560),
        s = i(656);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/festival/lobby/:festivalId", 57, {
            festivalId: ""
        }).container({
            controller: "FestivalLobby",
            stages: {
                "multiplay-condition-limited-lobby": r.FestivalLobbyBinder
            },
            resolve: {
                festivals: ["$stateParams", "festivalService", function(e, t) {
                    return t.fetch().then(function() {
                        return t.selectFestivalIfNeeded(e.festivalId)
                    })
                }],
                vehicles: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                players: ["playerService", function(e) {
                    return e.fetch()
                }]
            }
        }).dialog({
            stages: {
                "multiplay-condition-limited-calendar-popup": s.FestivalCalendarBinder,
                "multiplay-room-popup": a.FestivalPopupBinder
            }
        });
        e.state("root.menu.ConditionLimitedMatchLobby", t)
    }]).controller("FestivalLobbyController", ["externalService", "playerService", function(e, t) {
        t.setRecentVehicleIfNeeded(7), e.camera.festivalLobby(17), e.beSelectVehicle(o.getRecentVehicle())
    }]), i(659)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(198),
        a = i(82),
        s = i(2),
        c = i(13),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-subTitleContainer .id-subTitle", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED"), this.translate(".id-view", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_CAN_JOIN_VEHICLE"), this.translate(".id-manufacturer .id-subTitleLabel", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_MAKER"), this.translate(".id-vehicle .id-subTitleLabel", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_VEHICLE"), this.translate(".id-ovr .id-subTitleLabel", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_OVR"), this.translate(".id-reinforce .id-subTitleLabel", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_UPGRADE"), this.hasSize(".id-subTitleContainer", !0), this.hasSize(".id-subTitleContainer .id-subTitle *", !1), this.on(".TooltipButton", s.MouseEventEx.MOUSE_OVER, function(t) {
                    var i = e.$filter("translate")("MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_TOOLTIP_MATCH_DESC1");
                    e.tooltipService.show(t, "topright", c.TooltipType.Basic, i, {
                        marginTop: 23,
                        marginLeft: 25
                    })
                }), this.on(".TooltipButton", s.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.updateContainer = function(e) {
                var t = e,
                    i = function(e) {
                        var i = _.find(t.view.restrictions, function(t) {
                            return t.tagId === e
                        });
                        return i ? i.desc : "# Input Restrictions. tagId:'" + e + "'"
                    };
                this.bindText(".id-manufacturer .id-titleLabel", i("manufacturer")), this.bindText(".id-vehicle .id-titleLabel", i("vehicle")), this.bindText(".id-ovr .id-titleLabel", i("ovr"));
                var n = i("grade");
                if (/(\w+)\-(\w+)/.test(n)) {
                    var r = n.split("-").map(function(e) {
                        return e.trim()
                    });
                    this.gotoAndStop(".id-reinforce .id-min", "grade" + (r[0] || 0)), this.gotoAndStop(".id-reinforce .id-max", "grade" + (r[1] || a.MaxGrade))
                }
            }, t
        }(o.FestivalContainerBaseBinder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], d.prototype, "tooltipService", void 0), t.FestivalConditionInfoBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(198),
        a = i(62),
        s = i(2),
        c = i(13),
        d = i(65),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.listBigBinder = this.addChildBinder(".id-gameModeInfo .id-gameModeIconListContainer .id-gameModeIconButton", a.CollectionBinder, {
                    instanceBinder: u
                }), this.listTinyBinder = this.addChildBinder(".id-gameModeInfo .id-gameModeIconTinyListContainer .id-gameModeIconButton", a.CollectionBinder, {
                    instanceBinder: u
                }), this.translate(".id-gameModeInfo .id-subTitleContainer .id-subTitle", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_GAMEMODE"), this.hasSize(".id-gameModeInfo .id-subTitleContainer", !0), this.hasSize(".id-subTitleContainer .id-subTitle *", !1), this.hasSize(".id-gameModeIconListContainer", !0), this.hasSize(".id-gameModeIconTinyListContainer", !0), this.on(".TooltipButton", s.MouseEventEx.MOUSE_OVER, function(t) {
                    var i = e.$filter("translate")("MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_TOOLTIP_MATCH_DESC2");
                    e.tooltipService.show(t, "topright", c.TooltipType.Basic, i, {
                        marginTop: 23,
                        marginLeft: 25
                    })
                }), this.on(".TooltipButton", s.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                })
            }, t.prototype.updateContainer = function(e) {
                var t = e.gameModes,
                    i = t.length > 4 ? "tiny" : "big";
                switch (this.gotoAndStop(".id-gameModeInfo", i), this.visible(".id-gameModeInfo .id-gameModeIconListContainer", "big" === i), this.visible(".id-gameModeInfo .id-gameModeIconTinyListContainer", "tiny" === i), i) {
                    case "big":
                        this.listBigBinder.applyCollection(t);
                        break;
                    case "tiny":
                        this.listTinyBinder.applyCollection(t)
                }
            }, t
        }(o.FestivalContainerBaseBinder);
    n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], l.prototype, "tooltipService", void 0), t.FestivalGameModeBinder = l;
    var u = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.face.hasSize = !0, this.face.width = 120 * this.face.scaleX, this.face.height = 120 * this.face.scaleY, this.on(this.face, s.MouseEventEx.MOUSE_OVER, function(t) {
                var i = {
                    gameMode: e.props.gameMode
                };
                e.dispatch(d.showTooltip(e.face, "gameModeInfo", i))
            }), this.on(this.face, s.MouseEventEx.MOUSE_OUT, function() {
                e.dispatch(d.hideTooltip())
            })
        }, t.prototype.update = function(e) {
            this.gotoAndStop(".id-gameModeIcon", this.gameModeService.getModeIconLabel(e.gameMode))
        }, t
    }(r.Binder);
    n.__decorate([r.autowired("gameModeService")], u.prototype, "gameModeService", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(198),
        a = i(2),
        s = i(13),
        c = i(65),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-subTitleContainer", "MINIFESTIVAL_MAINSCREEN_POINT_REWARD"), this.translate(".id-day .id-gaugeName", "MINIFESTIVAL_MAINSCREEN_POINT_DAILY_POINT_REWARD"), this.translate(".id-accumulate .id-gaugeName", "MINIFESTIVAL_MAINSCREEN_POINT_STACK_POINT_REWARD"), this.hasSizeAll(".id-iconBackButton", !0), this.on(".TooltipButton", a.MouseEventEx.MOUSE_OVER, function(t) {
                    e.tooltipService.show(t, "left", s.TooltipType.BasicDetail, {
                        mainText: [{
                            title: "MINIFESTIVAL_MAINSCREEN_TOOLTIP_DAILY_REWARD",
                            description: "MINIFESTIVAL_MAINSCREEN_TOOLTIP_DAILY_REWARD_DESC1"
                        }, {
                            title: "MINIFESTIVAL_MAINSCREEN_TOOLTIP_TOTAL_REWARD",
                            description: "MINIFESTIVAL_MAINSCREEN_TOOLTIP_TOTAL_REWARD_DESC1"
                        }],
                        subText: ["MINIFESTIVAL_MAINSCREEN_TOOLTIP_PARTICIPATION_REWARD_DESC1", "MINIFESTIVAL_MAINSCREEN_TOOLTIP_PERPANK_REWARD_DESC1"]
                    }, {
                        marginTop: 1,
                        marginLeft: -2
                    }, {}, "festival-reward-info")
                }), this.on(".TooltipButton", a.MouseEventEx.MOUSE_OUT, function() {
                    return e.tooltipService.hide()
                }), this.setTooltipEvents()
            }, t.prototype.updateContainer = function(e) {
                var t = e.festival,
                    i = e.miniFestival,
                    n = this.festivalService.getFestivalPlayer(t.id),
                    r = this.festivalService.getMiniFestivalPlayer(t.id, i.id),
                    o = r ? r.rewardStep : -1,
                    a = o + 1,
                    s = a === i.rewardSteps.length;
                s && (o--, a--);
                var c = i.rewardSteps[a],
                    d = o >= 0 ? i.rewardSteps[o].point : 0,
                    l = c.point,
                    u = r ? r.point : 0;
                this.bindRewardSlot("day", d, l, u, c.rewards[0], s);
                var p = n ? n.rewardStep : -1,
                    h = p + 1,
                    f = h === t.rewardSteps.length;
                f && (p--, h--);
                var v = t.rewardSteps[h],
                    m = p >= 0 ? t.rewardSteps[p].point : 0,
                    g = v.point,
                    y = n ? _.chain(n.miniFestivals).map(function(e) {
                        return e.point
                    }).sum().value() : 0;
                this.bindRewardSlot("accumulate", m, g, y, v.rewards[0], f)
            }, t.prototype.bindRewardSlot = function(e, t, i, n, r, o) {
                var a = this.$filter("translate");
                this.bindText(".id-" + e + " .id-gaugeMin", t + " " + a("NAV_GAME_MULTIPLAY_FESTIVAL_FP")), this.bindText(".id-" + e + " .id-gaugeMax", i + " " + a("NAV_GAME_MULTIPLAY_FESTIVAL_FP")), this.gotoAndStop(".id-" + e + " .id-gaugeNum", e), this.bindText(".id-" + e + " .id-gaugeNum > ." + _.upperFirst(e), n + " " + a("NAV_GAME_MULTIPLAY_FESTIVAL_FP"));
                var s = this.getFace(".id-" + e + " .id-iconBackButton");
                this.gotoAndStop(s.$(".id-rewardItemContainer"), o ? "done" : "reward"), o || this.drawExternalImage(s.$(".id-externalImage"), this.$filter("itemCardImg")(r.type, r.code)), this.hasSize(this.getFace(".id-" + e + " .id-gaugeIndicator"), !0), this.festivalService.setupRewardGauge(this.getFace(".id-" + e + " .id-gaugeIndicator"), t, n, i)
            }, t.prototype.setTooltipEvents = function() {
                var e = this,
                    t = function(t) {
                        var i = e.getFace(".id-" + t + " .id-iconBackButton");
                        e.on(i, a.MouseEventEx.MOUSE_OVER, function(n) {
                            var r = {
                                type: t,
                                festivalId: e.props.festival.id,
                                miniFestivalId: e.props.miniFestival.id
                            };
                            e.dispatch(c.showTooltip(i, "rewardList", r))
                        }), e.on(i, a.MouseEventEx.MOUSE_OUT, function() {
                            e.dispatch(c.hideTooltip())
                        })
                    };
                t("day"), t("accumulate")
            }, t
        }(o.FestivalContainerBaseBinder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("festivalService")], d.prototype, "festivalService", void 0), n.__decorate([r.autowired("tooltipService")], d.prototype, "tooltipService", void 0), t.FestivalRewardBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(63),
        o = i(16),
        a = i(30),
        s = i(75),
        c = i(12),
        d = i(2),
        l = i(193),
        u = i(165),
        p = i(124),
        h = i(117),
        f = i(65),
        v = i(58),
        m = {
            itemCountPerPage: 12,
            rowSize: 6
        },
        g = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-changeVehicleLabel", "LOBBY_CHANGEVEHICLE"), this.translate(".VehicleSelectContainer .id-changeButton", "LOBBY_CHANGEVEHICLE"), this.translate(".VehicleSelectContainer .id-exitButton", "FRIENDLYMATCH_WAITINGROOM_BUTTON_EXIT"), this.translate(".id-changeVehicleLabel .id-titleLabel", "MINIFESTIVAL_CAR_CHANGE_SELECTION_CAR_TITLE"), this.translate(".id-changeVehicleLabel .id-descriptionLabel", "MINIFESTIVAL_CAR_CHANGE_SELECTION_CAR_TITLE_DESC"), this.on(".VehicleSelectContainer .id-changeButton", d.MouseEventEx.CLICK, this.onChangeVehicle.bind(this)), this.on(".VehicleSelectContainer .id-exitButton", d.MouseEventEx.CLICK, this.cancel.bind(this)), this.vehicleInfoBinder = this.addChildBinder(".VehicleDetail", l.VehicleInfoBinder), this.vehicleListBinder = this.addChildBinder(".VehicleSelectContainer", y, m), this.filterBinder = this.addChildBinder(".VehicleSelectContainer", p.VehicleListFilterBinder), this.filterBinder.setManufacturerDropUp(!1), this.filterBinder.setClassDropUp(!1), this.filterBinder.setSorterDropUp(!1), this.addManagedListener(this.filterBinder.face, "filterSortChange", function(t) {
                    var i = e.applyFilter(t);
                    e.vehicleListBinder.setProps(n.__assign({}, m, {
                        vehicles: i
                    }))
                }), this.addManagedListener(this.vehicleListBinder.face, "selected", function(t) {
                    e.selected = t.id, e.vehicleInfoBinder.setProps({
                        vehicle: t
                    }), e.externalService.beSelectVehicle(t), e.checkCondition(t)
                })
            }, t.prototype.update = function(e) {
                this.initialSelected = this.selected = e.recentVid;
                var t = c.getVehicleInfo(this.selected);
                this.bindText(".VehicleSelectContainer .id-retentionTextfield", "" + c.getAllVehicles().length), this.vehicleInfoBinder.setProps({
                    vehicle: t
                }), this.vehicleListBinder.setProps(n.__assign({}, m, e, {
                    vehicles: this.applyFilter(s.defaultSortKeys),
                    selected: this.selected
                })), this.filterBinder.setProps(n.__assign({}, e, {
                    filterState: s.defaultSortKeys,
                    useVehicleTypes: 7
                })), this.festival = e.festival, this.miniFestival = e.miniFestival, this.checkCondition(t)
            }, t.prototype.applyFilter = function(e) {
                var t = c.getAllVehicles();
                if (e) {
                    var i = e.manufacturerCode,
                        n = e.clazz,
                        r = e.sortKey;
                    i && (t = _.filter(t, {
                        manufacturerCode: i
                    })), n && "ALL" !== n && (t = _.filter(t, (o = {}, o.clazz = n, o))), this.$util.applySorter(t, r || ["default"])
                }
                return t;
                var o
            }, t.prototype.preventClick = function() {
                var e = this;
                $(this.face.htmlElement).addClass("prevent-click"), this.face.once("stop", function() {
                    $(e.face.htmlElement).removeClass("prevent-click")
                })
            }, t.prototype.onChangeVehicle = function() {
                var e = this;
                if (this.selected === this.initialSelected) return this.onClosePopup();
                var t = c.getVehicleInfo(this.selected);
                this.playerService.changeRecentVehicle(t.id).then(function() {
                    return e.onClosePopup()
                }).catch(function(t) {
                    if (t.code === v.toCode(v.ErrorCode.IgrVehicleDateExpiredWhenGetIgrVehicle)) {
                        e.popupService.drawConfirm("PCVEHICLE_UPDATE_COMMONPOPUP_TITLE", "PCVEHICLE_UPDATE_COMMONPOPUP_DESC", function() {
                            e.vehicleService.fetchIgrVehicles()
                        });
                        var i = e.playerService.setRecentVehicleIfNeeded(1);
                        e.externalService.beSelectVehicle(i), e.vehicleInfoBinder.setProps({
                            vehicle: i
                        }), e.onClosePopup()
                    } else e.cancel()
                })
            }, t.prototype.cancel = function() {
                if (this.selected === this.initialSelected) return this.onClosePopup();
                var e = c.getVehicleInfo(this.initialSelected);
                this.externalService.beSelectVehicle(e), this.vehicleInfoBinder.setProps({
                    vehicle: e
                }), this.onClosePopup()
            }, t.prototype.onClosePopup = function() {
                this.preventClick(), this.gotoAndPlay(this.face, "changeVehicle_out", !0), this.selected = void 0, this.playerService.markVehiclesAsChecked(), this.externalService.beFestivalShowChangeVehicleUi(!1), this.dispatch(r.removeFilter())
            }, t.prototype.checkCondition = function(e) {
                this.translate(".VehicleSelectContainer .id-descriptionLabel", this.festivalService.checkVehicleRestriction(this.miniFestival, e) === h.FestivalRestriction.ALLOWED ? "MINIFESTIVAL_CAR_CHANGE_SELECTION_CAR_CAN_JOIN" : "MINIFESTIVAL_CAR_CHANGE_SELECTION_CAR_CANNOT_JOIN")
            }, t
        }(a.Binder);
    n.__decorate([o.autowired("externalService")], g.prototype, "externalService", void 0), n.__decorate([o.autowired("playerService")], g.prototype, "playerService", void 0), n.__decorate([o.autowired("$util")], g.prototype, "$util", void 0), n.__decorate([o.autowired("festivalService")], g.prototype, "festivalService", void 0), n.__decorate([o.autowired("popupService")], g.prototype, "popupService", void 0), n.__decorate([o.autowired("vehicleService")], g.prototype, "vehicleService", void 0), t.FestivalChangeVehicleBinder = g;
    var y = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.bindVehicleInfo = function(t, i, n) {
            if (e.prototype.bindVehicleInfo.call(this, t, i, n), i) {
                var r = t.face,
                    o = this.festivalService.selectedMiniFestival,
                    a = this.festivalService.checkVehicleRestriction(o, i) === h.FestivalRestriction.ALLOWED,
                    s = a ? "default" : "nohold";
                this.gotoAndStop(r.$(".id-beautyshotImage"), s), this.gotoAndStop(r.$(".id-vehicleInfoContainer"), s)
            }
        }, t.prototype.onOver = function(e, t) {
            if (t) {
                var i = this.currListBinder[e].face,
                    n = t && t.currentTarget ? t : i.htmlElement,
                    r = this.chunkedVehicles[this.pageIndex][e],
                    o = this.getSide(e),
                    a = {
                        targetVehicle: r,
                        side: o
                    };
                this.dispatch(f.showTooltip(n, "vehicleInfo", a))
            }
        }, t.prototype.onOut = function() {
            this.dispatch(f.hideTooltip())
        }, t
    }(u.VehicleListBinder);
    n.__decorate([o.autowired("festivalService")], y.prototype, "festivalService", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(65),
        a = i(2),
        s = i(1554),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-back", "NAV_GAME_MULTIPLAY_FESTIVAL_LOBBY"), this.translate(".id-calendar", "MINIFESTIVAL_MAINSCREEN_SCHEDULE"), this.bannerBinders = _.range(0, 3).map(function(t) {
                    var i = ".id-tab" + (t + 1);
                    return e.addChildBinder(i, s.FestivalSelectBannerBinder, {
                        bannerIndex: t
                    })
                }), this.on(".id-back", a.MouseEventEx.CLICK, function() {
                    e.stateService.go("root.menu.ConditionLimitedMatch")
                }), this.on(".id-calendar", a.MouseEventEx.CLICK, function() {
                    e.dispatch(o.showSchedule())
                })
            }, t.prototype.update = function(e) {
                var t = this.festivalService.getViewFestivals();
                _.each(this.bannerBinders, function(e) {
                    e.setProps(t[e.bannerIndex])
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("stateService")], c.prototype, "stateService", void 0), n.__decorate([r.autowired("festivalService")], c.prototype, "festivalService", void 0), t.FestivalSelectPanelBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(65),
        s = i(3),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.bannerIndex = this.props.bannerIndex, this.hasSize(".id-mainTitle", !0), this.on(this.face, o.MouseEventEx.CLICK, function() {
                    if (e.festivalId) {
                        var t = s.store.getState().festival.view,
                            i = t.festivalId;
                        t.isMatching && e.festivalId !== i ? e.festivalService.confirmCancelMatch().then(function(t) {
                            t && e.dispatch(a.selectFestival(e.festivalId))
                        }) : e.dispatch(a.selectFestival(e.festivalId))
                    }
                })
            }, t.prototype.update = function(e) {
                var t = !_.isEmpty(e);
                if (this.enableButton(this.face, t), this.festivalId = t ? e.id : void 0, t) {
                    this.translate(".id-mainTitle", e.view.name), this.selectButton(this.face, e.id === this.festivalService.selectedFestival.id);
                    var i = this.$filter("cdn");
                    this.drawExternalImage(".FestivalTinyImage", i("festival/" + e.view.imgUrl + "_banner.png"))
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("festivalService")], c.prototype, "festivalService", void 0), t.FestivalSelectBannerBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(117),
        a = i(12),
        s = i(4),
        c = i(3),
        d = i(65),
        l = i(58),
        u = i(2),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.matchingTime = 0, t.onMatching = function() {
                    log.debug("*****[match.binder] server.created ", c.store.getState().match), t.clearMatchingState(), t.stateService.go(s.default.gameModeToHudState[t.currentGameMode] + ".loading")
                }, t.onQuitMatching = function(e) {
                    t.dispatch(d.matching(!1)), t.gotoAndPlay(t.face, "matching_out"), t.clearMatchingState(), e && t.popupService.drawConfirm("COMMON_ERROR_SERVICE_TITLE", "Reason - " + e)
                }, t.tryTransition = function() {
                    return t.festivalService.confirmCancelMatch().then(function(e) {
                        return e && t.onQuitMatching(), e
                    }).catch(function(e) {
                        return t.isDeletedMatching(e) ? (t.setForcedMatchingTimeout(), !1) : (t.discardMatch(), !0)
                    })
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-start", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_START_MATCHING"), this.translate(".id-cancelButton", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_CANCEL_MATCHING"), this.translate(".id-loadingLabel", "MINIFESTIVAL_MAINSCREEN_MATCH_ENTRY_COUNT"), this.on(".id-start", u.MouseEventEx.CLICK, function() {
                    return e.goMatchMaking()
                }), this.on(".id-cancelButton", u.MouseEventEx.CLICK, function() {
                    return e.cancelMatchMaking()
                }), this.showDebugButtons()
            }, t.prototype.onDetach = function() {
                this.clearMatchingState(), this.removeDebugButtons(), this.dispatch(d.matching(!1))
            }, t.prototype.clearMatchingState = function() {
                this.clearTimer(), this.deregisterOnStart && (this.deregisterOnStart(), this.deregisterOnStart = void 0), this.festivalMatchService.removeListener("server.created", this.onMatching), this.festivalMatchService.removeListener("server.timeout", this.onQuitMatching)
            }, t.prototype.setTimer = function() {
                var e = this;
                (this.matchingCountInterval || this.forcedMatchingTimeout) && this.clearMatchingState(), console.assert(!this.matchingCountInterval && !this.forcedMatchingTimeout), this.setMatchingTime(0), this.matchingCountInterval = setInterval(function() {
                    return e.setMatchingTime(e.matchingTime + 1)
                }, 1e3)
            }, t.prototype.clearTimer = function() {
                this.matchingCountInterval && clearInterval(this.matchingCountInterval), this.matchingCountInterval = void 0, this.forcedMatchingTimeout && clearTimeout(this.forcedMatchingTimeout), this.forcedMatchingTimeout = void 0
            }, t.prototype.setMatchingTime = function(e) {
                var t = this;
                this.festivalMatchService.checkTimeout(e, this.cancelMatchMaking.bind(this)).then(function(i) {
                    if (i) return t.clearMatchingState();
                    t.matchingTime = e, t.bindText(".id-loading .id-count", e)
                })
            }, t.prototype.update = function(e) {
                e.isMatching && this.festival && this.festival.id !== e.festival.id && this.onQuitMatching(), this.festival = e.festival, this.miniFestival = e.miniFestival;
                var t = this.festivalService.getFestivalStatus(this.festival.id),
                    i = this.festivalService.checkRestriction(this.festival.id, this.miniFestival.id),
                    n = !e.isMatching && t === o.FestivalStatus.PROCEED && i === o.FestivalRestriction.ALLOWED;
                this.enableButton(".id-start", n)
            }, Object.defineProperty(t.prototype, "currentGameMode", {
                get: function() {
                    return c.store.getState().match.match.gameMode
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.goMatchMaking = function() {
                var e = this,
                    t = a.getRecentVehicle().id;
                this.dispatch(d.matching(!0)), this.festivalService.reqMatchmaking(this.festival.id, this.miniFestival.id, t).then(function() {
                    log.debug(">>>> Start Match making"), e.gotoAndPlay(e.face, "matching_in"), e.setTimer(), e.deregisterOnStart = e.$transitions.onStart({}, e.tryTransition), e.festivalMatchService.once("server.created", e.onMatching), e.festivalMatchService.once("server.timeout", e.onQuitMatching)
                }).catch(function(t) {
                    if (log.debug("Matching Error:", JSON.stringify(t)), e.clearMatchingState(), t.code === l.toCode(l.ErrorCode.IgrVehicleDateExpiredWhenGetIgrVehicle)) e.popupService.drawConfirm("PCVEHICLE_UPDATE_COMMONPOPUP_TITLE", "PCVEHICLE_UPDATE_COMMONPOPUP_DESC", function() {
                        e.vehicleService.fetchIgrVehicles()
                    }), e.externalService.beSelectVehicle(e.playerService.setRecentVehicleIfNeeded(1));
                    else {
                        var i = "MINIFESTIVAL_MATCH_ERROR_" + t.errorCode;
                        e.popupService.drawConfirm("MINIFESTIVAL_MAINSCREEN_MATCH_START_ERROR", i)
                    }
                })
            }, t.prototype.cancelMatchMaking = function() {
                var e = this;
                return this.enableButton(".id-cancelButton", !1), this.festivalService.cancelMatchMaking().then(function() {
                    return e.onQuitMatching()
                }).then(function() {
                    return e.enableButton(".id-cancelButton", !0)
                }).catch(function(t) {
                    e.isDeletedMatching(t) ? e.setForcedMatchingTimeout() : e.discardMatch()
                })
            }, t.prototype.setForcedMatchingTimeout = function() {
                var e = this;
                console.assert(!this.forcedMatchingTimeout), this.enableButton(".id-cancelButton", !1), this.forcedMatchingTimeout = setTimeout(function() {
                    return e.discardMatch()
                }, 5e3)
            }, t.prototype.discardMatch = function() {
                this.onQuitMatching(), this.enableButton(".id-cancelButton", !0), this.festivalService.cancelForcefully()
            }, t.prototype.isDeletedMatching = function(e) {
                return e && /Resource not found/.test(e.message)
            }, t.prototype.showDebugButtons = function() {
                var e = this;
                this.externalService.isDevelopment() && (this.debug = $('<div class="twbs" style="position: fixed; right: 8%; bottom: 4%; width: 80px;">'), $('<button class="btn btn-success btn-lg" type="submit">DevOnly Match Start</button>').on("click", function() {
                    e.festivalMatchService.once("server.created", e.onMatching), e.festivalMatchService.init();
                    var t = a.getRecentVehicle().id;
                    e.festivalService.reqDevMatch(e.festival.id, e.miniFestival.id, t, e.miniFestival.gameModes[0].gameMode).catch(function(t) {
                        log.debug("Matching Error:", t), e.popupService.drawConfirm("# DevOnly Matching Error", t)
                    })
                }).appendTo(this.debug), this.debug.appendTo("#edge-ui"))
            }, t.prototype.removeDebugButtons = function() {
                this.debug && this.debug.remove()
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$transitions")], p.prototype, "$transitions", void 0), n.__decorate([r.autowired("festivalService")], p.prototype, "festivalService", void 0), n.__decorate([r.autowired("festivalMatchService")], p.prototype, "festivalMatchService", void 0), n.__decorate([r.autowired("popupService")], p.prototype, "popupService", void 0), n.__decorate([r.autowired("externalService")], p.prototype, "externalService", void 0), n.__decorate([r.autowired("stateService")], p.prototype, "stateService", void 0), n.__decorate([r.autowired("vehicleService")], p.prototype, "vehicleService", void 0), n.__decorate([r.autowired("playerService")], p.prototype, "playerService", void 0), t.FestivalMatchBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(198),
        a = i(117),
        s = i(117),
        c = i(5),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-title", "MINIFESTIVAL_MAINSCREEN_NOTJOIN_ALERT")
            }, t.prototype.updateContainer = function(e) {
                var t = this,
                    i = this.$filter("translate"),
                    n = this.$filter("template");
                this.festival = e.festival, this.miniFestival = e.miniFestival;
                var r = this.festivalService.getFestivalStatus(this.festival.id),
                    o = this.festivalService.checkRestriction(this.festival.id, this.miniFestival.id);
                if (this.isReadyToStart = r === a.FestivalStatus.PROCEED && o === s.FestivalRestriction.ALLOWED, this.visible(".id-title", !this.isReadyToStart), this.visible(".id-description", !this.isReadyToStart), this.visible(".GlowImage", !this.isReadyToStart), !this.isReadyToStart) {
                    var d = function(e) {
                        var i = c(e),
                            r = t.festivalService.serverTime,
                            o = c.duration(i.diff(r)),
                            a = o.days(),
                            s = o.hours();
                        return a > 0 ? n({
                            day: a
                        }, "MINIFESTIVAL_MAINSCREEN_CANNOT_JOIN_ALERT_DESC4") : s > 0 ? n({
                            hour: s
                        }, "MINIFESTIVAL_MAINSCREEN_CANNOT_JOIN_ALERT_DESC5") : n({
                            minute: Math.ceil(o.asMinutes())
                        }, "MINIFESTIVAL_MAINSCREEN_CANNOT_JOIN_ALERT_DESC6")
                    };
                    r === a.FestivalStatus.TOBEOPEN ? this.bindText(".id-description", i("MINIFESTIVAL_MAINSCREEN_CANNOT_JOIN_ALERT_DESC3") + " " + d(this.festival.startAt)) : r === a.FestivalStatus.UPCOMING ? this.bindText(".id-description", i("MINIFESTIVAL_MAINSCREEN_CANNOT_JOIN_ALERT_DESC2") + " " + d(this.miniFestival.startAt)) : o !== s.FestivalRestriction.ALLOWED && (this.festivalService.getPlayableVehicles(this.festival.id, this.miniFestival.id).length > 0 ? this.translate(".id-description", "MINIFESTIVAL_CAR_CHANGE_SELECTION_CAR_TITLE_DESC") : this.translate(".id-description", "MINIFESTIVAL_MAINSCREEN_CANNOT_JOIN_ALERT_DESC1"))
                }
            }, t
        }(o.FestivalContainerBaseBinder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("festivalService")], d.prototype, "festivalService", void 0), t.FestivalMatchInfoBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(193),
        a = i(2),
        s = i(1558),
        c = i(12),
        d = i(124),
        l = i(75),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-festivalVehicleLabel .id-titleLabel", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_CAN_JOIN_VEHICLE"), this.translate(".id-festivalVehicleListContainer .id-description", "MINIFESTIVAL_CAR_CHANGE_SELECTION_CAR_DESC2"), this.translate(".id-festivalVehicleListContainer .id-exit", "MINIFESTIVAL_MAINSCREEN_CONDITION_LIMITED_VEHICLE_EXIT"), this.on(".id-festivalVehicleListContainer .id-exit", a.MouseEventEx.CLICK, this.onClosePopup.bind(this)), this.vehicleInfoBinder = this.addChildBinder(".FestivalVehicleDetail", o.VehicleInfoBinder), this.vehicleListBinder = this.addChildBinder(".FestivalVehicleListContainer", s.FestivalVehicleListBinder), this.filterBinder = this.addChildBinder(".id-filterAndSort", p, {
                    changeEventName: "vehicleFilterChange"
                }), this.filterBinder.setManufacturerDropUp(!1), this.filterBinder.setClassDropUp(!1), this.filterBinder.setSorterDropUp(!1), this.addManagedListener(this.filterBinder.face, "vehicleFilterChange", function(t) {
                    e.festivalVehicles && (e.vehicleListBinder.setProps({
                        vehicles: e.applyFilter(t)
                    }), e.filterBinder.setProps({
                        vehicles: e.festivalVehicles,
                        filterState: t
                    }))
                }), this.addManagedListener(this.vehicleListBinder.face, "preview_vehicle", function(t) {
                    e.vehicleInfoBinder.setProps({
                        vehicle: t
                    }), e.externalService.beSelectVehicle(t)
                })
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e;
                this.bindText(".id-festivalVehicleLabel .id-descriptionLabel", i.view.name), this.festivalVehicles = _.map(i.conditions.vcodes, function(e) {
                    var i = t.vehicleDataService.createRefinedVehicle(e);
                    return i.price = t.vehiclePriceDataService.getBasePrice(e), i
                }), this.vehicleListBinder.setProps({
                    vehicles: this.applyFilter(this.festivalVehicles)
                }), this.filterBinder.setProps({
                    vehicles: this.festivalVehicles,
                    filterState: l.defaultSortKeys
                })
            }, t.prototype.applyFilter = function(e) {
                var t = this.festivalVehicles;
                if (e) {
                    var i = e.manufacturerCode,
                        n = e.clazz,
                        r = e.sortKey;
                    i && (t = _.filter(t, {
                        manufacturerCode: i
                    })), n && "ALL" !== n && (t = _.filter(t, (o = {}, o.clazz = n, o))), this.$util.applySorter(t, r || ["default"])
                }
                return t;
                var o
            }, t.prototype.preventClick = function() {
                var e = this;
                $(this.face.htmlElement).addClass("prevent-click"), this.face.once("stop", function() {
                    $(e.face.htmlElement).removeClass("prevent-click")
                })
            }, t.prototype.onClosePopup = function() {
                this.preventClick(), this.gotoAndPlay(this.face, "festivalVehicle_out", !0), this.externalService.camera.festivalLobby(17), this.externalService.beSelectVehicle(c.getRecentVehicle())
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$util")], u.prototype, "$util", void 0), n.__decorate([r.autowired("externalService")], u.prototype, "externalService", void 0), n.__decorate([r.autowired("vehicleDataService")], u.prototype, "vehicleDataService", void 0), n.__decorate([r.autowired("vehiclePriceDataService")], u.prototype, "vehiclePriceDataService", void 0), t.FestivalVehicleBinder = u;
    var p = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.update = function(e) {
            var t = this,
                i = e.vehicles;
            this.manufacturerFilter && (this.manufacturerFilter.items = this.getGroupedByManufacturer(_.toArray(i)), e.filterState && (this.manufacturerFilter.selectedIndex = _.findIndex(this.manufacturerFilter.items, function(t) {
                return t.value === e.filterState.manufacturerCode
            }))), this.classFilter && (this.classFilter.items = this.getGroupedByClass(this.getFilteredManufacturer(i)), e.filterState && (this.classFilter.selectedIndex = _.findIndex(this.classFilter.items, function(t) {
                return t.value === e.filterState.clazz
            }))), this.sorter && (this.sorter.items = this.$util.getSortItemsInGarage().items.map(function(e) {
                return {
                    text: t.$filter("translate")(e.text),
                    type: e.type
                }
            }), e.filterState && _.isUndefined(e.filterState.sortKey) && (this.sorter.selectedIndex = 0))
        }, t
    }(d.VehicleListFilterBinder)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(56),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.pageIndex = 0, t.pageSize = 0, t.filterState = {}, t.isPaging = !1, t.currentListBinder = [], t.nextListBinder = [], t.selectedIndex = 0, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                _.times(7, function(t) {
                    var i = e.getFace(".id-current" + (t + 1)),
                        n = e.getFace(".id-next" + (t + 1));
                    e.currentListBinder.push(e.addChildBinder(i, a.VehicleCard)), e.nextListBinder.push(e.addChildBinder(n, a.VehicleCard)), e.addManagedListener(i, o.MouseEventEx.CLICK, e.onClick.bind(e, t))
                }), this.pagingContainer = this.getFace(".id-garagePhotoList"), this.pagingContainer.hasSize = !0, this.prevButton = this.getFace(".id-previousButton"), this.nextButton = this.getFace(".id-nextButton"), this.firstButton = this.getFace(".id-firstButton"), this.lastButton = this.getFace(".id-lastButton"), this.indicatorContainer = this.getFace(".id-pageNumberContainer"), this.currentIndicator = this.getFace(".id-currentPage"), this.setUpPagingFlow(), this.setUpPageNumberListener()
            }, t.prototype.setUpPagingFlow = function() {
                var e = this;
                this.addManagedListener(this.prevButton, o.MouseEventEx.CLICK, function() {
                    t(e.pageIndex - 1, "previous")
                }), this.addManagedListener(this.nextButton, o.MouseEventEx.CLICK, function() {
                    t(e.pageIndex + 1, "next")
                }), this.addManagedListener(this.lastButton, o.MouseEventEx.CLICK, function() {
                    t(e.chunkedVehicles.length - 1, "last")
                }), this.addManagedListener(this.firstButton, o.MouseEventEx.CLICK, function() {
                    t(0, "first")
                });
                var t = function(t, i) {
                    e.movePage(t, i)
                };
                this.addManagedListener(this.pagingContainer, "reset", function(t) {
                    e.gotoAndPlay(e.pagingContainer, "default"), e.isPaging = !1
                }), this.wheelHandler = _.throttle(function(t) {
                    if (!e.isPaging) {
                        var i = Math.max(-1, Math.min(1, t.wheelDelta || -t.detail));
                        1 === i && 0 !== e.pageIndex ? e.movePage(e.pageIndex - 1, "previous") : -1 === i && e.pageIndex !== e.chunkedVehicles.length - 1 && e.movePage(e.pageIndex + 1, "next")
                    }
                }, 600, {
                    trailing: !1
                }), this.pagingContainer.htmlElement.addEventListener("mousewheel", this.wheelHandler, {
                    passive: !0
                })
            }, t.prototype.setUpPageNumberListener = function() {
                var e = this,
                    t = function(t, i) {
                        e.movePage(t, i)
                    };
                [{
                    num: 2,
                    action: "first"
                }, {
                    num: 3,
                    action: "previous"
                }, {
                    num: 5,
                    action: "next"
                }, {
                    num: 6,
                    action: "last"
                }].forEach(function(i) {
                    var n = i.num - 4,
                        r = e.getFace(".id-curr" + i.num);
                    e.addManagedListener(r, o.MouseEventEx.CLICK, function() {
                        t(e.pageIndex + n, i.action)
                    })
                }), this.addManagedListener(this.indicatorContainer, "reset", function(t) {
                    e.setPageIndicatorsNumber("default"), e.disposePageButton(), e.gotoAndPlay(e.indicatorContainer, "default")
                })
            }, t.prototype.onDetach = function() {
                this.pagingContainer.htmlElement.removeEventListener("mousewheel", this.wheelHandler)
            }, t.prototype.update = function(e) {
                var t = this;
                this.pageIndex = 0, this.initVehicleList(e.vehicles), setTimeout(function() {
                    return t.onClick(0, !0)
                })
            }, t.prototype.initVehicleList = function(e) {
                var t = this.sort(this.filterClass(this.filterManufacturer(e)));
                this.chunkedVehicles = _.chunk(t, 7), this.pageSize = this.chunkedVehicles.length, this.pageIndex = this.pageIndex > this.pageSize - 1 ? this.pageSize - 1 : this.pageIndex, this.isPaging = !1, this.selectedVehicle = void 0, this.chunkedVehicles[0] && (this.selectedVehicle = this.chunkedVehicles[0][0]), this.bindList(this.currentListBinder, this.pageIndex), this.setPageIndicatorsNumber("default"), this.disposePageButton()
            }, t.prototype.filterManufacturer = function(e) {
                var t = this;
                return _.filter(e, function(e) {
                    var i = t.filterState.manufacturerCode || 0;
                    return !(0 !== i) || e.manufacturerCode === i
                })
            }, t.prototype.filterClass = function(e) {
                var t = this;
                return _.filter(e, function(e) {
                    var i = t.filterState.clazz || "ALL";
                    return !("ALL" !== i) || e.clazz === i
                })
            }, t.prototype.sort = function(e) {
                return this.$util.applySorter(e, this.filterState.sortKey || ["default"]), e
            }, t.prototype.bindList = function(e, t) {
                var i = this,
                    n = this.chunkedVehicles[t] || [];
                e.forEach(function(e, t) {
                    var r = n[t],
                        o = r ? i.selectedVehicle === r : void 0;
                    e.setProps({
                        vehicle: r,
                        selected: o
                    })
                })
            }, t.prototype.setPageNumber = function(e, t, i) {
                var n = 0 <= t && t < this.pageSize,
                    r = this.indicatorContainer.$(".id-" + i + e);
                r && (r.enabled = n, this.bindText(r.$(".id-buttonName"), n ? t + 1 : ""))
            }, t.prototype.setPageNumbers = function(e, t) {
                this.setPageNumber(4, e, t);
                for (var i = 1; i < 4; i++) this.setPageNumber(4 - i, e - i, t), this.setPageNumber(4 + i, e + i, t)
            }, t.prototype.setPageIndicatorsNumber = function(e) {
                switch (this.setPageNumbers(this.pageIndex, "curr"), e) {
                    case "default":
                        this.bindText(this.currentIndicator.$(".id-current"), this.pageIndex + 1), this.setPageNumbers(this.pageIndex, "num");
                        break;
                    case "first":
                    case "last":
                        this.setPageNumbers("first" === e ? this.pageIndex + 1 : this.pageIndex - 1, "num")
                }
            }, t.prototype.onClick = function(e, t) {
                if (void 0 === t && (t = !1), t || !this.currentListBinder[e].face.selected) {
                    this.selectedIndex = e || 0, this.currentListBinder.forEach(function(e) {
                        var t = e.face;
                        t.selected && (t.selected = !1)
                    }), this.currentListBinder[e].face.selected = !0;
                    var i = this.chunkedVehicles[this.pageIndex][e];
                    this.face.dispatchEvent("preview_vehicle", i)
                }
            }, t.prototype.movePage = function(e, t) {
                var i = this;
                if (!this.isPaging && !(e < 0 || this.pageSize <= e || this.pageIndex === e)) {
                    this.isPaging = !0, this.pageIndex = e, this.prevButton.enabled = this.nextButton.enabled = this.lastButton.enabled = this.firstButton.enabled = !1, this.bindList(this.nextListBinder, e);
                    var n = t;
                    "first" === t && (n = "previous"), "last" === t && (n = "next"), this.gotoAndPlay(this.pagingContainer, n), this.gotoAndPlay(this.indicatorContainer, t), this.setPageIndicatorsNumber(t), setTimeout(function() {
                        i.bindList(i.currentListBinder, i.pageIndex), i.currentListBinder[i.selectedIndex].face.selected = !1
                    }, 100)
                }
            }, t.prototype.disposePageButton = function() {
                this.prevButton.enabled = this.firstButton.enabled = 0 !== this.pageIndex, this.nextButton.enabled = this.lastButton.enabled = this.pageIndex !== this.chunkedVehicles.length - 1
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$util")], s.prototype, "$util", void 0), t.FestivalVehicleListBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(65),
        o = i(2),
        a = i(1),
        s = i(115),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-pursuitChange", "GAMEROOM_CHANGING_PURSUIT"), this.pursuitTechContainer = this.getFace(".id-currentTechContainer"), this.pursuitIcon1 = this.pursuitTechContainer.$("itemIcon1"), this.pursuitIcon2 = this.pursuitTechContainer.$("itemIcon2"), this.hasSize(this.pursuitIcon1, !0), this.hasSize(this.pursuitIcon2, !0), this.on(".id-pursuitChange", o.MouseEventEx.MOUSE_OVER, function() {
                    e.showPursuitTechContainer()
                }), this.on(".id-pursuitChange", o.MouseEventEx.MOUSE_OUT, function() {
                    e.hidePursuitTechContainer()
                }), this.on(".id-pursuitChange", o.MouseEventEx.CLICK, function() {
                    e.openChangePursuitTechPopup()
                })
            }, t.prototype.update = function(e) {
                var t = _.some(e.gameModes, function(e) {
                    return /PURSUIT/.test(e.gameMode)
                });
                this.visible(".id-pursuitChange", t)
            }, t.prototype.showPursuitTechContainer = function() {
                this.refreshPursuitItems(), this.gotoAndPlay(this.pursuitTechContainer, "in", !0), this.visible(this.pursuitTechContainer, !0)
            }, t.prototype.hidePursuitTechContainer = function() {
                this.gotoAndPlay(this.pursuitTechContainer, "out", !0)
            }, t.prototype.refreshPursuitItems = function() {
                var e = function(e) {
                    for (var t = 0; t < e.numChildren; t++) e.getChildAt(t).visible = !1
                };
                e(this.pursuitIcon1), e(this.pursuitIcon2);
                var t = this.gameModeService.getLastPursuitTechs();
                this.pursuitIcon1.$(s.PursuitTechMap[t[0]]).visible = !0, this.pursuitIcon2.$(s.PursuitTechMap[t[1]]).visible = !0
            }, t.prototype.openChangePursuitTechPopup = function() {
                var e = this.gameModeService.getLastPursuitTechs();
                this.dispatch(r.showChangePursuitTechPopup(e[0], e[1]))
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("gameModeService")], c.prototype, "gameModeService", void 0), t.FestivalPursuitTechBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1561),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.addChildBinder(".ChangePursuitTechPopup", o.FestivalChangePursuitTechBinder)
            }, t
        }(r.StageBinder);
    t.FestivalPopupBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(65),
        a = i(312),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.confirm = function() {
                return this.gameModeService.storeLastPursuitTechs(this.items[0], this.items[1]), this.hide(), r.resolve()
            }, t.prototype.hide = function() {
                this.dispatch(o.hideChangePursuitTechPopup())
            }, t.prototype.mapStateToProps = function(e) {
                return e.festival && e.festival.view && e.festival.view.changePursuitTechPopup || {}
            }, t
        }(a.ChangePursuitTechBinder);
    t.FestivalChangePursuitTechBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1563),
        o = i(230);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/web-playerinfo", 64).container({
            stages: {
                "web-leaderboard": {
                    stageBinder: r.WebPlayerInfoBinder,
                    customComponents: {
                        IFrameView: o.IFrameView
                    }
                }
            },
            resolve: {
                cookie: ["publisherService", function(e) {
                    return e.initIngameWebViewCookies()
                }]
            }
        });
        e.state("root.menu.WebPlayerInfo", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(8),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.loaded = o.default.defer(), this.publisherService.initIngameWebViewCookies();
                var t = this.convertFace(".id-leaderBoard");
                t.src = this.publisherService.getPlayerInfoUri(), t.once(a.EventEx.LOAD, function() {
                    return e.loaded.resolve()
                })
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.loaded.promise.then(function() {
                    return e.stage.gotoAndPlay("intro")
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("publisherService")], s.prototype, "publisherService", void 0), t.WebPlayerInfoBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1565);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/game/loading", 69).dialog({
            controller: "RankedLoadingScreen",
            stages: {
                "multiplay-ranked-match-1on1-loading-screen": r.RankedMatch1On1LoadingScreenBinder
            },
            resolve: {
                vehicle: ["vehicleService", function(e) {
                    return e.fetch()
                }]
            }
        });
        e.state("root.hudSpeed1On1.loading", t)
    }]).controller("RankedLoadingScreenController", ["externalService", "ranked2MatchService", function(e, t) {
        e.isEdgeBrowser() || t.cheatPassGame()
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(40),
        o = i(1),
        a = i(3),
        s = i(46),
        c = i(8),
        d = i(9),
        l = i(1566),
        u = i(1567),
        p = i(103),
        h = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.playerInfoBinder = [], t.progressBinder = [], t.updatePlayersInfo = _.once(function(e) {
                    var i = e.players.map(function(e) {
                        return e.id
                    });
                    t.playerSnippetService.fetchSnippets(i).then(function() {
                        return t.historyService.getTrackRecord(e.gameMode, e.trackCode, e.players)
                    }).then(function(n) {
                        var r = i.map(function(e) {
                            return t.playerSnippetService.getSnippet(e)
                        });
                        t.bindPlayersInfo(e, r, n)
                    })
                }.bind(t)), t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate("> .id-title", "1ON1_LOADING_TITLE_RANKED"), this.translate("> .id-description", "1ON1_LOADING_TITLE_1ON1"), this.bindTextAll(".id-tipTitle", ""), this.bindTextAll(".id-descriptionText", ""), this.hasSizeAll(".id-numberplate", !0), this.trackInfoBinder = this.addChildBinder(".id-trackInfo", u.TrackInfoBinder), ["Left", "Right"].forEach(function(t) {
                    e.playerInfoBinder.push(e.addChildBinder(".id-playerInfoContainer" + t, l.PlayerInfoBinder)), e.progressBinder.push(e.addChildBinder(".id-playerInfoContainer" + t + " .id-playerInfo .id-progressBar", s.ProgressBinder, {
                        duration: 3,
                        outDuration: .5
                    }))
                }), this.bgmService.setRaceLoadingListener(), this.chatBinder = this.addChildBinder(".id-sevenLineChat", p.SimpleChatWindowBinder, {
                    entrance: p.SimpleChatEntrance.Loading
                }), this.addManagedListener(this.externalService, d.default.bePushLoadingProgress, function(t, i) {
                    _.isEmpty(e.getProps().match) || e.updateLoadingProgress(i, t)
                })
            }, t.prototype.onAddedToScene = function(e) {
                var t = this,
                    i = e.match,
                    n = e.hostInfo,
                    o = this.featureSetService.isEnabled("PARTNERSHIPMARKETING");
                this.visible(".MarketingArea", o), o && this.drawExternalImage(".MarketingArea", this.$filter("cdn_marketing")("marketing-type-01"));
                var s = (this.getFace(".ChatBackground").htmlElement, i.featureType, this.gameModeService.getCoreModeFromGameMode(i.gameMode)),
                    d = this.loadingTipService.getTipsByMode(s);
                if (d && d.length > 0) {
                    var l = _.random(d.length - 1),
                        u = function() {
                            var e = l % 2 + 1,
                                i = ".id-tipContainer" + (e % 2 + 1),
                                n = d[l % d.length];
                            t.translate(i + " .id-tipTitle", n.title), t.translate(i + " .id-descriptionText", n.desc), t.drawExternalImage(i + " .id-externalImage", t.$filter("cdn_loadingTip")(n.id)), t.gotoAndPlay(".GameTip", "swap" + e), ++l
                        };
                    u(), this.tipInterval = setInterval(u, 3e3)
                }
                var p = n;
                this.externalService.beStartGame(p.host, p.port, p.matchId, p.securityKey), this.addManagedOnceListener(this.ranked2MatchService, "all.loaded", function() {
                    t.stateService.go("^")
                }), this.stage.on(c.EventEx.STOP, function(e) {
                    "in" === e.currentTarget.currentLabel && a.store.dispatch(r.updateChatList())
                }), this.visibleAll(".id-numberplate", this.numberPlateService.enableNumberPlate)
            }, t.prototype.onDetach = function() {
                this.tipInterval && (clearInterval(this.tipInterval), this.tipInterval = null)
            }, t.prototype.mapStateToProps = function(e) {
                return e.match
            }, t.prototype.shouldUpdate = function(e) {
                return !_.isEmpty(e)
            }, t.prototype.update = function(e) {
                this.trackInfoBinder.setProps({
                    trackCode: e.match.trackCode
                }), this.updatePlayersInfo(e.match)
            }, t.prototype.bindPlayersInfo = function(e, t, i) {
                for (var n = a.store.getState().player.id, r = 0; r < 2; ++r) {
                    var o = e.players[r] || {},
                        s = {
                            slot: r + 1,
                            pid: o.id,
                            player: o,
                            me: n === o.id,
                            gameMode: e.gameMode,
                            snippet: _.find(t, {
                                pid: o.id
                            }),
                            record: _.find(i, {
                                pid: o.id
                            })
                        };
                    this.playerInfoBinder[r].setProps(s)
                }
            }, t.prototype.updateLoadingProgress = function(e, t) {
                var i = _.findIndex(this.getProps().match.players, {
                    id: e
                }); - 1 !== i && (this.progressBinder[i].value = t || 0)
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([o.autowired("ranked2Service")], h.prototype, "ranked2Service", void 0), n.__decorate([o.autowired("ranked2MatchService")], h.prototype, "ranked2MatchService", void 0), n.__decorate([o.autowired("loadingTipService")], h.prototype, "loadingTipService", void 0), n.__decorate([o.autowired("externalService")], h.prototype, "externalService", void 0), n.__decorate([o.autowired("bgmService")], h.prototype, "bgmService", void 0), n.__decorate([o.autowired("worldChatService")], h.prototype, "worldChatService", void 0), n.__decorate([o.autowired("featureSetService")], h.prototype, "featureSetService", void 0), n.__decorate([o.autowired("gameModeService")], h.prototype, "gameModeService", void 0), n.__decorate([o.autowired("stateService")], h.prototype, "stateService", void 0), n.__decorate([o.autowired("playerSnippetService")], h.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("historyService")], h.prototype, "historyService", void 0), n.__decorate([o.autowired("numberPlateService")], h.prototype, "numberPlateService", void 0), t.RankedMatch1On1LoadingScreenBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(46),
        s = i(54),
        c = i(82),
        d = i(42),
        l = i(94),
        u = {
            connecting: "in",
            loading: "in",
            finished: "in",
            disconnected: "logout",
            left: "logout"
        },
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(".id-playerInfo .id-name", !0), this.hasSize(".id-playerInfo .id-name .RankedMatchRewardIconSmall", !0), this.hasSize(".id-playerInfo .id-name .ClanEmblem", !0), this.hasSize(".id-playerInfo .id-progressBar", !0), this.hasSize(".id-playerRecord .CurrentFP", !0), this.hasSize(".id-playerRecord .CurrentFP .id-rankedMatchMedalContainer", !0), this.hasSize(".id-playerRecord .CurrentFP id-rankedMatchMedalContainer .id-medalMC", !0), this.translate(".id-playerInfo > .id-title", "LOADINGSCREEN_LOGOUT"), this.translate(".id-playerInfo > .id-description", "1ON1_LOADINGSCREEN_LOGOUT_DESC"), this.translate(".id-playerRecord .BestLapTimeText", "1ON1_LOADING_LAPTIME"), this.medalSmall = this.addChildBinder(".id-playerInfo .RankedMatchRewardIconSmall", s.TierMedalBinder), this.numberPlate = this.addChildBinder(".id-playerInfo .id-numberplate", d.NumberPlateCard), this.statusList = this.addChildBinder(".id-playerInfo .id-statusIndicatorContainer .id-statusIndicatorProgressBar", r.CollectionBinder, {
                    instanceBinder: a.ProgressBinder
                }), this.medalBig = this.addChildBinder(".id-playerRecord .RankedMatchRewardIconBig", s.TierMedalBinder), this.visible(".id-playerInfo .id-numberplate", this.featureSetService.isEnabled("NUMBERPLATE")), this.bindText(".id-playerRecord .id-bestLapTimeNum", o.default.formatLapTime(0))
            }, t.prototype.update = function(e) {
                var t = (e.pid, e.player),
                    i = e.gameMode,
                    n = e.snippet,
                    r = e.record;
                if (this.bindPlayerInfo(n, i), this.bindTrackRecord(r), this.bindVehicleInfo(t.vehicle), t.plate) {
                    var o = t.plate,
                        a = o.prefix,
                        s = o.plateNumber,
                        c = o.templateCode;
                    this.numberPlate.setProps({
                        personalNumber: a,
                        uniqueNumber: s,
                        templateCode: c
                    })
                }
                this.gotoAndPlay(".id-playerInfo", u[t.state] || "logout")
            }, t.prototype.bindPlayerInfo = function(e, t) {
                if (!_.isEmpty(e)) {
                    var i = e.ranked[t] ? e.ranked[t].fp : 0;
                    this.template(".id-playerInfo .id-level", "GAMEROOM_WAITINGROOM_PLAYERLEVEL", {
                        playerlevel: e.level
                    }), this.bindHtml(".id-playerInfo .id-name .id-textField", e.name), this.visible(".id-playerInfo .id-clanEmblem", !!e.clanEmblemId), e.clanEmblemId && this.clanService.enableClan && this.drawExternalImage(".id-playerInfo .id-name .id-clanEmblem", this.$filter("cdn_clan_emblem")(e.clanEmblemId));
                    var n = this.ranked2Service.getMedalTier(e.pid, "ranked");
                    this.medalSmall.setProps({
                        hide: !n.code,
                        tierCode: n.code,
                        tierMode: n.mode
                    }), this.bindText(".id-playerRecord .id-playerName", e.name);
                    var r = this.ranked2Service.getFpWithinTier(i);
                    this.bindText(".id-playerRecord .CurrentFP .id-textField", r);
                    var o = this.ranked2Service.getTierByFp(i);
                    this.medalBig.setProps({
                        tierCode: o.code
                    })
                }
            }, t.prototype.bindTrackRecord = function(e) {
                _.isEmpty(e) || this.bindText(".id-playerRecord .id-bestLapTimeNum", e.value)
            }, t.prototype.bindVehicleInfo = function(e) {
                if (!_.isEmpty(e)) {
                    var t = e.code || e.vcode,
                        i = this.vehicleDataService.getVehicleData(t),
                        n = this.$filter("manufacturerName")(i.manufacturerCode),
                        r = this.$filter("vehicleName")(t);
                    this.gotoAndStop(".id-playerInfo .id-vehicleGrade", "grade" + e.grade), this.template(".id-playerInfo .VehicleName .id-textField", "GAMEROOM_WAITINGROOM_VEHICLENAME", {
                        manufacturerName: n,
                        vehicleName: r
                    }), this.bindText(".id-playerInfo .id-ovr", o.default.calculateOVR(e.status)), this.bindHtml(".id-playerInfo .id-vehicleClass", i.clazz), this.apply(".id-playerInfo .PcCafeIcon", l.igr, e.igr), this.drawExternalImage(".id-playerInfo .id-externalImage", this.$filter("cdn_beautyshot")(t));
                    var a = _.map(c.StatusNames, function(t, i) {
                        return {
                            label: "STATUS_" + t.toUpperCase(),
                            value: e.status[t] || e.status[c.OldStatusNames[i]],
                            max: 2e3,
                            duration: .7
                        }
                    });
                    this.statusList.applyCollection(a)
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([r.autowired("vehicleDataService")], p.prototype, "vehicleDataService", void 0), n.__decorate([r.autowired("clanService")], p.prototype, "clanService", void 0), n.__decorate([r.autowired("ranked2Service")], p.prototype, "ranked2Service", void 0), n.__decorate([r.autowired("featureSetService")], p.prototype, "featureSetService", void 0), t.PlayerInfoBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-title", "1ON1_LOADING_TRACKINFO")
            }, t.prototype.update = function(e) {
                var t = this.staticdataLoaderService.trackData,
                    i = t.getTrack(e.trackCode);
                this.translate(".id-trackName", i.nameCode), this.drawExternalImage(".id-trackImage", this.$filter("cdn_track")(e.trackCode)), this.drawExternalImage(".id-trackMap", this.$filter("cdn_track_map")(e.trackCode))
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], o.prototype, "staticdataLoaderService", void 0), t.TrackInfoBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1569),
        o = i(1575),
        a = i(3),
        s = i(12),
        c = i(63);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/friendly/team-room/:roomId", 91, {
            roomId: ""
        }).container({
            stages: {
                "multiplay-room": r.MultiplayTeamRoom
            },
            resolve: {
                rooms: ["$stateParams", "teamRoomService", function(e, t) {
                    return t.prepareRoomIfNeeded(parseInt(e.roomId, 10))
                }],
                vehiclePrice: ["vehiclePriceDataService", function(e) {
                    e.getLatestPriceData(s.getAllVehicles()).then(function(e) {
                        return a.store.dispatch(c.updatePrices(e))
                    })
                }]
            }
        }).dialog({
            stages: {
                "multiplay-room-popup": o.MultiplayRoomPopupTeamBinder
            }
        });
        e.state("root.menu.MultiplayTeamRoom", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(3),
        a = i(28),
        s = i(2),
        c = i(61),
        d = i(1570),
        l = i(103),
        u = i(313),
        p = i(1571),
        h = i(9),
        f = i(47),
        v = i(4),
        m = i(8),
        g = i(618),
        y = i(1572),
        S = i(1573),
        E = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.isLeaving = !1, t.isKicking = !1, t.isButtonLocked = !1, t.matchingTime = 0, t.onMatchmakingSuccess = function(e) {
                    var i = function() {
                        log.debug("beWaitingRoomFeedbackCameraWork called(from beWaitingRoomRequestLeave)"), t.externalService.off(h.default.beWaitingRoomFeedbackCameraWork, i);
                        var e = v.default.gameModeToHudState[t.gameMode];
                        t.stateService.go(e + ".loading")
                    };
                    t.matchmakingButton.enabled = !1, t.stage.once(m.EventEx.STOP, i), t.stage.gotoAndPlay("out"), t.externalService.beWaitingRoomRequestLeave()
                }.bind(t), t.onMatchmakingFail = function(e) {
                    t.clearMatchmakingState(), t.popupService.draw("ConfirmPopup", {
                        title: "COMMON_ERROR_SERVICE_TITLE",
                        description: "Reason - " + e,
                        confirm: function() {
                            t.teamRoomService.leaveTeam().then(function() {
                                return t.onLeaveRoom()
                            })
                        }
                    })
                }.bind(t), t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.trackData = this.staticdata.trackData, this.bindButtons(), this.addChildBinder(this.face, y.SelectedInfoBinder), this.addChildBinder(".id-topContainer", p.TopContainerBinder), this.chatBinder = this.addChildBinder(".id-sevenLineChat", l.SimpleChatWindowBinder, {
                    entrance: l.SimpleChatEntrance.Room
                }), this.messageBarBinder = this.addChildBinder(".id-messageBar", g.MessageBarBinder)
            }, t.prototype.onLeaveRoom = function() {
                this.isLeaving || (this.isLeaving = !0, this.stateService.go("root.menu.MultiplayQuickMatch", {
                    gamemode: this.gameMode
                }))
            }, t.prototype.onAddedToScene = function(e) {
                if (e.roomState.room) {
                    var t = e.roomState.room,
                        i = t.gameMode,
                        n = t.players;
                    this.gameMode = i, this.bindStatic(), this.bindPlayers(), this.init(), this.myEntry = this.getMyEntry(n), this.stage.gotoAndPlay("in")
                }
            }, t.prototype.bindStatic = function() {
                switch (this.gameMode) {
                    case "SPEEDTEAM":
                        this.translate(".id-playerContainer .id-quickTeamContainer .id-textField", "QUICKTEAM_WAITINGROOM_MODEDESC"), this.translate(".id-changeVehicleButton", "GAMEROOM_CHANGING_VEHICLE"), this.translate(".id-trackButton .id-buttonName", "WAITINGROOM_CHANGETRACK"), this.translate(".id-qtmInviteButton", "GAMEROOM_INVITING_FRIENDS"), this.translate(".id-matchingContainer > .id-title", "QUICKTEAM_WAITINGROOM_MATCHING_WAIT"), this.translate(".id-matchingContainer > .id-description", "QUICKTEAM_WAITINGROOM_MATCHING_INPROGRESS")
                }
            }, t.prototype.bindPlayers = function() {
                switch (this.gameMode) {
                    case "SPEEDTEAM":
                        this.gotoAndPlay(".id-playerContainer", "quickTeam"), this.gotoAndPlay(".id-playerContainer .id-quickTeamContainer", "in"), this.addChildBinder(".id-playerContainer", S.PlayerContainerBinder, {
                            gameMode: this.gameMode
                        })
                }
            }, t.prototype.init = function() {
                switch (this.gameMode) {
                    case "SPEEDTEAM":
                        return this.initSpeedTeam();
                    default:
                        return
                }
            }, t.prototype.bindButtons = function() {
                var e = this;
                this.changeVehicleButton = this.bindButton(".id-changeVehicleButton", function() {
                    e.dispatch(c.showChangeVehiclePopup(e.myEntry.slot, "room"))
                }), this.invitationButton = this.bindButton(".id-qtmInviteButton", function() {
                    e.dispatch(c.showInvitationPopup())
                }), this.backButton = this.convertFace(".id-backButton"), this.onClickSafe(this.backButton, function() {
                    return e.teamRoomService.leaveTeam()
                }), this.readyButton = this.convertFace(".id-readyButton"), this.onClickSafe(this.readyButton, function() {
                    return e.onClickReadyButton()
                }), this.matchmakingButton = this.convertFace(".id-matchButton"), this.on(this.matchmakingButton, s.MouseEventEx.CLICK, function() {
                    return e.onClickMatchmakingButton()
                })
            }, t.prototype.bindButton = function(e, t) {
                var i = this.convertFace(e);
                return i.on(s.MouseEventEx.CLICK, t), i
            }, t.prototype.initSpeedTeam = function() {
                this.apply(this.getFace(".id-teamCountContainer"), a.param, {
                    visible: !1
                }), this.getFace(".id-qualifiedDropdown").visible = !1, this.convertFace(".id-trackButton").enabled = !1;
                var e = this.trackData.getRandomTrack();
                this.translate(".id-trackButton .id-trackName", e.nameCode), this.translate(".id-trackButton .id-trackDifficulty", e.difficultyCode), this.drawExternalImage(".id-trackButton .id-trackImage", this.$filter("cdn_track")(e.code)), this.drawExternalImage(".id-trackButton .id-trackMap", this.$filter("cdn_track_map")(e.code))
            }, t.prototype.onDetach = function() {
                this.unsubscribeMatchmaking(), this.clearTimer(), this.dispatch(c.clearKickState()), this.dispatch(c.updateRoomStatus("READY"))
            }, t.prototype.update = function(e) {
                var t = this;
                if (this.roomState = e.roomState, this.contactsState = e.contactsState, this.isRoomStateInvalid()) return this.roomState && this.roomState.isKicked ? void(this.isKicking || (this.isKicking = !0, this.popupService.draw("ConfirmPopup", {
                    title: "GAMEROOM_ERROR_POPUP_TITLE",
                    description: "GAMEROOM_KICKED",
                    confirm: function() {
                        t.clearMatchmakingState(), t.onLeaveRoom()
                    }
                }))) : (this.clearMatchmakingState(), void this.onLeaveRoom());
                if (this.myEntry = this.getMyEntry(this.roomState.room.players), !this.myEntry) return this.clearMatchmakingState(), void this.onLeaveRoom();
                var i = this.myEntry.slot === this.roomState.room.hostSlot;
                this.isHost !== i && this.handleHostChange(i), this.updateButtonEnabled(this.roomState.room.status), this.updateMatchmakingButton(this.roomState.room), this.updateReadyButton(this.roomState.room), this.reduxProps.roomState && this.reduxProps.roomState.room && this.reduxProps.roomState.room.status !== e.roomState.room.status && ("MATCHMAKING" === this.reduxProps.roomState.room.status ? this.clearMatchmakingState() : "MATCHMAKING" === e.roomState.room.status && this.setMatchmakingState()), this.reduxProps.roomState && e.roomState.changeVehiclePopup !== this.reduxProps.roomState.changeVehiclePopup && this.gotoAndPlay(this.face, e.roomState.changeVehiclePopup ? "changeVehicle_in" : "changeVehicle_out", !0)
            }, t.prototype.getMyEntry = function(e) {
                return _.find(e, function(e) {
                    return o.store.getState().player.id === e.pid
                })
            }, t.prototype.isRoomStateInvalid = function() {
                return _.isEmpty(this.roomState) || !this.roomState.room || this.roomState.isKicked
            }, t.prototype.handleHostChange = function(e) {
                switch (this.isHost = e, u.RoomPlayer.isLocalPlayerHost = this.isHost, this.gameMode) {
                    case "SPEEDTEAM":
                        this.isHost ? this.gotoAndStop(".id-buttons", "quickTeamMaster") : this.gotoAndStop(".id-buttons", "quickTeamFriend")
                }
                e && "READY" === this.myEntry.status && this.teamRoomService.setReady(!1)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    roomState: e.room || {},
                    contactsState: e.contacts
                }
            }, t.prototype.onClickMatchmakingButton = function() {
                return "MATCHMAKING" === this.roomState.room.status ? this.cancelMatchmaking() : this.startMatchmaking()
            }, t.prototype.onClickReadyButton = function() {
                var e = this,
                    t = !("READY" === this.myEntry.status);
                return this.lockButton(t), this.teamRoomService.setReady(t).catch(function(e) {}).finally(function() {
                    e.lockButton(!1)
                })
            }, t.prototype.startMatchmaking = function() {
                var e = this;
                return this.matchmakingButton.enabled = !1, this.updateButtonEnabled("MATCHMAKING"), this.room2MatchmakingService.search(this.gameMode, "").catch(function(t) {
                    if (t.islandCode !== f.IslandCodes.QUICK_TEAM_MATCHMAKING) e.popupService.drawConfirm("COMMON_ERROR_SERVICE_TITLE", "GAMEROOM_CANNOT_STARTAGAME");
                    else switch (t.errorCode) {
                        case d.ErrorCode.ErrorOvrStdDeviationRange:
                            e.popupService.drawConfirm("QUICKTEAM_WAITINGROOM_FORBIDSTART_POPUPTITLE", "QUICKTEAM_WAITINGROOM_FORBIDSTART_POPUPDESC");
                            break;
                        default:
                            e.popupService.drawConfirm("COMMON_ERROR_SERVICE_TITLE", "GAMEROOM_CANNOT_STARTAGAME")
                    }
                    e.matchmakingButton.enabled = !0, e.updateButtonEnabled("READY")
                })
            }, t.prototype.cancelMatchmaking = function() {
                var e = this;
                return this.matchmakingButton.enabled = !1, this.room2MatchmakingService.cancel().catch(function(t) {
                    e.isDeletedMatching(t) || (e.matchmakingButton.enabled = !0)
                })
            }, t.prototype.isDeletedMatching = function(e) {
                return e && /Resource not found/.test(e.message)
            }, t.isAllPlayerReady = function(e) {
                return -1 === _.findIndex(e.players, function(t) {
                    return t.slot !== e.hostSlot && "READY" !== t.status
                })
            }, t.prototype.updateMatchmakingButton = function(e) {
                if (this.isHost) {
                    this.matchmakingButton.enabled = !0;
                    var i = t.isAllPlayerReady(e);
                    "MATCHMAKING" === e.status ? (this.matchmakingButton.selected = !0, this.translate(this.matchmakingButton, "QUICKTEAM_WAITINGROOM_BUTTON_CANCEL")) : (this.matchmakingButton.selected = !1, this.translate(this.matchmakingButton, "QUICKTEAM_WAITINGROOM_BUTTON_START"), this.translate(this.matchmakingButton.$(".id-loopDescription .id-description"), "QUICKTEAM_WAITINGROOM_BUTTON_CANTSTART"), this.matchmakingButton.enabled = i, this.visible(this.matchmakingButton.$(".id-loopDescription .id-description"), !i), this.visible(this.matchmakingButton.$(".id-buttonName"), i))
                }
            }, t.prototype.updateReadyButton = function(e) {
                if (!this.isHost) {
                    var i = "READY" === this.myEntry.status;
                    this.readyButton.selected = !this.isHost && i;
                    var n;
                    this.isHost ? (t.isAllPlayerReady(e) || (n = n || "GAMEROOM_NOT_READY"), this.translate(this.readyButton, "GAMEROOM_GAME_START")) : this.translate(this.readyButton, i ? "GAMEROOM_GAME_READY_CANCEL" : "GAMEROOM_GAME_READY"), this.translate(this.readyButton.$(".id-loopDescription .id-description"), n), this.readyButton.enabled = "PLAYING" !== e.status && !n
                }
            }, t.prototype.lockButton = function(e) {
                this.isButtonLocked = e, this.isHost && e && (this.readyButton.enabled = !1), this.updateButtonEnabled(this.reduxProps.roomState.room.status)
            }, t.prototype.updateButtonEnabled = function(e) {
                var t = "PLAYING" !== e && "MATCHMAKING" !== e;
                this.isHost || (t = t && "JOIN" === this.myEntry.status), t = !this.isButtonLocked && t, this.classNames(".id-playerContainer", t ? "" : "prevent-click"), this.changeVehicleButton.enabled = t, this.invitationButton.enabled = t, this.backButton.enabled = t
            }, t.prototype.setMatchmakingState = function() {
                this.intervalId || (this.gotoAndPlay(".id-matchingContainer", "in", !0), this.setTimer(), this.isHost || this.room2MatchmakingService.waitSearch(this.gameMode), this.subscribeMatchmaking())
            }, t.prototype.setTimer = function() {
                var e = this;
                this.intervalId && this.clearMatchmakingState(), console.assert(!this.intervalId), this.setMatchingTime(0), this.intervalId = setInterval(function() {
                    return e.setMatchingTime(e.matchingTime + 1)
                }, 1e3)
            }, t.prototype.setMatchingTime = function(e) {
                var t = this;
                this.teamRoomService.checkTimeout(e, this.cancelMatchmaking.bind(this)).then(function(i) {
                    i || (t.matchingTime = e, t.bindText(".id-matchingContainer > .id-loading > .id-count", "" + e))
                })
            }, t.prototype.clearMatchmakingState = function() {
                this.intervalId && (this.gotoAndPlay(".id-matchingContainer", "out", !0), this.clearTimer(), this.isHost || (this.room2MatchmakingService.cancelWaitSearch(), this.messageBarBinder.setProps({
                    code: "QUICKTEAM_WAITINGROOM_MATCHING_CANCEL"
                })), this.unsubscribeMatchmaking())
            }, t.prototype.clearTimer = function() {
                this.intervalId && clearInterval(this.intervalId), this.intervalId = void 0
            }, t.prototype.subscribeMatchmaking = function() {
                this.room2MatchmakingService.once("matchmaking.success", this.onMatchmakingSuccess), this.room2MatchmakingService.once("matchmaking.fail", this.onMatchmakingFail)
            }, t.prototype.unsubscribeMatchmaking = function() {
                this.room2MatchmakingService.removeListener("matchmaking.success", this.onMatchmakingSuccess), this.room2MatchmakingService.removeListener("matchmaking.fail", this.onMatchmakingFail)
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], E.prototype, "$filter", void 0), n.__decorate([r.autowired("$stateParams")], E.prototype, "$stateParams", void 0), n.__decorate([r.autowired("stateService")], E.prototype, "stateService", void 0), n.__decorate([r.autowired("playerSnippetService")], E.prototype, "playerSnippetService", void 0), n.__decorate([r.autowired("teamRoomService")], E.prototype, "teamRoomService", void 0), n.__decorate([r.autowired("externalService")], E.prototype, "externalService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], E.prototype, "staticdata", void 0), n.__decorate([r.autowired("worldChatService")], E.prototype, "worldChatService", void 0), n.__decorate([r.autowired("popupService")], E.prototype, "popupService", void 0), n.__decorate([r.autowired("room2MatchmakingService")], E.prototype, "room2MatchmakingService", void 0), t.MultiplayTeamRoom = E
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    ! function(e) {
        e[e.ErrorOvrStdDeviationRange = 2] = "ErrorOvrStdDeviationRange"
    }(t.ErrorCode || (t.ErrorCode = {}))
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.bindStatic = function(e) {
                switch (e) {
                    case "SPEEDTEAM":
                        this.translate(".id-backButton .id-buttonName .id-textField", "QUICKTEAM_WAITINGROOM_OUT"), this.translate(".id-mode .id-textField", "QUICKTEAM_WAITINGROOM_TITLE"), this.translate(".id-description .id-textField", "QUICKTEAM_WAITINGROOM_DESC")
                }
            }, t.prototype.playMovie = function(e) {
                switch (e) {
                    case "SPEEDTEAM":
                        return this.gotoAndPlay(this.face, "quickTeam");
                    default:
                        return
                }
            }, t.prototype.update = function(e) {
                e.gameMode !== this.reduxProps.gameMode && (this.bindStatic(e.gameMode), this.playMovie(e.gameMode))
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.room.room;
                return {
                    gameMode: t ? t.gameMode : void 0
                }
            }, t
        }(r.Binder);
    t.TopContainerBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(42),
        a = i(617),
        s = i(12),
        c = i(9),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.vehicleDetailBinder = this.addChildBinder(".id-vehicleDetail", a.VehicleDetailBinder), this.numberPlateBinder = this.addChildBinder(".id-vehicleDetail .id-numberPlate", o.NumberPlateCard)
            }, t.prototype.onAddedToScene = function(e) {
                var t = this;
                this.externalService.camera.waitingRoom();
                var i = _.find(e.room.players, function(e) {
                        return t.storeState.player.id === e.pid
                    }),
                    n = s.getVehicleInfo(i.vehicle.id);
                if (!n || s.isTrialVehicle(n) && n.remainingCount <= 0) {
                    var r = s.getRecentVehicle();
                    this.teamRoomService.setVehicle(r.id).then(function() {
                        return t.installCamera(i.slot, r)
                    })
                } else this.installCamera(i.slot, i.vehicle)
            }, t.prototype.installCamera = function(e, t) {
                this.externalService.beWaitingRoomSelectVehicle(e - 1, t.code, t.paint), this.externalService.beWaitingRoomInitCompleted(e - 1), this.externalService.beSelectVehicle(t, e - 1)
            }, t.prototype.onDetach = function() {
                this.externalService.beWaitingRoomUnspawnAllVehicles(), this.externalService.offAll(c.default.beWaitingRoomFeedbackCameraWork)
            }, t.prototype.update = function(e) {
                if (!_.isEqual(this.reduxProps, e) && !_.isEmpty(e) && e.room && !e.isKicked) {
                    var t = _.find(e.room.players, function(t) {
                        return t.slot === e.selectedSlot
                    });
                    if (t) {
                        var i = this.vehicleDataService.decorateVehicle(t.vehicle);
                        this.vehicleDetailBinder.setProps(i);
                        var n = t.plate;
                        n && this.numberPlateBinder.setProps({
                            personalNumber: n.prefix,
                            uniqueNumber: n.plateNumber,
                            templateCode: n.templateCode
                        }), e.selectedSlot !== this.reduxProps.selectedSlot && this.externalService.beWaitingRoomFocusVehicle(t.slot - 1)
                    }
                }
            }, t.prototype.mapStateToProps = function(e) {
                return e.room
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("teamRoomService")], d.prototype, "teamRoomService", void 0), n.__decorate([r.autowired("vehicleDataService")], d.prototype, "vehicleDataService", void 0), t.SelectedInfoBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1574),
        a = {
            SPEEDTEAM: 4
        },
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.userSlots = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = this,
                    i = a[e.gameMode] || 0;
                _.times(i, function(e) {
                    var i = t.getFace(".id-playerItem" + (e + 1)),
                        n = t.getFace(".id-emptyItem" + (e + 1));
                    if (i) {
                        var r = t.addChildBinder(i, o.TeamPlayer);
                        r.emptySlotMC = n, t.userSlots.push(r)
                    }
                })
            }, t.prototype.update = function(e) {
                var t = this;
                if (this.roomState = e.roomState, this.contactsState = e.contactsState, !(_.isEmpty(this.roomState) || !this.roomState.room || this.reduxProps.roomState && !this.reduxProps.roomState.room || this.roomState.isKicked) && (this.myEntry = _.find(this.roomState.room.players, function(e) {
                        return t.storeState.player.id === e.pid
                    }), this.myEntry)) {
                    var i = [];
                    if (_.isEmpty(this.reduxProps.roomState) || !_.isEqual(this.roomState.room.players, this.reduxProps.roomState.room.players)) {
                        var n = (new Date).getTime() - 6e4;
                        _.forEach(this.roomState.room.players, function(e) {
                            var r = t.playerSnippetService.getSnippet(e.pid);
                            (!r || !r.name || r.fetchedAt < n) && i.push(e.pid)
                        })
                    }
                    0 < i.length ? this.playerSnippetService.fetchSnippets(i).then(function() {
                        t.updateUserSlots()
                    }) : this.updateUserSlots()
                }
            }, t.prototype.updateUserSlots = function() {
                var e = this,
                    t = this.roomState.room,
                    i = t.gameMode,
                    n = a[i] || 0;
                _.times(n, function(i) {
                    var n = i + 1,
                        r = _.find(t.players, function(e) {
                            return e.slot === n
                        }),
                        o = {
                            slot: n,
                            pid: null,
                            isMyTeam: !1,
                            vehicle: null,
                            team: null,
                            isSelected: !1,
                            locked: !1,
                            isHost: !1,
                            isMyEntry: !1,
                            entry: r,
                            contacts: e.contactsState
                        };
                    if (r) {
                        var a = _.assign({}, o, {
                            pid: r.pid,
                            vehicle: r.vehicle,
                            isSelected: n === e.roomState.selectedSlot,
                            isHost: n === t.hostSlot,
                            isMyEntry: n === e.myEntry.slot
                        });
                        e.userSlots[i].setProps(a)
                    } else e.userSlots[i].setProps(o)
                })
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    roomState: e.room || {},
                    contactsState: e.contacts
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("playerSnippetService")], s.prototype, "playerSnippetService", void 0), t.PlayerContainerBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(313),
        a = i(16),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "teamPlayerProps", {
                get: function() {
                    return this.props
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.update = function(t) {
                _.isEmpty(t) || this.prepareProps(t), e.prototype.update.call(this, t), this.postUpdate()
            }, t.prototype.prepareProps = function(e) {
                e.locked = !1, e.entry && (e.entry.team = null)
            }, t.prototype.postUpdate = function() {
                this.grantHostButton && this.grantHostButton.visible && (this.grantHostButton.visible = !1), this.emptySlotMC && (this.emptySlotMC.$(".id-lockButton").visible = !1)
            }, t.prototype.kickSlot = function(e) {
                var t = this;
                return this.teamPlayerProps.entry.slot !== e ? r.reject("invalid slot") : this.playerSnippetService.getSnippetAsync(this.teamPlayerProps.entry.pid).then(function(e) {
                    t.popupService.draw("ConfirmCancelPopup", {
                        title: "QUICKTEAM_WAITINGROOM_BANPLAYER_POPUPTITLE",
                        description: t.$filter("template")({
                            name: e.name
                        }, "QUICKTEAM_WAITINGROOM_BANPLAYER_POPUPDESC"),
                        confirm: function() {
                            t.teamRoomService.kickPlayer(t.teamPlayerProps.entry.pid)
                        },
                        cancel: function() {}
                    })
                })
            }, t.prototype.grantHost = function(e) {
                return this.teamPlayerProps.entry.slot === e ? this.teamRoomService.grantHost(this.teamPlayerProps.entry.pid) : r.reject("invalid slot")
            }, t.prototype.isMyFriend = function() {
                if (!this.teamPlayerProps.pid) return !0;
                var e = this.teamPlayerProps.pid;
                return !_.isUndefined(_.find(this.teamPlayerProps.contacts.friends, function(t) {
                    return t.snippet.pid === e
                }))
            }, t.prototype.isSentRequest = function() {
                if (!this.teamPlayerProps.pid) return !0;
                var e = this.teamPlayerProps.pid;
                return !_.isUndefined(_.find(this.teamPlayerProps.contacts.sentInvites, function(t) {
                    return t.snippet.pid === e
                }))
            }, t
        }(o.RoomPlayer);
    n.__decorate([a.autowired("teamRoomService")], s.prototype, "teamRoomService", void 0), t.TeamPlayer = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1576),
        o = i(1577),
        a = i(619),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.addChildBinder(".InvitePopup", o.InvitationPopupTeamBinder), this.addChildBinder(".ChangeVehiclePopup", r.ChangeVehicleTeamBinder)
            }, t
        }(a.MultiplayRoomPopupBinder);
    t.MultiplayRoomPopupTeamBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(620),
        o = i(1),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "service", {
                get: function() {
                    return "room" === this.featureType ? this.teamRoomService : this.ranked2Service
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(r.ChangeVehicleBinder);
    n.__decorate([o.autowired("teamRoomService")], a.prototype, "teamRoomService", void 0), t.ChangeVehicleTeamBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(623),
        o = i(1),
        a = i(62),
        s = i(2),
        c = i(61),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "RoomService", {
                get: function() {
                    return this.teamRoomService
                },
                enumerable: !0,
                configurable: !0
            }), t
        }(r.User);
    n.__decorate([o.autowired("teamRoomService")], d.prototype, "teamRoomService", void 0), t.TeamUser = d;
    var l = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            _.forEach([
                ["titleLabel", "WAITINGROOM_INVITEFRIENDLIST"],
                ["confirmButton", "WAITINGROOM_INVITELIST_CLOSE"],
                ["friendsLabel", "GAMEROOM_FRIENDS_LIST_SMALL"]
            ], function(t) {
                var i = t[0],
                    n = t[1];
                e.translate(".id-" + i, n)
            });
            var t = this.getFace(".id-inviteList");
            t.hasSize = !0, this.inviteList = $(t.htmlElement), this.inviteList.perfectScrollbar({
                suppressScrollX: !0
            }), this.getFace(".id-friendsLabel").hasSize = !0, this.on(".id-confirmButton", s.MouseEventEx.CLICK, function() {
                e.dispatch(c.hideInvitationPopup())
            }), this.friendsList = this.addChildBinder(".id-friendsContainer > .id-inviteItem", a.CollectionBinder, {
                instanceBinder: d
            }), this.face.visible = !1, this.update(this.props)
        }, t.prototype.update = function(e) {
            var t = this;
            if (_.isEmpty(e)) return this.gotoAndPlay(this.face, "out", !0);
            var i = _(e.contacts.friends).filter(function(e) {
                return /busy|idle|match\.reward/.test(e.presence.state)
            }).filter(function(e) {
                return !_.find(t.teamRoomService.getPlayers(), {
                    pid: e.fpid
                })
            }).value();
            this.friendsList.applyCollection(i), this.face.visible = !0, this.gotoAndPlay(this.face, "in", !0)
        }, t
    }(r.InvitationPopupBinder);
    n.__decorate([o.autowired("teamRoomService")], l.prototype, "teamRoomService", void 0), t.InvitationPopupTeamBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1579),
        o = i(1591),
        a = i(319);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/market/trade", 71).container({
            stages: {
                "trade-main": r.TradeMainBinder
            },
            resolve: {
                player: ["playerService", function(e) {
                    return e.fetch()
                }],
                vehicle: ["vehicleService", function(e) {
                    return e.fetch()
                }],
                trade: ["tradeService", function(e) {
                    return e.fetch()
                }]
            }
        }).dialog({
            stages: {
                "trade-effect": {
                    stageBinder: o.TradeEffectBinder,
                    lazy: !0
                },
                "vehicle-detail": a.VehicleDetailBinder
            }
        });
        e.state("root.menu.Trade", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1580),
        a = i(1583),
        s = i(1589),
        c = i(137),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.vehicleListContainerBinder = this.addChildBinder(".id-vehicleListContainer", o.VehicleListContainerBinder), this.npcListContainerBinder = this.addChildBinder(".id-npcListContainer", s.NpcListContainerBinder), this.npcContainerBinder = this.addChildBinder(".id-npcContainer", a.NpcContainerBinder)
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.cooldownTimer = setInterval(function() {
                    e.dispatch(c.cooldown())
                }, 1e3)
            }, t.prototype.update = function(e) {
                var t = e.dealerNpc,
                    i = (e.selectedItems, e.tradeRecord, e.cooldown);
                this.npcListContainerBinder.setProps({
                    selectedItem: t,
                    cooldown: i
                }), _.isEqual(_.omit(e, ["cooldown"]), this.prev) || (this.npcContainerBinder.setProps(e), this.vehicleListContainerBinder.setProps(e), this.prev = _.omit(e, ["cooldown"]))
            }, t.prototype.mapStateToProps = function(e) {
                return e.trade
            }, t.prototype.onDestroy = function() {
                this.dispatch(c.reset()), clearInterval(this.cooldownTimer), this.cooldownTimer = void 0
            }, t
        }(r.StageBinder);
    t.TradeMainBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(1),
        a = i(140),
        s = i(1581),
        c = i(1582),
        d = i(8),
        l = i(137),
        u = i(2),
        p = i(12),
        h = i(265),
        f = i(3),
        v = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.manufacturerFilter = this.convertFace(".id-filter"), this.manufacturerFilter.on(d.EventEx.CHANGE, this.applyChanges.bind(this)), this.btnAllCheck = this.getFace(".id-allCheck"), this.on(this.btnAllCheck, u.MouseEventEx.CLICK, function() {
                    var t = f.store.getState().trade;
                    t.viewAll ? e.dispatch(l.toggleViewAll()) : e.popupService.draw("ConfirmCancelPopup", {
                        title: "TRADE_TUNNINGCAUTION_POPUP_TITLE",
                        description: e.$filter("translate")("TRADE_TUNNINGCAUTION_POPUP_MSG"),
                        confirmString: "TRADE_TUNNINGCAUTION_POPUP_BTN_EXCHANGE",
                        cancelString: "TRADE_TUNNINGCAUTION_POPUP_BTN_CANCEL",
                        confirm: function() {
                            var i = t.selectedItems,
                                n = _.filter(i, function(t) {
                                    var i = p.getVehicleInfo(t);
                                    return !e.vehicleService.isTuned(i.code, i.paint)
                                });
                            e.dispatch(l.selectItems(n)), e.dispatch(l.toggleViewAll())
                        }
                    })
                }), this.translate(".id-allCheck .id-checkboxName .id-textField", "TRADE_MAINMENU_TUNNING_AVAILABLE"), this.translate(".id-countTitleLabel .id-textField", "TRADE_MAINMENU_MYCARCOUNT_NOTI"), this.template(".id-count", "TRADE_MAINMENU_MYCARCOUNT", {
                    selectcarcount: 0,
                    maxcarcount: this.counts
                }), this.setVehicleList(), this.translate(".id-titleLabel", "TRADE_MAINMENU_MYCARLIST"), this.translate(".id-descriptionLabel", "TRADE_MAINMENU_MYCARLIST_MSG"), this.translate(".id-autoSelectButton", "TRADE_MAINMENU_BUTTON_AUTOSELECT"), this.on(".id-autoSelectButton", u.MouseEventEx.CLICK, function() {
                    e.vehicleListBinder.selectItems(h.MAX_SELECTABLE_ITEMS), e.vehicleListBinder.scrollTop()
                }), this.translate(".id-resetButton", "TRADE_MAINMENU_BUTTON_RESET"), this.visible(".id-resetButton", !1), this.on(".id-resetButton", u.MouseEventEx.CLICK, function() {
                    e.dispatch(l.clearSelected())
                }), this.tradeButton = this.convertFace(".id-tradeButton"), this.translate(this.tradeButton, "TRADE_MAINMENU_BUTTON_RUNEXCHANGE"), this.on(this.tradeButton, u.MouseEventEx.CLICK, function() {
                    e.enableButton(".id-tradeButton", !1);
                    var t = f.store.getState().trade,
                        i = t.selectedItems,
                        n = r.Vehicle.VehicleClassEnum.S,
                        o = _.filter(i, function(e) {
                            return p.getVehicleInfo(e) && r.Vehicle.VehicleClassEnum[p.getVehicleInfo(e).clazz] <= n
                        }),
                        a = r.Vehicle.VehicleClassEnum[n];
                    o.length > 0 ? e.popupService.draw("ConfirmCancelPopup", {
                        title: e.$filter("template")({
                            clazz: a
                        }, "TRADE_ERRORPOPUP_TITLE"),
                        description: e.$filter("template")({
                            clazz: a
                        }, "TRADE_ERRORPOPUP_MSG"),
                        confirmString: "TRADE_ERRORPOPUP_BTN_EXCHANGE",
                        cancelString: "TRADE_ERRORPOPUP_BTN_CANCEL",
                        confirm: function() {
                            e.showEffect()
                        },
                        cancel: function() {
                            e.enableButton(".id-tradeButton", !0)
                        }
                    }) : e.showEffect()
                }), this.enableButton(".id-tradeButton", !1), this.translate(".id-filter .id-buttonName .id-textField", "ALL_MANUFACTURER"), this.translate(".id-noVehicles", "TRADE_MAINMENU_MYCARLIST_NOPOSSIBLESALEVEHICLE"), this.visible(".id-noVehicles", !1)
            }, t.prototype.update = function(e) {
                var t = e.dealerNpc,
                    i = e.viewAll,
                    n = e.manufacturerFilter,
                    r = e.selectedItems;
                this.btnAllCheck.selected = i, this.vehicleListBinder.setProps({
                    items: this.vehicleListBinder.getProps().items || this.vehicleService.getTradableVehicles()
                });
                var o = this.vehicleListBinder.getProps().items;
                this.manufacturerFilter.items = this.getGroupedByManufacturer(o, i), o && o.length > 0 && (this.manufacturerFilter.selectedIndex = this.findIndex(n.selected), this.applyChanges()), this.visible(".id-noVehicles", this.isEmpty(i));
                var a = r.length;
                this.template(".id-count", "TRADE_MAINMENU_MYCARCOUNT", {
                    selectcarcount: a,
                    maxcarcount: h.MAX_SELECTABLE_ITEMS
                }), a ? (this.visible(".id-autoSelectButton", !1), this.visible(".id-resetButton", !0)) : (this.visible(".id-autoSelectButton", !0), this.visible(".id-resetButton", !1));
                var s = this.tradeService.getCooltime(t);
                a >= h.MIN_SELECTABLE_ITEMS && a <= h.MAX_SELECTABLE_ITEMS && s <= 0 ? this.enableButton(".id-tradeButton", !0) : this.enableButton(".id-tradeButton", !1)
            }, t.prototype.isEmpty = function(e) {
                var t = this.vehicleListBinder.getProps().items;
                return e ? 0 === t.length : 0 === this.vehicleService.filterTunedVehicles(t).length
            }, t.prototype.setVehicleList = function() {
                var e = this;
                this.sortTabBinder = this.addChildBinder(".SortingContainer", a.SortTabBinder, {
                    tabInfos: [{
                        title: "TRADE_MAINMENU_MYCARLIST_CLASS",
                        type: "clazz"
                    }, {
                        title: "TRADE_MAINMENU_MYCARLIST_NAME",
                        type: "name"
                    }, {
                        title: "TRADE_MAINMENU_MYCARLIST_GRADE",
                        type: "grade"
                    }, {
                        title: "TRADE_MAINMENU_MYCARLIST_OVR",
                        type: "ovr"
                    }, {
                        title: "TRADE_MAINMENU_MYCARLIST_TUNNING",
                        type: "tunning"
                    }],
                    initSelectedIndex: 3,
                    initDescending: !1,
                    selectedTab: function() {
                        e.update(e.getProps())
                    }
                }), this.vehicleListBinder = this.addChildBinder(".VehicleList", s.TradeVehicleListBinder, {
                    itemBinderClass: c.VehicleListItemBinder,
                    sortTabBinder: this.sortTabBinder,
                    onDetail: function(t) {
                        return e.showDetailPopup(t)
                    }
                })
            }, t.prototype.findIndex = function(e) {
                return _.findIndex(this.manufacturerFilter.items, function(t) {
                    return t.value === e
                })
            }, t.prototype.applyChanges = function() {
                var e = f.store.getState().trade.manufacturerFilter;
                if (e.codes.length !== this.manufacturerFilter.items.length) {
                    var t = this.findIndex(e.selected);
                    this.manufacturerFilter.selectedIndex = t >= 0 ? t : 0
                }
                var i = this.manufacturerFilter.selectedIndex;
                this.dispatch(l.setManufacturerFilter({
                    codes: _.map(this.manufacturerFilter.items, function(e) {
                        return e.value
                    }),
                    selected: this.manufacturerFilter.items[i].value
                }))
            }, t.prototype.getGroupedByManufacturer = function(e, t) {
                var i = this,
                    n = t ? e : this.vehicleService.filterTunedVehicles(e),
                    r = _.countBy(n, function(e) {
                        return e.manufacturerCode
                    });
                return this.counts = r.length, [{
                    text: "" + this.$filter("translate")("ALL_MANUFACTURER"),
                    value: 0
                }].concat(_.map(r, function(e, t) {
                    return {
                        text: "" + i.$filter("manufacturerName")(t),
                        value: parseInt(t, 10)
                    }
                }))
            }, t.prototype.showEffect = function() {
                return n.__awaiter(this, void 0, void 0, function() {
                    var e, t, i, r, o, a;
                    return n.__generator(this, function(n) {
                        switch (n.label) {
                            case 0:
                                return this.getFace(".stage-trade-effect") ? [3, 2] : [4, this.lazyLoadService.loadView("trade-effect")];
                            case 1:
                                n.sent(), n.label = 2;
                            case 2:
                                e = f.store.getState().trade, t = e.dealerNpc, i = e.selectedItems, n.label = 3;
                            case 3:
                                return n.trys.push([3, 5, , 6]), r = this.tradeService.getDealerNpc(t), [4, this.tradeService.trade(r.type, i)];
                            case 4:
                                return o = n.sent(), log.debug(o), this.dispatch(l.showEffect(o)), [3, 6];
                            case 5:
                                return a = n.sent(), this.popupService.draw("ConfirmPopup", {
                                    title: "TRADE_FAILEDPOPUP_TITLE",
                                    description: "TRADE_FAILEDPOPUP_MSG_2"
                                }), this.vehicleListBinder.setProps({
                                    items: this.vehicleService.getTradableVehicles()
                                }), this.update(e), [3, 6];
                            case 6:
                                return [2]
                        }
                    })
                })
            }, t.prototype.showDetailPopup = function(e) {
                this.marketService.emit("openVehicleDetail", e)
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], v.prototype, "$filter", void 0), n.__decorate([o.autowired("vehicleService")], v.prototype, "vehicleService", void 0), n.__decorate([o.autowired("popupService")], v.prototype, "popupService", void 0), n.__decorate([o.autowired("lazyLoadService")], v.prototype, "lazyLoadService", void 0), n.__decorate([o.autowired("tradeService")], v.prototype, "tradeService", void 0), n.__decorate([o.autowired("marketService")], v.prototype, "marketService", void 0), t.VehicleListContainerBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(630),
        a = i(3),
        s = i(265),
        c = i(137),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(t) {
                e.prototype.onFaceReady.call(this, t), this.onDetail = t.onDetail, this.addManagedListener(this.tradeService, "updateVehicles", this.updateVehicles.bind(this))
            }, t.prototype.update = function(t) {
                var i = this.props.items;
                if (i && i.length > 0) {
                    var n = this.sortTabBinder.getSelectedTabInfo(),
                        r = n.tabInfo,
                        o = n.descending,
                        a = this.filterVehicles(i),
                        s = this.marketService.sortingVehicleInfo(a, r.type, o);
                    e.prototype.update.call(this, {
                        items: s
                    })
                }
            }, t.prototype.updatelistItemSelected = function(e) {
                var t = this,
                    i = this.getTradeState().selectedItems;
                _.forEach(this.listBinder.binders, function(e) {
                    var n = _.find(i, function(t) {
                        return t === e.getProps().info.id
                    });
                    e.face.selected = !!n, i.length >= s.MAX_SELECTABLE_ITEMS ? t.enableButton(e.face, !!n) : t.enableButton(e.face, !0)
                })
            }, t.prototype.selectItem = function(e) {
                this.selectedIndex = e, this.updatelistItemSelected(e), this.selectedItem && this.selectedItem(this.items[this.selectedIndex])
            }, t.prototype.selectItems = function(e) {
                var t = _.map(this.items, function(e) {
                    return e.id
                });
                this.dispatch(c.selectItems(_.take(t, s.MAX_SELECTABLE_ITEMS)))
            }, t.prototype.getItemProps = function(e) {
                var t = this;
                return {
                    info: e,
                    onClick: function(e) {
                        return t.selectItem(e.index)
                    },
                    onDetail: function(e) {
                        return t.onDetail(e)
                    }
                }
            }, t.prototype.filterVehicles = function(e) {
                var t = this.getTradeState(),
                    i = t.viewAll,
                    n = t.manufacturerFilter,
                    r = n.selected ? _.filter(e, function(e) {
                        return e.manufacturerCode === n.selected
                    }) : e;
                return i ? r : this.vehicleService.filterTunedVehicles(r)
            }, t.prototype.updateVehicles = function() {
                this.setProps({
                    items: this.vehicleService.getTradableVehicles()
                })
            }, t.prototype.getTradeState = function() {
                return a.store.getState().trade
            }, t
        }(o.ScrollListBinder);
    n.__decorate([r.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([r.autowired("marketService")], d.prototype, "marketService", void 0), n.__decorate([r.autowired("vehicleService")], d.prototype, "vehicleService", void 0), n.__decorate([r.autowired("tradeService")], d.prototype, "tradeService", void 0), t.TradeVehicleListBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(241),
        o = i(1),
        a = i(2),
        s = i(137),
        c = i(13),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var t = this;
                e.prototype.onFaceReady.call(this), this.on(this.face, a.MouseEventEx.CLICK, function(e) {
                    t.dispatch(s.selectItem(t.props.info.id))
                }), this.addManagedListener(this.face, a.MouseEventEx.MOUSE_OVER, this.showTooltip.bind(this)), this.addManagedListener(this.face, a.MouseEventEx.MOUSE_OUT, this.hideTooltip.bind(this))
            }, t.prototype.update = function(t) {
                e.prototype.update.call(this, t);
                var i = t.info,
                    n = i.code,
                    r = i.paint,
                    o = this.vehicleService.isTuned(n, r);
                this.gotoAndStop(".id-tuningTag", o ? "full" : "empty")
            }, t.prototype.isNoSellVehicle = function(e) {
                return !!e.favorite || 0 === e.grade
            }, t.prototype.showTooltip = function(e) {
                var t = this.getProps().info,
                    i = "bottom",
                    n = this.getFace(".id-ovr");
                n = n.htmlElement || n, "bottom" === i && 700 < $(n).offset().top && (i = "top"), this.tooltipService.show(n, i, c.TooltipType.MarketOvr, {
                    vehicle: t
                }, {
                    marginTop: "bottom" === i ? 48 : -14,
                    marginLeft: -64,
                    width: 250
                })
            }, t.prototype.hideTooltip = function(e) {
                this.tooltipService.hide()
            }, t
        }(r.VehicleListItemBinder);
    n.__decorate([o.autowired("vehicleService")], d.prototype, "vehicleService", void 0), n.__decorate([o.autowired("tooltipService")], d.prototype, "tooltipService", void 0), t.VehicleListItemBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1584),
        a = i(1585),
        s = i(1587),
        c = 1e3,
        d = 2e3,
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.calcValue = _.debounce(function(e, i, n, r, o) {
                    if (i && n && r) {
                        var a = i + _.sumBy([t.tradeService.isCompleteQuest(n, o), t.tradeService.isCompleteQuest(r, o)], function(e) {
                            return e.bonusRate
                        });
                        t.valueContainerBinder.setProps({
                            npcDealerCode: e,
                            totalRate: a
                        })
                    }
                }, c / 4, {
                    maxWait: d / 2
                }), t.expectBestResult = _.debounce(function(e, i, r, o) {
                    t.tradeService.expectBestResult(i, o).then(function(i) {
                        var r = (i.tradeRate, i.vehicleSpec);
                        t.speechBalloonContainerBinder.setProps(n.__assign({
                            code: e
                        }, r))
                    })
                }, c, {
                    maxWait: d
                }), t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(".id-cooltime", !0), this.hasSize(".id-cooltime .id-textField", !1), this.visible(".id-speechBalloonContainer", !1), this.hasSize(".id-speechBalloonContainer .id-description", !0), this.hasSize(".id-speechBalloonContainer .id-description .id-textField", !1), this.valueContainerBinder = this.addChildBinder(".id-valueContainer", o.ValueContainerBinder), this.questContainerBinder = this.addChildBinder(".id-questContainer", a.QuestContainerBinder), this.speechBalloonContainerBinder = this.addChildBinder(".id-speechBalloonContainer", s.SpeechBalloonContainerBinder)
            }, t.prototype.update = function(e) {
                _.isEmpty(this.prev) && e && (this.prev = e);
                var t = e.dealerNpc,
                    i = e.selectedItems;
                e.tradeRecord;
                if (t) {
                    var n = this.tradeService.getDealerNpc(t),
                        r = n.code,
                        o = n.type,
                        a = n.usualBoostCode,
                        s = n.dailyBoostCode,
                        c = this.tradeService.getDealerNpcStaticData(r),
                        d = c.driverCode,
                        l = c.baseRate;
                    r && (this.translate(".id-npcName .id-textField", "TRADE_DEALERNPC_NAME_" + r), this.translate(".id-npcDescription .id-textField", "TRADE_DEALERNPC_DESC_" + r)), d && this.drawExternalImage(".id-externalImage", this.$filter("cdn_driver")(d)), this.questContainerBinder.setProps({
                        usual: a,
                        daily: s,
                        selectedItems: i
                    });
                    var u = this.tradeService.getCooltimeText(r);
                    this.translate(".id-cooltime .id-textField", u), _.isEqual(u, this.tradeService.getCooltimeText(1)) ? (this.hasSize(".id-cooltime .id-coolTimeIcon", !1), this.visible(".id-cooltime .id-coolTimeIcon", !1)) : (this.hasSize(".id-cooltime .id-coolTimeIcon", !0), this.visible(".id-cooltime .id-coolTimeIcon", !0)), _.isEqual(this.prev.dealerNpc, t) && _.isEqual(this.prev.selectedItems, i) || (this.prev.dealerNpc && this.prev.dealerNpc === t || (this.gotoAndPlay(this.face, "in"), this.prev.dealerNpc = t), this.calcValue(r, l, s, a, i), this.handleSelect(r, o, l, i), this.prev.selectedItems = i)
                }
            }, t.prototype.handleSelect = function(e, t, i, n) {
                n.length >= 2 ? (this.visible(".id-speechBalloonContainer", !0), this.gotoAndStop(".id-speechBalloonContainer .id-speechBalloon", "loading"), this.expectBestResult(e, t, i, n)) : this.visible(".id-speechBalloonContainer", !1)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([r.autowired("tradeService")], l.prototype, "tradeService", void 0), t.NpcContainerBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(2),
        s = i(13),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-percent", "TRADE_DEALERNPC_VALUETITLEEND"), this.translate(".SubTitleContainer .id-textField", "TRADE_DEALERNPC_VALUETITLE"), this.template(".id-percentNum .id-textField", "TRADE_DEALERNPC_VALUE", {
                    transvalue: 100
                }), this.on(".id-tooltip", a.MouseEventEx.MOUSE_OVER, function(t) {
                    var i = e.$filter("translate")("TRADE_DEALERNPC_VALUE_TOOLTIP");
                    e.tooltipService.show(t, "topright", s.TooltipType.Basic, i, {
                        marginTop: 22,
                        marginLeft: 2
                    }, {
                        width: 274
                    })
                }), this.on(this.face, a.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                })
            }, t.prototype.update = function(e) {
                var t = e.npcDealerCode,
                    i = e.totalRate,
                    n = Math.round(100 * i),
                    r = $(this.getFace(".id-percentNum .id-textField").htmlElement);
                o.default.applyCounter(r, t === this.prevNpcDealerCode && this.prevValue ? this.prevValue : n || 0, n), this.prevNpcDealerCode = t, this.prevValue = n
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), t.ValueContainerBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1586),
        a = i(2),
        s = i(13),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".SubTitleContainer .id-textField", "TRADE_DEALERNPC_QUESTTITLE"), this.questItemList = this.addChildBinder(".id-questItem", r.CollectionBinder, {
                    instanceBinder: o.QuestItemBinder
                }), this.on(".id-tooltip", a.MouseEventEx.MOUSE_OVER, function(t) {
                    var i = e.$filter("translate")("TRADE_DEALERNPC_QUEST_TOOLTIP");
                    e.tooltipService.show(t, "topright", s.TooltipType.Basic, i, {
                        marginTop: 22,
                        marginLeft: 2
                    }, {
                        width: 300
                    })
                }), this.on(this.face, a.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                })
            }, t.prototype.update = function(e) {
                var t = e.usual,
                    i = e.daily,
                    n = e.selectedItems;
                if (t && i && n) {
                    var r = [this.tradeService.isCompleteQuest(t, n), this.tradeService.isCompleteQuest(i, n)];
                    _.isEqual(this.questCompletion, r) || (this.questItemList.applyCollection(r), this.questCompletion = r)
                }
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), n.__decorate([r.autowired("tradeService")], c.prototype, "tradeService", void 0), t.QuestContainerBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(this.face, !0)
            }, t.prototype.update = function(e) {
                var t = e.qid,
                    i = e.complete;
                this.translate(".id-quest", "TRADE_DEALERNPC_QUESTDESC_" + t), this.gotoAndPlay(this.face, i ? "get" : "normal")
            }, t
        }(r.Binder);
    t.QuestItemBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1588),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.speechBalloonBinder = this.addChildBinder(".id-speechBalloon", o.SpeechBalloonBinder)
            }, t.prototype.onAddedToScene = function() {
                this.gotoAndPlay(this.face, "in")
            }, t.prototype.update = function(e) {
                this.speechBalloonBinder.setProps(e), this.gotoAndPlay(this.face, "refresh")
            }, t
        }(r.Binder);
    t.SpeechBalloonContainerBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(this.face, !0), this.translate(".id-subTitle1 .id-textField", "TRADE_MAINMENU_MYCARLIST_PREVIEW_CLASS"), this.translate(".id-subTitle2 .id-textField", "TRADE_MAINMENU_MYCARLIST_PREVIEW_GRADE")
            }, t.prototype.update = function(e) {
                var t = e.code,
                    i = e.clazz,
                    n = e.grade,
                    r = this.$filter("template")({
                        grade: n,
                        clazz: i
                    }, "TRADE_MAINMENU_MYCARLIST_PREVIEW_DESC_" + t);
                this.bindHtml(".id-description .id-textField", r), this.translate(".id-vehicleClass .id-textField", i), this.gotoAndStop(".id-vehicleGrade", n + 1), this.gotoAndStop(this.face, "default")
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), t.SpeechBalloonBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1590),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-subTitle .id-textField", "TRADE_DEALERNPC_TITLE")
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.props.selectedItem;
                this.npcItemBinders || (this.npcItemBinders = {}), _.forEach(this.staticData.dealerNpcData, function(i, n) {
                    e.npcItemBinders[i.type] = e.addChildBinder(".id-trackCard" + n, o.NpcItemBinder, {
                        dealerNpc: i,
                        selectedItem: t
                    })
                })
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.selectedItem;
                e.cooldown;
                _.forEach(this.staticData.dealerNpcData, function(e, n) {
                    t.npcItemBinders && t.npcItemBinders[e.type] && t.npcItemBinders[e.type].setProps({
                        dealerNpc: e,
                        selectedItem: i
                    })
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], a.prototype, "$filter", void 0), n.__decorate([r.autowired("staticdataLoaderService")], a.prototype, "staticData", void 0), t.NpcListContainerBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(46),
        o = i(1),
        a = i(2),
        s = i(137),
        c = i(13),
        d = i(5),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.npcItem = this.convertFace(this.face);
                var t = this.props.dealerNpc,
                    i = t.code;
                this.on(this.face, a.MouseEventEx.CLICK, function() {
                    _.isEmpty(e.npcItem.customState) && e.dispatch(s.setDealerNpc(i))
                }), this.on(this.face, a.MouseEventEx.MOUSE_OVER, function(t) {
                    if ("empty" !== e.npcItem.customState) {
                        var n = e.tradeService.getCooltimeText(i),
                            r = e.$filter("translate")(n);
                        e.tooltipService.show(t, "top", c.TooltipType.DealerNpc, {
                            mainText: [{
                                title: e.$filter("translate")("TRADE_DEALERNPC_DESC_" + i)
                            }, {}],
                            subText: [r]
                        }, {
                            marginTop: -2
                        })
                    }
                }), this.on(this.face, a.MouseEventEx.MOUSE_OUT, function(t) {
                    e.tooltipService.hide()
                }), this.progressBinder = this.addChildBinder(".id-progressBar", r.ProgressBinder, {
                    duration: 1,
                    outDuration: .5,
                    scaleVertical: !0
                }), this.update(this.props)
            }, t.prototype.onAddedToScene = function() {
                var e = this.props.dealerNpc,
                    t = e.type,
                    i = e.driverCode,
                    n = e.activation;
                this.updateAssets(t, i, n)
            }, t.prototype.update = function(e) {
                var t = e.selectedItem,
                    i = e.dealerNpc,
                    n = i.code,
                    r = this.tradeService.getDealerNpcStaticData(n),
                    o = (r.driverCode, r.activation, r.cooldownMinutes),
                    a = this.tradeService.getCooltime(n),
                    s = d.duration(a);
                (!this.cooldown || 0 === this.cooldown) && a > 0 && (this.updateCooldown(a), this.selectButton(this.npcItem, !1)), this.cooldown > 0 && a ? (s.days() < 1 && (this.translate(this.face.$(".id-cooltime"), d().hour(s.hours()).minute(s.minutes()).second(s.seconds()).format("HH:mm:ss")), this.progressBinder.value = Math.round(s.asMinutes() / o * 100)), this.selectButton(this.npcItem, !1)) : this.selectButton(this.npcItem, t === n)
            }, t.prototype.updateCooldown = function(e) {
                this.npcItem.customState = "cooltime", this.cooldown = e
            }, t.prototype.updateAssets = function(e, t, i) {
                this.drawExternalImage(".id-externalImage", this.$filter("cdn_driver_thumbnail")(t));
                var n;
                switch (e) {
                    case "igr":
                        n = "pc", this.publisherService.isIgr && i || (this.npcItem.customState = "deactivate");
                        break;
                    case "vip":
                        n = "vip";
                        break;
                    case "promotion":
                        n = "event";
                        break;
                    default:
                        n = "normal"
                }
                this.gotoAndStop(".id-tagContainer", n), i || (this.npcItem.customState = "empty", this.enableButton(this.face, !1))
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], l.prototype, "$filter", void 0), n.__decorate([o.autowired("tradeService")], l.prototype, "tradeService", void 0), n.__decorate([o.autowired("tooltipService")], l.prototype, "tooltipService", void 0), n.__decorate([o.autowired("publisherService")], l.prototype, "publisherService", void 0), t.NpcItemBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(137),
        a = i(2),
        s = i(1592),
        c = i(1594),
        d = i(660),
        l = i(3),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-titleLabel", "TRADE_RESULT_TITLE"), this.translate(".id-description .id-textField", "TRADE_RESULT_MSG"), this.movingItemContainerBinder = this.addChildBinder(".id-movingItemContainer", s.MovingItemContainerBinder), this.bonusContainerBinder = this.addChildBinder(".id-bonusContainer", c.BonusContainerBinder), _.forEach(this.face.$$(".CardFocusFrame"), function(e) {
                    $(e.htmlElement).addClass("prevent-click")
                }), this.setConfirmButton()
            }, t.prototype.update = function(e) {
                var t = this;
                if (e.showEffect) {
                    var i = e.tradeVehicleResult;
                    if (this.prevTradeVehicleResult !== i) {
                        var n = i.result,
                            r = n.vehicle,
                            o = n.parts,
                            a = n.blueprint;
                        this.movingItemContainerBinder.setProps(r), this.bonusContainerBinder.setProps({
                            parts: o,
                            blueprint: a
                        });
                        var s = r.gain,
                            c = s.code,
                            l = s.grade;
                        this.resultItem = this.addChildBinder(".id-resultItem", d.VehicleCardBinder), this.vehiclePriceDataService.getLatestPriceData([{
                            code: c,
                            grade: l
                        }]).then(function(e) {
                            var i = e.get(c, l);
                            t.resultItem.setProps({
                                code: c,
                                grade: l,
                                price: i
                            })
                        }), this.gotoAndPlay(this.face, "in"), this.prevTradeVehicleResult = i
                    }
                }
            }, t.prototype.onDestroy = function() {
                this.dispatch(o.reset())
            }, t.prototype.mapStateToProps = function(e) {
                return e.trade
            }, t.prototype.setConfirmButton = function() {
                var e = this;
                this.confirmButton = this.convertFace(".id-confirmButton"), this.on(this.confirmButton, a.MouseEventEx.CLICK, function() {
                    e.gotoAndPlay(e.face, "out");
                    var t = l.store.getState().trade.dealerNpc;
                    e.tradeService.setCooltime(t, new Date), e.tradeService.emit("updateVehicles"), e.dispatch(o.hideEffect())
                }), this.translate(this.confirmButton, "TRADE_RESULT_BTN_OK")
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("tradeService")], u.prototype, "tradeService", void 0), n.__decorate([r.autowired("vehiclePriceDataService")], u.prototype, "vehiclePriceDataService", void 0), t.TradeEffectBinder = u
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1593),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                var t = (e.gain, e.lost, this.face.timeline.getLabelsArray()),
                    i = t[Math.floor(Math.random() * t.length)];
                this.gotoAndPlay(this.face, i.name);
                for (var r = 1; r <= 3; r++) {
                    this.addChildBinder(".id-itemContainer" + r, o.ItemContainerBinder).setProps(n.__assign({}, e, {
                        resultIndex: Number(i.name.match(/\d+/)[0])
                    }))
                }
            }, t
        }(r.Binder);
    t.MovingItemContainerBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(16),
        o = i(1),
        a = i(660),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.vehicleCardBinders = [];
                for (var e = 1; e <= 10; e++) this.vehicleCardBinders.push(this.addChildBinder(".id-item" + e, a.VehicleCardBinder))
            }, t.prototype.update = function(e) {
                for (var t = e.gain, i = e.lost, n = e.resultIndex, r = _.clone(i), o = 0; o < 10; o++)
                    if (o + 1 === n) this.vehicleCardBinders[o].setProps({
                        code: t.code,
                        grade: t.grade
                    });
                    else {
                        var a = r.shift(),
                            s = a.code,
                            c = a.grade;
                        if (!s || !c) continue;
                        this.vehicleCardBinders[o].setProps({
                            code: s,
                            grade: c
                        })
                    }
            }, t
        }(o.Binder);
    n.__decorate([r.autowired("vehicleDataService")], s.prototype, "vehicleDataService", void 0), t.ItemContainerBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1595),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-subTitleLabel", "TRADE_RESULT_BONUSREWARD"), this.translate(".id-description", "TRADE_RESULT_BONUSREWARD_NONE"), this.bonusItemContainer = this.addChildBinder(".id-bonusItemContainer", o.BonusItemContainerBinder)
            }, t.prototype.update = function(e) {
                var t = e.parts,
                    i = e.blueprint;
                this.visible(".id-description", !t && !i), this.bonusItemContainer.setProps({
                    parts: t,
                    blueprint: i
                })
            }, t
        }(r.Binder);
    t.BonusContainerBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1596),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(this.face, !0), this.visible(this.face, !1), this.bonusItems = this.addChildBinder(".id-bonusItem", r.CollectionBinder, {
                    instanceBinder: o.BonusItemBinder
                })
            }, t.prototype.update = function(e) {
                var t = e.parts,
                    i = e.blueprint,
                    n = [];
                i && n.push({
                    side: "top",
                    info: {
                        code: i.code,
                        type: "BLUEPRINT",
                        count: i.count
                    }
                }), t && n.push({
                    side: "top",
                    info: {
                        code: t.code,
                        type: "PARTS",
                        count: t.count
                    }
                }), this.visible(this.face, n.length > 0), this.bonusItems.applyCollection(n)
            }, t
        }(r.Binder);
    t.BonusItemContainerBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(27),
        a = i(50),
        s = i(2),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.hasSize(this.face, !0), this.item = this.addChildBinder(".id-itemCardSmall", o.ItemCardBinder), this.face.on(s.MouseEventEx.MOUSE_OVER, function() {
                    var t = e.props,
                        i = t.info,
                        n = t.side;
                    e.tooltipService.show(e.getFace(".comp-HitArea"), n, "BLUEPRINT" === i.type ? a.TooltipType.Blueprint : a.TooltipType.PartsMaterialSlot, "BLUEPRINT" === i.type ? e.blueprintService.getBlueprintTooltipInfo(i.code) : e.partsService.getPartsTooltipInfo(i.code), {
                        marginTop: -2,
                        marginLeft: 1
                    })
                }), this.face.on(s.MouseEventEx.MOUSE_OUT, function() {
                    e.tooltipService.hide()
                })
            }, t.prototype.update = function(e) {
                var t = this.props.info;
                this.item.setProps({
                    info: t
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("tooltipService")], c.prototype, "tooltipService", void 0), n.__decorate([r.autowired("blueprintService")], c.prototype, "blueprintService", void 0), n.__decorate([r.autowired("partsService")], c.prototype, "partsService", void 0), t.BonusItemBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), i(1598), i(1612), i(1617), i(1623), i(1625)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1599),
        o = i(1601),
        a = i(1605);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/timetrial", 80).container({
            stages: {
                "singleplay-timetrial-lobby": r.TimetrialLobbyBinder
            },
            resolve: {
                fetched: ["timetrialService", function(e) {
                    return e.fetch()
                }]
            }
        }).dialog({
            stages: {
                "singleplay-timetrial-track-info": o.TimetrialTrackInfoBinder,
                "singleplay-timetrial-popup": a.TimetrialPopupBinder
            }
        });
        e.state("root.menu.Timetrial", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(3),
        o = i(1),
        a = i(138),
        s = i(199),
        c = i(28),
        d = i(184),
        l = i(72),
        u = i(8),
        p = i(2),
        h = i(1600),
        f = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.tracksBinder = this.addChildBinder(".id-trackTileListContainer", h.TimetrialLobbyTrackListBinder, h.TrackListTileType), this.on(".id-reward", p.MouseEventEx.CLICK, function() {
                    e.dispatch(s.openSeasonReward())
                }), this.translate(".MedalInfo .id-title", "TIMETRIAL_MAIN_TOTALMEDAL_STATUS"), this.gotoAndStop(".MedalInfo .id-medalNum2", "flatinum"), this.translate(".id-reward .id-title", "TIMETRIAL_MAIN_REWARD_INFO"), this.bindText(".MedalInfo .id-medalNum1 .id-num", 0), this.bindText(".MedalInfo .id-medalNum2 .id-num", 0)
            }, t.prototype.onAddedToScene = function() {
                this.checkPrevSeasonInfo(), this.buildTrackInfo(), this.setTrackFilterTab(), this.bindRollingTips(), this.setVehicle(), this.deregister = this.$transitions.onExit({}, function(e) {
                    if (-1 === ["root.menu.Timetrial", "root.TimetrialLoading", "root.menu.Timetrial.event"].indexOf(e.$to().name)) return r.store.dispatch(a.selectVehicle())
                })
            }, t.prototype.checkPrevSeasonInfo = function() {
                var e = this;
                this.stage.once("stop", function() {
                    return e.buttonGroup.setSelectedButtonByIndex(0)
                });
                var t = function() {
                    return e.stage.gotoAndPlay("in")
                };
                if (this.storeState.timetrial.prevSeasonInfo) {
                    this.stateService.go(".event");
                    var i = this.stateService.getCurrentName(),
                        n = this.$transitions.onSuccess({
                            to: i,
                            from: i + ".event"
                        }, function() {
                            n(), t()
                        })
                } else t()
            }, t.prototype.setVehicle = function() {
                if (!this.storeState.timetrial.selectedVehicle) {
                    var e = this.playerService.setRecentVehicleIfNeeded(5);
                    this.dispatch(a.selectVehicle(e))
                }
            }, t.prototype.bindRollingTips = function() {
                var e = this,
                    t = _.range(1, 5).map(function(e) {
                        return "TIMETRIAL_MAIN_ROLLINGTEXT_0" + e
                    }),
                    i = function() {
                        var i = t.shift();
                        e.translate(".BottomInfo .id-description", i), t.push(i)
                    };
                this.tipInterval = setInterval(i, 5e3), i()
            }, t.prototype.onDetach = function() {
                clearInterval(this.tipInterval), this.deregister()
            }, t.prototype.bindMedalData = function(e) {
                var t = this.timetrialService.getMedalCount();
                this.bindText(".id-normalMedalNum .id-num", t);
                var i = e.platinumTrackCodes && e.platinumTrackCodes.length;
                this.bindText(".id-platinumMedalNum .id-num", i)
            }, t.prototype.buildTrackInfo = function(e) {
                void 0 === e && (e = []);
                var t = this.storeState.timetrial.playerInfo;
                this.trackList = this.timetrialService.getTracks().map(function(i) {
                    if (t && t.trackRecords) {
                        var r = t.trackRecords[i.code];
                        if (r) {
                            var o = e.indexOf(i.code) >= 0,
                                a = r.medalStep;
                            return n.__assign({}, i, {
                                lapTime: r.bestLaptime,
                                medalStep: a,
                                isPlatinum: o
                            })
                        }
                    }
                    return i
                })
            }, t.prototype.setTrackFilterTab = function() {
                var e = this,
                    t = _(this.trackList).groupBy("difficultyCode").map(function(e, t) {
                        return {
                            difficultyCode: t,
                            count: e.length
                        }
                    }).concat({
                        difficultyCode: "TRACK_DIFFICULTY_00",
                        count: this.trackList.length
                    }).sortBy("difficultyCode").value(),
                    i = t.map(function(e) {
                        return d.getFilter("translate")(e.difficultyCode).concat(" (" + e.count + ")")
                    });
                this.getFace(".id-tab").hasSize = !0, this.addChildBinder(".id-tab .id-tabButton", o.CollectionBinder, {
                    instanceBinder: c.bindText
                }).applyCollection(i), this.buttonGroup = new l.ButtonGroup("TrackTypeList"), _.each(this.face.$$(".id-tab .id-tabButton"), function(t, i) {
                    e.addManagedListener(t, u.EventEx.SELECT, function() {
                        t.selected && (log.debug("selected type : ", i), 0 === i ? e.tracksBinder.setProps({
                            tracks: e.trackList
                        }) : e.tracksBinder.setProps({
                            tracks: e.trackList.filter(function(e) {
                                return e.difficultyCode === "TRACK_DIFFICULTY_0" + i
                            })
                        }))
                    }), t.toggle = !0, t.hasSize = !0, e.buttonGroup.addButton(t)
                })
            }, t.prototype.bindSeasonInfo = function(e) {
                var t = this.timetrialService.seasonLabelParam();
                this.template(".TitleContainer .TitleLabel", "TIMETRIAL_MAIN_SEASON_NUMBER", t), this.template(".TitleContainer .DescriptionLabel", "TIMETRIAL_MAIN_SEASON_PERIOD", t), this.template(".TitleContainer .id-logo", "TIMETRIAL_MAIN_SEASONICON_TEXT", t)
            }, t.prototype.update = function(e) {
                e.playerInfo && (this.buildTrackInfo(e.platinumTrackCodes), this.bindMedalData(e)), e.seasonInfo && this.bindSeasonInfo(e.seasonInfo)
            }, t.prototype.mapStateToProps = function(e) {
                return e.timetrial
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("staticdataLoaderService")], f.prototype, "staticdata", void 0), n.__decorate([o.autowired("timetrialService")], f.prototype, "timetrialService", void 0), n.__decorate([o.autowired("playerService")], f.prototype, "playerService", void 0), n.__decorate([o.autowired("stateService")], f.prototype, "stateService", void 0), n.__decorate([o.autowired("$transitions")], f.prototype, "$transitions", void 0), t.TimetrialLobbyBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(621),
        o = i(138),
        a = i(622),
        s = i(4);
    t.TrackListTileType = {
        itemCountPerPage: 12,
        rowSize: 3
    };
    var c = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.update = function(t) {
            e.prototype.update.call(this, t);
            var i = this.getFace(".LaptimeContainer");
            this.bindTextAll(".LaptimeContainer .id-laptime", t.lapTime ? s.default.formatLapTime(t.lapTime) : "-"), t.lapTime ? (this.gotoAndPlay(i, "record"), this.gotoAndStop("> .OutLine", "get"), this.gotoAndStop(i.$(".NormalMedalMC"), t.medalStep ? String(t.medalStep) : "default"), this.gotoAndStop(i.$(".PlatinumMedalMC"), t.isPlatinum ? "record" : "default")) : (this.gotoAndPlay(i, "default"), this.gotoAndStop("> .OutLine", "default"))
        }, t
    }(a.TrackBinder);
    t.TimetrialTrackBinder = c;
    var d = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var t = this;
            e.prototype.onFaceReady.call(this), this.on(this.face, "selected", function(e) {
                t.dispatch(o.showTrackInfo(e.code))
            })
        }, t.prototype.update = function(t) {
            e.prototype.update.call(this, t), this.gotoAndPlay(".id-current", "in")
        }, t.prototype.onClick = function(e, t) {
            var i = this.chunkedTracks[this.pageIndex][e];
            this.face.dispatchEvent("selected", i)
        }, t.prototype.pushTrackBinderToList = function(e, t) {
            this.currListBinder.push(this.addChildBinder(e, c)), this.nextListBinder.push(this.addChildBinder(t, c))
        }, t
    }(r.TrackList);
    t.TimetrialLobbyTrackListBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(16),
        s = i(12),
        c = i(2),
        d = i(138),
        l = i(199),
        u = i(661),
        p = i(1602),
        h = i(1604),
        f = i(94),
        v = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.visible(this.face, !1), this.swipButtonContainer = this.getFace(".SwipeButtonContainer"), this.vehicleChangeButton = this.getFace(".id-vehicleChangeButton"), this.startButton = this.getFace(".id-startButton");
                var e = this.getFace(".id-showRank");
                this.translate(e.$(".id-buttonName"), "TIMETRIAL_TRACKINFO_BUTTON_RANK"), this.translate(this.vehicleChangeButton.$(".id-buttonName"), "TIMETRIAL_TRACKINFO_BUTTON_VEHICLESELECT"), this.translate(this.startButton.$(".id-buttonName"), "TIMETRIAL_TRACKINFO_BUTTON_CONFIRM"), this.setHandler(), this.gotoAndStop(this.swipButtonContainer, "vehicleChange"), this.missionBinder = this.addChildBinder(".id-mission", u.MissionInfo), this.myRankBinder = this.addChildBinder(".id-myRank", p.TimetrialTrackMyRankBinder), this.ghostSelectBinder = this.addChildBinder(this.face, h.TimetrialGhostSelectBinder), this.hasSize(".id-caution", !0), this.hasSize(".id-caution .id-icon", !0), this.translate(".id-caution", "TIMETRIAL_TRACKINFO_VEHICLENOTICE")
            }, t.prototype.setHandler = function() {
                var e = this;
                this.on(this.face, "back", function() {
                    e.gotoAndPlay(".id-mainContents", "in")
                }), this.on(this.vehicleChangeButton, c.MouseEventEx.CLICK, function() {
                    e.openChangeVehiclePopup()
                }), this.onClickSafe(this.startButton, function() {
                    return e.goNextStep()
                }), this.on(".id-closeButton", c.MouseEventEx.CLICK, function() {
                    e.visible(e.face, !1), e.dispatch(d.hideTrackInfo())
                }), this.onClickSafe(".id-showRank", function() {
                    return e.timetrialService.fetchTrackRecords(e.selectedTrack).then(function(t) {
                        e.dispatch(l.openTrackRank(e.selectedTrack, t))
                    })
                }), this.on(".id-left", c.MouseEventEx.CLICK, function() {
                    e.showPrevTrackInfo()
                }), this.on(".id-right", c.MouseEventEx.CLICK, function() {
                    e.showNextTrackInfo()
                })
            }, t.prototype.onAddedToScene = function() {
                this.template(".id-date .comp-TextField", "TIMETRIAL_TRACKINFO_REMAININGDAY", {
                    day: this.timetrialService.seasonRemainDays()
                })
            }, t.prototype.showNextTrackInfo = function() {
                var e = this.reduxProps.selectedTrack,
                    t = this.timetrialService.getTracks(),
                    i = _.findIndex(t, function(t) {
                        return t.code === e
                    });
                i === t.length - 1 ? this.dispatch(d.showTrackInfo(_.first(t).code)) : this.dispatch(d.showTrackInfo(t[i + 1].code))
            }, t.prototype.showPrevTrackInfo = function() {
                var e = this.reduxProps.selectedTrack,
                    t = this.timetrialService.getTracks(),
                    i = _.findIndex(t, function(t) {
                        return t.code === e
                    });
                0 === i ? this.dispatch(d.showTrackInfo(_.last(t).code)) : this.dispatch(d.showTrackInfo(t[i - 1].code))
            }, t.prototype.openChangeVehiclePopup = function() {
                var e = this,
                    t = function() {
                        return e.dispatch(l.openChangeVehicle())
                    };
                this.publisherService.isNeedUpdateIgrVehicles() ? this.vehicleService.fetchIgrVehicles().finally(function() {
                    return t()
                }) : t()
            }, t.prototype.bindDataByTrackCode = function(e) {
                var t = this.staticdata.trackData.getTrack(e);
                this.selectedTrack = e, this.translateAll(".id-difficultyName", t.difficultyCode), this.translateAll(".id-trackName", t.nameCode), this.drawExternalImage(".id-trackImage", this.$filter("cdn_track")(e)), this.drawExternalImage(".id-LTrackImage", this.$filter("cdn_track_map_large")(e)), this.translate(".id-descriptionLabel", "TRACK_DESC_" + ("0" + e).slice(-2))
            }, t.prototype.renderPopup = function(e) {
                var t = this;
                e.showTrackInfo ? (this.face.visible = !0, this.gotoAndPlay(this.face, "in")) : (this.face.once("stop", function() {
                    return t.face.visible = !1
                }), this.gotoAndPlay(this.face, "out"))
            }, t.prototype.bindVehicleInfo = function() {
                this.gotoAndStop(".id-vehicleGrade", "grade" + this.selectedVehicle.grade), this.bindText(".id-vehicleClass", this.selectedVehicle.clazz), this.bindText(".id-manufacturerName", this.$filter("manufacturerName")(this.selectedVehicle.manufacturerCode)), this.bindText(".id-vehicleName", this.$filter("vehicleName")(this.selectedVehicle.code)), this.bindText(".id-ovr", this.selectedVehicle.ovr), this.apply(".id-pcCafeIcon", f.igr, !!this.selectedVehicle.igr)
            }, t.prototype.shouldUpdate = function(e) {
                return e.showTrackInfo
            }, t.prototype.update = function(e) {
                var t = this.reduxProps.showTrackInfo !== e.showTrackInfo;
                t && this.renderPopup(e), this.reduxProps.selectedTrack !== e.selectedTrack && !_.isUndefined(e.selectedTrack) && (this.bindDataByTrackCode(e.selectedTrack), this.missionBinder.setProps(e), this.myRankBinder.setProps(e), !t && this.gotoAndPlay(".id-mainContents", "in", !1)), this.selectedVehicle = e.selectedVehicle || s.getRecentVehicle(), this.bindVehicleInfo()
            }, t.prototype.goNextStep = function() {
                var e = this;
                return this.isNextStep() ? r.resolve() : this.resolveForNextStep().then(function(t) {
                    e.ghostSelectBinder.setProps({
                        ghostRecords: t,
                        selectedTrack: e.selectedTrack,
                        selectedVehicle: e.selectedVehicle
                    })
                })
            }, t.prototype.resolveForNextStep = function() {
                var e = this;
                return this.timetrialService.fetchGhostRecords(this.selectedTrack).then(function(t) {
                    return r.all((t.bestRecord ? [t.bestRecord.pid] : []).concat(t.recommendRecords.map(function(e) {
                        return e.pid
                    }), t.topRankRecords.map(function(e) {
                        return e.pid
                    })).map(function(t) {
                        return e.playerSnippetService.getSnippetAsync(t)
                    })).then(function() {
                        return t
                    })
                })
            }, t.prototype.isNextStep = function() {
                return "out" === this.getFace(".id-mainContents").currentLabel
            }, t.prototype.mapStateToProps = function(e) {
                return e.timetrial
            }, t
        }(o.StageBinder);
    n.__decorate([a.autowired("timetrialService")], v.prototype, "timetrialService", void 0), n.__decorate([a.autowired("stateService")], v.prototype, "stateService", void 0), n.__decorate([a.autowired("publisherService")], v.prototype, "publisherService", void 0), n.__decorate([a.autowired("vehicleService")], v.prototype, "vehicleService", void 0), n.__decorate([a.autowired("$filter")], v.prototype, "$filter", void 0), n.__decorate([a.autowired("staticdataLoaderService")], v.prototype, "staticdata", void 0), n.__decorate([a.autowired("playerSnippetService")], v.prototype, "playerSnippetService", void 0), t.TimetrialTrackInfoBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(16),
        a = i(4),
        s = i(330),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.disable()
            }, t.prototype.bindRecord = function(e) {
                e.pid === this.storeState.player.id ? this.gotoAndStop(this.face, "myList") : this.gotoAndStop(this.face, "normalList"), this.setProps(e)
            }, t.prototype.disable = function() {
                this.gotoAndStop(this.face, "none")
            }, t
        }(s.RecordItem),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.recordBinders = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".MyRecordTitle .id-textField", "TIMETRIAL_TRACKINFO_LAPTIME"), this.translate(".id-noneLabel", "TIMETRIAL_TRACKINFO_LAPTIME_NORECORD"), this.translate(".id-rankNum .id-textField", "TIMETRIAL_TRACKINFO_RANKPERCENTAGE"), _.times(7, function(t) {
                    e.recordBinders.push(e.addChildBinder(".id-listItemBar .id-list" + (t + 1), c))
                })
            }, t.prototype.extendRecord = function(e, t) {
                return e ? this.playerSnippetService.getSnippetAsync(e.pid).then(function(i) {
                    return n.__assign({}, e, {
                        name: i.name,
                        baseLaptime: t && t.bestLaptime
                    })
                }) : Promise.resolve(void 0)
            }, t.prototype.showPlayerRecords = function(e, t) {
                var i = this;
                Promise.all(e.map(function(e) {
                    return i.extendRecord(e, t)
                })).then(function(e) {
                    i.recordBinders.forEach(function(t, i) {
                        var n = e[i];
                        n ? t.bindRecord(n) : t.disable()
                    })
                })
            }, t.prototype.showtop7playerRecord = function(e, t) {
                this.showPlayerRecords(e.slice(0, 7), t)
            }, t.prototype.showTopAndAroundRecord = function(e, t, i) {
                var n = e.slice(0, 3);
                n.push(void 0), t = _.sortBy(t.concat([i]), function(e) {
                    return e.rank
                }), n = n.concat(t), this.showPlayerRecords(n, i)
            }, t.prototype.bindMyRecord = function(e, t) {
                if (e) {
                    this.gotoAndPlay(this.face, "in");
                    var i = this.props,
                        n = i.playerInfo,
                        r = i.selectedTrack;
                    this.bindText(".id-lapTimeNum", a.default.formatLapTime(e.bestLaptime));
                    var o = n.trackRecords[r].medalStep;
                    o < 1 ? this.gotoAndStop(".id-medalContainer", "blank") : e.rank <= 10 ? (this.gotoAndStop(".id-medalContainer", "width"), this.gotoAndStop(".id-medalContainer .id-medal", "flatinum" + o)) : (this.gotoAndStop(".id-medalContainer", "medal"), this.gotoAndStop(".id-medalContainer .id-medal", "medal" + o)), this.bindText(".id-rankNum .id-rankNum", (e.rank / t * 100).toFixed(2) + "%")
                } else this.gotoAndStop(this.face, 0), this.gotoAndStop(".id-medalContainer", "blank")
            }, t.prototype.update = function(e) {
                var t = this,
                    i = e.selectedTrack;
                this.timetrialService.requestTrackData(i).then(function(e) {
                    var i = e.topRankPlayersInfo,
                        n = e.aboveRankPlayersInfo,
                        r = e.playerInfo,
                        o = e.totalPlayerCount;
                    t.bindMyRecord(r, o), _.isUndefined(r) || r.rank <= 7 ? (t.gotoAndPlay(".id-listItemBar", "top7"), t.showtop7playerRecord(i, r)) : (t.gotoAndPlay(".id-listItemBar", "normal"), t.showTopAndAroundRecord(i, n, r))
                })
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("timetrialService")], d.prototype, "timetrialService", void 0), n.__decorate([o.autowired("playerSnippetService")], d.prototype, "playerSnippetService", void 0), t.TimetrialTrackMyRankBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                var t = e.code,
                    i = e.ovr,
                    n = e.grade,
                    r = this.service.getVehicleData(t),
                    o = r.manufacturerCode,
                    a = r.clazz,
                    s = this.$filter("vehicleName")(t),
                    c = this.$filter("manufacturerName")(o);
                this.bindText(".id-clazz", a), this.bindText(".id-vehicleName", s), this.bindText(".id-manufacturerName", c), this.bindText(".id-ovr", i), this.gotoAndStop(".id-grade", "grade" + n)
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("vehicleDataService")], o.prototype, "service", void 0), n.__decorate([r.autowired("$filter")], o.prototype, "$filter", void 0), t.TimetrialVehicle = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(138),
        a = i(1),
        s = i(2),
        c = i(4),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.getFace(".id-ghostSelectTitle > .id-textField").setCustomStyle({
                    "text-align": "center"
                }), this.translate(".id-ghostSelectTitle", "TIMETRIAL_SELECTGHOST_TITLE"), this.translate(".id-ghostSelectDes", "TIMETRIAL_SELECTGHOST_DESC"), this.translate(".id-mission .id-title", "TIMETRIAL_SELECTGHOST_MISSIONINFO"), this.translate(".id-myRecord.MyRecordTitle", "TIMETRIAL_SELECTGHOST_MYBESTLAPTIME"), this.translate(".ListItemRenderer .id-subTitle1", "TIMETRIAL_SELECTGHOST_TOP3"), this.translate(".ListItemRenderer .id-subTitle2", "TIMETRIAL_SELECTGHOST_RECOMMAND"), this.translate(".id-rankNum > .id-textField", "TIMETRIAL_SELECTGHOST_RANK"), this.topRankRecordList = this.face.$$(".id-listItem1, .id-listItem2, .id-listItem3"), this.recommendRecordList = this.face.$$(".id-listItem4, .id-listItem5, .id-listItem6"), this.myRecordItem = this.convertFace(".id-myListItem"), this.topRankRecordList.forEach(function(t, i) {
                    e.on(t, s.MouseEventEx.CLICK, function(n) {
                        var r = e.props.ghostRecords.topRankRecords[i];
                        e.onSelectGhost(t, r, "TOP")
                    })
                }), this.recommendRecordList.forEach(function(t, i) {
                    e.gotoAndStop(t.$(".id-capTextNormal"), "suggest"), e.gotoAndStop(t.$(".id-capTextSelected"), "suggest"), e.on(t, s.MouseEventEx.CLICK, function(n) {
                        var r = (_.isEmpty(e.props) ? e.storeState.timetrial : e.props).ghostRecords,
                            o = r.recommendRecords[i];
                        e.onSelectGhost(t, o, "RECOMMEND")
                    })
                }), this.on(this.myRecordItem, s.MouseEventEx.CLICK, function(t) {
                    var i = e.props.ghostRecords.bestRecord;
                    e.onSelectGhost(e.myRecordItem, i, "PLAYER")
                });
                var t = this.getFace(".id-previewButton");
                this.translate(t.$(".id-buttonName"), "TIMETRIAL_SELECTGHOST_BUTTON_GOTRACKINFO"), this.on(t, s.MouseEventEx.CLICK, function() {
                    return e.goPrevStep()
                }), this.onClickSafe(".id-startButton", function() {
                    return e.startGame()
                }), this.on(".id-closeButton", s.MouseEventEx.CLICK, function() {
                    return e.goPrevStep()
                }), this.clear()
            }, t.prototype.onAddedToScene = function() {
                this.clear()
            }, t.prototype.onSelectGhost = function(e, t, i) {
                void 0 === i && (i = "RECOMMEND");
                var r = e.selected;
                this.topRankRecordList.forEach(function(e) {
                    return e.selected = !1
                }), this.recommendRecordList.forEach(function(e) {
                    return e.selected = !1
                }), this.myRecordItem.selected = !1, e.selected = !r, e.selected ? this.dispatch(o.selectGhost(n.__assign({}, t, {
                    type: i
                }))) : this.dispatch(o.selectGhost())
            }, t.prototype.shouldUpdate = function(e) {
                return !!e.ghostRecords && !!e.selectedTrack
            }, t.prototype.update = function(e) {
                var t = this,
                    i = this.staticdata.trackData.getTrack(e.selectedTrack),
                    n = i.code;
                this.translate(".TrackTitle", i.nameCode), this.translate(".id-trackDescription", "TRACK_DESC_" + (n < 10 ? "0" + n : "" + n)), this.translate(this.myRecordItem.$(".id-playerName"), "TIMETRIAL_SELECTGHOST_MYGHOST"), this.setGhostRecordList(e.ghostRecords), this.setMyBestRecord(e.ghostRecords.bestRecord), this.initStep(), setTimeout(function() {
                    return t.selectDefaultGhost()
                })
            }, t.prototype.initStep = function() {
                this.gotoAndPlay(".ListItemRenderer", "in"), this.gotoAndStop(".SwipeButtonContainer", "preview"), this.translate(".id-startButton .id-buttonName", "TIMETRIAL_SELECTGHOST_BUTTON_START"), this.gotoAndPlay(".id-mainContents", "out")
            }, t.prototype.goPrevStep = function() {
                this.clear(), this.face.emit("back")
            }, t.prototype.startGame = function() {
                var e = this;
                return this.isCurrentStep() ? this.timetrialService.notifyStartToServer().then(function(t) {
                    var i = t.matchId;
                    return e.dispatch(o.updateMatchId(i)), e.stateService.go("root.TimetrialLoading")
                }) : r.resolve()
            }, t.prototype.selectDefaultGhost = function() {
                [this.myRecordItem].concat(this.recommendRecordList, this.topRankRecordList).some(function(e) {
                    return !!e.enabled && (e.emit(s.MouseEventEx.CLICK), !0)
                })
            }, t.prototype.isCurrentStep = function() {
                return "out" === this.getFace(".id-mainContents").currentLabel
            }, t.prototype.setMyBestRecord = function(e) {
                var t = this.getFace(".id-myRecord");
                if (e) {
                    var i = this.getFace(".id-lapTimeContainer");
                    this.bindText(i.$(".id-lapTimeNum"), c.default.formatLapTime(e.bestLaptime)), this.bindText(".id-rankNum > .id-rankNum", e.rank), this.gotoAndPlay(t, "in")
                } else this.translate(t.$(".id-noneLabel"), "TIMETRIAL_SELECTGHOST_MYGHOST_NORECORD"), this.gotoAndStop(t, 1)
            }, t.prototype.setGhostRecordList = function(e) {
                var t = this,
                    i = function(e, i) {
                        var n = t.playerSnippetService.getSnippet(i.pid).name;
                        t.bindText(e.$(".id-playerName"), n), t.translate(e.$(".id-lapTimelNum"), c.default.formatLapTime(i.bestLaptime))
                    };
                if (this.topRankRecordList.forEach(function(n, r) {
                        var o = e.topRankRecords[r];
                        n.enabled = !!o, t.bindText(n.$(".id-capTextNormal"), r + 1), t.bindText(n.$(".id-capTextSelected"), r + 1), o && i(n, o)
                    }), this.recommendRecordList.forEach(function(n, r) {
                        var o = e.recommendRecords[r];
                        if (n.enabled = !!o, o) {
                            i(n, o);
                            var a = t.timetrialService.calcMedalCount(t.props.selectedTrack, o.bestLaptime);
                            n.$$(".id-numLabel").forEach(function(e) {
                                return t.bindText(e, a)
                            })
                        }
                    }), e.bestRecord) {
                    var n = e.bestRecord;
                    this.bindText(this.myRecordItem.$(".id-lapTimelNum"), c.default.formatLapTime(n.bestLaptime)), this.myRecordItem.enabled = !0
                } else this.translate(this.myRecordItem.$(".id-noneLapTime"), "TIMETRIAL_SELECTGHOST_MYGHOST_NORECORD"), this.myRecordItem.enabled = !1
            }, t.prototype.clear = function() {
                [this.myRecordItem].concat(this.recommendRecordList, this.topRankRecordList).forEach(function(e) {
                    e.$(".id-playerName .id-textField").text = "", e.$(".id-lapTimelNum .id-textField").text = "", e.selected = !1, e.enabled = !1
                }), this.gotoAndStop(".SwipeButtonContainer", "vehicleChange"), this.translate(".id-startButton .id-buttonName", "TIMETRIAL_TRACKINFO_BUTTON_CONFIRM"), this.dispatch(o.selectGhost())
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("timetrialService")], d.prototype, "timetrialService", void 0), n.__decorate([a.autowired("staticdataLoaderService")], d.prototype, "staticdata", void 0), n.__decorate([a.autowired("playerSnippetService")], d.prototype, "playerSnippetService", void 0), n.__decorate([a.autowired("stateService")], d.prototype, "stateService", void 0), t.TimetrialGhostSelectBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(1606),
        a = i(1609),
        s = i(1610),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.trackRank = this.addChildBinder(".id-trackRankPopup", a.TrackRankPopup), this.seasonReward = this.addChildBinder(".id-seasonRewardPopup", o.SeasonRewardPopup), this.changeVehicle = this.addChildBinder(".id-changeVehiclePopup", s.ChangeVehiclePopup)
            }, t.prototype.update = function(e) {
                this.reduxProps.trackRank !== e.trackRank ? this.trackRank.setProps(e.trackRank) : this.reduxProps.seasonReward !== e.seasonReward ? this.seasonReward.setProps(e.seasonReward) : this.reduxProps.changeVehicle !== e.changeVehicle && this.changeVehicle.setProps(e.changeVehicle)
            }, t.prototype.mapStateToProps = function(e) {
                return e.view.timetrialPopup
            }, t
        }(r.StageBinder);
    t.TimetrialPopupBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(167),
        a = i(199),
        s = i(331),
        c = i(1),
        d = i(72),
        l = i(1607),
        u = i(1608),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.tabButtons = new d.ButtonGroup("medalTab"), t.selectTab = function(e) {
                    t.gotoAndPlay(".id-tabMenuContainer", e), t.bindRewards(e)
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-subTitle", "TIMETRIAL_SEASONREWARD_POPUP_MEDALSTATUS"), this.bindTab(), this.prepareRewards()
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this), this.bindSeason(), this.bindMedals()
            }, t.prototype.bindTab = function() {
                var e = this;
                this.hasSize(".id-tab", !0);
                var t = this.addChildBinder(".id-tab .id-tabButton", c.CollectionBinder, {
                        instanceBinder: l.RewardTabButton
                    }),
                    i = ["TIMETRIAL_SEASONREWARD_POPUP_TAB_01", "TIMETRIAL_SEASONREWARD_POPUP_TAB_02"].map(function(t, i) {
                        return {
                            text: t,
                            selectTab: e.selectTab,
                            key: i ? "platinum" : "normal",
                            buttonGroup: e.tabButtons
                        }
                    });
                t.applyCollection(i)
            }, t.prototype.prepareRewards = function() {
                this.platinumContainer = this.getFace(".id-platinumListContainer"), this.platinumContainer.hasSize = !0, o.initialize(this.platinumContainer.htmlElement, {
                    suppressScrollX: !0
                }), this.platinumList = this.addChildBinder(".id-platinumListContainer .id-listItem", c.CollectionBinder, {
                    instanceBinder: u.RewardListItem
                }), this.normalContainer = this.getFace(".id-normalListContainer"), this.normalContainer.hasSize = !0, o.initialize(this.normalContainer.htmlElement, {
                    suppressScrollX: !0
                }), this.normalList = this.addChildBinder(".id-normalListContainer .id-listItem", c.CollectionBinder, {
                    instanceBinder: u.RewardListItem
                })
            }, t.prototype.onDetach = function() {
                o.destroy(this.normalContainer.htmlElement), o.destroy(this.platinumContainer.htmlElement)
            }, t.prototype.bindRewards = function(e) {
                var t = this,
                    i = this.storeState.timetrial.seasonInfo.currSeason,
                    r = this.staticdata.timetrial.seasonRewardData[i.seasonRewardIndex][e],
                    o = "normal" === e ? this.normalList : this.platinumList,
                    a = "normal" === e ? this.platinumList : this.normalList;
                o.applyCollection(r.map(function(i, o) {
                    return n.__assign({}, i, {
                        key: e,
                        index: o,
                        record: "normal" === e ? t.record.normal : t.record.platinum,
                        next: _.get(r[o - 1], "medals")
                    })
                })), a.applyCollection([]), setTimeout(function() {
                    $(t.normalContainer.htmlElement).perfectScrollbar("update").scrollTop(0), $(t.platinumContainer.htmlElement).perfectScrollbar("update").scrollTop(0)
                }, 100)
            }, t.prototype.bindSeason = function() {
                var e = this.service.seasonLabelParam();
                this.template(".id-titleContainer .id-titleLabel", "TIMETRIAL_SEASONREWARD_POPUP_TITLE", e), this.template(".id-titleContainer .id-descriptionLabel", "TIMETRIAL_SEASONREWARD_POPUP_PERIOD", e), this.template(".id-titleContainer .id-seasonLabel", "TIMETRIAL_SEASONREWARD_POPUP_SEASONICON_TEXT", e)
            }, t.prototype.bindMedals = function() {
                var e = this.service.getMedalCount();
                this.bindText(".id-medalInfo .id-num", e);
                var t = this.storeState.timetrial.platinumTrackCodes;
                this.bindText(".id-platinumInfo .id-num", t.length), this.record = {
                    normal: e,
                    platinum: t.length
                }
            }, t.prototype.onClickClose = function() {
                this.dispatch(a.closeSeasonReward())
            }, t.prototype.updatePopup = function(e) {
                return this.tabButtons.setSelectedButtonByIndex(0), r.resolve()
            }, t
        }(s.TimetrialPopupBase);
    t.SeasonRewardPopup = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(8),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                var t = e.selectTab,
                    i = e.key,
                    n = e.text,
                    r = e.buttonGroup,
                    a = this.face;
                a.toggle = !0, r.addButton(a), this.on(this.face, o.EventEx.SELECT, function() {
                    a.selected && t(i)
                }), this.translateAll(".id-normalTabName, .id-selectedTabName", n), this.face.hasSize = !0, this.face.setCustomStyle({
                    position: "relative",
                    display: "inline-block",
                    "margin-right": "10px"
                })
            }, t
        }(r.Binder);
    t.RewardTabButton = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(13),
        a = i(27),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
                this.face.hasSize = !0, this.face.setCustomStyle({
                    display: "inline-block",
                    position: "relative"
                }), this.getFace(".id-itemImage").setCustomStyle({
                    left: "0px"
                });
                var t = this.fromInjector("tooltipService"),
                    i = function(e, i) {
                        t.show(e, "top", o.TooltipType.ItemCard, i, {
                            marginTop: -5
                        })
                    },
                    n = function() {
                        return t.hide()
                    },
                    r = e.type,
                    s = e.code,
                    c = e.count;
                this.addChildBinder(this.face, a.ItemCardBinder, {
                    info: {
                        type: r,
                        code: s,
                        count: c
                    },
                    cardSize: "small",
                    onMouseOver: i,
                    onMouseOut: n
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("tooltipService")], s.prototype, "tooltipService", void 0);
    var c = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            this.face.hasSize = !0, this.face.setCustomStyle({
                display: "inline-block",
                position: "relative"
            });
            var t = e.index;
            this.gotoAndStop(".id-background", t % 2 ? "even" : "odd");
            var i = this.getFace(".id-rewardItem");
            i.hasSize = !0, i.setCustomStyle({
                "text-align": "right"
            }), this.rewards = this.addChildBinder(".id-rewardItem .id-itemContainer", r.CollectionBinder, {
                instanceBinder: s
            })
        }, t.prototype.update = function(e) {
            var t = e.medals,
                i = e.key,
                n = e.rewards,
                r = i.toUpperCase();
            this.bindText(".id-thumbMedal .id-num", t), this.template(".id-title", "TIMETRIAL_SEASONREWARD_POPUP_" + r + "_CONDITION", {
                medalnumber: t
            }), this.template(".id-rewardName", "TIMETRIAL_SEASONREWARD_POPUP_" + r + "_REWARDS", this.rewardParam(e)), this.visible(".id-my", this.isCurrentReward(e)), this.rewards.applyCollection(n)
        }, t.prototype.isCurrentReward = function(e) {
            var t = e.record,
                i = e.medals,
                n = e.next;
            return t >= i && (void 0 === n || t < n)
        }, t.prototype.rewardParam = function(e) {
            var t = this.fromInjector("$filter")("translate"),
                i = e.rewards,
                n = {};
            return i.forEach(function(e, i) {
                n["item" + i] = t("ITEM_" + e.code + "_NAME"), n["amount" + i] = e.count
            }), n
        }, t
    }(r.Binder);
    t.RewardListItem = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(167),
        a = i(1),
        s = i(331),
        c = i(330),
        d = i(199),
        l = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(t) {
                e.prototype.update.call(this, t), this.gotoAndStop(".id-rankNum", t.rank <= 3 ? "top3" : "normal"), this.gotoAndStop(".id-background", t.index % 2 ? "even" : "odd")
            }, t
        }(c.DetailedRecordItem),
        u = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.translate(".id-title .id-textField", "TIMETRIAL_RANKPOPUP_COLUMN_MYRECORD")
            }, t.prototype.bindRecord = function(e) {
                this.gotoAndPlay(this.face, "default", !0), this.setProps(e)
            }, t.prototype.disableRecord = function() {
                this.gotoAndPlay(this.face, "disable", !0)
            }, t
        }(c.DetailedRecordItem),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.listContainer = this.getFace(".id-listContainer"), this.listContainer.hasSize = !0, o.initialize(this.listContainer.htmlElement, {
                    suppressScrollX: !0
                }), this.topRecords = this.addChildBinder(".id-listContainer .id-rankItem", a.CollectionBinder, {
                    instanceBinder: l
                }), this.myRecord = this.addChildBinder(".id-myRank", u), this.translate(".id-rankInfoLabel", "TIMETRIAL_RANKPOPUP_DESC"), this.translate(".id-rankLabel", "TIMETRIAL_RANKPOPUP_COLUMN_RANK"), this.translate(".id-levelLabel", "TIMETRIAL_RANKPOPUP_COLUMN_LEVEL"), this.translate(".id-nameLabel", "TIMETRIAL_RANKPOPUP_COLUMN_PLAYERNAME"), this.translate(".id-lapTimeLabel", "TIMETRIAL_RANKPOPUP_COLUMN_LAPTIME"), this.translate(".id-deltaLabel", "TIMETRIAL_RANKPOPUP_COLUMN_LAPTIMEDIFF"), this.translate(".id-vehicleLabel", "TIMETRIAL_RANKPOPUP_COLUMN_VEHICLE"), this.translate(".id-gradeLabel", "TIMETRIAL_RANKPOPUP_COLUMN_GRADE"), this.translate(".id-ovrLabel", "TIMETRIAL_RANKPOPUP_COLUMN_OVR"), this.translate(".id-dateLabel", "TIMETRIAL_RANKPOPUP_COLUMN_DATE")
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this), this.bindRemainDays()
            }, t.prototype.bindRemainDays = function() {
                this.hasSize(".id-resetInfoContainer", !0);
                var e = this.getFace(".id-resetInfoContainer .DateIcon");
                e.x = -5, e.y = -1, this.hasSize(e, !0), this.template(".id-resetInfoContainer .id-description", "TIMETRIAL_RANKPOPUP_REMAINDATE", {
                    day: this.service.seasonRemainDays()
                })
            }, t.prototype.onDetach = function() {
                e.prototype.onDetach.call(this), o.destroy(this.listContainer.htmlElement)
            }, t.prototype.onClickClose = function() {
                this.dispatch(d.closeTrackRank())
            }, t.prototype.extendRecord = function(e) {
                var t = e.pid;
                return this.snippetService.getSnippetAsync(t).then(function(t) {
                    return n.__assign({}, e, {
                        name: t.name,
                        level: t.level
                    })
                })
            }, t.prototype.bindTrack = function(e) {
                var t = this.staticdata.trackData.getTrack(e);
                this.translate(".id-trackName", t.nameCode), this.drawExternalImage(".id-trackImage", this.$filter("cdn_track")(t.code))
            }, t.prototype.updatePopup = function(e) {
                var t = this,
                    i = e.trackCode,
                    o = e.trackRecords;
                this.bindTrack(i);
                var a = o.topRecords,
                    s = o.myRecord;
                return r.props({
                    topRecords: r.all(a.map(function(e) {
                        return t.extendRecord(e)
                    })),
                    myRecord: s && this.extendRecord(s)
                }).then(function(e) {
                    var i = e.myRecord,
                        r = e.topRecords;
                    i ? (t.myRecord.bindRecord(i), r = r.map(function(e) {
                        return n.__assign({}, e, {
                            baseLaptime: i.bestLaptime
                        })
                    })) : t.myRecord.disableRecord(), t.topRecords.applyCollection(r.map(function(e, t) {
                        return n.__assign({}, e, {
                            index: t
                        })
                    })), setTimeout(function() {
                        $(t.listContainer.htmlElement).perfectScrollbar("update").scrollTop(0)
                    }, 100)
                })
            }, t
        }(s.TimetrialPopupBase);
    n.__decorate([a.autowired("$filter")], p.prototype, "$filter", void 0), n.__decorate([a.autowired("playerSnippetService")], p.prototype, "snippetService", void 0), t.TrackRankPopup = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(331),
        o = i(1611),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.changeVehicle = this.addChildBinder(this.face, o.ChangeVehicleBinder)
            }, t.prototype.onClickClose = function() {}, t.prototype.updatePopup = function(e) {
                var t = this,
                    i = this.storeState,
                    r = i.vehicle,
                    o = i.timetrial;
                return this.service.initExclusiveVehicles().then(function() {
                    t.changeVehicle.setProps(n.__assign({}, r, {
                        initialSelected: o.selectedVehicle
                    }))
                })
            }, t
        }(r.TimetrialPopupBase);
    t.ChangeVehiclePopup = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(165),
        a = i(1),
        s = i(2),
        c = i(75),
        d = i(124),
        l = i(12),
        u = i(58),
        p = i(138),
        h = i(199),
        f = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.filterState = c.defaultSortKeys, t.onChangeVehicle = function() {
                    if (t.initialSelected === t.selected) return void t.onClosePopup();
                    var e = t.selected;
                    (e.isExclusive ? r.resolve() : t.playerService.changeRecentVehicle(e.id)).then(function() {
                        return t.dispatch(p.selectVehicle(e))
                    }).catch(function(e) {
                        e.code === u.toCode(u.ErrorCode.IgrVehicleDateExpiredWhenGetIgrVehicle) && t.popupService.drawConfirm("PCVEHICLE_UPDATE_COMMONPOPUP_TITLE", "PCVEHICLE_UPDATE_COMMONPOPUP_DESC", function() {
                            t.vehicleService.fetchIgrVehicles()
                        })
                    }).finally(function() {
                        return t.onClosePopup()
                    })
                }, t.onClosePopup = function() {
                    t.preventClick(), t.dispatch(h.closeChangeVehicle()), t.selected = void 0, t.playerService.markVehiclesAsChecked()
                }, t.onOwnCheckboxChange = function() {
                    t.ownCheckbox.selected = !t.ownCheckbox.selected;
                    var e = t.getVehicles();
                    t.bindText(".id-retentionTextfield", "" + e.length);
                    var i = t.ownCheckbox.selected ? c.defaultSortKeys : t.filterState;
                    t.filterBinder.setProps(n.__assign({}, t.props, {
                        filterState: i,
                        usableVehicles: e
                    })), t.vehicleListBinder.setProps(n.__assign({}, t.props, {
                        vehicles: t.applyFilter(i, e)
                    }))
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-title", "TIMETRIAL_VEHICLESELECT_TITLE"), this.translate(".id-description", "TIMETRIAL_VEHICLESELECT_DESC"), this.translate(".id-changeButton", "WORLD_STAGEDETAIL_CHANGE"), this.translate(".id-exitButton", "COMMON_POPUP_EXIT_BUTTON_CANCEL"), this.on(".id-changeButton", s.MouseEventEx.CLICK, this.onChangeVehicle), this.on(".id-exitButton", s.MouseEventEx.CLICK, this.onClosePopup), this.translate(".id-checkBox .id-checkboxName", "TIMETRIAL_VEHICLESELECT_CHECKBOX"), this.ownCheckbox = this.convertFace(".id-checkBox"), this.ownCheckbox.on(s.MouseEventEx.CLICK, this.onOwnCheckboxChange), this.filterBinder = this.addChildBinder(this.face, d.VehicleListFilterBinder), this.filterBinder.setManufacturerDropUp(!1), this.filterBinder.setClassDropUp(!1), this.filterBinder.setSorterDropUp(!1), this.on(this.filterBinder.face, "filterSortChange", function(t) {
                    var i = e.applyFilter(t);
                    e.vehicleListBinder.setProps(n.__assign({}, e.props, {
                        vehicles: i
                    }))
                }), this.on(this.filterBinder.face, "selected", function(t) {
                    e.selected = t
                }), this.on(this.face, "stop", function() {
                    var t = "in" !== e.face.currentLabel;
                    e.classNames(".VehicleTileListContainer", t ? "prevent-click" : "")
                })
            }, t.prototype.onAddedToScene = function() {
                this.vehicleListBinder = this.addChildBinder(this.face, o.VehicleListBinder, {
                    itemCountPerPage: 15,
                    rowSize: 5,
                    title: "TIMETRIAL_VEHICLESELECT_TITLE",
                    retention: "TIMETRIAL_VEHICLESELECT_TOTALVEHICLECOUNT"
                })
            }, t.prototype.getVehicles = function() {
                var e = l.getOwnIgrVehicles();
                return this.ownCheckbox.selected || (e = e.concat(this.service.exclusiveVehicles())), e
            }, t.prototype.applyFilter = function(e, t) {
                this.filterState = e;
                var i = t || this.getVehicles();
                if (e) {
                    var n = e.manufacturerCode,
                        r = e.clazz,
                        o = e.sortKey;
                    n && (i = _.filter(i, {
                        manufacturerCode: n
                    })), r && "ALL" !== r && (i = _.filter(i, (a = {}, a.clazz = r, a))), this.$util.applySorter(i, o || ["default"])
                }
                return i;
                var a
            }, t.prototype.update = function(e) {
                this.initialSelected = this.selected = e.initialSelected;
                var t = this.getVehicles();
                this.bindText(".id-retentionTextfield", "" + t.length), this.vehicleListBinder.setProps(n.__assign({}, e, {
                    vehicles: this.applyFilter(c.defaultSortKeys, t)
                })), this.filterBinder.setProps(n.__assign({}, e, {
                    filterState: c.defaultSortKeys,
                    usableVehicles: t
                }))
            }, t.prototype.preventClick = function() {
                var e = this;
                $(this.face.htmlElement).addClass("prevent-click"), this.face.on("stop", function() {
                    $(e.face.htmlElement).removeClass("prevent-click")
                })
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("$util")], f.prototype, "$util", void 0), n.__decorate([a.autowired("timetrialService")], f.prototype, "service", void 0), n.__decorate([a.autowired("playerService")], f.prototype, "playerService", void 0), n.__decorate([a.autowired("popupService")], f.prototype, "popupService", void 0), n.__decorate([a.autowired("vehicleService")], f.prototype, "vehicleService", void 0), t.ChangeVehicleBinder = f
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1613);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/timetrial/loading?{mode}", 81).container({
            controller: "TimetrialLoading",
            stages: {
                "singleplay-timetrial-loading-screen": r.TimetrialLoadingBinder
            }
        });
        e.state("root.TimetrialLoading", t)
    }]).controller("TimetrialLoadingController", ["externalService", "timetrialService", function(e, t) {
        e.isEdgeBrowser() || setTimeout(function() {
            return t.cheatStartGame()
        }, 5e3)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(16),
        a = i(46),
        s = i(17),
        c = i(3),
        d = i(1614),
        l = i(103),
        u = i(1615),
        p = i(1616),
        h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.setHandlers(), this.translate(".UserList .id-titleTextField", "WORLD_LOADINGSCREEN_VEHICLEINFO"), this.loadingTipBinder = this.addChildBinder(".id-gameTip", d.TimetrialLoadingTipBinder), this.addChildBinder(".id-sevenLineChat", l.SimpleChatWindowBinder, {
                    entrance: l.SimpleChatEntrance.Loading
                }), this.progressBinder = this.addChildBinder(".id-playerContainer .id-progressBar", a.ProgressBinder, {
                    duration: 3,
                    outDuration: .5
                }), this.addChildBinder(this.face, u.TimetrialLoadingVehicleBinder), this.addChildBinder(this.face, p.TimetrialLoadingRecordBinder), this.translateAll(".id-title", "TIMETRIAL_LOADING_TITLE"), this.translate(".id-description", "TIMETRIAL_LOADING_DESC"), this.translate(".id-laptimeTitle", "TIMETRIAL_LOADING_MYRECORD"), this.translate(".id-trackInfoTitle", "TIMETRIAL_LOADING_TRACKINFO"), this.translate(".id-vehicleInfoTitle", "TIMETRIAL_LOADING_VEHICLEINFO")
            }, t.prototype.setHandlers = function() {
                var e = this;
                this.addManagedListener(this.externalService, r.default.beAllPlayerLoaded, function() {
                    var t = e.$stateParams.mode;
                    e.externalService.beSetClientGameModeParameters({
                        wrongWaySignalMinTime: e.staticdata.staticValues.wrongwaysignal_mintime.value || 0
                    }), e.stateService.go("root.timetrialHud", {
                        mode: t
                    })
                }), this.addManagedListener(this.externalService, r.default.bePushLoadingProgress, function(t) {
                    e.progressBinder.value = t
                })
            }, t.prototype.startGame = function(e) {
                void 0 === e && (e = !1);
                var t = c.store.getState().timetrial,
                    i = t.selectedTrack,
                    n = t.selectedVehicle,
                    r = t.selectedGhost,
                    o = t.matchParam.matchId;
                this.timetrialService.startTimetrial({
                    matchId: o,
                    trackCode: i,
                    selectedVehicle: n,
                    ghostRecord: r,
                    isQuickRetry: e
                })
            }, t.prototype.loadNormal = function() {
                this.bgmService.setRaceLoadingListener(), this.startGame()
            }, t.prototype.loadRetry = function() {
                this.startGame()
            }, t.prototype.loadQuickRetry = function() {
                var e = this;
                setTimeout(function() {
                    return e.startGame(!0)
                }, 1e3)
            }, t.prototype.onAddedToScene = function() {
                this.gotoAndPlay(this.face, "in");
                var e = this.$stateParams.mode;
                "retry" === e ? this.loadRetry() : "quickRetry" === e ? this.loadQuickRetry() : this.loadNormal();
                var t = this.featureSetService.isEnabled("PARTNERSHIPMARKETING");
                this.visible(".MarketingArea", t), t && this.drawExternalImage(".MarketingArea", this.$filter("cdn_marketing")("marketing-type-01")), this.bindPlayerInfo(), this.bindTrackInfo(), this.loadingTipBinder.setProps(c.store.getState().timetrial)
            }, t.prototype.bindPlayerInfo = function() {
                var e = c.store.getState().player,
                    t = this.playerSnippetService.getSnippet(e.id);
                this.bindText(".id-playerContainer .id-level", "Lv." + t.level);
                var i = this.getFace(".id-playerContainer .id-name");
                i.hasSize = !0, this.visible(i.$(".id-medalMC"), !1);
                var n = i.$(".id-clanEmblem");
                t.clanEmblemId && this.clanService.enableClan ? (this.drawExternalImage(n, this.$filter("cdn_clan_emblem")(t.clanEmblemId)), n.htmlElement.style.width = n.width * n.scaleX + "px", n.htmlElement.style.height = n.height * n.scaleY + "px") : n.visible = !1, this.bindText(i.$(".id-textField"), t.name)
            }, t.prototype.bindTrackInfo = function() {
                var e = c.store.getState().timetrial.selectedTrack,
                    t = this.staticdata.trackData.getTrack(e);
                this.translate(".id-trackDescription .id-title", t.nameCode), this.translate(".id-trackDescription .id-trackDescription", "TRACK_DESC_" + ("0" + e).slice(-2)), this.drawExternalImage(".id-trackImage", this.$filter("cdn_track")(e)), this.drawExternalImage(".id-LTrackImage", this.$filter("cdn_track_map_large")(e))
            }, t
        }(s.StageBinder);
    n.__decorate([o.autowired("$filter")], h.prototype, "$filter", void 0), n.__decorate([o.autowired("$stateParams")], h.prototype, "$stateParams", void 0), n.__decorate([o.autowired("stateService")], h.prototype, "stateService", void 0), n.__decorate([o.autowired("externalService")], h.prototype, "externalService", void 0), n.__decorate([o.autowired("bgmService")], h.prototype, "bgmService", void 0), n.__decorate([o.autowired("featureSetService")], h.prototype, "featureSetService", void 0), n.__decorate([o.autowired("timetrialService")], h.prototype, "timetrialService", void 0), n.__decorate([o.autowired("staticdataLoaderService")], h.prototype, "staticdata", void 0), n.__decorate([o.autowired("playerSnippetService")], h.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("clanService")], h.prototype, "clanService", void 0), t.TimetrialLoadingBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(7),
        o = i(30),
        a = i(16),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.loadingTipService.getTipsByMode("SPEED");
                if (t && t.length > 0) {
                    var i = _.random(t.length - 1),
                        n = function() {
                            var n = i % 2 + 1,
                                r = ".id-tipContainer" + (n % 2 + 1),
                                o = t[i % t.length];
                            e.translate(r + " .id-tipTitle", o.title), e.translate(r + " .id-descriptionText", o.desc), e.drawExternalImage(r + " .id-externalImage", e.$filter("cdn_loadingTip")(o.id)), e.gotoAndPlay(e.face, "swap" + n), ++i
                        };
                    n(), this.tipInterval = setInterval(n, 3e3)
                } else r.warn("Some loading tip data of timetrial should be included in the 'LoadingTipDB'")
            }, t.prototype.onDetach = function() {
                this.tipInterval && (clearInterval(this.tipInterval), this.tipInterval = null)
            }, t
        }(o.Binder);
    n.__decorate([a.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([a.autowired("loadingTipService")], s.prototype, "loadingTipService", void 0), n.__decorate([a.autowired("gameModeService")], s.prototype, "gameModeService", void 0), t.TimetrialLoadingTipBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(30),
        o = i(3),
        a = i(16),
        s = i(42),
        c = i(94),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = o.store.getState().timetrial.selectedVehicle,
                    t = this.getFace(".id-playerContainer .id-vehicleNameBar");
                t.hasSize = !0, this.hasSize(t.$(".id-numberPlate"), !0), this.drawExternalImage(".id-playerContainer .id-externalImage", this.$filter("cdn_beautyshot")(e.code)), this.visibleAll(t.$(".id-numberPlate"), this.numberPlateService.enableNumberPlate);
                var i = o.store.getState().numberPlate,
                    n = i.myNumberPlateInfo,
                    r = i.defaultNumberPlate;
                if (n && n.selected && n.selected[0]) {
                    var a = n.selected[0];
                    this.addChildBinder(t.$(".id-numberPlate"), s.NumberPlateCard).setProps({
                        personalNumber: n.prefix,
                        uniqueNumber: a.plateNumber,
                        templateCode: a.templateCode
                    })
                } else this.addChildBinder(t.$(".id-numberPlate"), s.NumberPlateCard).setProps({
                    personalNumber: r.prefix,
                    uniqueNumber: r.plateNumber,
                    templateCode: r.templateCode
                });
                this.gotoAndStop(".id-vehicleGrade", "grade" + e.grade), this.bindText(".id-vehicleClass", e.clazz), this.bindText(".id-vehicleName", this.$filter("vehicleName")(e.code)), this.bindText(".id-ovr", e.ovr), this.apply(".id-pcCafeIcon", c.igr, !!e.igr)
            }, t
        }(r.Binder);
    n.__decorate([a.autowired("numberPlateService")], d.prototype, "numberPlateService", void 0), n.__decorate([a.autowired("$filter")], d.prototype, "$filter", void 0), t.TimetrialLoadingVehicleBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(16),
        a = i(3),
        s = i(330),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.disable()
            }, t.prototype.bindRecord = function(e) {
                e.pid === this.storeState.player.id ? (this.face.visible = !0, this.gotoAndStop(this.face, "my")) : (this.face.visible = !0, this.gotoAndStop(this.face, "normal")), this.setProps(e)
            }, t.prototype.disable = function() {
                this.face.visible = !1
            }, t
        }(s.RecordItem),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = a.store.getState().timetrial.selectedTrack;
                this.timetrialService.requestTrackData(t).then(function(t) {
                    var i = t.topRankPlayersInfo,
                        n = t.aboveRankPlayersInfo,
                        r = t.playerInfo;
                    e.bindRecords(i, n, r)
                })
            }, t.prototype.onAddedToScene = function() {}, t.prototype.bindRecords = function(e, t, i) {
                var n = this;
                if (i) {
                    var r = [];
                    _.times(3, function(e) {
                        r.push(n.addChildBinder(".id-laptime .id-laptime" + (e + 1), c))
                    });
                    var o = 1 === i.rank ? e.slice(0, 3) : _.sortBy(t.concat([i]), function(e) {
                        return e.rank
                    });
                    o.length > 0 && this.gotoAndPlay(".id-laptime", "in"), this.setRecordBinders(o, r, i)
                }
            }, t.prototype.setRecordBinders = function(e, t, i) {
                var n = this;
                Promise.all(e.map(function(e) {
                    return n.extendRecord(e, i)
                })).then(function(e) {
                    t.forEach(function(t, i) {
                        var n = e[i];
                        n ? t.bindRecord(n) : t.disable()
                    })
                })
            }, t.prototype.extendRecord = function(e, t) {
                return e ? this.playerSnippetService.getSnippetAsync(e.pid).then(function(i) {
                    return n.__assign({}, e, {
                        name: i.name,
                        baseLaptime: t.bestLaptime
                    })
                }) : Promise.resolve(void 0)
            }, t
        }(r.Binder);
    n.__decorate([o.autowired("playerSnippetService")], d.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("timetrialService")], d.prototype, "timetrialService", void 0), t.TimetrialLoadingRecordBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(70),
        r = i(76),
        o = i(122),
        a = i(189),
        s = i(11),
        c = i(97),
        d = i(77),
        l = i(1618),
        u = i(1619),
        p = i(78),
        h = i(121),
        f = i(79),
        v = i(123),
        m = i(98),
        g = i(71),
        y = i(102),
        S = i(100),
        _ = i(101),
        E = i(119),
        T = i(1621),
        C = i(1622);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new s.StateDefinition("/timetrial/hud?{mode}", 82).container({
            controller: "TimetrialHUD",
            stages: {
                "hud-mini-map": {
                    stageBinder: p.HudMiniMapBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-critical-effect": c.HudCriticalEffectBinder,
                "hud-dashboard": g.HudDashboardBinder,
                "hud-message-bar": m.HudMessageBarBinder,
                "hud-gamemode-guide": C.HudGameModeGuideBinder,
                "hud-ranking": h.HudRankingBinder,
                "hud-time-rank": u.HudTimeRecordBinder,
                "hud-start-counting": f.HudStartCountingBinder,
                "hud-start-effect": d.HudStartEffectBinder,
                "hud-finish-effect": l.HudFinishEffectBinder,
                "hud-speed-turbo-slot": {
                    stageBinder: o.HudSpeedTurboSlotBinder,
                    customComponents: {
                        PieMask: r.default
                    }
                },
                "hud-speed-turbo-gauge": v.HudSpeedTurboGaugeBinder,
                "hud-action-feedback": S.HudActionFeedbackBinder,
                "hud-drift-booster-indicator": _.HudDriftBoosterIndicatorBinder,
                "hud-wrong-way-signal": E.HudWrongWaySignalBinder,
                "hud-room-mirror": {
                    stageBinder: y.HudRoomMirrorBinder,
                    customComponents: {
                        TextureProxy: n.default
                    }
                },
                "hud-esc-menu": T.TimetrialEscMenuBinder
            }
        });
        e.state("root.timetrialHud", t)
    }]).controller("TimetrialHUDController", ["$scope", "hudService", "timetrialService", function(e, t, i) {
        t.bind(e, a.HudType.Timetrial), i.setFinishHandler()
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(4),
        s = i(37),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.container = this.convertFace("FINISH"), this.deferredFinished = a.default.defer(), this.deferredFinished.promise.catch(function(e) {
                    return log.debug(e)
                }), this.visible(this.face, !1), this.translate(".FINISH_TEXT", "TIMETRIAL_RACE_FINISH_RACEFINISH"), this.translateAll(".id-updateText", "TIMETRIAL_RACE_FINISH_RECORD")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.timetrialService.once("finish", function(t) {
                    e.audioService.get(s.FxAudioCode.EndFinish).play(), setTimeout(function() {
                        e.audioService.get(s.FxAudioCode.EndTimeshow).play()
                    }, 1e3 / 30 * 40), e.deferredFinished.resolve(t)
                })
            }, t.prototype.finishHandler = function(e, t) {
                var i = this;
                void 0 === e && (e = 0), this.visible(this.face, !0), t.gainMedalStep > 0 ? (t.gainPlatinum && this.once(this.container, "branch", function(e) {
                    i.translate(".id-moreTextMC .id-earnMedalText", "TIMETRIAL_RACE_FINISH_PLATINUMMEDAL"), i.gotoAndStop(".id-moreTextMC .id-medal", "platinum"), i.gotoAndPlay(i.container, "GHOST_MORE")
                }), this.translate(".id-medalTextMC .id-earnMedalText", "TIMETRIAL_RACE_FINISH_NORMALMEDAL_0" + t.gainMedalStep), this.gotoAndStop("id-medalTextMC .id-medal", "medal"), this.gotoAndPlay(this.container, "GHOST_MEDAL")) : t.gainPlatinum ? (this.translate(".id-medalTextMC .id-earnMedalText", "TIMETRIAL_RACE_FINISH_PLATINUMMEDAL"), this.gotoAndStop(".id-medalTextMC .id-medal", "platinum"), this.gotoAndPlay(this.container, "GHOST_MEDAL")) : t.isBreakRecord ? this.gotoAndPlay(this.container, "GHOST_UPDATE") : this.gotoAndPlay(this.container, "GHOST_NORMAL"), this.once(this.container, "stop", function() {
                    i.stateService.go("root.timetrialResult")
                }), this.bindTextAll(".id-LAPTIME", a.default.formatLapTime(e)), this.bindTextAll(".id-suffixLabel", this.$filter("ordinalSuffix")(1))
            }, t.prototype.shouldUpdate = function(e) {
                return !!e && !_.isEmpty(e)
            }, t.prototype.update = function(e) {
                var t = this;
                this.deferredFinished.promise.then(function(i) {
                    t.finishHandler(i, e)
                })
            }, t.prototype.mapStateToProps = function(e) {
                return e.timetrial.matchResult || {}
            }, t.prototype.onDetach = function() {
                this.deferredFinished && this.deferredFinished.reject(new Error)
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("stateService")], c.prototype, "stateService", void 0), n.__decorate([r.autowired("timetrialService")], c.prototype, "timetrialService", void 0), n.__decorate([r.autowired("recordService")], c.prototype, "recordService", void 0), n.__decorate([r.autowired("audioService")], c.prototype, "audioService", void 0), t.HudFinishEffectBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(1),
        a = i(606),
        s = i(308),
        c = i(1620),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.container = this.stage.$(".CONTAINER_GHOST"), this.translate(this.container.$(".id-bestLapTimeContainer .id-bestRecordName"), "ID_HUD_RECORD_MY_TOP_TRACK_RECORD")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay(e.container, "intro")
                }), this.addChildBinder(this.container, c.HudDistanceMapBinder), this.addChildBinder(this.container, a.HudRecordBinder), this.addChildBinder(this.container.$(".id-passNoticeContainer"), s.HudLapPassNoticeBinder), this.visible(".CONTAINER", !1), this.visible(".CONTAINER_DRIFT", !1), this.visible(".CONTAINER_foxhunting", !1), this.setGhostRecord(), this.setMyBestRecord()
            }, t.prototype.setGhostRecord = function() {
                var e = this.storeState.timetrial,
                    t = e.selectedTrack,
                    i = e.selectedGhost;
                if (!i) return this.gotoAndStop(".id-ghostLapTimeContainer", "disabled"), void this.translate(".id-ghostLapTimeContainer .id-noneGhost", "TIMETRIAL_HUD_GHOST_UNSELECTED");
                var n = i.bestLaptime,
                    o = i.pid,
                    a = i.type,
                    s = i.rank;
                this.gotoAndStop(".id-ghostLapTimeContainer", "normal");
                var c = r.default.formatLapTime(n),
                    d = this.playerSnippetService.getSnippet(o).name;
                this.bindText(".id-ghostLapTimeContainer .id-lapTimeLabel", c), this.bindText(".id-ghostLapTimeContainer .id-currentRecordName", d);
                var l = {
                    TOP: "top",
                    RECOMMEND: "suggest",
                    PLAYER: "my"
                };
                if (this.gotoAndStop(".id-ghostLapTimeContainer .id-icon", l[a]), "TOP" === a) this.bindText(".id-ghostLapTimeContainer .id-icon .id-rankNum", s);
                else if ("RECOMMEND" === a) {
                    var u = this.timetrialService.calcMedalCount(t, n);
                    this.bindText(".id-ghostLapTimeContainer .id-icon .id-medalNum", u)
                }
            }, t.prototype.setMyBestRecord = function() {
                var e = this.storeState.timetrial,
                    t = e.selectedTrack,
                    i = e.playerInfo,
                    n = (i.trackRecords || {})[t],
                    o = r.default.formatLapTime(n ? n.bestLaptime : 0);
                this.bindText(this.container.$(".id-bestLapTimeContainer .id-lapTimeLabel"), o)
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([o.autowired("hudService")], d.prototype, "hudService", void 0), n.__decorate([o.autowired("playerSnippetService")], d.prototype, "playerSnippetService", void 0), n.__decorate([o.autowired("timetrialService")], d.prototype, "timetrialService", void 0), t.HudTimeRecordBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(17),
        a = i(9),
        s = i(144),
        c = i(3),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.getFace(".id-distanceMap");
                this.pid = c.store.getState().player.id;
                var i = _.range(8).map(function(e) {
                    var i = t.$("marker" + e);
                    return i.visible = !1, i
                });
                this.addManagedListener(this.externalService, a.default.beHUDSetDistanceRatio, function(t) {
                    if (Array.isArray(t)) {
                        e.markerMap || e.buildMarkerMap(i, t);
                        for (var n = 0, r = t; n < r.length; n++) {
                            var o = r[n],
                                a = e.markerMap[o.id];
                            a && (a.x = s.NumberUtil.fix(309 * o.ratio), o.id === e.pid && (e.recordService.setRecord("mileage", o.mileage), e.recordService.setRecord("completionrate", o.ratio)))
                        }
                    }
                })
            }, t.prototype.buildMarkerMap = function(e, t) {
                var i = this;
                this.markerMap = {};
                var n;
                if (t.forEach(function(t, r) {
                        var o = e[r];
                        o && (i.recordService.distanceList[t.id] = t.ratio, o.visible = !0, i.markerMap[t.id] = o, t.id === i.pid ? (o.gotoAndStop("player"), n = o) : o.gotoAndStop("other"))
                    }), n) {
                    var r = n.parent;
                    r.removeChild(n), r.addChild(n)
                }
            }, t
        }(o.StageBinder);
    n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("recordService")], d.prototype, "recordService", void 0), t.HudDistanceMapBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(95),
        a = i(29),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), Object.defineProperty(t.prototype, "isSinglePlay", {
                get: function() {
                    return !0
                },
                enumerable: !0,
                configurable: !0
            }), t.prototype.onFaceReady = function() {
                e.prototype.onFaceReady.call(this), this.retryListener = {
                    onEvent: this.onPressR.bind(this)
                }, this.globalKeyService.pushListener(a.KeyboardMap.getKeyCode("R"), this.retryListener)
            }, t.prototype.onDetach = function() {
                e.prototype.onDetach.call(this), this.globalKeyService.popListener(a.KeyboardMap.getKeyCode("R"), this.retryListener)
            }, t.prototype.onPressR = function() {
                return !!this.popupService.isShowPopup() || (this.opened && this.restartRace(), !1)
            }, t.prototype.bindTipAndButtons = function() {
                var e = this;
                this.bindButton(".id-buttons .id-leaveButton", "TIMETRIAL_ESCMENU_BUTTON_RESTART", function() {
                    return e.restartRace()
                }), this.bindButton(".id-buttons .id-restartButton", "TIMETRIAL_ESCMENU_BUTTON_GOMAIN", function() {
                    return e.leaveRace()
                }), this.bindButton(".id-buttons .id-returnButton", "TIMETRIAL_ESCMENU_BUTTON_RESUME", function() {
                    return e.returnToRace()
                }), this.translate(".id-tip", "TIMETRIAL_ESCMENU_BOTTOM_DESC")
            }, t.prototype.leaveRace = function() {
                var e = this;
                this.drawPopup("INGAME_ESCMENU_RETIRETITLE", "TIMETRIAL_ESCMENU_RESTARTCONFIRM", function() {
                    e.enabled && e.timetrialService.quickExit()
                })
            }, t.prototype.restartRace = function() {
                this.enabled && this.timetrialService.quickRetry()
            }, t
        }(o.HudEscMenuBinder);
    n.__decorate([r.autowired("timetrialService")], s.prototype, "timetrialService", void 0), t.TimetrialEscMenuBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(3),
        a = i(9),
        s = i(28),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.trackData = this.staticdata.trackData;
                var e = o.store.getState().timetrial;
                this.bindTimetrialInfo(e), this.apply(this.stage, s.classNames, "leftsideReviseCoordinateOfScreenRatio")
            }, t.prototype.bindTimetrialInfo = function(e) {
                var t = e.selectedTrack,
                    i = this.trackData.getTrack(t);
                this.translate(".id-trackLabel", i.nameCode), this.translate(".id-gameModeLabel", "GAMEMODEGUIDE_START_TIMETRIAL"), this.translate(".id-gameModeTipLabel", "GAMEMODEGUIDE_START_TIMETRIAL_GOAL")
            }, t.prototype.onAddedToScene = function() {
                var e = this;
                if (!this.isRetry()) {
                    setTimeout(function() {
                        e.stage.gotoAndPlay("in"), e.convertFace(".id-gameModeGuide").play()
                    }, 250);
                    var t = _.once(function() {
                        e.stage.gotoAndPlay("out")
                    });
                    this.addManagedListener(this.externalService, a.default.beHUDStartCountdown, function(e) {
                        t()
                    }), this.hudService.once("intro", function() {
                        t()
                    })
                }
            }, t.prototype.isRetry = function() {
                var e = this.$stateParams.mode;
                return "retry" === e || "quickRetry" === e
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([r.autowired("$stateParams")], c.prototype, "$stateParams", void 0), n.__decorate([r.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], c.prototype, "staticdata", void 0), n.__decorate([r.autowired("stateService")], c.prototype, "stateService", void 0), n.__decorate([r.autowired("hudService")], c.prototype, "hudService", void 0), t.HudGameModeGuideBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1624);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/timetrial/result", 83).container({
            stages: {
                "singleplay-timetrial-match-result": r.TimetrialResultBinder
            }
        });
        e.state("root.timetrialResult", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(4),
        o = i(3),
        a = i(1),
        s = i(661),
        c = i(103),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-exitButton", "TIMETRIAL_RESULT_BUTTON_GOTOMAIN"), this.translate(".id-restartButton", "TIMETRIAL_RESULT_BUTTON_RESTART"), this.translate(".id-screenTitle", "TIMETRIAL_RESULT_TITLE"), this.translate(".MyRecordTitle", "TIMETRIAL_RESULT_SUBTITLE_MYBESTLAPTIME_AND_RANK"), this.translate(".GapMC .id-title", "TIMETRIAL_RESULT_DIFF"), this.translate(".CurrentLapTime .id-title", "TIMETRIAL_RESULT_MYRECORD"), this.translate(".id-exitButton", "TIMETRIAL_RESULT_BUTTON_GOTOMAIN"), this.translate(".id-restartButton", "TIMETRIAL_RESULT_BUTTON_RESTART"), this.translate(".MyRecordContainer .id-noneLabel", "TIMETRIAL_TRACKINFO_LAPTIME_NORECORD"), this.onClickSafe(".id-restartButton", function() {
                    return e.timetrialService.retry()
                }), this.onClickSafe(".id-exitButton", function() {
                    return e.timetrialService.exit()
                }), this.addChildBinder(".id-fiveLineChat", c.SimpleChatWindowBinder, {
                    entrance: c.SimpleChatEntrance.Reward
                }), this.missionBinder = this.addChildBinder(".id-mission", s.MissionInfo)
            }, t.prototype.onAddedToScene = function() {
                this.gotoAndPlay(this.stage, "in");
                var e = o.store.getState().timetrial;
                if (this.setTrackInfo(e), this.setBestRecordInfo(e), this.setCurrentLaptime(e), e.matchResult.gainMedalStep > 0) {
                    var t = this.timetrialService.medalRewardsByTrack(e.selectedTrack),
                        i = e.playerInfo.trackRecords[e.selectedTrack].medalStep || 0,
                        n = this.$filter("translate")("ITEM_" + t[i].code + "_NAME");
                    this.template(".id-description", "TIMETRIAL_RESULT_DESC_01", {
                        reward: n
                    })
                } else this.translate(".id-description", "TIMETRIAL_RESULT_DESC_02");
                this.missionBinder.setProps(o.store.getState().timetrial)
            }, t.prototype.getMyBestRecord = function(e) {
                var t = o.store.getState().timetrial.playerInfo,
                    i = (t.trackRecords || {})[e];
                return i ? i.bestLaptime : 0
            }, t.prototype.setTrackInfo = function(e) {
                var t = this.staticdata.trackData.getTrack(e.selectedTrack),
                    i = t.code;
                this.translate(".TrackTitle", t.nameCode), this.translate(".id-trackDescription", "TRACK_DESC_" + (i < 10 ? "0" + i : "" + i)), this.drawExternalImage(".id-LTrackImage", this.$filter("cdn_track_map_large")(i))
            }, t.prototype.setBestRecordInfo = function(e) {
                var t = this.getMyBestRecord(e.selectedTrack),
                    i = e.matchResult,
                    n = i.gainPlatinum,
                    o = i.gainMedalStep,
                    a = i.isBreakRecord,
                    s = i.laptime,
                    c = i.rank,
                    d = n || o;
                t = function() {
                    return !t || t < 0 ? s : t > s ? s : t
                }(), d && a ? (this.translate(".id-event .id-recordText1 .comp-TextField", "TIMETRIAL_RESULT_ACQUIREMEDAL"), this.gotoAndStop(".id-myRecord", "event")) : d ? (this.translate(".id-event .id-recordText1 .comp-TextField", "TIMETRIAL_RESULT_ACQUIREMEDAL"), this.gotoAndStop(".id-myRecord", "event")) : a ? (this.translate(".id-event .id-recordText1 .comp-TextField", "TIMETRIAL_RESULT_BREAKRECORD"), this.gotoAndStop(".id-myRecord", "event")) : this.gotoAndPlay(".id-myRecord", "in"), this.bindText(".id-lapTimeContainer .id-lapTimeNum", r.default.formatLapTime(t)), this.bindText(".MyRecordContainer .id-rankNum .id-rankNum", c > 0 ? c : ""), this.translate(".MyRecordContainer .id-rankNum .id-textField", "TIMETRIAL_RESULT_MYRANKING")
            }, t.prototype.setCurrentLaptime = function(e) {
                this.bindText(".CurrentLapTime .id-num", r.default.formatLapTime(e.matchResult.laptime));
                var t = e.matchResult.prevBestLaptime,
                    i = t ? e.matchResult.laptime - t : 0,
                    n = i ? i < 0 ? "-" : "+" : "",
                    o = r.default.formatLapTime(Math.abs(i)),
                    a = this.getFace(".GapMC .id-num .comp-TextField");
                i && i < 0 && a.setCustomStyle({
                    color: "#34dafe"
                }), this.bindText(a, t ? "" + n + o : "-")
            }, t.prototype.setMedalIconInRecord = function(e, t) {
                if (e || t) {
                    var i = e ? "flatinum" + t : "medal" + t;
                    this.gotoAndStop(".id-lapTimeContainer .id-medal", i)
                }
            }, t.prototype.onDetach = function() {}, t
        }(a.StageBinder);
    n.__decorate([a.autowired("$filter")], d.prototype, "$filter", void 0), n.__decorate([a.autowired("timetrialService")], d.prototype, "timetrialService", void 0), n.__decorate([a.autowired("staticdataLoaderService")], d.prototype, "staticdata", void 0), t.TimetrialResultBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(11),
        r = i(1626);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new n.StateDefinition("/season-event", 84).effect({
            stages: {
                "singleplay-timetrial-season-event": r.SeasonEventBinder
            }
        });
        e.state("root.menu.Timetrial.event", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(2),
        a = i(138),
        s = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.closeSeasonEvent = function() {
                    return t.stateService.go("^")
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.onClickSafe(".id-start", this.closeSeasonEvent), this.translate(".id-start", "TIMETRIAL_PREVIOUS_SEASON_REWARD_BUTTON"), this.translate(".id-seasonTitle", "TIMETRIAL_SEASONSTART_TITLE"), this.translate(".id-seasonDescription", "TIMETRIAL_SEASONSTART_DESC"), this.translate(".id-rewardTitle", "TIMETRIAL_PREVIOUS_SEASON_REWARD_TITLE"), this.translate(".id-normalSubTitle", "TIMETRIAL_PREVIOUS_SEASON_REWARD_NORMAL_TITLE"), this.translate(".id-platinumSubTitle", "TIMETRIAL_PREVIOUS_SEASON_REWARD_PLATINUM_TITLE"), this.translate(".id-rewardDescription", "TIMETRIAL_PREVIOUS_SEASON_REWARD_NOTICE")
            }, t.prototype.bindDate = function() {
                var e = this.service.seasonLabelParam();
                this.template(".id-seasonNum", "TIMETRIAL_SEASONSTART_SEASONNUM", e), this.template(".id-startLabel", "TIMETRIAL_SEASONSTART_STARTDATE", e), this.template(".id-finishLabel", "TIMETRIAL_SEASONSTART_ENDDATE", e)
            }, t.prototype.medals = function(e) {
                if (e.prevPlayer) {
                    var t = this.service.getMedalCount(e.prevPlayer),
                        i = 0;
                    if (e.prevPlatinum && (i = e.prevPlatinum.platinumTrackCodes.length), t || i) return {
                        normal: t,
                        platinum: i
                    }
                }
            }, t.prototype.onAddedToScene = function() {
                this.bindDate();
                var e = this.storeState.timetrial.prevSeasonInfo,
                    t = this.medals(e);
                t ? this.bindRewards(t) : this.bindSeasonStart()
            }, t.prototype.calcRewards = function(e, t) {
                for (var i = 0, n = e; i < n.length; i++) {
                    var r = n[i];
                    if (r.medals <= t) return r.rewards
                }
                return []
            }, t.prototype.animate = function(e, t, i) {
                var n = $(this.face.htmlElement).find(".id-" + e + "Num .id-textField");
                n.prop("Counter", n.text()).animate({
                    Counter: i
                }, {
                    duration: t,
                    easing: "swing",
                    step: function(e) {
                        return n.text(Math.ceil(e))
                    },
                    queue: !1
                })
            }, t.prototype.bindRewards = function(e) {
                var t = this;
                this.translate(".id-confirm", "TIMETRIAL_SEASONSTART_BUTTON_01"), this.once(".id-confirm", o.MouseEventEx.CLICK, function() {
                    return t.stage.gotoAndPlay("prevReward")
                }), this.stage.once("platinumCount", function() {
                    return t.animate("platinum", 400, e.platinum)
                }), this.stage.once("normalCount", function() {
                    return t.animate("normal", 400, e.normal)
                });
                var i = this.service.getTracks().length;
                this.bindText(".id-normalMaxNum", 3 * i), this.bindText(".id-platinumMaxNum", i), this.bindText(".id-normalNum", 0), this.bindText(".id-platinumNum", 0), this.bindRewardItems(e)
            }, t.prototype.bindRewardItems = function(e) {
                var t = this,
                    i = this.storeState.timetrial.seasonInfo.prevSeason,
                    n = this.staticdata.timetrial.seasonRewardData[i.seasonRewardIndex],
                    r = this.calcRewards(n.platinum, e.platinum),
                    o = this.calcRewards(n.normal, e.normal),
                    a = r.concat(o),
                    s = this.fromInjector("$filter"),
                    c = s("itemCardImg"),
                    d = s("translate");
                this.gotoAndStop(".id-RewardItemContainer", String(a.length)), a.forEach(function(e, i) {
                    var n = i + 1;
                    t.drawExternalImage(".id-itemImage" + n, c(e.type, e.code));
                    var r = d("ITEM_" + e.code + "_NAME") + " x" + e.count;
                    t.bindHtml(".id-itemName" + n, r)
                })
            }, t.prototype.bindSeasonStart = function() {
                this.translate(".id-confirm", "TIMETRIAL_SEASONSTART_BUTTON_02"), this.onClickSafe(".id-confirm", this.closeSeasonEvent)
            }, t.prototype.onDetach = function() {
                this.dispatch(a.clearPrevSeasonInfo())
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("timetrialService")], s.prototype, "service", void 0), n.__decorate([r.autowired("stateService")], s.prototype, "stateService", void 0), n.__decorate([r.autowired("staticdataLoaderService")], s.prototype, "staticdata", void 0), t.SeasonEventBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(6),
        r = i(70),
        o = i(76),
        a = i(189),
        s = i(11),
        c = i(1628),
        d = i(100),
        l = i(101),
        u = i(122),
        p = i(123),
        h = i(1629),
        f = i(1631),
        v = i(1632),
        m = i(662),
        g = i(1635),
        y = i(1636),
        S = i(1637),
        _ = i(1638),
        E = i(1639),
        T = i(1641),
        C = i(1643),
        b = i(1644),
        P = i(1645),
        I = i(1646);
    i(1647), i(1652), angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new s.StateDefinition("/openworld", 86).container({
            controller: "Openworld",
            stages: {
                "openworld-main": E.OpenworldMainBinder,
                "hud-mini-map": {
                    stageBinder: y.HudOpenworldMiniMapBinder,
                    customComponents: {
                        TextureProxy: r.default
                    }
                },
                "hud-dashboard": S.DashboardBinder,
                "hud-ranking": g.HudOpenworldRankingBinder,
                "hud-ow-time-rank": v.HudOpenworldTimeRankBinder,
                "hud-action-feedback": d.HudActionFeedbackBinder,
                "hud-speed-turbo-slot": {
                    stageBinder: u.HudSpeedTurboSlotBinder,
                    customComponents: {
                        PieMask: o.default
                    }
                },
                "hud-speed-turbo-gauge": p.HudSpeedTurboGaugeBinder,
                "hud-drift-booster-indicator": l.HudDriftBoosterIndicatorBinder,
                "openworld-chat": c.OpenworldChatBinder,
                "hud-room-mirror": {
                    stageBinder: S.RoomMirrorBinder,
                    customComponents: {
                        TextureProxy: r.default
                    }
                },
                "hud-ow-campaign-info": h.HudOpenworldCampaignInfoBinder,
                "hud-ow-gamemode-info": m.HudGameModeInfoBinder,
                "hud-ow-event-spot-info": f.SpotInfoBinder,
                "hud-ow-worldmap-info": I.MapBinder,
                "hud-message-bar": P.MessageBarBinder,
                "hud-tutorial-message-bar": T.HudTutorialMessageBarBinder
            },
            resolve: {
                asset: ["playerService", "vehicleService", function(e, t) {
                    return n.all([e.fetch(), t.fetch()])
                }],
                openworld: ["openworldService", "openworldCampaignService", "openworldMissionService", "openworldDriveMileageService", function(e, t, i, r) {
                    return n.all([e.init(), t.fetchCampaign(), i.init(), r.init()])
                }]
            }
        });
        e.state("root.menu.Openworld", t);
        var i = new s.StateDefinition("/channel", 88).dialog({
            stages: {
                "openworld-channel-popup": C.OpenworldChannelPopupBinder
            },
            resolve: {
                openworld: ["openworldService", function(e) {
                    return e.fetchChannelCount()
                }]
            }
        });
        e.state("root.menu.Openworld.Channel", i);
        var a = new s.StateDefinition("/vehicle", 89).dialog({
            stages: {
                "ow-change-vehicle-popup": b.OpenworldChangeVehicleBinder
            }
        });
        e.state("root.menu.Openworld.Vehicle", a)
    }]).controller("OpenworldController", ["$scope", "hudService", "inputKeyConfigService", function(e, t, i) {
        t.bind(e, a.HudType.Openworld), setTimeout(function() {
            t.intro(), i.checkAddedKeyGuidePopup()
        }), _.hideOnMission("hud-mini-map", "hud-dashboard", "hud-ow-time-rank", "openworld-chat", "hud-room-mirror", "hud-ow-campaign-info"), _.offOnMission("global-panel", "hud-action-feedback", "hud-speed-turbo-slot", "hud-speed-turbo-gauge", "hud-drift-booster-indicator")
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(96),
        a = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.chatSelector = ".id-owChat", t
            }
            return n.__extends(t, e), t.prototype.onIntro = function() {
                this.gotoAndPlay(".CONTAINER", "intro"), e.prototype.onIntro.call(this)
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this);
                var t = this.openworldService.getId();
                this.translate(".id-channelInfo .id-textField", "Ch." + t)
            }, t
        }(o.GamePlayChatBinder);
    n.__decorate([r.autowired("openworldService")], a.prototype, "openworldService", void 0), n.__decorate([r.select(".id-container")], a.prototype, "hideTarget", void 0), t.OpenworldChatBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n, r = i(0),
        o = i(15),
        a = i(1),
        s = i(111),
        c = i(2),
        d = i(29),
        l = i(594),
        u = i(4),
        p = i(27),
        h = i(1630);
    ! function(e) {
        e[e.None = 0] = "None", e[e.Pending = 1] = "Pending"
    }(n || (n = {}));
    var f = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.autoPopupState = n.None, t.toggleCampaign = function() {
                var e = t.storeState,
                    i = e.globalPanel.showGnbHub,
                    n = e.view.flags.openworldMap;
                if (i || n || t.stateService.isTransitionStarted) return !0;
                var r = t.stateService.getCurrentCode();
                return 86 === r ? t.stateService.go(".Campaign") : 87 === r && t.stateService.go("^"), !1
            }, t
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            this.classNames(this.face, "rightsideReviseCoordinateOfScreenRatio"), this.translate(this.button.$(".id-completeButtonName .id-textField"), "HUD_OPENWORLD_CAMPAIGN_COMPLETE"), this.button.on(c.MouseEventEx.CLICK, this.toggleCampaign), this.watchMileage(), this.taskBinders = this.addChildBinder(".id-campaignInfoItem", a.CollectionBinder, {
                instanceBinder: v,
                keyProperty: "code"
            }), this.advertRewardBinder = this.addChildBinder(".NextVehicleRewardInfo", m)
        }, t.prototype.saveProgress = function(e) {
            this.reduxProps.status === o.Openworld.CampaignStatus.InProgress && this.campaignService.updateCampaign(e)
        }, t.prototype.watchMileage = function() {
            var e = this,
                t = 0,
                i = 0;
            this.mileageWatcher = this.externalService.on(s.CoreEvent.beSetDistance, function(n) {
                if (t) {
                    var r = n - t;
                    r > 10 && (e.campaignService.checkDistance(Math.floor(r)), t = n)
                } else t = n;
                i ? n - i >= l.UpdateIntervalMileage && (e.saveProgress(e.props.currentTaskProgress), i = n) : i = n
            })
        }, t.prototype.setKeyboardToggle = function() {
            this.keyListener = {
                onEvent: this.toggleCampaign
            }, this.globalKeyService.pushListener(d.KeyboardMap.getKeyCode("P"), this.keyListener), this.globalKeyService.pushListener("dpad_left_button", this.keyListener)
        }, t.prototype.onAddedToScene = function() {
            var e = this;
            this.gotoAndPlay(".CONTAINER", "intro"), this.setTaskList(), this.updateTimer = setInterval(function() {
                e.saveProgress()
            }, l.UpdateIntervalTime), this.setKeyboardToggle(), this.stateWatcher = this.$transitions.onSuccess({}, function() {
                e.autoPopupState === n.Pending && e.scheduleAutoPopup()
            })
        }, t.prototype.mapStateToProps = function(e) {
            return r.__assign({}, e.campaign, {
                mapIsOn: e.view.flags.openworldMap,
                gnbHub: e.globalPanel.showGnbHub,
                missionStatus: e.mission.status
            })
        }, t.prototype.update = function(e) {
            if (this.reduxProps.status !== e.status && e.status === o.Openworld.CampaignStatus.Completed) return this.clearHandlers(), void(this.face.visible = !1);
            this.reduxProps.currentCampaignCode !== e.currentCampaignCode && (this.setTaskList(), this.updateAdvertReward(e), this.updateButtonName(e.currentCampaignCode)), this.reduxProps.currentTaskProgress !== e.currentTaskProgress && this.checkAndUpdateCompleteTask(e.currentTaskProgress), this.reduxProps.mapIsOn !== e.mapIsOn && (this.enableButton(".id-campaignButton", !e.mapIsOn), this.advertRewardBinder.onWorldmapOpen(e.mapIsOn), this.taskBinders.binders.forEach(function(t) {
                t.enableEvenOddBackground(e.mapIsOn)
            })), this.autoPopupState === n.Pending && this.scheduleAutoPopup()
        }, t.prototype.setTaskList = function() {
            this.taskBinders.applyCollection(this.campaignService.getCurrentTaskList())
        }, t.prototype.updateAdvertReward = function(e) {
            var t = e.currentCampaignCode,
                i = e.status,
                n = i !== o.Openworld.CampaignStatus.Completed && this.campaignService.getNextAdvertCampaign(t);
            this.advertRewardBinder.setProps(n ? {
                code: n.code,
                reward: n.rewards[0]
            } : {
                code: 0
            })
        }, t.prototype.updateButtonName = function(e) {
            var t = this.campaignService.getCampaigns().length,
                i = this.button.$(".id-buttonName .id-textField"),
                n = this.fromInjector("$filter")("translate");
            this.bindHtml(i, n("HUD_OPENWORLD_CAMPAIGN") + "(" + e + "/" + t + ")")
        }, t.prototype.checkAndUpdateCompleteTask = function(e) {
            var t = this,
                i = !1,
                n = !0;
            this.taskBinders.binders.forEach(function(r) {
                var o = r.getProps(),
                    a = o.code,
                    s = o.progress,
                    c = o.goal,
                    d = e[a];
                void 0 !== d && s !== d && (i = !i && t.campaignService.shouldStore(a, s, d, c), r.updateProgress(d)), n = n && d >= c
            }), i && this.saveProgress(e), this.button.customState = n ? "complete" : void 0, !1 === this.prevComplete && n && this.scheduleAutoPopup(), this.prevComplete = n
        }, t.prototype.couldOpenPopup = function() {
            var e = this.storeState,
                t = e.globalPanel.showGnbHub,
                i = e.view.flags.openworldMap,
                n = e.mission.status;
            return !(t || i || this.stateService.isTransitionStarted || _.includes([2, 1], n)) && 86 === this.stateService.getCurrentCode()
        }, t.prototype.showCampaignPopup = function() {
            87 !== this.stateService.getCurrentCode() && (this.couldOpenPopup() ? (this.stateService.go(".Campaign"), this.autoPopupState = n.None) : this.autoPopupState = n.Pending)
        }, t.prototype.scheduleAutoPopup = function() {
            var e = this;
            this.autoPopupTimer && clearInterval(this.autoPopupTimer), this.autoPopupTimer = setTimeout(function() {
                e.autoPopupTimer = void 0, e.showCampaignPopup()
            }, 1e3)
        }, t.prototype.clearHandlers = function() {
            this.updateTimer && clearInterval(this.updateTimer), this.updateTimer = void 0, this.autoPopupTimer && clearInterval(this.autoPopupTimer), this.autoPopupTimer = void 0, this.mileageWatcher(), this.stateWatcher(), this.globalKeyService.popListener(d.KeyboardMap.getKeyCode("P"), this.keyListener), this.globalKeyService.popListener("dpad_left_button", this.keyListener)
        }, t.prototype.onDetach = function() {
            this.saveProgress(), this.clearHandlers()
        }, t
    }(a.StageBinder);
    r.__decorate([a.autowired("openworldCampaignService")], f.prototype, "campaignService", void 0), r.__decorate([a.autowired("stateService")], f.prototype, "stateService", void 0), r.__decorate([a.autowired("externalService")], f.prototype, "externalService", void 0), r.__decorate([a.autowired("globalKeyService")], f.prototype, "globalKeyService", void 0), r.__decorate([a.autowired("$transitions")], f.prototype, "$transitions", void 0), r.__decorate([a.select(".CONTAINER")], f.prototype, "hideTarget", void 0), r.__decorate([a.select(".id-campaignButton")], f.prototype, "button", void 0), t.HudOpenworldCampaignInfoBinder = f;
    var v = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return r.__extends(t, e), t.prototype.onFaceReady = function() {
            this.face.hasSize = !0, this.hasSizeAll(".ConditionDetailNormal, .ConditionDetailComplete, .CheckEmpty, .Check", !0)
        }, t.prototype.update = function(e) {
            var t = e.code,
                i = e.index,
                n = e.goal,
                r = e.progress,
                o = n <= r,
                a = this.$filter("template")({
                    current: Math.floor(r || 0),
                    max: n
                }, "OPENWORLD_CAMPAIGN_TASKINFO_INFO_" + t);
            o && this.setCompleteBack(a), this.bindHtmlAll(".id-conditionDetail, .id-conditionDetailNormal", o ? u.default.stripHtml(a) : a), this.gotoAndPlay(this.face, o ? "get" : "normal", !0), this.face.yOffset = -1 * i * (this.face.height + 6)
        }, t.prototype.updateProgress = function(e) {
            this.setProps(r.__assign({}, this.props, {
                progress: e
            }))
        }, t.prototype.enableEvenOddBackground = function(e) {
            var t = "hud";
            if (e) {
                t = this.props.index % 2 == 0 ? "mapEven" : "mapOdd"
            }
            this.gotoAndStop(".id-backgroundBar", t)
        }, t.prototype.setCompleteBack = function(e) {
            var t = this.getFace(".id-conditionDetail .id-textField"),
                i = t.width,
                n = u.default.testWidth(t, e),
                r = this.getFace(".id-conditionDetail .comp-Bitmap"),
                o = (n + 10) / i,
                a = r.width * o,
                s = a - r.width;
            r.scaleXMultiplier = o;
            var c = -s / 2;
            r.xOffset = c
        }, t
    }(a.Binder);
    r.__decorate([a.autowired("$filter")], v.prototype, "$filter", void 0), t.TaskItemBinder = v;
    var m = function(e) {
        function t() {
            var t = null !== e && e.apply(this, arguments) || this;
            return t.show = !1, t.clearHandler = _.noop, t.onRpm = function(e) {
                t.show && e > h.IdleStateRPM ? (t.gotoAndPlay(t.face, "out", !0), t.show = !1) : !t.show && e <= h.IdleStateRPM && (t.gotoAndPlay(t.face, "in", !0), t.show = !0)
            }, t
        }
        return r.__extends(t, e), t.prototype.onDetach = function() {
            this.clearHandler()
        }, t.prototype.shouldUpdate = function(e) {
            return this.props.code !== e.code
        }, t.prototype.update = function(e) {
            var t = e.code,
                i = e.reward;
            if (!t) return this.clearHandler(), this.clearHandler = _.noop, this.visible(this.face, !1);
            this.bindItemCard(i), this.template(".id-titleLabel", "OPENWORLD_HUD_ADVERTCAMPAIGN_TITLE", {
                code: t
            }), this.translate(".id-descriptionLabel", "OPENWORLD_HUD_ADVERTCAMPAIGN_" + t + "_DESC")
        }, t.prototype.bindItemCard = function(e) {
            var t = this,
                i = {
                    info: e,
                    mouseDisabled: !0
                };
            this.itemCard ? this.itemCard.setProps(i) : (this.itemCard = this.addChildBinder(".ItemCardSmall", p.ItemCardBinder, i), setTimeout(function() {
                t.clearHandler = t.externalService.on(s.CoreEvent.beHUDSetTachometer, t.onRpm)
            }, 3e3))
        }, t.prototype.onWorldmapOpen = function(e) {
            this.visible(this.face, !e)
        }, t
    }(a.Binder);
    r.__decorate([a.autowired("externalService")], m.prototype, "externalService", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    }), t.IdleStateRPM = 1100
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(111),
        a = i(118),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.classNames(this.face, "leftsideReviseCoordinateOfScreenRatio")
            }, t.prototype.onAddedToScene = function() {
                var e, t = this,
                    i = this.fromInjector("externalService"),
                    n = this.fromInjector("hudService"),
                    r = (s = {}, s[a.SpotType.SPEEDZONE] = "speed", s[a.SpotType.SPEEDCAMERA] = "camera", s[a.SpotType.JUMP] = "jump", s);
                this.addManagedListener(i, o.CoreEvent.beOnOpenworldSpot, function(i, n, o) {
                    e && clearTimeout(e), t.gotoAndStop(t.icon, r[n]), t.gotoAndPlay(t.container, "intro");
                    var a = t.service.updateSpotRecord({
                        code: i,
                        type: n,
                        record: o
                    });
                    t.bindRecord(a), e = setTimeout(function() {
                        e = void 0, t.gotoAndPlay(t.container, "outro", !0)
                    }, 5e3)
                }), n.on("acccept-openworld-mission", function() {
                    return t.gotoAndPlay(t.container, "outro", !0)
                });
                var s
            }, t.prototype.bindRecord = function(e) {
                var t, i, n, r = e.type,
                    o = e.record;
                switch (r) {
                    case a.SpotType.SPEEDZONE:
                        t = "HUD_OPENWORLD_SPOT_KMH", i = "HUD_OPENWORLD_SPOT_MAXZONERECORD", n = "HUD_OPENWORLD_SPOT_SPEEDZONE";
                        break;
                    case a.SpotType.SPEEDCAMERA:
                        t = "HUD_OPENWORLD_SPOT_KMH", i = "HUD_OPENWORLD_SPOT_MAXSPEEDRECORD", n = "HUD_OPENWORLD_SPOT_CAMERA";
                        break;
                    case a.SpotType.JUMP:
                        t = "HUD_OPENWORLD_SPOT_METER", i = "HUD_OPENWORLD_SPOT_MAXJUMPDISTANCE", n = "HUD_OPENWORLD_SPOT_JUMP"
                }
                this.template(this.record, t, {
                    value: o.toFixed(2)
                }), this.translate(this.title, i), this.translate(this.typeLabel, n), this.bindText(this.progress, this.spotProgress(r))
            }, t.prototype.spotProgress = function(e) {
                var t = this.service.getMissions(),
                    i = t.spot[e];
                return _.reduce(this.storeState.mission.spotRecords, function(t, i) {
                    return i.type === e ? t + 1 : t
                }, 0) + "/" + i
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("openworldMissionService")], s.prototype, "service", void 0), n.__decorate([r.select(".CONTAINER")], s.prototype, "container", void 0), n.__decorate([r.select(".id-IconMC")], s.prototype, "icon", void 0), n.__decorate([r.select(".id-num")], s.prototype, "record", void 0), n.__decorate([r.select(".id-title")], s.prototype, "title", void 0), n.__decorate([r.select(".id-titleLabel")], s.prototype, "typeLabel", void 0), n.__decorate([r.select(".id-numLabel")], s.prototype, "progress", void 0), t.SpotInfoBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(332),
        s = i(1633),
        c = i(118),
        d = i(110),
        l = i(229),
        u = i(1634),
        p = i(4),
        h = i(9),
        f = i(593),
        v = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.hideTarget = this.convertFace("CONTAINER_OW");
                this.hudService.once("intro", function() {
                    return e.gotoAndPlay(t, "intro")
                }), this.addChildBinder(".CONTAINER_OW .LEFTTOP .id-mainContentContainer", m)
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("hudService")], v.prototype, "hudService", void 0), t.HudOpenworldTimeRankBinder = v;
    var m = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.addChildBinder(".id-topKeyInfo", u.TopKeyInfoBinder), this.rewardContainer = this.addChildBinder(".id-rewardContainer", g), this.subInfoContainer = this.addChildBinder(".id-subInfoContainer", y);
            var t = this.getFace(".id-currentLapTimeContainer .id-lapTimeLabel");
            this.addManagedListener(this.externalService, h.default.beHUDSetTimeElapsed, function(i) {
                _.isNumber(i) && e.bindText(t, p.default.formatLapTime(i))
            });
            var i = this.getFace(".id-KM .id-textField");
            this.addManagedListener(this.externalService, h.default.beHUDSetMyDistanceToFinish, function(t) {
                e.translate(i, (t / 1e3).toFixed(2))
            }), this.addManagedListener(this.externalService, h.default.beStartOpenworldRace, function(t) {
                log.debug("beStartOpenworldRace", t), e.dispatch(l.start(t)), e.hudService.emit("start-openworld-mission")
            }), this.addManagedListener(this.externalService, h.default.beFinishOpenworldRace, function(t) {
                if (log.debug("beFinishOpenworldRace", t), 2 === e.storeState.mission.status) {
                    var i = e.openworldMissionService.onFinish(t);
                    e.dispatch(l.finish(t, i))
                }
            })
        }, t.prototype.onAddedToScene = function() {
            this.gotoAndPlay(this.face, "default")
        }, t.prototype.shouldUpdate = function(e) {
            return this.reduxProps.status !== e.status
        }, t.prototype.update = function(e) {
            var t = this,
                i = e.status,
                n = e.result;
            switch (i) {
                case 2:
                    this.subInfoContainer.setProps(e), this.gotoAndPlay(this.face, "mode");
                    break;
                case 3:
                    0 !== n.finishState && this.dispatch(f.updateTutorialStatus(d.TutorialStatus.FINISHED)), this.rewardContainer.setProps(e), this.gotoAndPlay(this.face, "result"), this.face.once("rewardBranch", function() {
                        return t.rewardContainer.playReward()
                    });
                    break;
                default:
                    this.gotoAndPlay(this.face, "default")
            }
        }, t.prototype.mapStateToProps = function(e) {
            return e.mission
        }, t
    }(o.Binder);
    n.__decorate([o.autowired("openworldMissionService")], m.prototype, "openworldMissionService", void 0), n.__decorate([o.autowired("externalService")], m.prototype, "externalService", void 0), n.__decorate([o.autowired("hudService")], m.prototype, "hudService", void 0);
    var g = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.iconContainer = this.addChildBinder(".IconContainer", s.IconContainer), this.limitedReward = this.addChildBinder(".id-rewardInfoContainer1", a.RewardInfoContainer), this.defaultReward = this.addChildBinder(".id-rewardInfoContainer2", a.RewardInfoContainer), this.translate(".id-medalInfoLabel1", "HUD_OPENWORLD_SPECIALMISSIONSUCCESS")
        }, t.prototype.bindMedalInfo = function(e, t) {
            var i = this.$filter("translate")("TRACK_DIFFICULTY_0" + e.difficulty),
                n = this.$filter("translate")("MISSION_NAME_" + e.code),
                r = t === c.Medal.empty ? "HUD_OPENWORLD_RETIREMISSION" : t === c.Medal.retire ? "HUD_OPENWORLD_MISSIONFAIL" : "HUD_OPENWORLD_MISSIONSUCCESS";
            this.bindText(this.rewardLabel, this.$filter("template")({
                difficulty: i,
                name: n
            }, "HUD_OPENWORLD_MISSIONNAME") + " " + this.$filter("translate")(r))
        }, t.prototype.bindRewards = function(e) {
            var t = e.missionId,
                i = e.gameMode,
                n = e.result.medal;
            this.iconContainer.setProps({
                medal: n,
                gameMode: i
            });
            var r = this.missionService.getMission(t);
            if (this.bindMedalInfo(r, n), n === c.Medal.empty) return this.defaultReward.setProps({
                info: ["HUD_OPENWORLD_RETIREMESSAGE"]
            }), !1;
            var o = this.missionService.getReward(r, c.Medal[n]);
            return o.limited && this.limitedReward.setProps({
                info: o.limited
            }), this.defaultReward.setProps({
                info: o.default
            }), Boolean(o.limited)
        }, t.prototype.update = function(e) {
            var t = this,
                i = this.bindRewards(e);
            this.playLabel = i ? "limited" : "default", setTimeout(function() {
                return t.dispatch(l.clear())
            }, i ? 8e3 : 5e3)
        }, t.prototype.playReward = function() {
            this.gotoAndPlay(this.face, this.playLabel)
        }, t
    }(o.Binder);
    n.__decorate([o.autowired("$filter")], g.prototype, "$filter", void 0), n.__decorate([o.autowired("openworldMissionService")], g.prototype, "missionService", void 0), n.__decorate([o.select(".id-medalInfoLabel2")], g.prototype, "rewardLabel", void 0);
    var y = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            var e = this;
            this.translate(".id-titleLabel2", "HUD_OPENWORLD_REMAINDISTANCE"), this.addManagedListener(this.externalService, h.default.beHUDSetLeaderboard, function(t, i, n) {
                e.gameMode !== c.GameMode.TIMEATTACK && (e.gameMode === c.GameMode.MULTIRACE ? (i.length && e.setLeaderboard(i), e.bindText(".id-userNumLabel .id-textField", i.length)) : e.setTargetRecord(t))
            }), this.addManagedListener(this.externalService, h.default.beHUDSetTimeElapsed, function(t) {
                _.isNumber(t) && e.gameMode === c.GameMode.TIMEATTACK && e.setTargetRecord(t)
            }), this.addManagedListener(this.externalService, h.default.beAddRecord, function(t, i, n, o) {
                void 0 === n && (n = 0), void 0 === o && (o = 0), e.gameMode === c.GameMode.MULTIRACE && r.all([e.playerSnippetService.getSnippetAsync(t), e.leaderboard]).then(function(n) {
                    var r = n[0],
                        o = n[1],
                        a = o.length ? _.indexOf(o, t) + 1 : 1,
                        s = r.name,
                        c = p.default.formatLapTime(i);
                    1 === a && e.worldChatService.printMultiRaceMsg(e.$filter("template")({
                        name: e.$filter("translate")("MISSION_NAME_" + e.missionId)
                    }, "CHATTING_MULTIRACE_RESULT_TITLE")), e.worldChatService.printMultiRaceMsg(e.$filter("template")({
                        value: a,
                        name: s,
                        laptime: c
                    }, "CHATTING_MULTIRACE_RESULT_RANK"))
                })
            })
        }, t.prototype.update = function(e) {
            var t = e.missionId,
                i = e.gameMode,
                n = e.status;
            if (!_.isUndefined(t) && 2 === n) {
                if (this.missionId = t, this.gameMode = i, this.translate(".id-KM .id-textField", "0.00"), i === c.GameMode.MULTIRACE) return this.gotoAndStop(this.face, "userNum"), this.translate(".id-titleLabel1", "HUD_OPENWORLD_TOTALPLAYERS"), void this.bindText(".id-userNumLabel .id-textField", "0");
                this.translate(".id-titleLabel1", i === c.GameMode.RACE ? "HUD_OPENWORLD_EXPECTRANK" : "HUD_OPENWORLD_TARGETRANK");
                var r = this.openworldMissionService.getMission(t).record;
                this.record = r;
                var o = r.gold;
                _.isNumber(o) && (i === c.GameMode.TIMEATTACK ? (this.gotoAndStop(this.face, "timeAttack"), this.bindText(".id-lapTimeLabel .id-textField", p.default.formatLapTime(o))) : (this.gotoAndStop(this.face, "race"), this.bindText(".id-lapTimeLabel .id-textField", o)), this.gotoAndStop(".id-smallMadalMC", "gold"))
            }
        }, t.prototype.getTargetMedal = function(e) {
            var t = this.openworldMissionService.toMedal(this.missionId, e);
            return "retire" === t && (t = this.gameMode === c.GameMode.RACE ? "blank" : "bronze"), t
        }, t.prototype.setTargetRecord = function(e) {
            var t = this.getTargetMedal(e);
            if (this.targetMedal !== t) {
                var i = this.record[t];
                this.bindText(".id-lapTimeLabel .id-textField", this.gameMode === c.GameMode.RACE ? e : p.default.formatLapTime(i)), this.gotoAndStop(".id-smallMadalMC", t)
            }
        }, t.prototype.setLeaderboard = function(e) {
            this.leaderboard = e
        }, t
    }(o.Binder);
    n.__decorate([o.autowired("$filter")], y.prototype, "$filter", void 0), n.__decorate([o.autowired("openworldMissionService")], y.prototype, "openworldMissionService", void 0), n.__decorate([o.autowired("externalService")], y.prototype, "externalService", void 0), n.__decorate([o.autowired("worldChatService")], y.prototype, "worldChatService", void 0), n.__decorate([o.autowired("playerSnippetService")], y.prototype, "playerSnippetService", void 0)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(118),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                var t = e.medal,
                    i = e.gameMode,
                    n = i !== o.GameMode.MULTIRACE && t > o.Medal.retire ? "medal" : "default";
                this.gotoAndStop(this.face, n), this.gotoAndStop(".OwGameModeIcon", this.getLabel(i)), "default" !== n && this.gotoAndStop(".OwGameMedalIcon", t)
            }, t.prototype.getLabel = function(e) {
                switch (e) {
                    case o.GameMode.TIMEATTACK:
                        return "timeAttack";
                    case o.GameMode.MULTIRACE:
                        return "multiRace";
                    case o.GameMode.RACE:
                    default:
                        return "race"
                }
            }, t
        }(r.Binder);
    t.IconContainer = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                this.reduxProps.mapIsOn !== e.mapIsOn && e.mapIsOn ? this.bindMapKeys() : this.bindByStatus(e.status)
            }, t.prototype.bindMapKeys = function() {
                this.translate(this.textField, "HUD_OPENWORLD_KEY_WORLDMAP")
            }, t.prototype.bindByStatus = function(e) {
                switch (e) {
                    case 2:
                        this.translate(this.textField, "HUD_OPENWORLD_KEY_PLAYING");
                        break;
                    default:
                        this.translate(this.textField, "HUD_OPENWORLD_KEY_NORMAL")
                }
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    status: e.mission.status,
                    mapIsOn: e.view.flags.openworldMap
                }
            }, t
        }(r.Binder);
    n.__decorate([r.select(".id-textField")], o.prototype, "textField", void 0), t.TopKeyInfoBinder = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(9),
        a = i(118),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.addManagedListener(this.externalService, o.default.beHUDSetLeaderboard, function(t, i, n) {
                    e.gameMode === a.GameMode.MULTIRACE ? (e.positionRankLabel.text = t.toString(), e.maxNum.text = i.length.toString()) : (e.rankLabel.text = t.toString(), e.suffixLabel.text = e.$filter("ordinalSuffix")(t).toUpperCase())
                }), this.visible(".id-trackName", !1)
            }, t.prototype.shouldUpdate = function(e) {
                return this.reduxProps.status !== e.status
            }, t.prototype.update = function(e) {
                var t = e.gameMode,
                    i = e.status;
                if (this.gameMode = t, t === a.GameMode.TIMEATTACK || 2 !== i) return void this.container.gotoAndStop(0);
                this.gotoAndStop(this.rightTop, t === a.GameMode.MULTIRACE ? "position" : "default"), this.container.gotoAndPlay("intro")
            }, t.prototype.mapStateToProps = function(e) {
                return e.mission
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("$filter")], s.prototype, "$filter", void 0), n.__decorate([r.autowired("externalService")], s.prototype, "externalService", void 0), n.__decorate([r.autowired("hudService")], s.prototype, "hudService", void 0), n.__decorate([r.select(".CONTAINER")], s.prototype, "container", void 0), n.__decorate([r.select(".CONTAINER .RIGHTTOP")], s.prototype, "rightTop", void 0), n.__decorate([r.select(".CONTAINER .RIGHTTOP .id-currentRank .id-rankLabel")], s.prototype, "rankLabel", void 0), n.__decorate([r.select(".CONTAINER .RIGHTTOP .id-currentRank .id-suffixLabel")], s.prototype, "suffixLabel", void 0), n.__decorate([r.select(".CONTAINER .RIGHTTOP .id-positionRank .id-rankLabel")], s.prototype, "positionRankLabel", void 0), n.__decorate([r.select(".CONTAINER .RIGHTTOP .id-positionRank .id-maxNum")], s.prototype, "maxNum", void 0), t.HudOpenworldRankingBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(9),
        o = i(1),
        a = i(78),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.checkpointInfoLeft = this.addChildBinder(".CheckPointInfoCenter", c), this.checkpointInfoCenter = this.addChildBinder(".CheckPointInfoLeft", c)
            }, t.prototype.onAddedToScene = function() {
                var t = this;
                e.prototype.onAddedToScene.call(this), this.visible(this.checkpointInfoCenter.face, !1), this.visible(this.checkpointInfoLeft.face, !1), this.addManagedListener(this.externalService, r.CoreEvent.beHUDSetCheckpointCompleted, function(e) {
                    log.debug("checkpoint completed", e), t.checkpointInfoLeft.setProps({
                        completed: e
                    }), t.checkpointInfoCenter.setProps({
                        completed: e
                    })
                })
            }, t.prototype.update = function(e) {
                var t = e.status,
                    i = e.checkpointCount;
                this.visible(this.checkpointInfoLeft.face, 2 === t), this.visible(this.checkpointInfoCenter.face, 2 === t), 2 === t && (this.checkpointInfoLeft.init(i), this.checkpointInfoCenter.init(i))
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.mission;
                return {
                    status: t.status,
                    checkpointCount: t.checkpointCount
                }
            }, t
        }(a.HudMiniMapBinder);
    n.__decorate([o.select(".CONTAINER")], s.prototype, "hideTarget", void 0), t.HudOpenworldMiniMapBinder = s;
    var c = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.translate(".id-titleLabel", "HUD_OPENWORLD_CHECKPOINT")
        }, t.prototype.update = function(e) {
            var t = e.completed;
            this.translate(".id-numLabel", t + "/" + this.total)
        }, t.prototype.init = function(e) {
            this.total = e, this.setProps({
                completed: 0
            })
        }, t
    }(o.Binder)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(102),
        o = i(71),
        a = i(1),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                this.hudService.supportRoomMirror ? (this.face.visible = !0, this.hideTarget = this.convertFace(".CONTAINER")) : (this.face.visible = !1, this.hideTarget = void 0)
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    roomMirrorOff: e.configuration.configs.ingame.applied.roomMirrorOff
                }
            }, t
        }(r.HudRoomMirrorBinder);
    t.RoomMirrorBinder = s;
    var c = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t
    }(o.HudDashboardBinder);
    n.__decorate([a.select(".CONTAINER")], c.prototype, "hideTarget", void 0), t.DashboardBinder = c
}, function(e, t, i) {
    "use strict";

    function n() {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        var i = o.getInjector().get("hudService"),
            n = function() {
                var t;
                return function() {
                    return t || (t = _(e).map(function(e) {
                        return a.getStageBinderByName(e + ".fla")
                    }).filter(function(e) {
                        return e && e.hideTarget
                    }).value())
                }
            }(),
            r = function(e) {
                return function() {
                    for (var t = 0, i = n(); t < i.length; t++) {
                        i[t].hideTarget.gotoAndPlay(e)
                    }
                }
            };
        i.on("accept-openworld-mission", r("outro")), i.on("start-openworld-mission", r("intro"))
    }

    function r() {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        var i = o.getInjector().get("hudService"),
            n = function() {
                var t;
                return function() {
                    return t || (t = _(e).map(function(e) {
                        return a.getStageBinderByName(e + ".fla")
                    }).filter(function(e) {
                        return e
                    }).value())
                }
            }(),
            r = function(e) {
                return function() {
                    for (var t = 0, i = n(); t < i.length; t++) {
                        i[t].face.visible = e
                    }
                }
            };
        i.on("accept-openworld-mission", r(!1)), i.on("start-openworld-mission", r(!0))
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(34),
        a = i(17);
    t.hideOnMission = n, t.offOnMission = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(136),
        a = i(29),
        s = i(1640),
        c = i(228),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.toggleMap = function() {
                    if (t.storeState.globalPanel.showGnbHub || t.stateService.isTransitionStarted || 86 !== t.stateService.getCurrentCode()) return !1;
                    var e = t.reduxProps.mapIsOn;
                    return t.dispatch(o.openworldMap(!e)), !1
                }, t.toggleVehicle = function() {
                    if (t.isPopupPrevented()) return !1;
                    var e = t.stateService.getCurrentCode();
                    return 86 === e ? t.stateService.go(".Vehicle").then(function() {
                        return t.campaignService.onOpenChangeVehicle()
                    }) : 89 === e && t.stateService.go("^"), !1
                }, t.toggleChannel = function() {
                    if (t.isPopupPrevented()) return !1;
                    var e = t.stateService.getCurrentCode();
                    return 86 === e ? t.stateService.go(".Channel") : 88 === e && t.stateService.go("^"), !1
                }, t
            }
            return n.__extends(t, e), t.prototype.onAddedToScene = function() {
                var e = this;
                c.isFirstAttempt() && this.campaignService.startCampaign(), this.dispatch(s.enterOpenworld()), this.campaignService.init(), this.setupListeners(), this.openworldService.status = 0, setTimeout(function() {
                    return e.uistateNotifyService.setSubState(14)
                })
            }, t.prototype.onDetach = function() {
                this.dispatch(s.leaveOpenworld()), this.campaignService.destroy(), this.clearListeners(), this.openworldService.status = 1, this.hideWorldMap(), this.appearanceEditRenderer.unmount()
            }, t.prototype.setupListeners = function() {
                var e = this;
                this.mapKeyListener = {
                    onEvent: this.toggleMap
                }, this.globalKeyService.pushListener(a.KeyboardMap.getKeyCode("M"), this.mapKeyListener), this.globalKeyService.pushListener("dpad_right_button", this.mapKeyListener), this.vehicleKeyListener = {
                    onEvent: this.toggleVehicle
                }, this.globalKeyService.pushListener(a.KeyboardMap.getKeyCode("F11"), this.vehicleKeyListener), this.channelKeyListener = {
                    onEvent: this.toggleChannel
                }, this.globalKeyService.pushListener(a.KeyboardMap.getKeyCode("F12"), this.channelKeyListener), this.deregister = this.$transitions.onStart({}, function(t) {
                    86 !== t.to().state ? e.openworldService.status = 2 : t.promise.then(function() {
                        return e.openworldService.status = 0
                    })
                })
            }, t.prototype.clearListeners = function() {
                this.globalKeyService.popListener(a.KeyboardMap.getKeyCode("M"), this.mapKeyListener), this.globalKeyService.popListener("dpad_right_button", this.mapKeyListener), this.globalKeyService.popListener(a.KeyboardMap.getKeyCode("F11"), this.vehicleKeyListener), this.globalKeyService.popListener(a.KeyboardMap.getKeyCode("F12"), this.channelKeyListener), this.deregister()
            }, t.prototype.isPopupPrevented = function() {
                var e = this.storeState,
                    t = e.globalPanel.showGnbHub,
                    i = e.view.flags.openworldMap,
                    n = e.mission.status;
                return t || i || this.stateService.isTransitionStarted || _.includes([2, 1], n)
            }, t.prototype.showWorldMap = function() {
                this.externalService.beShowOpenworldMap(!0), $("#edge-ui").addClass("show-openworld-map")
            }, t.prototype.hideWorldMap = function() {
                this.externalService.beShowOpenworldMap(!1), $("#edge-ui").removeClass("show-openworld-map")
            }, t.prototype.showLevelupMessages = function(e, t) {
                var i = this,
                    n = this.fromInjector("$filter")("rewardName");
                _.range(e + 1, t + 1).forEach(function(e) {
                    i.worldChatService.printSystemMessage("CHATTING_LEVELUP_COMMON", {
                        value: e
                    });
                    for (var t = 0, r = i.rewardService.getLevelReward(e); t < r.length; t++) {
                        var o = r[t],
                            a = o.type,
                            s = o.code,
                            c = o.count,
                            d = n(a, s, c),
                            l = "UNLOCK" === a ? "CHATTING_LEVELUP_UNLOCK" : "CHATTING_LEVELUP_GETITEM";
                        i.worldChatService.printSystemMessage(l, {
                            reward: d
                        })
                    }
                })
            }, t.prototype.update = function(e) {
                !this.reduxProps.mapIsOn && e.mapIsOn ? (this.showWorldMap(), this.campaignService.onOpenWorldmap()) : this.reduxProps.mapIsOn && !e.mapIsOn && this.hideWorldMap(), void 0 !== this.reduxProps.level && this.reduxProps.level !== e.level && this.showLevelupMessages(this.reduxProps.level, e.level), this.reduxProps.available !== e.available && (this.openworldService.status = e.available ? 0 : 2), e.appearanceEdit ? this.appearanceEditRenderer.render() : this.appearanceEditRenderer.unmount()
            }, t.prototype.mapStateToProps = function(e) {
                var t = e.view.flags,
                    i = t.openworldMap,
                    n = t.appearanceEdit,
                    r = e.player.level,
                    o = e.globalPanel.showGnbHub;
                return {
                    mapIsOn: i,
                    level: r,
                    available: !i && !o,
                    appearanceEdit: n
                }
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("openworldService")], d.prototype, "openworldService", void 0), n.__decorate([r.autowired("openworldCampaignService")], d.prototype, "campaignService", void 0), n.__decorate([r.autowired("globalKeyService")], d.prototype, "globalKeyService", void 0), n.__decorate([r.autowired("externalService")], d.prototype, "externalService", void 0), n.__decorate([r.autowired("stateService")], d.prototype, "stateService", void 0), n.__decorate([r.autowired("uistateNotifyService")], d.prototype, "uistateNotifyService", void 0), n.__decorate([r.autowired("worldChatService")], d.prototype, "worldChatService", void 0), n.__decorate([r.autowired("rewardService")], d.prototype, "rewardService", void 0), n.__decorate([r.autowired("$transitions")], d.prototype, "$transitions", void 0), n.__decorate([r.autowired("appearanceEditRenderer")], d.prototype, "appearanceEditRenderer", void 0), t.OpenworldMainBinder = d
}, function(e, t, i) {
    "use strict";

    function n() {
        return function(e, t) {
            e(a.openworld(!0)), e(o.hideNav("openworld"))
        }
    }

    function r() {
        return function(e, t) {
            e(a.openworld(!1)), e(a.openworldMap(!1)), e(o.showNav("openworld")), e(s.reset())
        }
    }
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var o = i(53),
        a = i(136),
        s = i(229);
    t.enterOpenworld = n, t.leaveOpenworld = r
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(111),
        a = i(110),
        s = i(1642),
        c = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.cleanUps = [], t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.topLabelBinder = this.addChildBinder(".id-topLabel", s.TopLabelBinder)
            }, t.prototype.registerEvents = function() {
                var e = this;
                this.cleanUps.push(this.externalService.on(o.CoreEvent.beStartedNavigation, function(t) {
                    log.debug("core >> beStartedNavigation", t), e.gotMissionId = t, e.gotMission()
                })), this.cleanUps.push(this.externalService.on(o.CoreEvent.beOnReadyToStartDrivingTutorial, function() {
                    log.debug("beOnReadyToStartDrivingTutorial"), e.gotoAndPlay(e.TOPMIDDLE, "in")
                })), this.cleanUps.push(this.externalService.on(o.CoreEvent.beOnStartDrivingTutorialStep, function(t) {
                    log.debug("beOnStartDrivingTutorialStep", t), e.showTimer || e.showDrivingTutorial(t)
                })), this.cleanUps.push(this.externalService.on(o.CoreEvent.beOnFinishDrivingTutorial, function() {
                    e.showTimer || e.visible(e.TOPMIDDLE, !1)
                }))
            }, t.prototype.isFinished = function(e) {
                return void 0 === e && (e = this.storeState.campaign.currentCampaignCode), e > a.TUTORIAL_GUIDE_END_CAMPAIGN
            }, t.prototype.onAddedToScene = function() {
                if (this.isFinished()) return this._tryUnsubscribe();
                this.registerEvents(), this.gotoAndPlay(this.CONTAINER, "intro"), this.visible(this.TOPMIDDLE, !1)
            }, t.prototype.onDetach = function() {
                this.clearTimers(), this.cleanUps.forEach(function(e) {
                    return e()
                })
            }, t.prototype.update = function(e) {
                var t = e.missionId,
                    i = e.missionStatus,
                    n = e.currentCampaign;
                if ((-1 !== [1, 2].indexOf(i) || 0 === i && this.gotMissionId === t) && this.clearTimers(), this.hide(), this.reduxProps.currentCampaign !== n && this.isFinished()) return this.clearTimers(), this.cleanUps.forEach(function(e) {
                    return e()
                }), this.cleanUps = [], void this._tryUnsubscribe()
            }, t.prototype.mapStateToProps = function(e) {
                return {
                    missionId: e.mission.missionId,
                    missionStatus: e.mission.status,
                    currentCampaign: e.campaign.currentCampaignCode
                }
            }, t.prototype.showDrivingTutorial = function(e) {
                var t = this,
                    i = a.DrivingTutorialStepKeyMaps[e];
                if (i) {
                    var n = "OPENWORLD_TUTORIAL_" + e;
                    this.topLabelBinder.setProps({
                        inputKey: i,
                        description: n
                    }), setTimeout(function() {
                        return t.show()
                    })
                }
            }, t.prototype.gotMission = function() {
                var e = this;
                this.topLabelBinder.setProps({
                    description: "OPENWORLD_HUD_GOTOMISSION"
                }), this.show(), this.showTimer = setTimeout(function() {
                    return e.gotMission()
                }, 2e4)
            }, t.prototype.clearTimers = function() {
                this.showTimer && (clearTimeout(this.showTimer), this.showTimer = void 0), this.hideTimer && (clearTimeout(this.hideTimer), this.hideTimer = void 0)
            }, t.prototype.show = function() {
                var e = this;
                this.clearTimers(), this.visible(this.TOPMIDDLE, !0), this.gotoAndPlay(this.TOPMIDDLE, "in"), this.hideTimer = setTimeout(function() {
                    return e.hide()
                }, 5e3)
            }, t.prototype.hide = function() {
                "in" === this.TOPMIDDLE.currentLabel && this.visible(this.TOPMIDDLE, !1)
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("externalService")], c.prototype, "externalService", void 0), n.__decorate([r.select(".CONTAINER")], c.prototype, "CONTAINER", void 0), n.__decorate([r.select(".TOPMIDDLE")], c.prototype, "TOPMIDDLE", void 0), t.HudTutorialMessageBarBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(120),
        o = i(1),
        a = i(3),
        s = i(4),
        c = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.hasSize(this.face, !0), this.hasSize(".id-mission", !0), this.hasSize(".id-description", !0), this.hasSize(".id-description .id-textField", !1), this.actionGuide = this.addChildBinder(".id-actionGuide", r.HudActionGuideBinder, {
                    inputKey: "useItem",
                    showAlways: !0
                }), this.hasSize(this.actionGuide.face, !0)
            }, t.prototype.update = function(e) {
                var t = e.inputKey,
                    i = e.description,
                    n = this.$filter("translate")(i);
                this.bindText(this.DESCRIPTION, n), this.visible(".id-mission", !t), this.visible(this.actionGuide.face, !!t), this.gotoAndStop(this.face, t ? "key" : "mission");
                var r = this.DESCRIPTION.width,
                    o = s.default.testWidth(this.DESCRIPTION, n),
                    c = (r - o) / 2;
                c <= 150 && this.face.setCustomStyle({
                    left: c + "px"
                }), t && (this.actionGuide.setProps({
                    inputKey: t,
                    showAlways: !0,
                    configuration: a.store.getState().configuration
                }), this.actionGuide.guide())
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], c.prototype, "$filter", void 0), n.__decorate([o.select(".id-description .id-textField")], c.prototype, "DESCRIPTION", void 0), t.TopLabelBinder = c
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(1),
        a = i(234),
        s = i(233),
        c = i(29),
        d = i(664),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.close = function() {
                    return t.stateService.go("^")
                }, t.changeChannel = function() {
                    if (-1 !== [2, 1].indexOf(t.storeState.mission.status)) return t.alert("HUD_OPENWORLD_CHANNELPOP_MISSION_STARTED"), r.resolve();
                    var e = Number(t.form.text);
                    return !e || e === t.channel || e > t.maxChannel ? (t.alert("HUD_OPENWORLD_CHANNELPOP_INVALID"), r.resolve()) : (t.form.disabled = !0, t.openworldService.changeChannel(e).catch(function(e) {
                        log.error("openworld-channel-popup error", e), t.alert("HUD_OPENWORLD_CHANNELPOP_MAXUSER")
                    }).finally(function() {
                        t.form.disabled = !1
                    }))
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translate(".id-titleLabel", "HUD_OPENWORLD_CHANGECHANNEL"), this.translate(".id-confirmButton .id-buttonName", "HUD_OPENWORLD_CHANNELPOP_OK"), this.translate(".id-cancelButton .id-buttonName", "HUD_OPENWORLD_CHANNELPOP_CANCEL"), this.bindText(this.warningDesc, ""), this.confirmButton.enabled = !1, this.onClickSafe(".id-confirmButton", this.changeChannel), this.onClickSafe(".id-cancelButton", this.close), this.apply(this.form, a.NumericInput, {}), this.form.maxLength = 4, $(this.form.textField.htmlElement).on("keydown", function(t) {
                    t.keyCode === c.KeyboardMap.getKeyCode("ENTER") ? e.onEnter() : t.keyCode !== c.KeyboardMap.getKeyCode("ESCAPE") && t.keyCode !== c.KeyboardMap.getKeyCode("F12") || e.close()
                }).on("keyup", function() {
                    e.confirmButton.enabled = e.form.text.length > 0
                }).on("focus", function() {
                    return e.inputService.overrideKeyboard("ow-channel")
                }).on("blur", function() {
                    return e.inputService.clearKeyboardOverride("ow-channel")
                })
            }, t.prototype.onEnter = function() {
                var e = this;
                this.confirmButton.enabled && (this.confirmButton.enabled = !1, this.changeChannel().finally(function() {
                    return e.confirmButton.enabled = !0
                }))
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this), this.channel = this.openworldService.getId(), this.maxChannel = this.openworldService.getChannelCount(), this.template(".id-descriptionLabel", "HUD_OPENWORLD_CHANNELPOP_DESC", {
                    value: this.maxChannel
                }), s.focusRepeatedly($(this.form.textField.htmlElement))
            }, t.prototype.onEscKey = function() {
                return this.close(), !1
            }, t.prototype.beforeExit = function() {
                var e = this;
                return new r(function(t) {
                    var i = e.getFace(".id-CENTERTOP");
                    e.gotoAndPlay(i, "out"), i.once("stop", t)
                })
            }, t.prototype.alert = function(e) {
                this.translate(this.warningDesc, e);
                var t = $(this.warningDesc.htmlElement);
                t.addClass("alert-color"), t.removeClass("message-alarm"), setTimeout(function() {
                    return t.addClass("message-alarm")
                })
            }, t
        }(d.OpenworldPopupBase);
    n.__decorate([o.autowired("stateService")], l.prototype, "stateService", void 0), n.__decorate([o.autowired("inputService")], l.prototype, "inputService", void 0), n.__decorate([o.select(".id-nameInput")], l.prototype, "form", void 0), n.__decorate([o.select(".id-confirmButton")], l.prototype, "confirmButton", void 0), n.__decorate([o.select(".id-nameDescription .id-textField")], l.prototype, "warningDesc", void 0), t.OpenworldChannelPopupBinder = l
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(6),
        o = i(2),
        a = i(1),
        s = i(75),
        c = i(12),
        d = i(165),
        l = i(124),
        u = i(664),
        p = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.change = function() {
                    return t.disableButtons(), c.getRecentVehicle().id === t.selected.id || -1 !== [2, 1].indexOf(t.storeState.mission.status) ? t.close() : t.playerService.changeRecentVehicle(t.selected.id).then(function() {
                        t.uistateNotifyService.setSubState(15), t.close()
                    }).catch(function(e) {
                        log.error("ow changeVehicle error", e), t.close()
                    })
                }, t.close = function() {
                    return t.playerService.markVehiclesAsChecked(), t.stateService.go("^")
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this,
                    t = this.vehicleSelectContainer.$(".id-changeButton"),
                    i = this.vehicleSelectContainer.$(".id-exitButton");
                this.translate(t, "GAMEROOM_CHANGING_VEHICLE"), this.translate(i, "COMMON_POPUP_EXIT_BUTTON_CANCEL"), this.on(t, o.MouseEventEx.CLICK, this.change), this.on(i, o.MouseEventEx.CLICK, this.close), this.filterBinder = this.addChildBinder(this.vehicleSelectContainer, l.VehicleListFilterBinder), this.vehicleListBinder = this.addChildBinder(this.vehicleSelectContainer, d.VehicleListBinder, {
                    itemCountPerPage: 15,
                    rowSize: 5,
                    title: "FREEDRIVE_CARCHANGE"
                }), this.filterBinder.setManufacturerDropUp(!1), this.filterBinder.setClassDropUp(!1), this.filterBinder.setSorterDropUp(!1), this.on(this.filterBinder.face, "filterSortChange", function(t) {
                    var i = e.applyFilter(t);
                    e.vehicleListBinder.setProps({
                        vehicles: i
                    })
                }), this.on(this.filterBinder.face, "selected", function(t) {
                    e.selected = t
                }), this.on(this.face, "stop", function() {
                    var t = "changeVehicle_in" !== e.face.currentLabel;
                    e.classNames(".VehicleTileListContainer", t ? "prevent-click" : "")
                })
            }, t.prototype.applyFilter = function(e) {
                var t = c.getOwnVehicles();
                if (e) {
                    var i = e.manufacturerCode,
                        n = e.clazz,
                        r = e.sortKey;
                    i && (t = _.filter(t, {
                        manufacturerCode: i
                    })), n && "ALL" !== n && (t = _.filter(t, (o = {}, o.clazz = n, o))), this.$util.applySorter(t, r || ["default"])
                }
                return t;
                var o
            }, t.prototype.onAddedToScene = function() {
                e.prototype.onAddedToScene.call(this), this.initVehicles(), this.gotoAndPlay(this.face, "changeVehicle_in"), this.inputService.overrideKeyboard("ow-vehicle")
            }, t.prototype.disableButtons = function() {
                this.enableButton(this.vehicleSelectContainer.$(".id-changeButton"), !1), this.enableButton(this.vehicleSelectContainer.$(".id-exitButton"), !1)
            }, t.prototype.beforeExit = function() {
                var e = this;
                return new r(function(t) {
                    e.inputService.clearKeyboardOverride("ow-vehicle"), e.disableButtons(), e.gotoAndPlay(e.face, "changeVehicle_out"), e.face.once("stop", t)
                })
            }, t.prototype.onEscKey = function() {
                return this.close(), !1
            }, t.prototype.initVehicles = function() {
                this.selected = c.getRecentVehicle();
                var e = c.getOwnVehicles(),
                    t = c.getVehicleState();
                this.bindText(this.vehicleSelectContainer.$(".id-retentionTextfield"), "" + e.length), this.vehicleListBinder.setProps({
                    selected: this.selected.id,
                    vehicles: this.applyFilter(s.defaultSortKeys)
                }), this.filterBinder.setProps(n.__assign({}, t, {
                    filterState: s.defaultSortKeys,
                    useVehicleTypes: 1
                }))
            }, t
        }(u.OpenworldPopupBase);
    n.__decorate([a.autowired("$util")], p.prototype, "$util", void 0), n.__decorate([a.autowired("playerService")], p.prototype, "playerService", void 0), n.__decorate([a.autowired("stateService")], p.prototype, "stateService", void 0), n.__decorate([a.autowired("inputService")], p.prototype, "inputService", void 0), n.__decorate([a.autowired("uistateNotifyService")], p.prototype, "uistateNotifyService", void 0), n.__decorate([a.select(".id-vehicleSelectContainer")], p.prototype, "vehicleSelectContainer", void 0), t.OpenworldChangeVehicleBinder = p
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = i(9),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.initBar = function() {
                for (var e = this.getFace(".CONTAINER .CENTERMIDDLE"), t = [e.$(".id-messageBar0"), e.$(".id-messageBar1"), e.$(".id-messageBar2"), e.$(".id-messageBar3")], i = 0, n = t; i < n.length; i++) {
                    n[i].visible = !1
                }
                return t[0]
            }, t.prototype.onAddedToScene = function() {
                var e = this,
                    t = this.initBar();
                this.addManagedListener(this.externalService, a.CoreEvent.beUnlockOpenworldPortal, function(i) {
                    var n = e.fromInjector("$filter")("translate"),
                        r = n("HUD_OPENWORLD_NEWPORTAL");
                    e.bindHtml(t.$(".id-MESSAGELABEL_CONTAINER .id-messageLabel"), r), e.display(t, 5), e.missionService.onUnlockPortal(i)
                }), this.addManagedListener(this.driveMileageService, "updateMileage", function(i) {
                    var n = e.fromInjector("$filter")("template"),
                        r = n({
                            km: o.default.toMoney(Math.floor(i / 1e3)),
                            sp: o.default.toMoney(12500),
                            exp: 900
                        }, "OPENWORLD_KM_MSG_DESC");
                    e.bindHtml(t.$(".id-MESSAGELABEL_CONTAINER .id-messageLabel"), r), e.display(t, 3)
                })
            }, t.prototype.display = function(e, t) {
                e.killCustomTweens(), e.visible = !0, e.alpha = 1, this.gotoAndPlay(e, "INIT"), e.addCustomToTween(.4, {
                    flash: {
                        alpha: 0
                    },
                    delay: t,
                    onComplete: function() {
                        return e.visible = !1
                    }
                })
            }, t
        }(r.StageBinder);
    n.__decorate([r.autowired("externalService")], s.prototype, "externalService", void 0), n.__decorate([r.autowired("openworldMissionService")], s.prototype, "missionService", void 0), n.__decorate([r.autowired("openworldDriveMileageService")], s.prototype, "driveMileageService", void 0), t.MessageBarBinder = s
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(5),
        o = i(1),
        a = i(118),
        s = i(111),
        c = i(663),
        d = i(27),
        l = i(662),
        u = i(332),
        p = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.translate(".id-titleLabel", "OPENWORLD_WORLDMAP_SPECIALMISSION_STATUS"), this.classNames(this.face, "rightsideReviseCoordinateOfScreenRatio")
            }, t.prototype.bindRemainTime = function() {
                var e = this.props.limitedMission.resetDate,
                    t = this.serverTimeService.getRemainingDuration(e);
                t < r.duration(1, "hours") ? this.translate(".id-descriptionLabel", "OPENWORLD_WORLDMAP_SPECIALMISSION_RESETTIME_2") : this.template(".id-descriptionLabel", "OPENWORLD_WORLDMAP_SPECIALMISSION_RESETTIME_1", {
                    hours: Math.floor(t.asHours())
                })
            }, t.prototype.onShow = function() {
                this.bindProps(), this.shown = !0
            }, t.prototype.onHide = function() {
                this.stopRefreshing(), this.shown = !1
            }, t.prototype.scheduleRefresh = function() {
                var e = this;
                this.timer && clearTimeout(this.timer);
                var t = this.props.limitedMission.resetDate;
                if (!(this.serverTimeService.getRemainingDuration(t) < r.duration(1, "hours"))) {
                    var i = r(),
                        n = i.clone().startOf("hour").add(1, "h").add(1, "s");
                    this.timer = setTimeout(function() {
                        e.timer = void 0, e.bindRemainTime(), e.scheduleRefresh()
                    }, n.diff(i))
                }
            }, t.prototype.stopRefreshing = function() {
                this.timer && clearTimeout(this.timer), this.timer = void 0
            }, t.prototype.onDetach = function() {
                this.stopRefreshing()
            }, t.prototype.update = function(e) {
                var t = this.prevInfo;
                this.prevInfo = e.limitedMission, t && this.shown && +t.resetDate != +e.limitedMission.resetDate && this.bindProps()
            }, t.prototype.bindProps = function() {
                var e = this.props.limitedMission.progress,
                    t = this.storeState.mission.unlockedMissions,
                    i = _.filter(e, function(e) {
                        return _.includes(t, e.code)
                    }),
                    n = _.filter(i, function(e) {
                        return e.currentCount < e.limitCount
                    }).length;
                if (this.visible(this.face, !!n), n) {
                    var r = _.keys(i).length;
                    this.bindText(".id-totalLabel", r), this.bindText(".id-countLabel", n), this.bindRemainTime(), this.scheduleRefresh()
                }
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("serverTimeService")], p.prototype, "serverTimeService", void 0);
    var h = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.card = this.addChildBinder(".id-itemCardSmall", d.ItemCardBinder), this.rewards = this.addChildBinder(".id-itemName", u.RewardInfoContainer), this.gotoAndStop(".id-medalIconMC", "gold")
            }, t.prototype.update = function(e) {
                var t = e.type,
                    i = e.rewards;
                this.card.setProps({
                    info: _.first(i),
                    mouseDisabled: !0
                }), this.rewards.setProps({
                    info: i
                }), this.gotoAndStop(".id-itemMarkContainer", t)
            }, t
        }(o.Binder),
        f = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.showMissionInfo = function(e, i, n, r) {
                    if (!e) return t.gotoAndPlay(t.face, "out", !0);
                    t.gotoAndPlay(t.face, "in", !0), t.adjustPosition(n, r), t.boundCode !== i && t.bindMission(i), t.boundCode = i;
                    var o = t.props.limitedMission.progress;
                    t.limitedInfo.setProps({
                        info: o[i]
                    })
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.limitedInfo = this.addChildBinder(".id-limitedinfoContainer", c.LimitedInfoBinder), this.rewardLeft = this.addChildBinder(".id-rewardLeft", h), this.rewardRight = this.addChildBinder(".id-rewardRight", h)
            }, t.prototype.onAddedToScene = function() {
                this.hasSize(this.face, !0), this.hasSize(this.description, !0), this.hasSize(this.description.$(".id-textField"), !1), this.hasSize(this.description.$(".IconMC"), !0)
            }, t.prototype.adjustPosition = function(e, t) {
                var i = this.graphicConfigService.scaleRatio,
                    n = window.innerWidth / i,
                    r = e / i,
                    o = t / i,
                    a = this.face,
                    s = a.width,
                    c = a.height,
                    d = s / 2,
                    l = o - c - 50,
                    u = r - d;
                l < 0 && (l = Math.min(o + 50, 1080 - c)), u + s > n ? u = n - s : u < 0 && (u = 0), this.face.x = Math.floor(u), this.face.y = Math.floor(l)
            }, t.prototype.bindMission = function(e) {
                var t = this.missionService.getMission(e),
                    i = this.missionService.getReward(t, "gold"),
                    n = Boolean(i.limited),
                    r = a.GameMode[t.gamemode.toUpperCase()];
                this.gotoAndPlay(".id-rewardItemContainer", n ? "limited" : "multi"), n ? (this.rewardLeft.setProps({
                    type: "limited",
                    rewards: i.limited
                }), this.rewardRight.setProps({
                    type: "medal",
                    rewards: i.default
                })) : this.rewardLeft.setProps({
                    type: "multi",
                    rewards: i.default
                });
                var o = r === a.GameMode.MULTIRACE ? "multi" : "single";
                this.gotoAndStopAll(".id-titleLabelContainer, .id-descriptionContainer, .id-backgroundBar", o), this.gotoAndStop(this.description.$(".IconMC"), o + "Icon");
                var s = l.getMissionLabels(this.$filter, t, r),
                    c = s.missionName,
                    d = s.mode;
                this.bindText(this.title, c), this.bindHtml(this.description, d)
            }, t.prototype.onDetach = function() {
                this.onHide()
            }, t.prototype.onShow = function() {
                this.onHide(), this.unregister = this.externalService.on(s.CoreEvent.beShowMissionInfo, this.showMissionInfo)
            }, t.prototype.onHide = function() {
                this.unregister && this.unregister(), this.unregister = void 0, "in" === this.face.currentLabel && this.gotoAndPlay(this.face, "out")
            }, t
        }(o.Binder);
    n.__decorate([o.autowired("$filter")], f.prototype, "$filter", void 0), n.__decorate([o.autowired("externalService")], f.prototype, "externalService", void 0), n.__decorate([o.autowired("openworldMissionService")], f.prototype, "missionService", void 0), n.__decorate([o.autowired("graphicConfigService")], f.prototype, "graphicConfigService", void 0), n.__decorate([o.select(".id-titleLabel")], f.prototype, "title", void 0), n.__decorate([o.select(".id-descriptionLabel")], f.prototype, "description", void 0);
    var v = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function() {
            this.limitedInfo = this.addChildBinder(".id-limitedhudContainer", p), this.modeInfo = this.addChildBinder(".id-gamemodeContainer", f)
        }, t.prototype.showMapInfo = function() {
            this.gotoAndPlay(this.container, "intro"), this.limitedInfo.onShow(), this.modeInfo.onShow()
        }, t.prototype.hidMapInfo = function() {
            this.gotoAndPlay(this.container, "outro"), this.limitedInfo.onHide(), this.modeInfo.onHide()
        }, t.prototype.update = function(e) {
            this.reduxProps.mapIsOn !== e.mapIsOn && (e.mapIsOn ? this.showMapInfo() : this.hidMapInfo()), this.reduxProps.limitedMission !== e.limitedMission && (this.limitedInfo.setProps(e), this.modeInfo.setProps(e))
        }, t.prototype.mapStateToProps = function(e) {
            return {
                mapIsOn: e.view.flags.openworldMap,
                limitedMission: e.mission.limitedMission
            }
        }, t
    }(o.StageBinder);
    n.__decorate([o.select(".CONTAINER")], v.prototype, "container", void 0), t.MapBinder = v
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(76),
        r = i(11),
        o = i(1648);
    angular.module("edge.app").config(["stateServiceProvider", function(e) {
        var t = new r.StateDefinition("/campaign", 87).dialog({
            stages: {
                "openworld-campaign-main": {
                    stageBinder: o.CampaignMainBinder,
                    customComponents: {
                        PieMask: n.default
                    }
                }
            }
        });
        e.state("root.menu.Openworld.Campaign", t)
    }])
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(1),
        a = i(1649),
        s = i(2),
        c = i(1650),
        d = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                this.campaignBody = this.addChildBinder(".id-campaignInfoBody1", c.CampaignInfoBody), this.campaignBody2 = this.addChildBinder(".id-campaignInfoBody2", c.CampaignInfoBody), this.progressStatusBinder = this.addChildBinder(".id-allCampaignProgressive", a.ProgressStatusBinder), this.translate(".id-campaignTitle", "OPENWORLD_CAMPAIGN_TITLEBAR"), this.translateAll(".id-close", "GAMEOPTION_CONFIRM"), this.translateAll(".id-bottomDescription", "OPENWORLD_CAMPAIGN_INFO_START"), this.setEventHandler()
            }, t.prototype.setEventHandler = function() {
                var e = this;
                this.onAll(".id-close", s.MouseEventEx.CLICK, function() {
                    e.stateService.go("^"), setTimeout(function() {
                        e.gotoAndPlay(e.face, "out")
                    })
                }), this.onClickSafe(this.campaignBody.face.$(".ButtonContainer .GreenButton"), function(t) {
                    var i = e.storeState.campaign.currentCampaignCode;
                    return e.openworldCampaignService.completeCampaign().then(function(t) {
                        return new Promise(function(n) {
                            e.popupService.draw("OpenWorldCampaignRewardConfirmPopup", {
                                confirm: n,
                                rewards: t.rewards,
                                campaignCode: i
                            })
                        }).then(function() {
                            e.storeState.campaign.status === r.Openworld.CampaignStatus.Completed ? e.stateService.go("^") : e.changeNextCampaign()
                        })
                    })
                })
            }, t.prototype.changeNextCampaign = function() {
                var e = this.storeState.campaign,
                    t = e.currentCampaignCode,
                    i = e.status;
                this.enableButtonAll(".ButtonContainer .GreenButton", !1), this.campaignBody2.setProps({
                    campaignCode: t,
                    status: i
                }), this.campaignContainer.gotoAndPlay("swap")
            }, t.prototype.update = function(e) {
                this.reduxProps.currentCampaignCode !== e.currentCampaignCode || this.reduxProps.status !== e.status ? this.progressStatusBinder.setProps(e) : this.reduxProps.currentTaskProgress !== e.currentTaskProgress && this.campaignBody.setProps({
                    campaignCode: e.currentCampaignCode,
                    status: e.status
                })
            }, t.prototype.mapStateToProps = function(e) {
                return e.campaign
            }, t.prototype.onAddedToScene = function(e) {
                this.campaignBody.setProps({
                    campaignCode: e.currentCampaignCode,
                    status: e.status
                }), this.gotoAndPlay(this.face, "in")
            }, t.prototype.onDetach = function() {
                log.info("detach!")
            }, t
        }(o.StageBinder);
    n.__decorate([o.autowired("stateService")], d.prototype, "stateService", void 0), n.__decorate([o.autowired("openworldCampaignService")], d.prototype, "openworldCampaignService", void 0), n.__decorate([o.autowired("popupService")], d.prototype, "popupService", void 0), n.__decorate([o.select(".id-campaignContainer")], d.prototype, "campaignContainer", void 0), t.CampaignMainBinder = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(15),
        o = i(46),
        a = i(1),
        s = i(13),
        c = i(2),
        d = i(27),
        l = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.showSpotTooltip = function(e, i, n) {
                    t.tooltipService.show(e, "top", s.TooltipType.CampaignReward, {
                        code: i,
                        rewards: n
                    }, {
                        marginTop: -23
                    })
                }, t.hideSpotTooltip = function() {
                    t.tooltipService.hide()
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.openworldCampaigns = this.openworldCampaignService.getCampaigns();
                var t = this.storeState.campaign.currentCampaignCode;
                this.totalCampaignCount = this.openworldCampaigns.length, this.spotCampaigns = _.filter(this.openworldCampaigns, function(e) {
                    return e.spot && t <= e.code
                }), this.updateNextSpotCampaign(t), this.progressBar = this.addChildBinder(".id-progress", o.ProgressBinder, {
                    duration: 1,
                    outDuration: .5
                });
                var i = _.last(this.openworldCampaigns),
                    n = this.getFirstRewardItemByCode(i.code);
                this.addChildBinder(".id-vehicleInfoContainer", h, {
                    vehicle: this.vehicleDataService.createRefinedVehicle(n.code)
                }), this.spotCampaignListBinder = this.addChildBinder(".id-SpotButton", a.CollectionBinder, {
                    instanceBinder: u,
                    keyProperty: "code"
                }), this.spotCampaignListBinder.applyCollection(this.spotCampaigns.map(function(i) {
                    return {
                        code: i.code,
                        currentCampaignCode: t,
                        onMouseOver: e.showSpotTooltip,
                        onMouseOut: e.hideSpotTooltip,
                        campaignDatas: e.openworldCampaigns
                    }
                })), this.initSpotButtonWidth(), this.initOffsetCalculator(), this.initSpotCampaignBinders(), this.rewardSpotIndicatorBinder = this.addChildBinder(".id-nextRewardInfo", p, {
                    code: this.nextSpotCampaignCode,
                    offsetCalc: _.partial(this.calculateOffsetByCode, this.nextSpotCampaignCode, !0),
                    item: this.getFirstRewardItemByCode(this.nextSpotCampaignCode)
                })
            }, t.prototype.getFirstRewardItemByCode = function(e) {
                var t = _.find(this.openworldCampaigns, {
                    code: e
                });
                if (t) return t.rewards[0]
            }, t.prototype.initSpotCampaignBinders = function() {
                for (var e = 0, t = this.spotCampaignListBinder.binders; e < t.length; e++) {
                    t[e].initOffset(this.calculateOffsetByCode)
                }
            }, t.prototype.initOffsetCalculator = function() {
                var e = this;
                this.calculateOffsetByCode = function(t, i) {
                    return e.progressBar.face.width / e.totalCampaignCount * t - (i ? e.spotButtonWidth / 2 : e.spotButtonWidth)
                }
            }, t.prototype.initSpotButtonWidth = function() {
                var e = this.spotCampaignListBinder.binders;
                e.length && (this.spotButtonWidth = e[0].face.width)
            }, t.prototype.updateNextSpotCampaign = function(e) {
                var t = _.find(this.spotCampaigns, function(t) {
                    return e <= t.code
                });
                t ? (log.debug("update next spot campaign: " + t.code), this.nextSpotCampaignCode = t.code) : (log.debug("[Campaign] there is no spot campaigns left"), this.nextSpotCampaignCode = 0)
            }, t.prototype.updateNextSpotRewardPosition = function() {
                this.rewardSpotIndicatorBinder.setProps({
                    code: this.nextSpotCampaignCode,
                    offsetCalc: _.partial(this.calculateOffsetByCode, this.nextSpotCampaignCode, !0),
                    item: this.getFirstRewardItemByCode(this.nextSpotCampaignCode)
                })
            }, t.prototype.updateProgressBar = function(e) {
                var t = e.status,
                    i = e.currentCampaignCode,
                    n = t === r.Openworld.CampaignStatus.Completed ? 100 : (i - 1) / this.totalCampaignCount * 100;
                this.progressBar.value = n, this.translate(".id-numLabel", Math.floor(n) + "%")
            }, t.prototype.onAddedToScene = function() {
                this.translate(this.face.$(".id-titleLabel"), "OPENWORLD_CAMPAIGN_PROGRESS_TITLE"), this.translate(this.face.$(".id-rewardLabel > .id-rewardLabel"), "OPENWORLD_CAMPAIGN_PROGRESS_REWARDINFO")
            }, t.prototype.update = function(e) {
                this.updateNextSpotCampaign(e.currentCampaignCode), this.updateNextSpotRewardPosition(), this.updateProgressBar(e)
            }, t
        }(a.Binder);
    n.__decorate([a.autowired("tooltipService")], l.prototype, "tooltipService", void 0), n.__decorate([a.autowired("openworldCampaignService")], l.prototype, "openworldCampaignService", void 0), n.__decorate([a.autowired("vehicleDataService")], l.prototype, "vehicleDataService", void 0), t.ProgressStatusBinder = l;
    var u = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            var t = e.code,
                i = (e.currentCampaignCode, e.onMouseOver),
                n = e.onMouseOut,
                r = e.campaignDatas;
            if (e.code < e.currentCampaignCode) return void this.visible(this.face, !1);
            this.face.hasSize = !0, this.bindText(this.face, t);
            var o = this.fromInjector("$filter"),
                a = o("vehicleName"),
                s = o("itemName"),
                d = _.find(r, {
                    code: t
                }),
                l = d.rewards.map(function(e) {
                    var t = "VEHICLE" === e.type ? a(e.code) : s(e.code);
                    return e.count > 1 ? t + " X" + e.count : t
                });
            this.on(this.face, c.MouseEventEx.MOUSE_OVER, function(e) {
                return i(e, t, l)
            }), this.on(this.face, c.MouseEventEx.MOUSE_OUT, n)
        }, t.prototype.initOffset = function(e) {
            this.face.xOffset = e(this.props.code)
        }, t
    }(a.Binder);
    t.SpotCampaignBinder = u;
    var p = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            var t = e.code,
                i = e.offsetCalc,
                n = e.item;
            if (!t) return this.visible(this.face, !1);
            this.face.hasSize = !0, this.face.xOffset = i(), this.itemCardBinder = this.addChildBinder(".ItemCardSmall", d.ItemCardBinder, {
                info: n,
                mouseDisabled: !0
            })
        }, t.prototype.update = function(e) {
            var t = e.code,
                i = e.offsetCalc,
                n = e.item;
            if (!t) return this.visible(this.face, !1);
            this.face.xOffset = i(), this.itemCardBinder.setProps({
                info: n,
                mouseDisabled: !0
            })
        }, t
    }(a.Binder);
    t.RewardSpotIndicatorBinder = p;
    var h = function(e) {
        function t() {
            return null !== e && e.apply(this, arguments) || this
        }
        return n.__extends(t, e), t.prototype.onFaceReady = function(e) {
            this.face.hasSize = !0;
            var t = e.vehicle;
            this.bindText(".id-ovr", t.ovr.toString()), this.bindText(".id-vehicleClass", t.clazz), this.gotoAndStop(".id-vehicleGrade", "grade1"), this.bindText(".id-manufacturerName", this.$filter("manufacturerName")(t.manufacturerCode)), this.bindText(".id-vehicleName", this.$filter("vehicleName")(t.code)), this.drawExternalImage(".id-externalImage", this.$filter("cdn_beautyshot")(t.code))
        }, t
    }(a.Binder);
    n.__decorate([a.autowired("$filter")], h.prototype, "$filter", void 0), t.FinalRewardBinder = h
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(15),
        a = i(1651),
        s = i(27),
        c = i(13),
        d = function(e) {
            function t() {
                var t = null !== e && e.apply(this, arguments) || this;
                return t.onMouseOverReward = function(e, i) {
                    t.tooltipService.show(e, "top", c.TooltipType.ItemCard, i, {
                        marginTop: -4
                    })
                }, t.onMouseOutReward = function() {
                    t.tooltipService.hide()
                }, t
            }
            return n.__extends(t, e), t.prototype.onFaceReady = function() {
                var e = this;
                this.translateAll(".id-missionListItemRenderer .id-titleLabel", "OPENWORLD_CAMPAIGN_TASKINFO_TITLE"), this.translateAll(".ButtonContainer .BlueButton", "OPENWORLD_CAMPAIGN_CAMPAIGNBTN_START"), this.translateAll(".ButtonContainer .GreenButton", "OPENWORLD_CAMPAIGN_CAMPAIGNBTN_WORKON"), this.translateAll(".MissionRewardContainer .id-titleLabel", "OPENWORLD_CAMPAIGN_TASKPROGRESS_TITLE"), this.translateAll(".MissionRewardContainer .id-activeNum .id-statusLabel", "OPENWORLD_CAMPAIGN_TASKPROGRESS_WORKON"), this.translateAll(".MissionRewardContainer .id-defaultNum .id-statusLabel", "OPENWORLD_CAMPAIGN_TASKPROGRESS_START"), this.taskListBinder = this.addChildBinder(".id-missionListItemRenderer .ListItem", r.CollectionBinder, {
                    instanceBinder: a.TaskItemBinder,
                    keyProperty: "code"
                }), this.rewardListBinders = this.face.$$(".id-rewardInfoContainer .ItemCardSmall").map(function(t) {
                    return e.addChildBinder(t, s.ItemCardBinder)
                })
            }, t.prototype.update = function(e) {
                var t = e.campaignCode,
                    i = e.status,
                    n = this.openworldCampaignService.isCampaignAchivement(),
                    r = function() {
                        return i === o.Openworld.CampaignStatus.NotStarted ? "OPENWORLD_CAMPAIGN_INFO_START" : i === o.Openworld.CampaignStatus.InProgress ? n ? "OPENWORLD_CAMPAIGN_INFO_DONE" : "OPENWORLD_CAMPAIGN_INFO_WORKON" : i === o.Openworld.CampaignStatus.Completed ? "" : void 0
                    }();
                this.translate(this.buttomDesc, r);
                var a = this.openworldCampaignService.getAchivementTasks(),
                    s = this.openworldCampaignService.getCampaign(t);
                this.bindText(this.face.$("> .id-numLabel"), s.code), this.translate(this.face.$(".id-subTitleLabel"), "OPENWORLD_CAMPAIGN_TITLE_CHAPTERTITLE_" + s.chapter), this.translate(this.face.$(".id-titleLabel"), "OPENWORLD_CAMPAIGN_TITLE_TITLE_" + s.code), this.bindTextAll(this.face.$(".MissionRewardContainer .id-maxNum"), s.tasks.length), this.bindText(this.face.$(".MissionRewardContainer .id-defaultNum"), a.length), this.bindText(this.face.$(".MissionRewardContainer .id-activeNum .id-numLabel"), a.length);
                var c = a.length / s.tasks.length;
                this.face.$(".id-gaugeCircle .GaugeCircleMask").ratio = c, this.taskListBinder.applyCollection(this.openworldCampaignService.getCurrentTaskList()), this.setRewardInfo(t);
                var d = i === o.Openworld.CampaignStatus.InProgress;
                this.gotoAndStop(this.rewardContainer, c > 0 ? "active" : "default"), this.gotoAndStop(this.buttonContainer, d ? "reward" : "confirm"), this.translate(this.rewardContainer.$(".id-activeNum .id-statusLabel"), c >= 1 ? "OPENWORLD_CAMPAIGN_TASKPROGRESS_DONE" : "OPENWORLD_CAMPAIGN_TASKPROGRESS_WORKON"), this.enableButton(this.buttonContainer.$(".GreenButton"), c >= 1)
            }, t.prototype.setRewardInfo = function(e) {
                var t = this,
                    i = this.openworldCampaignService.getCampaign(e);
                this.rewardListBinders.forEach(function(e, n) {
                    var r = i.rewards[n];
                    if (!r) return e.face.visible = !1;
                    e.setProps({
                        info: r,
                        mouseDisabled: !1,
                        onMouseOver: t.onMouseOverReward,
                        onMouseOut: t.onMouseOutReward
                    })
                })
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("openworldCampaignService")], d.prototype, "openworldCampaignService", void 0), n.__decorate([r.autowired("tooltipService")], d.prototype, "tooltipService", void 0), n.__decorate([r.select(".MissionRewardContainer")], d.prototype, "rewardContainer", void 0), n.__decorate([r.select(".ButtonContainer")], d.prototype, "buttonContainer", void 0), n.__decorate([r.select(".id-bottomDescription .id-descriptionLabel")], d.prototype, "buttomDesc", void 0), t.CampaignInfoBody = d
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(1),
        o = i(4),
        a = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.update = function(e) {
                this.face.hasSize = !0;
                var t = e.code,
                    i = e.progress,
                    n = e.goal,
                    r = this.$filter("template")({
                        current: Math.floor(i),
                        max: n
                    }, "OPENWORLD_CAMPAIGN_TASKINFO_INFO_" + t),
                    a = i >= n;
                this.bindHtmlAll(".id-descriptionNormal, .id-descriptionComplete, .id-conditionDetailNormal, .id-conditionDetailComplete", a ? o.default.stripHtml(r) : r), this.gotoAndStop(this.face, a ? "complete" : "normal")
            }, t
        }(r.Binder);
    n.__decorate([r.autowired("$filter")], a.prototype, "$filter", void 0), t.TaskItemBinder = a
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = i(3),
        a = i(1653),
        s = function(e) {
            function t() {
                return null !== e && e.apply(this, arguments) || this
            }
            return n.__extends(t, e), t.prototype.render = function() {
                var e = {
                    injections: this.injections,
                    customColor: !1,
                    customClearCoat: !1,
                    customSmoothness: !1,
                    customMetallic: !1
                };
                this.renderWithProvider(r.createElement(a.AppearanceEdit, e), document.querySelector("#edge-top"))
            }, t
        }(o.ReactRenderer);
    s.$inject = ["$filter", "externalService"], t.default = s, o.service("appearanceEditRenderer", s)
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(0),
        r = i(14),
        o = function(e) {
            function t(t) {
                var i = e.call(this, t) || this;
                return i.state = {
                    customColor: !1,
                    customClearCoat: !1,
                    customSmoothness: !1,
                    customMetallic: !1,
                    colorFacingX: 255,
                    colorFacingY: 255,
                    colorFacingZ: 255,
                    colorGrazingX: 255,
                    colorGrazingY: 255,
                    colorGrazingZ: 255,
                    clearCoat: .8,
                    smoothness: .4,
                    metallic: .1
                }, i.onApply = i.onApply.bind(i), i.updateCustomColor = i.updateCustomColor.bind(i), i.updateCustomClearcoat = i.updateCustomClearcoat.bind(i), i.updateCustomSmoothness = i.updateCustomSmoothness.bind(i), i.updateCustomMetallic = i.updateCustomMetallic.bind(i), i.updateCustomClearcoatValue = i.updateCustomClearcoatValue.bind(i), i.updateCustomSmoothnessValue = i.updateCustomSmoothnessValue.bind(i), i.updateCustomMetallicValue = i.updateCustomMetallicValue.bind(i), i.updateCustomFacingColorValue = i.updateCustomFacingColorValue.bind(i), i.updateCustomGrazingColorValue = i.updateCustomGrazingColorValue.bind(i), i.externalService = t.injections && t.injections.externalService, i.keyboardEnabled = !1, i.onEnableKeyboard = i.onEnableKeyboard.bind(i), i
            }
            return n.__extends(t, e), t.prototype.componentWillReceiveProps = function(e) {
                var t = {
                    customColor: e.customColor,
                    customClearCoat: e.customColor,
                    customSmoothness: e.customSmoothness,
                    customMetallic: e.customMetallic,
                    colorFacingX: e.colorFacingX || 0,
                    colorFacingY: e.colorFacingY || 0,
                    colorFacingZ: e.colorFacingZ || 0,
                    colorGrazingX: e.colorGrazingX || 0,
                    colorGrazingY: e.colorGrazingY || 0,
                    colorGrazingZ: e.colorGrazingZ || 0,
                    clearCoat: e.clearCoat || 0,
                    smoothness: e.smoothness || 0,
                    metallic: e.metallic || 0
                };
                this.setState(t)
            }, t.prototype.componentWillUnmount = function() {
                console.log("component will unmount")
            }, t.prototype.componentDidUnmount = function(e, t, i) {
                console.log("component did unmount")
            }, t.prototype.hexToRgb = function(e) {
                var t = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
                e = e.replace(t, function(e, t, i, n) {
                    return t + t + i + i + n + n
                });
                var i = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);
                return i ? {
                    r: parseInt(i[1], 16),
                    g: parseInt(i[2], 16),
                    b: parseInt(i[3], 16)
                } : null
            }, t.prototype.onApply = function() {
                this.externalService && this.externalService.beSetAppearanceEditing(this.state)
            }, t.prototype.updateCustomColor = function(e) {
                this.setState({
                    customColor: e.target.checked
                })
            }, t.prototype.updateCustomFacingColorValue = function(e) {
                var t = this.hexToRgb(e.target.value);
                this.setState({
                    colorFacingX: t.r,
                    colorFacingY: t.g,
                    colorFacingZ: t.b
                })
            }, t.prototype.updateCustomGrazingColorValue = function(e) {
                var t = this.hexToRgb(e.target.value);
                this.setState({
                    colorGrazingX: t.r,
                    colorGrazingY: t.g,
                    colorGrazingZ: t.b
                })
            }, t.prototype.updateCustomClearcoat = function(e) {
                this.setState({
                    customClearCoat: e.target.checked
                })
            }, t.prototype.updateCustomClearcoatValue = function(e) {
                this.setState({
                    clearCoat: parseFloat(e.target.value)
                })
            }, t.prototype.updateCustomSmoothness = function(e) {
                this.setState({
                    customSmoothness: e.target.checked
                })
            }, t.prototype.updateCustomSmoothnessValue = function(e) {
                this.setState({
                    smoothness: parseFloat(e.target.value)
                })
            }, t.prototype.updateCustomMetallic = function(e) {
                this.setState({
                    customMetallic: e.target.checked
                })
            }, t.prototype.updateCustomMetallicValue = function(e) {
                this.setState({
                    metallic: parseFloat(e.target.value)
                })
            }, t.prototype.onEnableKeyboard = function() {
                this.keyboardEnabled = !this.keyboardEnabled, this.externalService.beSetKeyboardEnabled(this.keyboardEnabled)
            }, t.prototype.render = function() {
                return r.createElement("div", {
                    className: "appearance-edit twbs clickable"
                }, r.createElement("table", {
                    className: "table ng-scope"
                }, r.createElement("tbody", null, r.createElement("tr", null, r.createElement("td", null, "Color"), r.createElement("td", null, r.createElement("label", null, "enable "), r.createElement("input", {
                    type: "checkbox",
                    id: "input-custom-color-enable",
                    onChange: this.updateCustomColor
                }), r.createElement("br", null), r.createElement("label", null, "Facing color"), r.createElement("input", {
                    type: "color",
                    id: "input-custom-color-facing-color",
                    onChange: this.updateCustomFacingColorValue
                }), r.createElement("br", null), r.createElement("label", null, "Grazing color"), r.createElement("input", {
                    type: "color",
                    id: "input-custom-color-grazing-color",
                    onChange: this.updateCustomGrazingColorValue
                }))), r.createElement("tr", null, r.createElement("td", null, "Clearcoat"), r.createElement("td", null, r.createElement("label", null, "enable "), r.createElement("input", {
                    type: "checkbox",
                    id: "input-custom-clearcoat-enable",
                    onChange: this.updateCustomClearcoat
                }), r.createElement("label", null, " value"), r.createElement("input", {
                    type: "number",
                    id: "input-custom-clearcoat-value",
                    onChange: this.updateCustomClearcoatValue
                }))), r.createElement("tr", null, r.createElement("td", null, "Smoothness"), r.createElement("td", null, r.createElement("label", null, "enable "), r.createElement("input", {
                    type: "checkbox",
                    id: "input-custom-smoothness-enable",
                    onChange: this.updateCustomSmoothness
                }), r.createElement("label", null, " value"), r.createElement("input", {
                    type: "number",
                    id: "input-custom-smoothness-value",
                    onChange: this.updateCustomSmoothnessValue
                }))), r.createElement("tr", null, r.createElement("td", null, "Metallic"), r.createElement("td", null, r.createElement("label", null, "enable "), r.createElement("input", {
                    type: "checkbox",
                    id: "input-custom-metallic-enable",
                    onChange: this.updateCustomMetallic
                }), r.createElement("label", null, " value"), r.createElement("input", {
                    type: "number",
                    id: "input-custom-metallic-value",
                    onChange: this.updateCustomMetallicValue
                }))), r.createElement("tr", null, r.createElement("td", null, r.createElement("a", {
                    className: "twbs btn btn-primary",
                    id: "button-appearance-edit-apply",
                    onClick: this.onApply
                }, "Apply"), r.createElement("a", {
                    className: "twbs btn btn-primary",
                    id: "button-appearance-edit-apply",
                    onClick: this.onEnableKeyboard
                }, "Toggle Input"))))))
            }, t
        }(r.Component);
    t.AppearanceEdit = o
}, function(e, t, i) {
    "use strict";
    Object.defineProperty(t, "__esModule", {
        value: !0
    });
    var n = i(22),
        r = i(7),
        o = i(35),
        a = i(6),
        s = i(202),
        c = i(383),
        d = i(10),
        l = i(287),
        u = i(542),
        p = s.module("edge.app");
    p.config(["$urlRouterProvider", function(e) {
        e.when("", "/"), e.otherwise("/")
    }]), p.factory("authTokenInterceptor", ["$q", "$window", "sessionService", function(e, t, i) {
        return {
            request: function(e) {
                return i.token && (e.headers.Authorization = "Bearer " + i.token, d.requestConfig.authorization = "Bearer " + i.token), e
            },
            response: function(t) {
                return t || e.when(t)
            }
        }
    }]), p.factory("customInterpolation", ["$interpolate", "$translateSanitization", function(e, t) {
        var i;
        return {
            setLocale: function(e) {
                i = e
            },
            getInterpolationIdentifier: function() {
                return "custom"
            },
            interpolate: function(i, n) {
                var r = n && n.s;
                n = n || {}, n = t.sanitize(n, "params", r);
                var o = e(i)(n);
                return o = t.sanitize(o, "text", r)
            }
        }
    }]), p.config(["$translateProvider", "$translateSanitizationProvider", function(e, t) {
        e.useInterpolation("customInterpolation"), t.addStrategy("unescape", function(e, t) {
            return e
        }).useStrategy("unescape"), e.useLoader("translateTableLoader", {}).registerAvailableLanguageKeys(["en", "ko", "cn"], {
            en_US: "en",
            "en-us": "en",
            en_UK: "en",
            "en-uk": "en",
            "ko-kr": "ko",
            ko_KR: "ko",
            zh_CN: "cn",
            "zh-cn": "cn"
        })
    }]), p.run(["stateService", function(e) {
        $("body").on("keydown", function(t) {
            if (e.isTransitionStarted) return void t.preventDefault();
            var i = t.target;
            if (8 === t.keyCode && !i.isContentEditable) {
                var n = i.tagName,
                    r = i.type,
                    o = !1;
                o = !(/textarea/i.test(n) || /input/i.test(n) && !/button|checkbox|color|file|image|radio|range|reset|submit/i.test(r)) || (i.readOnly || i.disabled), o && t.preventDefault()
            }
        })
    }]), p.factory("translateTableLoader", ["configLoader", function(e) {
        return function(t) {
            return e.getLangData(t.key)
        }
    }]), p.factory("$errorHistory", function() {
        var e = [];
        return {
            push: function(t) {
                e.length >= 50 && n.pullAt(e, 0), e.push(t)
            },
            get: function() {
                return e
            }
        }
    }), p.factory("$exceptionHandler", ["$injector", function(e) {
        return function(t, i, o) {
            var a = n.isError(t) ? t : new Error(t),
                s = e.get("externalService");
            e.get("exceptionHandleService").catchScreenError(a, o), !s.isEdgeBrowser() && !n.find(l.IgnoreErrorsForSentry, function(e) {
                return a.message.indexOf(e) > -1
            }) && r.error(a)
        }
    }]), p.run(["$q", "$transitions", "sharedComponentLoaded", "staticdataLoaderService", function(e, t, i, n) {
        var r = e.all([i, n.fetch()]);
        t.onStart({}, function() {
            return r.then(function() {
                return !0
            })
        })
    }]), p.config(function() {
        var e = !!window.beStartGame;
        e || $("#edge-ui").addClass("browser");
        var t = {
            cancellation: !0,
            longStackTraces: !1,
            warnings: !e && {
                wForgottenReturn: !1
            }
        };
        a.config(t), window.Promise.config(t)
    }), p.run(["$translate", "externalService", "graphicConfigService", "configLoader", function(e, t, n, a) {
        a.getConfig().then(function(n) {
            var o = n.locale || "ko";
            e.use(o), s.element(document.body).attr("locale", o), i("ko" === o ? 259 : 260);
            var a = n.loglevel && "debug" !== n.loglevel ? n.loglevel : "debug";
            return t.isDevelopment() || (a = "silent"), r.setLevel(a), window.log.setLevel(a), n.useHttpDns && n.httpDnsServer && u.setServerAddr(n.httpDnsServer), d.requestConfig.url = n.apiServer, n
        }).then(function(e) {
            return o.EventEmitter.defaultMaxListeners = c.EventEmitterMaxListeners, n.setInitialViewScale(), TweenMax.ticker.fps(c.TweenMaxFps), TweenMax.globalTimeScale(c.globalTimeScale), e
        }).catch(function(e) {
            r.error("config initialization failed", e)
        })
    }]), p.run(["$rootScope", "$location", "$state", function(e, t, i) {
        var n = t.search();
        if (n.playFla) var r = e.$on("$locationChangeSuccess", function(e) {
            r(), e.preventDefault(), i.go("root.flaPlayer", {
                name: n.playFla,
                ignoreScripts: n.ignoreScripts
            })
        });
        else if (n.webkitTest) var o = e.$on("$locationChangeSuccess", function(e) {
            o(), e.preventDefault(), i.go("root.coreLevelTest", {
                testmode: "webkit"
            })
        })
    }]), p.config(["$compileProvider", "$windowProvider", function(e, t) {
        var i = t.$get();
        r.trace("$window.beStartGame for debugInfoEnabled > ", i.beStartGame), i.beStartGame && e.debugInfoEnabled(!1)
    }]), p.config(["$windowProvider", function(e) {
        e.$get().beStartGame && !/development/.test(navigator.userAgent) || i(1655)
    }])
}, function(e, t) {
    ! function(e) {
        if (!e.beStartGame || /development/.test(navigator.userAgent)) {
            var t = "debug.tweenmaxPauseMode";
            e._tweenMaxPauseEnabled = function() {
                return "true" === localStorage.getItem(t)
            };
            var i;
            e._toggleTweenMaxPause = function() {
                if (i) return $(document.body).off("keydown", i), i = void 0, void localStorage.setItem(t, "false");
                var e, n;
                i = function(t) {
                    80 === t.which && (e ? (e.resume(), n.resume(), e = n = void 0) : (e = TimelineLite.exportRoot(), n = TimelineLite.exportRoot({
                        useFrames: !0
                    }), e.pause(), n.pause()))
                }, $(document.body).on("keydown", i), localStorage.setItem(t, "true")
            }, e._tweenMaxPauseEnabled() && e._toggleTweenMaxPause()
        }
    }(window)
}, function(e, t, i) {
    "use strict";
    angular.module("ui.preloadimage", []).factory("preloadImage", ["$q", function(e) {
        return {
            load: function(t, i) {
                return e.all(i.map(function(i) {
                    var n = e.defer();
                    return $(new Image).load(function(e) {
                        n.resolve(e.target)
                    }).error(function() {
                        n.resolve()
                    }).prop("src", "images/" + t + "/" + i), n.promise
                }))
            }
        }
    }])
}], [665]);